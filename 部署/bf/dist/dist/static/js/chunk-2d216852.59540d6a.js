(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216852"],{c38d:function(e,t,n){(function(e,t){(function(e,i){t.exports=i()})(0,(function(){"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function l(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,i){return t=g(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return u(e)||h(e)||x(e)||p()}function u(e){if(Array.isArray(e))return f(e)}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e,t){if(e){if("string"===typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=x(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw o}}}}function _(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(e){var t=_(e,"string");return"symbol"===typeof t?t:String(t)}var y=function(){function e(t,i){r(this,e),this.coreX=t,this.coreY=i}return l(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}}]),e}();Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e};var b=function(e,t,i,n){var a=document.getElementsByTagName("head")[0].getElementsByTagName("script"),o=!1;if(i)o=i();else for(var r=0;r<a.length;r++)a[r].getAttribute("src")==e&&(o=!0,a[r].readyState?a[r].onreadystatechange=function(){"complete"!=a[r].readyState&&"loaded"!=a[r].readyState||(a[r].onreadystatechange=null,t(n))}:a[r].onload=function(){t(n)});if(o)setTimeout((function(){t(n)}),15);else{var s=document.createElement("script");s.setAttribute("src",e),s.setAttribute("crossorigin",!0),s.onload=function(){return t(n)},document.getElementsByTagName("head")[0].appendChild(s)}},S=function(e,t){for(var i=document.getElementsByTagName("head")[0].getElementsByTagName("link"),n=!1,a=0;a<i.length;a++)i[a].getAttribute("href")==e&&(n=!0);if(!n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=t,document.getElementsByTagName("head")[0].appendChild(o)}},C=function(e){return!!e&&("object"===o(e)||"function"===typeof e)&&"function"===typeof e.then},w=function(e,t){var i=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),n=(t||window.location.href).match(i);return decodeURIComponent(n?n[2]:"")},T=function(e,t){var i=t.parentNode;i.lastChild==t?i.appendChild(e):i.insertBefore(e,t.nextSibling)},P=function(e){if(console.log("requestFullScreen",document.getElementById(e)),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))e.webkitRequestFullScreen();else{var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if("undefined"!==typeof window.ActiveXObject){var i=new window.ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}}},E=function(e){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight,n=e,a="";a+="width:"+i+"px;",a+="height:"+t+"px;",a+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);",a+="-webkit-transform-origin: "+t/2+"px "+t/2+"px;",a+="transform-origin: "+t/2+"px "+t/2+"px;",a+="position: fixed;top: 0;left: 0;z-index:10",n.style.cssText=a},k=function(e){P(e);var t=new Promise((function(e,t){var i=setInterval((function(){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(t)return clearInterval(i),e(!0)}),100),n=setTimeout((function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;e||t(!1),clearTimeout(n)}),2e3)}));return t},R=function(e,t,i){var n="";n+="width:"+t+"px;",n+="height:"+i+"px;",n+="-webkit-transform: none; transform: none;",n+="-webkit-transform-origin: 0 0;",n+="transform-origin: 0 0;",e.style.cssText=n},I=function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},D=function(e){I();var t=new Promise((function(e,t){var i=setInterval((function(){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(!t)return clearInterval(i),e(!0)}),50),n=setTimeout((function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;e&&t(!1),clearTimeout(n)}),2e3)}));return t},M=function(e){var t=e.split("/")[3],i=e.split("/")[4].split(".")[0],n=2===e.split("/")[2].split("@").length?e.split("/")[2].split("@")[0]:"",a=-1!==e.indexOf(".hd"),o=e.split("/")[4].split(".")[e.split("/")[4].split(".").length-1].split("?")[0];return"rec"===o&&-1!==e.indexOf(".cloud.rec")&&(o="cloud.rec"),{deviceSerial:t,channelNo:i,validCode:n,hd:a,type:o}},A=function(e){var t=/\/([A-Za-z\d]{9})\_(\d)\_(\d)/,i=e.match(t);if(i.length>3){var n=i[1],a=i[2],o="1"===i[3],r="live";return e.indexOf("rec=local")>-1?r="rec":e.indexOf("rec=cloud")>-1&&(r="cloud.rec"),{deviceSerial:n,channelNo:a,hd:o,type:r}}return{}};function B(e){if("string"===typeof e)try{var t=JSON.parse(e);return!("object"!==o(t)||!t)}catch(ia){return!1}console.log("It is not a string!")}var L=function(e,t,i,n,a,r){var s=e,l=new XMLHttpRequest;l.onreadystatechange=function(){if(4==l.readyState&&200==l.status)if(B(l.responseText)){var e=JSON.parse(l.responseText);a(e)}else a(l.responseText)},l.open(t,s,!0);var d=new FormData;for(var c in i)d.append(c,i[c]);if(n&&"object"===o(n))for(var c in n)l.setRequestHeader(c,n[c]);l.send(d)},F=function(){return!!window&&navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone|Opera Mini)/i)},j=function(){function e(t,i){var n=this;r(this,e),b("https://open.ys7.com/assets/ezuikit_v3.4/js/hls.js",(function(){console.log("加载hls.min.js成功",window.Hls),console.log("isSupportHls",window.Hls.isSupported()),window.Hls.isSupported()&&n.initHLS(t,i)}),(function(){return!!window.Hls}))}return l(e,[{key:"toString",value:function(){return"hls ".concat(this.coreX,"-").concat(this.coreY)}},{key:"initHLS",value:function(e,t){var i=A(t),n=i.deviceSerial,a=i.channelNo;i.hd,window.ezuikitMonitor.report({protocol:"hls",url:t,serial:n,no:a,action:1});var o=document.getElementById(e),r=new window.Hls({defaultAudioCodec:"mp4a.40.2"});r.loadSource(t),r.attachMedia(o),r.on(window.Hls.Events.MANIFEST_PARSED,(function(){o.play()})),r.on(window.Hls.Events.ERROR,(function(e,t){if(t.fatal)switch(t.type){case window.Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),r.startLoad();break;case window.Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),r.recoverMediaError();break;default:r.destroy();break}})),this.hls=r,this.video=o,this.hlsUrl=t}},{key:"play",value:function(){console.log("执行hls播放",this.video),this.hls.startLoad(),this.video.play()}},{key:"stop",value:function(){this.video.pause(),this.hls.stopLoad()}}]),e}(),z="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function O(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var N={exports:{}};(function(e,t){!function(t,i){e.exports=i()}(self,()=>(()=>{var e={99:e=>{var t,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,n){function a(i){e.removeListener(t,o),n(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",a),i([].slice.call(arguments))}p(e,t,o,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&p(e,"error",t,i)}(e,a,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,i,n){var a,o,r,d;if(s(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),r=o[t]),void 0===r)r=o[t]=i,++e._eventsCount;else if("function"==typeof r?r=o[t]=n?[i,r]:[r,i]:n?r.unshift(i):r.push(i),(a=l(e))>0&&r.length>a&&!r.warned){r.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=r.length,d=c,console&&console.warn&&console.warn(d)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},a=c.bind(n);return a.listener=i,n.wrapFn=a,a}function h(e,t,i){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?i?[a.listener||a]:[a]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(a):f(a,a.length)}function x(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function p(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(o){n.once&&e.removeEventListener(t,a),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var s=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw s.context=r,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var d=l.length,c=f(l,d);for(i=0;i<d;++i)n(c[i],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,n,a,o,r;if(s(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){r=i[o].listener,a=o;break}if(a<0)return this;0===a?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,a),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,r||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var a,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(a=o[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):x.call(e,t)},o.prototype.listenerCount=x,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},994:(e,t,i)=>{i.d(t,{Z:()=>n});const n=class{constructor(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}isComplete(){const e=!this.hasAudio||this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!this.hasVideo||this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&e&&t}isSeekable(){return this.hasKeyframesIndex}getNearestKeyframe(e){if(null==this.keyframesIndex)return null;const t=this.keyframesIndex,i=this._search(t.times,e);return{index:i,milliseconds:t.times[i],fileposition:t.filepositions[i]}}_search(e,t){let i=0;const n=e.length-1;let a=0,o=0,r=n;for(t<e[0]&&(i=0,o=r+1);o<=r;){if(a=o+Math.floor((r-o)/2),a===n||t>=e[a]&&t<e[a+1]){i=a;break}e[a]<t?o=a+1:r=a-1}return i}}},68:(e,t,i)=>{i.d(t,{J1:()=>r,Vn:()=>o,Wk:()=>n,Yy:()=>a});class n{constructor(e,t,i,n,a){this.dts=e,this.pts=t,this.duration=i,this.originalDts=n,this.isSyncPoint=a,this.fileposition=null}}class a{constructor(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}appendSyncPoint(e){e.isSyncPoint=!0,this.syncPoints.push(e)}}class o{constructor(){this._list=[]}clear(){this._list=[]}appendArray(e){const t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))}getLastSyncPointBeforeDts(e){if(0===this._list.length)return null;const t=this._list;let i=0;const n=t.length-1;let a=0,o=0,r=n;for(e<t[0].dts&&(i=0,o=r+1);o<=r;){if(a=o+Math.floor((r-o)/2),a===n||e>=t[a].dts&&e<t[a+1].dts){i=a;break}t[a].dts<e?o=a+1:r=a-1}return this._list[i]}}class r{constructor(e){this._type=e,this._list=[],this._lastAppendLocation=-1}get type(){return this._type}get length(){return this._list.length}isEmpty(){return 0===this._list.length}clear(){this._list=[],this._lastAppendLocation=-1}_searchNearestSegmentBefore(e){var t;const i=this._list;if(0===i.length)return-2;const n=i.length-1;let a=0,o=0,r=n,s=0;if(e<i[0].originalBeginDts)return s=-1,s;for(;o<=r;){if(a=o+Math.floor((r-o)/2),a===n||e>((null===(t=i[a].lastSample)||void 0===t?void 0:t.originalDts)||0)&&e<i[a+1].originalBeginDts){s=a;break}i[a].originalBeginDts<e?o=a+1:r=a-1}return s}_searchNearestSegmentAfter(e){return this._searchNearestSegmentBefore(e)+1}append(e){var t,i;const n=this._list,a=e,o=this._lastAppendLocation;let r=0;-1!==o&&o<n.length&&a.originalBeginDts>=((null===(i=null===(t=n[o])||void 0===t?void 0:t.lastSample)||void 0===i?void 0:i.originalDts)||0)&&(o===n.length-1||o<n.length-1&&a.originalBeginDts<n[o+1].originalBeginDts)?r=o+1:n.length>0&&(r=this._searchNearestSegmentBefore(a.originalBeginDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,a)}getLastSegmentBefore(e){const t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}getLastSampleBefore(e){const t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null}getLastSyncPointBefore(e){let t=this._searchNearestSegmentBefore(e),i=this._list[t].syncPoints;for(;0===i.length&&t>0;)t--,i=this._list[t].syncPoints;return i.length>0?i[i.length-1]:null}}},943:(e,t,i)=>{i.d(t,{Z:()=>Me});var n=i(99),a=i(645),o=i(479),r=i(994);function s(e,t,i){const n=e;if(t+i<n.length){for(;i--;)if(128!=(192&n[++t]))return!1;return!0}return!1}const l=function(e){const t=[],i=e;let n=0;const a=e.length;for(;n<a;)if(i[n]<128)t.push(String.fromCharCode(i[n])),++n;else{if(i[n]<192);else if(i[n]<224){if(s(i,n,1)){const e=(31&i[n])<<6|63&i[n+1];if(e>=128){t.push(String.fromCharCode(65535&e)),n+=2;continue}}}else if(i[n]<240){if(s(i,n,2)){const e=(15&i[n])<<12|(63&i[n+1])<<6|63&i[n+2];if(e>=2048&&55296!=(63488&e)){t.push(String.fromCharCode(65535&e)),n+=3;continue}}}else if(i[n]<248&&s(i,n,3)){let e=(7&i[n])<<18|(63&i[n+1])<<12|(63&i[n+2])<<6|63&i[n+3];if(e>65536&&e<1114112){e-=65536,t.push(String.fromCharCode(e>>>10|55296)),t.push(String.fromCharCode(1023&e|56320)),n+=4;continue}}t.push(String.fromCharCode(65533)),++n}return t.join("")};var d=i(411);const c=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();class u{static parseScriptData(e,t,i){const n={};try{const a=u.parseValue(e,t,i),o=u.parseValue(e,t+a.size,i-a.size);n[a.data]=o.data}catch(e){a.Z.e("AMF",e.toString())}return n}static parseObject(e,t,i){if(i<3)throw new d.rT("Data not enough when parse ScriptDataObject");const n=u.parseString(e,t,i),a=u.parseValue(e,t+n.size,i-n.size),o=a.objectEnd;return{data:{name:n.data,value:a.data},size:n.size+a.size,objectEnd:o}}static parseVariable(e,t,i){return u.parseObject(e,t,i)}static parseString(e,t,i){if(i<2)throw new d.rT("Data not enough when parse String");const n=new DataView(e,t,i).getUint16(0,!c);let a;return a=n>0?l(new Uint8Array(e,t+2,n)):"",{data:a,size:2+n}}static parseLongString(e,t,i){if(i<4)throw new d.rT("Data not enough when parse LongString");const n=new DataView(e,t,i).getUint32(0,!c);let a;return a=n>0?l(new Uint8Array(e,t+4,n)):"",{data:a,size:4+n}}static parseDate(e,t,i){if(i<10)throw new d.rT("Data size invalid when parse Date");const n=new DataView(e,t,i);let a=n.getFloat64(0,!c);return a+=60*n.getInt16(8,!c)*1e3,{data:new Date(a),size:10}}static parseValue(e,t,i){if(i<1)throw new d.rT("Data not enough when parse Value");const n=new DataView(e,t,i);let o=1;const r=n.getUint8(0);let s,l=!1;try{switch(r){case 0:s=n.getFloat64(1,!c),o+=8;break;case 1:s=!!n.getUint8(1),o+=1;break;case 2:{const n=u.parseString(e,t+1,i-1);s=n.data,o+=n.size;break}case 3:{s={};let a=0;for(9==(16777215&n.getUint32(i-4,!c))&&(a=3);o<i-4;){const n=u.parseObject(e,t+o,i-o-a);if(n.objectEnd)break;s[n.data.name]=n.data.value,o+=n.size}o<=i-3&&9===(16777215&n.getUint32(o-1,!c))&&(o+=3);break}case 8:{s={},o+=4;let a=0;for(9==(16777215&n.getUint32(i-4,!c))&&(a=3);o<i-8;){const n=u.parseVariable(e,t+o,i-o-a);if(n.objectEnd)break;s[n.data.name]=n.data.value,o+=n.size}o<=i-3&&9===(16777215&n.getUint32(o-1,!c))&&(o+=3);break}case 9:s=void 0,o=1,l=!0;break;case 10:{s=[];const a=n.getUint32(1,!c);o+=4;for(let n=0;n<a;n++){const n=u.parseValue(e,t+o,i-o);s.push(n.data),o+=n.size}break}case 11:{const n=u.parseDate(e,t+1,i-1);s=n.data,o+=n.size;break}case 12:{const n=u.parseString(e,t+1,i-1);s=n.data,o+=n.size;break}default:o=i,a.Z.w("AMF","Unsupported AMF value type "+r.toString())}}catch(e){a.Z.e("AMF",e.toString())}return{data:s,size:o,objectEnd:l}}}const h=u,x=class{constructor(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}destroy(){this._buffer=null}_fillCurrentWord(){var e;const t=this._total_bytes-this._buffer_index;if(t<=0)throw new d.rT("ExpGolomb: _fillCurrentWord() but no bytes available");const i=Math.min(4,t),n=new Uint8Array(4);n.set(null===(e=this._buffer)||void 0===e?void 0:e.subarray(this._buffer_index,this._buffer_index+i)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=i,this._current_word_bits_left=8*i}readBits(e){if(e>32)throw new d.OC("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){const t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}let t=this._current_word_bits_left?this._current_word:0;t>>>=32-this._current_word_bits_left;const i=e-this._current_word_bits_left;this._fillCurrentWord();const n=Math.min(i,this._current_word_bits_left),a=this._current_word>>>32-n;return this._current_word<<=n,this._current_word_bits_left-=n,t=t<<n|a,t}readBool(){return 1===this.readBits(1)}readByte(){return this.readBits(8)}_skipLeadingZero(){let e;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}readUEG(){const e=this._skipLeadingZero();return this.readBits(e+1)-1}readSEG(){const e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}};class f{static _ebsp2rbsp(e){const t=e,i=t.byteLength,n=new Uint8Array(i);let a=0;for(let o=0;o<i;o++)o>=2&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(n[a]=t[o],a++);return new Uint8Array(n.buffer,0,a)}static parseSPS(e){const t=e.subarray(1,4);let i="avc1.";for(let x=0;x<3;x++){let e=t[x].toString(16);e.length<2&&(e="0"+e),i+=e}const n=f._ebsp2rbsp(e);let a=new x(n);a.readByte();const o=a.readByte();a.readByte();const r=a.readByte();a.readUEG();const s=f.getProfileString(o),l=f.getLevelString(r);let d=1,c=420;const u=[0,420,422,444];let h=8,p=8;if((100===o||110===o||122===o||244===o||44===o||83===o||86===o||118===o||128===o||138===o||144===o)&&(d=a.readUEG(),3===d&&a.readBits(1),d<=3&&(c=u[d]),h=a.readUEG()+8,p=a.readUEG()+8,a.readBits(1),a.readBool())){const e=3!==d?8:12;for(let t=0;t<e;t++)a.readBool()&&(t<6?f._skipScalingList(a,16):f._skipScalingList(a,64))}a.readUEG();const m=a.readUEG();if(0===m)a.readUEG();else if(1===m){a.readBits(1),a.readSEG(),a.readSEG();const e=a.readUEG();for(let t=0;t<e;t++)a.readSEG()}const _=a.readUEG();a.readBits(1);const g=a.readUEG(),v=a.readUEG(),y=a.readBits(1);0===y&&a.readBits(1),a.readBits(1);let b=0,S=0,C=0,w=0;a.readBool()&&(b=a.readUEG(),S=a.readUEG(),C=a.readUEG(),w=a.readUEG());let T=1,P=1,E=0,k=!0,R=0,I=0;if(a.readBool()){if(a.readBool()){const e=a.readByte();e>0&&e<16?(T=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],P=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(T=a.readByte()<<8|a.readByte(),P=a.readByte()<<8|a.readByte())}if(a.readBool()&&a.readBool(),a.readBool()&&(a.readBits(4),a.readBool()&&a.readBits(24)),a.readBool()&&(a.readUEG(),a.readUEG()),a.readBool()){const e=a.readBits(32),t=a.readBits(32);k=a.readBool(),R=t,I=2*e,E=R/I}}let D=1;1===T&&1===P||(D=T/P);let M=0,A=0;0===d?(M=1,A=2-y):(M=3===d?1:2,A=(1===d?2:1)*(2-y));let B=16*(g+1),L=16*(v+1)*(2-y);B-=(b+S)*M,L-=(C+w)*A;const F=Math.ceil(B*D);return a.destroy(),a=null,{codec_mimetype:i,profile_idc:o,level_idc:r,profile_string:s,level_string:l,chroma_format_idc:d,bit_depth:h,bit_depth_luma:h,bit_depth_chroma:p,ref_frames:_,chroma_format:c,chroma_format_string:f.getChromaFormatString(c),frame_rate:{fixed:k,fps:E,fps_den:I,fps_num:R},sar_ratio:{width:T,height:P},codec_size:{width:B,height:L},present_size:{width:F,height:L}}}static _skipScalingList(e,t){let i=8,n=8,a=0;for(let o=0;o<t;o++)0!==n&&(a=e.readSEG(),n=(i+a+256)%256),i=0===n?i:n}static getProfileString(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}static getLevelString(e){return(e/10).toFixed(1)}static getChromaFormatString(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}const p=f;var m=i(898);class _{static _ebsp2rbsp(e){const t=e,i=t.byteLength,n=new Uint8Array(i);let a=0;for(let o=0;o<i;o++)o>=2&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(n[a]=t[o],a++);return new Uint8Array(n.buffer,0,a)}static parseVPS(e){const t=_._ebsp2rbsp(e),i=new x(t);return i.readByte(),i.readByte(),i.readBits(4),i.readBits(2),i.readBits(6),{num_temporal_layers:i.readBits(3)+1,temporal_id_nested:i.readBool()}}static parseSPS(e){const t=_._ebsp2rbsp(e);let i=new x(t);i.readByte(),i.readByte();let n=0,a=0,o=0,r=0;i.readBits(4);const s=i.readBits(3),l=(i.readBool(),i.readBits(2)),d=i.readBool(),c=i.readBits(5),u=i.readByte(),h=i.readByte(),f=i.readByte(),p=i.readByte(),m=i.readByte(),g=i.readByte(),v=i.readByte(),y=i.readByte(),b=i.readByte(),S=i.readByte(),C=i.readByte(),w=[],T=[];for(let x=0;x<s;x++)w.push(i.readBool()),T.push(i.readBool());if(s>0)for(let x=s;x<8;x++)i.readBits(2);for(let x=0;x<s;x++)w[x]&&(i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte()),T[x]&&i.readByte();i.readUEG();const P=i.readUEG();3===P&&i.readBits(1);const E=i.readUEG(),k=i.readUEG();i.readBool()&&(n+=i.readUEG(),a+=i.readUEG(),o+=i.readUEG(),r+=i.readUEG());const R=i.readUEG(),I=i.readUEG(),D=i.readUEG();for(let x=i.readBool()?0:s;x<=s;x++)i.readUEG(),i.readUEG(),i.readUEG();if(i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readBool()&&i.readBool())for(let x=0;x<4;x++)for(let e=0;e<(3===x?2:6);e++)if(i.readBool()){const e=Math.min(64,1<<4+(x<<1));x>1&&i.readSEG();for(let t=0;t<e;t++)i.readSEG()}else i.readUEG();i.readBool(),i.readBool(),i.readBool()&&(i.readByte(),i.readUEG(),i.readUEG(),i.readBool());const M=i.readUEG();let A=0;for(let x=0;x<M;x++){let e=!1;if(0!==x&&(e=i.readBool()),e){x===M&&i.readUEG(),i.readBool(),i.readUEG();let e=0;for(let t=0;t<=A;t++){const t=i.readBool();let n=!1;t||(n=i.readBool()),(t||n)&&e++}A=e}else{const e=i.readUEG(),t=i.readUEG();A=e+t;for(let n=0;n<e;n++)i.readUEG(),i.readBool();for(let n=0;n<t;n++)i.readUEG(),i.readBool()}}if(i.readBool()){const e=i.readUEG();for(let t=0;t<e;t++){for(let e=0;e<D+4;e++)i.readBits(1);i.readBits(1)}}let B=!1,L=0,F=1,j=1,z=!1,O=1,N=1;if(i.readBool(),i.readBool(),i.readBool()){if(i.readBool()){const e=i.readByte();e>0&&e<=16?(F=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],j=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(F=i.readBits(16),j=i.readBits(16))}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(3),i.readBool(),i.readBool()&&(i.readByte(),i.readByte(),i.readByte())),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool(),i.readBool(),i.readBool(),B=i.readBool(),B&&(i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG()),i.readBool()&&(O=i.readBits(32),N=i.readBits(32),i.readBool()&&i.readUEG(),i.readBool())){let e=!1,t=!1,n=!1;e=i.readBool(),t=i.readBool(),(e||t)&&(n=i.readBool(),n&&(i.readByte(),i.readBits(5),i.readBool(),i.readBits(5)),i.readBits(4),i.readBits(4),n&&i.readBits(4),i.readBits(5),i.readBits(5),i.readBits(5));for(let a=0;a<=s;a++){const a=i.readBool();z=a;let o=!1,r=1;a||(o=i.readBool());let s=!1;if(o?i.readSEG():s=i.readBool(),s||(r=i.readUEG()+1),e)for(let e=0;e<r;e++)i.readUEG(),i.readUEG(),n&&(i.readUEG(),i.readUEG());if(t)for(let e=0;e<r;e++)i.readUEG(),i.readUEG(),n&&(i.readUEG(),i.readUEG())}}i.readBool()&&(i.readBool(),i.readBool(),i.readBool(),L=i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG())}i.readBool();const U=`hvc1.${c}.1.L${C}.B0`,H=E-(n+a)*(1===P||2===P?2:1),V=k-(o+r)*(1===P?2:1);let G=1;return 1!==F&&1!==j&&(G=F/j),i.destroy(),i=null,{codec_mimetype:U,level_string:_.getLevelString(C),profile_idc:c,bit_depth:R+8,ref_frames:1,chroma_format:P,chroma_format_string:_.getChromaFormatString(P),general_level_idc:C,general_profile_space:l,general_tier_flag:d,general_profile_idc:c,general_profile_compatibility_flags_1:u,general_profile_compatibility_flags_2:h,general_profile_compatibility_flags_3:f,general_profile_compatibility_flags_4:p,general_constraint_indicator_flags_1:m,general_constraint_indicator_flags_2:g,general_constraint_indicator_flags_3:v,general_constraint_indicator_flags_4:y,general_constraint_indicator_flags_5:b,general_constraint_indicator_flags_6:S,min_spatial_segmentation_idc:L,constant_frame_rate:0,chroma_format_idc:P,bit_depth_luma_minus8:R,bit_depth_chroma_minus8:I,frame_rate:{fixed:z,fps:N/O,fps_den:O,fps_num:N},sar_ratio:{width:F,height:j},codec_size:{width:H,height:V},present_size:{width:H*G,height:V}}}static parsePPS(e){const t=_._ebsp2rbsp(e),i=new x(t);i.readByte(),i.readByte(),i.readUEG(),i.readUEG(),i.readBool(),i.readBool(),i.readBits(3),i.readBool(),i.readBool(),i.readUEG(),i.readUEG(),i.readSEG(),i.readBool(),i.readBool(),i.readBool()&&i.readUEG(),i.readSEG(),i.readSEG(),i.readBool(),i.readBool(),i.readBool(),i.readBool();const n=i.readBool(),a=i.readBool();let o=1;return a&&n?o=0:a?o=3:n&&(o=2),{parallelismType:o}}static getChromaFormatString(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}}static getProfileString(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}}static getLevelString(e){return(e/30).toFixed(1)}}const g=_;function v(e){return e.byteOffset%2==0&&e.byteLength%2==0}function y(e){return e.byteOffset%4==0&&e.byteLength%4==0}function b(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const S=function(e,t){return e.byteLength===t.byteLength&&(y(e)&&y(t)?function(e,t){return b(new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4),new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4))}(e,t):v(e)&&v(t)?function(e,t){return b(new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2))}(e,t):function(e,t){return b(e,t)}(e,t))};class C{static parseOBUs(e){let t=null;for(let i=0;i<e.byteLength;){e[i];const n=(120&e[i])>>3,a=0!=(4&e[i]),o=0!=(2&e[i]);e[i],i+=1,a&&(i+=1);let r=Number.POSITIVE_INFINITY;if(o){r=0;for(let t=0;r|=(127&e[i])<<7*t,i+=1,0!=(128&e[i]);t++);}1===n&&(t=C.parseSeuqneceHeader(e.subarray(i,i+r))),i+=r}return t}static parseSeuqneceHeader(e){let t=new x(e);const i=t.readBits(3),n=(t.readBool(),t.readBool());let a=!0,o=0,r=0;const s=[];if(n)s.push({operating_point_idc:0,level:t.readBits(5),tier:0});else{if(t.readBool()){const e=t.readBits(32),i=t.readBits(32),n=t.readBool();if(n){let e=0;for(;;){if(0!==t.readBits(1))break;e+=1}e>=32||t.readBits(e)}r=e,o=i,a=n,t.readBool()&&(t.readBits(5),t.readBits(32),t.readBits(5),t.readBits(5))}const e=t.readBool(),i=t.readBits(5);for(let n=0;n<=i;n++){const i=t.readBits(12),n=t.readBits(5),a=n>7?t.readBits(1):0;s.push({operating_point_idc:i,level:n,tier:a}),e&&t.readBool()&&t.readBits(4)}}const{level:l,tier:d}=s[0],c=t.readBits(4),u=t.readBits(4),h=t.readBits(c+1)+1,f=t.readBits(u+1)+1;let p=!1;n||(p=t.readBool()),p&&(t.readBits(4),t.readBits(4)),t.readBool(),t.readBool(),t.readBool();let m=!1,_=2;n||(t.readBool(),t.readBool(),t.readBool(),t.readBool(),m=t.readBool(),m&&(t.readBool(),t.readBool()),_=t.readBool()?2:t.readBits(1),_&&(t.readBool()||t.readBits(1)),m&&t.readBits(3)),t.readBool(),t.readBool(),t.readBool();const g=t.readBool();let v=8;v=2===i&&g?t.readBool()?12:10:g?10:8;let y=!1;1!==i&&(y=t.readBool()),t.readBool()&&(t.readBits(8),t.readBits(8),t.readBits(8));let b=1,S=1;return y?(t.readBits(1),b=1,S=1):(t.readBits(1),0===i?(b=1,S=1):1===i?(b=0,S=0):12===v?t.readBits(1)&&t.readBits(1):(b=1,S=0),b&&S&&t.readBits(2),t.readBits(1)),t.readBool(),t.destroy(),t=null,{codec_mimetype:`av01.${i}.${C.getLevelString(l,d)}.${v.toString(10).padStart(2,"0")}`,level:l,tier:d,level_string:C.getLevelString(l,d),profile_idc:i,profile_string:""+i,bit_depth:v,ref_frames:1,chroma_format:C.getChromaFormat(y,b,S),chroma_format_string:C.getChromaFormatString(y,b,S),frame_rate:{fixed:a,fps:o/r,fps_den:r,fps_num:o},sar_ratio:{width:1,height:1},codec_size:{width:h,height:f},present_size:{width:1*h,height:f}}}static getLevelString(e,t){return`${e.toString(10).padStart(2,"0")}${0===t?"M":"H"}`}static getChromaFormat(e,t,i){return e?0:0===t&&0===i?3:1===t&&0===i?2:1===t&&1===i?1:Number.NaN}static getChromaFormatString(e,t,i){return e?"4:0:0":0===t&&0===i?"4:4:4":1===t&&0===i?"4:2:2":1===t&&1===i?"4:2:0":"Unknown"}}const w=C;class T{constructor(e,t){this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new r.Z,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}()}destroy(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null}static probe(e){const t=new Uint8Array(e);if(t.byteLength<9)return{needMoreData:!0};const i={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return i;const n=(4&t[4])>>>2!=0,a=0!=(1&t[4]),o=(r=t)[s=5]<<24|r[s+1]<<16|r[s+2]<<8|r[s+3];var r,s;return o<9?i:{match:!0,consumed:o,dataOffset:o,hasAudioTrack:n,hasVideoTrack:a}}bindDataSource(e){return e.onDataArrival=this.parseChunks.bind(this),this}get onTrackMetadata(){return this._onTrackMetadata}set onTrackMetadata(e){this._onTrackMetadata=e}get onMediaInfo(){return this._onMediaInfo}set onMediaInfo(e){this._onMediaInfo=e}get onMetaDataArrived(){return this._onMetaDataArrived}set onMetaDataArrived(e){this._onMetaDataArrived=e}get onScriptDataArrived(){return this._onScriptDataArrived}set onScriptDataArrived(e){this._onScriptDataArrived=e}get onError(){return this._onError}set onError(e){this._onError=e}get onDataAvailable(){return this._onDataAvailable}set onDataAvailable(e){this._onDataAvailable=e}get timestampBase(){return this._timestampBase}set timestampBase(e){this._timestampBase=e}get overridedDuration(){return this._duration}set overridedDuration(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo&&(this._mediaInfo.duration=e)}set overridedHasAudio(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo&&(this._mediaInfo.hasAudio=e)}set overridedHasVideo(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo&&(this._mediaInfo.hasVideo=e)}resetMediaInfo(){this._mediaInfo=new r.Z}_isInitialMetadataDispatched(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}parseChunks(e,t){var i,n;if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new d.rT("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");let o=0;const r=this._littleEndian;if(0===t){if(!(e.byteLength>13))return 0;{const t=T.probe(e);o=(null==t?void 0:t.dataOffset)||0}}for(this._firstParse&&(this._firstParse=!1,t+o!==this._dataOffset&&a.Z.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==new DataView(e,o).getUint32(0,!r)&&a.Z.w(this.TAG,"PrevTagSize0 !== 0 !!!"),o+=4);o<e.byteLength;){this._dispatch=!0;const i=new DataView(e,o);if(o+11+4>e.byteLength)break;const n=i.getUint8(0),s=16777215&i.getUint32(0,!r);if(o+11+s+4>e.byteLength)break;if(8!==n&&9!==n&&18!==n){a.Z.w(this.TAG,`Unsupported tag type ${n}, skipped`),o+=11+s+4;continue}const l=i.getUint8(4),d=i.getUint8(5),c=i.getUint8(6)|d<<8|l<<16|i.getUint8(7)<<24;0!==(16777215&i.getUint32(7,!r))&&a.Z.w(this.TAG,"Meet tag which has StreamID != 0!");const u=o+11;switch(n){case 8:this._parseAudioData(e,u,s,c);break;case 9:this._parseVideoData(e,u,s,c,t+o);break;case 18:this._parseScriptData(e,u,s)}const h=i.getUint32(11+s,!r);h!==11+s&&a.Z.w(this.TAG,"Invalid PrevTagSize "+h),o+=11+s+4}return this._isInitialMetadataDispatched()&&this._dispatch&&((null===(i=this._audioTrack)||void 0===i?void 0:i.length)||(null===(n=this._videoTrack)||void 0===n?void 0:n.length))&&this._onDataAvailable(this._audioTrack,this._videoTrack),o}_parseScriptData(e,t,i){var n,o,r;const s=h.parseScriptData(e,t,i);if(s.hasOwnProperty("onMetaData")){if(null==s.onMetaData||"object"!=typeof s.onMetaData)return void a.Z.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&a.Z.w(this.TAG,"Found another onMetaData tag!"),this._metadata=s;const e=null===(n=this._metadata)||void 0===n?void 0:n.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},e)),"boolean"==typeof(null==e?void 0:e.hasAudio)&&(this._hasAudioFlagOverrided||(this._hasAudio=e.hasAudio,this._mediaInfo&&(this._mediaInfo.hasAudio=this._hasAudio))),"boolean"==typeof(null==e?void 0:e.hasVideo)&&(this._hasVideoFlagOverrided||(this._hasVideo=e.hasVideo,this._mediaInfo&&(this._mediaInfo.hasVideo=this._hasVideo))),"number"==typeof(null==e?void 0:e.audiodatarate)&&this._mediaInfo&&(this._mediaInfo.audioDataRate=e.audiodatarate),"number"==typeof(null==e?void 0:e.videodatarate)&&this._mediaInfo&&(this._mediaInfo.videoDataRate=e.videodatarate),"number"==typeof(null==e?void 0:e.width)&&this._mediaInfo&&(this._mediaInfo.width=e.width),"number"==typeof(null==e?void 0:e.height)&&this._mediaInfo&&(this._mediaInfo.height=e.height),"number"==typeof(null==e?void 0:e.duration)){if(!this._durationOverrided){const t=Math.floor(e.duration*this._timescale);this._duration=t,this._mediaInfo&&(this._mediaInfo.duration=t)}}else this._mediaInfo&&(this._mediaInfo.duration=0);if("number"==typeof(null==e?void 0:e.framerate)){const t=Math.floor(1e3*e.framerate);if(t>0){const e=t/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=e,this._referenceFrameRate.fps_num=t,this._referenceFrameRate.fps_den=1e3,this._mediaInfo&&(this._mediaInfo.fps=e)}}if("object"==typeof(null==e?void 0:e.keyframes)){this._mediaInfo&&(this._mediaInfo.hasKeyframesIndex=!0);const t=e.keyframes;this._mediaInfo&&(this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(t)),e.keyframes=null}else this._mediaInfo&&(this._mediaInfo.hasKeyframesIndex=!1);this._dispatch=!1,this._mediaInfo&&(this._mediaInfo.metadata=e),a.Z.v(this.TAG,"Parsed onMetaData"),(null===(o=this._mediaInfo)||void 0===o?void 0:o.isComplete())&&(null===(r=this._onMediaInfo)||void 0===r||r.call(this,this._mediaInfo))}Object.keys(s).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},s))}_parseKeyframesIndex(e){const t=[],i=[];for(let n=1;n<e.times.length;n++){const a=this._timestampBase+Math.floor(1e3*e.times[n]);t.push(a),i.push(e.filepositions[n])}return{times:t,filepositions:i}}_parseAudioData(e,t,i,n){var o,r,s,l,d,c,u,h,x,f;if(i<=1)return void a.Z.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");if(this._hasAudioFlagOverrided&&!1===this._hasAudio)return;this._littleEndian;const p=new DataView(e,t,i).getUint8(0),_=p>>>4;if(2!==_&&10!==_)return void(null===(o=this._onError)||void 0===o||o.call(this,m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+_));let g=0;const v=(12&p)>>>2;if(!(v>=0&&v<=4))return void(null===(r=this._onError)||void 0===r||r.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+v));g=this._flvSoundRateTable[v];const y=1&p;let b=this._audioMetadata;const C=this._audioTrack;if(b||(!1!==this._hasAudio||this._hasAudioFlagOverrided||(this._hasAudio=!0,this._mediaInfo&&(this._mediaInfo.hasAudio=!0)),b=this._audioMetadata={},b.type="audio",b.id=null==C?void 0:C.id,b.timescale=this._timescale,b.duration=this._duration,b.audioSampleRate=g,b.channelCount=0===y?1:2),10===_){const o=this._parseAACAudioData(e,t+1,i-1);if(void 0===o)return;if(0===(null==o?void 0:o.packetType)){if(null==b?void 0:b.config){if(S(o.data.config,null==b?void 0:b.config))return;a.Z.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}const e=o.data;b.audioSampleRate=null==e?void 0:e.samplingRate,b.channelCount=null==e?void 0:e.channelCount,b.codec=null==e?void 0:e.codec,b.originalCodec=null==e?void 0:e.originalCodec,b.config=null==e?void 0:e.config,b.refSampleDuration=1024/b.audioSampleRate*b.timescale,a.Z.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(s=this._audioTrack)||void 0===s?void 0:s.length)||(null===(l=this._videoTrack)||void 0===l?void 0:l.length))&&(null===(d=this._onDataAvailable)||void 0===d||d.call(this,this._audioTrack,this._videoTrack)):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,null===(c=this._onTrackMetadata)||void 0===c||c.call(this,"audio",b);const t=this._mediaInfo;t.audioCodec=b.originalCodec||"",t.audioSampleRate=b.audioSampleRate,t.audioChannelCount=b.channelCount,t.hasVideo?null!=t.videoCodec&&(t.mimeType='video/x-flv; codecs="'+t.videoCodec+","+t.audioCodec+'"'):t.mimeType='video/x-flv; codecs="'+t.audioCodec+'"',(null==t?void 0:t.isComplete())&&(null===(u=this._onMediaInfo)||void 0===u||u.call(this,t))}else if(1===o.packetType){const e=this._timestampBase+n,t={unit:o.data,length:o.data.byteLength,dts:e,pts:e};C&&(null==C||C.samples.push(t),C.length+=(null===(h=null==o?void 0:o.data)||void 0===h?void 0:h.length)||0)}else a.Z.e(this.TAG,"Flv: Unsupported AAC data type "+o.packetType)}else if(2===_){if(!b.codec){const n=this._parseMP3AudioData(e,t+1,i-1,!0);if(void 0===n)return;b.audioSampleRate=n.samplingRate,b.channelCount=n.channelCount,b.codec=n.codec,b.originalCodec=n.originalCodec,b.refSampleDuration=1152/b.audioSampleRate*b.timescale,a.Z.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,null===(x=this._onTrackMetadata)||void 0===x||x.call(this,"audio",b);const o=this._mediaInfo;o.audioCodec=b.codec,o.audioSampleRate=b.audioSampleRate,o.audioChannelCount=b.channelCount,o.audioDataRate=n.bitRate,(null==o?void 0:o.hasVideo)?null!=o.videoCodec&&(o.mimeType='video/x-flv; codecs="'+o.videoCodec+","+o.audioCodec+'"'):o.mimeType='video/x-flv; codecs="'+o.audioCodec+'"',o.isComplete()&&(null===(f=this._onMediaInfo)||void 0===f||f.call(this,o))}const o=this._parseMP3AudioData(e,t+1,i-1,!1);if(void 0===o)return;const r=this._timestampBase+n,s={unit:o,length:o.byteLength,dts:r,pts:r};null==C||C.samples.push(s),C&&(C.length+=o.length)}}_parseAACAudioData(e,t,i){if(i<=1)return void a.Z.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");const n={},o=new Uint8Array(e,t,i);return n.packetType=o[0],0===o[0]?n.data=this._parseAACAudioSpecificConfig(e,t+1,i-1):n.data=o.subarray(1),n}_parseAACAudioSpecificConfig(e,t,i){var n,a;const o=new Uint8Array(e,t,i);let r=null,s=0,l=0,d=0,c=null;if(s=l=o[0]>>>3,d=(7&o[0])<<1|o[1]>>>7,d<0||d>=this._mpegSamplingRates.length)return void(null===(n=this._onError)||void 0===n||n.call(this,m.Z.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!"));const u=this._mpegSamplingRates[d],h=(120&o[1])>>>3;if(h<0||h>=8)return void(null===(a=this._onError)||void 0===a||a.call(this,m.Z.FORMAT_ERROR,"Flv: AAC invalid channel configuration"));5===s&&(c=(7&o[1])<<1|o[2]>>>7,o[2]);const x=self.navigator.userAgent.toLowerCase();return x.includes("firefox")?d>=6?(s=5,r=new Array(4),c=d-3):(s=2,r=new Array(2),c=d):x.includes("android")?(s=2,r=new Array(2),c=d):(s=5,c=d,r=new Array(4),d>=6?c=d-3:1===h&&(s=2,r=new Array(2),c=d)),r[0]=s<<3,r[0]|=(15&d)>>>1,r[1]=(15&d)<<7,r[1]|=(15&h)<<3,5===s&&(r[1]|=(15&c)>>>1,r[2]=(1&c)<<7,r[2]|=8,r[3]=0),{config:r,samplingRate:u,channelCount:h,codec:"mp4a.40."+s,originalCodec:"mp4a.40."+l}}_parseMP3AudioData(e,t,i,n){if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");this._littleEndian;const o=new Uint8Array(e,t,i);let r;if(n){if(255!==o[0])return;const e=o[1]>>>3&3,t=(6&o[1])>>1,i=(240&o[2])>>>4,n=(12&o[2])>>>2,a=3!==(o[3]>>>6&3)?2:1;let s=0,l=0;const d="mp3";switch(e){case 0:s=this._mpegAudioV25SampleRateTable[n];break;case 2:s=this._mpegAudioV20SampleRateTable[n];break;case 3:s=this._mpegAudioV10SampleRateTable[n]}switch(t){case 1:i<this._mpegAudioL3BitRateTable.length&&(l=this._mpegAudioL3BitRateTable[i]);break;case 2:i<this._mpegAudioL2BitRateTable.length&&(l=this._mpegAudioL2BitRateTable[i]);break;case 3:i<this._mpegAudioL1BitRateTable.length&&(l=this._mpegAudioL1BitRateTable[i])}r={bitRate:l,samplingRate:s,channelCount:a,codec:d,originalCodec:d}}else r=o;return r}_parseVideoData(e,t,i,n,o){var r,s;if(i<=1)return void a.Z.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");if(this._hasVideoFlagOverrided&&!1===this._hasVideo)return;const l=new Uint8Array(e,t,i)[0],d=(112&l)>>>4;if(0!=(128&l)){const a=15&l,r=String.fromCharCode(...new Uint8Array(e,t,i).slice(1,5));"hvc1"===r?this._parseEnhancedHEVCVideoPacket(e,t+5,i-5,n,o,d,a):"av01"===r?this._parseEnhancedAV1VideoPacket(e,t+5,i-5,n,o,d,a):null===(s=this._onError)||void 0===s||s.call(this,m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+r)}else{const a=15&l;7===a?this._parseAVCVideoPacket(e,t+1,i-1,n,o,d):12===a?this._parseHEVCVideoPacket(e,t+1,i-1,n,o,d):null===(r=this._onError)||void 0===r||r.call(this,m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+a)}}_parseAVCVideoPacket(e,t,i,n,o,r){var s;if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");const l=this._littleEndian,d=new DataView(e,t,i),c=d.getUint8(0),u=(16777215&d.getUint32(0,!l))<<8>>8;0===c?this._parseAVCDecoderConfigurationRecord(e,t+4,i-4):1===c?this._parseAVCVideoData(e,t+4,i-4,n,o,r,u):2===c||null===(s=this._onError)||void 0===s||s.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid video packet type "+c)}_parseHEVCVideoPacket(e,t,i,n,o,r){var s;if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");const l=this._littleEndian,d=new DataView(e,t,i),c=d.getUint8(0),u=(16777215&d.getUint32(0,!l))<<8>>8;0===c?this._parseHEVCDecoderConfigurationRecord(e,t+4,i-4):1===c?this._parseHEVCVideoData(e,t+4,i-4,n,o,r,u):2===c||null===(s=this._onError)||void 0===s||s.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid video packet type "+c)}_parseEnhancedHEVCVideoPacket(e,t,i,n,a,o,r){var s;const l=this._littleEndian,d=new DataView(e,t,i);if(0===r)this._parseHEVCDecoderConfigurationRecord(e,t,i);else if(1===r){const r=(4294967040&d.getUint32(0,!l))>>8;this._parseHEVCVideoData(e,t+3,i-3,n,a,o,r)}else 3===r?this._parseHEVCVideoData(e,t,i,n,a,o,0):2===r||null===(s=this._onError)||void 0===s||s.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid video packet type "+r)}_parseEnhancedAV1VideoPacket(e,t,i,n,a,o,r){var s,l;this._littleEndian,0===r?this._parseAV1CodecConfigurationRecord(e,t,i):1===r?this._parseAV1VideoData(e,t,i,n,a,o,0):5===r?null===(s=this._onError)||void 0===s||s.call(this,m.Z.FORMAT_ERROR,"Flv: Not Suported MP2T AV1 video packet type "+r):2===r||null===(l=this._onError)||void 0===l||l.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid video packet type "+r)}_parseAVCDecoderConfigurationRecord(e,t,i){var n,o,r,s,l,d,c,u,h,x,f;if(i<7)return void a.Z.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");let _=this._videoMetadata;const g=this._videoTrack,v=this._littleEndian,y=new DataView(e,t,i);if(_){if(void 0!==_.avcc){const n=new Uint8Array(e,t,i);if(S(n,_.avcc))return;a.Z.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1!==this._hasVideo||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),_=this._videoMetadata={},_.type="video",_.id=null==g?void 0:g.id,_.timescale=this._timescale,_.duration=this._duration;const b=y.getUint8(0),C=y.getUint8(1);if(y.getUint8(2),y.getUint8(3),1!==b||0===C)return void(null===(n=this._onError)||void 0===n||n.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord"));if(this._naluLengthSize=1+(3&y.getUint8(4)),3!==this._naluLengthSize&&4!==this._naluLengthSize)return void(null===(o=this._onError)||void 0===o||o.call(this,m.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1)));const w=31&y.getUint8(5);if(0===w)return void(null===(r=this._onError)||void 0===r||r.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS"));w>1&&a.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+w);let T=6;for(let a=0;a<w;a++){const i=y.getUint16(T,!v);if(T+=2,0===i)continue;const n=new Uint8Array(e,t+T,i);T+=i;const o=p.parseSPS(n);if(0!==a)continue;_.codecWidth=o.codec_size.width,_.codecHeight=o.codec_size.height,_.presentWidth=o.present_size.width,_.presentHeight=o.present_size.height,_.profile=o.profile_string,_.level=o.level_string,_.bitDepth=o.bit_depth,_.chromaFormat=o.chroma_format,_.sarRatio=o.sar_ratio,_.frameRate=o.frame_rate,o.frame_rate.fixed&&0!==o.frame_rate.fps_num&&0!==o.frame_rate.fps_den||(_.frameRate=this._referenceFrameRate);const r=null===(s=_.frameRate)||void 0===s?void 0:s.fps_den,c=null===(l=_.frameRate)||void 0===l?void 0:l.fps_num;_.refSampleDuration=_.timescale*(r/c);const u=n.subarray(1,4);let h="avc1.";for(let e=0;e<3;e++){let t=u[e].toString(16);t.length<2&&(t="0"+t),h+=t}_.codec=h;const x=this._mediaInfo;x.width=_.codecWidth,x.height=_.codecHeight,x.fps=_.frameRate.fps,x.profile=_.profile,x.level=_.level,x.refFrames=o.ref_frames,x.chromaFormat=o.chroma_format_string,x.sarNum=_.sarRatio.width,x.sarDen=_.sarRatio.height,x.videoCodec=h,x.hasAudio?null!=x.audioCodec&&(x.mimeType='video/x-flv; codecs="'+x.videoCodec+","+x.audioCodec+'"'):x.mimeType='video/x-flv; codecs="'+x.videoCodec+'"',x.isComplete()&&(null===(d=this._onMediaInfo)||void 0===d||d.call(this,x))}const P=y.getUint8(T);if(0!==P){P>1&&a.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+P),T++;for(let e=0;e<P;e++){const e=y.getUint16(T,!v);T+=2,0!==e&&(T+=e)}_.avcc=new Uint8Array(i),_.avcc.set(new Uint8Array(e,t,i),0),a.Z.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(u=this._audioTrack)||void 0===u?void 0:u.length)||(null===(h=this._videoTrack)||void 0===h?void 0:h.length))&&(null===(x=this._onDataAvailable)||void 0===x||x.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,null===(f=this._onTrackMetadata)||void 0===f||f.call(this,"video",_)}else null===(c=this._onError)||void 0===c||c.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}_parseHEVCDecoderConfigurationRecord(e,t,i){var n,o,r,s,l,d,c;if(i<22)return void a.Z.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");let u=this._videoMetadata;const h=this._videoTrack,x=this._littleEndian,f=new DataView(e,t,i);if(u){if(void 0!==u.hvcc){const n=new Uint8Array(e,t,i);if(S(n,u.hvcc))return;a.Z.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1!==this._hasVideo||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),u=this._videoMetadata={},u.type="video",u.id=null==h?void 0:h.id,u.timescale=this._timescale,u.duration=this._duration;const p=f.getUint8(0),_=31&f.getUint8(1);if(1!==p||0===_)return void(null===(n=this._onError)||void 0===n||n.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord"));if(this._naluLengthSize=1+(3&f.getUint8(21)),3!==this._naluLengthSize&&4!==this._naluLengthSize)return void(null===(o=this._onError)||void 0===o||o.call(this,m.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1)));const v=f.getUint8(22);for(let a=0,m=23;a<v;a++){const i=63&f.getUint8(m+0),n=f.getUint16(m+1,!x);m+=3;for(let a=0;a<n;a++){const n=f.getUint16(m+0,!x);if(0===a)if(33===i){m+=2;const i=new Uint8Array(e,t+m,n),a=g.parseSPS(i);u.codecWidth=a.codec_size.width,u.codecHeight=a.codec_size.height,u.presentWidth=a.present_size.width,u.presentHeight=a.present_size.height,u.profile=null==a?void 0:a.profile_string,u.level=a.level_string,u.bitDepth=a.bit_depth,u.chromaFormat=a.chroma_format,u.sarRatio=a.sar_ratio,u.frameRate=a.frame_rate,a.frame_rate.fixed&&0!==a.frame_rate.fps_num&&0!==a.frame_rate.fps_den||(u.frameRate=this._referenceFrameRate);const o=u.frameRate.fps_den,s=u.frameRate.fps_num;u.refSampleDuration=u.timescale*(o/s),u.codec=a.codec_mimetype;const l=this._mediaInfo;l.width=u.codecWidth,l.height=u.codecHeight,l.fps=u.frameRate.fps,l.profile=u.profile,l.level=u.level,l.refFrames=a.ref_frames,l.chromaFormat=a.chroma_format_string,l.sarNum=u.sarRatio.width,l.sarDen=u.sarRatio.height,l.videoCodec=a.codec_mimetype,l.hasAudio?null!=l.audioCodec&&(l.mimeType='video/x-flv; codecs="'+l.videoCodec+","+l.audioCodec+'"'):l.mimeType='video/x-flv; codecs="'+l.videoCodec+'"',l.isComplete()&&(null===(r=this._onMediaInfo)||void 0===r||r.call(this,l)),m+=n}else m+=2+n;else m+=2+n}}u.hvcc=new Uint8Array(i),u.hvcc.set(new Uint8Array(e,t,i),0),a.Z.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(s=this._audioTrack)||void 0===s?void 0:s.length)||(null===(l=this._videoTrack)||void 0===l?void 0:l.length))&&(null===(d=this._onDataAvailable)||void 0===d||d.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,null===(c=this._onTrackMetadata)||void 0===c||c.call(this,"video",u)}_parseAV1CodecConfigurationRecord(e,t,i){var n,o,r,s,l,d,c,u,h,x,f;if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");let p=this._videoMetadata;const _=this._videoTrack,g=(this._littleEndian,new DataView(e,t,i));p?void 0!==p.av1c&&a.Z.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(!1!==this._hasVideo||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),p=this._videoMetadata={},p.type="video",p.id=null==_?void 0:_.id,p.timescale=this._timescale,p.duration=this._duration);const v=127&g.getUint8(0);if(g.getUint8(1),g.getUint8(1),g.getUint8(2),1!==v)return void(null===(n=this._onError)||void 0===n||n.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"));const y=w.parseOBUs(new Uint8Array(e,t+4,i-4));if(null==y)return void(null===(o=this._onError)||void 0===o||o.call(this,m.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"));p.codecWidth=null===(r=null==y?void 0:y.codec_size)||void 0===r?void 0:r.width,p.codecHeight=null===(s=null==y?void 0:y.codec_size)||void 0===s?void 0:s.height,p.presentWidth=null===(l=null==y?void 0:y.present_size)||void 0===l?void 0:l.width,p.presentHeight=null===(d=null==y?void 0:y.present_size)||void 0===d?void 0:d.height,p.profile=y.profile_string,p.level=y.level_string,p.bitDepth=y.bit_depth,p.chromaFormat=y.chroma_format,p.sarRatio=y.sar_ratio,p.frameRate=y.frame_rate,y.frame_rate.fixed&&0!==y.frame_rate.fps_num&&0!==y.frame_rate.fps_den||(p.frameRate=this._referenceFrameRate);const b=p.frameRate.fps_den,S=p.frameRate.fps_num;p.refSampleDuration=p.timescale*(b/S),p.codec=y.codec_mimetype;const C=this._mediaInfo;C.width=p.codecWidth,C.height=p.codecHeight,C.fps=p.frameRate.fps,C.profile=p.profile,C.level=p.level,C.refFrames=y.ref_frames,C.chromaFormat=y.chroma_format_string,C.sarNum=p.sarRatio.width,C.sarDen=p.sarRatio.height,C.videoCodec=y.codec_mimetype,C.hasAudio?null!=C.audioCodec&&(C.mimeType='video/x-flv; codecs="'+C.videoCodec+","+C.audioCodec+'"'):C.mimeType='video/x-flv; codecs="'+C.videoCodec+'"',C.isComplete()&&(null===(c=this._onMediaInfo)||void 0===c||c.call(this,C)),p.av1c=new Uint8Array(i),p.av1c.set(new Uint8Array(e,t,i),0),a.Z.v(this.TAG,"Parsed AV1CodecConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(u=this._audioTrack)||void 0===u?void 0:u.length)||(null===(h=this._videoTrack)||void 0===h?void 0:h.length))&&(null===(x=this._onDataAvailable)||void 0===x||x.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,null===(f=this._onTrackMetadata)||void 0===f||f.call(this,"video",p)}_parseAVCVideoData(e,t,i,n,o,r,s){const l=this._littleEndian,d=new DataView(e,t,i),c=[];let u=0,h=0;const x=this._naluLengthSize,f=this._timestampBase+n;let p=1===r;for(;h<i;){if(h+4>=i){a.Z.w(this.TAG,`Malformed Nalu near timestamp ${f}, offset = ${h}, dataSize = ${i}`);break}let n=d.getUint32(h,!l);if(3===x&&(n>>>=8),n>i-x)return void a.Z.w(this.TAG,`Malformed Nalus near timestamp ${f}, NaluSize > DataSize!`);const o=31&d.getUint8(h+x);5===o&&(p=!0);const r=new Uint8Array(e,t+h,x+n),s={type:o,data:r};c.push(s),u+=r.byteLength,h+=x+n}if(c.length){const e=this._videoTrack,t={units:c,length:u,isKeyframe:p,dts:f,cts:s,pts:f+s};p&&(t.fileposition=o),e&&(e.samples.push(t),e.length+=u)}}_parseHEVCVideoData(e,t,i,n,o,r,s){const l=this._littleEndian,d=new DataView(e,t,i),c=[];let u=0,h=0;const x=this._naluLengthSize,f=this._timestampBase+n;let p=1===r;for(;h<i;){if(h+4>=i){a.Z.w(this.TAG,`Malformed Nalu near timestamp ${f}, offset = ${h}, dataSize = ${i}`);break}let n=d.getUint32(h,!l);if(3===x&&(n>>>=8),n>i-x)return void a.Z.w(this.TAG,`Malformed Nalus near timestamp ${f}, NaluSize > DataSize!`);const o=31&d.getUint8(h+x);19!==o&&20!==o||(p=!0);const r=new Uint8Array(e,t+h,x+n),s={type:o,data:r};c.push(s),u+=r.byteLength,h+=x+n}if(c.length){const e=this._videoTrack,t={units:c,length:u,isKeyframe:p,dts:f,cts:s,pts:f+s};p&&(t.fileposition=o),e&&(null==e||e.samples.push(t),e.length+=u)}}_parseAV1VideoData(e,t,i,n,a,o,r){this._littleEndian;const s=[];let l=0;const d=this._timestampBase+n,c=1===o;if(l=i,s.push({unitType:0,data:new Uint8Array(e,t+0,i)}),s.length){const e=this._videoTrack,t={units:s,length:l,isKeyframe:c,dts:d,cts:r,pts:d+r};c&&(t.fileposition=a),e&&(null==e||e.samples.push(t),e.length+=l)}}}const P=T;class E{constructor(){}destroy(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null}}class k{constructor(){this.program_pmt_pid={}}}var R,I,D,M;!function(e){e[e.kMPEG1Audio=3]="kMPEG1Audio",e[e.kMPEG2Audio=4]="kMPEG2Audio",e[e.kPESPrivateData=6]="kPESPrivateData",e[e.kADTSAAC=15]="kADTSAAC",e[e.kLOASAAC=17]="kLOASAAC",e[e.kAC3=129]="kAC3",e[e.kEAC3=135]="kEAC3",e[e.kID3=21]="kID3",e[e.kSCTE35=134]="kSCTE35",e[e.kH264=27]="kH264",e[e.kH265=36]="kH265"}(R||(R={}));class A{constructor(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,eac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.scte_35_pids={},this.smpte2038_pids={}}}class B{}class L{}class F{constructor(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0,this.random_access_indicator=0}}!function(e){e[e.kUnspecified=0]="kUnspecified",e[e.kSliceNonIDR=1]="kSliceNonIDR",e[e.kSliceDPA=2]="kSliceDPA",e[e.kSliceDPB=3]="kSliceDPB",e[e.kSliceDPC=4]="kSliceDPC",e[e.kSliceIDR=5]="kSliceIDR",e[e.kSliceSEI=6]="kSliceSEI",e[e.kSliceSPS=7]="kSliceSPS",e[e.kSlicePPS=8]="kSlicePPS",e[e.kSliceAUD=9]="kSliceAUD",e[e.kEndOfSequence=10]="kEndOfSequence",e[e.kEndOfStream=11]="kEndOfStream",e[e.kFiller=12]="kFiller",e[e.kSPSExt=13]="kSPSExt",e[e.kReserved0=14]="kReserved0"}(I||(I={}));class j{}class z{constructor(e){const t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}}class O{constructor(e){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not find H264 startcode until payload end!")}findNextStartCodeOffset(e){let t=e;const i=this.data_;for(;;){if(t+3>=i.byteLength)return this.eof_flag_=!0,i.byteLength;const e=i[t+0]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3],n=i[t+0]<<16|i[t+1]<<8|i[t+2];if(1===e||1===n)return t;t++}}readNextNaluPayload(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){let i=this.current_startcode_offset_;i+=1===(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])?4:3;const n=31&e[i],a=(128&e[i])>>>7,o=this.findNextStartCodeOffset(i);if(this.current_startcode_offset_=o,n>=I.kReserved0)continue;if(0!==a)continue;const r=e.subarray(i,o);t=new j,t.type=n,t.data=r}return t}}class N{constructor(e,t,i){let n=8+e.byteLength+1+2+t.byteLength,a=!1;66!==e[3]&&77!==e[3]&&88!==e[3]&&(a=!0,n+=4);const o=this.data=new Uint8Array(n);o[0]=1,o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=255,o[5]=225;const r=e.byteLength;o[6]=r>>>8,o[7]=255&r;let s=8;o.set(e,8),s+=r,o[s]=1;const l=t.byteLength;o[s+1]=l>>>8,o[s+2]=255&l,o.set(t,s+3),s+=3+l,a&&(o[s]=252|i.chroma_format_idc,o[s+1]=248|i.bit_depth_luma-8,o[s+2]=248|i.bit_depth_chroma-8,o[s+3]=0,s+=4)}getData(){return this.data}}!function(e){e[e.kNull=0]="kNull",e[e.kAACMain=1]="kAACMain",e[e.kAAC_LC=2]="kAAC_LC",e[e.kAAC_SSR=3]="kAAC_SSR",e[e.kAAC_LTP=4]="kAAC_LTP",e[e.kAAC_SBR=5]="kAAC_SBR",e[e.kAAC_Scalable=6]="kAAC_Scalable",e[e.kLayer1=32]="kLayer1",e[e.kLayer2=33]="kLayer2",e[e.kLayer3=34]="kLayer3"}(D||(D={})),function(e){e[e.k96000Hz=0]="k96000Hz",e[e.k88200Hz=1]="k88200Hz",e[e.k64000Hz=2]="k64000Hz",e[e.k48000Hz=3]="k48000Hz",e[e.k44100Hz=4]="k44100Hz",e[e.k32000Hz=5]="k32000Hz",e[e.k24000Hz=6]="k24000Hz",e[e.k22050Hz=7]="k22050Hz",e[e.k16000Hz=8]="k16000Hz",e[e.k12000Hz=9]="k12000Hz",e[e.k11025Hz=10]="k11025Hz",e[e.k8000Hz=11]="k8000Hz",e[e.k7350Hz=12]="k7350Hz"}(M||(M={}));const U=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];class H{}class V extends H{}class G{constructor(e){this.TAG="AACADTSParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found ADTS syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(4095===(i[t+0]<<8|i[t+1])>>>4)return t;t++}}readNextAACFrame(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){let i=this.current_syncword_offset_;const n=(8&e[i+1])>>>3,a=(6&e[i+1])>>>1,o=1&e[i+1],r=(192&e[i+2])>>>6,s=(60&e[i+2])>>>2,l=(1&e[i+2])<<2|(192&e[i+3])>>>6,d=(3&e[i+3])<<11|e[i+4]<<3|(224&e[i+5])>>>5;if(e[i+6],i+d>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const c=1===o?7:9,u=d-c;i+=c;const h=this.findNextSyncwordOffset(i+u);if(this.current_syncword_offset_=h,0!==n&&1!==n||0!==a)continue;const x=e.subarray(i,i+u);t=new H,t.audio_object_type=r+1,t.sampling_freq_index=s,t.sampling_frequency=U[s],t.channel_config=l,t.data=x}return t}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class Y{constructor(e){this.TAG="AACLOASParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found LOAS syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+1>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(695===(i[t+0]<<3|i[t+1]>>>5))return t;t++}}getLATMValue(e){const t=e.readBits(2);let i=0;for(let n=0;n<=t;n++)i<<=8,i|=e.readByte();return i}readNextAACFrame(e){const t=this.data_;let i=null;for(;null==i&&!this.eof_flag_;){const n=this.current_syncword_offset_,o=(31&t[n+1])<<8|t[n+2];if(n+3+o>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const r=new x(t.subarray(n+3,n+3+o));let s=null;if(r.readBool()){if(null==e){a.Z.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(n+3+o),r.destroy();continue}s=e}else{const e=r.readBool();if(e&&r.readBool()){a.Z.e(this.TAG,"audioMuxVersionA is Not Supported"),r.destroy();break}if(e&&this.getLATMValue(r),!r.readBool()){a.Z.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),r.destroy();break}if(0!==r.readBits(6)){a.Z.e(this.TAG,"more than 2 numSubFrames Not Supported"),r.destroy();break}if(0!==r.readBits(4)){a.Z.e(this.TAG,"more than 2 numProgram Not Supported"),r.destroy();break}if(0!==r.readBits(3)){a.Z.e(this.TAG,"more than 2 numLayer Not Supported"),r.destroy();break}let t=e?this.getLATMValue(r):0;const i=r.readBits(5);t-=5;const n=r.readBits(4);t-=4;const o=r.readBits(4);t-=4,r.readBits(3),t-=3,t>0&&r.readBits(t);const l=r.readBits(3);if(0!==l){a.Z.e(this.TAG,`frameLengthType = ${l}. Only frameLengthType = 0 Supported`),r.destroy();break}r.readByte();const d=r.readBool();if(d)if(e)this.getLATMValue(r);else{let e=0;for(;;){e<<=8;const t=r.readBool();if(e+=r.readByte(),!t)break}console.log(e)}r.readBool()&&r.readByte(),s=new V,s.audio_object_type=i,s.sampling_freq_index=n,s.sampling_frequency=U[s.sampling_freq_index],s.channel_config=o,s.other_data_present=d}let l=0;for(;;){const e=r.readByte();if(l+=e,255!==e)break}const d=new Uint8Array(l);for(let e=0;e<l;e++)d[e]=r.readByte();i=new V,i.audio_object_type=s.audio_object_type,i.sampling_freq_index=s.sampling_freq_index,i.sampling_frequency=U[s.sampling_freq_index],i.channel_config=s.channel_config,i.other_data_present=s.other_data_present,i.data=d,this.current_syncword_offset_=this.findNextSyncwordOffset(n+3+o)}return i}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class W{constructor(e){let t=[];const i=e.audio_object_type;let n=e.audio_object_type;const a=e.sampling_freq_index,o=e.channel_config;let r=0;const s=navigator.userAgent.toLowerCase();s.includes("firefox")?a>=6?(n=5,t=new Array(4),r=a-3):(n=2,t=new Array(2),r=a):s.includes("android")?(n=2,t=new Array(2),r=a):(n=5,r=a,t=new Array(4),a>=6?r=a-3:1===o&&(n=2,t=new Array(2),r=a)),t[0]=n<<3,t[0]|=(15&a)>>>1,t[1]=(15&a)<<7,t[1]|=(15&o)<<3,5===n&&(t[1]|=(15&r)>>>1,t[2]=(1&r)<<7,t[2]|=8,t[3]=0),this.config=t,this.sampling_rate=U[a],this.channel_count=o,this.codec_mimetype="mp4a.40."+n.toString(),this.original_codec_mimetype="mp4a.40."+i.toString()}}class Z{}class X{}var J;!function(e){e[e.kSpliceNull=0]="kSpliceNull",e[e.kSpliceSchedule=4]="kSpliceSchedule",e[e.kSpliceInsert=5]="kSpliceInsert",e[e.kTimeSignal=6]="kTimeSignal",e[e.kBandwidthReservation=7]="kBandwidthReservation",e[e.kPrivateCommand=255]="kPrivateCommand"}(J||(J={}));const q=e=>{const t=e.readBool();return t?(e.readBits(6),{time_specified_flag:t,pts_time:4*e.readBits(31)+e.readBits(2)}):(e.readBits(7),{time_specified_flag:t})},K=e=>{const t=e.readBool();return e.readBits(6),{auto_return:t,duration:4*e.readBits(31)+e.readBits(2)}},$=(e,t)=>{const i=t.readBits(8);return e?{component_tag:i}:{component_tag:i,splice_time:q(t)}},Q=e=>({component_tag:e.readBits(8),utc_splice_time:e.readBits(32)}),ee=e=>{const t=e.readBits(32),i=e.readBool();e.readBits(7);const n={splice_event_id:t,splice_event_cancel_indicator:i};if(i)return n;if(n.out_of_network_indicator=e.readBool(),n.program_splice_flag=e.readBool(),n.duration_flag=e.readBool(),e.readBits(5),n.program_splice_flag)n.utc_splice_time=e.readBits(32);else{n.component_count=e.readBits(8),n.components=[];for(let t=0;t<n.component_count;t++)n.components.push(Q(e))}return n.duration_flag&&(n.break_duration=K(e)),n.unique_program_id=e.readBits(16),n.avail_num=e.readBits(8),n.avails_expected=e.readBits(8),n},te=(e,t,i,n)=>({descriptor_tag:e,descriptor_length:t,identifier:i,provider_avail_id:n.readBits(32)}),ie=(e,t,i,n)=>{const a=n.readBits(8),o=n.readBits(3);n.readBits(5);let r="";for(let s=0;s<o;s++)r+=String.fromCharCode(n.readBits(8));return{descriptor_tag:e,descriptor_length:t,identifier:i,preroll:a,dtmf_count:o,DTMF_char:r}},ne=e=>{const t=e.readBits(8);return e.readBits(7),{component_tag:t,pts_offset:4*e.readBits(31)+e.readBits(2)}},ae=(e,t,i,n)=>{const a=n.readBits(32),o=n.readBool();n.readBits(7);const r={descriptor_tag:e,descriptor_length:t,identifier:i,segmentation_event_id:a,segmentation_event_cancel_indicator:o};if(o)return r;if(r.program_segmentation_flag=n.readBool(),r.segmentation_duration_flag=n.readBool(),r.delivery_not_restricted_flag=n.readBool(),r.delivery_not_restricted_flag?n.readBits(5):(r.web_delivery_allowed_flag=n.readBool(),r.no_regional_blackout_flag=n.readBool(),r.archive_allowed_flag=n.readBool(),r.device_restrictions=n.readBits(2)),!r.program_segmentation_flag){r.component_count=n.readBits(8),r.components=[];for(let e=0;e<r.component_count;e++)r.components.push(ne(n))}r.segmentation_duration_flag&&(r.segmentation_duration=n.readBits(40)),r.segmentation_upid_type=n.readBits(8),r.segmentation_upid_length=n.readBits(8);{const e=new Uint8Array(r.segmentation_upid_length);for(let t=0;t<r.segmentation_upid_length;t++)e[t]=n.readBits(8);r.segmentation_upid=e.buffer}return r.segmentation_type_id=n.readBits(8),r.segment_num=n.readBits(8),r.segments_expected=n.readBits(8),52!==r.segmentation_type_id&&54!==r.segmentation_type_id&&56!==r.segmentation_type_id&&58!==r.segmentation_type_id||(r.sub_segment_num=n.readBits(8),r.sub_segments_expected=n.readBits(8)),r},oe=(e,t,i,n)=>({descriptor_tag:e,descriptor_length:t,identifier:i,TAI_seconds:n.readBits(48),TAI_ns:n.readBits(32),UTC_offset:n.readBits(16)}),re=e=>({component_tag:e.readBits(8),ISO_code:String.fromCharCode(e.readBits(8),e.readBits(8),e.readBits(8)),Bit_Stream_Mode:e.readBits(3),Num_Channels:e.readBits(4),Full_Srvc_Audio:e.readBool()}),se=(e,t,i,n)=>{const a=n.readBits(4),o=[];for(let r=0;r<a;r++)o.push(re(n));return{descriptor_tag:e,descriptor_length:t,identifier:i,audio_count:a,components:o}},le=e=>{var t,i,n,a,o,r;const s=new x(e),l=s.readBits(8),d=s.readBool(),c=s.readBool();s.readBits(2);const u=s.readBits(12),h=s.readBits(8),f=s.readBool(),p=s.readBits(6),m=4*s.readBits(31)+s.readBits(2),_=s.readBits(8),g=s.readBits(12),v=s.readBits(12),y=s.readBits(8);let b=null;y===J.kSpliceNull?b={}:y===J.kSpliceSchedule?b=(e=>{const t=e.readBits(8),i=[];for(let n=0;n<t;n++)i.push(ee(e));return{splice_count:t,events:i}})(s):y===J.kSpliceInsert?b=(e=>{const t=e.readBits(32),i=e.readBool();e.readBits(7);const n={splice_event_id:t,splice_event_cancel_indicator:i};if(i)return n;if(n.out_of_network_indicator=e.readBool(),n.program_splice_flag=e.readBool(),n.duration_flag=e.readBool(),n.splice_immediate_flag=e.readBool(),e.readBits(4),n.program_splice_flag&&!n.splice_immediate_flag&&(n.splice_time=q(e)),!n.program_splice_flag){n.component_count=e.readBits(8),n.components=[];for(let t=0;t<n.component_count;t++)n.components.push($(n.splice_immediate_flag,e))}return n.duration_flag&&(n.break_duration=K(e)),n.unique_program_id=e.readBits(16),n.avail_num=e.readBits(8),n.avails_expected=e.readBits(8),n})(s):y===J.kTimeSignal?b=(e=>({splice_time:q(e)}))(s):y===J.kBandwidthReservation?b={}:y===J.kPrivateCommand?b=((e,t)=>{const i=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8)),n=new Uint8Array(e-4);for(let a=0;a<e-4;a++)n[a]=t.readBits(8);return{identifier:i,private_data:n.buffer}})(v,s):s.readBits(8*v);const S=[],C=s.readBits(16);for(let x=0;x<C;){const e=s.readBits(8),t=s.readBits(8),i=String.fromCharCode(s.readBits(8),s.readBits(8),s.readBits(8),s.readBits(8));0===e?S.push(te(e,t,i,s)):1===e?S.push(ie(e,t,i,s)):2===e?S.push(ae(e,t,i,s)):3===e?S.push(oe(e,t,i,s)):4===e?S.push(se(e,t,i,s)):s.readBits(8*(t-4)),x+=2+t}const w={table_id:l,section_syntax_indicator:d,private_indicator:c,section_length:u,protocol_version:h,encrypted_packet:f,encryption_algorithm:p,pts_adjustment:m,cw_index:_,tier:g,splice_command_length:v,splice_command_type:y,splice_command:b,descriptor_loop_length:C,splice_descriptors:S,E_CRC32:f?s.readBits(32):void 0,CRC32:s.readBits(32)};if(y===J.kSpliceInsert){const s=b;if(s.splice_event_cancel_indicator)return{splice_command_type:y,detail:w,data:e};if(s.program_splice_flag&&!s.splice_immediate_flag){const o=s.duration_flag?null===(t=null==s?void 0:s.break_duration)||void 0===t?void 0:t.auto_return:void 0,r=s.duration_flag?((null===(i=null==s?void 0:s.break_duration)||void 0===i?void 0:i.duration)||0)/90:void 0;return(null===(n=s.splice_time)||void 0===n?void 0:n.time_specified_flag)?{splice_command_type:y,pts:(m+((null===(a=null==s?void 0:s.splice_time)||void 0===a?void 0:a.pts_time)||0))%Math.pow(2,33),auto_return:o,duraiton:r,detail:w,data:e}:{splice_command_type:y,auto_return:o,duraiton:r,detail:w,data:e}}return{splice_command_type:y,auto_return:s.duration_flag?null===(o=s.break_duration)||void 0===o?void 0:o.auto_return:void 0,duraiton:s.duration_flag?((null===(r=s.break_duration)||void 0===r?void 0:r.duration)||0)/90:void 0,detail:w,data:e}}if(y===J.kTimeSignal){const t=b;return t.splice_time.time_specified_flag?{splice_command_type:y,pts:(m+(t.splice_time.pts_time||0))%Math.pow(2,33),detail:w,data:e}:{splice_command_type:y,detail:w,data:e}}return{splice_command_type:y,detail:w,data:e}};var de;!function(e){e[e.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",e[e.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",e[e.kSliceCRA_NUT=21]="kSliceCRA_NUT",e[e.kSliceVPS=32]="kSliceVPS",e[e.kSliceSPS=33]="kSliceSPS",e[e.kSlicePPS=34]="kSlicePPS",e[e.kSliceAUD=35]="kSliceAUD"}(de||(de={}));class ce{}class ue{constructor(e){const t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}}class he{constructor(e){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not find H265 startcode until payload end!")}findNextStartCodeOffset(e){let t=e;const i=this.data_;for(;;){if(t+3>=i.byteLength)return this.eof_flag_=!0,i.byteLength;const e=i[t+0]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3],n=i[t+0]<<16|i[t+1]<<8|i[t+2];if(1===e||1===n)return t;t++}}readNextNaluPayload(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){let i=this.current_startcode_offset_;i+=1===(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])?4:3;const n=e[i]>>1&63,a=(128&e[i])>>>7,o=this.findNextStartCodeOffset(i);if(this.current_startcode_offset_=o,0!==a)continue;const r=e.subarray(i,o);t=new ce,t.type=n,t.data=r}return t}}class xe{constructor(e,t,i,n){const a=23+(5+e.byteLength)+(5+t.byteLength)+(5+i.byteLength),o=this.data=new Uint8Array(a);o[0]=1,o[1]=(3&n.general_profile_space)<<6|(n.general_tier_flag?1:0)<<5|31&n.general_profile_idc,o[2]=n.general_profile_compatibility_flags_1,o[3]=n.general_profile_compatibility_flags_2,o[4]=n.general_profile_compatibility_flags_3,o[5]=n.general_profile_compatibility_flags_4,o[6]=n.general_constraint_indicator_flags_1,o[7]=n.general_constraint_indicator_flags_2,o[8]=n.general_constraint_indicator_flags_3,o[9]=n.general_constraint_indicator_flags_4,o[10]=n.general_constraint_indicator_flags_5,o[11]=n.general_constraint_indicator_flags_6,o[12]=n.general_level_idc,o[13]=240|(3840&n.min_spatial_segmentation_idc)>>8,o[14]=255&n.min_spatial_segmentation_idc,o[15]=252|3&n.parallelismType,o[16]=252|3&n.chroma_format_idc,o[17]=248|7&n.bit_depth_luma_minus8,o[18]=248|7&n.bit_depth_chroma_minus8,o[19]=0,o[20]=0,o[21]=(3&n.constant_frame_rate)<<6|(7&n.num_temporal_layers)<<3|(n.temporal_id_nested?1:0)<<2|3,o[22]=3,o[23]=128|de.kSliceVPS,o[24]=0,o[25]=1,o[26]=(65280&e.byteLength)>>8,o[27]=(255&e.byteLength)>>0,o.set(e,28),o[23+(5+e.byteLength)+0]=128|de.kSliceSPS,o[23+(5+e.byteLength)+1]=0,o[23+(5+e.byteLength)+2]=1,o[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,o[23+(5+e.byteLength)+4]=(255&t.byteLength)>>0,o.set(t,23+(5+e.byteLength)+5),o[23+(5+e.byteLength+5+t.byteLength)+0]=128|de.kSlicePPS,o[23+(5+e.byteLength+5+t.byteLength)+1]=0,o[23+(5+e.byteLength+5+t.byteLength)+2]=1,o[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&i.byteLength)>>8,o[23+(5+e.byteLength+5+t.byteLength)+4]=(255&i.byteLength)>>0,o.set(i,23+(5+e.byteLength+5+t.byteLength)+5)}getData(){return this.data}}class fe{}class pe{}class me{}const _e=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]];class ge{constructor(e){this.TAG="AC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found AC3 syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(2935===(i[t+0]<<8|i[t+1]<<0))return t;t++}}readNextAC3Frame(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){const i=this.current_syncword_offset_,n=e[i+4]>>6,a=[48e3,44200,33e3][n],o=63&e[i+4],r=2*_e[n][o];if(i+r>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const s=this.findNextSyncwordOffset(i+r);this.current_syncword_offset_=s;const l=e[i+5]>>3,d=7&e[i+5],c=e[i+6]>>5;let u=0;0!=(1&c)&&1!==c&&(u+=2),0!=(4&c)&&(u+=2),2===c&&(u+=2);const h=(e[i+6]<<8|e[i+7]<<0)>>12-u&1,x=[2,1,2,3,3,4,4,5][c]+h;t=new me,t.sampling_frequency=a,t.channel_count=x,t.channel_mode=c,t.bit_stream_identification=l,t.low_frequency_effects_channel_on=h,t.bit_stream_mode=d,t.frame_size_code=o,t.data=e.subarray(i,i+r)}return t}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class ve{constructor(e){let t=[];t=[e.sampling_rate_code<<6|e.bit_stream_identification<<1|e.bit_stream_mode>>2,(3&e.bit_stream_mode)<<6|e.channel_mode<<3|e.low_frequency_effects_channel_on<<2|e.frame_size_code>>4,e.frame_size_code<<4&224],this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.bit_stream_mode=e.bit_stream_mode,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"}}class ye{}class be{constructor(e){this.TAG="EAC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found AC3 syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(2935===(i[t+0]<<8|i[t+1]<<0))return t;t++}}readNextEAC3Frame(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){const i=this.current_syncword_offset_,n=new x(e.subarray(i+2)),a=(n.readBits(2),n.readBits(3),n.readBits(11)+1<<1);let o=n.readBits(2),r=null,s=null;3===o?(o=n.readBits(2),r=[24e3,22060,16e3][o],s=3):(r=[48e3,44100,32e3][o],s=n.readBits(2));const l=n.readBits(3),d=n.readBits(1),c=n.readBits(5);if(i+a>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const u=this.findNextSyncwordOffset(i+a);this.current_syncword_offset_=u;const h=[2,1,2,3,3,4,4,5][l]+d;n.destroy(),t=new ye,t.sampling_frequency=r,t.channel_count=h,t.channel_mode=l,t.bit_stream_identification=c,t.low_frequency_effects_channel_on=d,t.frame_size=a,t.num_blks=[1,2,3,6][s],t.data=e.subarray(i,i+a)}return t}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class Se{constructor(e){let t=[];const i=Math.floor(e.frame_size*e.sampling_frequency/(16*e.num_blks));t=[255&i,248&i,e.sampling_rate_code<<6|e.bit_stream_identification<<1|0,0|e.channel_mode<<1|e.low_frequency_effects_channel_on<<0,0],this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.num_blks=e.num_blks,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ec-3",this.original_codec_mimetype="ec-3"}}const Ce=class extends E{constructor(e,t){super(),this.TAG="TSDemuxer",this.first_parse_=!0,this.media_info_=new r.Z,this.timescale_=90,this.duration_=0,this.current_pmt_pid_=-1,this.program_pmt_map_={},this.pes_slice_queues_={},this.section_slice_queues_={},this.video_metadata_={vps:void 0,sps:void 0,pps:void 0,details:void 0},this.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},this.aac_last_sample_pts_=void 0,this.aac_last_incomplete_data_=null,this.has_video_=!1,this.has_audio_=!1,this.video_init_segment_dispatched_=!1,this.audio_init_segment_dispatched_=!1,this.video_metadata_changed_=!1,this.audio_metadata_changed_=!1,this.loas_previous_frame=null,this.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this.ts_packet_size_=e.ts_packet_size,this.sync_offset_=e.sync_offset,this.config_=t}destroy(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,super.destroy()}static probe(e){const t=new Uint8Array(e);let i=-1,n=188;if(t.byteLength<=3*n)return{needMoreData:!0};for(;-1===i;){const e=Math.min(1e3,t.byteLength-3*n);for(let a=0;a<e;){if(71===t[a]&&71===t[a+n]&&71===t[a+2*n]){i=a;break}a++}if(-1===i)if(188===n)n=192;else{if(192!==n)break;n=204}}return-1===i?{match:!1}:(192===n&&i>=4?(a.Z.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),i-=4):204===n&&a.Z.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:n,sync_offset:i})}bindDataSource(e){return e.onDataArrival=this.parseChunks.bind(this),this}resetMediaInfo(){this.media_info_=new r.Z}parseChunks(e,t){var i;if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new d.rT("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");let n=0;for(this.first_parse_&&(this.first_parse_=!1,n=this.sync_offset_);n+this.ts_packet_size_<=e.byteLength;){const o=t+n;192===this.ts_packet_size_&&(n+=4);const r=new Uint8Array(e,n,188),s=r[0];if(71!==s){a.Z.e(this.TAG,`sync_byte = ${s}, not 0x47`);break}const l=(64&r[1])>>>6,d=(r[1],(31&r[1])<<8|r[2]),c=(48&r[3])>>>4,u=15&r[3];let h={},x=4;if(2===c||3===c){const t=r[4];if(5+t===188){n+=188,204===this.ts_packet_size_&&(n+=16);continue}t>0&&(h=this.parseAdaptationField(e,n+4,1+t)),x=5+t}if(1===c||3===c)if(0===d||d===this.current_pmt_pid_||void 0!==this.pmt_&&this.pmt_.pid_stream_type[d]===R.kSCTE35){const t=188-x;this.handleSectionSlice(e,n+x,t,{pid:d,file_position:o,payload_unit_start_indicator:l,continuity_conunter:u,random_access_indicator:h.random_access_indicator})}else if(void 0!==(null===(i=this.pmt_)||void 0===i?void 0:i.pid_stream_type[d])){const t=188-x,i=this.pmt_.pid_stream_type[d];(d===this.pmt_.common_pids.h264||d===this.pmt_.common_pids.h265||d===this.pmt_.common_pids.adts_aac||d===this.pmt_.common_pids.loas_aac||d===this.pmt_.common_pids.ac3||d===this.pmt_.common_pids.eac3||d===this.pmt_.common_pids.opus||d===this.pmt_.common_pids.mp3||this.pmt_.pes_private_data_pids[d]||this.pmt_.timed_id3_pids[d])&&this.handlePESSlice(e,n+x,t,{pid:d,stream_type:i,file_position:o,payload_unit_start_indicator:l,continuity_conunter:u,random_access_indicator:h.random_access_indicator})}n+=188,204===this.ts_packet_size_&&(n+=16)}return this.dispatchAudioVideoMediaSegment(),n}parseAdaptationField(e,t,i){const n=new Uint8Array(e,t,i),o=n[0];return o>0?o>183?(a.Z.w(this.TAG,"Illegal adaptation_field_length: "+o),{}):{discontinuity_indicator:(128&n[1])>>>7,random_access_indicator:(64&n[1])>>>6,elementary_stream_priority_indicator:(32&n[1])>>>5}:{}}handleSectionSlice(e,t,i,n){const a=new Uint8Array(e,t,i);let o=this.section_slice_queues_?this.section_slice_queues_[n.pid]:{};if(n.payload_unit_start_indicator){const r=a[0];if(void 0!==o&&0!==(null==o?void 0:o.total_length)){const a=new Uint8Array(e,t+1,Math.min(i,r));o.slices.push(a),o.total_length+=a.byteLength,o.total_length===o.expected_length?this.emitSectionSlices(o,n):this.clearSlices(o,n)}for(let s=1+r;s<a.byteLength;){if(255===a[s+0])break;const r=(15&a[s+1])<<8|a[s+2];this.section_slice_queues_&&(this.section_slice_queues_[n.pid]=new F,o=this.section_slice_queues_[n.pid]),o.expected_length=r+3,o.file_position=n.file_position,o.random_access_indicator=n.random_access_indicator;const l=new Uint8Array(e,t+s,Math.min(i-s,o.expected_length-o.total_length));o.slices.push(l),o.total_length+=l.byteLength,o.total_length===o.expected_length?this.emitSectionSlices(o,n):o.total_length>=o.expected_length&&this.clearSlices(o,n),s+=l.byteLength}}else if(void 0!==o&&0!==o.total_length){const a=new Uint8Array(e,t,Math.min(i,o.expected_length-o.total_length));o.slices.push(a),o.total_length+=a.byteLength,o.total_length===o.expected_length?this.emitSectionSlices(o,n):o.total_length>=o.expected_length&&this.clearSlices(o,n)}}handlePESSlice(e,t,i,n){const o=new Uint8Array(e,t,i),r=o[0]<<16|o[1]<<8|o[2],s=(o[3],o[4]<<8|o[5]);if(n.payload_unit_start_indicator){if(1!==r)return void a.Z.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value "+r);const e=this.pes_slice_queues_[n.pid];e&&(0===e.expected_length||e.expected_length===e.total_length?this.emitPESSlices(e,n):this.clearSlices(e,n)),this.pes_slice_queues_&&(this.pes_slice_queues_[n.pid]=new F,this.pes_slice_queues_[n.pid].file_position=n.file_position,this.pes_slice_queues_[n.pid].random_access_indicator=n.random_access_indicator)}if(void 0===this.pes_slice_queues_[n.pid])return;const l=this.pes_slice_queues_[n.pid];l.slices.push(o),n.payload_unit_start_indicator&&(l.expected_length=0===s?0:s+6),l.total_length+=o.byteLength,l.expected_length>0&&l.expected_length===l.total_length?this.emitPESSlices(l,n):l.expected_length>0&&l.expected_length<l.total_length&&this.clearSlices(l,n)}emitSectionSlices(e,t){const i=new Uint8Array(e.total_length);for(let a=0,o=0;a<e.slices.length;a++){const t=e.slices[a];i.set(t,o),o+=t.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;const n=new L;n.pid=t.pid,n.data=i,n.file_position=e.file_position,n.random_access_indicator=e.random_access_indicator,this.parseSection(n)}emitPESSlices(e,t){const i=new Uint8Array(e.total_length);for(let a=0,o=0;a<e.slices.length;a++){const t=e.slices[a];i.set(t,o),o+=t.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;const n=new B;n.pid=t.pid,n.data=i,n.stream_type=t.stream_type,n.file_position=e.file_position,n.random_access_indicator=e.random_access_indicator,this.parsePES(n)}clearSlices(e,t){e.slices=[],e.expected_length=-1,e.total_length=0}parseSection(e){var t;const i=e.data,n=e.pid;0===n?this.parsePAT(i):n===this.current_pmt_pid_?this.parsePMT(i):(null===(t=this.pmt_)||void 0===t?void 0:t.scte_35_pids[n])&&this.parseSCTE35(i)}parsePES(e){const t=e.data,i=t[0]<<16|t[1]<<8|t[2],n=t[3],o=t[4]<<8|t[5];if(1===i){if(188!==n&&190!==n&&191!==n&&240!==n&&241!==n&&255!==n&&242!==n&&248!==n){t[6];const i=(192&t[7])>>>6,r=t[8];let s,l;2!==i&&3!==i||(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,l=3===i?536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2:s);const d=9+r;let c;if(0!==o){if(o<3+r)return void a.Z.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");c=o-3-r}else c=t.byteLength-d;const u=t.subarray(d,d+c);switch(e.stream_type){case R.kMPEG1Audio:case R.kMPEG2Audio:this.parseMP3Payload(u,s);break;case R.kPESPrivateData:this.pmt_.common_pids.opus===e.pid?this.parseOpusPayload(u,s):this.pmt_.common_pids.ac3===e.pid?this.parseAC3Payload(u,s):this.pmt_.common_pids.eac3===e.pid?this.parseEAC3Payload(u,s):this.pmt_.smpte2038_pids[e.pid]?this.parseSMPTE2038MetadataPayload(u,s,l,e.pid,n):this.parsePESPrivateDataPayload(u,s,l,e.pid,n);break;case R.kADTSAAC:this.parseADTSAACPayload(u,s);break;case R.kLOASAAC:this.parseLOASAACPayload(u,s);break;case R.kAC3:this.parseAC3Payload(u,s);break;case R.kEAC3:this.parseEAC3Payload(u,s);break;case R.kID3:this.parseTimedID3MetadataPayload(u,s,l,e.pid,n);break;case R.kH264:this.parseH264Payload(u,s,l,e.file_position,e.random_access_indicator);break;case R.kH265:this.parseH265Payload(u,s,l,e.file_position,e.random_access_indicator)}}else if((188===n||191===n||240===n||241===n||255===n||242===n||248===n)&&e.stream_type===R.kPESPrivateData){const i=6;let a;a=0!==o?o:t.byteLength-i;const r=t.subarray(i,i+a);this.parsePESPrivateDataPayload(r,void 0,void 0,e.pid,n)}}else a.Z.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value "+i)}parsePAT(e){const t=e[0];if(0!==t)return void a.Z.e(this.TAG,`parsePAT: table_id ${t} is not corresponded to PAT!`);const i=(15&e[1])<<8|e[2],n=(e[3],e[4],(62&e[5])>>>1),o=1&e[5],r=e[6];e[7];let s=null;if(1===o&&0===r)s=new k,s.version_number=n;else if(s=this.pat_,null==s)return;const l=i-5-4;let d=-1,c=-1;for(let a=8;a<8+l;a+=4){const t=e[a]<<8|e[a+1],i=(31&e[a+2])<<8|e[a+3];0===t?s.network_pid=i:(s.program_pmt_pid[t]=i,-1===d&&(d=t),-1===c&&(c=i))}1===o&&0===r&&(void 0===this.pat_&&a.Z.v(this.TAG,"Parsed first PAT: "+JSON.stringify(s)),this.pat_=s,this.current_program_=d,this.current_pmt_pid_=c)}parsePMT(e){const t=e[0];if(2!==t)return void a.Z.e(this.TAG,`parsePMT: table_id ${t} is not corresponded to PMT!`);const i=(15&e[1])<<8|e[2],n=e[3]<<8|e[4],o=(62&e[5])>>>1,r=1&e[5],s=e[6];e[7];let l=null;if(1===r&&0===s)l=new A,l.program_number=n,l.version_number=o,this.program_pmt_map_[n]=l;else if(l=this.program_pmt_map_[n],null==l)return;e[8],e[9];const d=(15&e[10])<<8|e[11],c=12+d,u=i-9-d-4;for(let h=c;h<c+u;){const t=e[h],i=(31&e[h+1])<<8|e[h+2],n=(15&e[h+3])<<8|e[h+4];l.pid_stream_type[i]=t;const o=l.common_pids.h264||l.common_pids.h265,r=l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.eac3||l.common_pids.opus||l.common_pids.mp3;if(t!==R.kH264||o)if(t!==R.kH265||o)if(t!==R.kADTSAAC||r)if(t!==R.kLOASAAC||r)if(t!==R.kAC3||r)if(t!==R.kEAC3||r)if(t!==R.kMPEG1Audio&&t!==R.kMPEG2Audio||r)if(t===R.kPESPrivateData){if(l.pes_private_data_pids[i]=!0,n>0){for(let t=h+5;t<h+5+n;){const n=e[t+0],o=e[t+1];if(5===n){const n=String.fromCharCode(...Array.from(e.subarray(t+2,t+2+o)));"VANC"===n?l.smpte2038_pids[i]=!0:"Opus"===n&&(l.common_pids.opus=i)}else if(127===n&&i===l.common_pids.opus){let i=null;if(128===e[t+2]&&(i=e[t+3]),null==i){a.Z.e(this.TAG,"Not Supported Opus channel count.");continue}const n={codec:"opus",channel_count:0==(15&i)?2:15&i,channel_config_code:i,sample_rate:48e3},o={codec:"opus",meta:n};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(o)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(o)):(this.audio_metadata_=n,this.dispatchAudioInitSegment(o))}t+=2+o}const o=e.subarray(h+5,h+5+n);this.dispatchPESPrivateDataDescriptor(i,t,o)}}else t===R.kID3?l.timed_id3_pids[i]=!0:t===R.kSCTE35&&(l.scte_35_pids[i]=!0);else l.common_pids.mp3=i;else l.common_pids.eac3=i;else l.common_pids.ac3=i;else l.common_pids.loas_aac=i;else l.common_pids.adts_aac=i;else l.common_pids.h265=i;else l.common_pids.h264=i;h+=5+n}n===this.current_program_&&(void 0===this.pmt_&&a.Z.v(this.TAG,"Parsed first PMT: "+JSON.stringify(l)),this.pmt_=l,(l.common_pids.h264||l.common_pids.h265)&&(this.has_video_=!0),(l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.opus||l.common_pids.mp3)&&(this.has_audio_=!0))}parseSCTE35(e){const t=le(e);if(void 0!==t.pts){const e=Math.floor(t.pts/this.timescale_);t.pts=e}else t.nearest_pts=this.aac_last_sample_pts_;this.onSCTE35Metadata&&this.onSCTE35Metadata(t)}parseH264Payload(e,t,i,n,o){var r,s;const l=new O(e);let d=null;const c=[];let u=0,h=!1;for(;null!=(d=l.readNextNaluPayload());){const e=new z(d);if(e.type===I.kSliceSPS){const t=p.parseSPS(d.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(e,t)&&(a.Z.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:e,pps:void 0,details:t}):this.video_metadata_&&(this.video_metadata_.sps=e,this.video_metadata_.details=t)}else e.type===I.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_&&(this.video_metadata_.pps=e),(null===(r=this.video_metadata_)||void 0===r?void 0:r.sps)&&(null===(s=this.video_metadata_)||void 0===s?void 0:s.pps)&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(e.type===I.kSliceIDR||e.type===I.kSliceNonIDR&&1===o)&&(h=!0);this.video_init_segment_dispatched_&&(c.push(e),u+=e.data.byteLength)}const x=Math.floor(t/this.timescale_),f=Math.floor(i/this.timescale_);if(c.length){const e=this.video_track_,t={units:c,length:u,isKeyframe:h,dts:f,pts:x,cts:x-f,file_position:n};e&&(e.samples.push(t),e.length+=u)}}parseH265Payload(e,t,i,n,o){var r,s,l,d,c,u,h;const x=new he(e);let f=null;const p=[];let m=0,_=!1;for(;null!=(f=x.readNextNaluPayload());){const e=new ue(f);if(e.type===de.kSliceVPS){if(!this.video_init_segment_dispatched_){const t=g.parseVPS(f.data);this.video_metadata_&&(this.video_metadata_.vps=e,this.video_metadata_.details=Object.assign(Object.assign({},null===(r=this.video_metadata_)||void 0===r?void 0:r.details),t))}}else if(e.type===de.kSliceSPS){const t=g.parseSPS(f.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(e,t)&&(a.Z.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:e,pps:void 0,details:t}):this.video_metadata_&&(this.video_metadata_.sps=e,this.video_metadata_.details=Object.assign(Object.assign({},null===(s=this.video_metadata_)||void 0===s?void 0:s.details),t))}else if(e.type===de.kSlicePPS){if(!this.video_init_segment_dispatched_||this.video_metadata_changed_){const t=g.parsePPS(f.data);this.video_metadata_&&(this.video_metadata_.pps=e,this.video_metadata_.details=Object.assign(Object.assign({},null===(l=this.video_metadata_)||void 0===l?void 0:l.details),t)),(null===(d=this.video_metadata_)||void 0===d?void 0:d.vps)&&(null===(c=this.video_metadata_)||void 0===c?void 0:c.sps)&&(null===(u=this.video_metadata_)||void 0===u?void 0:u.pps)&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())}}else e.type!==de.kSliceIDR_W_RADL&&e.type!==de.kSliceIDR_N_LP&&e.type!==de.kSliceCRA_NUT||(_=!0);this.video_init_segment_dispatched_&&(p.push(e),m+=e.data.byteLength)}const v=Math.floor(t/this.timescale_),y=Math.floor(i/this.timescale_);if(p.length){const e=this.video_track_,t={units:p,length:m,isKeyframe:_,dts:y,pts:v,cts:v-y,file_position:n};e&&(null===(h=e.samples)||void 0===h||h.push(t),e.length+=m)}}detectVideoMetadataChange(e,t){var i,n,o,r,s,l,d,c,u,h;if(t.codec_mimetype!==(null===(n=null===(i=this.video_metadata_)||void 0===i?void 0:i.details)||void 0===n?void 0:n.codec_mimetype))return a.Z.v(this.TAG,`Video: Codec mimeType changed from ${null===(o=this.video_metadata_)||void 0===o?void 0:o.details.codec_mimetype} to ${null==t?void 0:t.codec_mimetype}`),!0;if(t.codec_size.width!==(null===(s=null===(r=this.video_metadata_)||void 0===r?void 0:r.details)||void 0===s?void 0:s.codec_size.width)||t.codec_size.height!==(null===(d=null===(l=this.video_metadata_)||void 0===l?void 0:l.details)||void 0===d?void 0:d.codec_size.height)){const e=null===(c=this.video_metadata_)||void 0===c?void 0:c.details.codec_size,i=t.codec_size;return a.Z.v(this.TAG,`Video: Coded Resolution changed from ${e.width}x${e.height} to ${i.width}x${i.height}`),!0}return t.present_size.width!==(null===(u=this.video_metadata_)||void 0===u?void 0:u.details.present_size.width)&&(a.Z.v(this.TAG,`Video: Present resolution width changed from ${null===(h=this.video_metadata_)||void 0===h?void 0:h.details.present_size.width} to ${null==t?void 0:t.present_size.width}`),!0)}isInitSegmentDispatched(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_}dispatchVideoInitSegment(){var e,t,i,n,o,r,s,l,d,c,u,h;const x=null===(e=this.video_metadata_)||void 0===e?void 0:e.details,f={type:"video"};f.id=null===(t=this.video_track_)||void 0===t?void 0:t.id,f.timescale=1e3,f.duration=this.duration_,f.codecWidth=x.codec_size.width,f.codecHeight=x.codec_size.height,f.presentWidth=x.present_size.width,f.presentHeight=x.present_size.height,f.profile=x.profile_string,f.level=x.level_string,f.bitDepth=x.bit_depth,f.chromaFormat=x.chroma_format,f.sarRatio=x.sar_ratio,f.frameRate=x.frame_rate;const p=f.frameRate.fps_den,m=f.frameRate.fps_num;if(f.refSampleDuration=p/m*1e3,f.codec=x.codec_mimetype,null===(i=this.video_metadata_)||void 0===i?void 0:i.vps){const e=null===(n=this.video_metadata_)||void 0===n?void 0:n.vps.data.subarray(4),t=null===(r=null===(o=this.video_metadata_)||void 0===o?void 0:o.sps)||void 0===r?void 0:r.data.subarray(4),i=null===(l=null===(s=this.video_metadata_)||void 0===s?void 0:s.pps)||void 0===l?void 0:l.data.subarray(4),d=new xe(e,t,i,x);f.hvcc=d.getData(),this.video_init_segment_dispatched_||a.Z.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: "+f.codec)}else{const e=null===(c=null===(d=this.video_metadata_)||void 0===d?void 0:d.sps)||void 0===c?void 0:c.data.subarray(4),t=null===(h=null===(u=this.video_metadata_)||void 0===u?void 0:u.pps)||void 0===h?void 0:h.data.subarray(4),i=new N(e,t,x);f.avcc=i.getData(),this.video_init_segment_dispatched_||a.Z.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: "+f.codec)}this.onTrackMetadata&&this.onTrackMetadata("video",f),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;const _=this.media_info_;_.hasVideo=!0,_.width=f.codecWidth,_.height=f.codecHeight,_.fps=f.frameRate.fps,_.profile=f.profile,_.level=f.level,_.refFrames=x.ref_frames,_.chromaFormat=x.chroma_format_string,_.sarNum=f.sarRatio.width,_.sarDen=f.sarRatio.height,_.videoCodec=f.codec,_.hasAudio&&_.audioCodec?_.mimeType=`video/mp2t; codecs="${_.videoCodec},${_.audioCodec}"`:_.mimeType=`video/mp2t; codecs="${_.videoCodec}"`,_.isComplete()&&this.onMediaInfo&&this.onMediaInfo(_)}dispatchVideoMediaSegment(){var e;this.isInitSegmentDispatched()&&(null===(e=this.video_track_)||void 0===e?void 0:e.length)&&this.onDataAvailable&&this.onDataAvailable(null,this.video_track_)}dispatchAudioMediaSegment(){var e;this.isInitSegmentDispatched()&&(null===(e=this.audio_track_)||void 0===e?void 0:e.length)&&this.onDataAvailable&&this.onDataAvailable(this.audio_track_,null)}dispatchAudioVideoMediaSegment(){var e,t;this.isInitSegmentDispatched()&&((null===(e=this.audio_track_)||void 0===e?void 0:e.length)||(null===(t=this.video_track_)||void 0===t?void 0:t.length))&&this.onDataAvailable&&this.onDataAvailable(this.audio_track_,this.video_track_)}parseADTSAACPayload(e,t){var i,n,o;if(this.has_video_&&!this.video_init_segment_dispatched_)return;if(this.aac_last_incomplete_data_){const t=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength);t.set(this.aac_last_incomplete_data_,0),t.set(e,this.aac_last_incomplete_data_.byteLength),e=t}let r,s=0;if(void 0!==t&&(s=t/this.timescale_),"aac"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec)){if(void 0===t&&void 0!==this.aac_last_sample_pts_)r=1024/(null===(n=this.audio_metadata_)||void 0===n?void 0:n.sampling_frequency)*1e3,s=this.aac_last_sample_pts_+r;else if(void 0===t)return void a.Z.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){r=1024/this.audio_metadata_.sampling_frequency*1e3;const e=this.aac_last_sample_pts_+r;Math.abs(e-s)>1&&(a.Z.w(this.TAG,`AAC: Detected pts overlapped, expected: ${e}ms, PES pts: ${s}ms`),s=e)}}const l=new G(e);let d=null,c=s,u=0;for(;null!=(d=l.readNextAACFrame());){r=1024/d.sampling_frequency*1e3;const e={codec:"aac",data:d};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"aac",audio_object_type:d.audio_object_type,sampling_freq_index:d.sampling_freq_index,sampling_frequency:d.sampling_frequency,channel_config:d.channel_config},this.dispatchAudioInitSegment(e)),u=c;const t=Math.floor(c),i={unit:d.data,length:d.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(o=this.audio_track_)||void 0===o||o.samples.push(i),this.audio_track_.length+=d.data.byteLength),c+=r}l.hasIncompleteData()&&(this.aac_last_incomplete_data_=l.getIncompleteData()),u&&(this.aac_last_sample_pts_=u)}parseLOASAACPayload(e,t){var i,n,o;if(this.has_video_&&!this.video_init_segment_dispatched_)return;if(this.aac_last_incomplete_data_){const t=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength);t.set(this.aac_last_incomplete_data_,0),t.set(e,this.aac_last_incomplete_data_.byteLength),e=t}let r,s=0;if(void 0!==t&&(s=t/this.timescale_),"aac"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec)){if(void 0===t&&void 0!==this.aac_last_sample_pts_)r=1024/this.audio_metadata_.sampling_frequency*1e3,s=this.aac_last_sample_pts_+r;else if(void 0===t)return void a.Z.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){r=1024/this.audio_metadata_.sampling_frequency*1e3;const e=this.aac_last_sample_pts_+r;Math.abs(e-s)>1&&(a.Z.w(this.TAG,`AAC: Detected pts overlapped, expected: ${e}ms, PES pts: ${s}ms`),s=e)}}const l=new Y(e);let d=null,c=s,u=0;for(;null!=(d=l.readNextAACFrame(null!==(n=this.loas_previous_frame)&&void 0!==n?n:void 0));){this.loas_previous_frame=d,r=1024/d.sampling_frequency*1e3;const e={codec:"aac",data:d};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"aac",audio_object_type:d.audio_object_type,sampling_freq_index:d.sampling_freq_index,sampling_frequency:d.sampling_frequency,channel_config:d.channel_config},this.dispatchAudioInitSegment(e)),u=c;const t=Math.floor(c),i={unit:d.data,length:d.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(o=this.audio_track_)||void 0===o||o.samples.push(i),this.audio_track_.length+=d.data.byteLength),c+=r}l.hasIncompleteData()&&(this.aac_last_incomplete_data_=l.getIncompleteData()),u&&(this.aac_last_sample_pts_=u)}parseAC3Payload(e,t){var i,n;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let o,r=0;if(void 0!==t&&(r=t/this.timescale_),"ac-3"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec))if(void 0===t&&void 0!==this.aac_last_sample_pts_)o=1536/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+o;else if(void 0===t)return void a.Z.w(this.TAG,"AC3: Unknown pts");const s=new ge(e);let l=null,d=r,c=0;for(;null!=(l=s.readNextAC3Frame());){o=1536/l.sampling_frequency*1e3;const e={codec:"ac-3",data:l};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"ac-3",sampling_frequency:l.sampling_frequency,bit_stream_identification:l.bit_stream_identification,bit_stream_mode:l.bit_stream_mode,low_frequency_effects_channel_on:l.low_frequency_effects_channel_on,channel_mode:l.channel_mode},this.dispatchAudioInitSegment(e)),c=d;const t=Math.floor(d),i={unit:l.data,length:l.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(n=this.audio_track_)||void 0===n||n.samples.push(i),this.audio_track_.length+=l.data.byteLength),d+=o}c&&(this.aac_last_sample_pts_=c)}parseEAC3Payload(e,t){var i,n;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let o,r=0;if(void 0!==t&&(r=t/this.timescale_),"ec-3"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec))if(void 0===t&&void 0!==this.aac_last_sample_pts_)o=256*(this.audio_metadata_.num_blks||0)/(this.audio_metadata_.sampling_frequency||0)*1e3,r=this.aac_last_sample_pts_+o;else if(void 0===t)return void a.Z.w(this.TAG,"EAC3: Unknown pts");const s=new be(e);let l=null,d=r,c=0;for(;null!=(l=s.readNextEAC3Frame());){o=1536/l.sampling_frequency*1e3;const e={codec:"ec-3",data:l};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"ec-3",sampling_frequency:l.sampling_frequency,bit_stream_identification:l.bit_stream_identification,low_frequency_effects_channel_on:l.low_frequency_effects_channel_on,num_blks:l.num_blks,channel_mode:l.channel_mode},this.dispatchAudioInitSegment(e)),c=d;const t=Math.floor(d),i={unit:l.data,length:l.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(n=this.audio_track_)||void 0===n||n.samples.push(i),this.audio_track_.length+=l.data.byteLength),d+=o}c&&(this.aac_last_sample_pts_=c)}parseOpusPayload(e,t){var i,n;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let o,r=0;if(void 0!==t&&(r=t/this.timescale_),"opus"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec))if(void 0===t&&void 0!==this.aac_last_sample_pts_)o=20,r=this.aac_last_sample_pts_+o;else if(void 0===t)return void a.Z.w(this.TAG,"Opus: Unknown pts");let s=r,l=0;for(let a=0;a<e.length;){o=20;const t=0!=(16&e[a+1]),i=0!=(8&e[a+1]);let r=a+2,d=0;for(;255===e[r];)d+=255,r+=1;d+=e[r],r+=1,r+=t?2:0,r+=i?2:0,l=s;const c=Math.floor(s),u=e.slice(r,r+d),h={unit:u,length:u.byteLength,pts:c,dts:c};this.audio_track_&&(null===(n=this.audio_track_)||void 0===n||n.samples.push(h),this.audio_track_.length+=u.byteLength),s+=o,a=r+d}l&&(this.aac_last_sample_pts_=l)}parseMP3Payload(e,t){var i;if(this.has_video_&&!this.video_init_segment_dispatched_)return;const n=[44100,48e3,32e3,0],a=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],r=e[1]>>>3&3,s=(6&e[1])>>1;e[2];const l=(12&e[2])>>>2,d=3!==(e[3]>>>6&3)?2:1;let c=0,u=34;switch(r){case 0:c=o[l];break;case 2:c=a[l];break;case 3:c=n[l]}switch(s){case 1:u=34;break;case 2:u=33;break;case 3:u=32}const h=new pe;h.object_type=u,h.sample_rate=c,h.channel_count=d,h.data=e;const x={codec:"mp3",data:h};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(x)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(x)):(this.audio_metadata_={codec:"mp3",object_type:u,sample_rate:c,channel_count:d},this.dispatchAudioInitSegment(x));const f={unit:e,length:e.byteLength,pts:t/this.timescale_,dts:t/this.timescale_};this.audio_track_&&(null===(i=this.audio_track_)||void 0===i||i.samples.push(f),this.audio_track_.length+=e.byteLength)}detectAudioMetadataChange(e){var t,i,n,o;if(e.codec!==(null===(t=this.audio_metadata_)||void 0===t?void 0:t.codec))return a.Z.v(this.TAG,`Audio: Audio Codecs changed from ${null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec} to ${e.codec}`),!0;if("aac"===e.codec&&"aac"===this.audio_metadata_.codec){const t=e.data;if(t.audio_object_type!==this.audio_metadata_.audio_object_type)return a.Z.v(this.TAG,`AAC: AudioObjectType changed from ${this.audio_metadata_.audio_object_type} to ${t.audio_object_type}`),!0;if(t.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return a.Z.v(this.TAG,`AAC: SamplingFrequencyIndex changed from ${this.audio_metadata_.sampling_freq_index} to ${t.sampling_freq_index}`),!0;if(t.channel_config!==this.audio_metadata_.channel_config)return a.Z.v(this.TAG,`AAC: Channel configuration changed from ${null===(n=this.audio_metadata_)||void 0===n?void 0:n.channel_config} to ${t.channel_config}`),!0}else if("ac-3"===e.codec&&"ac-3"===this.audio_metadata_.codec){const t=e.data;if(t.sampling_frequency!==this.audio_metadata_.sampling_frequency)return a.Z.v(this.TAG,`AC3: Sampling Frequency changed from ${null===(o=this.audio_metadata_)||void 0===o?void 0:o.sampling_frequency} to ${t.sampling_frequency}`),!0;if(t.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return a.Z.v(this.TAG,`AC3: Bit Stream Identification changed from ${this.audio_metadata_.bit_stream_identification} to ${t.bit_stream_identification}`),!0;if(t.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return a.Z.v(this.TAG,`AC3: BitStream Mode changed from ${this.audio_metadata_.bit_stream_mode} to ${t.bit_stream_mode}`),!0;if(t.channel_mode!==this.audio_metadata_.channel_mode)return a.Z.v(this.TAG,`AC3: Channel Mode changed from ${this.audio_metadata_.channel_mode} to ${t.channel_mode}`),!0;if(t.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return a.Z.v(this.TAG,`AC3: Low Frequency Effects Channel On changed from ${this.audio_metadata_.low_frequency_effects_channel_on} to ${t.low_frequency_effects_channel_on}`),!0}else if("opus"===e.codec&&"opus"===this.audio_metadata_.codec){const t=e.meta;if(t.sample_rate!==this.audio_metadata_.sample_rate)return a.Z.v(this.TAG,`Opus: SamplingFrequencyIndex changed from ${this.audio_metadata_.sample_rate} to ${t.sample_rate}`),!0;if(t.channel_count!==this.audio_metadata_.channel_count)return a.Z.v(this.TAG,`Opus: Channel count changed from ${this.audio_metadata_.channel_count} to ${t.channel_count}`),!0}else if("mp3"===e.codec&&"mp3"===this.audio_metadata_.codec){const t=e.data;if(t.object_type!==this.audio_metadata_.object_type)return a.Z.v(this.TAG,`MP3: AudioObjectType changed from ${this.audio_metadata_.object_type} to ${t.object_type}`),!0;if(t.sample_rate!==this.audio_metadata_.sample_rate)return a.Z.v(this.TAG,`MP3: SamplingFrequencyIndex changed from ${this.audio_metadata_.sample_rate} to ${t.sample_rate}`),!0;if(t.channel_count!==this.audio_metadata_.channel_count)return a.Z.v(this.TAG,`MP3: Channel count changed from ${this.audio_metadata_.channel_count} to ${t.channel_count}`),!0}return!1}dispatchAudioInitSegment(e){var t,i,n,o,r,s;const l={type:"audio"};if(l.id=null===(t=this.audio_track_)||void 0===t?void 0:t.id,l.timescale=1e3,l.duration=this.duration_,"aac"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec)){const t="aac"===e.codec?e.data:null,i=new W(t);l.audioSampleRate=i.sampling_rate,l.channelCount=i.channel_count,l.codec=i.codec_mimetype,l.originalCodec=i.original_codec_mimetype,l.config=i.config,l.refSampleDuration=1024/l.audioSampleRate*l.timescale}else if("ac-3"===(null===(n=this.audio_metadata_)||void 0===n?void 0:n.codec)){const t="ac-3"===e.codec?e.data:null,i=new ve(t);l.audioSampleRate=i.sampling_rate,l.channelCount=i.channel_count,l.codec=i.codec_mimetype,l.originalCodec=i.original_codec_mimetype,l.config=i.config,l.refSampleDuration=1536/l.audioSampleRate*l.timescale}else if("ec-3"===(null===(o=this.audio_metadata_)||void 0===o?void 0:o.codec)){const t="ec-3"===e.codec?e.data:null,i=new Se(t);l.audioSampleRate=i.sampling_rate,l.channelCount=i.channel_count,l.codec=i.codec_mimetype,l.originalCodec=i.original_codec_mimetype,l.config=i.config,l.refSampleDuration=256*i.num_blks/l.audioSampleRate*l.timescale}else"opus"===(null===(r=this.audio_metadata_)||void 0===r?void 0:r.codec)?(l.audioSampleRate=this.audio_metadata_.sample_rate,l.channelCount=this.audio_metadata_.channel_count,l.channelConfigCode=this.audio_metadata_.channel_config_code,l.codec="opus",l.originalCodec="opus",l.config=void 0,l.refSampleDuration=20):"mp3"===(null===(s=this.audio_metadata_)||void 0===s?void 0:s.codec)&&(l.audioSampleRate=this.audio_metadata_.sample_rate,l.channelCount=this.audio_metadata_.channel_count,l.codec="mp3",l.originalCodec="mp3",l.config=void 0);this.audio_init_segment_dispatched_||a.Z.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: "+l.codec),this.onTrackMetadata&&this.onTrackMetadata("audio",l),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;const d=this.media_info_;d.hasAudio=!0,d.audioCodec=l.originalCodec,d.audioSampleRate=l.audioSampleRate,d.audioChannelCount=l.channelCount,d.hasVideo&&d.videoCodec?d.mimeType=`video/mp2t; codecs="${d.videoCodec},${d.audioCodec}"`:d.mimeType=`video/mp2t; codecs="${d.audioCodec}"`,d.isComplete()&&this.onMediaInfo&&this.onMediaInfo(d)}dispatchPESPrivateDataDescriptor(e,t,i){const n=new X;n.pid=e,n.stream_type=t,n.descriptor=i,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(n)}parsePESPrivateDataPayload(e,t,i,n,a){const o=new Z;if(o.pid=n,o.stream_id=a,o.len=e.byteLength,o.data=e,void 0!==t){const e=Math.floor(t/this.timescale_);o.pts=e}else o.nearest_pts=this.aac_last_sample_pts_;if(void 0!==i){const e=Math.floor(i/this.timescale_);o.dts=e}this.onPESPrivateData&&this.onPESPrivateData(o)}parseTimedID3MetadataPayload(e,t,i,n,a){const o=new Z;if(o.pid=n,o.stream_id=a,o.len=e.byteLength,o.data=e,void 0!==t){const e=Math.floor(t/this.timescale_);o.pts=e}if(void 0!==i){const e=Math.floor(i/this.timescale_);o.dts=e}this.onTimedID3Metadata&&this.onTimedID3Metadata(o)}parseSMPTE2038MetadataPayload(e,t,i,n,a){const o=new fe;if(o.pid=n,o.stream_id=a,o.len=e.byteLength,o.data=e,void 0!==t){const e=Math.floor(t/this.timescale_);o.pts=e}if(o.nearest_pts=this.aac_last_sample_pts_,void 0!==i){const e=Math.floor(i/this.timescale_);o.dts=e}o.ancillaries=(e=>{let t=new x(e),i=0;const n=[];for(;i+=6,0===t.readBits(6);){const e=t.readBool();i+=1;const a=t.readBits(11);i+=11;const o=t.readBits(12);i+=12;const r=255&t.readBits(10);i+=10;const s=255&t.readBits(10);i+=10;const l=255&t.readBits(10);i+=10;const d=new Uint8Array(l);for(let n=0;n<l;n++){const e=255&t.readBits(10);i+=10,d[n]=e}t.readBits(10),i+=10;let c="User Defined";const u={};65===r?7===s&&(c="SCTE-104"):95===r?220===s?c="ARIB STD-B37 (1SEG)":221===s?c="ARIB STD-B37 (ANALOG)":222===s?c="ARIB STD-B37 (SD)":223===s&&(c="ARIB STD-B37 (HD)"):97===r&&(1===s?c="EIA-708":2===s&&(c="EIA-608")),n.push({yc_indicator:e,line_number:a,horizontal_offset:o,did:r,sdid:s,user_data:d,description:c,information:u}),t.readBits(8-(i-Math.floor(i/8))%8),i+=(8-(i-Math.floor(i/8)))%8}return t.destroy(),t=null,n})(e),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(o)}},we=new Uint8Array([0,0,0,0,0,0,0,0]);class Te{static init(){Te.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],av01:[],av1C:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[],"ec-3":[],dec3:[]};for(const e in Te.types)Te.types.hasOwnProperty(e)&&(Te.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])}static box(e,...t){let i=8,n=null;const a=Array.prototype.slice.call(arguments,1),o=a.length;for(let s=0;s<o;s++)i+=a[s].byteLength;n=new Uint8Array(i),n[0]=i>>>24&255,n[1]=i>>>16&255,n[2]=i>>>8&255,n[3]=255&i,n.set(e,4);let r=8;for(let s=0;s<o;s++)n.set(a[s],r),r+=a[s].byteLength;return n}static generateInitSegment(e){const t=Te.box(Te.types.ftyp,Te.constants.FTYP),i=Te.moov(e),n=new Uint8Array(t.byteLength+i.byteLength);return n.set(t,0),n.set(i,t.byteLength),n}static moov(e){const t=Te.mvhd(e.timescale,e.duration),i=Te.trak(e),n=Te.mvex(e);return Te.box(Te.types.moov,t,i,n)}static mvhd(e,t){return Te.box(Te.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}static trak(e){return Te.box(Te.types.trak,Te.tkhd(e),Te.mdia(e))}static tkhd(e){const t=e.id,i=e.duration,n=e.presentWidth,a=e.presentHeight;return Te.box(Te.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,a>>>8&255,255&a,0,0]))}static mdia(e){return Te.box(Te.types.mdia,Te.mdhd(e),Te.hdlr(e),Te.minf(e))}static mdhd(e){const t=e.timescale,i=e.duration;return Te.box(Te.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))}static hdlr(e){let t=null;return t="audio"===e.type?Te.constants.HDLR_AUDIO:Te.constants.HDLR_VIDEO,Te.box(Te.types.hdlr,t)}static minf(e){let t=null;return t="audio"===e.type?Te.box(Te.types.smhd,Te.constants.SMHD):Te.box(Te.types.vmhd,Te.constants.VMHD),Te.box(Te.types.minf,t,Te.dinf(),Te.stbl(e))}static dinf(){return Te.box(Te.types.dinf,Te.box(Te.types.dref,Te.constants.DREF))}static stbl(e){return Te.box(Te.types.stbl,Te.stsd(e),Te.box(Te.types.stts,Te.constants.STTS),Te.box(Te.types.stsc,Te.constants.STSC),Te.box(Te.types.stsz,Te.constants.STSZ),Te.box(Te.types.stco,Te.constants.STCO))}static stsd(e){return"audio"===e.type?"mp3"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.mp3(e)):"ac-3"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.ac3(e)):"ec-3"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.ec3(e)):"opus"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.Opus(e)):Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.hvc1(e)):"video"===e.type&&e.codec.startsWith("av01")?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.av01(e)):Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.avc1(e))}static mp3(e){const t=e.channelCount,i=e.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return Te.box(Te.types[".mp3"],n)}static mp4a(e){const t=e.channelCount,i=e.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return Te.box(Te.types.mp4a,n,Te.esds(e))}static ac3(e){var t;const i=e.channelCount,n=e.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return Te.box(Te.types["ac-3"],a,Te.box(Te.types.dac3,new Uint8Array(null!==(t=e.config)&&void 0!==t?t:[])))}static ec3(e){var t;const i=e.channelCount,n=e.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return Te.box(Te.types["ec-3"],a,Te.box(Te.types.dec3,new Uint8Array(null!==(t=e.config)&&void 0!==t?t:[])))}static esds(e){var t;const i=null!==(t=e.config)&&void 0!==t?t:[],n=i.length,a=new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(i).concat([6,1,2]));return Te.box(Te.types.esds,a)}static Opus(e){const t=e.channelCount,i=e.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return Te.box(Te.types.Opus,n,Te.dOps(e))}static dOps(e){const t=e.channelCount,i=e.channelConfigCode,n=e.audioSampleRate;let a=[];switch(i){case 1:case 2:a=[0];break;case 0:a=[255,1,1,0,1];break;case 128:a=[255,2,0,0,1];break;case 3:a=[1,2,1,0,2,1];break;case 4:a=[1,2,2,0,1,2,3];break;case 5:a=[1,3,2,0,4,1,2,3];break;case 6:a=[1,4,2,0,4,1,2,3,5];break;case 7:a=[1,4,2,0,4,1,2,3,5,6];break;case 8:a=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:a=[1,1,2,0,1];break;case 131:a=[1,1,3,0,1,2];break;case 132:a=[1,1,4,0,1,2,3];break;case 133:a=[1,1,5,0,1,2,3,4];break;case 134:a=[1,1,6,0,1,2,3,4,5];break;case 135:a=[1,1,7,0,1,2,3,4,5,6];break;case 136:a=[1,1,8,0,1,2,3,4,5,6,7]}const o=new Uint8Array([0,t,0,0,n>>>24&255,n>>>17&255,n>>>8&255,n>>>0&255,0,0,...a]);return Te.box(Te.types.dOps,o)}static avc1(e){const t=e.avcc,i=e.codecWidth,n=e.codecHeight,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,n>>>8&255,255&n,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return Te.box(Te.types.avc1,a,Te.box(Te.types.avcC,t))}static hvc1(e){const t=e.hvcc,i=e.codecWidth,n=e.codecHeight,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,n>>>8&255,255&n,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return Te.box(Te.types.hvc1,a,Te.box(Te.types.hvcC,t))}static av01(e){var t,i;const n=e.av1c,a=null!==(t=e.codecWidth)&&void 0!==t?t:192,o=null!==(i=e.codecHeight)&&void 0!==i?i:108,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,o>>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return Te.box(Te.types.av01,r,Te.box(Te.types.av1C,n))}static mvex(e){return Te.box(Te.types.mvex,Te.trex(e))}static trex(e){const t=e.id,i=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return Te.box(Te.types.trex,i)}static moof(e,t){return Te.box(Te.types.moof,Te.mfhd(e.sequenceNumber),Te.traf(e,t))}static mfhd(e){const t=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return Te.box(Te.types.mfhd,t)}static traf(e,t){const i=e.id,n=Te.box(Te.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),a=Te.box(Te.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),o=Te.sdtp(e),r=Te.trun(e,o.byteLength+16+16+8+16+8+8);return Te.box(Te.types.traf,n,a,r,o)}static sdtp(e){const t=e.samples||[],i=t.length,n=new Uint8Array(4+i);for(let a=0;a<i;a++){const e=t[a].flags;n[a+4]=e.isLeading<<6|e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy}return Te.box(Te.types.sdtp,n)}static trun(e,t){const i=e.samples||[],n=i.length,a=12+16*n,o=new Uint8Array(a);t+=8+a,o.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(let r=0;r<n;r++){const e=i[r].duration,t=i[r].size,n=i[r].flags,a=i[r].cts;o.set([e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n.isLeading<<2|n.dependsOn,n.isDependedOn<<6|n.hasRedundancy<<4|n.isNonSync,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a],12+16*r)}return Te.box(Te.types.trun,o)}static mdat(e){return Te.box(Te.types.mdat,e)}}Te.constants={FTYP:new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),STSD_PREFIX:new Uint8Array([0,0,0,0,0,0,0,1]),STTS:we,STSC:we,STCO:we,STSZ:new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),HDLR_VIDEO:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),HDLR_AUDIO:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),DREF:new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),SMHD:new Uint8Array([0,0,0,0,0,0,0,0]),VMHD:new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},Te.init();const Pe=Te,Ee=class{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}};var ke=i(68);const Re=class{constructor(e){var t;this.TAG="MP4Remuxer",this._fillSilentAfterSeek=!1,this._config=e,this._isLive=!!e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new ke.J1("audio"),this._videoSegmentInfoList=new ke.J1("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!o.Z.chrome||!(o.Z.version&&o.Z.version.major<50||o.Z.version&&50===o.Z.version.major&&((null===(t=o.Z.version)||void 0===t?void 0:t.build)||0)<2661)),this._fillSilentAfterSeek=!(!o.Z.msedge&&!o.Z.msie),this._mp3UseMpegAudio=!o.Z.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}destroy(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}bindDataSource(e){var t;return e.onDataAvailable=null===(t=this.remux)||void 0===t?void 0:t.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}get onInitSegment(){return this._onInitSegment}set onInitSegment(e){this._onInitSegment=e}get onMediaSegment(){return this._onMediaSegment}set onMediaSegment(e){this._onMediaSegment=e}insertDiscontinuity(){this._audioNextDts=this._videoNextDts=void 0}seek(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}remux(e,t){if(!this._onMediaSegment)throw new d.rT("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),t&&this._remuxVideo(t),e&&this._remuxAudio(e)}_onTrackMetadataReceived(e,t){let i=null,n="mp4",a=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(n="mpeg",a="",i=new Uint8Array):i=Pe.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,i=Pe.generateInitSegment(t)}if(!this._onInitSegment)throw new d.rT("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:i.buffer,codec:a,container:`${e}/${n}`,mediaDuration:t.duration})}_calculateDtsBase(e,t){var i,n;this._dtsBaseInited||((null===(i=null==e?void 0:e.samples)||void 0===i?void 0:i.length)&&(this._audioDtsBase=e.samples[0].dts),(null===(n=null==t?void 0:t.samples)||void 0===n?void 0:n.length)&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}getTimestampBase(){if(this._dtsBaseInited)return this._dtsBase}flushStashedSamples(){const e=this._videoStashedLastSample,t=this._audioStashedLastSample,i={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(i.samples.push(e),i.length=null==e?void 0:e.length);const n={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(n.samples.push(t),n.length=null==t?void 0:t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(i,!0),this._remuxAudio(n,!0)}_remuxAudio(e,t){var i,n,r,s,l,d,c;if(null==this._audioMeta)return;const u=e,h=u.samples;let x,f=-1,p=-1;const m=this._audioMeta.refSampleDuration,_="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,g=this._dtsBaseInited&&void 0===this._audioNextDts;let v=!1;if(!h||0===h.length)return;if(1===h.length&&!t)return;let y=0,b=null,S=0;_?(y=0,S=u.length):(y=8,S=8+u.length);let C=null;if(h.length>1&&(C=h.pop(),S-=C.length),null!=this._audioStashedLastSample){const e=this._audioStashedLastSample;this._audioStashedLastSample=null,h.unshift(e),S+=e.length}null!=C&&(this._audioStashedLastSample=C);const w=h[0].dts-this._dtsBase;if(this._audioNextDts)x=w-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())x=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(v=!0);else{const e=this._audioSegmentInfoList.getLastSampleBefore(w);if(null!=e){let t=w-(e.originalDts+e.duration);t<=3&&(t=0),x=w-(e.dts+e.duration+t)}else x=0}if(v){const e=w-x,t=this._videoSegmentInfoList.getLastSegmentBefore(w);if(null!=t&&t.beginDts<e){const o=Ee.getSilentFrame(null===(i=this._audioMeta)||void 0===i?void 0:i.originalCodec,null===(n=this._audioMeta)||void 0===n?void 0:n.channelCount);if(o){const i=t.beginDts,n=e-t.beginDts;a.Z.v(this.TAG,`InsertPrefixSilentAudio: dts: ${i}, duration: ${n}`),h.unshift({unit:o,dts:i,pts:i}),S+=o.byteLength}}else v=!1}const T=[];for(let I=0;I<h.length;I++){const e=h[I],t=e.unit,i=e.dts-this._dtsBase;let n=i,c=!1,u=null,p=0;if(!(i<-.001)){if("mp3"!==this._audioMeta.codec){let e=i;const l=3;if(this._audioNextDts&&(e=this._audioNextDts),x=i-e,x<=-l*(m||0)){a.Z.w(this.TAG,`Dropping 1 audio frame (originalDts: ${i} ms ,curRefDts: ${e} ms)  due to dtsCorrection: ${x} ms overlap.`);continue}if(x>=l*(m||0)&&this._fillAudioTimestampGap&&!o.Z.safari){c=!0;const o=Math.floor(x/(m||0));a.Z.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: ${i} ms, curRefDts: ${e} ms, dtsCorrection: ${Math.round(x)} ms, generate: ${o} frames`),n=Math.floor(e),p=Math.floor(e+(m||0))-n;let l=Ee.getSilentFrame(null===(r=this._audioMeta)||void 0===r?void 0:r.originalCodec,this._audioMeta.channelCount);null==l&&(a.Z.w(this.TAG,`Unable to generate silent frame for ${null===(s=this._audioMeta)||void 0===s?void 0:s.originalCodec} with ${this._audioMeta.channelCount} channels, repeat last frame`),l=t),u=[];for(let t=0;t<o;t++){e+=m||0;const t=Math.floor(e),n=Math.floor(e+(m||0))-t,a={dts:t,pts:t,cts:0,unit:l,size:l.byteLength,duration:n,originalDts:i,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};u.push(a),S+=a.size}this._audioNextDts=e+(m||0)}else n=Math.floor(e),p=Math.floor(e+(m||0))-n,this._audioNextDts=e+(m||0)}else n=i-x,p=I!==h.length-1?h[I+1].dts-this._dtsBase-x-n:null!=C?C.dts-this._dtsBase-x-n:T.length>=1?null===(l=T[T.length-1])||void 0===l?void 0:l.duration:Math.floor(m||0),this._audioNextDts=n+p;-1===f&&(f=n),T.push({dts:n,pts:n,cts:0,unit:e.unit,size:null===(d=e.unit)||void 0===d?void 0:d.byteLength,duration:p,originalDts:i,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),c&&T.push.apply(T,u)}}if(0===T.length)return u.samples=[],void(u.length=0);_?b=new Uint8Array(S):(b=new Uint8Array(S),b[0]=S>>>24&255,b[1]=S>>>16&255,b[2]=S>>>8&255,b[3]=255&S,b.set(Pe.types.mdat,4));for(let a=0;a<T.length;a++){const e=T[a].unit;b.set(e,y),y+=e.byteLength||0}const P=T[T.length-1];p=P.dts+P.duration;const E=new ke.Yy;E.beginDts=f,E.endDts=p,E.beginPts=f,E.endPts=p,E.originalBeginDts=T[0].originalDts,E.originalEndDts=P.originalDts+P.duration,E.firstSample=new ke.Wk(T[0].dts,T[0].pts,T[0].duration,T[0].originalDts,!1),E.lastSample=new ke.Wk(P.dts,P.pts,P.duration,P.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(E),u.samples=T,u.sequenceNumber++;let k=null;k=_?new Uint8Array:Pe.moof(u,f),u.samples=[],u.length=0;const R={type:"audio",data:this._mergeBoxes(k,b).buffer,sampleCount:T.length,info:E};_&&g&&R&&(R.timestampOffset=f),null===(c=this._onMediaSegment)||void 0===c||c.call(this,"audio",R)}_remuxVideo(e,t){var i,n;if(null==this._videoMeta)return;const a=e,o=a.samples;let r,s=-1,l=-1,d=-1,c=-1;if(!o||0===o.length)return;if(1===o.length&&!t)return;let u=8,h=null,x=8+e.length,f=null;if(o.length>1&&(f=o.pop(),x-=f.length),null!=this._videoStashedLastSample){const e=this._videoStashedLastSample;this._videoStashedLastSample=null,o.unshift(e),x+=(null==e?void 0:e.length)||0}null!=f&&(this._videoStashedLastSample=f);const p=o[0].dts-this._dtsBase;if(this._videoNextDts)r=p-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())r=0;else{const e=this._videoSegmentInfoList.getLastSampleBefore(p);if(null!=e){let t=p-(e.originalDts+e.duration);t<=3&&(t=0),r=p-(e.dts+e.duration+t)}else r=0}const m=new ke.Yy,_=[];for(let y=0;y<o.length;y++){const e=o[y],t=e.dts-this._dtsBase,n=e.isKeyframe,a=t-r,l=e.cts,c=a+l;-1===s&&(s=a,d=c);let u=0;if(u=y!==o.length-1?o[y+1].dts-this._dtsBase-r-a:null!=f?f.dts-this._dtsBase-r-a:_.length>=1?_[_.length-1].duration:Math.floor((null===(i=this._videoMeta)||void 0===i?void 0:i.refSampleDuration)||0),n){const t=new ke.Wk(a,c,u,e.dts,!0);t.fileposition=e.fileposition,m.appendSyncPoint(t)}_.push({dts:a,pts:c,cts:l,units:e.units,size:e.length,isKeyframe:n,duration:u,originalDts:t,flags:{isLeading:0,dependsOn:n?2:1,isDependedOn:n?1:0,hasRedundancy:0,isNonSync:n?0:1}})}h=new Uint8Array(x),h[0]=x>>>24&255,h[1]=x>>>16&255,h[2]=x>>>8&255,h[3]=255&x,h.set(Pe.types.mdat,4);for(let y=0;y<_.length;y++){const e=_[y].units;for(;null==e?void 0:e.length;){const t=e.shift(),i=null==t?void 0:t.data;h.set(i,u),u+=i.byteLength}}const g=_[_.length-1];if(l=g.dts+g.duration,c=g.pts+g.duration,this._videoNextDts=l,m.beginDts=s,m.endDts=l,m.beginPts=d,m.endPts=c,m.originalBeginDts=_[0].originalDts,m.originalEndDts=g.originalDts+g.duration,m.firstSample=new ke.Wk(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,!!_[0].isKeyframe),m.lastSample=new ke.Wk(g.dts,g.pts,g.duration,g.originalDts,!!g.isKeyframe),this._isLive||this._videoSegmentInfoList.append(m),a.samples=_,a.sequenceNumber++,this._forceFirstIDR){const e=_[0].flags;e.dependsOn=2,e.isNonSync=0}const v=Pe.moof(a,s);a.samples=[],a.length=0,null===(n=this._onMediaSegment)||void 0===n||n.call(this,"video",{type:"video",data:this._mergeBoxes(v,h).buffer,sampleCount:_.length,info:m})}_mergeBoxes(e,t){const i=new Uint8Array(e.byteLength+t.byteLength);return i.set(e,0),i.set(t,e.byteLength),i}};var Ie=i(575),De=i(473);const Me=class{constructor(e,t){var i;this.TAG="TransmuxingController",this._emitter=new n.EventEmitter,this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;let a=0;null===(i=this._mediaDataSource.segments)||void 0===i||i.forEach(i=>{i.timestampBase=a,a+=i.duration,i.cors=e.cors,i.withCredentials=e.withCredentials,t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy)}),isNaN(a)||this._mediaDataSource.duration===a||(this._mediaDataSource.duration=a),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}destroy(){var e,t,i;this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(null===(e=this._ioctl)||void 0===e||e.destroy(),this._ioctl=null),this._demuxer&&(null===(t=this._demuxer)||void 0===t||t.destroy(),this._demuxer=null),this._remuxer&&(null===(i=this._remuxer)||void 0===i||i.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}on(e,t){this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}start(){this._loadSegment(0),this._enableStatisticsReporter()}_loadSegment(e,t){var i,n,a;if(this._currentSegmentIndex=e,null===(i=this._mediaDataSource)||void 0===i?void 0:i.segments){const i=null===(n=this._mediaDataSource)||void 0===n?void 0:n.segments[e],o=this._ioctl=new Ie.Z(i,this._config,e);o.onError=this._onIOException.bind(this),o.onSeeked=this._onIOSeeked.bind(this),o.onComplete=this._onIOComplete.bind(this),o.onRedirect=this._onIORedirect.bind(this),o.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?null===(a=this._demuxer)||void 0===a||a.bindDataSource(this._ioctl):o.onDataArrival=this._onInitChunkArrival.bind(this),o.open(t)}}stop(){this._internalAbort(),this._disableStatisticsReporter()}_internalAbort(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}pause(){var e;(null===(e=this._ioctl)||void 0===e?void 0:e.isWorking())&&(this._ioctl.pause(),this._disableStatisticsReporter())}resume(){var e;(null===(e=this._ioctl)||void 0===e?void 0:e.isPaused())&&(this._ioctl.resume(),this._enableStatisticsReporter())}seek(e){var t,i,n,a,o,r,s,l,d,c,u,h,x,f;if(null==this._mediaInfo||!(null===(t=this._mediaInfo)||void 0===t?void 0:t.isSeekable()))return;const p=this._searchSegmentIndexContains(e);if(p===this._currentSegmentIndex){const t=(null===(i=this._mediaInfo)||void 0===i?void 0:i.segments)?null===(n=this._mediaInfo)||void 0===n?void 0:n.segments[p]:{};if(void 0===t)this._pendingSeekTime=e;else{const i=null==t?void 0:t.getNearestKeyframe(e);null===(a=this._remuxer)||void 0===a||a.seek(null==i?void 0:i.milliseconds),null===(o=this._ioctl)||void 0===o||o.seek(null==i?void 0:i.fileposition),this._pendingResolveSeekPoint=null==i?void 0:i.milliseconds}}else{const t=(null===(r=this._mediaInfo)||void 0===r?void 0:r.segments)?null===(s=this._mediaInfo)||void 0===s?void 0:s.segments[p]:{};if(void 0===t)this._pendingSeekTime=e,this._internalAbort(),null===(l=this._remuxer)||void 0===l||l.seek(),null===(d=this._remuxer)||void 0===d||d.insertDiscontinuity(),this._loadSegment(p);else{const i=t.getNearestKeyframe(e);this._internalAbort(),null===(c=this._remuxer)||void 0===c||c.seek(e),null===(u=this._remuxer)||void 0===u||u.insertDiscontinuity(),this._demuxer&&(null===(h=this._demuxer)||void 0===h||h.resetMediaInfo(),this._demuxer.timestampBase=(null===(x=this._mediaDataSource)||void 0===x?void 0:x.segments)?null===(f=this._mediaDataSource)||void 0===f?void 0:f.segments[p].timestampBase:0),this._loadSegment(p,null==i?void 0:i.fileposition),this._pendingResolveSeekPoint=null==i?void 0:i.milliseconds,this._reportSegmentMediaInfo(p)}}this._enableStatisticsReporter()}_searchSegmentIndexContains(e){var t;const i=this._mediaDataSource.segments;let n=((null==i?void 0:i.length)||0)-1;if(0===((null==i?void 0:i.length)||0))return n;for(let a=0;a<((null==i?void 0:i.length)||0);a++)if(i&&e<((null===(t=i[a])||void 0===t?void 0:t.timestampBase)||0)){n=a-1;break}return n}_onInitChunkArrival(e,t){var i,n,o,r,s;let l=0;if(t>0)null===(i=this._demuxer)||void 0===i||i.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments?null===(n=this._mediaDataSource.segments[this._currentSegmentIndex])||void 0===n?void 0:n.timestampBase:0,l=(null===(o=this._demuxer)||void 0===o?void 0:o.parseChunks(e,t))||0;else{let i=null;i=P.probe(e),i.match&&(this._setupFLVDemuxerRemuxer(i),l=(null===(r=this._demuxer)||void 0===r?void 0:r.parseChunks(e,t))||0),i.match||(null==i?void 0:i.needMoreData)||(i=Ce.probe(e),i.match&&(this._setupTSDemuxerRemuxer(i),l=(null===(s=this._demuxer)||void 0===s?void 0:s.parseChunks(e,t))||0)),i.match||(null==i?void 0:i.needMoreData)||(i=null,a.Z.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(()=>{this._internalAbort()}),this._emitter.emit(De.Z.DEMUX_ERROR,m.Z.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return l}_setupFLVDemuxerRemuxer(e){var t;this._demuxer=new P(e,this._config),this._remuxer||(this._remuxer=new Re(this._config));const i=this._mediaDataSource;void 0===i.duration||isNaN(i.duration)||(this._demuxer.overridedDuration=i.duration),"boolean"==typeof i.hasAudio&&(this._demuxer.overridedHasAudio=i.hasAudio),"boolean"==typeof i.hasVideo&&(this._demuxer.overridedHasVideo=i.hasVideo),i.segments&&this._demuxer&&this._remuxer&&(this._demuxer.timestampBase=null===(t=null==i?void 0:i.segments[this._currentSegmentIndex])||void 0===t?void 0:t.timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this))}_setupTSDemuxerRemuxer(e){const t=this._demuxer=new Ce(e,this._config);this._remuxer||(this._remuxer=new Re(this._config)),t.onError=this._onDemuxException.bind(this),t.onMediaInfo=this._onMediaInfo.bind(this),t.onMetaDataArrived=this._onMetaDataArrived.bind(this),t.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),t.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),t.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),t.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),t.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)}_onMediaInfo(e){var t,i;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=(null===(i=null===(t=this._mediaDataSource)||void 0===t?void 0:t.segments)||void 0===i?void 0:i.length)||0,Object.setPrototypeOf(this._mediaInfo,r.Z.prototype));const n=Object.assign({},e);Object.setPrototypeOf(n,r.Z.prototype),this._mediaInfo.segments&&(this._mediaInfo.segments[this._currentSegmentIndex]=n),this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(()=>{const e=this._pendingSeekTime;this._pendingSeekTime=null,this.seek(e)})}_onMetaDataArrived(e){this._emitter.emit(De.Z.METADATA_ARRIVED,e)}_onScriptDataArrived(e){this._emitter.emit(De.Z.SCRIPTDATA_ARRIVED,e)}_onTimedID3Metadata(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.dts&&(e.dts-=i),this._emitter.emit(De.Z.TIMED_ID3_METADATA_ARRIVED,e))}_onSMPTE2038Metadata(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.dts&&(e.dts-=i),void 0!==e.nearest_pts&&(e.nearest_pts-=i),this._emitter.emit(De.Z.SMPTE2038_METADATA_ARRIVED,e))}_onSCTE35Metadata(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.nearest_pts&&(e.nearest_pts-=i),this._emitter.emit(De.Z.SCTE35_METADATA_ARRIVED,e))}_onPESPrivateDataDescriptor(e){this._emitter.emit(De.Z.PES_PRIVATE_DATA_DESCRIPTOR,e)}_onPESPrivateData(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.nearest_pts&&(e.nearest_pts-=i),void 0!==e.dts&&(e.dts-=i),this._emitter.emit(De.Z.PES_PRIVATE_DATA_ARRIVED,e))}_onIOSeeked(){var e;null===(e=this._remuxer)||void 0===e||e.insertDiscontinuity()}_onIOComplete(e){var t,i;const n=e+1;n<((null===(i=null===(t=this._mediaDataSource)||void 0===t?void 0:t.segments)||void 0===i?void 0:i.length)||0)?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(n)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(De.Z.LOADING_COMPLETE),this._disableStatisticsReporter())}_onIORedirect(e){var t;const i=null===(t=this._ioctl)||void 0===t?void 0:t.extraData;this._mediaDataSource.segments&&(this._mediaDataSource.segments[i].redirectedURL=e)}_onIORecoveredEarlyEof(){this._emitter.emit(De.Z.RECOVERED_EARLY_EOF)}_onIOException(e,t){a.Z.e(this.TAG,`IOException: type = ${e}, code = ${t.code}, msg = ${t.msg}`),this._emitter.emit(De.Z.IO_ERROR,e,t),this._disableStatisticsReporter()}_onDemuxException(e,t){a.Z.e(this.TAG,`DemuxException: type = ${e}, info = ${t}`),this._emitter.emit(De.Z.DEMUX_ERROR,e,t)}_onRemuxerInitSegmentArrival(e,t){this._emitter.emit(De.Z.INIT_SEGMENT,e,t)}_onRemuxerMediaSegmentArrival(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(De.Z.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){const e=t.info.syncPoints;let i=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,o.Z.safari&&e.length>0&&e[0].originalDts===i&&(i=e[0].pts),this._emitter.emit(De.Z.RECOMMEND_SEEKPOINT,i)}}_enableStatisticsReporter(){null==this._statisticsReporter&&this._reportStatisticsInfo&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}_disableStatisticsReporter(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}_reportSegmentMediaInfo(e){var t,i,n,a;const o=(null===(t=this._mediaInfo)||void 0===t?void 0:t.segments)?null===(i=this._mediaInfo)||void 0===i?void 0:i.segments[e]:{},r=Object.assign({},o);r.duration=null===(n=this._mediaInfo)||void 0===n?void 0:n.duration,r.segmentCount=null===(a=this._mediaInfo)||void 0===a?void 0:a.segmentCount,delete r.segments,delete r.keyframesIndex,this._emitter.emit(De.Z.MEDIA_INFO,r)}_reportStatisticsInfo(){var e,t,i,n,a,o;const r={};r.url=null===(e=this._ioctl)||void 0===e?void 0:e.currentURL,r.hasRedirect=null===(t=this._ioctl)||void 0===t?void 0:t.hasRedirect,r.hasRedirect&&(r.redirectedURL=null===(i=this._ioctl)||void 0===i?void 0:i.currentRedirectedURL),r.speed=null===(n=this._ioctl)||void 0===n?void 0:n.currentSpeed,r.loaderType=null===(a=this._ioctl)||void 0===a?void 0:a.loaderType,r.currentSegmentIndex=this._currentSegmentIndex,r.totalSegmentCount=null===(o=this._mediaDataSource.segments)||void 0===o?void 0:o.length,this._emitter.emit(De.Z.STATISTICS_INFO,r)}}},473:(e,t,i)=>{i.d(t,{Z:()=>n});const n={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},638:(e,t,i)=>{var n=i(278),a=i(943),o=i(473);let r=null;const s=function(e,t){self.postMessage({msg:"logcat_callback",data:{type:e,logcat:t}})};function l(e,t){const i={msg:o.Z.INIT_SEGMENT,data:{type:e,data:t}};self.postMessage(i,[t.data])}function d(e,t){const i={msg:o.Z.MEDIA_SEGMENT,data:{type:e,data:t}};self.postMessage(i,[t.data])}function c(){const e={msg:o.Z.LOADING_COMPLETE};self.postMessage(e)}function u(){const e={msg:o.Z.RECOVERED_EARLY_EOF};self.postMessage(e)}function h(e){const t={msg:o.Z.MEDIA_INFO,data:e};self.postMessage(t)}function x(e){const t={msg:o.Z.METADATA_ARRIVED,data:e};self.postMessage(t)}function f(e){const t={msg:o.Z.SCRIPTDATA_ARRIVED,data:e};self.postMessage(t)}function p(e){const t={msg:o.Z.TIMED_ID3_METADATA_ARRIVED,data:e};self.postMessage(t)}function m(e){const t={msg:o.Z.SMPTE2038_METADATA_ARRIVED,data:e};self.postMessage(t)}function _(e){const t={msg:o.Z.SCTE35_METADATA_ARRIVED,data:e};self.postMessage(t)}function g(e){const t={msg:o.Z.PES_PRIVATE_DATA_DESCRIPTOR,data:e};self.postMessage(t)}function v(e){const t={msg:o.Z.PES_PRIVATE_DATA_ARRIVED,data:e};self.postMessage(t)}function y(e){const t={msg:o.Z.STATISTICS_INFO,data:e};self.postMessage(t)}function b(e,t){self.postMessage({msg:o.Z.IO_ERROR,data:{type:e,info:t}})}function S(e,t){self.postMessage({msg:o.Z.DEMUX_ERROR,data:{type:e,info:t}})}function C(e){self.postMessage({msg:o.Z.RECOMMEND_SEEKPOINT,data:e})}self.addEventListener("message",(function(e){switch(e.data.cmd){case"init":r=new a.Z(e.data.param[0],e.data.param[1]),r.on(o.Z.IO_ERROR,b),r.on(o.Z.DEMUX_ERROR,S),r.on(o.Z.INIT_SEGMENT,l),r.on(o.Z.MEDIA_SEGMENT,d),r.on(o.Z.LOADING_COMPLETE,c),r.on(o.Z.RECOVERED_EARLY_EOF,u),r.on(o.Z.MEDIA_INFO,h),r.on(o.Z.METADATA_ARRIVED,x),r.on(o.Z.SCRIPTDATA_ARRIVED,f),r.on(o.Z.TIMED_ID3_METADATA_ARRIVED,p),r.on(o.Z.SMPTE2038_METADATA_ARRIVED,m),r.on(o.Z.SCTE35_METADATA_ARRIVED,_),r.on(o.Z.PES_PRIVATE_DATA_DESCRIPTOR,g),r.on(o.Z.PES_PRIVATE_DATA_ARRIVED,v),r.on(o.Z.STATISTICS_INFO,y),r.on(o.Z.RECOMMEND_SEEKPOINT,C);break;case"destroy":r&&(r.destroy(),r=null),self.postMessage({msg:"destroyed"});break;case"start":null==r||r.start();break;case"stop":null==r||r.stop();break;case"seek":null==r||r.seek(e.data.param);break;case"pause":null==r||r.pause();break;case"resume":null==r||r.resume();break;case"logging_config":{const t=e.data.param;n.Z.applyConfig(t),!0===t.enableCallback?n.Z.addLogListener(s):n.Z.removeLogListener(s);break}}}))},898:(e,t,i)=>{i.d(t,{Z:()=>n});const n={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},578:(e,t,i)=>{i.d(t,{default:()=>U});var n=i(575);const a={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0,url:void 0,redirectedURL:void 0,cors:!1};function o(){return Object.assign({},a)}class r{static supportMSEH264Playback(){var e;return null===(e=window.MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}static supportMSEH265Playback(){var e;return null===(e=window.MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')}static supportNetworkStreamIO(){const e=new n.Z({},o()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"===t||"xhr-moz-chunked-loader"===t}static getNetworkLoaderTypeName(){const e=new n.Z({},o()),t=e.loaderType;return e.destroy(),t}static supportNativeMediaPlayback(e){void 0===r.videoElement&&(r.videoElement=window.document.createElement("video"));const t=r.videoElement.canPlayType(e);return"probably"===t||"maybe"===t}static getFeatureList(){const e={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.msePlayback=r.supportMSEH264Playback(),e.networkStreamIO=r.supportNetworkStreamIO(),e.networkLoaderName=r.getNetworkLoaderTypeName()||"",e.mseLivePlayback=e.msePlayback&&e.networkStreamIO,e.mseH265Playback=r.supportMSEH265Playback(),e.nativeMP4H264Playback=r.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=r.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=r.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=r.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e}}const s=r;var l=i(108),d=i(99),c=i(645),u=i(479);const h={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info"},x=function(){const e=ENTRY_MODULE,t={};function i(n){if(t[n])return t[n].exports;const a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.m=e,i.n=e=>{const t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(const n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("[object Object]"===Object.prototype.toString.call(globalThis))return globalThis;try{return this||new Function("return this")()}catch(e){if("[object Object]"===Object.prototype.toString.call(window))return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const n=i(ENTRY_MODULE);return n.default||n};x.toString();const f="[\\.|\\-|\\+|\\w|/|@]+",p="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+f+").*?\\)";function m(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function _(e,t,n){const a={};a[n]=[];const o=t.toString(),r=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||o.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!r)return a;const s=r[1];let l,d=new RegExp("(\\\\n|\\W)"+m(s)+p,"g");for(;l=d.exec(o);)"dll-reference"!==l[3]&&a[n].push(l[3]);for(d=new RegExp("\\("+m(s)+'\\("(dll-reference\\s('+f+'))"\\)\\)'+p,"g");l=d.exec(o);)e[l[2]]||(a[n].push(l[1]),e[l[2]]=i(l[1]).m),a[l[2]]=a[l[2]]||[],a[l[2]].push(l[4]);const c=Object.keys(a);for(let i=0;i<c.length;i++)for(let e=0;e<a[c[i]].length;e++)u=a[c[i]][e],isNaN(1*u)||(a[c[i]][e]=1*a[c[i]][e]);var u;return a}function g(e){return Object.keys(e).reduce((t,i)=>t||e[i].length>0,!1)}function v(e,t,i,n){const a=e[n].map(e=>`"${e}": ${t[n][e].toString()}`).join(","),o=x.toString().split("ENTRY_MODULE");return`${o[0]}{${a}}${o[1]}"${i}"${o[2]}`}function y(e,t){t=t||{};const n={main:i.m},a=t.all?{main:Object.keys(n.main)}:function(e,t){const i={main:[t]},n={main:[]},a={main:{}};for(;g(i);){const t=Object.keys(i);for(let o=0;o<t.length;o++){const r=t[o],s=i[r].pop();if(a[r]=a[r]||{},a[r][s]||!e[r][s])continue;a[r][s]=!0,n[r]=n[r]||[],n[r].push(s);const l=_(e,e[r][s],r),d=Object.keys(l);for(let e=0;e<d.length;e++)i[d[e]]=i[d[e]]||[],i[d[e]]=i[d[e]].concat(l[d[e]])}}return n}(n,e);let o="";Object.keys(a).filter(e=>"main"!==e).forEach(e=>{let t=0;for(;a[e][t];)t++;a[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o+=`var ${e} = (${v(a,n,t,modules)})();\n`}),o+=`(${v(a,n,e,"main")})();`;const r=new window.Blob([o],{type:"text/javascript"});if(t.bare)return r;const s=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(r),l=new window.Worker(s);return l.objectURL=s,l}var b=i(278),S=i(943),C=i(473),w=i(994);const T=class{constructor(e,t){if(this.TAG="Transmuxer",this._workerDestroying=!1,this._controller=null,this._emitter=new d.EventEmitter,t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=this._worker=y(638),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},b.Z.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:b.Z.getConfig()})}catch(i){c.Z.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new S.Z(e,t)}else this._controller=new S.Z(e,t);if(this._controller){const e=this._controller;null==e||e.on(C.Z.IO_ERROR,this._onIOError.bind(this)),null==e||e.on(C.Z.DEMUX_ERROR,this._onDemuxError.bind(this)),null==e||e.on(C.Z.INIT_SEGMENT,this._onInitSegment.bind(this)),null==e||e.on(C.Z.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),null==e||e.on(C.Z.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),null==e||e.on(C.Z.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),null==e||e.on(C.Z.MEDIA_INFO,this._onMediaInfo.bind(this)),null==e||e.on(C.Z.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),null==e||e.on(C.Z.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),null==e||e.on(C.Z.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),null==e||e.on(C.Z.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),null==e||e.on(C.Z.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),null==e||e.on(C.Z.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),null==e||e.on(C.Z.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),null==e||e.on(C.Z.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),null==e||e.on(C.Z.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}destroy(){var e;this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),b.Z.removeListener(this.e.onLoggingConfigChanged),this.e=null):(null===(e=this._controller)||void 0===e||e.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}on(e,t){this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}hasWorker(){return null!=this._worker}open(){var e;this._worker?this._worker.postMessage({cmd:"start"}):null===(e=this._controller)||void 0===e||e.start()}close(){var e;this._worker?this._worker.postMessage({cmd:"stop"}):null===(e=this._controller)||void 0===e||e.stop()}seek(e){var t;this._worker?this._worker.postMessage({cmd:"seek",param:e}):null===(t=this._controller)||void 0===t||t.seek(e)}pause(){var e;this._worker?this._worker.postMessage({cmd:"pause"}):null===(e=this._controller)||void 0===e||e.pause()}resume(){var e;this._worker?this._worker.postMessage({cmd:"resume"}):null===(e=this._controller)||void 0===e||e.resume()}_onInitSegment(e,t){Promise.resolve().then(()=>{this._emitter.emit(C.Z.INIT_SEGMENT,e,t)})}_onMediaSegment(e,t){Promise.resolve().then(()=>{this._emitter.emit(C.Z.MEDIA_SEGMENT,e,t)})}_onLoadingComplete(){Promise.resolve().then(()=>{this._emitter.emit(C.Z.LOADING_COMPLETE)})}_onRecoveredEarlyEof(){Promise.resolve().then(()=>{this._emitter.emit(C.Z.RECOVERED_EARLY_EOF)})}_onMediaInfo(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.MEDIA_INFO,e)})}_onMetaDataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.METADATA_ARRIVED,e)})}_onScriptDataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.SCRIPTDATA_ARRIVED,e)})}_onTimedID3MetadataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.TIMED_ID3_METADATA_ARRIVED,e)})}_onSMPTE2038MetadataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.SMPTE2038_METADATA_ARRIVED,e)})}_onSCTE35MetadataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.SCTE35_METADATA_ARRIVED,e)})}_onPESPrivateDataDescriptor(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.PES_PRIVATE_DATA_DESCRIPTOR,e)})}_onPESPrivateDataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.PES_PRIVATE_DATA_ARRIVED,e)})}_onStatisticsInfo(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.STATISTICS_INFO,e)})}_onIOError(e,t){Promise.resolve().then(()=>{this._emitter.emit(C.Z.IO_ERROR,e,t)})}_onDemuxError(e,t){Promise.resolve().then(()=>{this._emitter.emit(C.Z.DEMUX_ERROR,e,t)})}_onRecommendSeekpoint(e){Promise.resolve().then(()=>{this._emitter.emit(C.Z.RECOMMEND_SEEKPOINT,e)})}_onLoggingConfigChanged(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})}_onWorkerMessage(e){const t=e.data,i=null==t?void 0:t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case C.Z.INIT_SEGMENT:case C.Z.MEDIA_SEGMENT:this._emitter.emit(t.msg,i.type,i.data);break;case C.Z.LOADING_COMPLETE:case C.Z.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case C.Z.MEDIA_INFO:Object.setPrototypeOf(i,w.Z.prototype),this._emitter.emit(t.msg,i);break;case C.Z.METADATA_ARRIVED:case C.Z.SCRIPTDATA_ARRIVED:case C.Z.TIMED_ID3_METADATA_ARRIVED:case C.Z.SMPTE2038_METADATA_ARRIVED:case C.Z.SCTE35_METADATA_ARRIVED:case C.Z.PES_PRIVATE_DATA_DESCRIPTOR:case C.Z.PES_PRIVATE_DATA_ARRIVED:case C.Z.STATISTICS_INFO:this._emitter.emit(t.msg,i);break;case C.Z.IO_ERROR:case C.Z.DEMUX_ERROR:this._emitter.emit(t.msg,i.type,i.info);break;case C.Z.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,i);break;case"logcat_callback":c.Z.emitter.emit("log",i.type,i.logcat)}}},P={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};var E=i(68),k=i(411);const R=class{constructor(e){this.TAG="MSEController",this._config=e,this._emitter=new d.EventEmitter,this._config.isLive&&void 0===this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new E.Vn}destroy(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}on(e,t){this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}attachMediaElement(e){if(this._mediaSource)throw new k.rT("MediaSource has been attached to an HTMLMediaElement!");const t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL}detachMediaElement(){if(this._mediaSource){const t=this._mediaSource;for(const i in this._sourceBuffers){const n=this._pendingSegments[i];n.splice(0,n.length),this._pendingSegments[i]=null,this._pendingRemoveRanges[i]=null,this._lastInitSegments[i]=null;const a=this._sourceBuffers[i];if(a){if("closed"!==t.readyState){try{t.removeSourceBuffer(a)}catch(e){c.Z.e(this.TAG,e.message)}null==a||a.removeEventListener("error",this.e.onSourceBufferError),null==a||a.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[i]=null,this._sourceBuffers[i]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(e){c.Z.e(this.TAG,e.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}appendInitSegment(e,t){var i;if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);const n=e;let a=""+n.container;n.codec&&n.codec.length>0&&(a+=";codecs="+n.codec);let o=!1;if(c.Z.v(this.TAG,"Received Initialization Segment, mimeType: "+a),this._lastInitSegments[n.type]=n,a!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])c.Z.v(this.TAG,`Notice: ${n.type} mimeType changed, origin: ${this._mimeTypes[n.type]||""}, target: ${a}`);else{o=!0;try{const e=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(a);e.addEventListener("error",this.e.onSourceBufferError),e.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return c.Z.e(this.TAG,e.message),void this._emitter.emit(P.ERROR,{code:e.code,msg:e.message})}}this._mimeTypes[n.type]=a}t||this._pendingSegments[n.type].push(n),o||this._sourceBuffers[n.type]&&!(null===(i=this._sourceBuffers[n.type])||void 0===i?void 0:i.updating)&&this._doAppendSegments(),u.Z.safari&&"audio/mpeg"===n.container&&n.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}appendMediaSegment(e){const t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();const i=this._sourceBuffers[t.type];!i||i.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}seek(e){var t,i;for(const n in this._sourceBuffers){if(!this._sourceBuffers[n])continue;const a=this._sourceBuffers[n];if("open"===(null===(t=this._mediaSource)||void 0===t?void 0:t.readyState))try{null==a||a.abort()}catch(e){c.Z.e(this.TAG,e.message)}this._idrList.clear();const o=this._pendingSegments[n];if(o.splice(0,o.length),"closed"!==(null===(i=this._mediaSource)||void 0===i?void 0:i.readyState)){if(a){for(let e=0;e<a.buffered.length;e++){const t=a.buffered.start(e),i=a.buffered.end(e);this._pendingRemoveRanges[n].push({start:t,end:i})}(null==a?void 0:a.updating)||this._doRemoveRanges()}if(u.Z.safari){const e=this._lastInitSegments[n];e&&(this._pendingSegments[n].push(e),(null==a?void 0:a.updating)||this._doAppendSegments())}}}}endOfStream(){var e,t;const i=this._mediaSource,n=this._sourceBuffers;i&&"open"===i.readyState?(null===(e=n.video)||void 0===e?void 0:e.updating)||(null===(t=n.audio)||void 0===t?void 0:t.updating)?this._hasPendingEos=!0:(this._hasPendingEos=!1,i.endOfStream()):i&&"closed"===i.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)}getNearestKeyframe(e){return this._idrList.getLastSyncPointBeforeDts(e)}_needCleanupSourceBuffer(){var e,t;if(!this._config.autoCleanupSourceBuffer)return!1;const i=null===(e=this._mediaElement)||void 0===e?void 0:e.currentTime;for(const n in this._sourceBuffers){const e=this._sourceBuffers[n];if(e){const n=e.buffered;if(n.length>=1&&i-n.start(0)>=((null===(t=this._config)||void 0===t?void 0:t.autoCleanupMaxBackwardDuration)||0))return!0}}return!1}_doCleanupSourceBuffer(){var e,t,i;const n=null===(e=this._mediaElement)||void 0===e?void 0:e.currentTime;for(const a in this._sourceBuffers){const e=this._sourceBuffers[a];if(e){const o=e.buffered;let r=!1;for(let e=0;e<o.length;e++){const s=o.start(e),l=o.end(e);if(s<=n&&n<l+3){if(n-s>=((null===(t=this._config)||void 0===t?void 0:t.autoCleanupMaxBackwardDuration)||0)){r=!0;const e=n-((null===(i=this._config)||void 0===i?void 0:i.autoCleanupMinBackwardDuration)||0);this._pendingRemoveRanges[a].push({start:s,end:e})}}else l<n&&(r=!0,this._pendingRemoveRanges[a].push({start:s,end:l}))}r&&!e.updating&&this._doRemoveRanges()}}}_updateMediaSourceDuration(){var e,t,i,n;const a=this._sourceBuffers;if(0===(null===(e=this._mediaElement)||void 0===e?void 0:e.readyState)||"open"!==(null===(t=this._mediaSource)||void 0===t?void 0:t.readyState))return;if((null===(i=a.video)||void 0===i?void 0:i.updating)||(null===(n=a.audio)||void 0===n?void 0:n.updating))return;const o=this._mediaSource.duration,r=this._pendingMediaDuration;r>0&&(isNaN(o)||r>o)&&(c.Z.v(this.TAG,`Update MediaSource duration from ${o} to ${r}`),this._mediaSource.duration=r),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}_doRemoveRanges(){var e;for(const t in this._pendingRemoveRanges){if(!this._sourceBuffers[t]||(null===(e=this._sourceBuffers[t])||void 0===e?void 0:e.updating))continue;const i=this._sourceBuffers[t],n=this._pendingRemoveRanges[t];for(;n.length&&!(null==i?void 0:i.updating);){const e=n.shift();null==i||i.remove(e.start,e.end)}}}_doAppendSegments(){var e,t,i;const n=this._pendingSegments;for(const a in n)if(this._sourceBuffers[a]&&!(null===(e=this._sourceBuffers[a])||void 0===e?void 0:e.updating)&&n[a].length>0){const e=n[a].shift();if(null==e?void 0:e.timestampOffset){const i=(null===(t=this._sourceBuffers[a])||void 0===t?void 0:t.timestampOffset)||0,n=e.timestampOffset/1e3;Math.abs(i-n)>.1&&(c.Z.v(this.TAG,`Update MPEG audio timestampOffset from ${i} to ${n}`),this._sourceBuffers[a]&&(this._sourceBuffers[a].timestampOffset=n)),delete e.timestampOffset}if(!e.data||0===e.data.byteLength)continue;try{null===(i=this._sourceBuffers[a])||void 0===i||i.appendBuffer(e.data),this._isBufferFull=!1,"video"===a&&e.hasOwnProperty("info")&&this._idrList.appendArray(e.info.syncPoints)}catch(t){this._pendingSegments[a].unshift(e),22===t.code?(this._isBufferFull||this._emitter.emit(P.BUFFER_FULL),this._isBufferFull=!0):(c.Z.e(this.TAG,t.message),this._emitter.emit(P.ERROR,{code:t.code,msg:t.message}))}}}_onSourceOpen(){var e;if(c.Z.v(this.TAG,"MediaSource onSourceOpen"),null===(e=this._mediaSource)||void 0===e||e.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0){const e=this._pendingSourceBufferInit;for(;e.length;){const t=e.shift();this.appendInitSegment(t,!0)}}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(P.SOURCE_OPEN)}_onSourceEnded(){c.Z.v(this.TAG,"MediaSource onSourceEnded")}_onSourceClose(){c.Z.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}_hasPendingSegments(){const e=this._pendingSegments;return e.video.length>0||e.audio.length>0}_hasPendingRemoveRanges(){const e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0}_onSourceBufferUpdateEnd(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(P.UPDATE_END)}_onSourceBufferError(e){c.Z.e(this.TAG,"SourceBuffer Error: "+e)}};var I=i(898);const D={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},M={NETWORK_EXCEPTION:l.nm.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.nm.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.nm.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.nm.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:I.Z.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:I.Z.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:I.Z.CODEC_UNSUPPORTED};var A=function(e,t,i,n){return new(i||(i=Promise))((function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}l((n=n.apply(e,t||[])).next())}))};const B=class{constructor(e,t){var i,n,a;this.TAG="MSEPlayer",this._type="MSEPlayer",this._emitter=new d.EventEmitter,this._config=o(),"object"==typeof t&&Object.assign(this._config,t);const r=e.type.toLowerCase();if("mse"!==r&&"mpegts"!==r&&"m2ts"!==r&&"flv"!==r)throw new k.OC("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;const s=u.Z.chrome&&(u.Z.version&&(null===(i=u.Z.version)||void 0===i?void 0:i.major)<50||u.Z.version&&50===(null===(n=null===u.Z||void 0===u.Z?void 0:u.Z.version)||void 0===n?void 0:n.major)&&((null===(a=null===u.Z||void 0===u.Z?void 0:u.Z.version)||void 0===a?void 0:a.build)||-1)<2661);this._alwaysSeekKeyframe=!!(s||u.Z.msedge||u.Z.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}destroy(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}on(e,t){e===h.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(()=>{this._emitter.emit(h.MEDIA_INFO,this.mediaInfo)}):e===h.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(()=>{this._emitter.emit(h.STATISTICS_INFO,this.statisticsInfo)}),this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}attachMediaElement(e){var t,i,n,a,o;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new R(this._config),null===(t=this._msectl)||void 0===t||t.on(P.UPDATE_END,this._onmseUpdateEnd.bind(this)),null===(i=this._msectl)||void 0===i||i.on(P.BUFFER_FULL,this._onmseBufferFull.bind(this)),null===(n=this._msectl)||void 0===n||n.on(P.SOURCE_OPEN,()=>{this._mseSourceOpened=!0,this._hasPendingLoad&&(this._hasPendingLoad=!1,this.load())}),null===(a=this._msectl)||void 0===a||a.on(P.ERROR,e=>{this._emitter.emit(h.ERROR,D.MEDIA_ERROR,M.MEDIA_MSE_ERROR,e)}),null===(o=this._msectl)||void 0===o||o.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}detachMediaElement(){var e;this._mediaElement&&(null===(e=this._msectl)||void 0===e||e.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}load(){if(!this._mediaElement)throw new k.rT("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new k.rT("MSEPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(!this._config.deferLoadAfterSourceOpen||this._mseSourceOpened?(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new T(this._mediaDataSource,this._config),this._transmuxer.on(C.Z.INIT_SEGMENT,(e,t)=>{var i;null===(i=this._msectl)||void 0===i||i.appendInitSegment(t)}),this._transmuxer.on(C.Z.MEDIA_SEGMENT,(e,t)=>{var i,n,a;if(null===(i=this._msectl)||void 0===i||i.appendMediaSegment(t),this._config.lazyLoad&&!this._config.isLive){const e=null===(n=this._mediaElement)||void 0===n?void 0:n.currentTime;t.info.endDts>=1e3*(e+((null===(a=this._config)||void 0===a?void 0:a.lazyLoadMaxDuration)||0))&&null==this._progressChecker&&(c.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}),this._transmuxer.on(C.Z.LOADING_COMPLETE,()=>{var e;null===(e=this._msectl)||void 0===e||e.endOfStream(),this._emitter.emit(h.LOADING_COMPLETE)}),this._transmuxer.on(C.Z.RECOVERED_EARLY_EOF,()=>{this._emitter.emit(h.RECOVERED_EARLY_EOF)}),this._transmuxer.on(C.Z.IO_ERROR,(e,t)=>{this._emitter.emit(h.ERROR,D.NETWORK_ERROR,e,t)}),this._transmuxer.on(C.Z.DEMUX_ERROR,(e,t)=>{this._emitter.emit(h.ERROR,D.MEDIA_ERROR,e,{code:-1,msg:t})}),this._transmuxer.on(C.Z.MEDIA_INFO,e=>{this._mediaInfo=e,this._emitter.emit(h.MEDIA_INFO,Object.assign({},e))}),this._transmuxer.on(C.Z.METADATA_ARRIVED,e=>{this._emitter.emit(h.METADATA_ARRIVED,e)}),this._transmuxer.on(C.Z.SCRIPTDATA_ARRIVED,e=>{this._emitter.emit(h.SCRIPTDATA_ARRIVED,e)}),this._transmuxer.on(C.Z.TIMED_ID3_METADATA_ARRIVED,e=>{this._emitter.emit(h.TIMED_ID3_METADATA_ARRIVED,e)}),this._transmuxer.on(C.Z.SMPTE2038_METADATA_ARRIVED,e=>{this._emitter.emit(h.SMPTE2038_METADATA_ARRIVED,e)}),this._transmuxer.on(C.Z.SCTE35_METADATA_ARRIVED,e=>{this._emitter.emit(h.SCTE35_METADATA_ARRIVED,e)}),this._transmuxer.on(C.Z.PES_PRIVATE_DATA_DESCRIPTOR,e=>{this._emitter.emit(h.PES_PRIVATE_DATA_DESCRIPTOR,e)}),this._transmuxer.on(C.Z.PES_PRIVATE_DATA_ARRIVED,e=>{this._emitter.emit(h.PES_PRIVATE_DATA_ARRIVED,e)}),this._transmuxer.on(C.Z.STATISTICS_INFO,e=>{this._statisticsInfo=this._fillStatisticsInfo(e),this._emitter.emit(h.STATISTICS_INFO,Object.assign({},this._statisticsInfo))}),this._transmuxer.on(C.Z.RECOMMEND_SEEKPOINT,e=>{this._mediaElement&&!this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e/1e3)}),this._transmuxer.open()):this._hasPendingLoad=!0)}unload(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}play(){var e;return A(this,void 0,void 0,(function*(){return yield null===(e=this._mediaElement)||void 0===e?void 0:e.play()}))}pause(){var e;null===(e=this._mediaElement)||void 0===e||e.pause()}get type(){return this._type}get buffered(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.buffered}get duration(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.duration}get volume(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.volume}set volume(e){this._mediaElement&&(this._mediaElement.volume=e)}get muted(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.muted}set muted(e){this._mediaElement&&(this._mediaElement.muted=e)}get currentTime(){return this._mediaElement?this._mediaElement.currentTime:0}set currentTime(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e}get mediaInfo(){return Object.assign({},this._mediaInfo)}get statisticsInfo(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}_fillStatisticsInfo(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;let t=!0,i=0,n=0;if(this._mediaElement.getVideoPlaybackQuality){const e=this._mediaElement.getVideoPlaybackQuality();i=e.totalVideoFrames,n=e.droppedVideoFrames}else void 0!==this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,n=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=i,e.droppedFrames=n),e}_onmseUpdateEnd(){var e,t,i,n;const a=null===(e=this._mediaElement)||void 0===e?void 0:e.buffered,o=(null===(t=this._mediaElement)||void 0===t?void 0:t.currentTime)||0;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&(null==a?void 0:a.length)>0&&!(null===(i=this._mediaElement)||void 0===i?void 0:i.paused)){const e=a.end(a.length-1);if(e>((null===(n=this._config)||void 0===n?void 0:n.liveBufferLatencyMaxLatency)||0)&&e-o>(this._config.liveBufferLatencyMaxLatency||0)){const t=e-(this._config.liveBufferLatencyMinRemain||0);this.currentTime=t}}if(!this._config.lazyLoad||this._config.isLive)return;let r=0;for(let s=0;s<a.length;s++){const e=a.start(s),t=a.end(s);if(e<=o&&o<t){r=t;break}}r>=o+(this._config.lazyLoadMaxDuration||0)&&null==this._progressChecker&&(c.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}_onmseBufferFull(){c.Z.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()}_suspendTransmuxer(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}_checkProgressAndResume(){var e,t,i;const n=(null===(e=this._mediaElement)||void 0===e?void 0:e.currentTime)||0,a=null===(t=this._mediaElement)||void 0===t?void 0:t.buffered;let o=!1;for(let r=0;r<a.length;r++){const e=a.start(r),t=a.end(r);if(n>=e&&n<t){n>=t-(this._config.lazyLoadRecoverDuration||0)&&(o=!0);break}}o&&(window.clearInterval(this._progressChecker),this._progressChecker=null,o&&(c.Z.v(this.TAG,"Continue loading from paused position"),null===(i=this._transmuxer)||void 0===i||i.resume()))}_isTimepointBuffered(e){var t;const i=null===(t=this._mediaElement)||void 0===t?void 0:t.buffered;for(let n=0;n<i.length;n++){const t=i.start(n),a=i.end(n);if(e>=t&&e<a)return!0}return!1}_internalSeek(e){var t,i,n,a,o;const r=this._isTimepointBuffered(e);let s=!1,l=0;if(e<1&&(null===(t=this._mediaElement)||void 0===t?void 0:t.buffered).length>0){const t=(null===(i=this._mediaElement)||void 0===i?void 0:i.buffered).start(0);(t<1&&e<t||u.Z.safari)&&(s=!0,l=u.Z.safari?.1:t)}if(s)this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=l);else if(r){if(this._alwaysSeekKeyframe){const t=null===(n=this._msectl)||void 0===n?void 0:n.getNearestKeyframe(Math.floor(1e3*e));this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=null!=t?t.dts/1e3:e)}else this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e);null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),null===(a=this._msectl)||void 0===a||a.seek(e),null===(o=this._transmuxer)||void 0===o||o.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e))}_checkAndApplyUnbufferedSeekpoint(){var e,t,i,n;if(this._seekpointRecord)if(((null===(e=this._seekpointRecord)||void 0===e?void 0:e.recordTime)||0)<=this._now()-100){const e=null===(t=this._mediaElement)||void 0===t?void 0:t.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),null===(i=this._msectl)||void 0===i||i.seek(e),null===(n=this._transmuxer)||void 0===n||n.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e)))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}_checkAndResumeStuckPlayback(e){const t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){const e=t.buffered;e.length>0&&t.currentTime<e.start(0)&&(c.Z.w(this.TAG,`Playback seems stuck at ${t.currentTime}, seek to ${e.start(0)}`),this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)))}else this._mediaElement&&this._mediaElement.removeEventListener("progress",this.e.onvProgress)}_onvLoadedMetadata(e){null!=this._pendingSeekTime&&(this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime),this._pendingSeekTime=null)}_onvSeeking(e){var t,i,n;const a=null===(t=this._mediaElement)||void 0===t?void 0:t.currentTime,o=null===(i=this._mediaElement)||void 0===i?void 0:i.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(a<1&&o.length>0){const e=o.start(0);if(e<1&&a<e||u.Z.safari)return this._requestSetTime=!0,void(this._mediaElement&&(this._mediaElement.currentTime=u.Z.safari?.1:e))}if(this._isTimepointBuffered(a)){if(this._alwaysSeekKeyframe){const e=null===(n=this._msectl)||void 0===n?void 0:n.getNearestKeyframe(Math.floor(1e3*a));null!=e&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e.dts/1e3))}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:a,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}}_onvCanPlay(e){var t;this._receivedCanPlay=!0,null===(t=this._mediaElement)||void 0===t||t.removeEventListener("canplay",this.e.onvCanPlay)}_onvStalled(e){this._checkAndResumeStuckPlayback(!0)}_onvProgress(e){this._checkAndResumeStuckPlayback()}};var L=function(e,t,i,n){return new(i||(i=Promise))((function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}l((n=n.apply(e,t||[])).next())}))};const F=class{constructor(e,t){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new d.EventEmitter,this._config=o(),"object"==typeof t&&Object.assign(this._config,t);const i=e.type.toLowerCase();if("mse"===i||"mpegts"===i||"m2ts"===i||"flv"===i)throw new k.OC("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new k.OC(`NativePlayer(${e.type}) doesn't support multipart playback!`);this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}destroy(){var e;this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,null===(e=this._emitter)||void 0===e||e.removeAllListeners(),this._emitter=null}on(e,t){e===h.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(()=>{this._emitter.emit(h.MEDIA_INFO,this.mediaInfo)}):e===h.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(()=>{this._emitter.emit(h.STATISTICS_INFO,this.statisticsInfo)}),this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}attachMediaElement(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}detachMediaElement(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}load(){var e;if(!this._mediaElement)throw new k.rT("HTMLMediaElement must be attached before load()!");this._mediaElement.src=(null===(e=this._mediaDataSource)||void 0===e?void 0:e.url)||"",this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}unload(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}play(){var e;return L(this,void 0,void 0,(function*(){return yield null===(e=this._mediaElement)||void 0===e?void 0:e.play()}))}pause(){var e;null===(e=this._mediaElement)||void 0===e||e.pause()}get type(){return this._type}get buffered(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.buffered}get duration(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.duration}get volume(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.volume}set volume(e){this._mediaElement&&(this._mediaElement.volume=e)}get muted(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.muted}set muted(e){this._mediaElement&&(this._mediaElement.muted=e)}get currentTime(){return this._mediaElement?this._mediaElement.currentTime:0}set currentTime(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e}get mediaInfo(){const e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e}get statisticsInfo(){const e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;let t=!0,i=0,n=0;if(this._mediaElement.getVideoPlaybackQuality){const e=this._mediaElement.getVideoPlaybackQuality();i=e.totalVideoFrames,n=e.droppedVideoFrames}else void 0!==this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,n=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=i,e.droppedFrames=n),e}_onvLoadedMetadata(e){null!=this._pendingSeekTime&&(this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime),this._pendingSeekTime=null),this._emitter.emit(h.MEDIA_INFO,this.mediaInfo)}_reportStatisticsInfo(){this._emitter.emit(h.STATISTICS_INFO,this.statisticsInfo)}},j={h264:1,h265:2,h266:4,vp8:8,vp9:16,av1:32},z=["h264","h265"],O=e=>{const t=e.split("?"),i=new URLSearchParams(t[1]);return i.delete("vc"),i.set("vc",z.reduce((e,t)=>e+(j[t]||0),0).toString()),t[0]+"?"+i.toString()},N={createPlayer:function(e,t){(null==e?void 0:e.url)&&(e.url=O(e.url));const i=e;if(null==i||"object"!=typeof i)throw new k.OC("MediaDataSource must be an javascript object!");if(!Object.prototype.hasOwnProperty.call(i,"type"))throw new k.OC("MediaDataSource must has type field to indicate video file type!");switch(i.type){case"mse":case"mpegts":case"m2ts":case"flv":return new B(i,t);default:return new F(i,t)}},isSupported:function(){return s.supportMSEH264Playback()},getFeatureList:function(){return s.getFeatureList()},BaseLoader:l.fp,LoaderStatus:l.GM,LoaderErrors:l.nm,version:"",Events:h,ErrorTypes:D,ErrorDetails:M,MSEPlayer:B,NativePlayer:F,LoggingControl:b.Z};Object.defineProperty(N,"version",{enumerable:!0,get:function(){return"2.0.0"}});const U=N},607:(e,t,i)=>{e.exports=i(578).default},575:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(645);const a=class{constructor(){var e;this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,(null===(e=self.performance)||void 0===e?void 0:e.now)?this._now=self.performance.now.bind(self.performance):this._now=Date.now}reset(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}addBytes(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())}get currentKBps(){this.addBytes(0);let e=(this._now()-this._lastCheckpoint)/1e3;return 0===e&&(e=1),this._intervalBytes/e/1024}get lastSecondKBps(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}get averageKBps(){const e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024}};var o=i(108),r=i(479),s=i(411);class l extends o.fp{static isSupported(){var e;try{const t=r.Z.msedge&&((null===(e=null===r.Z||void 0===r.Z?void 0:r.Z.version)||void 0===e?void 0:e.minor)||0)>=15048&&!r.Z.webkit,i=!r.Z.msedge||t;return self.fetch&&self.ReadableStream&&i}catch(e){return!1}}constructor(e,t){super("fetch-stream-loader"),this.TAG="FetchStreamLoader",this._seekHandler=e,this._config=t,this._needStash=!0,this._requestAbort=!1,this._abortController=null,this._contentLength=null,this._receivedLength=0}destroy(){this.isWorking()&&this.abort(),super.destroy()}open(e,t){this._dataSource=e,this._range=t;let i=e.url;this._config.reuseRedirectedURL&&void 0!==e.redirectedURL&&(i=e.redirectedURL);const n=this._seekHandler.getConfig(i,t),a=new self.Headers;if("object"==typeof n.headers){const e=n.headers;for(const t in e)e.hasOwnProperty(t)&&a.append(t,e[t])}const r={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==typeof this._config.headers)for(const o in this._config.headers)a.append(o,this._config.headers[o]);e.cors||(r.mode="same-origin"),e.withCredentials&&(r.credentials="include"),(null==e?void 0:e.referrerPolicy)&&(r.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,this._abortController&&(r.signal=this._abortController.signal)),this._status=o.GM.kConnecting,self.fetch(n.url,r).then(e=>{var t,i;if(this._requestAbort)return this._status=o.GM.kIdle,void(null===(t=e.body)||void 0===t||t.cancel());if(e.ok&&e.status>=200&&e.status<=299){if(e.url!==n.url&&this._onURLRedirect){const t=this._seekHandler.removeURLParameters(e.url);this._onURLRedirect(t)}const t=e.headers.get("Content-Length");return null!=t&&(this._contentLength=parseInt(t),0!==this._contentLength&&this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)),this._pump.call(this,null===(i=e.body)||void 0===i?void 0:i.getReader())}if(this._status=o.GM.kError,!this._onError)throw new s.OZ("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(o.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}).catch(e=>{var t;if(!(null===(t=this._abortController)||void 0===t?void 0:t.signal.aborted)){if(this._status=o.GM.kError,!this._onError)throw e;this._onError(o.nm.EXCEPTION,{code:-1,msg:e.message})}})}abort(){var e;if(this._requestAbort=!0,(this._status!==o.GM.kBuffering||!r.Z.chrome)&&this._abortController)try{null===(e=this._abortController)||void 0===e||e.abort()}catch(e){}}_pump(e){return e.read().then(t=>{var i,n,a,r;if(t.done)if(null!==this._contentLength&&this._receivedLength<this._contentLength){this._status=o.GM.kError;const e=o.nm.EARLY_EOF,t={code:-1,msg:"Fetch stream meet Early-EOF"};if(!this._onError)throw new s.OZ(t.msg);this._onError(e,t)}else this._status=o.GM.kComplete,this._onComplete&&this._onComplete((null===(i=this._range)||void 0===i?void 0:i.from)||0,((null===(n=this._range)||void 0===n?void 0:n.from)||0)+this._receivedLength-1);else{if(null===(a=this._abortController)||void 0===a?void 0:a.signal.aborted)return void(this._status=o.GM.kComplete);if(this._requestAbort)return this._status=o.GM.kComplete,e.cancel();this._status=o.GM.kBuffering;const i=t.value.buffer,n=((null===(r=this._range)||void 0===r?void 0:r.from)||0)+this._receivedLength;this._receivedLength+=i.byteLength,this._onDataArrival&&this._onDataArrival(i,n,this._receivedLength),this._pump(e)}}).catch(e=>{var t,i;if(null===(i=null===(t=this._abortController)||void 0===t?void 0:t.signal)||void 0===i?void 0:i.aborted)return void(this._status=o.GM.kComplete);if(11===e.code&&r.Z.msedge)return;this._status=o.GM.kError;let n=0,a=null;if(19!==e.code&&"network error"!==e.message||!(null===this._contentLength||null!==this._contentLength&&this._receivedLength<this._contentLength)?(n=o.nm.EXCEPTION,a={code:e.code,msg:e.message}):(n=o.nm.EARLY_EOF,a={code:e.code,msg:"Fetch stream meet Early-EOF"}),!this._onError)throw new s.OZ(a.msg);this._onError(n,a)})}}const d=l;class c extends o.fp{static isSupported(){try{const e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(e){return n.Z.w("MozChunkedLoader",e.message),!1}}constructor(e,t){super("xhr-moz-chunked-loader"),this.TAG="MozChunkedLoader",this._seekHandler=e,this._config=t,this._needStash=!0,this._xhr=null,this._requestAbort=!1,this._contentLength=null,this._receivedLength=0}destroy(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),super.destroy()}open(e,t){this._dataSource=e,this._range=t;let i=e.url;this._config.reuseRedirectedURL&&void 0!==e.redirectedURL&&(i=e.redirectedURL);const n=this._seekHandler.getConfig(i,t);this._requestURL=n.url;const a=this._xhr=new XMLHttpRequest;if(a.open("GET",n.url,!0),a.responseType="moz-chunked-arraybuffer",a.onreadystatechange=this._onReadyStateChange.bind(this),a.onprogress=this._onProgress.bind(this),a.onloadend=this._onLoadEnd.bind(this),a.onerror=this._onXhrError.bind(this),e.withCredentials&&(a.withCredentials=!0),"object"==typeof n.headers){const e=n.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}if("object"==typeof this._config.headers){const e=this._config.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}this._status=o.GM.kConnecting,a.send()}abort(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=o.GM.kComplete}_onReadyStateChange(e){const t=e.target;if(2===t.readyState){if(void 0!==t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){const e=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(e)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=o.GM.kError,!this._onError)throw new s.OZ("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(o.nm.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=o.GM.kBuffering}}_onProgress(e){var t;if(this._status===o.GM.kError)return;null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));const i=e.target.response,n=((null===(t=this._range)||void 0===t?void 0:t.from)||0)+this._receivedLength;this._receivedLength+=i.byteLength,this._onDataArrival&&this._onDataArrival(i,n,this._receivedLength)}_onLoadEnd(e){this._requestAbort?this._requestAbort=!1:this._status!==o.GM.kError&&(this._status=o.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}_onXhrError(e){this._status=o.GM.kError;let t=0,i=null;if(this._contentLength&&e.loaded<this._contentLength?(t=o.nm.EARLY_EOF,i={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=o.nm.EXCEPTION,i={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new s.OZ(i.msg);this._onError(t,i)}}const u=c;class h extends o.fp{static isSupported(){try{const e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(e){return n.Z.w("RangeLoader",e.message),!1}}constructor(e,t){super("xhr-range-loader"),this.TAG="RangeLoader",this._seekHandler=e,this._config=t,this._needStash=!1,this._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],this._currentChunkSizeKB=384,this._currentSpeedNormalized=0,this._zeroSpeedChunkCount=0,this._xhr=null,this._speedSampler=new a,this._requestAbort=!1,this._waitForTotalLength=!1,this._totalLengthReceived=!1,this._currentRequestURL=null,this._currentRedirectedURL=null,this._currentRequestRange=null,this._totalLength=null,this._contentLength=null,this._receivedLength=0,this._lastTimeLoaded=0}destroy(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),super.destroy()}get currentSpeed(){return this._speedSampler.lastSecondKBps}open(e,t){this._dataSource=e,this._range=t,this._status=o.GM.kConnecting;let i=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(i=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||i?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}_openSubRange(){var e,t;const i=1024*this._currentChunkSizeKB,n=((null===(e=this._range)||void 0===e?void 0:e.from)||0)+this._receivedLength;let a=n+i;null!=this._contentLength&&a-this._range.from>=this._contentLength&&(a=((null===(t=this._range)||void 0===t?void 0:t.from)||0)+this._contentLength-1),this._currentRequestRange={from:n,to:a},this._internalOpen(this._dataSource,this._currentRequestRange)}_internalOpen(e,t){this._lastTimeLoaded=0;let i=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?i=this._currentRedirectedURL:null!=e.redirectedURL&&(i=e.redirectedURL));const n=this._seekHandler.getConfig(i,t);this._currentRequestURL=n.url;const a=this._xhr=new XMLHttpRequest;if(a.open("GET",n.url,!0),a.responseType="arraybuffer",a.onreadystatechange=this._onReadyStateChange.bind(this),a.onprogress=this._onProgress.bind(this),a.onload=this._onLoad.bind(this),a.onerror=this._onXhrError.bind(this),e.withCredentials&&(a.withCredentials=!0),"object"==typeof n.headers){const e=n.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}if("object"==typeof this._config.headers){const e=this._config.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}a.send()}abort(){this._requestAbort=!0,this._internalAbort(),this._status=o.GM.kComplete}_internalAbort(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}_onReadyStateChange(e){const t=e.target;if(2===t.readyState){if(null!=t.responseURL){const e=this._seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&e!==this._currentRedirectedURL&&(this._currentRedirectedURL=e,this._onURLRedirect&&this._onURLRedirect(e))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=o.GM.kBuffering}else{if(this._status=o.GM.kError,!this._onError)throw new s.OZ("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(o.nm.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}}_onProgress(e){if(this._status===o.GM.kError)return;if(null===this._contentLength){let t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;const i=e.total;this._internalAbort(),null!=i&&0!==i&&(this._totalLength=i)}if(-1===this._range.to?this._contentLength=(this._totalLength||0)-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}const t=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(t)}_normalizeSpeed(e){const t=this._chunkSizeKBList,i=t.length-1;let n=0,a=0,o=i;if(e<t[0])return t[0];for(;a<=o;){if(n=a+Math.floor((o-a)/2),n===i||e>=t[n]&&e<t[n+1])return t[n];t[n]<e?a=n+1:o=n-1}}_onLoad(e){if(this._status===o.GM.kError)return;if(this._waitForTotalLength)return void(this._waitForTotalLength=!1);this._lastTimeLoaded=0;let t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){const e=this._normalizeSpeed(t);this._currentSpeedNormalized!==e&&(this._currentSpeedNormalized=e,this._currentChunkSizeKB=e)}const i=e.target.response,n=this._range.from+this._receivedLength;this._receivedLength+=i.byteLength;let a=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():a=!0,this._onDataArrival&&this._onDataArrival(i,n,this._receivedLength),a&&(this._status=o.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}_onXhrError(e){this._status=o.GM.kError;let t=0,i=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(t=o.nm.EARLY_EOF,i={code:-1,msg:"RangeLoader meet Early-Eof"}):(t=o.nm.EXCEPTION,i={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new s.OZ(i.msg);this._onError(t,i)}}const x=h;class f extends o.fp{static isSupported(){try{return void 0!==self.WebSocket}catch(e){return!1}}constructor(e,t){super("websocket-loader"),this.TAG="WebSocketLoader",this._needStash=!0,this._ws=null,this._requestAbort=!1,this._receivedLength=0}destroy(){this._ws&&this.abort(),super.destroy()}open(e){try{const t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=o.GM.kConnecting}catch(e){this._status=o.GM.kError;const t={code:e.code,msg:e.message};if(!this._onError)throw new s.OZ(t.msg);this._onError(o.nm.EXCEPTION,t)}}abort(){const e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=o.GM.kComplete}_onWebSocketOpen(e){this._status=o.GM.kBuffering}_onWebSocketClose(e){this._requestAbort?this._requestAbort=!1:(this._status=o.GM.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1))}_onWebSocketMessage(e){if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){const t=new FileReader;t.onload=()=>{this._dispatchArrayBuffer(null==t?void 0:t.result)},t.readAsArrayBuffer(e.data)}else{this._status=o.GM.kError;const t={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new s.OZ(t.msg);this._onError(o.nm.EXCEPTION,t)}}_dispatchArrayBuffer(e){const t=e,i=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,i,this._receivedLength)}_onWebSocketError(e){this._status=o.GM.kError;const t={code:e.code,msg:e.message};if(!this._onError)throw new s.OZ(t.msg);this._onError(o.nm.EXCEPTION,t)}}const p=f,m=class{constructor(e){this._zeroStart=e||!1}getConfig(e,t){const i={};if(0!==t.from||-1!==t.to){let e;e=-1!==t.to?`bytes=${t.from.toString()}-${t.to.toString()}`:`bytes=${t.from.toString()}-`,i.Range=e}else this._zeroStart&&(i.Range="bytes=0-");return{url:e,headers:i}}removeURLParameters(e){return e}},_=class{constructor(e,t){this._startName=e,this._endName=t}getConfig(e,t){let i=e;if(0!==t.from||-1!==t.to){let e=!0;i.includes("?")||(i+="?",e=!1),e&&(i+="&"),i+=`${this._startName}=${t.from.toString()}`,-1!==t.to&&(i+=`&${this._endName}=${t.to.toString()}`)}return{url:i,headers:{}}}removeURLParameters(e){const t=e.split("?")[0];let i;const n=e.indexOf("?");-1!==n&&(i=e.substring(n+1));let a="";if(void 0!==i&&i.length>0){const e=i.split("&");for(let t=0;t<e.length;t++){const i=e[t].split("="),n=t>0;i[0]!==this._startName&&i[0]!==this._endName&&(n&&(a+="&"),a+=e[t])}}return 0===a.length?t:t+"?"+a}},g=class{constructor(e,t,i){this.TAG="IOController",this._config=t,this._extraData=i,this._stashInitialSize=65536,void 0!==t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,t.enableStashBuffer||(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url||""),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new a,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}destroy(){var e,t,i;(null===(e=this._loader)||void 0===e?void 0:e.isWorking())&&(null===(t=this._loader)||void 0===t||t.abort()),null===(i=this._loader)||void 0===i||i.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}isWorking(){var e;return(null===(e=this._loader)||void 0===e?void 0:e.isWorking())&&!this._paused}isPaused(){return this._paused}get status(){var e;return null===(e=this._loader)||void 0===e?void 0:e.status}get extraData(){return this._extraData}set extraData(e){this._extraData=e}get onDataArrival(){return this._onDataArrival}set onDataArrival(e){this._onDataArrival=e}get onSeeked(){return this._onSeeked}set onSeeked(e){this._onSeeked=e}get onError(){return this._onError}set onError(e){this._onError=e}get onComplete(){return this._onComplete}set onComplete(e){this._onComplete=e}get onRedirect(){return this._onRedirect}set onRedirect(e){this._onRedirect=e}get onRecoveredEarlyEof(){return this._onRecoveredEarlyEof}set onRecoveredEarlyEof(e){this._onRecoveredEarlyEof=e}get currentURL(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.url}get hasRedirect(){var e;return null!=this._redirectedURL||void 0!==(null===(e=this._dataSource)||void 0===e?void 0:e.redirectedURL)}get currentRedirectedURL(){var e;return this._redirectedURL||(null===(e=this._dataSource)||void 0===e?void 0:e.redirectedURL)}get currentSpeed(){var e,t;return this._loaderClass===x?null===(e=this._loader)||void 0===e?void 0:e.currentSpeed:null===(t=this._speedSampler)||void 0===t?void 0:t.lastSecondKBps}get loaderType(){var e;return null===(e=this._loader)||void 0===e?void 0:e.type}_selectSeekHandler(){const e=this._config;if("range"===e.seekType)this._seekHandler=new m(!!this._config.rangeLoadZeroStart);else if("param"===e.seekType){const t=e.seekParamStart||"bstart",i=e.seekParamEnd||"bend";this._seekHandler=new _(t,i)}else{if("custom"!==e.seekType)throw new s.OC("Invalid seekType in config: "+((null==e?void 0:e.seekType)||""));if("function"!=typeof e.customSeekHandler)throw new s.OC("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}}_selectLoader(){var e;if(null!=this._config.customLoader)this._loaderClass=(null===(e=this._config)||void 0===e?void 0:e.customLoader)||null;else if(this._isWebSocketURL)this._loaderClass=p;else if(d.isSupported())this._loaderClass=d;else if(u.isSupported())this._loaderClass=u;else{if(!x.isSupported())throw new s.OZ("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=x}}_createLoader(){var e;this._loaderClass&&(this._loader=new this._loaderClass(this._seekHandler,this._config),(null===(e=this._loader)||void 0===e?void 0:e.needStashBuffer)||(this._enableStash=!1),this._loader&&(this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)))}open(e){var t,i;this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),null===(t=this._speedSampler)||void 0===t||t.reset(),e||(this._fullRequestFlag=!0),null===(i=this._loader)||void 0===i||i.open(this._dataSource,Object.assign({},this._currentRange))}abort(){var e;null===(e=this._loader)||void 0===e||e.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}pause(){var e,t;this.isWorking()&&(null===(e=this._loader)||void 0===e||e.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange&&(this._currentRange.to=this._stashByteStart-1)):this._resumeFrom=((null===(t=this._currentRange)||void 0===t?void 0:t.to)||0)+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}resume(){if(this._paused){this._paused=!1;const e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}}seek(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)}_internalSeek(e,t){var i,n,a,o;(null===(i=this._loader)||void 0===i?void 0:i.isWorking())&&(null===(n=this._loader)||void 0===n||n.abort()),this._flushStashBuffer(t),null===(a=this._loader)||void 0===a||a.destroy(),this._loader=null;const r={from:e,to:-1};this._currentRange={from:r.from,to:-1},null===(o=this._speedSampler)||void 0===o||o.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,r),this._onSeeked&&this._onSeeked()}updateUrl(e){if(!e||"string"!=typeof e||0===e.length)throw new s.OC("Url must be a non-empty string!");this._dataSource.url=e}_expandBuffer(e){let t=this._stashSize;for(;t+1048576<e;)t*=2;if(t+=1048576,t===this._bufferSize)return;const i=new ArrayBuffer(t);if(this._stashUsed>0){const e=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(i,0,t).set(e,0)}this._stashBuffer=i,this._bufferSize=t}_normalizeSpeed(e){const t=this._speedNormalizeList,i=t.length-1;let n=0,a=0,o=i;if(e<t[0])return t[0];for(;a<=o;){if(n=a+Math.floor((o-a)/2),n===i||e>=t[n]&&e<t[n+1])return t[n];t[n]<e?a=n+1:o=n-1}}_adjustStashSize(e){let t=0;t=this._config.isLive?e/8:e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e,t>8192&&(t=8192);const i=1024*t+1048576;this._bufferSize<i&&this._expandBuffer(i),this._stashSize=1024*t}_dispatchChunks(e,t){return this._currentRange&&(this._currentRange.to=t+e.byteLength-1),this._onDataArrival?this._onDataArrival(e,t):0}_onURLRedirect(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)}_onContentLengthKnown(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)}_onLoaderChunkArrival(e,t,i){var n,a;if(!this._onDataArrival)throw new s.rT("IOController: No existing consumer (onDataArrival) callback!");if(this._paused)return;this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),null===(n=this._speedSampler)||void 0===n||n.addBytes(e.byteLength);const o=null===(a=this._speedSampler)||void 0===a?void 0:a.lastSecondKBps;if(0!==o){const e=this._normalizeSpeed(o);this._speedNormalized!==e&&(this._speedNormalized=e,this._adjustStashSize(e))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize)new Uint8Array(this._stashBuffer,0,this._stashSize).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;else{let i=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){const t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart);if(n<t.byteLength){if(n>0){const e=new Uint8Array(t,n);i.set(e,0),this._stashUsed=e.byteLength,this._stashByteStart+=n}}else this._stashUsed=0,this._stashByteStart+=n;this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else{const n=this._dispatchChunks(e,t);if(n<e.byteLength){const a=e.byteLength-n;a>this._bufferSize&&(this._expandBuffer(a),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(e,n),0),this._stashUsed+=a,this._stashByteStart=t+n}}}else if(0===this._stashUsed){const i=this._dispatchChunks(e,t);if(i<e.byteLength){const n=e.byteLength-i;n>this._bufferSize&&this._expandBuffer(n),new Uint8Array(this._stashBuffer,0,this._bufferSize).set(new Uint8Array(e,i),0),this._stashUsed+=n,this._stashByteStart=t+i}}else{this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength);const t=new Uint8Array(this._stashBuffer,0,this._bufferSize);t.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;const i=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(i<this._stashUsed&&i>0){const e=new Uint8Array(this._stashBuffer,i);t.set(e,0)}this._stashUsed-=i,this._stashByteStart+=i}}_flushStashBuffer(e){if(this._stashUsed>0){const t=this._stashBuffer.slice(0,this._stashUsed),i=this._dispatchChunks(t,this._stashByteStart),a=t.byteLength-i;if(i<t.byteLength){if(!e){if(i>0){const e=new Uint8Array(this._stashBuffer,0,this._bufferSize),n=new Uint8Array(t,i);e.set(n,0),this._stashUsed=n.byteLength,this._stashByteStart+=i}return 0}n.Z.w(this.TAG,a+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,a}return 0}_onLoaderComplete(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}_onLoaderError(e,t){var i;switch(n.Z.e(this.TAG,`Loader error, code = ${t.code}, msg = ${t.msg}`),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=o.nm.UNRECOVERABLE_EARLY_EOF),e){case o.nm.EARLY_EOF:if(!this._config.isLive&&this._totalLength){const e=((null===(i=this._currentRange)||void 0===i?void 0:i.to)||0)+1;return void(e<this._totalLength&&(n.Z.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(e,!1)))}e=o.nm.UNRECOVERABLE_EARLY_EOF;case o.nm.UNRECOVERABLE_EARLY_EOF:case o.nm.CONNECTING_TIMEOUT:case o.nm.HTTP_STATUS_CODE_INVALID:case o.nm.EXCEPTION:}if(!this._onError)throw new s.OZ("IOException: "+t.msg);this._onError(e,t)}}},108:(e,t,i)=>{i.d(t,{GM:()=>a,fp:()=>r,nm:()=>o});var n=i(411);const a={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},o={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"};class r{constructor(e){this._type=e||"undefined",this._status=a.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}destroy(){this._status=a.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}isWorking(){return this._status===a.kConnecting||this._status===a.kBuffering}get type(){return this._type}get status(){return this._status}get needStashBuffer(){return this._needStash}get onContentLengthKnown(){return this._onContentLengthKnown}set onContentLengthKnown(e){this._onContentLengthKnown=e}get onURLRedirect(){return this._onURLRedirect}set onURLRedirect(e){this._onURLRedirect=e}get onDataArrival(){return this._onDataArrival}set onDataArrival(e){this._onDataArrival=e}get onError(){return this._onError}set onError(e){this._onError=e}get onComplete(){return this._onComplete}set onComplete(e){this._onComplete=e}open(e,t){throw new n.do("Unimplemented abstract function!")}abort(){throw new n.do("Unimplemented abstract function!")}}},479:(e,t,i)=>{i.d(t,{Z:()=>a});const n={};!function(){const e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.includes("trident")&&/(rv)(?::| )([\w.]+)/.exec(e)||!e.includes("compatible")&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],i=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],a={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:i[0]||""},o={};if(a.browser){o[a.browser]=!0;const e=a.majorVersion.split(".");o.version={major:parseInt(a.majorVersion,10),string:a.version},e.length>1&&(o.version.minor=parseInt(e[1],10)),e.length>2&&(o.version.build=parseInt(e[2],10))}if(a.platform&&(o[a.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),o.rv||o.iemobile){o.rv&&delete o.rv;const e="msie";a.browser=e,o[e]=!0}if(o.edge){delete o.edge;const e="msedge";a.browser=e,o[e]=!0}if(o.opr){const e="opera";a.browser=e,o[e]=!0}if(o.safari&&o.android){const e="android";a.browser=e,o[e]=!0}o.name=a.browser,o.platform=a.platform;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&delete n[r];Object.assign(n,o)}();const a=n},411:(e,t,i)=>{i.d(t,{OC:()=>o,OZ:()=>n,do:()=>r,rT:()=>a});class n{constructor(e){this.name="RuntimeException",this._message=e}get message(){return this._message}toString(){return this.name+": "+this.message}}class a extends n{constructor(e){super(e),this.name="IllegalStateException"}}class o extends n{constructor(e){super(e),this.name="InvalidArgumentException"}}class r extends n{constructor(e){super(e),this.name="NotImplementedException"}}},645:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(99);class a{static e(e,t){var i;e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const n=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&(null===(i=a.emitter)||void 0===i||i.emit("log","error",n)),a.ENABLE_ERROR&&(console.error?console.error(n):console.warn?console.warn(n):console.log(n))}static i(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const i=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&a.emitter.emit("log","info",i),a.ENABLE_INFO&&(console.info?console.info(i):console.log(i))}static w(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const i=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&a.emitter.emit("log","warn",i),a.ENABLE_WARN&&(console.warn?console.warn(i):console.log(i))}static d(e,t){var i;e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const n=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&(null===(i=a.emitter)||void 0===i||i.emit("log","debug",n)),a.ENABLE_DEBUG&&(console.debug?console.debug(n):console.log(n))}static v(e,t){var i;e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const n=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&(null===(i=a.emitter)||void 0===i||i.emit("log","verbose",n)),a.ENABLE_VERBOSE&&console.log(n)}}a.FORCE_GLOBAL_TAG=!1,a.GLOBAL_TAG="mpegts.js",a.ENABLE_CALLBACK=!1,a.emitter=new n.EventEmitter,a.ENABLE_ERROR=!0,a.ENABLE_INFO=!0,a.ENABLE_WARN=!0,a.ENABLE_DEBUG=!0,a.ENABLE_VERBOSE=!0;const o=a},278:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(99),a=i(645);class o{static get forceGlobalTag(){return a.Z.FORCE_GLOBAL_TAG}static set forceGlobalTag(e){a.Z.FORCE_GLOBAL_TAG=e,o._notifyChange()}static get globalTag(){return a.Z.GLOBAL_TAG}static set globalTag(e){a.Z.GLOBAL_TAG=e,o._notifyChange()}static get enableAll(){return a.Z.ENABLE_VERBOSE&&a.Z.ENABLE_DEBUG&&a.Z.ENABLE_INFO&&a.Z.ENABLE_WARN&&a.Z.ENABLE_ERROR}static set enableAll(e){a.Z.ENABLE_VERBOSE=e,a.Z.ENABLE_DEBUG=e,a.Z.ENABLE_INFO=e,a.Z.ENABLE_WARN=e,a.Z.ENABLE_ERROR=e,o._notifyChange()}static get enableDebug(){return a.Z.ENABLE_DEBUG}static set enableDebug(e){a.Z.ENABLE_DEBUG=e,o._notifyChange()}static get enableVerbose(){return a.Z.ENABLE_VERBOSE}static set enableVerbose(e){a.Z.ENABLE_VERBOSE=e,o._notifyChange()}static get enableInfo(){return a.Z.ENABLE_INFO}static set enableInfo(e){a.Z.ENABLE_INFO=e,o._notifyChange()}static get enableWarn(){return a.Z.ENABLE_WARN}static set enableWarn(e){a.Z.ENABLE_WARN=e,o._notifyChange()}static get enableError(){return a.Z.ENABLE_ERROR}static set enableError(e){a.Z.ENABLE_ERROR=e,o._notifyChange()}static getConfig(){return{globalTag:a.Z.GLOBAL_TAG,forceGlobalTag:a.Z.FORCE_GLOBAL_TAG,enableVerbose:a.Z.ENABLE_VERBOSE,enableDebug:a.Z.ENABLE_DEBUG,enableInfo:a.Z.ENABLE_INFO,enableWarn:a.Z.ENABLE_WARN,enableError:a.Z.ENABLE_ERROR,enableCallback:a.Z.ENABLE_CALLBACK}}static applyConfig(e){a.Z.GLOBAL_TAG=e.globalTag,a.Z.FORCE_GLOBAL_TAG=e.forceGlobalTag,a.Z.ENABLE_VERBOSE=e.enableVerbose,a.Z.ENABLE_DEBUG=e.enableDebug,a.Z.ENABLE_INFO=e.enableInfo,a.Z.ENABLE_WARN=e.enableWarn,a.Z.ENABLE_ERROR=e.enableError,a.Z.ENABLE_CALLBACK=!!e.enableCallback}static _notifyChange(){const e=o.emitter;if(e.listenerCount("change")>0){const t=o.getConfig();e.emit("change",t)}}static registerListener(e){o.emitter.addListener("change",e)}static removeListener(e){o.emitter.removeListener("change",e)}static addLogListener(e){a.Z.emitter.addListener("log",e),a.Z.emitter.listenerCount("log")>0&&(a.Z.ENABLE_CALLBACK=!0,o._notifyChange())}static removeLogListener(e){a.Z.emitter.removeListener("log",e),0===a.Z.emitter.listenerCount("log")&&(a.Z.ENABLE_CALLBACK=!1,o._notifyChange())}}o.emitter=new n.EventEmitter;const r=o}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}return i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(607)})())})(N);class U{constructor(e,t){console.log("isSupportFlv",window.flvjs.isSupported()),window.flvjs.isSupported()&&this.initFLV(e,t)}toString(){return`Flv ${this.coreX}-${this.coreY}`}initFLV(e,t){const{deviceSerial:i,channelNo:n,hd:a,type:o}=A(t);window.ezuikitMonitor.report({protocol:"flv",url:t,serial:i,no:n,action:1,logInfo:{type:o}});var r=document.getElementById(e),s=r.getAttribute("controls");s||r.setAttribute("controls",!0);var l=window.flvjs.createPlayer({type:"flv",url:t,isLive:!0},{enableStashBuffer:!0,stashInitialSize:128,enableWorker:!0});l.attachMediaElement(r),l.load(),l.play(),this.flvUrl=t,this.flv=l,this.video=r,this.video.addEventListener("oncanplaythrough",(function(){console.log("oncanplaythrough")}),!1),this.video.addEventListener("onerror",(function(){console.log("onerror")}),!1)}play(){console.log("执行flv播放",this.video),this.video.play()}stop(){this.video.pause(),this.flv.unload()}destroy(){void 0!==this.flv&&null!==this.flv&&(this.flv.pause(),this.flv.unload(),this.flv.detachMediaElement(),this.flv.destroy(),this.flv=null)}}var H={exports:{}};H.exports,function(e,t){(function(){var i,n="4.17.21",a=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",d=500,c="__lodash_placeholder__",u=1,h=2,x=4,f=1,p=2,m=1,_=2,g=4,v=8,y=16,b=32,S=64,C=128,w=256,T=512,P=30,E="...",k=800,R=16,I=1,D=2,M=3,A=1/0,B=9007199254740991,L=17976931348623157e292,F=NaN,j=4294967295,O=j-1,N=j>>>1,U=[["ary",C],["bind",m],["bindKey",_],["curry",v],["curryRight",y],["flip",T],["partial",b],["partialRight",S],["rearg",w]],H="[object Arguments]",V="[object Array]",G="[object AsyncFunction]",Y="[object Boolean]",W="[object Date]",Z="[object DOMException]",X="[object Error]",J="[object Function]",q="[object GeneratorFunction]",K="[object Map]",$="[object Number]",Q="[object Null]",ee="[object Object]",te="[object Promise]",ie="[object Proxy]",ne="[object RegExp]",ae="[object Set]",oe="[object String]",re="[object Symbol]",se="[object Undefined]",le="[object WeakMap]",de="[object WeakSet]",ce="[object ArrayBuffer]",ue="[object DataView]",he="[object Float32Array]",xe="[object Float64Array]",fe="[object Int8Array]",pe="[object Int16Array]",me="[object Int32Array]",_e="[object Uint8Array]",ge="[object Uint8ClampedArray]",ve="[object Uint16Array]",ye="[object Uint32Array]",be=/\b__p \+= '';/g,Se=/\b(__p \+=) '' \+/g,Ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,Te=/[&<>"']/g,Pe=RegExp(we.source),Ee=RegExp(Te.source),ke=/<%-([\s\S]+?)%>/g,Re=/<%([\s\S]+?)%>/g,Ie=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Me=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,Le=RegExp(Be.source),Fe=/^\s+/,je=/\s/,ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Oe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,He=/[()=,{}\[\]\/\s]/,Ve=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ye=/\w*$/,We=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Xe=/^\[object .+?Constructor\]$/,Je=/^0o[0-7]+$/i,qe=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$e=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,et="\\ud800-\\udfff",tt="\\u0300-\\u036f",it="\\ufe20-\\ufe2f",nt="\\u20d0-\\u20ff",at=tt+it+nt,ot="\\u2700-\\u27bf",rt="a-z\\xdf-\\xf6\\xf8-\\xff",st="\\xac\\xb1\\xd7\\xf7",lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dt="\\u2000-\\u206f",ct=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ut="A-Z\\xc0-\\xd6\\xd8-\\xde",ht="\\ufe0e\\ufe0f",xt=st+lt+dt+ct,ft="['’]",pt="["+et+"]",mt="["+xt+"]",_t="["+at+"]",gt="\\d+",vt="["+ot+"]",yt="["+rt+"]",bt="[^"+et+xt+gt+ot+rt+ut+"]",St="\\ud83c[\\udffb-\\udfff]",Ct="(?:"+_t+"|"+St+")",wt="[^"+et+"]",Tt="(?:\\ud83c[\\udde6-\\uddff]){2}",Pt="[\\ud800-\\udbff][\\udc00-\\udfff]",Et="["+ut+"]",kt="\\u200d",Rt="(?:"+yt+"|"+bt+")",It="(?:"+Et+"|"+bt+")",Dt="(?:"+ft+"(?:d|ll|m|re|s|t|ve))?",Mt="(?:"+ft+"(?:D|LL|M|RE|S|T|VE))?",At=Ct+"?",Bt="["+ht+"]?",Lt="(?:"+kt+"(?:"+[wt,Tt,Pt].join("|")+")"+Bt+At+")*",Ft="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zt=Bt+At+Lt,Ot="(?:"+[vt,Tt,Pt].join("|")+")"+zt,Nt="(?:"+[wt+_t+"?",_t,Tt,Pt,pt].join("|")+")",Ut=RegExp(ft,"g"),Ht=RegExp(_t,"g"),Vt=RegExp(St+"(?="+St+")|"+Nt+zt,"g"),Gt=RegExp([Et+"?"+yt+"+"+Dt+"(?="+[mt,Et,"$"].join("|")+")",It+"+"+Mt+"(?="+[mt,Et+Rt,"$"].join("|")+")",Et+"?"+Rt+"+"+Dt,Et+"+"+Mt,jt,Ft,gt,Ot].join("|"),"g"),Yt=RegExp("["+kt+et+at+ht+"]"),Wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xt=-1,Jt={};Jt[he]=Jt[xe]=Jt[fe]=Jt[pe]=Jt[me]=Jt[_e]=Jt[ge]=Jt[ve]=Jt[ye]=!0,Jt[H]=Jt[V]=Jt[ce]=Jt[Y]=Jt[ue]=Jt[W]=Jt[X]=Jt[J]=Jt[K]=Jt[$]=Jt[ee]=Jt[ne]=Jt[ae]=Jt[oe]=Jt[le]=!1;var qt={};qt[H]=qt[V]=qt[ce]=qt[ue]=qt[Y]=qt[W]=qt[he]=qt[xe]=qt[fe]=qt[pe]=qt[me]=qt[K]=qt[$]=qt[ee]=qt[ne]=qt[ae]=qt[oe]=qt[re]=qt[_e]=qt[ge]=qt[ve]=qt[ye]=!0,qt[X]=qt[J]=qt[le]=!1;var Kt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},$t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ei={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ti=parseFloat,ii=parseInt,ni="object"==typeof z&&z&&z.Object===Object&&z,ai="object"==typeof self&&self&&self.Object===Object&&self,oi=ni||ai||Function("return this")(),ri=t&&!t.nodeType&&t,si=ri&&e&&!e.nodeType&&e,li=si&&si.exports===ri,di=li&&ni.process,ci=function(){try{var e=si&&si.require&&si.require("util").types;return e||di&&di.binding&&di.binding("util")}catch(ia){}}(),ui=ci&&ci.isArrayBuffer,hi=ci&&ci.isDate,xi=ci&&ci.isMap,fi=ci&&ci.isRegExp,pi=ci&&ci.isSet,mi=ci&&ci.isTypedArray;function _i(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function gi(e,t,i,n){var a=-1,o=null==e?0:e.length;while(++a<o){var r=e[a];t(n,r,i(r),e)}return n}function vi(e,t){var i=-1,n=null==e?0:e.length;while(++i<n)if(!1===t(e[i],i,e))break;return e}function yi(e,t){var i=null==e?0:e.length;while(i--)if(!1===t(e[i],i,e))break;return e}function bi(e,t){var i=-1,n=null==e?0:e.length;while(++i<n)if(!t(e[i],i,e))return!1;return!0}function Si(e,t){var i=-1,n=null==e?0:e.length,a=0,o=[];while(++i<n){var r=e[i];t(r,i,e)&&(o[a++]=r)}return o}function Ci(e,t){var i=null==e?0:e.length;return!!i&&Li(e,t,0)>-1}function wi(e,t,i){var n=-1,a=null==e?0:e.length;while(++n<a)if(i(t,e[n]))return!0;return!1}function Ti(e,t){var i=-1,n=null==e?0:e.length,a=Array(n);while(++i<n)a[i]=t(e[i],i,e);return a}function Pi(e,t){var i=-1,n=t.length,a=e.length;while(++i<n)e[a+i]=t[i];return e}function Ei(e,t,i,n){var a=-1,o=null==e?0:e.length;n&&o&&(i=e[++a]);while(++a<o)i=t(i,e[a],a,e);return i}function ki(e,t,i,n){var a=null==e?0:e.length;n&&a&&(i=e[--a]);while(a--)i=t(i,e[a],a,e);return i}function Ri(e,t){var i=-1,n=null==e?0:e.length;while(++i<n)if(t(e[i],i,e))return!0;return!1}var Ii=Oi("length");function Di(e){return e.split("")}function Mi(e){return e.match(Ue)||[]}function Ai(e,t,i){var n;return i(e,(function(e,i,a){if(t(e,i,a))return n=i,!1})),n}function Bi(e,t,i,n){var a=e.length,o=i+(n?1:-1);while(n?o--:++o<a)if(t(e[o],o,e))return o;return-1}function Li(e,t,i){return t===t?hn(e,t,i):Bi(e,ji,i)}function Fi(e,t,i,n){var a=i-1,o=e.length;while(++a<o)if(n(e[a],t))return a;return-1}function ji(e){return e!==e}function zi(e,t){var i=null==e?0:e.length;return i?Vi(e,t)/i:F}function Oi(e){return function(t){return null==t?i:t[e]}}function Ni(e){return function(t){return null==e?i:e[t]}}function Ui(e,t,i,n,a){return a(e,(function(e,a,o){i=n?(n=!1,e):t(i,e,a,o)})),i}function Hi(e,t){var i=e.length;e.sort(t);while(i--)e[i]=e[i].value;return e}function Vi(e,t){var n,a=-1,o=e.length;while(++a<o){var r=t(e[a]);r!==i&&(n=n===i?r:n+r)}return n}function Gi(e,t){var i=-1,n=Array(e);while(++i<e)n[i]=t(i);return n}function Yi(e,t){return Ti(t,(function(t){return[t,e[t]]}))}function Wi(e){return e?e.slice(0,mn(e)+1).replace(Fe,""):e}function Zi(e){return function(t){return e(t)}}function Xi(e,t){return Ti(t,(function(t){return e[t]}))}function Ji(e,t){return e.has(t)}function qi(e,t){var i=-1,n=e.length;while(++i<n&&Li(t,e[i],0)>-1);return i}function Ki(e,t){var i=e.length;while(i--&&Li(t,e[i],0)>-1);return i}function $i(e,t){var i=e.length,n=0;while(i--)e[i]===t&&++n;return n}var Qi=Ni(Kt),en=Ni($t);function tn(e){return"\\"+ei[e]}function nn(e,t){return null==e?i:e[t]}function an(e){return Yt.test(e)}function on(e){return Wt.test(e)}function rn(e){var t,i=[];while(!(t=e.next()).done)i.push(t.value);return i}function sn(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function ln(e,t){return function(i){return e(t(i))}}function dn(e,t){var i=-1,n=e.length,a=0,o=[];while(++i<n){var r=e[i];r!==t&&r!==c||(e[i]=c,o[a++]=i)}return o}function cn(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function un(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}function hn(e,t,i){var n=i-1,a=e.length;while(++n<a)if(e[n]===t)return n;return-1}function xn(e,t,i){var n=i+1;while(n--)if(e[n]===t)return n;return n}function fn(e){return an(e)?gn(e):Ii(e)}function pn(e){return an(e)?vn(e):Di(e)}function mn(e){var t=e.length;while(t--&&je.test(e.charAt(t)));return t}var _n=Ni(Qt);function gn(e){var t=Vt.lastIndex=0;while(Vt.test(e))++t;return t}function vn(e){return e.match(Vt)||[]}function yn(e){return e.match(Gt)||[]}var bn=function e(t){t=null==t?oi:Sn.defaults(oi.Object(),t,Sn.pick(oi,Zt));var z=t.Array,je=t.Date,Ue=t.Error,et=t.Function,tt=t.Math,it=t.Object,nt=t.RegExp,at=t.String,ot=t.TypeError,rt=z.prototype,st=et.prototype,lt=it.prototype,dt=t["__core-js_shared__"],ct=st.toString,ut=lt.hasOwnProperty,ht=0,xt=function(){var e=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ft=lt.toString,pt=ct.call(it),mt=oi._,_t=nt("^"+ct.call(ut).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=li?t.Buffer:i,vt=t.Symbol,yt=t.Uint8Array,bt=gt?gt.allocUnsafe:i,St=ln(it.getPrototypeOf,it),Ct=it.create,wt=lt.propertyIsEnumerable,Tt=rt.splice,Pt=vt?vt.isConcatSpreadable:i,Et=vt?vt.iterator:i,kt=vt?vt.toStringTag:i,Rt=function(){try{var e=Xr(it,"defineProperty");return e({},"",{}),e}catch(ia){}}(),It=t.clearTimeout!==oi.clearTimeout&&t.clearTimeout,Dt=je&&je.now!==oi.Date.now&&je.now,Mt=t.setTimeout!==oi.setTimeout&&t.setTimeout,At=tt.ceil,Bt=tt.floor,Lt=it.getOwnPropertySymbols,Ft=gt?gt.isBuffer:i,jt=t.isFinite,zt=rt.join,Ot=ln(it.keys,it),Nt=tt.max,Vt=tt.min,Gt=je.now,Yt=t.parseInt,Wt=tt.random,Kt=rt.reverse,$t=Xr(t,"DataView"),Qt=Xr(t,"Map"),ei=Xr(t,"Promise"),ni=Xr(t,"Set"),ai=Xr(t,"WeakMap"),ri=Xr(it,"create"),si=ai&&new ai,di={},ci=As($t),Ii=As(Qt),Di=As(ei),Ni=As(ni),hn=As(ai),gn=vt?vt.prototype:i,vn=gn?gn.valueOf:i,bn=gn?gn.toString:i;function Cn(e){if(Pc(e)&&!dc(e)&&!(e instanceof En)){if(e instanceof Pn)return e;if(ut.call(e,"__wrapped__"))return Ls(e)}return new Pn(e)}var wn=function(){function e(){}return function(t){if(!Tc(t))return{};if(Ct)return Ct(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Tn(){}function Pn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function En(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function kn(){var e=new En(this.__wrapped__);return e.__actions__=or(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=or(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=or(this.__views__),e}function Rn(){if(this.__filtered__){var e=new En(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function In(){var e=this.__wrapped__.value(),t=this.__dir__,i=dc(e),n=t<0,a=i?e.length:0,o=Qr(0,a,this.__views__),r=o.start,s=o.end,l=s-r,d=n?s:r-1,c=this.__iteratees__,u=c.length,h=0,x=Vt(l,this.__takeCount__);if(!i||!n&&a==l&&x==l)return No(e,this.__actions__);var f=[];e:while(l--&&h<x){d+=t;var p=-1,m=e[d];while(++p<u){var _=c[p],g=_.iteratee,v=_.type,y=g(m);if(v==D)m=y;else if(!y){if(v==I)continue e;break e}}f[h++]=m}return f}function Dn(e){var t=-1,i=null==e?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function Mn(){this.__data__=ri?ri(null):{},this.size=0}function An(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Bn(e){var t=this.__data__;if(ri){var n=t[e];return n===l?i:n}return ut.call(t,e)?t[e]:i}function Ln(e){var t=this.__data__;return ri?t[e]!==i:ut.call(t,e)}function Fn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ri&&t===i?l:t,this}function jn(e){var t=-1,i=null==e?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function zn(){this.__data__=[],this.size=0}function On(e){var t=this.__data__,i=ua(t,e);if(i<0)return!1;var n=t.length-1;return i==n?t.pop():Tt.call(t,i,1),--this.size,!0}function Nn(e){var t=this.__data__,n=ua(t,e);return n<0?i:t[n][1]}function Un(e){return ua(this.__data__,e)>-1}function Hn(e,t){var i=this.__data__,n=ua(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}function Vn(e){var t=-1,i=null==e?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function Gn(){this.size=0,this.__data__={hash:new Dn,map:new(Qt||jn),string:new Dn}}function Yn(e){var t=Wr(this,e)["delete"](e);return this.size-=t?1:0,t}function Wn(e){return Wr(this,e).get(e)}function Zn(e){return Wr(this,e).has(e)}function Xn(e,t){var i=Wr(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}function Jn(e){var t=-1,i=null==e?0:e.length;this.__data__=new Vn;while(++t<i)this.add(e[t])}function qn(e){return this.__data__.set(e,l),this}function Kn(e){return this.__data__.has(e)}function $n(e){var t=this.__data__=new jn(e);this.size=t.size}function Qn(){this.__data__=new jn,this.size=0}function ea(e){var t=this.__data__,i=t["delete"](e);return this.size=t.size,i}function ta(e){return this.__data__.get(e)}function na(e){return this.__data__.has(e)}function aa(e,t){var i=this.__data__;if(i instanceof jn){var n=i.__data__;if(!Qt||n.length<a-1)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Vn(n)}return i.set(e,t),this.size=i.size,this}function oa(e,t){var i=dc(e),n=!i&&lc(e),a=!i&&!n&&fc(e),o=!i&&!n&&!a&&Uc(e),r=i||n||a||o,s=r?Gi(e.length,at):[],l=s.length;for(var d in e)!t&&!ut.call(e,d)||r&&("length"==d||a&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||ss(d,l))||s.push(d);return s}function ra(e){var t=e.length;return t?e[vo(0,t-1)]:i}function sa(e,t){return Is(or(e),_a(t,0,e.length))}function la(e){return Is(or(e))}function da(e,t,n){(n!==i&&!oc(e[t],n)||n===i&&!(t in e))&&pa(e,t,n)}function ca(e,t,n){var a=e[t];ut.call(e,t)&&oc(a,n)&&(n!==i||t in e)||pa(e,t,n)}function ua(e,t){var i=e.length;while(i--)if(oc(e[i][0],t))return i;return-1}function ha(e,t,i,n){return Ca(e,(function(e,a,o){t(n,e,i(e),o)})),n}function xa(e,t){return e&&rr(t,Cu(t),e)}function fa(e,t){return e&&rr(t,wu(t),e)}function pa(e,t,i){"__proto__"==t&&Rt?Rt(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function ma(e,t){var n=-1,a=t.length,o=z(a),r=null==e;while(++n<a)o[n]=r?i:_u(e,t[n]);return o}function _a(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ga(e,t,n,a,o,r){var s,l=t&u,d=t&h,c=t&x;if(n&&(s=o?n(e,a,o,r):n(e)),s!==i)return s;if(!Tc(e))return e;var f=dc(e);if(f){if(s=is(e),!l)return or(e,s)}else{var p=$r(e),m=p==J||p==q;if(fc(e))return Jo(e,l);if(p==ee||p==H||m&&!o){if(s=d||m?{}:ns(e),!l)return d?lr(e,fa(s,e)):sr(e,xa(s,e))}else{if(!qt[p])return o?e:{};s=as(e,p,l)}}r||(r=new $n);var _=r.get(e);if(_)return _;r.set(e,s),zc(e)?e.forEach((function(i){s.add(ga(i,t,n,i,e,r))})):Ec(e)&&e.forEach((function(i,a){s.set(a,ga(i,t,n,a,e,r))}));var g=c?d?Ur:Nr:d?wu:Cu,v=f?i:g(e);return vi(v||e,(function(i,a){v&&(a=i,i=e[a]),ca(s,a,ga(i,t,n,a,e,r))})),s}function va(e){var t=Cu(e);return function(i){return ya(i,e,t)}}function ya(e,t,n){var a=n.length;if(null==e)return!a;e=it(e);while(a--){var o=n[a],r=t[o],s=e[o];if(s===i&&!(o in e)||!r(s))return!1}return!0}function ba(e,t,n){if("function"!=typeof e)throw new ot(r);return Ps((function(){e.apply(i,n)}),t)}function Sa(e,t,i,n){var o=-1,r=Ci,s=!0,l=e.length,d=[],c=t.length;if(!l)return d;i&&(t=Ti(t,Zi(i))),n?(r=wi,s=!1):t.length>=a&&(r=Ji,s=!1,t=new Jn(t));e:while(++o<l){var u=e[o],h=null==i?u:i(u);if(u=n||0!==u?u:0,s&&h===h){var x=c;while(x--)if(t[x]===h)continue e;d.push(u)}else r(t,h,n)||d.push(u)}return d}Cn.templateSettings={escape:ke,evaluate:Re,interpolate:Ie,variable:"",imports:{_:Cn}},Cn.prototype=Tn.prototype,Cn.prototype.constructor=Cn,Pn.prototype=wn(Tn.prototype),Pn.prototype.constructor=Pn,En.prototype=wn(Tn.prototype),En.prototype.constructor=En,Dn.prototype.clear=Mn,Dn.prototype["delete"]=An,Dn.prototype.get=Bn,Dn.prototype.has=Ln,Dn.prototype.set=Fn,jn.prototype.clear=zn,jn.prototype["delete"]=On,jn.prototype.get=Nn,jn.prototype.has=Un,jn.prototype.set=Hn,Vn.prototype.clear=Gn,Vn.prototype["delete"]=Yn,Vn.prototype.get=Wn,Vn.prototype.has=Zn,Vn.prototype.set=Xn,Jn.prototype.add=Jn.prototype.push=qn,Jn.prototype.has=Kn,$n.prototype.clear=Qn,$n.prototype["delete"]=ea,$n.prototype.get=ta,$n.prototype.has=na,$n.prototype.set=aa;var Ca=ur(Ma),wa=ur(Aa,!0);function Ta(e,t){var i=!0;return Ca(e,(function(e,n,a){return i=!!t(e,n,a),i})),i}function Pa(e,t,n){var a=-1,o=e.length;while(++a<o){var r=e[a],s=t(r);if(null!=s&&(l===i?s===s&&!Nc(s):n(s,l)))var l=s,d=r}return d}function Ea(e,t,n,a){var o=e.length;n=Jc(n),n<0&&(n=-n>o?0:o+n),a=a===i||a>o?o:Jc(a),a<0&&(a+=o),a=n>a?0:qc(a);while(n<a)e[n++]=t;return e}function ka(e,t){var i=[];return Ca(e,(function(e,n,a){t(e,n,a)&&i.push(e)})),i}function Ra(e,t,i,n,a){var o=-1,r=e.length;i||(i=rs),a||(a=[]);while(++o<r){var s=e[o];t>0&&i(s)?t>1?Ra(s,t-1,i,n,a):Pi(a,s):n||(a[a.length]=s)}return a}var Ia=hr(),Da=hr(!0);function Ma(e,t){return e&&Ia(e,t,Cu)}function Aa(e,t){return e&&Da(e,t,Cu)}function Ba(e,t){return Si(t,(function(t){return Sc(e[t])}))}function La(e,t){t=Yo(t,e);var n=0,a=t.length;while(null!=e&&n<a)e=e[Ms(t[n++])];return n&&n==a?e:i}function Fa(e,t,i){var n=t(e);return dc(e)?n:Pi(n,i(e))}function ja(e){return null==e?e===i?se:Q:kt&&kt in it(e)?Jr(e):ys(e)}function za(e,t){return e>t}function Oa(e,t){return null!=e&&ut.call(e,t)}function Na(e,t){return null!=e&&t in it(e)}function Ua(e,t,i){return e>=Vt(t,i)&&e<Nt(t,i)}function Ha(e,t,n){var a=n?wi:Ci,o=e[0].length,r=e.length,s=r,l=z(r),d=1/0,c=[];while(s--){var u=e[s];s&&t&&(u=Ti(u,Zi(t))),d=Vt(u.length,d),l[s]=!n&&(t||o>=120&&u.length>=120)?new Jn(s&&u):i}u=e[0];var h=-1,x=l[0];e:while(++h<o&&c.length<d){var f=u[h],p=t?t(f):f;if(f=n||0!==f?f:0,!(x?Ji(x,p):a(c,p,n))){s=r;while(--s){var m=l[s];if(!(m?Ji(m,p):a(e[s],p,n)))continue e}x&&x.push(p),c.push(f)}}return c}function Va(e,t,i,n){return Ma(e,(function(e,a,o){t(n,i(e),a,o)})),n}function Ga(e,t,n){t=Yo(t,e),e=Ss(e,t);var a=null==e?e:e[Ms(rl(t))];return null==a?i:_i(a,e,n)}function Ya(e){return Pc(e)&&ja(e)==H}function Wa(e){return Pc(e)&&ja(e)==ce}function Za(e){return Pc(e)&&ja(e)==W}function Xa(e,t,i,n,a){return e===t||(null==e||null==t||!Pc(e)&&!Pc(t)?e!==e&&t!==t:Ja(e,t,i,n,Xa,a))}function Ja(e,t,i,n,a,o){var r=dc(e),s=dc(t),l=r?V:$r(e),d=s?V:$r(t);l=l==H?ee:l,d=d==H?ee:d;var c=l==ee,u=d==ee,h=l==d;if(h&&fc(e)){if(!fc(t))return!1;r=!0,c=!1}if(h&&!c)return o||(o=new $n),r||Uc(e)?Fr(e,t,i,n,a,o):jr(e,t,l,i,n,a,o);if(!(i&f)){var x=c&&ut.call(e,"__wrapped__"),p=u&&ut.call(t,"__wrapped__");if(x||p){var m=x?e.value():e,_=p?t.value():t;return o||(o=new $n),a(m,_,i,n,o)}}return!!h&&(o||(o=new $n),zr(e,t,i,n,a,o))}function qa(e){return Pc(e)&&$r(e)==K}function Ka(e,t,n,a){var o=n.length,r=o,s=!a;if(null==e)return!r;e=it(e);while(o--){var l=n[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}while(++o<r){l=n[o];var d=l[0],c=e[d],u=l[1];if(s&&l[2]){if(c===i&&!(d in e))return!1}else{var h=new $n;if(a)var x=a(c,u,d,e,t,h);if(!(x===i?Xa(u,c,f|p,a,h):x))return!1}}return!0}function $a(e){if(!Tc(e)||hs(e))return!1;var t=Sc(e)?_t:Xe;return t.test(As(e))}function Qa(e){return Pc(e)&&ja(e)==ne}function eo(e){return Pc(e)&&$r(e)==ae}function to(e){return Pc(e)&&wc(e.length)&&!!Jt[ja(e)]}function io(e){return"function"==typeof e?e:null==e?Dh:"object"==typeof e?dc(e)?lo(e[0],e[1]):so(e):Gh(e)}function no(e){if(!fs(e))return Ot(e);var t=[];for(var i in it(e))ut.call(e,i)&&"constructor"!=i&&t.push(i);return t}function ao(e){if(!Tc(e))return vs(e);var t=fs(e),i=[];for(var n in e)("constructor"!=n||!t&&ut.call(e,n))&&i.push(n);return i}function oo(e,t){return e<t}function ro(e,t){var i=-1,n=uc(e)?z(e.length):[];return Ca(e,(function(e,a,o){n[++i]=t(e,a,o)})),n}function so(e){var t=Zr(e);return 1==t.length&&t[0][2]?ms(t[0][0],t[0][1]):function(i){return i===e||Ka(i,e,t)}}function lo(e,t){return ds(e)&&ps(t)?ms(Ms(e),t):function(n){var a=_u(n,e);return a===i&&a===t?vu(n,e):Xa(t,a,f|p)}}function co(e,t,n,a,o){e!==t&&Ia(t,(function(r,s){if(o||(o=new $n),Tc(r))uo(e,t,s,n,co,a,o);else{var l=a?a(ws(e,s),r,s+"",e,t,o):i;l===i&&(l=r),da(e,s,l)}}),wu)}function uo(e,t,n,a,o,r,s){var l=ws(e,n),d=ws(t,n),c=s.get(d);if(c)da(e,n,c);else{var u=r?r(l,d,n+"",e,t,s):i,h=u===i;if(h){var x=dc(d),f=!x&&fc(d),p=!x&&!f&&Uc(d);u=d,x||f||p?dc(l)?u=l:hc(l)?u=or(l):f?(h=!1,u=Jo(d,!0)):p?(h=!1,u=er(d,!0)):u=[]:Lc(d)||lc(d)?(u=l,lc(l)?u=$c(l):Tc(l)&&!Sc(l)||(u=ns(d))):h=!1}h&&(s.set(d,u),o(u,d,a,r,s),s["delete"](d)),da(e,n,u)}}function ho(e,t){var n=e.length;if(n)return t+=t<0?n:0,ss(t,n)?e[t]:i}function xo(e,t,i){t=t.length?Ti(t,(function(e){return dc(e)?function(t){return La(t,1===e.length?e[0]:e)}:e})):[Dh];var n=-1;t=Ti(t,Zi(Yr()));var a=ro(e,(function(e,i,a){var o=Ti(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return Hi(a,(function(e,t){return ir(e,t,i)}))}function fo(e,t){return po(e,t,(function(t,i){return vu(e,i)}))}function po(e,t,i){var n=-1,a=t.length,o={};while(++n<a){var r=t[n],s=La(e,r);i(s,r)&&To(o,Yo(r,e),s)}return o}function mo(e){return function(t){return La(t,e)}}function _o(e,t,i,n){var a=n?Fi:Li,o=-1,r=t.length,s=e;e===t&&(t=or(t)),i&&(s=Ti(e,Zi(i)));while(++o<r){var l=0,d=t[o],c=i?i(d):d;while((l=a(s,c,l,n))>-1)s!==e&&Tt.call(s,l,1),Tt.call(e,l,1)}return e}function go(e,t){var i=e?t.length:0,n=i-1;while(i--){var a=t[i];if(i==n||a!==o){var o=a;ss(a)?Tt.call(e,a,1):jo(e,a)}}return e}function vo(e,t){return e+Bt(Wt()*(t-e+1))}function yo(e,t,i,n){var a=-1,o=Nt(At((t-e)/(i||1)),0),r=z(o);while(o--)r[n?o:++a]=e,e+=i;return r}function bo(e,t){var i="";if(!e||t<1||t>B)return i;do{t%2&&(i+=e),t=Bt(t/2),t&&(e+=e)}while(t);return i}function So(e,t){return Es(bs(e,t,Dh),e+"")}function Co(e){return ra(Hu(e))}function wo(e,t){var i=Hu(e);return Is(i,_a(t,0,i.length))}function To(e,t,n,a){if(!Tc(e))return e;t=Yo(t,e);var o=-1,r=t.length,s=r-1,l=e;while(null!=l&&++o<r){var d=Ms(t[o]),c=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return e;if(o!=s){var u=l[d];c=a?a(u,d,l):i,c===i&&(c=Tc(u)?u:ss(t[o+1])?[]:{})}ca(l,d,c),l=l[d]}return e}var Po=si?function(e,t){return si.set(e,t),e}:Dh,Eo=Rt?function(e,t){return Rt(e,"toString",{configurable:!0,enumerable:!1,value:Eh(t),writable:!0})}:Dh;function ko(e){return Is(Hu(e))}function Ro(e,t,i){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),i=i>a?a:i,i<0&&(i+=a),a=t>i?0:i-t>>>0,t>>>=0;var o=z(a);while(++n<a)o[n]=e[n+t];return o}function Io(e,t){var i;return Ca(e,(function(e,n,a){return i=t(e,n,a),!i})),!!i}function Do(e,t,i){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t===t&&a<=N){while(n<a){var o=n+a>>>1,r=e[o];null!==r&&!Nc(r)&&(i?r<=t:r<t)?n=o+1:a=o}return a}return Mo(e,t,Dh,i)}function Mo(e,t,n,a){var o=0,r=null==e?0:e.length;if(0===r)return 0;t=n(t);var s=t!==t,l=null===t,d=Nc(t),c=t===i;while(o<r){var u=Bt((o+r)/2),h=n(e[u]),x=h!==i,f=null===h,p=h===h,m=Nc(h);if(s)var _=a||p;else _=c?p&&(a||x):l?p&&x&&(a||!f):d?p&&x&&!f&&(a||!m):!f&&!m&&(a?h<=t:h<t);_?o=u+1:r=u}return Vt(r,O)}function Ao(e,t){var i=-1,n=e.length,a=0,o=[];while(++i<n){var r=e[i],s=t?t(r):r;if(!i||!oc(s,l)){var l=s;o[a++]=0===r?0:r}}return o}function Bo(e){return"number"==typeof e?e:Nc(e)?F:+e}function Lo(e){if("string"==typeof e)return e;if(dc(e))return Ti(e,Lo)+"";if(Nc(e))return bn?bn.call(e):"";var t=e+"";return"0"==t&&1/e==-A?"-0":t}function Fo(e,t,i){var n=-1,o=Ci,r=e.length,s=!0,l=[],d=l;if(i)s=!1,o=wi;else if(r>=a){var c=t?null:Ir(e);if(c)return cn(c);s=!1,o=Ji,d=new Jn}else d=t?[]:l;e:while(++n<r){var u=e[n],h=t?t(u):u;if(u=i||0!==u?u:0,s&&h===h){var x=d.length;while(x--)if(d[x]===h)continue e;t&&d.push(h),l.push(u)}else o(d,h,i)||(d!==l&&d.push(h),l.push(u))}return l}function jo(e,t){return t=Yo(t,e),e=Ss(e,t),null==e||delete e[Ms(rl(t))]}function zo(e,t,i,n){return To(e,t,i(La(e,t)),n)}function Oo(e,t,i,n){var a=e.length,o=n?a:-1;while((n?o--:++o<a)&&t(e[o],o,e));return i?Ro(e,n?0:o,n?o+1:a):Ro(e,n?o+1:0,n?a:o)}function No(e,t){var i=e;return i instanceof En&&(i=i.value()),Ei(t,(function(e,t){return t.func.apply(t.thisArg,Pi([e],t.args))}),i)}function Uo(e,t,i){var n=e.length;if(n<2)return n?Fo(e[0]):[];var a=-1,o=z(n);while(++a<n){var r=e[a],s=-1;while(++s<n)s!=a&&(o[a]=Sa(o[a]||r,e[s],t,i))}return Fo(Ra(o,1),t,i)}function Ho(e,t,n){var a=-1,o=e.length,r=t.length,s={};while(++a<o){var l=a<r?t[a]:i;n(s,e[a],l)}return s}function Vo(e){return hc(e)?e:[]}function Go(e){return"function"==typeof e?e:Dh}function Yo(e,t){return dc(e)?e:ds(e,t)?[e]:Ds(eu(e))}var Wo=So;function Zo(e,t,n){var a=e.length;return n=n===i?a:n,!t&&n>=a?e:Ro(e,t,n)}var Xo=It||function(e){return oi.clearTimeout(e)};function Jo(e,t){if(t)return e.slice();var i=e.length,n=bt?bt(i):new e.constructor(i);return e.copy(n),n}function qo(e){var t=new e.constructor(e.byteLength);return new yt(t).set(new yt(e)),t}function Ko(e,t){var i=t?qo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function $o(e){var t=new e.constructor(e.source,Ye.exec(e));return t.lastIndex=e.lastIndex,t}function Qo(e){return vn?it(vn.call(e)):{}}function er(e,t){var i=t?qo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function tr(e,t){if(e!==t){var n=e!==i,a=null===e,o=e===e,r=Nc(e),s=t!==i,l=null===t,d=t===t,c=Nc(t);if(!l&&!c&&!r&&e>t||r&&s&&d&&!l&&!c||a&&s&&d||!n&&d||!o)return 1;if(!a&&!r&&!c&&e<t||c&&n&&o&&!a&&!r||l&&n&&o||!s&&o||!d)return-1}return 0}function ir(e,t,i){var n=-1,a=e.criteria,o=t.criteria,r=a.length,s=i.length;while(++n<r){var l=tr(a[n],o[n]);if(l){if(n>=s)return l;var d=i[n];return l*("desc"==d?-1:1)}}return e.index-t.index}function nr(e,t,i,n){var a=-1,o=e.length,r=i.length,s=-1,l=t.length,d=Nt(o-r,0),c=z(l+d),u=!n;while(++s<l)c[s]=t[s];while(++a<r)(u||a<o)&&(c[i[a]]=e[a]);while(d--)c[s++]=e[a++];return c}function ar(e,t,i,n){var a=-1,o=e.length,r=-1,s=i.length,l=-1,d=t.length,c=Nt(o-s,0),u=z(c+d),h=!n;while(++a<c)u[a]=e[a];var x=a;while(++l<d)u[x+l]=t[l];while(++r<s)(h||a<o)&&(u[x+i[r]]=e[a++]);return u}function or(e,t){var i=-1,n=e.length;t||(t=z(n));while(++i<n)t[i]=e[i];return t}function rr(e,t,n,a){var o=!n;n||(n={});var r=-1,s=t.length;while(++r<s){var l=t[r],d=a?a(n[l],e[l],l,n,e):i;d===i&&(d=e[l]),o?pa(n,l,d):ca(n,l,d)}return n}function sr(e,t){return rr(e,qr(e),t)}function lr(e,t){return rr(e,Kr(e),t)}function dr(e,t){return function(i,n){var a=dc(i)?gi:ha,o=t?t():{};return a(i,e,Yr(n,2),o)}}function cr(e){return So((function(t,n){var a=-1,o=n.length,r=o>1?n[o-1]:i,s=o>2?n[2]:i;r=e.length>3&&"function"==typeof r?(o--,r):i,s&&ls(n[0],n[1],s)&&(r=o<3?i:r,o=1),t=it(t);while(++a<o){var l=n[a];l&&e(t,l,a,r)}return t}))}function ur(e,t){return function(i,n){if(null==i)return i;if(!uc(i))return e(i,n);var a=i.length,o=t?a:-1,r=it(i);while(t?o--:++o<a)if(!1===n(r[o],o,r))break;return i}}function hr(e){return function(t,i,n){var a=-1,o=it(t),r=n(t),s=r.length;while(s--){var l=r[e?s:++a];if(!1===i(o[l],l,o))break}return t}}function xr(e,t,i){var n=t&m,a=mr(e);function o(){var t=this&&this!==oi&&this instanceof o?a:e;return t.apply(n?i:this,arguments)}return o}function fr(e){return function(t){t=eu(t);var n=an(t)?pn(t):i,a=n?n[0]:t.charAt(0),o=n?Zo(n,1).join(""):t.slice(1);return a[e]()+o}}function pr(e){return function(t){return Ei(Sh(Ju(t).replace(Ut,"")),e,"")}}function mr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=wn(e.prototype),n=e.apply(i,t);return Tc(n)?n:i}}function _r(e,t,n){var a=mr(e);function o(){var r=arguments.length,s=z(r),l=r,d=Gr(o);while(l--)s[l]=arguments[l];var c=r<3&&s[0]!==d&&s[r-1]!==d?[]:dn(s,d);if(r-=c.length,r<n)return kr(e,t,yr,o.placeholder,i,s,c,i,i,n-r);var u=this&&this!==oi&&this instanceof o?a:e;return _i(u,this,s)}return o}function gr(e){return function(t,n,a){var o=it(t);if(!uc(t)){var r=Yr(n,3);t=Cu(t),n=function(e){return r(o[e],e,o)}}var s=e(t,n,a);return s>-1?o[r?t[s]:s]:i}}function vr(e){return Or((function(t){var n=t.length,a=n,o=Pn.prototype.thru;e&&t.reverse();while(a--){var s=t[a];if("function"!=typeof s)throw new ot(r);if(o&&!l&&"wrapper"==Vr(s))var l=new Pn([],!0)}a=l?a:n;while(++a<n){s=t[a];var d=Vr(s),c="wrapper"==d?Hr(s):i;l=c&&us(c[0])&&c[1]==(C|v|b|w)&&!c[4].length&&1==c[9]?l[Vr(c[0])].apply(l,c[3]):1==s.length&&us(s)?l[d]():l.thru(s)}return function(){var e=arguments,i=e[0];if(l&&1==e.length&&dc(i))return l.plant(i).value();var a=0,o=n?t[a].apply(this,e):i;while(++a<n)o=t[a].call(this,o);return o}}))}function yr(e,t,n,a,o,r,s,l,d,c){var u=t&C,h=t&m,x=t&_,f=t&(v|y),p=t&T,g=x?i:mr(e);function b(){var i=arguments.length,m=z(i),_=i;while(_--)m[_]=arguments[_];if(f)var v=Gr(b),y=$i(m,v);if(a&&(m=nr(m,a,o,f)),r&&(m=ar(m,r,s,f)),i-=y,f&&i<c){var S=dn(m,v);return kr(e,t,yr,b.placeholder,n,m,S,l,d,c-i)}var C=h?n:this,w=x?C[e]:e;return i=m.length,l?m=Cs(m,l):p&&i>1&&m.reverse(),u&&d<i&&(m.length=d),this&&this!==oi&&this instanceof b&&(w=g||mr(w)),w.apply(C,m)}return b}function br(e,t){return function(i,n){return Va(i,e,t(n),{})}}function Sr(e,t){return function(n,a){var o;if(n===i&&a===i)return t;if(n!==i&&(o=n),a!==i){if(o===i)return a;"string"==typeof n||"string"==typeof a?(n=Lo(n),a=Lo(a)):(n=Bo(n),a=Bo(a)),o=e(n,a)}return o}}function Cr(e){return Or((function(t){return t=Ti(t,Zi(Yr())),So((function(i){var n=this;return e(t,(function(e){return _i(e,n,i)}))}))}))}function wr(e,t){t=t===i?" ":Lo(t);var n=t.length;if(n<2)return n?bo(t,e):t;var a=bo(t,At(e/fn(t)));return an(t)?Zo(pn(a),0,e).join(""):a.slice(0,e)}function Tr(e,t,i,n){var a=t&m,o=mr(e);function r(){var t=-1,s=arguments.length,l=-1,d=n.length,c=z(d+s),u=this&&this!==oi&&this instanceof r?o:e;while(++l<d)c[l]=n[l];while(s--)c[l++]=arguments[++t];return _i(u,a?i:this,c)}return r}function Pr(e){return function(t,n,a){return a&&"number"!=typeof a&&ls(t,n,a)&&(n=a=i),t=Xc(t),n===i?(n=t,t=0):n=Xc(n),a=a===i?t<n?1:-1:Xc(a),yo(t,n,a,e)}}function Er(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=Kc(t),i=Kc(i)),e(t,i)}}function kr(e,t,n,a,o,r,s,l,d,c){var u=t&v,h=u?s:i,x=u?i:s,f=u?r:i,p=u?i:r;t|=u?b:S,t&=~(u?S:b),t&g||(t&=~(m|_));var y=[e,t,o,f,h,p,x,l,d,c],C=n.apply(i,y);return us(e)&&Ts(C,y),C.placeholder=a,ks(C,e,t)}function Rr(e){var t=tt[e];return function(e,i){if(e=Kc(e),i=null==i?0:Vt(Jc(i),292),i&&jt(e)){var n=(eu(e)+"e").split("e"),a=t(n[0]+"e"+(+n[1]+i));return n=(eu(a)+"e").split("e"),+(n[0]+"e"+(+n[1]-i))}return t(e)}}var Ir=ni&&1/cn(new ni([,-0]))[1]==A?function(e){return new ni(e)}:Oh;function Dr(e){return function(t){var i=$r(t);return i==K?sn(t):i==ae?un(t):Yi(t,e(t))}}function Mr(e,t,n,a,o,s,l,d){var c=t&_;if(!c&&"function"!=typeof e)throw new ot(r);var u=a?a.length:0;if(u||(t&=~(b|S),a=o=i),l=l===i?l:Nt(Jc(l),0),d=d===i?d:Jc(d),u-=o?o.length:0,t&S){var h=a,x=o;a=o=i}var f=c?i:Hr(e),p=[e,t,n,a,o,h,x,s,l,d];if(f&&gs(p,f),e=p[0],t=p[1],n=p[2],a=p[3],o=p[4],d=p[9]=p[9]===i?c?0:e.length:Nt(p[9]-u,0),!d&&t&(v|y)&&(t&=~(v|y)),t&&t!=m)g=t==v||t==y?_r(e,t,d):t!=b&&t!=(m|b)||o.length?yr.apply(i,p):Tr(e,t,n,a);else var g=xr(e,t,n);var C=f?Po:Ts;return ks(C(g,p),e,t)}function Ar(e,t,n,a){return e===i||oc(e,lt[n])&&!ut.call(a,n)?t:e}function Br(e,t,n,a,o,r){return Tc(e)&&Tc(t)&&(r.set(t,e),co(e,t,i,Br,r),r["delete"](t)),e}function Lr(e){return Lc(e)?i:e}function Fr(e,t,n,a,o,r){var s=n&f,l=e.length,d=t.length;if(l!=d&&!(s&&d>l))return!1;var c=r.get(e),u=r.get(t);if(c&&u)return c==t&&u==e;var h=-1,x=!0,m=n&p?new Jn:i;r.set(e,t),r.set(t,e);while(++h<l){var _=e[h],g=t[h];if(a)var v=s?a(g,_,h,t,e,r):a(_,g,h,e,t,r);if(v!==i){if(v)continue;x=!1;break}if(m){if(!Ri(t,(function(e,t){if(!Ji(m,t)&&(_===e||o(_,e,n,a,r)))return m.push(t)}))){x=!1;break}}else if(_!==g&&!o(_,g,n,a,r)){x=!1;break}}return r["delete"](e),r["delete"](t),x}function jr(e,t,i,n,a,o,r){switch(i){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ce:return!(e.byteLength!=t.byteLength||!o(new yt(e),new yt(t)));case Y:case W:case $:return oc(+e,+t);case X:return e.name==t.name&&e.message==t.message;case ne:case oe:return e==t+"";case K:var s=sn;case ae:var l=n&f;if(s||(s=cn),e.size!=t.size&&!l)return!1;var d=r.get(e);if(d)return d==t;n|=p,r.set(e,t);var c=Fr(s(e),s(t),n,a,o,r);return r["delete"](e),c;case re:if(vn)return vn.call(e)==vn.call(t)}return!1}function zr(e,t,n,a,o,r){var s=n&f,l=Nr(e),d=l.length,c=Nr(t),u=c.length;if(d!=u&&!s)return!1;var h=d;while(h--){var x=l[h];if(!(s?x in t:ut.call(t,x)))return!1}var p=r.get(e),m=r.get(t);if(p&&m)return p==t&&m==e;var _=!0;r.set(e,t),r.set(t,e);var g=s;while(++h<d){x=l[h];var v=e[x],y=t[x];if(a)var b=s?a(y,v,x,t,e,r):a(v,y,x,e,t,r);if(!(b===i?v===y||o(v,y,n,a,r):b)){_=!1;break}g||(g="constructor"==x)}if(_&&!g){var S=e.constructor,C=t.constructor;S==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof C&&C instanceof C||(_=!1)}return r["delete"](e),r["delete"](t),_}function Or(e){return Es(bs(e,i,Js),e+"")}function Nr(e){return Fa(e,Cu,qr)}function Ur(e){return Fa(e,wu,Kr)}var Hr=si?function(e){return si.get(e)}:Oh;function Vr(e){var t=e.name+"",i=di[t],n=ut.call(di,t)?i.length:0;while(n--){var a=i[n],o=a.func;if(null==o||o==e)return a.name}return t}function Gr(e){var t=ut.call(Cn,"placeholder")?Cn:e;return t.placeholder}function Yr(){var e=Cn.iteratee||Mh;return e=e===Mh?io:e,arguments.length?e(arguments[0],arguments[1]):e}function Wr(e,t){var i=e.__data__;return cs(t)?i["string"==typeof t?"string":"hash"]:i.map}function Zr(e){var t=Cu(e),i=t.length;while(i--){var n=t[i],a=e[n];t[i]=[n,a,ps(a)]}return t}function Xr(e,t){var n=nn(e,t);return $a(n)?n:i}function Jr(e){var t=ut.call(e,kt),n=e[kt];try{e[kt]=i;var a=!0}catch(ia){}var o=ft.call(e);return a&&(t?e[kt]=n:delete e[kt]),o}var qr=Lt?function(e){return null==e?[]:(e=it(e),Si(Lt(e),(function(t){return wt.call(e,t)})))}:Xh,Kr=Lt?function(e){var t=[];while(e)Pi(t,qr(e)),e=St(e);return t}:Xh,$r=ja;function Qr(e,t,i){var n=-1,a=i.length;while(++n<a){var o=i[n],r=o.size;switch(o.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=Vt(t,e+r);break;case"takeRight":e=Nt(e,t-r);break}}return{start:e,end:t}}function es(e){var t=e.match(Oe);return t?t[1].split(Ne):[]}function ts(e,t,i){t=Yo(t,e);var n=-1,a=t.length,o=!1;while(++n<a){var r=Ms(t[n]);if(!(o=null!=e&&i(e,r)))break;e=e[r]}return o||++n!=a?o:(a=null==e?0:e.length,!!a&&wc(a)&&ss(r,a)&&(dc(e)||lc(e)))}function is(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&ut.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function ns(e){return"function"!=typeof e.constructor||fs(e)?{}:wn(St(e))}function as(e,t,i){var n=e.constructor;switch(t){case ce:return qo(e);case Y:case W:return new n(+e);case ue:return Ko(e,i);case he:case xe:case fe:case pe:case me:case _e:case ge:case ve:case ye:return er(e,i);case K:return new n;case $:case oe:return new n(e);case ne:return $o(e);case ae:return new n;case re:return Qo(e)}}function os(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(ze,"{\n/* [wrapped with "+t+"] */\n")}function rs(e){return dc(e)||lc(e)||!!(Pt&&e&&e[Pt])}function ss(e,t){var i=typeof e;return t=null==t?B:t,!!t&&("number"==i||"symbol"!=i&&qe.test(e))&&e>-1&&e%1==0&&e<t}function ls(e,t,i){if(!Tc(i))return!1;var n=typeof t;return!!("number"==n?uc(i)&&ss(t,i.length):"string"==n&&t in i)&&oc(i[t],e)}function ds(e,t){if(dc(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Nc(e))||(Me.test(e)||!De.test(e)||null!=t&&e in it(t))}function cs(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function us(e){var t=Vr(e),i=Cn[t];if("function"!=typeof i||!(t in En.prototype))return!1;if(e===i)return!0;var n=Hr(i);return!!n&&e===n[0]}function hs(e){return!!xt&&xt in e}($t&&$r(new $t(new ArrayBuffer(1)))!=ue||Qt&&$r(new Qt)!=K||ei&&$r(ei.resolve())!=te||ni&&$r(new ni)!=ae||ai&&$r(new ai)!=le)&&($r=function(e){var t=ja(e),n=t==ee?e.constructor:i,a=n?As(n):"";if(a)switch(a){case ci:return ue;case Ii:return K;case Di:return te;case Ni:return ae;case hn:return le}return t});var xs=dt?Sc:Jh;function fs(e){var t=e&&e.constructor,i="function"==typeof t&&t.prototype||lt;return e===i}function ps(e){return e===e&&!Tc(e)}function ms(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in it(n)))}}function _s(e){var t=Ud(e,(function(e){return i.size===d&&i.clear(),e})),i=t.cache;return t}function gs(e,t){var i=e[1],n=t[1],a=i|n,o=a<(m|_|C),r=n==C&&i==v||n==C&&i==w&&e[7].length<=t[8]||n==(C|w)&&t[7].length<=t[8]&&i==v;if(!o&&!r)return e;n&m&&(e[2]=t[2],a|=i&m?0:g);var s=t[3];if(s){var l=e[3];e[3]=l?nr(l,s,t[4]):s,e[4]=l?dn(e[3],c):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?ar(l,s,t[6]):s,e[6]=l?dn(e[5],c):t[6]),s=t[7],s&&(e[7]=s),n&C&&(e[8]=null==e[8]?t[8]:Vt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function vs(e){var t=[];if(null!=e)for(var i in it(e))t.push(i);return t}function ys(e){return ft.call(e)}function bs(e,t,n){return t=Nt(t===i?e.length-1:t,0),function(){var i=arguments,a=-1,o=Nt(i.length-t,0),r=z(o);while(++a<o)r[a]=i[t+a];a=-1;var s=z(t+1);while(++a<t)s[a]=i[a];return s[t]=n(r),_i(e,this,s)}}function Ss(e,t){return t.length<2?e:La(e,Ro(t,0,-1))}function Cs(e,t){var n=e.length,a=Vt(t.length,n),o=or(e);while(a--){var r=t[a];e[a]=ss(r,n)?o[r]:i}return e}function ws(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ts=Rs(Po),Ps=Mt||function(e,t){return oi.setTimeout(e,t)},Es=Rs(Eo);function ks(e,t,i){var n=t+"";return Es(e,os(n,Bs(es(n),i)))}function Rs(e){var t=0,n=0;return function(){var a=Gt(),o=R-(a-n);if(n=a,o>0){if(++t>=k)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Is(e,t){var n=-1,a=e.length,o=a-1;t=t===i?a:t;while(++n<t){var r=vo(n,o),s=e[r];e[r]=e[n],e[n]=s}return e.length=t,e}var Ds=_s((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ae,(function(e,i,n,a){t.push(n?a.replace(Ve,"$1"):i||e)})),t}));function Ms(e){if("string"==typeof e||Nc(e))return e;var t=e+"";return"0"==t&&1/e==-A?"-0":t}function As(e){if(null!=e){try{return ct.call(e)}catch(ia){}try{return e+""}catch(ia){}}return""}function Bs(e,t){return vi(U,(function(i){var n="_."+i[0];t&i[1]&&!Ci(e,n)&&e.push(n)})),e.sort()}function Ls(e){if(e instanceof En)return e.clone();var t=new Pn(e.__wrapped__,e.__chain__);return t.__actions__=or(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Fs(e,t,n){t=(n?ls(e,t,n):t===i)?1:Nt(Jc(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];var o=0,r=0,s=z(At(a/t));while(o<a)s[r++]=Ro(e,o,o+=t);return s}function js(e){var t=-1,i=null==e?0:e.length,n=0,a=[];while(++t<i){var o=e[t];o&&(a[n++]=o)}return a}function zs(){var e=arguments.length;if(!e)return[];var t=z(e-1),i=arguments[0],n=e;while(n--)t[n-1]=arguments[n];return Pi(dc(i)?or(i):[i],Ra(t,1))}var Os=So((function(e,t){return hc(e)?Sa(e,Ra(t,1,hc,!0)):[]})),Ns=So((function(e,t){var n=rl(t);return hc(n)&&(n=i),hc(e)?Sa(e,Ra(t,1,hc,!0),Yr(n,2)):[]})),Us=So((function(e,t){var n=rl(t);return hc(n)&&(n=i),hc(e)?Sa(e,Ra(t,1,hc,!0),i,n):[]}));function Hs(e,t,n){var a=null==e?0:e.length;return a?(t=n||t===i?1:Jc(t),Ro(e,t<0?0:t,a)):[]}function Vs(e,t,n){var a=null==e?0:e.length;return a?(t=n||t===i?1:Jc(t),t=a-t,Ro(e,0,t<0?0:t)):[]}function Gs(e,t){return e&&e.length?Oo(e,Yr(t,3),!0,!0):[]}function Ys(e,t){return e&&e.length?Oo(e,Yr(t,3),!0):[]}function Ws(e,t,i,n){var a=null==e?0:e.length;return a?(i&&"number"!=typeof i&&ls(e,t,i)&&(i=0,n=a),Ea(e,t,i,n)):[]}function Zs(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=null==i?0:Jc(i);return a<0&&(a=Nt(n+a,0)),Bi(e,Yr(t,3),a)}function Xs(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var o=a-1;return n!==i&&(o=Jc(n),o=n<0?Nt(a+o,0):Vt(o,a-1)),Bi(e,Yr(t,3),o,!0)}function Js(e){var t=null==e?0:e.length;return t?Ra(e,1):[]}function qs(e){var t=null==e?0:e.length;return t?Ra(e,A):[]}function Ks(e,t){var n=null==e?0:e.length;return n?(t=t===i?1:Jc(t),Ra(e,t)):[]}function $s(e){var t=-1,i=null==e?0:e.length,n={};while(++t<i){var a=e[t];n[a[0]]=a[1]}return n}function Qs(e){return e&&e.length?e[0]:i}function el(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=null==i?0:Jc(i);return a<0&&(a=Nt(n+a,0)),Li(e,t,a)}function tl(e){var t=null==e?0:e.length;return t?Ro(e,0,-1):[]}var il=So((function(e){var t=Ti(e,Vo);return t.length&&t[0]===e[0]?Ha(t):[]})),nl=So((function(e){var t=rl(e),n=Ti(e,Vo);return t===rl(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ha(n,Yr(t,2)):[]})),al=So((function(e){var t=rl(e),n=Ti(e,Vo);return t="function"==typeof t?t:i,t&&n.pop(),n.length&&n[0]===e[0]?Ha(n,i,t):[]}));function ol(e,t){return null==e?"":zt.call(e,t)}function rl(e){var t=null==e?0:e.length;return t?e[t-1]:i}function sl(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var o=a;return n!==i&&(o=Jc(n),o=o<0?Nt(a+o,0):Vt(o,a-1)),t===t?xn(e,t,o):Bi(e,ji,o,!0)}function ll(e,t){return e&&e.length?ho(e,Jc(t)):i}var dl=So(cl);function cl(e,t){return e&&e.length&&t&&t.length?_o(e,t):e}function ul(e,t,i){return e&&e.length&&t&&t.length?_o(e,t,Yr(i,2)):e}function hl(e,t,n){return e&&e.length&&t&&t.length?_o(e,t,i,n):e}var xl=Or((function(e,t){var i=null==e?0:e.length,n=ma(e,t);return go(e,Ti(t,(function(e){return ss(e,i)?+e:e})).sort(tr)),n}));function fl(e,t){var i=[];if(!e||!e.length)return i;var n=-1,a=[],o=e.length;t=Yr(t,3);while(++n<o){var r=e[n];t(r,n,e)&&(i.push(r),a.push(n))}return go(e,a),i}function pl(e){return null==e?e:Kt.call(e)}function ml(e,t,n){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ls(e,t,n)?(t=0,n=a):(t=null==t?0:Jc(t),n=n===i?a:Jc(n)),Ro(e,t,n)):[]}function _l(e,t){return Do(e,t)}function gl(e,t,i){return Mo(e,t,Yr(i,2))}function vl(e,t){var i=null==e?0:e.length;if(i){var n=Do(e,t);if(n<i&&oc(e[n],t))return n}return-1}function yl(e,t){return Do(e,t,!0)}function bl(e,t,i){return Mo(e,t,Yr(i,2),!0)}function Sl(e,t){var i=null==e?0:e.length;if(i){var n=Do(e,t,!0)-1;if(oc(e[n],t))return n}return-1}function Cl(e){return e&&e.length?Ao(e):[]}function wl(e,t){return e&&e.length?Ao(e,Yr(t,2)):[]}function Tl(e){var t=null==e?0:e.length;return t?Ro(e,1,t):[]}function Pl(e,t,n){return e&&e.length?(t=n||t===i?1:Jc(t),Ro(e,0,t<0?0:t)):[]}function El(e,t,n){var a=null==e?0:e.length;return a?(t=n||t===i?1:Jc(t),t=a-t,Ro(e,t<0?0:t,a)):[]}function kl(e,t){return e&&e.length?Oo(e,Yr(t,3),!1,!0):[]}function Rl(e,t){return e&&e.length?Oo(e,Yr(t,3)):[]}var Il=So((function(e){return Fo(Ra(e,1,hc,!0))})),Dl=So((function(e){var t=rl(e);return hc(t)&&(t=i),Fo(Ra(e,1,hc,!0),Yr(t,2))})),Ml=So((function(e){var t=rl(e);return t="function"==typeof t?t:i,Fo(Ra(e,1,hc,!0),i,t)}));function Al(e){return e&&e.length?Fo(e):[]}function Bl(e,t){return e&&e.length?Fo(e,Yr(t,2)):[]}function Ll(e,t){return t="function"==typeof t?t:i,e&&e.length?Fo(e,i,t):[]}function Fl(e){if(!e||!e.length)return[];var t=0;return e=Si(e,(function(e){if(hc(e))return t=Nt(e.length,t),!0})),Gi(t,(function(t){return Ti(e,Oi(t))}))}function jl(e,t){if(!e||!e.length)return[];var n=Fl(e);return null==t?n:Ti(n,(function(e){return _i(t,i,e)}))}var zl=So((function(e,t){return hc(e)?Sa(e,t):[]})),Ol=So((function(e){return Uo(Si(e,hc))})),Nl=So((function(e){var t=rl(e);return hc(t)&&(t=i),Uo(Si(e,hc),Yr(t,2))})),Ul=So((function(e){var t=rl(e);return t="function"==typeof t?t:i,Uo(Si(e,hc),i,t)})),Hl=So(Fl);function Vl(e,t){return Ho(e||[],t||[],ca)}function Gl(e,t){return Ho(e||[],t||[],To)}var Yl=So((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,jl(e,n)}));function Wl(e){var t=Cn(e);return t.__chain__=!0,t}function Zl(e,t){return t(e),e}function Xl(e,t){return t(e)}var Jl=Or((function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,o=function(t){return ma(t,e)};return!(t>1||this.__actions__.length)&&a instanceof En&&ss(n)?(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:Xl,args:[o],thisArg:i}),new Pn(a,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));function ql(){return Wl(this)}function Kl(){return new Pn(this.value(),this.__chain__)}function $l(){this.__values__===i&&(this.__values__=Zc(this.value()));var e=this.__index__>=this.__values__.length,t=e?i:this.__values__[this.__index__++];return{done:e,value:t}}function Ql(){return this}function ed(e){var t,n=this;while(n instanceof Tn){var a=Ls(n);a.__index__=0,a.__values__=i,t?o.__wrapped__=a:t=a;var o=a;n=n.__wrapped__}return o.__wrapped__=e,t}function td(){var e=this.__wrapped__;if(e instanceof En){var t=e;return this.__actions__.length&&(t=new En(this)),t=t.reverse(),t.__actions__.push({func:Xl,args:[pl],thisArg:i}),new Pn(t,this.__chain__)}return this.thru(pl)}function id(){return No(this.__wrapped__,this.__actions__)}var nd=dr((function(e,t,i){ut.call(e,i)?++e[i]:pa(e,i,1)}));function ad(e,t,n){var a=dc(e)?bi:Ta;return n&&ls(e,t,n)&&(t=i),a(e,Yr(t,3))}function od(e,t){var i=dc(e)?Si:ka;return i(e,Yr(t,3))}var rd=gr(Zs),sd=gr(Xs);function ld(e,t){return Ra(_d(e,t),1)}function dd(e,t){return Ra(_d(e,t),A)}function cd(e,t,n){return n=n===i?1:Jc(n),Ra(_d(e,t),n)}function ud(e,t){var i=dc(e)?vi:Ca;return i(e,Yr(t,3))}function hd(e,t){var i=dc(e)?yi:wa;return i(e,Yr(t,3))}var xd=dr((function(e,t,i){ut.call(e,i)?e[i].push(t):pa(e,i,[t])}));function fd(e,t,i,n){e=uc(e)?e:Hu(e),i=i&&!n?Jc(i):0;var a=e.length;return i<0&&(i=Nt(a+i,0)),Oc(e)?i<=a&&e.indexOf(t,i)>-1:!!a&&Li(e,t,i)>-1}var pd=So((function(e,t,i){var n=-1,a="function"==typeof t,o=uc(e)?z(e.length):[];return Ca(e,(function(e){o[++n]=a?_i(t,e,i):Ga(e,t,i)})),o})),md=dr((function(e,t,i){pa(e,i,t)}));function _d(e,t){var i=dc(e)?Ti:ro;return i(e,Yr(t,3))}function gd(e,t,n,a){return null==e?[]:(dc(t)||(t=null==t?[]:[t]),n=a?i:n,dc(n)||(n=null==n?[]:[n]),xo(e,t,n))}var vd=dr((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));function yd(e,t,i){var n=dc(e)?Ei:Ui,a=arguments.length<3;return n(e,Yr(t,4),i,a,Ca)}function bd(e,t,i){var n=dc(e)?ki:Ui,a=arguments.length<3;return n(e,Yr(t,4),i,a,wa)}function Sd(e,t){var i=dc(e)?Si:ka;return i(e,Hd(Yr(t,3)))}function Cd(e){var t=dc(e)?ra:Co;return t(e)}function wd(e,t,n){t=(n?ls(e,t,n):t===i)?1:Jc(t);var a=dc(e)?sa:wo;return a(e,t)}function Td(e){var t=dc(e)?la:ko;return t(e)}function Pd(e){if(null==e)return 0;if(uc(e))return Oc(e)?fn(e):e.length;var t=$r(e);return t==K||t==ae?e.size:no(e).length}function Ed(e,t,n){var a=dc(e)?Ri:Io;return n&&ls(e,t,n)&&(t=i),a(e,Yr(t,3))}var kd=So((function(e,t){if(null==e)return[];var i=t.length;return i>1&&ls(e,t[0],t[1])?t=[]:i>2&&ls(t[0],t[1],t[2])&&(t=[t[0]]),xo(e,Ra(t,1),[])})),Rd=Dt||function(){return oi.Date.now()};function Id(e,t){if("function"!=typeof t)throw new ot(r);return e=Jc(e),function(){if(--e<1)return t.apply(this,arguments)}}function Dd(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Mr(e,C,i,i,i,i,t)}function Md(e,t){var n;if("function"!=typeof t)throw new ot(r);return e=Jc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Ad=So((function(e,t,i){var n=m;if(i.length){var a=dn(i,Gr(Ad));n|=b}return Mr(e,n,t,i,a)})),Bd=So((function(e,t,i){var n=m|_;if(i.length){var a=dn(i,Gr(Bd));n|=b}return Mr(t,n,e,i,a)}));function Ld(e,t,n){t=n?i:t;var a=Mr(e,v,i,i,i,i,i,t);return a.placeholder=Ld.placeholder,a}function Fd(e,t,n){t=n?i:t;var a=Mr(e,y,i,i,i,i,i,t);return a.placeholder=Fd.placeholder,a}function jd(e,t,n){var a,o,s,l,d,c,u=0,h=!1,x=!1,f=!0;if("function"!=typeof e)throw new ot(r);function p(t){var n=a,r=o;return a=o=i,u=t,l=e.apply(r,n),l}function m(e){return u=e,d=Ps(v,t),h?p(e):l}function _(e){var i=e-c,n=e-u,a=t-i;return x?Vt(a,s-n):a}function g(e){var n=e-c,a=e-u;return c===i||n>=t||n<0||x&&a>=s}function v(){var e=Rd();if(g(e))return y(e);d=Ps(v,_(e))}function y(e){return d=i,f&&a?p(e):(a=o=i,l)}function b(){d!==i&&Xo(d),u=0,a=c=o=d=i}function S(){return d===i?l:y(Rd())}function C(){var e=Rd(),n=g(e);if(a=arguments,o=this,c=e,n){if(d===i)return m(c);if(x)return Xo(d),d=Ps(v,t),p(c)}return d===i&&(d=Ps(v,t)),l}return t=Kc(t)||0,Tc(n)&&(h=!!n.leading,x="maxWait"in n,s=x?Nt(Kc(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),C.cancel=b,C.flush=S,C}var zd=So((function(e,t){return ba(e,1,t)})),Od=So((function(e,t,i){return ba(e,Kc(t)||0,i)}));function Nd(e){return Mr(e,T)}function Ud(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(r);var i=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=i.cache;if(o.has(a))return o.get(a);var r=e.apply(this,n);return i.cache=o.set(a,r)||o,r};return i.cache=new(Ud.Cache||Vn),i}function Hd(e){if("function"!=typeof e)throw new ot(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Vd(e){return Md(2,e)}Ud.Cache=Vn;var Gd=Wo((function(e,t){t=1==t.length&&dc(t[0])?Ti(t[0],Zi(Yr())):Ti(Ra(t,1),Zi(Yr()));var i=t.length;return So((function(n){var a=-1,o=Vt(n.length,i);while(++a<o)n[a]=t[a].call(this,n[a]);return _i(e,this,n)}))})),Yd=So((function(e,t){var n=dn(t,Gr(Yd));return Mr(e,b,i,t,n)})),Wd=So((function(e,t){var n=dn(t,Gr(Wd));return Mr(e,S,i,t,n)})),Zd=Or((function(e,t){return Mr(e,w,i,i,i,t)}));function Xd(e,t){if("function"!=typeof e)throw new ot(r);return t=t===i?t:Jc(t),So(e,t)}function Jd(e,t){if("function"!=typeof e)throw new ot(r);return t=null==t?0:Nt(Jc(t),0),So((function(i){var n=i[t],a=Zo(i,0,t);return n&&Pi(a,n),_i(e,this,a)}))}function qd(e,t,i){var n=!0,a=!0;if("function"!=typeof e)throw new ot(r);return Tc(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),jd(e,t,{leading:n,maxWait:t,trailing:a})}function Kd(e){return Dd(e,1)}function $d(e,t){return Yd(Go(t),e)}function Qd(){if(!arguments.length)return[];var e=arguments[0];return dc(e)?e:[e]}function ec(e){return ga(e,x)}function tc(e,t){return t="function"==typeof t?t:i,ga(e,x,t)}function ic(e){return ga(e,u|x)}function nc(e,t){return t="function"==typeof t?t:i,ga(e,u|x,t)}function ac(e,t){return null==t||ya(e,t,Cu(t))}function oc(e,t){return e===t||e!==e&&t!==t}var rc=Er(za),sc=Er((function(e,t){return e>=t})),lc=Ya(function(){return arguments}())?Ya:function(e){return Pc(e)&&ut.call(e,"callee")&&!wt.call(e,"callee")},dc=z.isArray,cc=ui?Zi(ui):Wa;function uc(e){return null!=e&&wc(e.length)&&!Sc(e)}function hc(e){return Pc(e)&&uc(e)}function xc(e){return!0===e||!1===e||Pc(e)&&ja(e)==Y}var fc=Ft||Jh,pc=hi?Zi(hi):Za;function mc(e){return Pc(e)&&1===e.nodeType&&!Lc(e)}function _c(e){if(null==e)return!0;if(uc(e)&&(dc(e)||"string"==typeof e||"function"==typeof e.splice||fc(e)||Uc(e)||lc(e)))return!e.length;var t=$r(e);if(t==K||t==ae)return!e.size;if(fs(e))return!no(e).length;for(var i in e)if(ut.call(e,i))return!1;return!0}function gc(e,t){return Xa(e,t)}function vc(e,t,n){n="function"==typeof n?n:i;var a=n?n(e,t):i;return a===i?Xa(e,t,i,n):!!a}function yc(e){if(!Pc(e))return!1;var t=ja(e);return t==X||t==Z||"string"==typeof e.message&&"string"==typeof e.name&&!Lc(e)}function bc(e){return"number"==typeof e&&jt(e)}function Sc(e){if(!Tc(e))return!1;var t=ja(e);return t==J||t==q||t==G||t==ie}function Cc(e){return"number"==typeof e&&e==Jc(e)}function wc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=B}function Tc(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Pc(e){return null!=e&&"object"==typeof e}var Ec=xi?Zi(xi):qa;function kc(e,t){return e===t||Ka(e,t,Zr(t))}function Rc(e,t,n){return n="function"==typeof n?n:i,Ka(e,t,Zr(t),n)}function Ic(e){return Bc(e)&&e!=+e}function Dc(e){if(xs(e))throw new Ue(o);return $a(e)}function Mc(e){return null===e}function Ac(e){return null==e}function Bc(e){return"number"==typeof e||Pc(e)&&ja(e)==$}function Lc(e){if(!Pc(e)||ja(e)!=ee)return!1;var t=St(e);if(null===t)return!0;var i=ut.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&ct.call(i)==pt}var Fc=fi?Zi(fi):Qa;function jc(e){return Cc(e)&&e>=-B&&e<=B}var zc=pi?Zi(pi):eo;function Oc(e){return"string"==typeof e||!dc(e)&&Pc(e)&&ja(e)==oe}function Nc(e){return"symbol"==typeof e||Pc(e)&&ja(e)==re}var Uc=mi?Zi(mi):to;function Hc(e){return e===i}function Vc(e){return Pc(e)&&$r(e)==le}function Gc(e){return Pc(e)&&ja(e)==de}var Yc=Er(oo),Wc=Er((function(e,t){return e<=t}));function Zc(e){if(!e)return[];if(uc(e))return Oc(e)?pn(e):or(e);if(Et&&e[Et])return rn(e[Et]());var t=$r(e),i=t==K?sn:t==ae?cn:Hu;return i(e)}function Xc(e){if(!e)return 0===e?e:0;if(e=Kc(e),e===A||e===-A){var t=e<0?-1:1;return t*L}return e===e?e:0}function Jc(e){var t=Xc(e),i=t%1;return t===t?i?t-i:t:0}function qc(e){return e?_a(Jc(e),0,j):0}function Kc(e){if("number"==typeof e)return e;if(Nc(e))return F;if(Tc(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Tc(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Wi(e);var i=Ze.test(e);return i||Je.test(e)?ii(e.slice(2),i?2:8):We.test(e)?F:+e}function $c(e){return rr(e,wu(e))}function Qc(e){return e?_a(Jc(e),-B,B):0===e?e:0}function eu(e){return null==e?"":Lo(e)}var tu=cr((function(e,t){if(fs(t)||uc(t))rr(t,Cu(t),e);else for(var i in t)ut.call(t,i)&&ca(e,i,t[i])})),iu=cr((function(e,t){rr(t,wu(t),e)})),nu=cr((function(e,t,i,n){rr(t,wu(t),e,n)})),au=cr((function(e,t,i,n){rr(t,Cu(t),e,n)})),ou=Or(ma);function ru(e,t){var i=wn(e);return null==t?i:xa(i,t)}var su=So((function(e,t){e=it(e);var n=-1,a=t.length,o=a>2?t[2]:i;o&&ls(t[0],t[1],o)&&(a=1);while(++n<a){var r=t[n],s=wu(r),l=-1,d=s.length;while(++l<d){var c=s[l],u=e[c];(u===i||oc(u,lt[c])&&!ut.call(e,c))&&(e[c]=r[c])}}return e})),lu=So((function(e){return e.push(i,Br),_i(ku,i,e)}));function du(e,t){return Ai(e,Yr(t,3),Ma)}function cu(e,t){return Ai(e,Yr(t,3),Aa)}function uu(e,t){return null==e?e:Ia(e,Yr(t,3),wu)}function hu(e,t){return null==e?e:Da(e,Yr(t,3),wu)}function xu(e,t){return e&&Ma(e,Yr(t,3))}function fu(e,t){return e&&Aa(e,Yr(t,3))}function pu(e){return null==e?[]:Ba(e,Cu(e))}function mu(e){return null==e?[]:Ba(e,wu(e))}function _u(e,t,n){var a=null==e?i:La(e,t);return a===i?n:a}function gu(e,t){return null!=e&&ts(e,t,Oa)}function vu(e,t){return null!=e&&ts(e,t,Na)}var yu=br((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),e[t]=i}),Eh(Dh)),bu=br((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),ut.call(e,t)?e[t].push(i):e[t]=[i]}),Yr),Su=So(Ga);function Cu(e){return uc(e)?oa(e):no(e)}function wu(e){return uc(e)?oa(e,!0):ao(e)}function Tu(e,t){var i={};return t=Yr(t,3),Ma(e,(function(e,n,a){pa(i,t(e,n,a),e)})),i}function Pu(e,t){var i={};return t=Yr(t,3),Ma(e,(function(e,n,a){pa(i,n,t(e,n,a))})),i}var Eu=cr((function(e,t,i){co(e,t,i)})),ku=cr((function(e,t,i,n){co(e,t,i,n)})),Ru=Or((function(e,t){var i={};if(null==e)return i;var n=!1;t=Ti(t,(function(t){return t=Yo(t,e),n||(n=t.length>1),t})),rr(e,Ur(e),i),n&&(i=ga(i,u|h|x,Lr));var a=t.length;while(a--)jo(i,t[a]);return i}));function Iu(e,t){return Mu(e,Hd(Yr(t)))}var Du=Or((function(e,t){return null==e?{}:fo(e,t)}));function Mu(e,t){if(null==e)return{};var i=Ti(Ur(e),(function(e){return[e]}));return t=Yr(t),po(e,i,(function(e,i){return t(e,i[0])}))}function Au(e,t,n){t=Yo(t,e);var a=-1,o=t.length;o||(o=1,e=i);while(++a<o){var r=null==e?i:e[Ms(t[a])];r===i&&(a=o,r=n),e=Sc(r)?r.call(e):r}return e}function Bu(e,t,i){return null==e?e:To(e,t,i)}function Lu(e,t,n,a){return a="function"==typeof a?a:i,null==e?e:To(e,t,n,a)}var Fu=Dr(Cu),ju=Dr(wu);function zu(e,t,i){var n=dc(e),a=n||fc(e)||Uc(e);if(t=Yr(t,4),null==i){var o=e&&e.constructor;i=a?n?new o:[]:Tc(e)&&Sc(o)?wn(St(e)):{}}return(a?vi:Ma)(e,(function(e,n,a){return t(i,e,n,a)})),i}function Ou(e,t){return null==e||jo(e,t)}function Nu(e,t,i){return null==e?e:zo(e,t,Go(i))}function Uu(e,t,n,a){return a="function"==typeof a?a:i,null==e?e:zo(e,t,Go(n),a)}function Hu(e){return null==e?[]:Xi(e,Cu(e))}function Vu(e){return null==e?[]:Xi(e,wu(e))}function Gu(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=Kc(n),n=n===n?n:0),t!==i&&(t=Kc(t),t=t===t?t:0),_a(Kc(e),t,n)}function Yu(e,t,n){return t=Xc(t),n===i?(n=t,t=0):n=Xc(n),e=Kc(e),Ua(e,t,n)}function Wu(e,t,n){if(n&&"boolean"!=typeof n&&ls(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Xc(e),t===i?(t=e,e=0):t=Xc(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var o=Wt();return Vt(e+o*(t-e+ti("1e-"+((o+"").length-1))),t)}return vo(e,t)}var Zu=pr((function(e,t,i){return t=t.toLowerCase(),e+(i?Xu(t):t)}));function Xu(e){return bh(eu(e).toLowerCase())}function Ju(e){return e=eu(e),e&&e.replace(Ke,Qi).replace(Ht,"")}function qu(e,t,n){e=eu(e),t=Lo(t);var a=e.length;n=n===i?a:_a(Jc(n),0,a);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function Ku(e){return e=eu(e),e&&Ee.test(e)?e.replace(Te,en):e}function $u(e){return e=eu(e),e&&Le.test(e)?e.replace(Be,"\\$&"):e}var Qu=pr((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),eh=pr((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),th=fr("toLowerCase");function ih(e,t,i){e=eu(e),t=Jc(t);var n=t?fn(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return wr(Bt(a),i)+e+wr(At(a),i)}function nh(e,t,i){e=eu(e),t=Jc(t);var n=t?fn(e):0;return t&&n<t?e+wr(t-n,i):e}function ah(e,t,i){e=eu(e),t=Jc(t);var n=t?fn(e):0;return t&&n<t?wr(t-n,i)+e:e}function oh(e,t,i){return i||null==t?t=0:t&&(t=+t),Yt(eu(e).replace(Fe,""),t||0)}function rh(e,t,n){return t=(n?ls(e,t,n):t===i)?1:Jc(t),bo(eu(e),t)}function sh(){var e=arguments,t=eu(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var lh=pr((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));function dh(e,t,n){return n&&"number"!=typeof n&&ls(e,t,n)&&(t=n=i),n=n===i?j:n>>>0,n?(e=eu(e),e&&("string"==typeof t||null!=t&&!Fc(t))&&(t=Lo(t),!t&&an(e))?Zo(pn(e),0,n):e.split(t,n)):[]}var ch=pr((function(e,t,i){return e+(i?" ":"")+bh(t)}));function uh(e,t,i){return e=eu(e),i=null==i?0:_a(Jc(i),0,e.length),t=Lo(t),e.slice(i,i+t.length)==t}function hh(e,t,n){var a=Cn.templateSettings;n&&ls(e,t,n)&&(t=i),e=eu(e),t=nu({},t,a,Ar);var o,r,l=nu({},t.imports,a.imports,Ar),d=Cu(l),c=Xi(l,d),u=0,h=t.interpolate||$e,x="__p += '",f=nt((t.escape||$e).source+"|"+h.source+"|"+(h===Ie?Ge:$e).source+"|"+(t.evaluate||$e).source+"|$","g"),p="//# sourceURL="+(ut.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xt+"]")+"\n";e.replace(f,(function(t,i,n,a,s,l){return n||(n=a),x+=e.slice(u,l).replace(Qe,tn),i&&(o=!0,x+="' +\n__e("+i+") +\n'"),s&&(r=!0,x+="';\n"+s+";\n__p += '"),n&&(x+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),x+="';\n";var m=ut.call(t,"variable")&&t.variable;if(m){if(He.test(m))throw new Ue(s)}else x="with (obj) {\n"+x+"\n}\n";x=(r?x.replace(be,""):x).replace(Se,"$1").replace(Ce,"$1;"),x="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+x+"return __p\n}";var _=Ch((function(){return et(d,p+"return "+x).apply(i,c)}));if(_.source=x,yc(_))throw _;return _}function xh(e){return eu(e).toLowerCase()}function fh(e){return eu(e).toUpperCase()}function ph(e,t,n){if(e=eu(e),e&&(n||t===i))return Wi(e);if(!e||!(t=Lo(t)))return e;var a=pn(e),o=pn(t),r=qi(a,o),s=Ki(a,o)+1;return Zo(a,r,s).join("")}function mh(e,t,n){if(e=eu(e),e&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=Lo(t)))return e;var a=pn(e),o=Ki(a,pn(t))+1;return Zo(a,0,o).join("")}function _h(e,t,n){if(e=eu(e),e&&(n||t===i))return e.replace(Fe,"");if(!e||!(t=Lo(t)))return e;var a=pn(e),o=qi(a,pn(t));return Zo(a,o).join("")}function gh(e,t){var n=P,a=E;if(Tc(t)){var o="separator"in t?t.separator:o;n="length"in t?Jc(t.length):n,a="omission"in t?Lo(t.omission):a}e=eu(e);var r=e.length;if(an(e)){var s=pn(e);r=s.length}if(n>=r)return e;var l=n-fn(a);if(l<1)return a;var d=s?Zo(s,0,l).join(""):e.slice(0,l);if(o===i)return d+a;if(s&&(l+=d.length-l),Fc(o)){if(e.slice(l).search(o)){var c,u=d;o.global||(o=nt(o.source,eu(Ye.exec(o))+"g")),o.lastIndex=0;while(c=o.exec(u))var h=c.index;d=d.slice(0,h===i?l:h)}}else if(e.indexOf(Lo(o),l)!=l){var x=d.lastIndexOf(o);x>-1&&(d=d.slice(0,x))}return d+a}function vh(e){return e=eu(e),e&&Pe.test(e)?e.replace(we,_n):e}var yh=pr((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),bh=fr("toUpperCase");function Sh(e,t,n){return e=eu(e),t=n?i:t,t===i?on(e)?yn(e):Mi(e):e.match(t)||[]}var Ch=So((function(e,t){try{return _i(e,i,t)}catch(ia){return yc(ia)?ia:new Ue(ia)}})),wh=Or((function(e,t){return vi(t,(function(t){t=Ms(t),pa(e,t,Ad(e[t],e))})),e}));function Th(e){var t=null==e?0:e.length,i=Yr();return e=t?Ti(e,(function(e){if("function"!=typeof e[1])throw new ot(r);return[i(e[0]),e[1]]})):[],So((function(i){var n=-1;while(++n<t){var a=e[n];if(_i(a[0],this,i))return _i(a[1],this,i)}}))}function Ph(e){return va(ga(e,u))}function Eh(e){return function(){return e}}function kh(e,t){return null==e||e!==e?t:e}var Rh=vr(),Ih=vr(!0);function Dh(e){return e}function Mh(e){return io("function"==typeof e?e:ga(e,u))}function Ah(e){return so(ga(e,u))}function Bh(e,t){return lo(e,ga(t,u))}var Lh=So((function(e,t){return function(i){return Ga(i,e,t)}})),Fh=So((function(e,t){return function(i){return Ga(e,i,t)}}));function jh(e,t,i){var n=Cu(t),a=Ba(t,n);null!=i||Tc(t)&&(a.length||!n.length)||(i=t,t=e,e=this,a=Ba(t,Cu(t)));var o=!(Tc(i)&&"chain"in i)||!!i.chain,r=Sc(e);return vi(a,(function(i){var n=t[i];e[i]=n,r&&(e.prototype[i]=function(){var t=this.__chain__;if(o||t){var i=e(this.__wrapped__),a=i.__actions__=or(this.__actions__);return a.push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,Pi([this.value()],arguments))})})),e}function zh(){return oi._===this&&(oi._=mt),this}function Oh(){}function Nh(e){return e=Jc(e),So((function(t){return ho(t,e)}))}var Uh=Cr(Ti),Hh=Cr(bi),Vh=Cr(Ri);function Gh(e){return ds(e)?Oi(Ms(e)):mo(e)}function Yh(e){return function(t){return null==e?i:La(e,t)}}var Wh=Pr(),Zh=Pr(!0);function Xh(){return[]}function Jh(){return!1}function qh(){return{}}function Kh(){return""}function $h(){return!0}function Qh(e,t){if(e=Jc(e),e<1||e>B)return[];var i=j,n=Vt(e,j);t=Yr(t),e-=j;var a=Gi(n,t);while(++i<e)t(i);return a}function ex(e){return dc(e)?Ti(e,Ms):Nc(e)?[e]:or(Ds(eu(e)))}function tx(e){var t=++ht;return eu(e)+t}var ix=Sr((function(e,t){return e+t}),0),nx=Rr("ceil"),ax=Sr((function(e,t){return e/t}),1),ox=Rr("floor");function rx(e){return e&&e.length?Pa(e,Dh,za):i}function sx(e,t){return e&&e.length?Pa(e,Yr(t,2),za):i}function lx(e){return zi(e,Dh)}function dx(e,t){return zi(e,Yr(t,2))}function cx(e){return e&&e.length?Pa(e,Dh,oo):i}function ux(e,t){return e&&e.length?Pa(e,Yr(t,2),oo):i}var hx=Sr((function(e,t){return e*t}),1),xx=Rr("round"),fx=Sr((function(e,t){return e-t}),0);function px(e){return e&&e.length?Vi(e,Dh):0}function mx(e,t){return e&&e.length?Vi(e,Yr(t,2)):0}return Cn.after=Id,Cn.ary=Dd,Cn.assign=tu,Cn.assignIn=iu,Cn.assignInWith=nu,Cn.assignWith=au,Cn.at=ou,Cn.before=Md,Cn.bind=Ad,Cn.bindAll=wh,Cn.bindKey=Bd,Cn.castArray=Qd,Cn.chain=Wl,Cn.chunk=Fs,Cn.compact=js,Cn.concat=zs,Cn.cond=Th,Cn.conforms=Ph,Cn.constant=Eh,Cn.countBy=nd,Cn.create=ru,Cn.curry=Ld,Cn.curryRight=Fd,Cn.debounce=jd,Cn.defaults=su,Cn.defaultsDeep=lu,Cn.defer=zd,Cn.delay=Od,Cn.difference=Os,Cn.differenceBy=Ns,Cn.differenceWith=Us,Cn.drop=Hs,Cn.dropRight=Vs,Cn.dropRightWhile=Gs,Cn.dropWhile=Ys,Cn.fill=Ws,Cn.filter=od,Cn.flatMap=ld,Cn.flatMapDeep=dd,Cn.flatMapDepth=cd,Cn.flatten=Js,Cn.flattenDeep=qs,Cn.flattenDepth=Ks,Cn.flip=Nd,Cn.flow=Rh,Cn.flowRight=Ih,Cn.fromPairs=$s,Cn.functions=pu,Cn.functionsIn=mu,Cn.groupBy=xd,Cn.initial=tl,Cn.intersection=il,Cn.intersectionBy=nl,Cn.intersectionWith=al,Cn.invert=yu,Cn.invertBy=bu,Cn.invokeMap=pd,Cn.iteratee=Mh,Cn.keyBy=md,Cn.keys=Cu,Cn.keysIn=wu,Cn.map=_d,Cn.mapKeys=Tu,Cn.mapValues=Pu,Cn.matches=Ah,Cn.matchesProperty=Bh,Cn.memoize=Ud,Cn.merge=Eu,Cn.mergeWith=ku,Cn.method=Lh,Cn.methodOf=Fh,Cn.mixin=jh,Cn.negate=Hd,Cn.nthArg=Nh,Cn.omit=Ru,Cn.omitBy=Iu,Cn.once=Vd,Cn.orderBy=gd,Cn.over=Uh,Cn.overArgs=Gd,Cn.overEvery=Hh,Cn.overSome=Vh,Cn.partial=Yd,Cn.partialRight=Wd,Cn.partition=vd,Cn.pick=Du,Cn.pickBy=Mu,Cn.property=Gh,Cn.propertyOf=Yh,Cn.pull=dl,Cn.pullAll=cl,Cn.pullAllBy=ul,Cn.pullAllWith=hl,Cn.pullAt=xl,Cn.range=Wh,Cn.rangeRight=Zh,Cn.rearg=Zd,Cn.reject=Sd,Cn.remove=fl,Cn.rest=Xd,Cn.reverse=pl,Cn.sampleSize=wd,Cn.set=Bu,Cn.setWith=Lu,Cn.shuffle=Td,Cn.slice=ml,Cn.sortBy=kd,Cn.sortedUniq=Cl,Cn.sortedUniqBy=wl,Cn.split=dh,Cn.spread=Jd,Cn.tail=Tl,Cn.take=Pl,Cn.takeRight=El,Cn.takeRightWhile=kl,Cn.takeWhile=Rl,Cn.tap=Zl,Cn.throttle=qd,Cn.thru=Xl,Cn.toArray=Zc,Cn.toPairs=Fu,Cn.toPairsIn=ju,Cn.toPath=ex,Cn.toPlainObject=$c,Cn.transform=zu,Cn.unary=Kd,Cn.union=Il,Cn.unionBy=Dl,Cn.unionWith=Ml,Cn.uniq=Al,Cn.uniqBy=Bl,Cn.uniqWith=Ll,Cn.unset=Ou,Cn.unzip=Fl,Cn.unzipWith=jl,Cn.update=Nu,Cn.updateWith=Uu,Cn.values=Hu,Cn.valuesIn=Vu,Cn.without=zl,Cn.words=Sh,Cn.wrap=$d,Cn.xor=Ol,Cn.xorBy=Nl,Cn.xorWith=Ul,Cn.zip=Hl,Cn.zipObject=Vl,Cn.zipObjectDeep=Gl,Cn.zipWith=Yl,Cn.entries=Fu,Cn.entriesIn=ju,Cn.extend=iu,Cn.extendWith=nu,jh(Cn,Cn),Cn.add=ix,Cn.attempt=Ch,Cn.camelCase=Zu,Cn.capitalize=Xu,Cn.ceil=nx,Cn.clamp=Gu,Cn.clone=ec,Cn.cloneDeep=ic,Cn.cloneDeepWith=nc,Cn.cloneWith=tc,Cn.conformsTo=ac,Cn.deburr=Ju,Cn.defaultTo=kh,Cn.divide=ax,Cn.endsWith=qu,Cn.eq=oc,Cn.escape=Ku,Cn.escapeRegExp=$u,Cn.every=ad,Cn.find=rd,Cn.findIndex=Zs,Cn.findKey=du,Cn.findLast=sd,Cn.findLastIndex=Xs,Cn.findLastKey=cu,Cn.floor=ox,Cn.forEach=ud,Cn.forEachRight=hd,Cn.forIn=uu,Cn.forInRight=hu,Cn.forOwn=xu,Cn.forOwnRight=fu,Cn.get=_u,Cn.gt=rc,Cn.gte=sc,Cn.has=gu,Cn.hasIn=vu,Cn.head=Qs,Cn.identity=Dh,Cn.includes=fd,Cn.indexOf=el,Cn.inRange=Yu,Cn.invoke=Su,Cn.isArguments=lc,Cn.isArray=dc,Cn.isArrayBuffer=cc,Cn.isArrayLike=uc,Cn.isArrayLikeObject=hc,Cn.isBoolean=xc,Cn.isBuffer=fc,Cn.isDate=pc,Cn.isElement=mc,Cn.isEmpty=_c,Cn.isEqual=gc,Cn.isEqualWith=vc,Cn.isError=yc,Cn.isFinite=bc,Cn.isFunction=Sc,Cn.isInteger=Cc,Cn.isLength=wc,Cn.isMap=Ec,Cn.isMatch=kc,Cn.isMatchWith=Rc,Cn.isNaN=Ic,Cn.isNative=Dc,Cn.isNil=Ac,Cn.isNull=Mc,Cn.isNumber=Bc,Cn.isObject=Tc,Cn.isObjectLike=Pc,Cn.isPlainObject=Lc,Cn.isRegExp=Fc,Cn.isSafeInteger=jc,Cn.isSet=zc,Cn.isString=Oc,Cn.isSymbol=Nc,Cn.isTypedArray=Uc,Cn.isUndefined=Hc,Cn.isWeakMap=Vc,Cn.isWeakSet=Gc,Cn.join=ol,Cn.kebabCase=Qu,Cn.last=rl,Cn.lastIndexOf=sl,Cn.lowerCase=eh,Cn.lowerFirst=th,Cn.lt=Yc,Cn.lte=Wc,Cn.max=rx,Cn.maxBy=sx,Cn.mean=lx,Cn.meanBy=dx,Cn.min=cx,Cn.minBy=ux,Cn.stubArray=Xh,Cn.stubFalse=Jh,Cn.stubObject=qh,Cn.stubString=Kh,Cn.stubTrue=$h,Cn.multiply=hx,Cn.nth=ll,Cn.noConflict=zh,Cn.noop=Oh,Cn.now=Rd,Cn.pad=ih,Cn.padEnd=nh,Cn.padStart=ah,Cn.parseInt=oh,Cn.random=Wu,Cn.reduce=yd,Cn.reduceRight=bd,Cn.repeat=rh,Cn.replace=sh,Cn.result=Au,Cn.round=xx,Cn.runInContext=e,Cn.sample=Cd,Cn.size=Pd,Cn.snakeCase=lh,Cn.some=Ed,Cn.sortedIndex=_l,Cn.sortedIndexBy=gl,Cn.sortedIndexOf=vl,Cn.sortedLastIndex=yl,Cn.sortedLastIndexBy=bl,Cn.sortedLastIndexOf=Sl,Cn.startCase=ch,Cn.startsWith=uh,Cn.subtract=fx,Cn.sum=px,Cn.sumBy=mx,Cn.template=hh,Cn.times=Qh,Cn.toFinite=Xc,Cn.toInteger=Jc,Cn.toLength=qc,Cn.toLower=xh,Cn.toNumber=Kc,Cn.toSafeInteger=Qc,Cn.toString=eu,Cn.toUpper=fh,Cn.trim=ph,Cn.trimEnd=mh,Cn.trimStart=_h,Cn.truncate=gh,Cn.unescape=vh,Cn.uniqueId=tx,Cn.upperCase=yh,Cn.upperFirst=bh,Cn.each=ud,Cn.eachRight=hd,Cn.first=Qs,jh(Cn,function(){var e={};return Ma(Cn,(function(t,i){ut.call(Cn.prototype,i)||(e[i]=t)})),e}(),{chain:!1}),Cn.VERSION=n,vi(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Cn[e].placeholder=Cn})),vi(["drop","take"],(function(e,t){En.prototype[e]=function(n){n=n===i?1:Nt(Jc(n),0);var a=this.__filtered__&&!t?new En(this):this.clone();return a.__filtered__?a.__takeCount__=Vt(n,a.__takeCount__):a.__views__.push({size:Vt(n,j),type:e+(a.__dir__<0?"Right":"")}),a},En.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),vi(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=i==I||i==M;En.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yr(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),vi(["head","last"],(function(e,t){var i="take"+(t?"Right":"");En.prototype[e]=function(){return this[i](1).value()[0]}})),vi(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");En.prototype[e]=function(){return this.__filtered__?new En(this):this[i](1)}})),En.prototype.compact=function(){return this.filter(Dh)},En.prototype.find=function(e){return this.filter(e).head()},En.prototype.findLast=function(e){return this.reverse().find(e)},En.prototype.invokeMap=So((function(e,t){return"function"==typeof e?new En(this):this.map((function(i){return Ga(i,e,t)}))})),En.prototype.reject=function(e){return this.filter(Hd(Yr(e)))},En.prototype.slice=function(e,t){e=Jc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new En(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(t=Jc(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},En.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},En.prototype.toArray=function(){return this.take(j)},Ma(En.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),o=Cn[a?"take"+("last"==t?"Right":""):t],r=a||/^find/.test(t);o&&(Cn.prototype[t]=function(){var t=this.__wrapped__,s=a?[1]:arguments,l=t instanceof En,d=s[0],c=l||dc(t),u=function(e){var t=o.apply(Cn,Pi([e],s));return a&&h?t[0]:t};c&&n&&"function"==typeof d&&1!=d.length&&(l=c=!1);var h=this.__chain__,x=!!this.__actions__.length,f=r&&!h,p=l&&!x;if(!r&&c){t=p?t:new En(this);var m=e.apply(t,s);return m.__actions__.push({func:Xl,args:[u],thisArg:i}),new Pn(m,h)}return f&&p?e.apply(this,s):(m=this.thru(u),f?a?m.value()[0]:m.value():m)})})),vi(["pop","push","shift","sort","splice","unshift"],(function(e){var t=rt[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(dc(a)?a:[],e)}return this[i]((function(i){return t.apply(dc(i)?i:[],e)}))}})),Ma(En.prototype,(function(e,t){var i=Cn[t];if(i){var n=i.name+"";ut.call(di,n)||(di[n]=[]),di[n].push({name:t,func:i})}})),di[yr(i,_).name]=[{name:"wrapper",func:i}],En.prototype.clone=kn,En.prototype.reverse=Rn,En.prototype.value=In,Cn.prototype.at=Jl,Cn.prototype.chain=ql,Cn.prototype.commit=Kl,Cn.prototype.next=$l,Cn.prototype.plant=ed,Cn.prototype.reverse=td,Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=id,Cn.prototype.first=Cn.prototype.head,Et&&(Cn.prototype[Et]=Ql),Cn},Sn=bn();si?((si.exports=Sn)._=Sn,ri._=Sn):oi._=Sn}).call(z)}(H,H.exports);var V=H.exports,G=O(V),Y=function(){function e(t,i){r(this,e),this.id=i,this.jSPlugin=t,this.state={play:!1,loading:!1,text:""},this.loadingSetText=this.loadingSetText}return l(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"setPlayStatus",value:function(e){this.state=Object.assign(this.state,e)}},{key:"loadingStart",value:function(e){var t=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(t),t.innerHTML="@keyframes antRotate {to {transform: rotate(400deg);transform-origin:50% 50%;}} .loading {display: inline-block;z-index: 1000;-webkit-animation: antRotate 1s infinite linear;animation: antRotate 1s infinite linear;}";var i=e,n=document.getElementById(i),a=n.offsetWidth,o=n.offsetHeight,r=0,s=n.offsetLeft;this.jSPlugin.isInspect&&"map"==this.jSPlugin.Theme.inspectMode&&(s=0),document.getElementById("".concat(e,"-loading-id-0"))&&document.getElementById("".concat(e,"-loading-id-0")).parentNode.removeChild(document.getElementById("".concat(e,"-loading-id-0"))),console.log("loading-id-0---------------");var l=document.createElement("div");l.setAttribute("id","".concat(e,"-loading-id-0"));var d="position:absolute;outline:none;pointer-events:none;";console.log("this.jSPlugin",this.jSPlugin),d+="width: 100%;background-size: cover; background-repeat:no-repeat;",d+="height: 100%;",d+="top:"+r+";",d+="left:"+s+"px;",l.setAttribute("style",d),l.style.height=o,l.setAttribute("class","loading-container"),n.style.position="relative",this.jSPlugin.isInspect&&"map"==this.jSPlugin.Theme.inspectMode&&(n.style.position="absolute"),n.appendChild(l);var c=1,u=document.createElement("div"),h=document.createElement("div");u.setAttribute("class","loading-item"),u.setAttribute("id","".concat(e,"-loading-item-0"));d="display:inline-flex;pointer-events:none;flex-direction:column;justify-content:center;align-items: center;width:100%;height:"+o+"px;outline:none;vertical-align: top;position:absolute;";function x(e,t,i,n){var a=parseInt(n/i,10)*(e/i),o=n%i*(t/i);return{top:a,left:o}}d+="left:"+x(o,a,c,0).left+"px;",d+="top:"+x(o,a,c,0).top+"px;",u.setAttribute("style",d);var f=1,p=document.createElement("div");h.innerHTML="",h.style.color="#fff",p.setAttribute("class","loading"),p.setAttribute("id","loading-icon");var m='<svg t="1567069979438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399" width="24" height="24"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>';!this.jSPlugin.isMobile&&this.jSPlugin.isCall&&(f=this.jSPlugin.width/1024,m='<svg t="1567069979438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399" width="'.concat(40*f,'" height="').concat(40*f,'"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>')),p.innerHTML=m,u.appendChild(p),u.appendChild(h),l.appendChild(u)}},{key:"loadingStop",value:function(e){var t=document.getElementById("".concat(e,"-loading-item-0"));t&&t.removeChild(document.getElementById("loading-icon"))}},{key:"loadingSetText",value:function(e){var t=this;if(this.loadingClearText(),document.getElementById("".concat(this.id,"-loading-item-0"))){var i=document.getElementById("".concat(this.id,"-loading-item-0")),n=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes[1];if(n||(i.style.height="100%",n=document.createElement("div"),n.innerHTML=e.text,i.appendChild(n)),n.id="".concat(this.id,"-loading-item-txt"),n.innerHTML=e.text,n.style.fontSize="14px",!this.jSPlugin.isMobile&&this.jSPlugin.isCall){var a=this.jSPlugin.width/1024;n.style.fontSize="".concat(28*a,"px"),n.style.marginTop="16px"}if(this.jSPlugin.isCall&&1==e.type){var o=document.getElementById("".concat(this.id,"-loading-item-txt")),r=document.createElement("div");r.style="margin-bottom: 8px;width:24px;height:24px;",r.innerHTML='<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <title></title>\n            <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="Group">\n                    <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>\n                    <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </g>\n        </svg>',i.insertBefore(r,o)}if(n.style.color=e.color||"#FFFFFF",this.state.text=e.text,e.delayClear)var s=setTimeout((function(){t.loadingClearText(),clearTimeout(s)}),parseInt(e.delayClear))}}},{key:"loadingSetTextWithBtn",value:function(e){var t=this;this.loadingClear(),console.log(this.jSPlugin);var i=!!this.jSPlugin.Theme.call&&this.jSPlugin.Theme.call.themeData||null;(i&&(0===i.customConfig.bellPoster||"onCall"===this.jSPlugin.Theme.call.bellStatus)||e.mask)&&document.getElementById("".concat(this.id,"-loading-id-0"))&&(document.getElementById("".concat(this.id,"-loading-id-0")).style.background=e.maskStyle||"rgba(0,0,0,0.7)");var n=document.getElementById("".concat(this.id,"-loading-item-0"));if(n){n.style.height="100%",n.style["pointer-events"]="auto";var a=document.createElement("div");if(a.id="".concat(this.id,"-loading-item-txt"),a.innerHTML=e.text,a.title=e.text,a.style.color=e.color||"#FFFFFF",e.isMobile){var o=this.jSPlugin.width/375,r=14*o;a.style.fontSize=r+"px"}else{var s=this.jSPlugin.width/1024,l=28*s;a.style.fontSize=l+"px"}if(this.jSPlugin.isInspect&&(a.style="text-align: center; color: white; font-size: 14px; white-space: nowrap;overflow: hidden;text-overflow: ellipsis; width: 70%;"),n.appendChild(a),e.type&&2==e.type){var d=8,c=24;if(e.isMobile){var u=this.jSPlugin.width/375;c=24*u}else{var h=this.jSPlugin.width/1024;d=h<1?16*h:16,c=40*h}var x=document.getElementById("".concat(this.id,"-loading-item-txt")),f=document.createElement("div");f.style="margin-bottom: ".concat(d,"px;width:").concat(c,"px;height:").concat(c,"px;"),f.innerHTML='<svg width="'.concat(c,'px" height="').concat(c,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <title></title>\n            <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="Group">\n                    <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>\n                    <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </g>\n        </svg>'),n.insertBefore(f,x)}else{var p=document.createElement("div");if(p.id="".concat(this.id,"-loading-item-btn-wrap"),p.innerHTML='\n          <div id="'.concat(this.id,'-loading-item-btn" style="display: ').concat(this.jSPlugin.isInspect&&"map"==this.jSPlugin.Theme.inspectMode?"none":"block",' ">').concat(e.btnName,'</div>\n          <svg id="').concat(this.id,'-loading-item-btn-svg" style="display: ').concat(this.jSPlugin.isInspect&&"map"==this.jSPlugin.Theme.inspectMode?"block":"none",' ; margin: 0 auto" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="13" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <path fill="#fff" d="M960 416V192l-73.056 73.056a447.712 447.712 0 0 0-373.6-201.088C265.92 63.968 65.312 264.544 65.312 512S265.92 960.032 513.344 960.032a448.064 448.064 0 0 0 415.232-279.488 38.368 38.368 0 1 0-71.136-28.896 371.36 371.36 0 0 1-344.096 231.584C308.32 883.232 142.112 717.024 142.112 512S308.32 140.768 513.344 140.768c132.448 0 251.936 70.08 318.016 179.84L736 416h224z"></path>\n          </svg>\n        '),e.isMobile)1==e.type?p.style="color:white;width:100px;height:30px;border-radius: 10px;background: rgba(255,255,255,0.25);text-align:center;line-height:30px;margin-top:9px;font-size:14px;-webkit-tap-highlight-color: transparent;":p.style="border: 1px solid rgba(204,204,204,1);color:white;width:80px;height:24px;border-radius: 12px;background: rgba(255,255,255,0.1);text-align:center;line-height:24px;margin-top:20px;font-size:12px;-webkit-tap-highlight-color: transparent;";else{var m=this.jSPlugin.width/1024;p.style="color:#648FFC;margin-top:16px;cursor: pointer;font-size:".concat(24*m,"px;"),this.jSPlugin.isInspect&&"video"==this.jSPlugin.Theme.inspectMode&&(p.style="border: 1px solid rgba(255,255,255,1);color:white; cursor: pointer;text-align: center;width:80px;height:32px;border-radius: text-align:center;line-height:32px;margin-top:16px;font-size:14px;-webkit-tap-highlight-color: transparent;")}if(n.appendChild(p),e.isMobile&&1==e.type){var _=document.getElementById("".concat(this.id,"-loading-item-txt"));f=document.createElement("div");f.style="margin-bottom: 8px;width:24px;height:24px;",f.innerHTML='<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="Group">\n                      <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>\n                      <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </svg>',n.insertBefore(f,_)}document.getElementById("".concat(this.id,"-loading-item-btn-wrap")).onclick=function(){console.log("-----------重新加载"),t.jSPlugin.play(),t.loadingClear(),t.loadingStart(t.id),t.loadingSetText({text:"视频加载中"})}}this.state.text=e.text,e.delayClear&&setTimeout((function(){t.loadingClearText()}),parseInt(e.delayClear))}}},{key:"loadingClearText",value:function(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){var e=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes;e.length>1?e[1].parentNode.removeChild(e[1]):e[0]&&e[0].parentNode.removeChild(e[0])}}},{key:"loadingClear",value:function(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){for(var e=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes,t=e.length-1;t>=0;t--)e[t].parentNode.removeChild(e[t]);document.getElementById("".concat(this.id,"-loading-id-0"))&&(document.getElementById("".concat(this.id,"-loading-id-0")).style.background="none"),document.getElementById("loading-icon")&&document.getElementById("loading-icon").parentNode.removeChild(document.getElementById("loading-icon"))}}},{key:"loadingEnd",value:function(){var e=document.getElementById("".concat(this.id,"-loading-item-0"));if(e){e.parentNode.removeChild(e);var t=document.getElementById("".concat(this.id,"-loading-id-0"));t&&0===t.children.length&&t.parentNode.removeChild(t)}document.getElementById("".concat(this.id,"-loading-item-0")).style.background="none"}}]),e}(),W=function(){function e(t,i){r(this,e),this.id=i,this.jSPlugin=t,this.timer=null,this.state={play:!1,loading:!1}}return l(e,[{key:"default",value:function(e){var t=this,i="msgId";document.getElementById("".concat(this.id,"-").concat(i))&&document.getElementById("".concat(this.id,"-wrap")).removeChild(document.getElementById("".concat(this.id,"-").concat(i)));var n=document.createElement("div");n.id="".concat(this.id,"-").concat(i),n.style="position: absolute;top: 50%;left:calc(50% - ".concat(14*e.length/2,"px);padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px"),n.innerHTML=e,document.getElementById("".concat(this.id,"-wrap")).appendChild(n),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){document.getElementById("".concat(t.id,"-wrap")).removeChild(document.getElementById("".concat(t.id,"-").concat(i)))}),2e3)}}]),e}(),Z=[{moduleCode:"",detailCode:"405984",description:"",solution:"",updateTime:1559564188e3},{moduleCode:"",detailCode:"10035",description:"获取子账户AccessToken异常,子账户不存在或子账户不属于该开发者",solution:"",updateTime:1559551958e3},{moduleCode:"",detailCode:"1052674",description:"获取本地录像失败",solution:"",updateTime:1558579653e3},{moduleCode:"",detailCode:"395547",description:"",solution:"",updateTime:1557367296e3},{moduleCode:"",detailCode:"12",description:"",solution:"",updateTime:1557229476e3},{moduleCode:"",detailCode:"10052",description:"余额不足",solution:"",updateTime:1557121463e3},{moduleCode:"",detailCode:"20108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:1556541725e3},{moduleCode:"",detailCode:"10009",description:"",solution:"",updateTime:1556422452e3},{moduleCode:"",detailCode:"320001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:1556419044e3},{moduleCode:"",detailCode:"120001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:155641903e4},{moduleCode:"",detailCode:"320049",description:"",solution:"",updateTime:1556272984e3},{moduleCode:"",detailCode:"380227",description:"",solution:"",updateTime:1556264379e3},{moduleCode:"",detailCode:"10033",description:"policy参数信息异常",solution:"",updateTime:1555922124e3},{moduleCode:"",detailCode:"10065",description:"weakAppKey 不属于accessToken对应的用户",solution:"",updateTime:1555497522e3},{moduleCode:"",detailCode:"100001",description:"",solution:"",updateTime:1555141776e3},{moduleCode:"",detailCode:"395558",description:"",solution:"",updateTime:1554987121e3},{moduleCode:"",detailCode:"70001",description:"智能家居买断用户设备受到限制,建议合理选择pagestart和pageSize",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"170001",description:"",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"1012",description:"重置失败",solution:"",updateTime:1554645841e3},{moduleCode:"",detailCode:"1043",description:"重置失败",solution:"",updateTime:1554645834e3},{moduleCode:"",detailCode:"60060",description:"直播功能未开通",solution:"通道未开通直播功能，请先开通直播",updateTime:1554346018e3},{moduleCode:"",detailCode:"380203",description:"",solution:"",updateTime:1554093666e3},{moduleCode:"",detailCode:"399048",description:"免费版并发数达到上限，请升级企业版使用多并发能力",solution:"升级成为企业版套餐即可取消并发数限制",updateTime:1553839878e3},{moduleCode:"",detailCode:"60007",description:"预置点个数超过最大值",solution:"",updateTime:1553671316e3},{moduleCode:"",detailCode:"1005",description:"",solution:"",updateTime:1553513701e3},{moduleCode:"",detailCode:"20605",description:"其他用户正在认证中",solution:"",updateTime:1552976317e3},{moduleCode:"",detailCode:"90004",description:"当前型号设备暂时不支持AI任务：CS-C3W-3B1WFR-YGL",solution:"",updateTime:1552898525e3},{moduleCode:"",detailCode:"60046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:1552872372e3},{moduleCode:"",detailCode:"3",description:"修改视频清晰度失败!",solution:"",updateTime:1552440229e3},{moduleCode:"",detailCode:"1013",description:"",solution:"",updateTime:1552035069e3},{moduleCode:"",detailCode:"370007",description:"",solution:"",updateTime:1551852327e3},{moduleCode:"",detailCode:"-1",description:"",solution:"",updateTime:1551752889e3},{moduleCode:"",detailCode:"30005",description:"弱账户不存在",solution:"",updateTime:1551422358e3},{moduleCode:"",detailCode:"90006",description:"用户操作AI任务受限",solution:"",updateTime:155107332e4},{moduleCode:"",detailCode:"60203",description:"未开通相关服务",solution:"",updateTime:155062307e4},{moduleCode:"",detailCode:"10002",description:"accessToken过期或异常",solution:"",updateTime:1550300346e3},{moduleCode:"",detailCode:"380339",description:"",solution:"",updateTime:1549889458e3},{moduleCode:"",detailCode:"90002",description:"AI任务设备配置数达到上限：3",solution:"",updateTime:1549071664e3},{moduleCode:"",detailCode:"380008",description:"",solution:"",updateTime:1549005979e3},{moduleCode:"",detailCode:"320227",description:"",solution:"",updateTime:1548739731e3},{moduleCode:"",detailCode:"60059",description:"ezopen地址均不可用",solution:"",updateTime:154839535e4},{moduleCode:"",detailCode:"10005",description:"appKey异常",solution:"",updateTime:1548317858e3},{moduleCode:"",detailCode:"60045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:1548155085e3},{moduleCode:"",detailCode:"60047",description:"码流类型不支持",solution:"",updateTime:1547962108e3},{moduleCode:"",detailCode:"60041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:154796098e4},{moduleCode:"",detailCode:"110029",description:"个人用户接口调用频率超限",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1547606859e3},{moduleCode:"",detailCode:"380355",description:"设备直连推流异常结束",solution:"",updateTime:1547106294e3},{moduleCode:"",detailCode:"320081",description:"",solution:"",updateTime:1547106279e3},{moduleCode:"",detailCode:"60035",description:"购买云存储服务失败",solution:"",updateTime:1547026959e3},{moduleCode:"",detailCode:"90005",description:"设备已存在：C75714141",solution:"",updateTime:1546940622e3},{moduleCode:"",detailCode:"1053445",description:"该时间段没有录像片段",solution:"",updateTime:1546935727e3},{moduleCode:"",detailCode:"90007",description:"设备未加入到AI任务",solution:"",updateTime:1546932948e3},{moduleCode:"",detailCode:"326000",description:"",solution:"",updateTime:1546823143e3},{moduleCode:"",detailCode:"1021",description:"重置失败",solution:"",updateTime:1546781152e3},{moduleCode:"",detailCode:"2001",description:"删除设备失败!",solution:"",updateTime:1546422886e3},{moduleCode:"",detailCode:"380425",description:"",solution:"",updateTime:1546407694e3},{moduleCode:"",detailCode:"120097",description:"",solution:"",updateTime:1546085995e3},{moduleCode:"",detailCode:"10059",description:"requestId已存在",solution:"",updateTime:1545824509e3},{moduleCode:"",detailCode:"1154723",description:"",solution:"",updateTime:1545795209e3},{moduleCode:"",detailCode:"60043",description:"添加的设备超出最大数量",solution:"",updateTime:1545493607e3},{moduleCode:"",detailCode:"1152677",description:"",solution:"",updateTime:1545313404e3},{moduleCode:"",detailCode:"20097",description:"设备添加异常,设备验证码为ABCDEF或设备被N1，R1关联",solution:"",updateTime:1545310795e3},{moduleCode:"",detailCode:"10060",description:"设备不支持该云存储类型",solution:"",updateTime:1545309064e3},{moduleCode:"",detailCode:"20102",description:"无相应邀请信息，无法接受邀请",solution:"",updateTime:1545204966e3},{moduleCode:"",detailCode:"10053",description:"云存储开通中",solution:"",updateTime:1545100293e3},{moduleCode:"",detailCode:"20401",description:"用户云空间信息不存在",solution:"",updateTime:154501788e4},{moduleCode:"",detailCode:"20600",description:"临时密码数已达上限",solution:"",updateTime:1544873457e3},{moduleCode:"",detailCode:"901",description:"",solution:"",updateTime:1544693519e3},{moduleCode:"",detailCode:"60210",description:"图片数据错误",solution:"",updateTime:1544604457e3},{moduleCode:"",detailCode:"10013",description:"您的应用没有权限调用",solution:"",updateTime:1544416237e3},{moduleCode:"",detailCode:"70007",description:"授权码不存在",solution:"",updateTime:1544179533e3},{moduleCode:"",detailCode:"10015",description:"授权地址不存在",solution:"",updateTime:154416324e4},{moduleCode:"",detailCode:"320423",description:"",solution:"",updateTime:1544100685e3},{moduleCode:"",detailCode:"370009",description:"",solution:"",updateTime:1544077151e3},{moduleCode:"",detailCode:"10031",description:"子账户或萤石用户没有权限",solution:"",updateTime:1543990462e3},{moduleCode:"",detailCode:"10055",description:"设备不支持试用云存储服务",solution:"",updateTime:1543986292e3},{moduleCode:"",detailCode:"60042",description:"添加的设备密码错误",solution:"",updateTime:1543710913e3},{moduleCode:"",detailCode:"60082",description:"设备正在响应本次声源定位",solution:"",updateTime:1543647426e3},{moduleCode:"",detailCode:"10056",description:"设备不支持云存储服务转出",solution:"",updateTime:1543558342e3},{moduleCode:"",detailCode:"20104",description:"好友不存在",solution:"",updateTime:1543492403e3},{moduleCode:"",detailCode:"20111",description:"好友不是等待验证状态，无法接受邀请",solution:"",updateTime:1543492365e3},{moduleCode:"",detailCode:"20107",description:"不能添加自己为好友",solution:"",updateTime:1543480986e3},{moduleCode:"",detailCode:"1",description:"设备返回其他错误",solution:"",updateTime:1543459921e3},{moduleCode:"",detailCode:"60084",description:"当前正在关闭隐私遮蔽",solution:"",updateTime:1543456515e3},{moduleCode:"",detailCode:"380255",description:"",solution:"",updateTime:1543411652e3},{moduleCode:"",detailCode:"20015",description:"设备不支持",solution:"",updateTime:1543390936e3},{moduleCode:"",detailCode:"30003",description:"手机验证码错误",solution:"",updateTime:1543389137e3},{moduleCode:"",detailCode:"20615",description:"锁用户已存在",solution:"",updateTime:1543388325e3},{moduleCode:"",detailCode:"60061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:1543372581e3},{moduleCode:"",detailCode:"60020",description:"设备不支持该信令",solution:"",updateTime:1543321636e3},{moduleCode:"",detailCode:"320146",description:"",solution:"",updateTime:1543318472e3},{moduleCode:"",detailCode:"60018",description:"设备升级失败",solution:"",updateTime:1543304928e3},{moduleCode:"",detailCode:"60044",description:"添加的设备网络不可达超时",solution:"",updateTime:1543304102e3},{moduleCode:"",detailCode:"20619",description:"主用户无法删除",solution:"",updateTime:1543290219e3},{moduleCode:"",detailCode:"20608",description:"锁用户不存在",solution:"",updateTime:154328195e4},{moduleCode:"",detailCode:"20609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:1543281601e3},{moduleCode:"",detailCode:"1049954",description:"升级设备失败",solution:"",updateTime:1543279264e3},{moduleCode:"",detailCode:"60009",description:"正在调用预置点",solution:"",updateTime:1543238114e3},{moduleCode:"",detailCode:"1052677",description:"获取本地录像失败",solution:"",updateTime:1543207604e3},{moduleCode:"",detailCode:"327000",description:"",solution:"",updateTime:1543196609e3},{moduleCode:"",detailCode:"20021",description:"设备在线，未被用户添加",solution:"",updateTime:1543193436e3},{moduleCode:"",detailCode:"20202",description:"操作留言信息失败",solution:"",updateTime:1543191562e3},{moduleCode:"",detailCode:"1052678",description:"获取本地录像失败",solution:"",updateTime:1543132218e3},{moduleCode:"",detailCode:"1054723",description:"格式化设备失败",solution:"",updateTime:1543129833e3},{moduleCode:"",detailCode:"20109",description:"对应分享不存在",solution:"",updateTime:1543129111e3},{moduleCode:"",detailCode:"60026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:1543110403e3},{moduleCode:"",detailCode:"60083",description:"当前正在开启隐私遮蔽",solution:"",updateTime:1543071148e3},{moduleCode:"",detailCode:"60001",description:"用户无云台控制权限",solution:"",updateTime:1543059167e3},{moduleCode:"",detailCode:"2003",description:"设备不在线",solution:"",updateTime:1543051046e3},{moduleCode:"",detailCode:"-24",description:"设置设备enable错误",solution:"",updateTime:1543042701e3},{moduleCode:"",detailCode:"10018",description:"",solution:"",updateTime:1543041564e3},{moduleCode:"",detailCode:"20103",description:"好友已存在",solution:"",updateTime:154303843e4},{moduleCode:"",detailCode:"70010",description:"授权异常请重试",solution:"",updateTime:154303559e4},{moduleCode:"",detailCode:"60056",description:"删除设备失败",solution:"",updateTime:1543031275e3},{moduleCode:"",detailCode:"60040",description:"添加的设备不在同一局域网",solution:"",updateTime:154303121e4},{moduleCode:"",detailCode:"60019",description:"加密已开启",solution:"",updateTime:1543029931e3},{moduleCode:"",detailCode:"1054722",description:"格式化设备失败",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"20016",description:"当前设备正在格式化",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"10024",description:"透明通道权限校验不通过",solution:"",updateTime:154302554e4},{moduleCode:"",detailCode:"6002",description:"删除设备失败!",solution:"",updateTime:1543025026e3},{moduleCode:"",detailCode:"1011",description:"验证码错误！",solution:"",updateTime:1543016865e3},{moduleCode:"",detailCode:"60032",description:"卡密已使用",solution:"",updateTime:1543006668e3},{moduleCode:"",detailCode:"10034",description:"子账号已存在",solution:"",updateTime:1542989194e3},{moduleCode:"",detailCode:"20301",description:"根据uuid查询联动信息不存在",solution:"",updateTime:1542988651e3},{moduleCode:"",detailCode:"1041",description:"获取验证码过于频繁",solution:"",updateTime:1542980953e3},{moduleCode:"",detailCode:"10012",description:"该appkey下已绑定重复的phone！",solution:"",updateTime:15429808e5},{moduleCode:"",detailCode:"1008",description:"phone不合法！",solution:"",updateTime:1542979812e3},{moduleCode:"",detailCode:"60023",description:"订阅操作失败",solution:"",updateTime:1542979006e3},{moduleCode:"",detailCode:"5",description:"设备返回其他错误",solution:"",updateTime:1542977828e3},{moduleCode:"",detailCode:"60006",description:"云台当前操作失败",solution:"",updateTime:1542977598e3},{moduleCode:"",detailCode:"131",description:"修改视频清晰度失败!",solution:"",updateTime:1542977246e3},{moduleCode:"",detailCode:"10019",description:"密码错误",solution:"",updateTime:1542976628e3},{moduleCode:"",detailCode:"10004",description:"用户不存在",solution:"",updateTime:1542976268e3},{moduleCode:"",detailCode:"20201",description:"操作报警信息失败",solution:"",updateTime:1542975906e3},{moduleCode:"",detailCode:"20024",description:"设备不在线，已经被别的用户添加",solution:"",updateTime:1542975858e3},{moduleCode:"",detailCode:"60004",description:"设备云台旋转达到左限位",solution:"",updateTime:1542975207e3},{moduleCode:"",detailCode:"1052679",description:"修改视频清晰度失败!",solution:"",updateTime:1542974886e3},{moduleCode:"",detailCode:"20031",description:"请在萤石客户端关闭终端绑定",solution:"",updateTime:1542974756e3},{moduleCode:"",detailCode:"1053825",description:"获取本地录像失败",solution:"",updateTime:1542974692e3},{moduleCode:"",detailCode:"60011",description:"预置点不存在",solution:"",updateTime:1542974414e3},{moduleCode:"",detailCode:"1052936",description:"修改视频清晰度失败!",solution:"",updateTime:154297439e4},{moduleCode:"",detailCode:"1016",description:"",solution:"",updateTime:1542974273e3},{moduleCode:"",detailCode:"10032",description:"子账号不存在",solution:"",updateTime:1542973906e3},{moduleCode:"",detailCode:"20013",description:"设备已被别人添加",solution:"",updateTime:1542973817e3},{moduleCode:"",detailCode:"50000",description:"服务器错误!",solution:"",updateTime:1542973801e3},{moduleCode:"",detailCode:"60010",description:"该预置点已经是当前位置",solution:"",updateTime:15429738e5},{moduleCode:"",detailCode:"60003",description:"设备云台旋转达到下限位",solution:"",updateTime:154297377e4},{moduleCode:"",detailCode:"4",description:"设备返回其他错误",solution:"",updateTime:1542973755e3},{moduleCode:"",detailCode:"60016",description:"加密未开启，无需关闭",solution:"",updateTime:1542973753e3},{moduleCode:"",detailCode:"60002",description:"设备云台旋转达到上限位",solution:"",updateTime:1542973742e3},{moduleCode:"",detailCode:"20023",description:"设备不在线，未被用户添加",solution:"",updateTime:1542973685e3},{moduleCode:"",detailCode:"10008",description:"",solution:"",updateTime:1542973676e3},{moduleCode:"",detailCode:"20010",description:"设备验证码错误",solution:"",updateTime:1542973658e3},{moduleCode:"",detailCode:"60005",description:"设备云台旋转达到右限位",solution:"",updateTime:1542973657e3},{moduleCode:"",detailCode:"20017",description:"设备已经被自己添加",solution:"",updateTime:1542973648e3},{moduleCode:"",detailCode:"20020",description:"设备在线，已经被自己添加",solution:"",updateTime:1542973533e3},{moduleCode:"",detailCode:"20029",description:"设备不在线，已经被自己添加",solution:"",updateTime:154297353e4},{moduleCode:"",detailCode:"10014",description:"APPKEY下对应的第三方userId和phone未绑定！",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"20002",description:"设备不存在",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"10030",description:"appkey和appsecret不匹配",solution:"",updateTime:154297349e4},{moduleCode:"",detailCode:"20022",description:"设备在线，已经被别的用户添加",solution:"",updateTime:1542973486e3},{moduleCode:"",detailCode:"20008",description:"设备响应超时",solution:"",updateTime:1542973484e3},{moduleCode:"",detailCode:"20032",description:"该用户下通道不存在",solution:"",updateTime:1542973481e3},{moduleCode:"",detailCode:"20006",description:"网络异常",solution:"",updateTime:1542973475e3},{moduleCode:"",detailCode:"20014",description:"deviceSerial不合法!",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20007",description:"设备不在线",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20018",description:"该用户不拥有该设备",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10010",description:"",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10011",description:"未绑定！",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"20001",description:"通道不存在!",solution:"",updateTime:1542973452e3},{moduleCode:"",detailCode:"10017",description:"appKey不存在",solution:"",updateTime:1542973451e3},{moduleCode:"",detailCode:"400259",description:"",solution:"",updateTime:1542875643e3},{moduleCode:"",detailCode:"400004",description:"",solution:"",updateTime:1542873364e3},{moduleCode:"",detailCode:"3840",description:"",solution:"",updateTime:154186e7},{moduleCode:"",detailCode:"-1017",description:"",solution:"",updateTime:1541733663e3},{moduleCode:"",detailCode:"320025",description:"",solution:"",updateTime:1541078281e3},{moduleCode:"",detailCode:"320024",description:"",solution:"",updateTime:1540801374e3},{moduleCode:"",detailCode:"321002",description:"",solution:"",updateTime:1540631734e3},{moduleCode:"",detailCode:"321000",description:"",solution:"",updateTime:1540609178e3},{moduleCode:"",detailCode:"321022",description:"",solution:"",updateTime:1540548345e3},{moduleCode:"",detailCode:"321016",description:"",solution:"",updateTime:1540287187e3},{moduleCode:"",detailCode:"320023",description:"",solution:"",updateTime:1539825993e3},{moduleCode:"",detailCode:"-1016",description:"",solution:"",updateTime:1539584931e3},{moduleCode:"",detailCode:"8",description:"",solution:"",updateTime:1539391812e3},{moduleCode:"",detailCode:"1075127593",description:"",solution:"",updateTime:1538959251e3},{moduleCode:"",detailCode:"380421",description:"",solution:"",updateTime:1537288465e3},{moduleCode:"",detailCode:"322000",description:"麦克风权限未开启",solution:"",updateTime:1536820136e3},{moduleCode:"",detailCode:"1152678",description:"",solution:"",updateTime:1536738348e3},{moduleCode:"",detailCode:"320047",description:"",solution:"",updateTime:1536664472e3},{moduleCode:"",detailCode:"327006",description:"",solution:"",updateTime:153613612e4},{moduleCode:"",detailCode:"1074807593",description:"",solution:"",updateTime:1536135035e3},{moduleCode:"",detailCode:"320291",description:"",solution:"",updateTime:1536110836e3},{moduleCode:"",detailCode:"320045",description:"",solution:"",updateTime:1535963775e3},{moduleCode:"",detailCode:"370004",description:"",solution:"",updateTime:1535883699e3},{moduleCode:"",detailCode:"1149954",description:"",solution:"",updateTime:1535700674e3},{moduleCode:"",detailCode:"320053",description:"",solution:"",updateTime:1535681079e3},{moduleCode:"",detailCode:"400000",description:"",solution:"",updateTime:1535532332e3},{moduleCode:"",detailCode:"110028",description:"个人版抓图接口日调用次数超出限制",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348756e3},{moduleCode:"",detailCode:"110027",description:"个人版帐号数量超出安全限制，无法调用",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348734e3},{moduleCode:"",detailCode:"110026",description:"设备数量超出个人版限制，当前设备无法操作",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348588e3},{moduleCode:"",detailCode:"100000",description:"",solution:"",updateTime:1534980008e3},{moduleCode:"",detailCode:"324004",description:"",solution:"",updateTime:1534927762e3},{moduleCode:"",detailCode:"360104",description:"",solution:"",updateTime:1534761006e3},{moduleCode:"",detailCode:"320204",description:"",solution:"",updateTime:1534584221e3},{moduleCode:"",detailCode:"380001",description:"",solution:"",updateTime:1534404715e3},{moduleCode:"",detailCode:"380204",description:"",solution:"",updateTime:1534401682e3},{moduleCode:"",detailCode:"328006",description:"",solution:"",updateTime:1534144407e3},{moduleCode:"",detailCode:"321703",description:"",solution:"",updateTime:1534127274e3},{moduleCode:"",detailCode:"321510",description:"",solution:"",updateTime:1533428892e3},{moduleCode:"",detailCode:"321006",description:"",solution:"",updateTime:1533036916e3},{moduleCode:"",detailCode:"50009",description:"",solution:"",updateTime:1532078548e3},{moduleCode:"",detailCode:"50007",description:"",solution:"",updateTime:153199172e4},{moduleCode:"",detailCode:"50018",description:"",solution:"",updateTime:1531912829e3},{moduleCode:"",detailCode:"380451",description:"",solution:"",updateTime:15316157e5},{moduleCode:"",detailCode:"380336",description:"",solution:"",updateTime:1531231721e3},{moduleCode:"",detailCode:"360020",description:"",solution:"",updateTime:1531117554e3},{moduleCode:"",detailCode:"380418",description:"",solution:"",updateTime:153110707e4},{moduleCode:"",detailCode:"1153445",description:"设备在该时间段内没有录像",solution:"",updateTime:1530944007e3},{moduleCode:"",detailCode:"110007",description:"调用接口总次数达到上限",solution:"请升级企业版，获取更高能力",updateTime:1530935584e3},{moduleCode:"",detailCode:"360019",description:"",solution:"",updateTime:1530869771e3},{moduleCode:"",detailCode:"360100",description:"",solution:"",updateTime:1530786188e3},{moduleCode:"",detailCode:"380042",description:"",solution:"",updateTime:1530775199e3},{moduleCode:"",detailCode:"320355",description:"",solution:"",updateTime:1530716074e3},{moduleCode:"",detailCode:"100003",description:"",solution:"",updateTime:1530232541e3},{moduleCode:"",detailCode:"371026",description:"",solution:"",updateTime:15301926e5},{moduleCode:"",detailCode:"102",description:"",solution:"",updateTime:1529895641e3},{moduleCode:"",detailCode:"380201",description:"",solution:"",updateTime:1529740929e3},{moduleCode:"",detailCode:"320054",description:"",solution:"",updateTime:1529544875e3},{moduleCode:"",detailCode:"500101",description:"",solution:"",updateTime:1529485953e3},{moduleCode:"",detailCode:"321001",description:"",solution:"",updateTime:1529411048e3},{moduleCode:"",detailCode:"321508",description:"",solution:"",updateTime:1529393279e3},{moduleCode:"",detailCode:"405991",description:"",solution:"",updateTime:1529380238e3},{moduleCode:"",detailCode:"380461",description:"",solution:"",updateTime:1529130941e3},{moduleCode:"",detailCode:"-1019",description:"",solution:"",updateTime:1529057245e3},{moduleCode:"",detailCode:"322009",description:"",solution:"",updateTime:1528965717e3},{moduleCode:"",detailCode:"324005",description:"",solution:"",updateTime:1528950153e3},{moduleCode:"",detailCode:"325000",description:"",solution:"",updateTime:1528947143e3},{moduleCode:"",detailCode:"326032",description:"",solution:"",updateTime:1528872971e3},{moduleCode:"",detailCode:"325032",description:"",solution:"",updateTime:1528863189e3},{moduleCode:"",detailCode:"328000",description:"",solution:"",updateTime:1528794505e3},{moduleCode:"",detailCode:"53",description:"",solution:"",updateTime:1528693249e3},{moduleCode:"",detailCode:"-1020",description:"",solution:"",updateTime:152849944e4},{moduleCode:"",detailCode:"329032",description:"",solution:"",updateTime:1528446301e3},{moduleCode:"",detailCode:"-1202",description:"",solution:"",updateTime:152843982e4},{moduleCode:"",detailCode:"2",description:"",solution:"",updateTime:1528434175e3},{moduleCode:"",detailCode:"1152936",description:"",solution:"",updateTime:1528345986e3},{moduleCode:"",detailCode:"328011",description:"",solution:"",updateTime:15283386e5},{moduleCode:"",detailCode:"28",description:"",solution:"",updateTime:152833753e4},{moduleCode:"",detailCode:"320356",description:"",solution:"",updateTime:1528188693e3},{moduleCode:"",detailCode:"320357",description:"",solution:"",updateTime:1528188517e3},{moduleCode:"",detailCode:"405800",description:"",solution:"",updateTime:1528168732e3},{moduleCode:"",detailCode:"405996",description:"",solution:"",updateTime:1528168686e3},{moduleCode:"",detailCode:"380357",description:"",solution:"",updateTime:1528011565e3},{moduleCode:"",detailCode:"328022",description:"",solution:"",updateTime:1527929065e3},{moduleCode:"",detailCode:"380003",description:"",solution:"",updateTime:1527927819e3},{moduleCode:"",detailCode:"50004",description:"",solution:"",updateTime:1527770643e3},{moduleCode:"",detailCode:"50011",description:"",solution:"",updateTime:1527770635e3},{moduleCode:"",detailCode:"370017",description:"",solution:"",updateTime:1527739514e3},{moduleCode:"",detailCode:"327032",description:"",solution:"",updateTime:1527726704e3},{moduleCode:"",detailCode:"324001",description:"",solution:"",updateTime:1527681892e3},{moduleCode:"",detailCode:"405997",description:"",solution:"",updateTime:1527653408e3},{moduleCode:"",detailCode:"405995",description:"",solution:"",updateTime:1527647283e3},{moduleCode:"",detailCode:"1153825",description:"",solution:"",updateTime:1527601747e3},{moduleCode:"",detailCode:"328002",description:"",solution:"",updateTime:1527495292e3},{moduleCode:"",detailCode:"1152679",description:"",solution:"",updateTime:1527486665e3},{moduleCode:"",detailCode:"380356",description:"",solution:"",updateTime:1527125669e3},{moduleCode:"",detailCode:"328032",description:"",solution:"",updateTime:1527069382e3},{moduleCode:"",detailCode:"22",description:"",solution:"",updateTime:1527049826e3},{moduleCode:"",detailCode:"9",description:"",solution:"",updateTime:1527006778e3},{moduleCode:"",detailCode:"89",description:"",solution:"",updateTime:1526622784e3},{moduleCode:"",detailCode:"328016",description:"",solution:"",updateTime:1526452365e3},{moduleCode:"",detailCode:"368005",description:"",solution:"",updateTime:1525921264e3},{moduleCode:"",detailCode:"0",description:"",solution:"",updateTime:1525920242e3},{moduleCode:"",detailCode:"380006",description:"",solution:"",updateTime:1525918868e3},{moduleCode:"",detailCode:"310",description:"",solution:"",updateTime:1525834436e3},{moduleCode:"",detailCode:"360011",description:"",solution:"",updateTime:1525681552e3},{moduleCode:"",detailCode:"170005",description:"",solution:"",updateTime:15254339e5},{moduleCode:"",detailCode:"50023",description:"",solution:"",updateTime:1525403338e3},{moduleCode:"",detailCode:"100131",description:"",solution:"",updateTime:1525229691e3},{moduleCode:"",detailCode:"-1018",description:"",solution:"",updateTime:1525142341e3},{moduleCode:"",detailCode:"362026",description:"",solution:"",updateTime:1524882677e3},{moduleCode:"",detailCode:"368007",description:"",solution:"",updateTime:1524832269e3},{moduleCode:"",detailCode:"54",description:"",solution:"",updateTime:1524793646e3},{moduleCode:"",detailCode:"1154722",description:"",solution:"",updateTime:1524620807e3},{moduleCode:"",detailCode:"320229",description:"",solution:"",updateTime:1524551682e3},{moduleCode:"",detailCode:"360012",description:"",solution:"",updateTime:1524472094e3},{moduleCode:"",detailCode:"380229",description:"",solution:"",updateTime:1524110755e3},{moduleCode:"",detailCode:"360016",description:"",solution:"",updateTime:1523933518e3},{moduleCode:"",detailCode:"-1003",description:"",solution:"",updateTime:1523584804e3},{moduleCode:"",detailCode:"410026",description:"",solution:"",updateTime:152351743e4},{moduleCode:"",detailCode:"360102",description:"TTS初始化失败",solution:"",updateTime:1523503528e3},{moduleCode:"",detailCode:"360013",description:"设备开启了隐私保护",solution:"",updateTime:1523503507e3},{moduleCode:"",detailCode:"360010",description:"设备正在对讲中",solution:"",updateTime:1523503491e3},{moduleCode:"",detailCode:"360007",description:"TTS关闭了与客户端的连接",solution:"",updateTime:1523503475e3},{moduleCode:"",detailCode:"360006",description:"客户端接收发生错误",solution:"",updateTime:1523503457e3},{moduleCode:"",detailCode:"360005",description:"客户端发送的消息错误",solution:"",updateTime:1523503437e3},{moduleCode:"",detailCode:"360004",description:"TTS内部发生错误",solution:"",updateTime:1523503421e3},{moduleCode:"",detailCode:"360003",description:"TTS的设备端发生错误",solution:"",updateTime:1523503397e3},{moduleCode:"",detailCode:"360002",description:"对讲发起超时",solution:"",updateTime:1523503376e3},{moduleCode:"",detailCode:"360001",description:"客户端请求超时",solution:"",updateTime:1523503357e3},{moduleCode:"",detailCode:"320077",description:"",solution:"",updateTime:1523444274e3},{moduleCode:"",detailCode:"370047",description:"",solution:"",updateTime:152344048e4},{moduleCode:"",detailCode:"100002",description:"",solution:"",updateTime:1523413964e3},{moduleCode:"",detailCode:"-1004",description:"",solution:"",updateTime:1523336653e3},{moduleCode:"",detailCode:"380000",description:"",solution:"",updateTime:1523180856e3},{moduleCode:"",detailCode:"380213",description:"",solution:"",updateTime:1523180623e3},{moduleCode:"",detailCode:"380101",description:"",solution:"",updateTime:1522834231e3},{moduleCode:"",detailCode:"50047",description:"",solution:"",updateTime:1522833243e3},{moduleCode:"",detailCode:"-999",description:"",solution:"",updateTime:1522831034e3},{moduleCode:"",detailCode:"320418",description:"",solution:"",updateTime:1522829072e3},{moduleCode:"",detailCode:"-1009",description:"",solution:"",updateTime:1522746247e3},{moduleCode:"",detailCode:"320209",description:"",solution:"",updateTime:1522744395e3},{moduleCode:"",detailCode:"368006",description:"",solution:"",updateTime:15227443e5},{moduleCode:"",detailCode:"369003",description:"",solution:"",updateTime:1522736355e3},{moduleCode:"",detailCode:"405989",description:"",solution:"",updateTime:1522726571e3},{moduleCode:"",detailCode:"-1012",description:"",solution:"",updateTime:1522726203e3},{moduleCode:"",detailCode:"322016",description:"",solution:"",updateTime:1522722918e3},{moduleCode:"",detailCode:"500103",description:"",solution:"",updateTime:1522655556e3},{moduleCode:"",detailCode:"405999",description:"",solution:"",updateTime:1522654716e3},{moduleCode:"",detailCode:"321032",description:"",solution:"",updateTime:1522647732e3},{moduleCode:"",detailCode:"381101",description:"",solution:"",updateTime:1522392414e3},{moduleCode:"",detailCode:"399999",description:"",solution:"",updateTime:1522379834e3},{moduleCode:"",detailCode:"380103",description:"",solution:"",updateTime:1522312724e3},{moduleCode:"",detailCode:"360014",description:"",solution:"",updateTime:1522304341e3},{moduleCode:"",detailCode:"-1005",description:"",solution:"",updateTime:1522288195e3},{moduleCode:"",detailCode:"100005",description:"",solution:"",updateTime:1522218849e3},{moduleCode:"",detailCode:"100004",description:"",solution:"",updateTime:1522209053e3},{moduleCode:"",detailCode:"106002",description:"",solution:"",updateTime:15222062e5},{moduleCode:"",detailCode:"410030",description:"",solution:"",updateTime:1522162252e3},{moduleCode:"",detailCode:"-1002",description:"",solution:"",updateTime:152215069e4},{moduleCode:"",detailCode:"-1200",description:"",solution:"",updateTime:1522139025e3},{moduleCode:"",detailCode:"-1001",description:"",solution:"",updateTime:1522046436e3},{moduleCode:"",detailCode:"-1011",description:"",solution:"",updateTime:1522045931e3},{moduleCode:"",detailCode:"381102",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"381103",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"391205",description:"vtdu解析服务器ip失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391206",description:"vtdu描述符select失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391207",description:"vtdu文件描述符不在可读中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391208",description:"vtdu网络发生错误getsockopt",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391209",description:"vtdu描述符select超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395000",description:"cas回复信令，发现内存已经释放（和设备之间异常断开）",msg:"播放失败请重试",solution:"检查设备网络；刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395400",description:"私有化协议vtm检测私有化协议中码流类型小于0或者设备序列号为空等非法参数场景返回(app不重试取流)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395402",description:"回放找不到录像文件",msg:"回放找不到录像文件，本地存储请检查存储卡是否接触良好",solution:"检查是否有存储卡并且接触良好",updateTime:1522034841e3},{moduleCode:"",detailCode:"395403",description:"操作码或信令密钥与设备不匹配",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395404",description:"设备不在线",solution:"检查设备网络；重启设备接入萤石云",msg:"设备不在线，请检查设备网络或重启设备接入萤石云",updateTime:1522034841e3},{moduleCode:"",detailCode:"395405",description:"流媒体向设备发送或接受信令超时/cas响应超时",msg:"播放失败，请检查设备网络或重启设备",solution:"检查设备网络；重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395406",description:"token失效",msg:"播放失败请重试或重启设备",solution:"刷新重试或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395407",description:"客户端的URL格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395409",description:"预览开启隐私保护",msg:"播放失败请关闭隐私遮蔽",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395410",description:"设备达到最大连接数",solution:"请升级设备固件版本",updateTime:1522034841e3},{moduleCode:"",detailCode:"395411",description:"token无权限",msg:"播放失败",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395412",description:"session不存在",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395413",description:"验证token的他异常（不具体） ",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395415",description:"设备通道错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395416",description:"设备资源受限",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395451",description:"设备不支持的码流类型",msg:"播放失败请重试或切换设备码流",solution:"刷新重试或者切换到高清模式",updateTime:1522034841e3},{moduleCode:"",detailCode:"395452",description:"设备链接流媒体服务器失败",msg:"播放失败，请检查设备网络或重启设备或重新加载",solution:"检查设备网络，重启设备，刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395454",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395455",description:"设备通道未关联",msg:"播放失败，请检查设备通道是否关联",solution:"检查设备通道是否关联",updateTime:152222018e4},{moduleCode:"",detailCode:"395456",description:"设备通道关联设备不在线",msg:"播放失败，请检查设备通道是否上线",solution:"检查设备通道是否上线",updateTime:152222018e4},{moduleCode:"",detailCode:"395457",description:"客户端不支持端到端加密",msg:"播放失败",solution:"客户端不支持端到端加密",updateTime:152222018e4},{moduleCode:"",detailCode:"395458",description:"设备不支持当前并发ECDH密",msg:"客户端不支持端到端加密",solution:"设备不支持当前并发ECDH密",updateTime:152222018e4},{moduleCode:"",detailCode:"395459",description:"VTDU 处理ECDH 加密失败",msg:"播放失败",solution:"VTDU 处理ECDH 加密失败",updateTime:152222018e4},{moduleCode:"",detailCode:"395460",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395492",description:"设备不支持的命令",msg:"操作失败，设备不支持",solution:"",updateTime:152222018e4},{moduleCode:"",detailCode:"395500",description:"服务器处理失败",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395501",description:"流媒体vtdu达到最大负载，请扩容",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395503",description:"vtm返回分配vtdu失败",msg:"播放失败请重试",solution:"vtdu服务异常，请请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395504",description:"流媒体vtdu达到最大负载",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395505",description:"vtm ecdh解密失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395506",description:"vtm 返回IPC不支持取流（需要IPC添加NVR后支持）",msg:"播放失败，请绑定NVR使用",solution:"IPC绑定NVR使用",updateTime:1522034841e3},{moduleCode:"",detailCode:"395544",description:"设备返回无视频源",msg:"播放失败，请检查设备接触情况",solution:"设备是否接触良好； 如果一直无法解决，请联系技术支持",updateTime:1522034841e3},{moduleCode:"",detailCode:"395545",description:"视频分享时间已经结束",msg:"视频分享时间已结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395546",description:"vtdu返回达到取流并发路数限制",msg:"并发上限，请升级为企业版",solution:"请升级为企业版，放开并发限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395547",description:"vtdu返回开放平台用户并发限制",msg:"并发上限，请升级为企业版",solution:"请确定开放平台用户预览是否超过用户并发数量限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395556",description:"ticket校验失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395557",description:"回放服务器等待流头超时",msg:"播放失败请重试",solution:"刷新重试，检测设备网络，重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395558",description:"查找录像开始时间错误",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395560",description:"群组分享取流二次验证失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395561",description:"分享群组用户被锁住",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395562",description:"群组分享用户权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395563",description:"认证服务连接失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395564",description:"认证超时",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395566",description:"不在分享时间内预览",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395567",description:"分享通道被锁定",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395568",description:"未找到认证类型",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395569",description:"认证返回的参数异常",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395600",description:"分享设备不在分享时间内",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395601",description:"群组分享用户没权限",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395602",description:"群组分享权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395610",description:"接收流头失败",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395620",description:"心跳超时",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395530",description:"机房故障不可用",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395701",description:"cas信令返回格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395702",description:"SPGW请求Cas、Status透传超时",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395703",description:"SPGW请求http不通",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396001",description:"客户端参数出错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396099",description:"客户端默认错误",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396101",description:"不支持的命令",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396102",description:"设备流头发送失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396103",description:"cas/设备返回错误1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396104",description:"cas/设备返回错误-1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396105",description:"设备返回错误码3",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396106",description:"设备返回错误码4",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396107",description:"设备返回错误码5",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396108",description:"cas信令回应重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396109",description:"视频广场取消分享",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396110",description:"设备信令默认错误",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396501",description:"设备数据链路和实际链路不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396502",description:"设备数据链路重复建立连接",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396503",description:"设备数据链路端口不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396504",description:"缓存设备数据链路失败(内存块不足)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396505",description:"设备发送确认头消息重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396506",description:"设备数据先于确定头部到达",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396508",description:"设备数据头部长度非法",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396509",description:"索引找不到设备数据管理块",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396510",description:"设备数据链路vtdu内存块协议状态不匹配",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396511",description:"设备数据头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396512",description:"设备数据头部非法(较笼统)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396513",description:"设备数据长度过小",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396514",description:"设备老协议推流头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396515",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396516",description:"设备老协议索引找不到内存管理块",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396517",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396518",description:"设备数据包过大",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396519",description:"设备推流链路网络不稳定",msg:"播放失败，请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396520",description:"设备推流链路网络不稳定(默认)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396700",description:"异常数据包",msg:"播放失败，设备重启",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396701",description:"回放结束数据包",msg:"回放结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397001",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397002",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397003",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397004",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397005",description:"VTDU连接失败，或VTDU侧断开连接",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397006",description:"vtm断开连接（无需 关注）",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397007",description:"客户端发送缓冲区满（上行带宽太小）",msg:"播放失败，上行带宽过小请检查设备网络情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399000",description:"无效包，包过大",msg:" 检查设备重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399001",description:"地址不合法",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399002",description:"缺少端口",msg:" 播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"170003",description:"refreshToken不存在",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"170004",description:"refreshToken已过期",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"380011",description:"设备隐私保护中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380045",description:"设备直连取流连接数量过大",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380047",description:"设备不支持该命令",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380077",description:"设备正在对讲中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380102",description:"数据接收异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380205",description:"设备检测入参异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380209",description:"网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380212",description:"设备端网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"101007",description:"手机号未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120503",description:"正在响铃",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390016",description:"vtdu成功响应未携带流头",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101008",description:"手机号码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120504",description:"室内机正在通话",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390017",description:"无数据流，尚未使用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101009",description:"用户名与手机不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120505",description:"设备操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390018",description:"信令消息体PB解析失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101010",description:"获取验证码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120506",description:"非法命令",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390019",description:"信令消息体PB封装失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101011",description:"验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120507",description:"智能锁密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390020",description:"申请系统内存资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101012",description:"验证码失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120508",description:"开关锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390021",description:"vtdu地址尚未获取到",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101013",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120509",description:"开关锁超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390022",description:"客户端尚未支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101014",description:"密码不正确或者appKey不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120510",description:"智能锁设备繁忙",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390023",description:"获取系统socket资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101015",description:"用户被锁住",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120511",description:"远程开锁功能未打开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390024",description:"上层填充的StreamSsnId不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101021",description:"验证参数异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120600",description:"临时密码数已达上限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390025",description:"链接服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101026",description:"邮箱已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120601",description:"添加临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390026",description:"客户端请求未收到服务端应答",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101031",description:"邮箱未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120602",description:"删除临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390027",description:"链路断开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101032",description:"邮箱不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120603",description:"该临时密码不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390028",description:"没有取流链接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101041",description:"获取验证码过于频繁",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120604",description:"指纹锁射频通信失败,请稍后再试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390029",description:"流成功停止",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101043",description:"手机验证码输入错误超过规定次数",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120605",description:"其他用户正在认证中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390030",description:"客户端防串流校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102000",description:"设备不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120606",description:"验证已启动,请在120s内进行本地验证和调用添加设备接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390031",description:"应用层tcp粘包处理缓冲区满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102001",description:"摄像机不存在",solution:"摄像机未注册到萤石云平台，请仔细检查摄像机的网络配置，确保连接到网络",updateTime:152203484e4},{moduleCode:"",detailCode:"120607",description:"删除用户失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390032",description:"无效状态迁移",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102003",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"120608",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390033",description:"无效客户端状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102004",description:"设备异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390034",description:"向vtm取流流媒体信息请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102007",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120610",description:"获取临时密码列表失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390035",description:"向代理取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102009",description:"设备请求响应超时异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130001",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390036",description:"向代理保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105000",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130002",description:"手机号码已经注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390037",description:"向vtdu取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105001",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130003",description:"手机验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390038",description:"向vtdu保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105002",description:"设备验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130004",description:"终端绑定操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391001",description:"vtm地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107001",description:"邀请不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"149999",description:"数据异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391002",description:"vtm生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107002",description:"邀请验证失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"150000",description:"服务器异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391003",description:"vtm设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107003",description:"邀请用户不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160000",description:"设备不支持云台控制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391004",description:"vtm设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107004",description:"云存储连接失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160001",description:"用户无云台控制权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391005",description:"vtm解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"7005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160002",description:"设备云台旋转达到上限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391006",description:"vtm描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107006",description:"不能邀请自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160003",description:"设备云台旋转达到下限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391007",description:"vtm文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107007",description:"重复邀请",solution:"分享和删除分享必须全部由接口形式操作，如果与萤石客户端混用会造成这个问题，解决办法：在萤石客户端清空所有相关分享数据并重新添加设备，再通过接口操作即可",updateTime:152203484e4},{moduleCode:"",detailCode:"160004",description:"设备云台旋转达到左限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391008",description:"vtm网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110001",description:"参数错误",solution:"参数为空或者格式不对",updateTime:152203484e4},{moduleCode:"",detailCode:"160005",description:"设备云台旋转达到右限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391009",description:"vtm描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110002",description:"accessToken异常或过期",solution:"accessToken有效期为七天，建议在accessToken即将过期或者出现10002错误码的时候重新获取accessToken",updateTime:152203484e4},{moduleCode:"",detailCode:"160006",description:"云台当前操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391101",description:"proxy地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110004",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160007",description:"预置点个数超过最大值",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391102",description:"proxy生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110005",description:"appKey异常",solution:"确认appKey状态，不通过或者冻结状态会返回该错误码",updateTime:152203484e4},{moduleCode:"",detailCode:"160009",description:"正在调用预置点",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391103",description:"proxy设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110006",description:"ip受限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160010",description:"该预置点已经是当前位置",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391104",description:"proxy设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160011",description:"预置点不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391105",description:"proxy解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110008",description:"签名错误",solution:"①获取签名方式详见apidemo及[旧]API文档 ②注意编码格式为UTF-8",updateTime:152203484e4},{moduleCode:"",detailCode:"160013",description:"设备版本已是最新",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391106",description:"proxy描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110009",description:"签名参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160014",description:"设备正在升级",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391107",description:"proxy文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110010",description:"签名超时",solution:"请调用同步服务器时间接口进行校时",updateTime:152203484e4},{moduleCode:"",detailCode:"160015",description:"设备正在重启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391108",description:"proxy网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110011",description:"未开通萤石云服务",solution:"参照绑定流程",updateTime:152203484e4},{moduleCode:"",detailCode:"160016",description:"加密未开启，无须关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391109",description:"proxy描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110012",description:"第三方账户与萤石账号已经绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160017",description:"设备抓图失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391201",description:"vtdu地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110013",description:"应用没有权限调用此接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160018",description:"设备升级失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391202",description:"vtdu生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110014",description:"APPKEY下对应的第三方userId和phone未绑定",solution:"获取AccessToken时所用appKey与SDK所用appKey不一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160019",description:"加密已开启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391203",description:"vtdu设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110017",description:"appKey不存在",solution:"请填写在官网申请的应用秘钥",updateTime:152203484e4},{moduleCode:"",detailCode:"160020",description:"不支持该命令",solution:"请确认设备是否支持该命令",updateTime:152203484e4},{moduleCode:"",detailCode:"391204",description:"vtdu设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110018",description:"AccessToken与Appkey不匹配",solution:"请检查获取accessToken对应的appKey和SDK中设置的appKey是否一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160023",description:"订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110019",description:"密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160024",description:"取消订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110020",description:"请求方法为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160025",description:"客流统计配置失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110021",description:"ticket校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110022",description:"透传目的地非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160027",description:"设备正在镜像操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110024",description:"无透传权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160028",description:"设备正在键控动作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110025",description:"appKey被禁止使用通明通道",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160029",description:"设备处于语音对讲状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160030",description:"卡密输入错误次数过多，24小时后再输入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160031",description:"卡密信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160032",description:"卡密状态不对或已过期",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160033",description:"卡密非卖品，只能开通对应的绑定设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110030",description:"appKey和appSecret不匹配",solution:"请检查appKey和appSecret是否对应",updateTime:152203484e4},{moduleCode:"",detailCode:"160035",description:"购买云存储服务失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110031",description:"子账户或萤石用户没有权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160040",description:"添加的设备不在同一局域网",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110032",description:"子账户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110033",description:"子账户未设置授权策略",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160042",description:"添加的设备密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110034",description:"子账户已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160043",description:"添加的设备超出最大数量",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110035",description:"获取子账户AccessToken异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160044",description:"添加的设备网络不可达超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110036",description:"子账户被禁用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110051",description:"无权限进行抓图",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160047",description:"码流类型不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120002",description:"设备不存在",solution:"①设备没有注册到萤石云平台，请检查下设备网络参数，确保能正常连接网络②设备序列号不存在",updateTime:152203484e4},{moduleCode:"",detailCode:"160048",description:"带宽超出系统接入带宽",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120003",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160049",description:"IP或者端口不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120004",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160050",description:"添加的设备版本不支持需要升级才能接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120005",description:"安全认证失败，需进行SDK安全认证",solution:"已去掉安全验证",updateTime:152203484e4},{moduleCode:"",detailCode:"160051",description:"添加的设备不支持接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120006",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160052",description:"添加的设备通道号出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120007",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"160053",description:"添加的设备分辨率不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120008",description:"设备响应超时",solution:"设备响应超时，请检测设备网络或重试",updateTime:152203484e4},{moduleCode:"",detailCode:"160054",description:"添加的设备账号被锁定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120009",description:"子账号不能添加设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160055",description:"添加的设备取码流出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120010",description:"设备验证码错误",solution:"验证码在设备标签上，六位大写字母，注意大小写",updateTime:152203484e4},{moduleCode:"",detailCode:"160056",description:"删除设备失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120012",description:"设备添加失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160057",description:"删除的设备未关联",solution:"检查IPC与NVR是否有关联关系",updateTime:152203484e4},{moduleCode:"",detailCode:"120013",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160060",description:"地址未绑定",solution:"请前往官网设置直播",updateTime:152203484e4},{moduleCode:"",detailCode:"120014",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120015",description:"设备不支持该功能",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160062",description:"该通道直播已开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120016",description:"当前设备正在格式化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160063",description:"直播未使用或直播已关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120017",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160070",description:"设备不能转移给自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120018",description:"该用户不拥有该设备",solution:"确认设备是否属于用户",updateTime:152203484e4},{moduleCode:"",detailCode:"160071",description:"设备不能转移，设备与其他设备存在关联关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400001",description:"参数为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120019",description:"设备不支持云存储服务",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160072",description:"设备不能转移，通道被分享给其他用户或者分享到视频广场",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400002",description:"参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120020",description:"设备在线，被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160073",description:"云存储转移失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400025",description:"设备不支持对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120021",description:"设备在线，但是未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160080",description:"当前正在声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400029",description:"没有初始化或资源被释放",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120022",description:"设备在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160081",description:"当前正在轨迹巡航",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400030",description:"json解析异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120023",description:"设备不在线，未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160082",description:"设备正在响应本次声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400031",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120024",description:"设备不在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160083",description:"当前正在开启隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400032",description:"设备信息异常为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120025",description:"重复申请分享",solution:"确认设备是否由添加过该设备且申请过分享的账户下是否还存在分享记录",updateTime:152203484e4},{moduleCode:"",detailCode:"160084",description:"当前正在关闭隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400034",description:"取流超时",solution:"一般是由于网络状况不好导致，可以尝试下让用户重新播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120026",description:"视频广场不存在该视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"380290",description:"　连接CAS服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400035",description:"设备已加密，需要输入验证码",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120027",description:"视频转码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361001",description:"对讲服务端排队超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400036",description:"播放验证码错误",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120028",description:"设备固件升级包不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361002",description:"对讲服务端处理超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400037",description:"surfacehold错误",solution:"请检查是否是播放之前销毁了surface，收到此错误也可以重新建立surface后播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120029",description:"设备不在线，但是已经被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361003",description:"设备链接对讲服务器超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400100",description:"未知错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120030",description:"该用户不拥有该视频广场视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361004",description:"服务器内部错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400200",description:"player sdk出错，这种错误一般开发者也是无法解决，不具体分类传出，传一个统一的inner错误码出去",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120031",description:"开启终端绑定，硬件特征码验证失败",solution:"请在萤石客户端关闭终端绑定，参考此步骤",updateTime:152203484e4},{moduleCode:"",detailCode:"361005",description:"解析消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400300",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120032",description:"该用户下通道不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361006",description:"请求重定向--需要向其他服务申请对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400901",description:"设备不在线，可以提示用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120033",description:"无法收藏自己分享的视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361007",description:"请求url非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400902",description:"accesstoken异常或失效，需要重新获取accesstoken，并传入到sdk",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120034",description:"该用户下无设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361008",description:"token失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400903",description:"当前账号开启了终端绑定，只允许指定设备登录操作，提示用户登录i.ys7.com解除终端绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120090",description:"用户反馈失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361009",description:"设备验证码或者通信秘钥不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400904",description:"设备正在对讲中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120095",description:"APP包下载失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361010",description:"设备已经在对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400905",description:"设备开启了隐私保护，不允许预览、对讲等",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120096",description:"APP包信息删除失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361011",description:"设备10s响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120101",description:"视频不支持分享给本人",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361012",description:"设备不在线",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320002",description:"参数无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120102",description:"无相应邀请信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361013",description:"设备开启隐私保护拒绝对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320003",description:"暂不支持此操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120103",description:"好友已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361014",description:"token无权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320004",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120104",description:"好友不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361015",description:"设备返回session不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320005",description:"创建CAS session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120105",description:"好友状态错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361016",description:"验证token其他异常错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320006",description:"创建cloud session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120106",description:"对应群组不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361017",description:"服务端监听设备建立端口超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320007",description:"token失效",solution:"重新设置token后再重试",updateTime:152203484e4},{moduleCode:"",detailCode:"120107",description:"不能添加自己为好友",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361018",description:"设备链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320008",description:"token池里面没有token,请传入token",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361019",description:"对讲服务端不支持的信令消息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320009",description:"传入新的INIT_PARAM并reset(保留，目前未用)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120109",description:"对应分享不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361020",description:"对讲服务端解析对讲请求未携带会话描述能力集",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320010",description:"请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120110",description:"好友群组不属于当前用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361021",description:"对讲服务端优先能力集结果为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320011",description:"500毫秒后请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120111",description:"好友不是等待验证状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361022",description:"cas链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320012",description:"token池已满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120112",description:"添加应用下的用户为好友失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361023",description:"对讲服务端分配对讲会话资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320013",description:"P2P client超过限制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120201",description:"操作报警信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361024",description:"对讲服务端解析信令消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320014",description:"sdk未初始化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120202",description:"操作留言信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390001",description:"通用错误返回",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320015",description:"超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120301",description:"根据UUID查询报警消息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390002",description:"入参为空指针",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320016",description:"正在打洞中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120302",description:"根据UUID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390003",description:"入参值无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320017",description:"没有视频文件头(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120303",description:"根据FID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390004",description:"信令消息解析非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320018",description:"解码错误/超时(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120305",description:"设备ip解析错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390005",description:"内存资源不足",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320019",description:"取消(保留，用户不用处理)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120401",description:"用户云空间信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390006",description:"协议格式不对或者消息体长度超过STREAM_MAX_MSGBODY_LEN",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320020",description:"播放过程中预连接被用户清除预操作信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120402",description:"云空间操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390007",description:"设备序列号长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320021",description:"流加密码不对",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120403",description:"用户目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390008",description:"取流url长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320022",description:"未传入播放窗口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120404",description:"要操作的目标目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390009",description:"解析vtm返回vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"100200",description:"操作成功",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120405",description:"要删除的文件信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390010",description:"解析vtm返回级联vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101001",description:"用户名不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120406",description:"已开通云存储",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390011",description:"解析vtm返回会话标识长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101002",description:"用户名已被占用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120407",description:"开通记录失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390012",description:"vtdu返回流头长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101003",description:"密码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120500",description:"获取数据错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390013",description:"vtdu会话长度非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101004",description:"密码为同一字符",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120501",description:"开锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390014",description:"回调函数未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101006",description:"手机号码已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120502",description:"室内机未收到呼叫",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390015",description:"vtdu成功响应未携带会话标识",solution:"",updateTime:152203484e4}],X="200",J="操作成功!",q={data:Z,code:X,msg:J},K=function(){function e(t,i){r(this,e),this.coreX=t,this.coreY=i,console.log("ErrorCode",q)}return l(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchErrorInfo",value:function(e){return q.data.find((function(t){return t.detailCode.substr(-4)==e}))}}]),e}(),Q={color:"red",backgroundColor:"red",activeColor:"red",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-0",iconId:"deviceID",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"},{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-1",iconId:"deviceName",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]},ee={color:"blue",backgroundColor:"blue",activeColor:"blue",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-footer-0",iconId:"play",part:"left",defaultActive:0,isrender:0,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]},te={header:Q,footer:ee},ie=function e(t){this.jsPlugin=t;var i={isMouseDown:!1,isOver:!1,mousePosition:null,oldTime:null,nowTime:null,moved:null,hoverTime:"2018-12-07 12:00:00",hoverLeft:0,timeTipShow:!1,randomNum:123,timeWidthTbls:[60,1800,3600,86400],timeUnits:["范围: 1分钟; 单位: 秒","范围: 30分钟; 单位: 分钟","范围: 1小时; 单位: 分钟","范围: 1天; 单位: 小时","范围: 3天; 单位: 小时"],drawPen:null,timeSection:[],canvasWidth:null,canvasHeight:null,timeTips:null},n=this;Object.keys(i).forEach((function(e){n[e]=i[e]})),this.options={width:this.canvasWidth,height:48,time:(new Date).getTime(),timeSection:[],timeWidth:0},e.prototype.subTime=function(e){return e<10?"0"+e:e},e.prototype.tranTime=function(e){var t=e;if(e){var i=new Date(e);t=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" "+this.subTime(i.getHours())+":"+this.subTime(i.getMinutes())+":"+this.subTime(i.getSeconds())}return t},e.prototype.init=function(e){var t=this,i=this.options;return new Promise((function(n,a){e.width&&document.getElementById(e.id).setAttribute("width",parseInt(e.width,10)+"px"),t.randomNum=(Math.random()+"").split(".").join(""),t.timeWidthTblIndex=i.timeWidth;var o=document.querySelector("#".concat(t.jsPlugin.id,"-canvas"));t.drawPen=o.getContext("2d"),t.nowTime=i.time||Date.now(),t.timeSection=i.timeSection||[],t.canvasWidth=o.offsetWidth,t.canvasHeight=o.offsetHeight,t.updata(),document.getElementById("".concat(t.jsPlugin.id,"-canvas")).addEventListener("mousemove",(function(e){t.options.readOnly||t.mousemove(e)})),document.getElementById("".concat(t.jsPlugin.id,"-canvas")).addEventListener("mouseover",(function(e){t.options.readOnly||t.mouseover(e)})),document.getElementById("".concat(t.jsPlugin.id,"-canvas")).addEventListener("mouseleave",(function(e){t.options.readOnly||t.mouseleave(e)})),document.getElementById("".concat(t.jsPlugin.id,"-canvas")).addEventListener("mousedown",(function(e){t.options.readOnly||t.mousedown(e)})),document.getElementById("".concat(t.jsPlugin.id,"-canvas")).addEventListener("mouseup",(function(i){if(!t.options.readOnly){var n=e.onChange;t.mouseUpFn(i,n)}})),n()}))},e.prototype.setWidth=function(e){var t=this,i=this;e.width&&(document.getElementById(this.jsPlugin.id).style.width=e.width,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.width=e.width,document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.width=e.width,i.canvasWidth=e.width,setTimeout((function(){t.updata({time:new Date})}),500))},e.prototype.mousemove=function(e){if(this.isMouseDown&&this.isOver){var t=this.mousePosition-e.pageX;if(0===t)return;var i=0;switch(this.timeWidth){case 60:i=.1;break;case 1800:i=3;break;case 3600:i=3;break;case 86400:i=120;break}var n=new Date(this.oldTime).getTime()+t*i*1e3;this.updata({time:n}),this.moved=!0}else{var a=parseInt(document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).offsetLeft,10);this.mousePosition=e.pageX-a,this.updata()}},e.prototype.mousedown=function(e){this.isMouseDown=!0,this.mousePosition=e.pageX,this.oldTime=this.nowTime},e.prototype.mouseover=function(e){this.isOver=!0},e.prototype.mouseleave=function(e){this.isOver=!1,this.isMouseDown=!1,this.updata()},e.prototype.changeSize=function(e){console.log("changeSize",e),this.options.timeWidth=e,this.updata({timeWidth:e})},e.prototype.mouseUpFn=function(e,t){if(this.isMouseDown&&(this.isMouseDown=!1,this.moved)){this.moved=!1;var i=this.subTime(new Date(this.nowTime).getHours())+":"+this.subTime(new Date(this.nowTime).getMinutes())+":"+this.subTime(new Date(this.nowTime).getSeconds()),n=new Date(this.oldTime).getFullYear()+"/"+(new Date(this.oldTime).getMonth()+1)+"/"+new Date(this.oldTime).getDate();this.nowTime=new Date("".concat(n," ").concat(i)),this.updata({time:this.nowTime}),this.oldTime=this.nowTime,console.log("nowTime",new Date(this.nowTime),"".concat(n," ").concat(i)),t(this.nowTime)}},e.prototype.readOnly=function(e){console.log("更改为只读"),this.options.readOnly=!0,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="not-allowed"},e.prototype.unReadOnly=function(e){console.log("更改为只读"),this.options.readOnly=!1,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="pointer"},e.prototype.run=function(e){this.isMouseDown||this.updata(e)},e.prototype.getTime=function(e){console.log("this",this),console.log("当前时间",new Date(this.nowTime))},e.prototype.updata=function(e){var t=this;e=e||{},t.nowTime=e.time||t.nowTime,t.timeSection=e.timeSection||t.timeSection,t.timeWidthTblIndex=e.timeWidth||t.timeWidthTblIndex,t.timeWidth=t.timeWidthTbls[e.timeWidth||t.timeWidthTblIndex],t.timeUnit=t.timeUnits[e.timeWidth||t.timeWidthTblIndex],0===e.timeWidth&&(t.timeWidthTblIndex=0,t.timeWidth=t.timeWidthTbls[0],t.timeUnit=t.timeUnits[0]),t.drawPen.fillStyle="#000000",t.drawPen.fillRect(0,0,t.canvasWidth,t.canvasHeight),t.drawScale(),t.drawRecord(),t.drawOtherMsg(),document.getElementById("".concat(this.jsPlugin.id,"-canvas-container"))&&(document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.width=t.options.width+"px",document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.height=t.options.height+"px"),document.getElementById("".concat(this.jsPlugin.id,"-canvas"))&&(document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.width=t.options.width+"px",document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.height=t.options.height+"px")},e.prototype.drawSolidLine=function(e,t,i,n,a,o){this.drawPen.save(),this.drawPen.strokeStyle=o,this.drawPen.lineWidth=a,this.drawPen.beginPath(),this.drawPen.moveTo(e,t),this.drawPen.lineTo(i,n),this.drawPen.stroke(),this.drawPen.restore()},e.prototype.drawString=function(e,t,i,n,a){this.drawPen.font="12px serif",this.drawPen.fillStyle="#ffffff",this.drawPen.textAlign=n||"left",this.drawPen.fillText(e,t,i+10)},e.prototype.drawScale=function(){var e=this,t="rgba(255,255,255)",i=new Date(e.nowTime),n=i.getFullYear(),a=i.getSeconds(),o=i.getMinutes(),r=i.getHours(),s=i.getDate(),l=0;switch(e.timeWidth){case 60:var d=parseInt(e.canvasWidth/10);i.setSeconds(i.getSeconds()-parseInt(d/2,10)),s=i.getDate(),r=i.getHours(),o=i.getMinutes(),a=i.getSeconds();for(var c=0;c<d;c++){if(l=a+c,i.setSeconds(l),l%10===0){e.drawSolidLine(c*e.canvasWidth/d,8,c*e.canvasWidth/d,e.canvasHeight/5+8,1,t);var u=this.subTime(i.getHours())+":"+this.subTime(i.getMinutes())+":"+this.subTime(i.getSeconds());e.drawString(u,c*e.canvasWidth/d,e.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(c*e.canvasWidth/d,8,c*e.canvasWidth/d,e.canvasHeight/5*.5+8,1,t);i.setDate(s),i.setHours(r),i.setMinutes(o)}break;case 1800:d=parseInt(e.canvasWidth/20);i.setMinutes(i.getMinutes()-parseInt(d/2,10)),r=i.getHours(),o=i.getMinutes();for(c=0;c<=d;c++){if(l=o+c,i.setMinutes(l),l%5===0){e.drawSolidLine(c*e.canvasWidth/d,8,c*e.canvasWidth/d,e.canvasHeight/5*1.5+8,1,t);u=this.subTime(i.getHours())+":"+this.subTime(i.getMinutes());e.drawString(u,c*e.canvasWidth/d,e.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(c*e.canvasWidth/d,8,c*e.canvasWidth/d,e.canvasHeight/5*.5+8,1,t);i.setHours(r)}break;case 3600:d=parseInt(e.canvasWidth/20);i.setMinutes(i.getMinutes()-parseInt(d/2,10)),r=i.getHours(),o=i.getMinutes();for(c=0;c<=d;c++){if(l=o+c,i.setMinutes(l),l%10===0){e.drawSolidLine(c*e.canvasWidth/d,8,c*e.canvasWidth/d,e.canvasHeight/5*1.5+8,1,t);u=this.subTime(i.getHours())+":"+this.subTime(i.getMinutes());e.drawString(u,c*e.canvasWidth/d,e.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(c*e.canvasWidth/d,8,c*e.canvasWidth/d,e.canvasHeight/5*.5+8,1,t);i.setHours(r)}break;case 86400:d=parseInt(e.canvasWidth/30);i.setHours(i.getHours()-parseInt(d/2,10)),a=i.getSeconds(),o=i.getMinutes(),r=i.getHours(),s=i.getDate(),n=i.getFullYear();for(c=0;c<=d;c++){l=r+c,i.setHours(l),u=this.subTime(i.getHours())+":00",e.drawSolidLine(c*e.canvasWidth/d,8,c*e.canvasWidth/d,e.canvasHeight/5*.5+8,1,t),l%2===0&&e.drawString(u,c*e.canvasWidth/d,e.canvasHeight/5*2,"center","rgba(255,255,255,0.3)"),i.setFullYear(n),i.setDate(s),i.setHours(r)}break}},e.prototype.getRecord=function(e,t,i){this.timeSection=e,this.drawRecord()},e.prototype.drawRecord=function(){for(var e=this.timeSection||[],t=this,i=t.drawPen,n=0;n<e.length;n++){var a=r(e[n].startTime),o=r(e[n].endTime);i.fillStyle="#1890ff80",i.fillRect(a,0,o-a,48)}function r(e){var i=10;switch(t.timeWidth){case 60:i=10;break;case 1800:i=20/60;break;case 3600:i=20/60;break;case 86400:i=20/60/60;break}var n=t.canvasWidth/2,a=n+(e-t.nowTime)/1e3*i;return a>t.canvasWidth&&(a=t.canvasWidth),a<=0&&(a=0),a}},e.prototype.drawOtherMsg=function(){this.drawSolidLine(this.canvasWidth/2,0,this.canvasWidth/2,this.canvasHeight,2,"#1890FF"),this.drawPen.shadowBlur=0,this.isOver&&!this.isMouseDown?(this.mouseTime=this.mousePosition/this.canvasWidth*this.timeWidth*1e3+this.nowTime-this.timeWidth/2*1e3,this.mouseString=this.tranTime(this.mouseTime),this.hoverTime=this.mouseString,this.hoverLeft=this.mousePosition-60,this.timeTipShow=!0):this.timeTipShow=!1}},ne=function(){function e(t){if(r(this,e),this.jSPlugin=t,!document.getElementById("".concat(this.jSPlugin.id,"-audioControls")))return!1;this.currentTimeWidth=0,this.date=new Date,this.datepickerVisible=!1,this.seekTimer=null,this.disabled=!1,this.isSeeking=!1,this.seekFrequency=2e3,this.recList=[],this.lastDate=null,this.jSPlugin.params&&this.jSPlugin.params.seekFrequency&&(this.seekFrequency=this.jSPlugin.params.seekFrequency),this.recInit()}return l(e,[{key:"recInit",value:function(){var e=this;if(!document.getElementById("".concat(this.jSPlugin.id,"-audioControls")))return!1;this.currentTimeWidth=0;var t=parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).width,10)-100,i=document.createElement("div");i.style="display:inline-block;height:48px;",i.id=this.jSPlugin.id+"-canvas-container";var n=document.createElement("canvas");n.id=this.jSPlugin.id+"-canvas",n.className="time-line-body",n.height="48",n.width=t,n.style="display:inline-block;",n.innerHTML="该浏览器不支持canvas",i.appendChild(n),T(i,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")));var a=document.createElement("div");a.className="timeline-controls",a.style="display:flex;width:100px;height:48px;text-align:center;line-height: 48px;vertical-align: top;background: #000000;";var o='\n<div class="timeline-controls-scale" style="display: inline-flex;flex-direction: column;justify-content: center;vertical-align: top;padding: 0 20px;">\n  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="'.concat(this.jSPlugin.id,'-timeline-scale-add">\n    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n      viewBox="0 0 20 20">\n      <title>add</title>\n      <g>\n        <polygon points="0.1,0.5 15,0.5 15,15.4 0.1,15.4 \t" />\n      </g>\n      <g>\n        <path\n          fill="#FFFFFF";\n          d="M7.6,12.4c-0.3,0-0.5-0.2-0.5-0.5v-8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v8C8.1,12.2,7.9,12.4,7.6,12.4z" />\n      </g>\n      <g>\n        <path\n          fill="#FFFFFF";\n          d="M11.6,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S11.8,8.4,11.6,8.4z" />\n      </g>\n    </svg>\n  </span>\n  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="').concat(this.jSPlugin.id,'-timeline-scale-sub">\n    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n      viewBox="0 0 20 20">\n      <title>reduce</title>\n      <g>\n        <polygon class="st0" points="1,0.8 15.2,0.8 15.2,15 1,15 \t" />\n      </g>\n      <g>\n        <path class="st1"\n          fill="#FFFFFF";\n          d="M12.1,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S12.4,8.4,12.1,8.4z" />\n      </g>\n    </svg>\n  </span>\n</div>\n<label for="').concat(this.jSPlugin.id,'-datepicker">\n  <div class="timeline-controls-date">\n    <span>\n      <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n        viewBox="0 0 20 20">\n        <title>ifttt</title>\n        <g id="Rectangle">\n          <rect x="0.6" y="0.9" class="st0" width="20" height="20" />\n        </g>\n        <g id="Stroke-1">\n          <path fill="#FFFFFF"; class="st1"\n            d="M14,7.2c-0.3,0-0.5-0.2-0.5-0.5V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C14.5,7,14.2,7.2,14,7.2z" />\n        </g>\n        <g id="Stroke-3">\n          <path fill="#FFFFFF"; class="st1"\n            d="M7.3,7.2C7,7.2,6.8,7,6.8,6.7V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C7.8,7,7.6,7.2,7.3,7.2z" />\n        </g>\n        <g id="Stroke-5">\n          <path fill="#FFFFFF"; class="st1"\n            d="M18.1,9.7h-15c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h15c0.3,0,0.5,0.2,0.5,0.5S18.4,9.7,18.1,9.7z" />\n        </g>\n        <g id="Stroke-7">\n          <path fill="#FFFFFF"; class="st1" d="M16.5,19.7H4.8c-1.2,0-2.2-1-2.2-2.2V6.7c0-1.2,1-2.2,2.2-2.2h11.7c1.2,0,2.2,1,2.2,2.2v10.8\nC18.6,18.8,17.7,19.7,16.5,19.7z M4.8,5.6c-0.6,0-1.2,0.5-1.2,1.2v10.8c0,0.6,0.5,1.2,1.2,1.2h11.7c0.6,0,1.2-0.5,1.2-1.2V6.7\nc0-0.6-0.5-1.2-1.2-1.2H4.8z" />\n        </g>\n        <g id="Stroke-9">\n          <path fill="#FFFFFF"; class="st1" d="M10.6,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5s0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nS11,13.3,10.6,13.3z" />\n        </g>\n        <g id="Stroke-11">\n          <path fill="#FFFFFF"; class="st1" d="M14.8,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2c0.4,0,0.7,0.3,0.7,0.7\nS15.2,13.3,14.8,13.3z M14.8,12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.3,0.4,0.5,0.2c0.1-0.1,0.1-0.1,0.1-0.2\nC15.1,12.4,15,12.3,14.8,12.3z" />\n        </g>\n        <g id="Stroke-13">\n          <path fill="#FFFFFF"; class="st1" d="M6.5,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nC7.2,16.3,6.9,16.6,6.5,16.6z" />\n        </g>\n        <g id="Stroke-15">\n          <path fill="#FFFFFF"; class="st1" d="M10.6,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nC11.4,16.3,11,16.6,10.6,16.6z" />\n        </g>\n      </svg>\n    </span>\n  </div>\n</label>\n<input autocomplete="off" data-toggle="').concat(this.jSPlugin.id,'-datepicker" id="').concat(this.jSPlugin.id,'-datepicker" name="').concat(this.jSPlugin.id,'-datepicker" style="opacity:0;width:24px;margin-left:-24px;cursor:pointer;" />\n');a.innerHTML=o,T(a,i),this.timeLine=new ie(this.jSPlugin);var r=this;this.timeLine.init({id:this.jSPlugin.id+"-canvas",width:t,onChange:function(t){console.log("time",t,new Date(t).Format("yyyyMMddhhmmss"));var i=new Date(t).Format("yyyyMMddhhmmss");if(console.log("----------------this.jSPlugin.url",e.jSPlugin.url),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState.state.recordvideo&&(e.jSPlugin.Theme.setDecoderState({recordvideo:!1}),"cloud.rec"===M(e.jSPlugin.url).type&&e.jSPlugin.stopSave()),"cloud.rec"===M(e.jSPlugin.url).type)e.isSeeking||r.recList.length>0&&(new Date(t).valueOf()>=r.lastDate?e.jSPlugin.pluginStatus.loadingSetText({text:"seek回放未找到录像片段",color:"red",delayClear:2e3}):e.unSyncTimeLine().then((function(){e.isSeeking=!0,e.jSPlugin.pluginStatus.loadingStart(e.jSPlugin.id),e.jSPlugin.pluginStatus.setPlayStatus({loading:!0}),e.jSPlugin.pluginStatus.loadingSetText({text:"seek回放中，请稍后..."}),e.jSPlugin.seek(i.substr(8,6),"235959").then((function(){var i=setInterval((function(){e.jSPlugin.getOSDTime().then((function(n){var a=new Date(t).valueOf()/1e3;console.log("seek时间同步:",n.data,a,n.data>=a),n.data>=a-2&&(e.isSeeking=!1,e.syncTimeLine(),clearInterval(i),e.jSPlugin.pluginStatus.loadingStop(e.jSPlugin.id),e.jSPlugin.pluginStatus.setPlayStatus({loading:!1}),e.jSPlugin.pluginStatus.loadingClear())}))}),1e3)}))})));else{var n=function(){setTimeout((function(){e.disabled=!1}),e.seekFrequency)},a=e.jSPlugin.Theme.decoderState.state.play,o=function(t){e.disabled=!0,a?e.unSyncTimeLine().then((function(){e.jSPlugin.pause(i).then((function(){console.log("暂停成功"),e.jSPlugin.resume(i).then((function(i){console.log("恢复成功：",i),e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState.state.sound&&e.jSPlugin.openSound(),t&&t(),e.syncTimeLine()}))["catch"]((function(e){console.log("恢复失败",e)}))}))["catch"]((function(){console.log("暂停失败"),e.jSPlugin.resume(i).then((function(i){console.log("恢复成功"),e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),t&&t(),e.syncTimeLine()}))["catch"]((function(e){console.log("恢复失败",e)}))}))})):e.unSyncTimeLine().then((function(){e.jSPlugin.resume().then((function(){e.jSPlugin.pause(i).then((function(){console.log("暂停成功"),e.jSPlugin.resume(i).then((function(i){e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState.state.sound&&e.jSPlugin.openSound(),t&&t(),e.syncTimeLine()}))["catch"]((function(e){console.log("恢复失败",e)}))}))["catch"]((function(){console.log("暂停失败"),e.jSPlugin.resume(i).then((function(i){e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),t&&t(),e.syncTimeLine()}))["catch"]((function(e){console.log("恢复失败",e)}))}))}))["catch"]((function(n){e.jSPlugin.resume(i).then((function(i){e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState.state.sound&&e.jSPlugin.openSound(),t&&t(),e.syncTimeLine()}))["catch"]((function(e){console.log("恢复失败",e)}))}))})),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState&&e.jSPlugin.Theme.decoderState.state&&e.jSPlugin.Theme.decoderState.state.zoom&&(e.jSPlugin.Theme.setDecoderState({zoom:!1}),e.jSPlugin.Zoom.stopZoom())};e.disabled?(console.log("操作频繁，等待2秒后执行"),e.seekTimer&&clearTimeout(e.seekTimer),e.seekTimer=setTimeout((function(){o(n)}),e.seekFrequency)):o(n)}}}).then((function(){e.syncTimeLine()}));var s=this;function l(e){var t=document.getElementById("".concat(e.id,"-wrap"));S("".concat(e.staticPath,"/rec/datepicker.min.css")),b("".concat(e.staticPath,"/rec/jquery.min.js"),(function(e){b("".concat(e.staticPath,"/rec/datepicker.js"),(function(e){b("".concat(e.staticPath,"/rec/datepicker.zh-CN.js"),(function(e){var i=t.getElementsByClassName("datepicker-container")[0];!i&&$("#".concat(e.id,"-datepicker")).datepicker&&$("#".concat(e.id,"-datepicker")).datepicker({autoShow:!1,autoHide:!0,autoPick:!0,language:"zh-CN",date:new Date(w("begin",e.params.url).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"))||new Date,format:"yyyy-mm-dd",endDate:new Date,inline:!0,container:t}),i=t.getElementsByClassName("datepicker-container")[0],i&&(i.style.display="none"),s.datepickerVisible=!1,$("#".concat(e.id,"-datepicker")).on("pick.datepicker",(function(t){console.log("重新选择日期",t.date,new Date(t.date).Format("yyyyMMdd"),new Date(document.getElementById("".concat(e.id,"-datepicker")).value).Format("yyyyMMdd")),t.date>new Date||new Date(t.date).Format("yyyyMMdd")===new Date(document.getElementById("".concat(e.id,"-datepicker")).value).Format("yyyyMMdd")?t.preventDefault():(document.getElementById("".concat(e.id,"-datepicker")).value=new Date(t.date).Format("yyyy-MM-dd"),s.renderRec(t.date),e.Theme.decoderState&&e.Theme.decoderState.state?e.Theme.decoderState.state.cloudRec?e.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd"),type:"cloud.rec"},(function(){}),!1):e.Theme.decoderState.state.rec?e.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd"),type:"rec"},(function(){}),!1):e.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd")},(function(){}),!1):e.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd")},(function(){}),!1)),i&&(i.style.display="none"),s.datepickerVisible=!1,e.Theme&&e.Theme.decoderState&&e.Theme.decoderState.state&&e.Theme.decoderState.state.zoom&&(e.Theme.setDecoderState({zoom:!1}),e.Zoom.stopZoom())})),$("#".concat(e.id,"-datepicker")).off("click").on("click",(function(e){console.log("点击日期"),s.datepickerVisible?i&&(i.style.display="none"):i&&(i.style.display="inline"),s.datepickerVisible=!s.datepickerVisible}))}),(function(){}),e)}),(function(){}),e)}),(function(){}),e)}l(s.jSPlugin),document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-add")).onclick=function(){e.unSyncTimeLine().then((function(){var t=e.currentTimeWidth;t<3&&e.timeLine.changeSize(++e.currentTimeWidth),e.syncTimeLine()}))},document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-sub")).onclick=function(){e.unSyncTimeLine().then((function(){var t=e.currentTimeWidth;t>0&&e.timeLine.changeSize(--e.currentTimeWidth),e.syncTimeLine()}))};var d=w("begin",this.jSPlugin.url)||(new Date).Format("yyyyMMdd");this.renderRec("".concat(d.slice(0,4),"-").concat(d.slice(4,6),"-").concat(d.slice(6,8))),this.observer=new MutationObserver((function(e,t){}));var c={attributes:!0,attributeOldValue:!0,attributeFilter:["style"]},u=document.getElementById("".concat(this.jSPlugin.id));this.observer.observe(u,c)}},{key:"setDatepickerDate",value:function(e){var t=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),i=t.getElementsByClassName("datepicker-container")[0];if(i){var n=i,a=n.parentNode;a.removeChild(n),document.getElementById("".concat(this.jSPlugin.id,"-datepicker")).value=e.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"),$("#".concat(this.jSPlugin.id,"-datepicker")).datepicker({autoShow:!1,autoHide:!0,autoPick:!0,language:"zh-CN",defaultDate:e,format:"yyyy-mm-dd",endDate:new Date,inline:!0,container:document.getElementById("".concat(this.jSPlugin.id,"-wrap"))})}}},{key:"datepickerHide",value:function(){var e=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),t=e.getElementsByClassName("datepicker-container")[0];e&&(t.style.display="none"),this.datepickerVisible=!1}},{key:"datepickerShow",value:function(){var e=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),t=e.getElementsByClassName("datepicker-container")[0];e&&(t.style.display="inline"),this.datepickerVisible=!0}},{key:"recAutoSize",value:function(e){var t=this;if(document.getElementById("".concat(this.jSPlugin.id,"-canvas"))){var i=parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).width,10)-100;i!==parseInt(document.getElementById("".concat(this.jSPlugin.id,"-canvas")).width)&&(document.getElementById("".concat(this.jSPlugin.id,"-canvas")).width=i,this.timeLine.init({id:"".concat(this.jSPlugin.id,"-canvas"),width:i,onChange:function(e){console.log("time",e,new Date(e).Format("yyyyMMddhhmmss"));var i=new Date(e).Format("yyyyMMddhhmmss");t.jSPlugin.changePlayUrl({begin:i},(function(){}),!1)}}).then((function(){var n=new Date(new Date(t.date).Format("yyyy-MM-dd 00:00:00").replace(/-/g,"/")).getTime(),a=new Date(new Date(t.date).Format("yyyy-MM-dd 23:59:59").replace(/-/g,"/")).getTime();t.timeLine.getRecord([],n,a),t.timeLine.setWidth({id:"".concat(t.jSPlugin.id,"-canvas"),width:i}),t.timeLine.getRecord(t.recList,n,a),t.syncTimeLine(),e&&e()})))}}},{key:"syncTimeLine",value:function(){this.jSPlugin.recTimer&&clearInterval(this.jSPlugin.recTimer);var e=this;this.jSPlugin.recTimer=setInterval((function(){var t=e.jSPlugin.getOSDTime();t.then((function(t){var i=t.data;if(-1===i)console.log("获取播放时间错误");else if(i>0){var n=new Date(i>1e12?i:1e3*i);e.timeLine.run({time:n})}}))["catch"]((function(t){var i=e.jSPlugin.Theme.decoderState.state.pauseDate;e.timeLine.run({time:e.timeLine.nowTime||i})}))}),1e3)}},{key:"unSyncTimeLine",value:function(){var e=this;return new Promise((function(t,i){e.jSPlugin.recTimer&&(clearInterval(e.jSPlugin.recTimer),e.jSPlugin.recTimer=null),t()}))}},{key:"renderRec",value:function(e){var t=this;this.date=e;var i=this,n=new Date(new Date(e).Format("yyyy-MM-dd 00:00:00").replace(/-/g,"/")).getTime(),a=new Date(new Date(e).Format("yyyy-MM-dd 23:59:59").replace(/-/g,"/")).getTime();this.timeLine.getRecord([],n,a),console.log("-----------233---------this.jSPlugin.url",this.jSPlugin.url);var o={accessToken:this.jSPlugin.accessToken,recType:"cloud.rec"===M(this.jSPlugin.url).type?1:2,deviceSerial:M(this.jSPlugin.url).deviceSerial,channelNo:M(this.jSPlugin.url).channelNo,startTime:n,endTime:a,version:"2.0"},r=function(e){if(e.data&&e.data.files&&e.data.files.length>0){var r=e.data.files,s=(new Date).getTime(),l=e.data.isAll;if(i.recList=r,i.lastDate=r[r.length-1].endTime,l)t.timeLine.getRecord(r,n,a);else{var d=function e(){function t(t){t.data&&t.data.files&&t.data.files.length>0?0==t.data.isAll?(t.data.files&&(r=r.concat(t.data.files),i.recList=r,i.lastDate=r[r.length-1].endTime),s=t.data.nextFileTime>0?t.data.nextFileTime:(new Date).getTime(),e()):(console.log("云存储执行渲染片段"),i.timeLine.getRecord(r,n,a)):i.timeLine.getRecord(r,n,a)}o.startTime=s,L(this.jSPlugin.env.domain+"/api/lapp/video/by/time","POST",o,"",t)};d()}t.timeLine.run({time:new Date(n)})}else e.data&&e.data.length>0&&(console.log("获取本地录像片段成功",e),i.recList=e.data,i.lastDate=e.data[e.data.length-1].endTime,i.timeLine.getRecord(e.data,n,a),i.timeLine.run({time:new Date(n)}))},s=this.jSPlugin.env.domain+"/api/lapp/video/by/time";L(s,"POST",o,"",r)}}]),e}(),ae=function(e){console.log("执行TimeLine - params",e),this.state={id:e.id,start:"00:00:00",end:"24:00:00",current:0,timelag:30,timeArr:[],availTimeLine:[],scrollTop:0,index:0,date:"",noTimeLineTxt:"",disabled:!1};var t=this;this.setState=function(e){Object.keys(e).forEach((function(i){t.state[i]=e[i],"scrollTop"===i&&document.getElementById("time-line-item").parentNode.scrollTo(0,e[i]),"current"===i&&(document.getElementById("time-line-current").innerHTML=e[i])}))},this.setDisabled=function(e){this.setState({disabled:e}),document.getElementById("time-line-item").parentNode.style.overflowY=e?"hidden":"scroll"},this.timeToSecond=function(e){var t=e.split(":"),i=Number(t[0]),n=Number(t[1]),a=Number(t[2]);return 60*i*60+60*n+(a||0)},this.minuteToTime=function(e){var t=Math.floor(e/60),i=e%60;return(t>9?t:"0"+t)+":"+(i>9?i:"0"+i)},this.timeToMinute=function(e){var t=e.split(":"),i=Number(t[0]),n=Number(t[1]);return 60*i+n},this.getPlayParam=e.getPlayParam,this.checkIsAppleDevice=function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=e.indexOf("iPad")>-1,n=e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1;return!!(t||i||n)},this.checkIsHarmonyOS=function(){var e=navigator.userAgent;return e.indexOf("ohos")>-1},this.checkIsHarmonyOS()?(document.getElementById("time-line-item").parentNode.addEventListener("touchstart",(function(){if(t.state.disabled)return!1;e.ontouchstart()}),!1),document.getElementById("time-line-item").parentNode.addEventListener("touchmove",(function(){if(t.state.disabled)return!1;e.ontouchmove()}),!1),document.getElementById("time-line-item").parentNode.addEventListener("touchend",(function(){if(t.state.disabled)return!1;var i,n=new Promise((function(e,t){var n=-1;i=setInterval((function(){var t=document.getElementById("time-line-item").parentNode.scrollTop;t!==n?(console.log("scolling",t,n),n=t):(console.log("scoll stop",t,n),clearInterval(i),e(t))}),100)}));n.then((function(e){console.log("scollPromise: then",e,t),t.rectTopTotime(e),console.log("页面滚动实际高度",e,t.state),t.getPlayParam({current:t.state.current})})),e.ontouchend()}),!1)):(document.getElementById("time-line-item").parentNode.ontouchstart=function(){if(t.state.disabled)return!1;e.ontouchstart()},document.getElementById("time-line-item").parentNode.ontouchmove=function(){if(t.state.disabled)return!1;e.ontouchmove()},document.getElementById("time-line-item").parentNode.ontouchend=function(){if(t.state.disabled)return!1;var i,n=new Promise((function(e,t){var n=-1;i=setInterval((function(){var t=document.getElementById("time-line-item").parentNode.scrollTop;t!==n?(console.log("scolling",t,n),n=t):(console.log("scoll stop",t,n),clearInterval(i),e(t))}),100)}));n.then((function(e){console.log("scollPromise: then",e,t),t.rectTopTotime(e),console.log("页面滚动实际高度",e,t.state),t.getPlayParam({current:t.state.current})})),e.ontouchend()}),this.matchTimeDot()};ae.prototype.changeScale=function(e){this.setState({timelag:e}),this.matchTimeDot()},ae.prototype.setDateLine=function(e,t){e.length>0?("undefined"===typeof t&&(t=e.length-1),this.setState({availTimeLine:e,start:e[t].st,end:e[t].et,current:e[t].st}),console.log("this.state",this.state),this.matchRecTimeDot(),this.primaryOffsetH()):(this.setState({availTimeLine:[]}),console.log("this.state",this.state),this.matchRecTimeDot())},ae.prototype.matchTimeDot=function(){var e=this.state,t=e.start,i=e.end,n=e.timelag;e.availTimeLine,console.log("start",t,"end",i);var a=[],o=this.timeToMinute(i);o=Math.floor(o/n)*n;for(var r=o;r>=0;){var s=0,l=0,d=[];r==o&&(s=70),0==r&&(l=230);var c=this.minuteToTime(r);a.push({id:r,current:c,label:"a"+r,marginTop:s,marginBottom:l,recArr:d}),r-=n}this.setState({timeArr:a}),this.renderDateLine()},ae.prototype.matchRecTimeDot=function(){var e=this.state,t=e.start,i=e.end,n=e.timelag,a=e.availTimeLine,o=e.timeArr;console.log("start",t,"end",i);var r=[],s=a.length;if(0===s)for(var l=0;l<o.length;l++)o[l].recArr=[];else{for(var d=0;d<o.length;d++)o[d].recArr=[];for(var c=0;c<s;c++){var u=a[c],h=this.timeToSecond(u.st),x=this.timeToSecond(u.et),f=void 0,p=void 0,m=0,_=0;f=Math.floor(h/(60*n))*n,m=(h-60*f)/n,p=Math.floor(x/(60*n))*n,_=(x-60*p)/n,r[c]={st:f,et:p,stAvailPercent:m,etAvailPercent:_};for(l=0;l<o.length;l++)if(o[l].id==f&&o[l].id==p){var g=_-m,v=60-_;o[l].recArr.push({height:g,top:v})}else o[l].id==f?o[l].recArr.push({height:60-m,top:0}):o[l].id==p?o[l].recArr.push({height:_,top:60-_}):o[l].id>f&&o[l].id<p&&o[l].recArr.push({height:60,top:0})}}console.log("availArr: ",r),this.setState({timeArr:o}),console.log("timeArr:",this.state),this.renderDateLine()},ae.prototype.renderDateLine=function(){var e=this.state,t=e.id,i=e.timeArr;console.log("id,timeArr",t,i);var n=document.getElementById("time-line-item");n.innerHTML="",i.forEach((function(e,t){var i=document.createElement("div");i.setAttribute("class","time-item"),i.style="margin-top: ".concat(e.marginTop,"px; margin-bottom: ").concat(e.marginBottom,"px; border-right-color: ").concat(e.borderColor,";");var a=document.createElement("div");a.setAttribute("class","scale");var o='<div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale" style="width:10px"></div>';e.recArr.forEach((function(e,t){o+='<div class="item-unavail" style="height: '.concat(e.height,"px;background-color:#A8B9ED; top: ").concat(e.top,'px"></div>')})),o+="<div id=".concat(e.label,' style="position: relative; top: 51px; left: 40%"> ').concat(e.current,"</div>"),i.innerHTML=o,n.appendChild(i)}))},ae.prototype.primaryOffsetH=function(){var e=this.state,t=e.start,i=e.timelag,n=e.timeArr,a=n[0].current,o=this.timeToSecond(a),r=this.timeToSecond(t),s=o-r,l=Math.ceil(s/i)+60;this.setState({scrollTop:l}),console.log("起始偏移量",l)},ae.prototype.currentOffsetH=function(){var e=this.state,t=e.current,i=e.timelag,n=e.timeArr,a=n[0].current,o=this.timeToSecond(a),r=this.timeToSecond(t),s=o-r,l=Math.ceil(s/i)+60;this.setState({scrollTop:l})},ae.prototype.rectTopTotime=function(e){var t,i,n=this.state.timelag,a=Math.floor(e/60),o=e-60*a;if(console.log("index：",a,"offsetH:",o),0==o)t=this.state.timeArr[a-1].current,i=0;else{var r=this.state.timeArr[a].current,s=this.timeToMinute(r),l=60-o,d=l*n,c=Math.floor(d/60)+s,u=60*Math.floor(d/60);i=Math.ceil(d-u),t=this.minuteToTime(c)}this.setState({current:t+":"+(i>9?i:"0"+i),scrollTop:e})},ae.prototype.stepScrollTimeLine=function(e){this.setState({current:e}),this.currentOffsetH()},ae.prototype.secondCountDown=function(e){var t=this.state.current,i=t.split(":"),n=Number(i[0]),a=Number(i[1]),o=Number(i[2]),r=60*n*60+60*a+o+1,s=Math.floor(r/3600),l=Math.floor((r-3600*s)/60),d=r-3600*s-60*l;this.setState({current:(s>9?s:"0"+s)+":"+(l>9?l:"0"+l)+":"+(d>9?d:"0"+d)})};var oe=ae;function re(e){var t=new Date(e),i=t.getHours(),n=t.getMinutes(),a=t.getSeconds();return(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)+":"+(a>9?a:"0"+a)}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e};var se=function(){function e(t,i,n){var a=this;r(this,e),this.changeRecSpeed=i,this.resetMobileZoomStatus=n,this.isMobile=!0,this.jSPlugin=t,this.date=(new Date).Format("yyyy-MM-dd"),this.begin=((new Date).Format("yyyy-MM-dd")+" 00:00:00").replace(/-/g,"/"),this.end=((new Date).Format("yyyy-MM-dd")+" 23:59:59").replace(/-/g,"/"),this.initBegin=null,this.initEnd=null,this.type=M(this.jSPlugin.url).type,this.operating=!1,this.seekTimer=null,this.disabled=!1,this.seekFrequency=2e3,this.recList=[],this.isSeeking=!1,this.jSPlugin.params&&this.jSPlugin.params.seekFrequency&&(this.seekFrequency=this.jSPlugin.params.seekFrequency);var o=document.createElement("style");if(o.innerHTML='\n    body{\n      padding: 0;\n      margin: 0;\n    }\n    .time-line-container {\n      text-align: left;\n      height: 300px;\n      /* outline: 1px solid red; */\n      /* background: gray; */\n      position: relative;\n      /* padding-top: 60px; */\n      margin-top: 20px;\n    }\n\n    .time-line-container .time-line-item-container {\n      display: inline-block;\n      /* height: 400px; */\n      width: 30%;\n      /* background: indianred; */\n      overflow-y: scroll;\n      overflow-x: hidden;\n      /* padding-top: 60px; */\n      height: 300px;\n      box-sizing: border-box;\n      white-space: nowrap;\n      position: relative;\n    }\n\n    .time-line-container .time-line-item-container::-webkit-scrollbar {\n      width: 0px;\n      /*滚动条宽度*/\n      height: 0px;\n      /*滚动条高度*/\n    }\n\n    .time-line-item .time-item {\n      position: relative;\n      box-sizing: border-box;\n      height: 60px;\n      font-size: 12px;\n      color: rgb(150, 150, 150);\n      border-right: 6px solid;\n      border-right-color: #ddd;\n    }\n\n    .time-line-item .time-item .scale {\n      width: 6px;\n      height: 9px;\n      border-bottom: 1px solid #ccc;\n      float: right;\n      clear: both;\n    }\n\n    .time-line-item .time-item .item-unavail {\n      width: 6px;\n      position: absolute;\n      left: 100%;\n      background-color: #ddd;\n    }\n\n    .time-line-container .current-time {\n      position: absolute;\n      left: 0;\n      top: 40px;\n      height: 29px;\n      /* line-height: 58px; */\n      border-bottom: 1px solid #648FFC;\n      width: 60%;\n      margin-left: 26%;\n    }\n\n    .time-line-container .current-time .current-time-bg {\n      position: relative;\n      top: 15px;\n      width: 100px;\n      height: 29px;\n      line-height: 29px;\n      left: -70px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .time-line-container .current-time .current-time-bg::before {\n      content: \'\';\n      display: inline-block;\n      width: 6px;\n      height: 6px;\n      border-radius: 100%;\n      background: #648FFC;\n      top: 11px;\n      position: absolute;\n      right: 30px;\n    }\n\n    .date-switch-container {\n      height: 40px;\n      position: relative;\n      text-align: center;\n      margin: 20px 10px;\n    }\n\n    .date-switch-container .current-date {\n      line-height: 40px;\n      height: 22px;\n      font-size: 16px;\n      color: #2C2C2C;\n      text-align: center;\n      font-weight: bold;\n    }\n\n    .date-container {\n      width: 40px;\n      height: 40px;\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n\n    .rec-type-container {\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .rec-type-container .rec-type-text {\n      padding: 0 15px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .rec-type-container .rec-type-switch {\n      padding: 0 20px;\n    }\n\n    .date-container input {\n      position: absolute;\n      opacity: 0;\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      z-index: 10;\n      left: 0;\n    }\n\n    .date-container label {\n      position: absolute;\n      left: 0;\n      top: 0;\n      /* display: none; */\n      z-index: 0;\n    }\n\n    .date-icon {\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      background: url(\'https://resource.eziot.com/group2/M00/00/6A/CtwQF2F6VieAQrU9AAABP-_Nsqo949.png\') no-repeat 100% 100%;\n    }\n    .select-container {\n      padding: 10px;\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .advice {\n      height: 24px;\n      width: 70px;\n      display: flex;\n      justify-content: space-between;\n      line-height: 24px;\n      background: #F8F8F8;\n      border-radius: 8px;\n    }\n\n    .advice span {\n      width: 40px;\n      display: inline-block;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child svg {\n      fill: #648FFC !important;\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child svg {\n      fill: #648FFC !important;\n    }',document.getElementsByTagName("head")[0].appendChild(o),w("begin",this.jSPlugin.url)){var s=w("begin",this.jSPlugin.url);this.date=s.slice(0,4)+"/"+s.slice(4,6)+"/"+s.slice(6,8),this.begin=this.date+" ".concat(s.slice(8,10)||"00",":").concat(s.slice(10,12)||"00",":").concat(s.slice(12,14)||"00"),this.end=this.date+" 23:59:59",this.initBegin=this.begin}if(w("end",this.jSPlugin.url)){var l=w("end",this.jSPlugin.url);this.end=this.date+" ".concat(l.slice(8,10)||"23",":").concat(l.slice(10,12)||"59",":").concat(l.slice(12,14)||"59"),this.initEnd=this.end}var d=document.createElement("div");d.id="date-switch-container-wrap",d.className="date-switch-container-wrap",d.style="",d.innerHTML='\n      <div class="date-switch-container">\n      <div class="current-date" id="current-date">今日录像</div>\n      <div class="date-container">\n        <label for="date">\n          <div class="date-icon"></div>\n        </label>\n        <input type="date" name="date" id="date" value="'.concat(this.date.replace(/\//g,"-")||(new Date).Format("yyyy-MM-dd"),'" />\n      </div>\n    </div>\n        '),T(d,document.getElementById("".concat(this.jSPlugin.id,"-wrap")));var c=document.createElement("div");c.id="rec-type-container-wrap",c.className="rec-type-container-wrap",c.style="",c.innerHTML='\n    <div class="rec-type-container">\n    <div class="rec-type-text">共<span id="recCount">0</span>个录像</div>\n    <div class="rec-type-switch">\n      <label>\n        <input type="checkbox" name="type" id="cloudType" value="1" hidden />\n        <label for="cloudType" class="advice">\n          <span>\n          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path class="st0" d="M12.6,5c-2.3,0.1-4.3,1.4-5.3,3.3L7.2,8.6c-2.4,0.5-4.1,2.5-4.1,4.9c0,2.8,2.4,5,5.2,5h9.9\n            c2.4,0,4.3-1.9,4.3-4.2l0-0.2c-0.1-2-1.6-3.5-3.5-3.9l-0.1,0l0-0.2c-0.4-2.8-3-5-6.1-5L12.6,5z"/>\n          </svg>\n        </span>\n        <span>\n          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path id="形状结合" class="st0" d="M14.3,4c0.6,0,1.2,0.2,1.7,0.7l0,0L18.3,7C18.7,7.4,19,8,19,8.6l0,0v9c0,1.3-1.1,2.3-2.4,2.3\n\tl0,0H8.4C7.1,20,6,19,6,17.7l0,0V6.3C6,5,7.1,4,8.4,4l0,0H14.3z M9.7,7.2C9.3,7.2,8.9,7.6,8.9,8l0,0v2.5l0,0.1\n\tc0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C10.4,7.5,10,7.2,9.7,7.2z M12.2,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0v2.5\n\tl0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C12.9,7.5,12.5,7.2,12.2,7.2z M14.7,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0\n\tv2.5l0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C15.4,7.5,15,7.2,14.7,7.2z"/>\n          </svg>\n        </span>\n        </label>\n      </label>\n    </div>\n  </div>\n        ',T(c,d);var u=document.createElement("div");u.id="mobile-rec-wrap",u.className="mobileRec-wrap",u.style="",u.innerHTML='\n    <div class="time-line-container">\n    <div class="current-time">\n      <div class="current-time-bg" id="time-line-current">00:00:00</div>\n    </div>\n    <div class="time-line-item-container">\n      <div class="time-line-item" id="time-line-item">\n      </div>\n    </div>\n    </div>\n      ',T(u,c);var h=function(e){var t=a;console.log("子组件传值到父组件",e,e.current);var i=e.current,n=new Date(a.date).Format("yyyyMMdd").substr(0,8)+(e.current?i.replace(/:/g,""):e.current.replace(/:/g,""));if("cloud.rec"===a.type)a.isSeeking||t.recList.length>0&&(new Date("".concat(a.date," ").concat(e.current)).valueOf()>=t.lastDate?(a.jSPlugin.pluginStatus.loadingSetText({text:"seek回放未找到录像片段",color:"red",delayClear:2e3}),a.syncTimeLine()):a.unSyncTimeLine().then((function(){a.isSeeking=!0,a.jSPlugin.pluginStatus.loadingStart(a.jSPlugin.id),a.jSPlugin.pluginStatus.setPlayStatus({loading:!0}),a.jSPlugin.pluginStatus.loadingSetText({text:"seek回放中，请稍后..."}),a.jSPlugin.seek(n.substr(8,6),"235959").then((function(){var e=setInterval((function(){a.jSPlugin.getOSDTime().then((function(t){console.log("seek时间同步:",new Date(1e3*t.data).Format("yyyyMMddhhmmss"),n,new Date(1e3*t.data).Format("yyyyMMddhhmmss")>=n),new Date(1e3*t.data).Format("yyyyMMddhhmmss")>=n&&(a.isSeeking=!1,a.syncTimeLine(),clearInterval(e),a.jSPlugin.pluginStatus.loadingStop(a.jSPlugin.id),a.jSPlugin.pluginStatus.setPlayStatus({loading:!1}),a.jSPlugin.pluginStatus.loadingClear())}))}),1e3)}))})));else{var o=function(){setTimeout((function(){a.disabled=!1}),a.seekFrequency)},r=a.jSPlugin.Theme.decoderState.state.play,s=function(e){a.disabled=!0,r?a.unSyncTimeLine().then((function(){a.jSPlugin.pause(n).then((function(){console.log("暂停成功"),a.jSPlugin.resume(n).then((function(t){console.log("恢复成功"),a.syncTimeLine(),e&&e()}))}))["catch"]((function(){console.log("暂停失败"),a.jSPlugin.resume(n).then((function(t){console.log("恢复成功"),a.syncTimeLine(),e&&e()}))}))})):a.unSyncTimeLine().then((function(){a.jSPlugin.resume(n).then((function(t){console.log("恢复成功"),a.syncTimeLine(),e&&e()}))}))};a.disabled?(console.log("操作频繁，等待2秒后执行"),a.seekTimer&&clearTimeout(a.seekTimer),a.seekTimer=setTimeout((function(){s(o)}),a.seekFrequency)):s(o)}},x=function(){a.operating=!0,a.unSyncTimeLine()},f=function(){0==a.operating&&(a.operating=!0,a.unSyncTimeLine())},p=function(){a.operating=!1};this.TimeLineOBJ=new oe({id:"time-line-item",getPlayParam:h,ontouchstart:x,ontouchmove:f,ontouchend:p}),this.fetchDeviceRec(),document.getElementById("date").addEventListener("change",(function(e){console.log("日期变化",e.target.value);var t=e.target.value,i=parseInt(new Date(t).Format("yyyy/MM/dd").replace(/\//g,"")),n=new Date,o=parseInt(n.Format("yyyy/MM/dd").replace(/\//g,""));i>o?document.getElementById("date").value=new Date(a.date.replace(/\//g,"-")||n.Format("yyyy-MM-dd")).Format("yyyy-MM-dd"):(a.date=new Date(t).Format("yyyy/MM/dd"),a.begin=a.date+" 00:00:00",a.end=a.date+" 23:59:59",a.jSPlugin.changePlayUrl({type:a.type,begin:"".concat(new Date(a.date).Format("yyyyMMdd"),"000000")}).then((function(e){setTimeout((function(){var e=document.getElementById("date");e&&(e.value=t)}),0)})),a.changeRecSpeed(1),a.resetMobileZoomStatus())})),document.getElementById("cloudType").checked="rec"===this.type,document.getElementById("cloudType").addEventListener("change",(function(e){var t=e.target.checked?2:1;a.type=e.target.checked?"rec":"cloud.rec",console.log("recType",t),a.jSPlugin.changePlayUrl({type:a.type,begin:"".concat(new Date(a.date).Format("yyyyMMdd"),"000000")}).then((function(){console.log("切换类型成功"),a.syncTimeLine(),a.changeRecSpeed(1),a.resetMobileZoomStatus()}),(function(e){console.log("err",e)}))["catch"]((function(e){console.log(e)}))})),this.syncTimeLine()}return l(e,[{key:"fetchDeviceRec",value:function(){var e=this,t=function(t){var i=t.length;document.getElementById("recCount").innerHTML=i;for(var n=[],a=i-1;a>=0;a--){var o=t[a],r=re(o.endTime),s=re(o.startTime);n.push({st:s,et:r})}e.TimeLineOBJ.setDateLine(n)},i=new FormData,n=this;i.append("deviceSerial",M(this.jSPlugin.url).deviceSerial),i.append("channelNo",M(this.jSPlugin.url).channelNo),i.append("accessToken",this.jSPlugin.accessToken),i.append("recType","cloud.rec"===this.type?1:2),i.append("startTime",new Date(this.begin).getTime()),i.append("endTime",new Date(this.end).getTime()),fetch(this.jSPlugin.env.domain+"/api/lapp/video/by/time",{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){if(200==e.code&&e.data){var i=[];i=e.data,n.recList=i,n.lastDate=i[i.length-1].endTime,t(i)}else t([])}))}},{key:"syncTimeLine",value:function(){var e=this,t=function(e){var t=new Date(e),i=t.getHours(),n=t.getMinutes(),a=t.getSeconds();return(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)+":"+(a>9?a:"0"+a)};this.jSPlugin.recTimer&&clearInterval(this.jSPlugin.recTimer);var i=this;this.jSPlugin.recTimer=setInterval((function(){if(e.operating)return console.log("操作中"),!1;e.jSPlugin.getOSDTime().then((function(e){e.data>0&&i.TimeLineOBJ.stepScrollTimeLine(t(1e3*e.data)),i.lastDate&&(e.data>1e12?e.data:1e3*e.data)>=i.lastDate&&i.jSPlugin.pluginStatus.loadingSetText({text:"回放结束",color:"red"})}))["catch"]((function(e){console.log("err:-----",e),console.log("未找到当前获取播放时间，等待中...")}))}),1e3)}},{key:"unSyncTimeLine",value:function(){var e=this;return new Promise((function(t,i){e.jSPlugin.recTimer&&clearInterval(e.jSPlugin.recTimer),t()}))}}]),e}(),le=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStart"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStart"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStart"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStart"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStart"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStart"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStart"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStart"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStart"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStart"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStart"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStart"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStart"},{code:60002,msg:"设备已旋转到上限位",desc:"",text:"设备云台旋转达到上限位",type:"ptzStart"},{code:60003,msg:"设备已旋转到下限位",desc:"",text:"设备云台旋转达到下限位",type:"ptzStart"},{code:60004,msg:"设备已旋转到左限位",desc:"",text:"设备云台旋转达到左限位",type:"ptzStart"},{code:60005,msg:"设备已旋转到右限位",desc:"",text:"设备云台旋转达到右限位",type:"ptzStart"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStart"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStart"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStart"}],de=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStop"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStop"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStop"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStop"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStop"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStop"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStop"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStop"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStop"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStop"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStop"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStop"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStop"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStop"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStop"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStop"}],ce=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"talk"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"talk"},{code:10002,msg:"账号异常，操作失败",desc:"",text:"accessToken异常或过期",type:"talk"},{code:10031,msg:"账号异常，操作失败",desc:"",text:"子账户或萤石用户没有权限",type:"talk"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"talk"},{code:60059,msg:"播放失败",desc:"",text:"ezopen地址均不可用",type:"talk"}],ue=[{code:200,msg:"",desc:"",text:"操作成功",type:"time"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"time"},{code:10002,msg:"账号异常，播放失败",desc:"",text:"accessToken异常或过期",type:"time"},{code:10004,msg:"账号异常，播放失败",desc:"",text:"用户不存在",type:"time"},{code:10005,msg:"账号异常，播放失败",desc:"",text:"appKey异常",type:"time"},{code:10011,msg:"播放失败",desc:"设备对应用户未注册至应用下",text:"未开通萤石服务",type:"time"},{code:10013,msg:"账号异常，播放失败",desc:"",text:"非开发者账号无权限调用",type:"time"},{code:10030,msg:"播放失败",desc:"",text:"appkey和appsecret不匹配",type:"time"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"time"},{code:20014,msg:"播放失败",desc:"",text:"deviceSerial不合法",type:"time"},{code:20032,msg:"设备不存在请检查设备连接情况",desc:"",text:"该用户下通道不存在",type:"time"},{code:60024,msg:"播放失败请重试",desc:"",text:"取消订阅操作失败",type:"time"},{code:49999,msg:"播放失败请重试",desc:"",text:"操作异常",type:"time"}],he={ptzStart:le,ptzStop:de,talk:ce,time:ue},xe=function(){function e(t,i){r(this,e),this.coreX=t,this.coreY=i,console.log("uikitCode",he)}return l(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchInfo",value:function(e,t){if(he[t]){var i={};return he[t].map((function(t){t.code==e&&(i=t)})),i}return{code:500,msg:"未知错误",desc:"未知的错误码，或错误码类型有误",text:"",type:t}}}]),e}(),fe=function(){function e(t){var i=this;if(r(this,e),this.jSPlugin=t,this.codeHandler=new xe,this.pluginStatus=new Y(this,this.jSPlugin.id),this.showPtz=!1,console.log("云台初始化"),document.getElementById(this.jSPlugin.id+"-ez-ptz-item"))return!1;var n=document.createElement("div");n.id=this.jSPlugin.id+"-ez-ptz-item",n.className="ez-ptz-wrap",n.style="display:none";var a=document.createElement("style");a.innerHTML="\n    .ez-ptz-container {\n      position: relative;\n      width: 80px;\n      height: 80px;\n      background: rgba(255, 255, 255, 0.80);\n      box-shadow: 0px 0px 33px 4px rgb(0 0 0 / 15%);\n      border: 1px solid rgba(255, 255, 255, 0.80);\n      border-radius: 100%;\n      cursor: pointer;\n      overflow: hidden;\n      user-select: none;\n    }\n    .ez-ptz-container .ez-ptz-icon.top {\n      width: 0;\n      height: 0;\n      border-left: 3px solid transparent;\n      border-right: 3px solid transparent;\n      border-bottom: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 3px);\n      top: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.top.active {\n      border-bottom-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom {\n      width: 0;\n      height: 0;\n      border-left: 3px solid transparent;\n      border-right: 3px solid transparent;\n      border-top: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 3px);\n      bottom: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom.active {\n      border-top-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right {\n      width: 0;\n      height: 0;\n      border-top: 3px solid transparent;\n      border-bottom: 3px solid transparent;\n      border-left: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 3px);\n      right: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right.active {\n      border-left-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left {\n      width: 0;\n      height: 0;\n      border-top: 3px solid transparent;\n      border-bottom: 3px solid transparent;\n      border-right: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 3px);\n      left: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left.active {\n      border-right-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-main.center {\n      width: 23px;\n      height: 23px;\n      background: #1890FF;\n      border-radius: 100%;\n      top: calc(50% - 12.3px);\n      left: calc(50% - 12.3px);\n      position: absolute;\n    }\n\n    .ez-ptz-wrap {\n      position: absolute;\n      right: 20px;\n      top: calc(50% - 50px);\n      width: 100px;\n      height: 100px;\n      z-index: 999;\n    }\n\n    .ez-ptz-close {\n      position: absolute;\n      color: #FFFFFF;\n      top: 0;\n      right: 0px;\n    }",document.getElementsByTagName("head")[0].appendChild(a),n.innerHTML='\n      <div class="ez-ptz-container" id="'.concat(this.jSPlugin.id,'-ez-ptz-container" style="position: relative;width: 80px;height: 80px;background: rgba(255, 255, 255, 0.80);box-shadow: 0px 0px 33px 4px rgba(0, 0, 0, 0.15);border: 1px solid rgba(255, 255, 255, 0.80);border-radius: 100%;cursor: pointer;overflow: hidden;user-select: none;">\n        <div class="ez-ptz-main center"></div>\n        <div class="ez-ptz-icon top active"></div>\n        <div class="ez-ptz-icon left active"></div>\n        <div class="ez-ptz-icon bottom active"></div>\n        <div class="ez-ptz-icon right active"></div>\n      '),document.getElementById("".concat(t.id,"-wrap")).appendChild(n),document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmousedown=function(e){e.preventDefault(),console.log("触摸开始"),i._handlePtzTouch(e,"start")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmouseup=function(e){e.preventDefault(),console.log("触摸结束"),i._handlePtzTouch(e,"stop")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchstart=function(e){e.preventDefault(),console.log("触摸开始"),i._handlePtzTouch(e,"start")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchend=function(e){e.preventDefault(),console.log("触摸结束",e),i._handlePtzTouch(e,"stop")}}return l(e,[{key:"show",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: inline-block",this.showPtz=!0}},{key:"hide",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: none",this.showPtz=!1}},{key:"_handlePtzTouch",value:function(e,t){var i=this,n=document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).getBoundingClientRect(),a=n.left+41,o=n.top+41,r=e.x||e.changedTouches[0].clientX,s=e.y||e.changedTouches[0].clientY,l=r-a,d=s-o,c=0,u=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";if(c=Math.abs(l)>Math.abs(d)?l>0?3:2:d>0?1:0,/^rotate\(90/.test(document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.transform))switch(c){case 0:c=2;break;case 1:c=3;break;case 2:c=1;break;case 3:c=0;break}document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(0===c?180:1===c?0:2===c?90:270,"deg, #1d8dd8 0%, rgba(100,143,252,0.00) 30%)"),"stop"===t&&(u=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style="");var h=new FormData;h.append("deviceSerial",M(this.jSPlugin.url).deviceSerial),h.append("channelNo",M(this.jSPlugin.url).channelNo),h.append("speed",1),h.append("direction",c),h.append("accessToken",this.jSPlugin.accessToken),fetch(u,{method:"POST",body:h}).then((function(e){return e.json()})).then((function(e){200==e.code||(console.log(e.code,i.codeHandler.matchInfo(e.code,"start"===t?"ptzStart":"ptzStop")),i.pluginStatus.loadingSetText({text:i.codeHandler.matchInfo(e.code,"start"===t?"ptzStart":"ptzStop").msg,color:"red",delayClear:2e3}),60005!=e.code&&60002!=e.code&&60003!=e.code&&60004!=e.code||(document.getElementById("".concat(i.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(0===c?180:1===c?0:2===c?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 30%)")))}))["catch"]((function(e){console.log("云台调用异常",e)}))}}]),e}();function pe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var me={exports:{}};(function(e,t){(function(t){e.exports=t()})((function(){return function(){function e(t,i,n){function a(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof pe&&pe;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[r]={exports:{}};t[r][0].call(c.exports,(function(e){var i=t[r][1][e];return a(i||e)}),c,c.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof pe&&pe,r=0;r<n.length;r++)a(n[r]);return a}return e}()({1:[function(e,t,i){var n=e("./adapter_factory.js"),a=(0,n.adapterFactory)({window:window});window.adapter=a,t.exports=a},{"./adapter_factory.js":2}],2:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.adapterFactory=m;var n=e("./utils"),a=p(n),o=e("./chrome/chrome_shim"),r=p(o),s=e("./edge/edge_shim"),l=p(s),d=e("./firefox/firefox_shim"),c=p(d),u=e("./safari/safari_shim"),h=p(u),x=e("./common_shim"),f=p(x);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=a.log,o=a.detectBrowser(t),s={browserDetails:o,commonShim:f,extractVersion:a.extractVersion,disableLog:a.disableLog,disableWarnings:a.disableWarnings};switch(o.browser){case"chrome":if(!r||!r.shimPeerConnection||!i.shimChrome)return n("Chrome shim is not included in this adapter release."),s;n("adapter.js shimming chrome."),s.browserShim=r,r.shimGetUserMedia(t),r.shimMediaStream(t),r.shimPeerConnection(t),r.shimOnTrack(t),r.shimAddTrackRemoveTrack(t),r.shimGetSendersWithDtmf(t),r.shimGetStats(t),r.shimSenderReceiverGetStats(t),r.fixNegotiationNeeded(t),f.shimRTCIceCandidate(t),f.shimConnectionState(t),f.shimMaxMessageSize(t),f.shimSendThrowTypeError(t),f.removeAllowExtmapMixed(t);break;case"firefox":if(!c||!c.shimPeerConnection||!i.shimFirefox)return n("Firefox shim is not included in this adapter release."),s;n("adapter.js shimming firefox."),s.browserShim=c,c.shimGetUserMedia(t),c.shimPeerConnection(t),c.shimOnTrack(t),c.shimRemoveStream(t),c.shimSenderGetStats(t),c.shimReceiverGetStats(t),c.shimRTCDataChannel(t),c.shimAddTransceiver(t),c.shimCreateOffer(t),c.shimCreateAnswer(t),f.shimRTCIceCandidate(t),f.shimConnectionState(t),f.shimMaxMessageSize(t),f.shimSendThrowTypeError(t);break;case"edge":if(!l||!l.shimPeerConnection||!i.shimEdge)return n("MS edge shim is not included in this adapter release."),s;n("adapter.js shimming edge."),s.browserShim=l,l.shimGetUserMedia(t),l.shimGetDisplayMedia(t),l.shimPeerConnection(t),l.shimReplaceTrack(t),f.shimMaxMessageSize(t),f.shimSendThrowTypeError(t);break;case"safari":if(!h||!i.shimSafari)return n("Safari shim is not included in this adapter release."),s;n("adapter.js shimming safari."),s.browserShim=h,h.shimRTCIceServerUrls(t),h.shimCreateOfferLegacy(t),h.shimCallbacksAPI(t),h.shimLocalStreamsAPI(t),h.shimRemoteStreamsAPI(t),h.shimTrackEventTransceiver(t),h.shimGetUserMedia(t),f.shimRTCIceCandidate(t),f.shimMaxMessageSize(t),f.shimSendThrowTypeError(t),f.removeAllowExtmapMixed(t);break;default:n("Unsupported browser!");break}return s}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)},a=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return a.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),i.shimMediaStream=u,i.shimOnTrack=h,i.shimGetSendersWithDtmf=x,i.shimGetStats=f,i.shimSenderReceiverGetStats=p,i.shimAddTrackRemoveTrackWithNative=m,i.shimAddTrackRemoveTrack=_,i.shimPeerConnection=g,i.fixNegotiationNeeded=v;var s=e("../utils.js"),l=d(s);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function h(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var a=void 0;a=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[t.stream],i.dispatchEvent(o)})),t.stream.getTracks().forEach((function(n){var a=void 0;a=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var o=new Event("track");o.track=n,o.receiver=a,o.transceiver={receiver:a},o.streams=[t.stream],i.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else l.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function x(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var a=i.apply(this,arguments);return a||(a=t(this,e),this._senders.push(a)),a};var a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){a.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){i._senders.push(t(i,e))}))};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((function(e){var i=t._senders.find((function(t){return t.track===e}));i&&t._senders.splice(t._senders.indexOf(i),1)}))}}else if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function f(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,i=Array.prototype.slice.call(arguments),n=i[0],a=i[1],o=i[2];if(arguments.length>0&&"function"===typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof n))return t.apply(this,[]);var r=function(e){var t={},i=e.result();return i.forEach((function(e){var i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t[i.id]=i})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var l=function(e){a(s(r(e)))};return t.apply(this,[l,n])}return new Promise((function(i,n){t.apply(e,[function(e){i(s(r(e)))},n])})).then(a,o)}}}function p(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return l.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var a=e.RTCPeerConnection.prototype.getReceivers;a&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),l.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return l.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],i=void 0,n=void 0,a=void 0;return this.getSenders().forEach((function(e){e.track===t&&(i?a=!0:i=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(n?a=!0:n=e),e.track===t})),a||i&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function m(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));if(i)throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();i.apply(this,arguments);var a=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(a)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(i){var n=t._shimmedLocalStreams[i].indexOf(e);-1!==n&&t._shimmedLocalStreams[i].splice(n,1),1===t._shimmedLocalStreams[i].length&&delete t._shimmedLocalStreams[i]})),a.apply(this,arguments)}}function _(e){if(e.RTCPeerConnection){var t=l.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return m(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){var t=i.getSenders().find((function(t){return t.track===e}));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var a=new e.MediaStream(t.getTracks());this._streams[t.id]=a,this._reverseStreams[a.id]=t,t=a}n.apply(this,[t])};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var a=[].slice.call(arguments,1);if(1!==a.length||!a[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var r=this._streams[i.id];if(r)r.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[i.id]=s,this._reverseStreams[s.id]=i,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){var e=this,t=arguments,n=arguments.length&&"function"===typeof arguments[0];return n?i.apply(this,[function(i){var n=s(e,i);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=n[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=d(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var r=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=r.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var i=e._pc===this;if(!i)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(i){var a=t._streams[i].getTracks().find((function(t){return e.track===t}));a&&(n=t._streams[i])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],a=e._streams[n.id];i=i.replace(new RegExp(a.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}function d(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],a=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),a.id)})),new RTCSessionDescription({type:t.type,sdp:i})}}function g(e){var t=l.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}));var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function v(e){l.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var t=e.target;if("stable"===t.signalingState)return e}))}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,i){function n(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((function(t){var n=i.video&&i.video.width,a=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),a&&(i.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=n},{}],5:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)};i.shimGetUserMedia=d;var a=e("../utils.js"),r=s(a);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}var l=r.log;function d(e){var t=e&&e.navigator;if(t.mediaDevices){var i=r.detectBrowser(e),a=function(e){if("object"!==("undefined"===typeof e?"undefined":n(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var a="object"===n(e[i])?e[i]:{ideal:e[i]};void 0!==a.exact&&"number"===typeof a.exact&&(a.min=a.max=a.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==a.ideal){t.optional=t.optional||[];var r={};"number"===typeof a.ideal?(r[o("min",i)]=a.ideal,t.optional.push(r),r={},r[o("max",i)]=a.ideal,t.optional.push(r)):(r[o("",i)]=a.ideal,t.optional.push(r))}void 0!==a.exact&&"number"!==typeof a.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",i)]=a.exact):["min","max"].forEach((function(e){void 0!==a[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,i)]=a[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(i.version>=61)return o(e);if(e=JSON.parse(JSON.stringify(e)),e&&"object"===n(e.audio)){var r=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};e=JSON.parse(JSON.stringify(e)),r(e.audio,"autoGainControl","googAutoGainControl"),r(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=a(e.audio)}if(e&&"object"===n(e.video)){var s=e.video.facingMode;s=s&&("object"===("undefined"===typeof s?"undefined":n(s))?s:{ideal:s});var d=i.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||d)){delete e.video.facingMode;var c=void 0;if("environment"===s.exact||"environment"===s.ideal?c=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(c=["front"]),c)return t.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var i=t.find((function(e){return c.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!i&&t.length&&c.includes("back")&&(i=t[t.length-1]),i&&(e.video.deviceId=s.exact?{exact:i.deviceId}:{ideal:i.deviceId}),e.video=a(e.video),l("chrome: "+JSON.stringify(e)),o(e)}))}e.video=a(e.video)}return l("chrome: "+JSON.stringify(e)),o(e)},s=function(e){return i.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},d=function(e,i,n){o(e,(function(e){t.webkitGetUserMedia(e,i,(function(e){n&&n(s(e))}))}))};if(t.getUserMedia=d.bind(t),t.mediaDevices.getUserMedia){var c=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return o(e,(function(e){return c(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(s(e))}))}))}}}}},{"../utils.js":15}],6:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)};i.shimRTCIceCandidate=u,i.shimMaxMessageSize=h,i.shimSendThrowTypeError=x,i.shimConnectionState=f,i.removeAllowExtmapMixed=p;var a=e("sdp"),r=c(a),s=e("./utils"),l=d(s);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&(e=JSON.parse(JSON.stringify(e)),e.candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var i=new t(e),a=r["default"].parseCandidate(e.candidate),o=Object.assign(i,a);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,l.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function h(e){if(e.RTCPeerConnection){var t=l.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var i=function(e){if(!e||!e.sdp)return!1;var t=r["default"].splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r["default"].parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var i=parseInt(t[1],10);return i!==i?-1:i},a=function(e){var i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},o=function(e,i){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var a=r["default"].matchPrefix(e.sdp,"a=max-message-size:");return a.length>0?n=parseInt(a[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),r=e.sdpSemantics;"plan-b"===r&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){var l=n(arguments[0]),d=a(l),c=o(arguments[0],l),u=void 0;u=0===d&&0===c?Number.POSITIVE_INFINITY:0===d||0===c?Math.max(d,c):Math.min(d,c);var h={};Object.defineProperty(h,"maxMessageSize",{get:function(){return u}}),this._sctp=h}return s.apply(this,arguments)}}}function x(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return i(e,this),e},l.wrapPeerConnectionEvent(e,"datachannel",(function(e){return i(e.channel,e.target),e}))}function i(e,t){var i=e.send;e.send=function(){var n=arguments[0],a=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&a>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}}function f(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}}function p(e){if(e.RTCPeerConnection){var t=l.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),i.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var a=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}}),i.shimPeerConnection=h,i.shimReplaceTrack=x;var o=e("../utils"),r=u(o),s=e("./filtericeservers"),l=e("rtcpeerconnection-shim"),d=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function h(e){var t=r.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){i.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=(0,d["default"])(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,s.filterIceServers)(e.iceServers,t.version),r.log("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function x(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.filterIceServers=r;var n=e("../utils"),a=o(n);function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){var i=!1;return e=JSON.parse(JSON.stringify(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&a.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"===typeof t;return n&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!i?(i=!0,!0):t&&!i})),delete e.url,e.urls=n?t[0]:t,!!t.length}}))}},{"../utils":15}],9:[function(e,t,i){function n(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=n},{}],10:[function(e,t,i){function n(e){var t=e&&e.navigator,i=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e)["catch"]((function(e){return Promise.reject(i(e))}))}}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetUserMedia=n},{}],11:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)},a=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return a.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),i.shimOnTrack=u,i.shimPeerConnection=h,i.shimSenderGetStats=x,i.shimReceiverGetStats=f,i.shimRemoveStream=p,i.shimRTCDataChannel=m,i.shimAddTransceiver=_,i.shimCreateOffer=g,i.shimCreateAnswer=v;var s=e("../utils"),l=d(s);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){"object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function h(e){var t=l.detectBrowser(e);if("object"===("undefined"===typeof e?"undefined":n(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]})),t.version<68){var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var a={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],n=e[1],r=e[2];return o.apply(this,[i||null]).then((function(e){if(t.version<53&&!n)try{e.forEach((function(e){e.type=a[e.type]||e.type}))}catch(ia){if("TypeError"!==ia.name)throw ia;e.forEach((function(t,i){e.set(i,Object.assign({},t,{type:a[t.type]||t.type}))}))}return e})).then(n,r)}}}function x(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function f(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i}),l.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function p(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;l.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(i){i.track&&e.getTracks().includes(i.track)&&t.removeTrack(i)}))})}function m(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function _(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],i=e&&"sendEncodings"in e;i&&e.sendEncodings.forEach((function(e){if("rid"in e){var t=/^[a-z0-9]{0,16}$/i;if(!t.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var n=t.apply(this,arguments);if(i){var a=n.sender,o=a.getParameters();"encodings"in o||(o.encodings=e.sendEncodings,this.setParametersPromises.push(a.setParameters(o)["catch"]((function(){}))))}return n})}}function g(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)}))["finally"]((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function v(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)}))["finally"]((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,i){function n(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=n},{}],13:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)};i.shimGetUserMedia=l;var a=e("../utils"),r=s(a);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function l(e){var t=r.detectBrowser(e),i=e&&e.navigator,a=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var o=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},s=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"===("undefined"===typeof e?"undefined":n(e))&&"object"===n(e.audio)&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,"autoGainControl","mozAutoGainControl"),o(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},a&&a.prototype.getSettings){var l=a.prototype.getSettings;a.prototype.getSettings=function(){var e=l.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(a&&a.prototype.applyConstraints){var d=a.prototype.applyConstraints;a.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===("undefined"===typeof e?"undefined":n(e))&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[e])}}}}},{"../utils":15}],14:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)};i.shimLocalStreamsAPI=l,i.shimRemoteStreamsAPI=d,i.shimCallbacksAPI=c,i.shimGetUserMedia=u,i.shimConstraints=h,i.shimRTCIceServerUrls=x,i.shimTrackEventTransceiver=f,i.shimCreateOfferLegacy=p;var a=e("../utils"),r=s(a);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function l(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(n){return t.call(i,n,e)})),e.getVideoTracks().forEach((function(n){return t.call(i,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){var i=arguments[1];return i&&(this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(e);if(-1!==i){this._localStreams.splice(i,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}}function d(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var i=new Event("addstream");i.stream=e,t.dispatchEvent(i)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,a=t.createAnswer,o=t.setLocalDescription,r=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],a=i.apply(this,[n]);return t?(a.then(e,t),Promise.resolve()):a},t.createAnswer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],n=a.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n};var l=function(e,t,i){var n=o.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=l,l=function(e,t,i){var n=r.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=l,l=function(e,t,i){var n=s.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=l}}function u(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var i=t.mediaDevices,n=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=function(e){return n(h(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))}function h(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function x(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var n=[],a=0;a<e.iceServers.length;a++){var o=e.iceServers[a];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,n.push(o)):n.push(e.iceServers[a])}e.iceServers=n}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}function f(e){"object"===("undefined"===typeof e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var i=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveAudio||i||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}},{"../utils":15}],15:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)};function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.extractVersion=l,i.wrapPeerConnectionEvent=d,i.disableLog=c,i.disableWarnings=u,i.log=h,i.deprecated=x,i.detectBrowser=f,i.compactObject=m,i.walkStats=_,i.filterStats=g;var r=!0,s=!0;function l(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function d(e,t,i){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,a=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return a.apply(this,arguments);var o=function(e){var t=i(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,a.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);var n=this._eventMap[i];return delete this._eventMap[i],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function c(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":n(e))+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function u(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":n(e))+". Please use a boolean."):(s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function h(){if("object"===("undefined"===typeof window?"undefined":n(window))){if(r)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function x(e,t){s&&console.warn(e+" is deprecated, please use "+t+" instead.")}function f(e){var t=e.navigator,i={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return i.browser="Not a browser.",i;if(t.mozGetUserMedia)i.browser="firefox",i.version=l(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)i.browser="chrome",i.version=l(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=l(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=l(t.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return i}function p(e){return"[object Object]"===Object.prototype.toString.call(e)}function m(e){return p(e)?Object.keys(e).reduce((function(t,i){var n=p(e[i]),o=n?m(e[i]):e[i],r=n&&!Object.keys(o).length;return void 0===o||r?t:Object.assign(t,a({},i,o))}),{}):e}function _(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?_(e,e.get(t[n]),i):n.endsWith("Ids")&&t[n].forEach((function(t){_(e,e.get(t),i)}))})))}function g(e,t,i){var n=i?"outbound-rtp":"inbound-rtp",a=new Map;if(null===t)return a;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(i){i.type===n&&i.trackId===t.id&&_(e,i,a)}))})),a}},{}],16:[function(e,t,i){var n=e("sdp");function a(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function o(e,t,i,a,o){var r=n.writeRtpDescription(e.kind,t);if(r+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),r+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":o||"active"),r+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?r+="a=sendrecv\r\n":e.rtpSender?r+="a=sendonly\r\n":e.rtpReceiver?r+="a=recvonly\r\n":r+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var l="msid:"+(a?a.id:"-")+" "+s+"\r\n";r+="a="+l,r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,r+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),r}function r(e,t){var i=!1;return e=JSON.parse(JSON.stringify(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"===typeof n;return a&&(n=[n]),n=n.filter((function(e){var n=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!i;return n?(i=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=a?n[0]:n,!!n.length}}))}function s(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},a=function(e,t,i,a){var o=n(e.parameters.apt,i),r=n(t.parameters.apt,a);return o&&r&&o.name.toLowerCase()===r.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var r=t.codecs[o];if(n.name.toLowerCase()===r.name.toLowerCase()&&n.clockRate===r.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&r.parameters.apt&&!a(n,r,e.codecs,t.codecs))continue;r=JSON.parse(JSON.stringify(r)),r.numChannels=Math.min(n.numChannels,r.numChannels),i.codecs.push(r),r.rtcpFeedback=r.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var a=t.headerExtensions[n];if(e.uri===a.uri){i.headerExtensions.push(a);break}}})),i}function l(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function d(e,t){var i=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return i||e.addRemoteCandidate(t),!i}function c(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}t.exports=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,i){i.removeTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function h(t,i,n,a){var o=new Event("track");o.track=i,o.receiver=n,o.transceiver={receiver:n},o.streams=a,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var x=function(i){var a=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){a[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all";break}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced";break}if(i.iceServers=r(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var s=i.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(x.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(x.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),x.prototype.onicecandidate=null,x.prototype.onaddstream=null,x.prototype.ontrack=null,x.prototype.onremovestream=null,x.prototype.onsignalingstatechange=null,x.prototype.oniceconnectionstatechange=null,x.prototype.onconnectionstatechange=null,x.prototype.onicegatheringstatechange=null,x.prototype.onnegotiationneeded=null,x.prototype.ondatachannel=null,x.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},x.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},x.prototype.getConfiguration=function(){return this._config},x.prototype.getLocalStreams=function(){return this.localStreams},x.prototype.getRemoteStreams=function(){return this.remoteStreams},x.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();n.iceTransport=a.iceTransport,n.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(n),n},x.prototype.addTrack=function(t,i){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n,a=this.transceivers.find((function(e){return e.track===t}));if(a)throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},x.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach((function(t){i.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",(function(e){i.enabled=e.enabled}))})),n.getTracks().forEach((function(e){i.addTrack(e,n)}))}},x.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(e){return e.rtpSender===t}));if(!i)throw c("InvalidAccessError","Sender was not created by this connection.");var n=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null;var a=this.transceivers.map((function(e){return e.stream}));-1===a.indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},x.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));i&&t.removeTrack(i)}))},x.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},x.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},x.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var a=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(a,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;a.state=i?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},a.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),a},x.prototype._gather=function(t,i){var a=this,o=this.transceivers[i].iceGatherer;if(!o.onlocalcandidate){var r=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),o.onlocalcandidate=function(e){if(!(a.usingBundle&&i>0)){var r=new Event("icecandidate");r.candidate={sdpMid:t,sdpMLineIndex:i};var s=e.candidate,l=!s||0===Object.keys(s).length;if(l)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var d=n.writeCandidate(s);r.candidate=Object.assign(r.candidate,n.parseCandidate(d)),r.candidate.candidate=d,r.candidate.toJSON=function(){return{candidate:r.candidate.candidate,sdpMid:r.candidate.sdpMid,sdpMLineIndex:r.candidate.sdpMLineIndex,usernameFragment:r.candidate.usernameFragment}}}var c=n.getMediaSections(a._localDescription.sdp);c[r.candidate.sdpMLineIndex]+=l?"a=end-of-candidates\r\n":"a="+r.candidate.candidate+"\r\n",a._localDescription.sdp=n.getDescription(a._localDescription.sdp)+c.join("");var u=a.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==a.iceGatheringState&&(a.iceGatheringState="gathering",a._emitGatheringStateChange()),l||a._dispatchEvent("icecandidate",r),u&&(a._dispatchEvent("icecandidate",new Event("icecandidate")),a.iceGatheringState="complete",a._emitGatheringStateChange())}},e.setTimeout((function(){r.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},x.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},x.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},x.prototype._transceive=function(e,i,a){var o=s(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),a&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?o.encodings=e.recvEncodingParameters:o.encodings=[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},x.prototype.setLocalDescription=function(e){var t,i,a=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!l("setLocalDescription",e.type,a.signalingState)||a._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+a.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),i=t.shift(),t.forEach((function(e,t){var i=n.parseRtpParameters(e);a.transceivers[t].localCapabilities=i})),a.transceivers.forEach((function(e,t){a._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(a._remoteDescription.sdp),i=t.shift();var o=n.matchPrefix(i,"a=ice-lite").length>0;t.forEach((function(e,t){var r=a.transceivers[t],l=r.iceGatherer,d=r.iceTransport,c=r.dtlsTransport,u=r.localCapabilities,h=r.remoteCapabilities,x=n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length;if(!x&&!r.rejected){var f=n.getIceParameters(e,i),p=n.getDtlsParameters(e,i);o&&(p.role="server"),a.usingBundle&&0!==t||(a._gather(r.mid,t),"new"===d.state&&d.start(l,f,o?"controlling":"controlled"),"new"===c.state&&c.start(p));var m=s(u,h);a._transceive(r,m.codecs.length>0,!1)}}))}return a._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?a._updateSignalingState("have-local-offer"):a._updateSignalingState("stable"),Promise.resolve()},x.prototype.setRemoteDescription=function(a){var o=this;if(-1===["offer","answer"].indexOf(a.type))return Promise.reject(c("TypeError",'Unsupported type "'+a.type+'"'));if(!l("setRemoteDescription",a.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+a.type+" in state "+o.signalingState));var r={};o.remoteStreams.forEach((function(e){r[e.id]=e}));var x=[],f=n.splitSections(a.sdp),p=f.shift(),m=n.matchPrefix(p,"a=ice-lite").length>0,_=n.matchPrefix(p,"a=group:BUNDLE ").length>0;o.usingBundle=_;var g=n.matchPrefix(p,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(l,c){var h=n.splitLines(l),f=n.getKind(l),g=n.isRejected(l)&&0===n.matchPrefix(l,"a=bundle-only").length,v=h[0].substr(2).split(" ")[2],y=n.getDirection(l,p),b=n.parseMsid(l),S=n.getMid(l)||n.generateIdentifier();if(g||"application"===f&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))o.transceivers[c]={mid:S,kind:f,protocol:v,rejected:!0};else{var C,w,T,P,E,k,R,I,D;!g&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(f,!0));var M,A,B=n.parseRtpParameters(l);g||(M=n.getIceParameters(l,p),A=n.getDtlsParameters(l,p),A.role="client"),R=n.parseRtpEncodingParameters(l);var L=n.parseRtcpParameters(l),F=n.matchPrefix(l,"a=end-of-candidates",p).length>0,j=n.matchPrefix(l,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===a.type||"answer"===a.type)&&!g&&_&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==a.type||g){if("answer"===a.type&&!g){C=o.transceivers[c],w=C.iceGatherer,T=C.iceTransport,P=C.dtlsTransport,E=C.rtpReceiver,k=C.sendEncodingParameters,I=C.localCapabilities,o.transceivers[c].recvEncodingParameters=R,o.transceivers[c].remoteCapabilities=B,o.transceivers[c].rtcpParameters=L,j.length&&"new"===T.state&&(!m&&!F||_&&0!==c?j.forEach((function(e){d(C.iceTransport,e)})):T.setRemoteCandidates(j)),_&&0!==c||("new"===T.state&&T.start(w,M,"controlling"),"new"===P.state&&P.start(A));var z=s(C.localCapabilities,C.remoteCapabilities),O=z.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!O&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,o._transceive(C,"sendrecv"===y||"recvonly"===y,"sendrecv"===y||"sendonly"===y),!E||"sendrecv"!==y&&"sendonly"!==y?delete C.rtpReceiver:(D=E.track,b?(r[b.stream]||(r[b.stream]=new e.MediaStream),i(D,r[b.stream]),x.push([D,E,r[b.stream]])):(r["default"]||(r["default"]=new e.MediaStream),i(D,r["default"]),x.push([D,E,r["default"]])))}}else{C=o.transceivers[c]||o._createTransceiver(f),C.mid=S,C.iceGatherer||(C.iceGatherer=o._createIceGatherer(c,_)),j.length&&"new"===C.iceTransport.state&&(!F||_&&0!==c?j.forEach((function(e){d(C.iceTransport,e)})):C.iceTransport.setRemoteCandidates(j)),I=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),k=C.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var N,U=!1;if("sendrecv"===y||"sendonly"===y){if(U=!C.rtpReceiver,E=C.rtpReceiver||new e.RTCRtpReceiver(C.dtlsTransport,f),U)D=E.track,b&&"-"===b.stream||(b?(r[b.stream]||(r[b.stream]=new e.MediaStream,Object.defineProperty(r[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(D,"id",{get:function(){return b.track}}),N=r[b.stream]):(r["default"]||(r["default"]=new e.MediaStream),N=r["default"])),N&&(i(D,N),C.associatedRemoteMediaStreams.push(N)),x.push([D,E,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===C.rtpReceiver.track.id}));t&&u(t,e)})),C.associatedRemoteMediaStreams=[]);C.localCapabilities=I,C.remoteCapabilities=B,C.rtpReceiver=E,C.rtcpParameters=L,C.sendEncodingParameters=k,C.recvEncodingParameters=R,o._transceive(o.transceivers[c],!1,U)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===a.type?"active":"passive"),o._remoteDescription={type:a.type,sdp:a.sdp},"offer"===a.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(r).forEach((function(t){var i=r[t];if(i.getTracks().length){if(-1===o.remoteStreams.indexOf(i)){o.remoteStreams.push(i);var n=new Event("addstream");n.stream=i,e.setTimeout((function(){o._dispatchEvent("addstream",n)}))}x.forEach((function(e){var t=e[0],n=e[1];i.id===e[2].id&&h(o,t,n,[i])}))}})),x.forEach((function(e){e[2]||h(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},x.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},x.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},x.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},x.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t["new"]>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},x.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t["new"]>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},x.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var a=i.transceivers.filter((function(e){return"audio"===e.kind})).length,r=i.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(a=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(r=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}i.transceivers.forEach((function(e){"audio"===e.kind?(a--,a<0&&(e.wantReceive=!1)):"video"===e.kind&&(r--,r<0&&(e.wantReceive=!1))}));while(a>0||r>0)a>0&&(i._createTransceiver("audio"),a--),r>0&&(i._createTransceiver("video"),r--);var l=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(a,o){var r=a.track,s=a.kind,l=a.mid||n.generateIdentifier();a.mid=l,a.iceGatherer||(a.iceGatherer=i._createIceGatherer(o,i.usingBundle));var d=e.RTCRtpSender.getCapabilities(s);t<15019&&(d.codecs=d.codecs.filter((function(e){return"rtx"!==e.name}))),d.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),a.remoteCapabilities&&a.remoteCapabilities.codecs&&a.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),d.headerExtensions.forEach((function(e){var t=a.remoteCapabilities&&a.remoteCapabilities.headerExtensions||[];t.forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var c=a.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];r&&t>=15019&&"video"===s&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),a.wantReceive&&(a.rtpReceiver=new e.RTCRtpReceiver(a.dtlsTransport,s)),a.localCapabilities=d,a.sendEncodingParameters=c})),"max-compat"!==i._config.bundlePolicy&&(l+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){l+=o(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,l+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))}));var d=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(d)},x.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var a=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(a+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var r=n.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(e,n){if(!(n+1>r)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var l;if(e.stream)"audio"===e.kind?l=e.stream.getAudioTracks()[0]:"video"===e.kind&&(l=e.stream.getVideoTracks()[0]),l&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var d=s(e.localCapabilities,e.remoteCapabilities),c=d.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!c&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,d,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var l=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(l)},x.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(a,o){if(!i._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var r=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<i.transceivers.length;s++)if(i.transceivers[s].mid===e.sdpMid){r=s;break}var l=i.transceivers[r];if(!l)return o(c("OperationError","Can not add ICE candidate"));if(l.rejected)return a();var u=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return a();if(u.component&&1!==u.component)return a();if((0===r||r>0&&l.iceTransport!==i.transceivers[0].iceTransport)&&!d(l.iceTransport,u))return o(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),t=n.getMediaSections(i._remoteDescription.sdp),t[r]+="a="+(u.type?h:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=n.getDescription(i._remoteDescription.sdp)+t.join("")}else for(var x=0;x<i.transceivers.length;x++)if(!i.transceivers[x].rejected&&(i.transceivers[x].iceTransport.addRemoteCandidate({}),t=n.getMediaSections(i._remoteDescription.sdp),t[x]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=n.getDescription(i._remoteDescription.sdp)+t.join(""),i.usingBundle))break;a()}))},x.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?i=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(i=e.rtpReceiver)})),!i)throw c("InvalidAccessError","Invalid selector.");return i.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};var f=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];f.forEach((function(t){var i=e[t];if(i&&i.prototype&&i.prototype.getStats){var n=i.prototype.getStats;i.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(i){e[i].type=a(e[i]),t.set(i,e[i])})),t}))}}}));var p=["createOffer","createAnswer"];return p.forEach((function(e){var t=x.prototype[e];x.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),p=["setLocalDescription","setRemoteDescription","addIceCandidate"],p.forEach((function(e){var t=x.prototype[e];x.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=x.prototype[e];x.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),x}},{sdp:17}],17:[function(e,t,i){var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){var t=e.split("\nm=");return t.map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var i={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1];break}return i},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,i={},n=e.substr(e.indexOf(" ")+1).split(";"),a=0;a<n.length;a++)t=n[a].trim().split("="),i[t[0].trim()]=t[1];return i},n.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){var i=n.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:i.map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},n.getIceParameters=function(e,t){var i=n.splitLines(e);i=i.concat(n.splitLines(t));var a={usernameFragment:i.filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:i.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)};return a},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(e),a=i[0].split(" "),o=3;o<a.length;o++){var r=a[o],s=n.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(s){var l=n.parseRtpMap(s),d=n.matchPrefix(e,"a=fmtp:"+r+" ");switch(l.parameters=d.length?n.parseFmtp(d[0]):{},l.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(n.parseRtcpFb),t.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(l.name.toUpperCase());break}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){i+=n.writeRtpMap(e),i+=n.writeFmtp(e),i+=n.writeRtcpFb(e)}));var a=0;return t.codecs.forEach((function(e){e.maxptime>a&&(a=e.maxptime)})),a>0&&(i+="a=maxptime:"+a+"\r\n"),i+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){i+=n.writeExtmap(e)})),i},n.parseRtpEncodingParameters=function(e){var t,i=[],a=n.parseRtpParameters(e),o=-1!==a.fecMechanisms.indexOf("RED"),r=-1!==a.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),l=s.length>0&&s[0].ssrc,d=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.substr(17).split(" ");return t.map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===l&&(t=d[0][1]),a.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:l,codecPayloadType:parseInt(e.parameters.apt,10)};l&&t&&(n.rtx={ssrc:t}),i.push(n),o&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:l,mechanism:r?"red+ulpfec":"red"},i.push(n))}})),0===i.length&&l&&i.push({ssrc:l});var c=n.matchPrefix(e,"b=");return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=c}))),i},n.parseRtcpParameters=function(e){var t={},i=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var a=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=a.length>0,t.compound=0===a.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,i=n.matchPrefix(e,"a=msid:");if(1===i.length)return t=i[0].substr(7).split(" "),{stream:t[0],track:t[1]};var a=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return a.length>0?(t=a[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},n.parseSctpDescription=function(e){var t,i=n.parseMLine(e),a=n.matchPrefix(e,"a=max-message-size:");a.length>0&&(t=parseInt(a[0].substr(19),10)),isNaN(t)&&(t=65536);var o=n.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:i.fmt,maxMessageSize:t};var r=n.matchPrefix(e,"a=sctpmap:");if(r.length>0){var s=n.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},n.writeSctpDescription=function(e,t){var i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,i){var a,o=void 0!==t?t:2;a=e||n.generateSessionId();var r=i||"thisisadapterortc";return"v=0\r\no="+r+" "+a+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,i,a){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var r="msid:"+a.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+r,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+r,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+r,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var i=n.splitLines(e),a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){var t=n.splitLines(e),i=t[0].split(" ");return i[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e),i=t[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0],i=t.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},n.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=n.splitLines(e),i=0;i<t.length;i++)if(t[i].length<2||"="!==t[i].charAt(1))return!1;return!0},"object"===o(t)&&(t.exports=n)},{}]},{},[1])(1)}))})(me),ge.sessions={},ge.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||ge.extension.isInstalled()}return!0};var _e={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var i=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var n=new Error("NavigatorUserMediaError");n.name="You cancelled the request for permission, giving up...",i(n)}else i(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function ge(e){if(void 0===ge.initDone)return e.error("Library not initialized"),{};if(!ge.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(ge.log("Library initialized: "+ge.initDone),e=e||{},e.success="function"==typeof e.success?e.success:ge.noop,e.error="function"==typeof e.error?e.error:ge.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:ge.noop,null===e.server||void 0===e.server)return e.error("Invalid server url"),{};var t=!1,i=null,n={},a=null,r=null,s=0,l=e.server;ge.isArray(l)?(ge.log("Multiple servers provided ("+l.length+"), will use the first that works"),l=null,r=e.server,ge.debug(r)):0===l.indexOf("ws")?(t=!0,ge.log("Using WebSockets to contact Janus: "+l)):(t=!1,ge.log("Using REST API to contact Janus: "+l));var d=e.iceServers;void 0!==d&&null!==d||(d=[{urls:"stun:stun.l.google.com:19302"}]);var c=e.iceTransportPolicy,u=e.bundlePolicy,h=e.ipv6;void 0!==h&&null!==h||(h=!1);var x=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(x=!0===e.withCredentials);var f=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(f=e.max_poll_events),f<1&&(f=1);var p=null;void 0!==e.token&&null!==e.token&&(p=e.token);var m=null;void 0!==e.apisecret&&null!==e.apisecret&&(m=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var _=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(_=e.keepAlivePeriod),isNaN(_)&&(_=25e3);var g=6e4;function v(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(g=e.longPollTimeout),isNaN(g)&&(g=6e4);var y=!1,b=null,S={},C=this,w=0,T={};function P(){if(null!=b)if(ge.debug("Long poll..."),y){var t=l+"/"+b+"?rid="+(new Date).getTime();void 0!==f&&null!==f&&(t=t+"&maxev="+f),null!==p&&void 0!==p&&(t=t+"&token="+encodeURIComponent(p)),null!==m&&void 0!==m&&(t=t+"&apisecret="+encodeURIComponent(m)),ge.httpAPICall(t,{verb:"GET",withCredentials:x,success:E,timeout:g,error:function(t,i){if(ge.error(t+":",i),w++,w>3)return y=!1,void e.error("Lost connection to the server (is it down?)");P()}})}else ge.warn("Is the server down? (connected=false)")}function E(e,n){if(w=0,t||void 0===b||null===b||!0===n||P(),t||!ge.isArray(e))if("keepalive"!==e["rtcgw"])if("ack"!==e["rtcgw"])if("success"!==e["rtcgw"])if("trickle"===e["rtcgw"]){var a=e["sender"];if(void 0===a||null===a)return void ge.warn("Missing sender...");var o=S[a];if(void 0===o||null===o)return void ge.debug("This handle is not attached to this session");var r=e["candidate"];ge.debug("Got a trickled candidate on session "+b),ge.debug(r);var s=o.webrtcStuff;s.pc&&s.remoteSdp?(ge.debug("Adding remote candidate:",r),r&&!0!==r.completed?s.pc.addIceCandidate(r):s.pc.addIceCandidate(ge.endOfCandidates)):(ge.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),s.candidates||(s.candidates=[]),s.candidates.push(r),ge.debug(s.candidates))}else{if("webrtcup"===e["rtcgw"]){ge.debug("Got a webrtcup event on session "+b),ge.debug(e);a=e["sender"];if(void 0===a||null===a)return void ge.warn("Missing sender...");o=S[a];return void 0===o||null===o?void ge.debug("This handle is not attached to this session"):void o.webrtcState(!0)}if("hangup"===e["rtcgw"]){ge.debug("Got a hangup event on session "+b),ge.debug(e);a=e["sender"];if(void 0===a||null===a)return void ge.warn("Missing sender...");o=S[a];if(void 0===o||null===o)return void ge.debug("This handle is not attached to this session");o.webrtcState(!1,e["reason"]),o.hangup()}else if("detached"===e["rtcgw"]){ge.debug("Got a detached event on session "+b),ge.debug(e);a=e["sender"];if(void 0===a||null===a)return void ge.warn("Missing sender...");o=S[a];if(void 0===o||null===o)return;o.detached=!0,o.ondetached(),o.detach()}else if("media"===e["rtcgw"]){ge.debug("Got a media event on session "+b),ge.debug(e);a=e["sender"];if(void 0===a||null===a)return void ge.warn("Missing sender...");o=S[a];if(void 0===o||null===o)return void ge.debug("This handle is not attached to this session");o.mediaState(e["type"],e["receiving"])}else if("slowlink"===e["rtcgw"]){ge.debug("Got a slowlink event on session "+b),ge.debug(e);a=e["sender"];if(void 0===a||null===a)return void ge.warn("Missing sender...");o=S[a];if(void 0===o||null===o)return void ge.debug("This handle is not attached to this session");o.slowLink(e["uplink"],e["lost"])}else{if("error"===e["rtcgw"]){ge.error("Ooops: "+e["error"].code+" "+e["error"].reason),ge.debug(e);h=e["transaction"];if(null!==h&&void 0!==h){x=T[h];null!==x&&void 0!==x&&x(e),delete T[h]}return}if("event"===e["rtcgw"]){ge.debug("Got a plugin event on session "+b),ge.debug(e);a=e["sender"];if(void 0===a||null===a)return void ge.warn("Missing sender...");var l=e["plugindata"];if(void 0===l||null===l)return void ge.warn("Missing plugindata...");ge.debug("  -- Event is coming from "+a+" ("+l["plugin"]+")");var d=l["data"];ge.debug(d);o=S[a];if(void 0===o||null===o)return void ge.warn("This handle is not attached to this session");var c=e["jsep"];void 0!==c&&null!==c&&(ge.debug("Handling SDP as well..."),ge.debug(c));var u=o.onmessage;null!==u&&void 0!==u?(ge.debug("Notifying application..."),u(d,c)):ge.debug("No provided notification callback")}else{if("timeout"===e["rtcgw"])return ge.error("Timeout on session "+b),ge.debug(e),void(t&&i.close(3504,"Gateway timeout"));ge.warn("Unknown message/event  '"+e["rtcgw"]+"' on session "+b),ge.debug(e)}}}else{ge.debug("Got a success on session "+b),ge.debug(e);var h=e["transaction"];if(null!==h&&void 0!==h){var x=T[h];null!==x&&void 0!==x&&x(e),delete T[h]}}else{ge.debug("Got an ack on session "+b),ge.debug(e);var h=e["transaction"];if(null!==h&&void 0!==h){var x=T[h];null!==x&&void 0!==x&&x(e),delete T[h]}}else ge.vdebug("Got a keepalive on session "+b);else for(var f=0;f<e.length;f++)E(e[f],!0)}function k(){if(null!==l&&t&&y){a=setTimeout(k,_);var e={rtcgw:"keepalive",session_id:b,transaction:ge.randomString(12)};null!==p&&void 0!==p&&(e["token"]=p),null!==m&&void 0!==m&&(e["apisecret"]=m),i.send(JSON.stringify(e))}}function R(o){var d=ge.randomString(12),c={rtcgw:"create",transaction:d,token:window.EZUIKit.opt.stream,device:window.EZUIKit.opt.deviceSerial,channel:window.EZUIKit.opt.channelNo};if(o["reconnect"]&&(y=!1,c["rtcgw"]="claim",c["session_id"]=b,i&&(i.onopen=null,i.onerror=null,i.onclose=null,a&&(clearTimeout(a),a=null))),null!==p&&void 0!==p&&(c["token"]=p),null!==m&&void 0!==m&&(c["apisecret"]=m),null===l&&ge.isArray(r)&&(l=r[s],0===l.indexOf("ws")?(t=!0,ge.log("Server #"+(s+1)+": trying WebSockets to contact Janus ("+l+")")):(t=!1,ge.log("Server #"+(s+1)+": trying REST API to contact Janus ("+l+")"))),t)for(var u in i=ge.newWebSocket(l,"rtcgw-protocol"),n={error:function(){if(ge.error("Error connecting to the Janus WebSockets server... "+l),ge.isArray(r)&&!o["reconnect"])return s++,s==r.length?void o.error("Error connecting to any of the provided Janus servers: Is the server down?"):(l=null,void setTimeout((function(){R(o)}),200));o.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){T[d]=function(e){if(ge.debug(e),"success"!==e["rtcgw"])return ge.error("Ooops: "+e["error"].code+" "+e["error"].reason),void o.error(e["error"].reason);a=setTimeout(k,_),y=!0,b=e["session_id"]?e["session_id"]:e.data["id"],o["reconnect"]?ge.log("Claimed session: "+b):ge.log("Created session: "+b),ge.sessions[b]=C,o.success()},i.send(JSON.stringify(c))},message:function(e){E(JSON.parse(e.data))},close:function(){null!==l&&y&&(y=!1,e.error("Lost connection to the server (is it down?)"))}},n)i.addEventListener(u,n[u]);else ge.httpAPICall(l,{verb:"POST",withCredentials:x,body:c,success:function(e){if(ge.debug(e),"success"!==e["rtcgw"])return ge.error("Ooops: "+e["error"].code+" "+e["error"].reason),void o.error(e["error"].reason);y=!0,b=e["session_id"]?e["session_id"]:e.data["id"],o["reconnect"]?ge.log("Claimed session: "+b):ge.log("Created session: "+b),ge.sessions[b]=C,P(),o.success()},error:function(e,t){if(ge.error(e+":",t),ge.isArray(r)&&!o["reconnect"])return s++,s==r.length?void o.error("Error connecting to any of the provided Janus servers: Is the server down?"):(l=null,void setTimeout((function(){R(o)}),200));""===t?o.error(e+": Is the server down?"):o.error(e+": "+t)}})}function I(o){o=o||{},o.success="function"==typeof o.success?o.success:ge.noop;var r=!0;void 0!==o.asyncRequest&&null!==o.asyncRequest&&(r=!0===o.asyncRequest);var s=!0;void 0!==o.notifyDestroyed&&null!==o.notifyDestroyed&&(s=!0===o.notifyDestroyed);var d=!1;if(void 0!==o.cleanupHandles&&null!==o.cleanupHandles&&(d=!0===o.cleanupHandles),ge.log("Destroying session "+b+" (async="+r+")"),!y)return ge.warn("Is the server down? (connected=false)"),void o.success();if(void 0===b||null===b)return ge.warn("No session to destroy"),o.success(),void(s&&e.destroyed());if(d)for(var c in S)j(c,{noRequest:!0});var u={rtcgw:"destroy",transaction:ge.randomString(12)};if(null!==p&&void 0!==p&&(u["token"]=p),null!==m&&void 0!==m&&(u["apisecret"]=m),t){u["session_id"]=b;var h=function(){for(var e in n)i.removeEventListener(e,n[e]);i.removeEventListener("message",f),i.removeEventListener("error",_),a&&clearTimeout(a),i.close()},f=function(t){var i=JSON.parse(t.data);i.session_id==u.session_id&&i.transaction==u.transaction&&(h(),o.success(),s&&e.destroyed())},_=function(t){h(),o.error("Failed to destroy the server: Is the server down?"),s&&e.destroyed()};return i.addEventListener("message",f),i.addEventListener("error",_),void i.send(JSON.stringify(u))}ge.httpAPICall(l+"/"+b,{verb:"POST",async:r,withCredentials:x,body:u,success:function(t){ge.log("Destroyed session:"),ge.debug(t),b=null,y=!1,"success"!==t["rtcgw"]&&ge.error("Ooops: "+t["error"].code+" "+t["error"].reason),o.success(),s&&e.destroyed()},error:function(t,i){ge.error(t+":",i),b=null,y=!1,o.success(),s&&e.destroyed()}})}function D(e){if(e=e||{},e.success="function"==typeof e.success?e.success:ge.noop,e.error="function"==typeof e.error?e.error:ge.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:ge.noop,e.iceState="function"==typeof e.iceState?e.iceState:ge.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:ge.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:ge.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:ge.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:ge.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:ge.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:ge.noop,e.ondata="function"==typeof e.ondata?e.ondata:ge.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:ge.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:ge.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:ge.noop,!y)return ge.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var n=e.plugin;if(void 0===n||null===n)return ge.error("Invalid plugin"),void e.error("Invalid plugin");var a=e.opaqueId,o=e.token?e.token:p,r=ge.randomString(12),s={rtcgw:"attach",plugin:n,opaque_id:a,transaction:r};if(null!==o&&void 0!==o&&(s["token"]=o),null!==m&&void 0!==m&&(s["apisecret"]=m),t)return T[r]=function(t){if(ge.debug(t),"success"!==t["rtcgw"])return ge.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error("Ooops: "+t["error"].code+" "+t["error"].reason);var i=t.data["id"];ge.log("Created handle: "+i);var a={session:C,plugin:n,id:i,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return i},getPlugin:function(){return n},getVolume:function(){return G(i,!0)},getRemoteVolume:function(){return G(i,!0)},getLocalVolume:function(){return G(i,!1)},isAudioMuted:function(){return Y(i,!1)},muteAudio:function(){return W(i,!1,!0)},unmuteAudio:function(){return W(i,!1,!1)},isVideoMuted:function(){return Y(i,!0)},muteVideo:function(){return W(i,!0,!0)},unmuteVideo:function(){return W(i,!0,!1)},getBitrate:function(){return Z(i)},send:function(e){M(i,e)},data:function(e){L(i,e)},dtmf:function(e){F(i,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){O(i,!0,e)},createAnswer:function(e){O(i,!1,e)},handleRemoteJsep:function(e){N(i,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){J(i,!0===e)},detach:function(e){j(i,e)}};S[i]=a,e.success(a)},s["session_id"]=b,void i.send(JSON.stringify(s));ge.httpAPICall(l+"/"+b,{verb:"POST",withCredentials:x,body:s,success:function(t){if(ge.debug(t),"success"!==t["rtcgw"])return ge.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error("Ooops: "+t["error"].code+" "+t["error"].reason);var i=t.data["id"];ge.log("Created handle: "+i);var a={session:C,plugin:n,id:i,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return i},getPlugin:function(){return n},getVolume:function(){return G(i,!0)},getRemoteVolume:function(){return G(i,!0)},getLocalVolume:function(){return G(i,!1)},isAudioMuted:function(){return Y(i,!1)},muteAudio:function(){return W(i,!1,!0)},unmuteAudio:function(){return W(i,!1,!1)},isVideoMuted:function(){return Y(i,!0)},muteVideo:function(){return W(i,!0,!0)},unmuteVideo:function(){return W(i,!0,!1)},getBitrate:function(){return Z(i)},send:function(e){M(i,e)},data:function(e){L(i,e)},dtmf:function(e){F(i,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){O(i,!0,e)},createAnswer:function(e){O(i,!1,e)},handleRemoteJsep:function(e){N(i,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){J(i,!0===e)},detach:function(e){j(i,e)}};S[i]=a,e.success(a)},error:function(e,t){ge.error(e+":",t)}})}function M(e,n){if(n=n||{},n.success="function"==typeof n.success?n.success:ge.noop,n.error="function"==typeof n.error?n.error:ge.noop,!y)return ge.warn("Is the server down? (connected=false)"),void n.error("Is the server down? (connected=false)");var a=S[e];if(null===a||void 0===a||null===a.webrtcStuff||void 0===a.webrtcStuff)return ge.warn("Invalid handle"),void n.error("Invalid handle");var o=n.message,r=n.jsep,s=ge.randomString(12),d={rtcgw:"message",body:o,transaction:s};if(null!==a.token&&void 0!==a.token&&(d["token"]=a.token),null!==m&&void 0!==m&&(d["apisecret"]=m),null!==r&&void 0!==r&&(d.jsep=r),ge.debug("Sending message to plugin (handle="+e+"):"),ge.debug(d),t)return d["session_id"]=b,d["handle_id"]=e,T[s]=function(e){if(ge.debug("Message sent!"),ge.debug(e),"success"===e["rtcgw"]){var t=e["plugindata"];if(void 0===t||null===t)return ge.warn("Request succeeded, but missing plugindata..."),void n.success();ge.log("Synchronous transaction successful ("+t["plugin"]+")");var i=t["data"];return ge.debug(i),void n.success(i)}"ack"===e["rtcgw"]?n.success():void 0!==e["error"]&&null!==e["error"]?(ge.error("Ooops: "+e["error"].code+" "+e["error"].reason),n.error(e["error"].code+" "+e["error"].reason)):(ge.error("Unknown error"),n.error("Unknown error"))},void i.send(JSON.stringify(d));ge.httpAPICall(l+"/"+b+"/"+e,{verb:"POST",withCredentials:x,body:d,success:function(e){if(ge.debug("Message sent!"),ge.debug(e),"success"===e["rtcgw"]){var t=e["plugindata"];if(void 0===t||null===t)return ge.warn("Request succeeded, but missing plugindata..."),void n.success();ge.log("Synchronous transaction successful ("+t["plugin"]+")");var i=t["data"];return ge.debug(i),void n.success(i)}"ack"===e["rtcgw"]?n.success():void 0!==e["error"]&&null!==e["error"]?(ge.error("Ooops: "+e["error"].code+" "+e["error"].reason),n.error(e["error"].code+" "+e["error"].reason)):(ge.error("Unknown error"),n.error("Unknown error"))},error:function(e,t){ge.error(e+":",t),n.error(e+": "+t)}})}function A(e,n){if(y){var a=S[e];if(null!==a&&void 0!==a&&null!==a.webrtcStuff&&void 0!==a.webrtcStuff){var o={rtcgw:"trickle",candidate:n,transaction:ge.randomString(12)};if(null!==a.token&&void 0!==a.token&&(o["token"]=a.token),null!==m&&void 0!==m&&(o["apisecret"]=m),ge.vdebug("Sending trickle candidate (handle="+e+"):"),ge.vdebug(o),t)return o["session_id"]=b,o["handle_id"]=e,void i.send(JSON.stringify(o));ge.httpAPICall(l+"/"+b+"/"+e,{verb:"POST",withCredentials:x,body:o,success:function(e){ge.vdebug("Candidate sent!"),ge.vdebug(e),"ack"===e["rtcgw"]||ge.error("Ooops: "+e["error"].code+" "+e["error"].reason)},error:function(e,t){ge.error(e+":",t)}})}else ge.warn("Invalid handle")}else ge.warn("Is the server down? (connected=false)")}function B(e,t,i,n){var a=S[e];if(null!==a&&void 0!==a&&null!==a.webrtcStuff&&void 0!==a.webrtcStuff){var o=a.webrtcStuff,r=function(e){ge.log("Received message on data channel:",e);var t=e.target.label;a.ondata(e.data,t)},s=function(e){ge.log("Received state change on data channel:",e);var t=e.target.label,i=o.dataChannel[t]?o.dataChannel[t].readyState:"null";if(ge.log("State change on <"+t+"> data channel: "+i),"open"===i){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){for(var n in ge.log("Sending pending messages on <"+t+">:",o.dataChannel[t].pending.length),o.dataChannel[t].pending){var r=o.dataChannel[t].pending[n];ge.log("Sending string on data channel <"+t+">: "+r),o.dataChannel[t].send(r)}o.dataChannel[t].pending=[]}a.ondataopen(t)}},l=function(e){ge.error("Got error on data channel:",e)};o.dataChannel[t]=i||o.pc.createDataChannel(t,{ordered:!1}),o.dataChannel[t].onmessage=r,o.dataChannel[t].onopen=s,o.dataChannel[t].onclose=s,o.dataChannel[t].onerror=l,o.dataChannel[t].pending=[],n&&o.dataChannel[t].pending.push(n)}else ge.warn("Invalid handle")}function L(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ge.noop,t.error="function"==typeof t.error?t.error:ge.noop;var i=S[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ge.warn("Invalid handle"),void t.error("Invalid handle");var n=i.webrtcStuff,a=t.text;if(null===a||void 0===a)return ge.warn("Invalid text"),void t.error("Invalid text");var o=t.label?t.label:ge.dataChanDefaultLabel;return n.dataChannel[o]?"open"!==n.dataChannel[o].readyState?(n.dataChannel[o].pending.push(a),void t.success()):(ge.log("Sending string on data channel <"+o+">: "+a),n.dataChannel[o].send(a),void t.success()):(B(e,o,!1,a),void t.success())}function F(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ge.noop,t.error="function"==typeof t.error?t.error:ge.noop;var i=S[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ge.warn("Invalid handle"),void t.error("Invalid handle");var n=i.webrtcStuff;if(null===n.dtmfSender||void 0===n.dtmfSender){if(void 0!==n.pc&&null!==n.pc){var a=n.pc.getSenders(),o=a.find((function(e){return e.track&&"audio"===e.track.kind}));if(!o)return ge.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");n.dtmfSender=o.dtmf,n.dtmfSender&&(ge.log("Created DTMF Sender"),n.dtmfSender.ontonechange=function(e){ge.debug("Sent DTMF tone: "+e.tone)})}if(null===n.dtmfSender||void 0===n.dtmfSender)return ge.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var r=t.dtmf;if(null===r||void 0===r)return ge.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var s=r.tones;if(null===s||void 0===s)return ge.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var l=r.duration;null!==l&&void 0!==l||(l=500);var d=r.gap;null!==d&&void 0!==d||(d=50),ge.debug("Sending DTMF string "+s+" (duration "+l+"ms, gap "+d+"ms)"),n.dtmfSender.insertDTMF(s,l,d),t.success()}function j(e,n){n=n||{},n.success="function"==typeof n.success?n.success:ge.noop,n.error="function"==typeof n.error?n.error:ge.noop;var a=!0;void 0!==n.asyncRequest&&null!==n.asyncRequest&&(a=!0===n.asyncRequest);var o=!0;void 0!==n.noRequest&&null!==n.noRequest&&(o=!0===n.noRequest),ge.log("Destroying handle "+e+" (async="+a+")"),J(e);var r=S[e];if(null===r||void 0===r||r.detached)return delete S[e],void n.success();if(o)return delete S[e],void n.success();if(!y)return ge.warn("Is the server down? (connected=false)"),void n.error("Is the server down? (connected=false)");var s={rtcgw:"detach",transaction:ge.randomString(12)};if(null!==r.token&&void 0!==r.token&&(s["token"]=r.token),null!==m&&void 0!==m&&(s["apisecret"]=m),t)return s["session_id"]=b,s["handle_id"]=e,i.send(JSON.stringify(s)),delete S[e],void n.success();ge.httpAPICall(l+"/"+b+"/"+e,{verb:"POST",async:a,withCredentials:x,body:s,success:function(t){ge.log("Destroyed handle:"),ge.debug(t),"success"!==t["rtcgw"]&&ge.error("Ooops: "+t["error"].code+" "+t["error"].reason),delete S[e],n.success()},error:function(t,i){ge.error(t+":",i),delete S[e],n.success()}})}function z(e,t,i,n,a){var r=S[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return ge.warn("Invalid handle"),void n.error("Invalid handle");var s=r.webrtcStuff;ge.debug("streamsDone:",a),a&&(ge.debug("  -- Audio tracks:",a.getAudioTracks()),ge.debug("  -- Video tracks:",a.getVideoTracks()));var l=!1;if(s.myStream&&i.update&&!s.streamExternal){if((!i.update&&K(i)||i.update&&(i.addAudio||i.replaceAudio))&&a.getAudioTracks()&&a.getAudioTracks().length)if(s.myStream.addTrack(a.getAudioTracks()[0]),ge.unifiedPlan){ge.log((i.replaceAudio?"Replacing":"Adding")+" audio track:",a.getAudioTracks()[0]);var x=null,f=s.pc.getTransceivers();if(f&&f.length>0)for(var p in f){var m=f[p];if(m.sender&&m.sender.track&&"audio"===m.sender.track.kind||m.receiver&&m.receiver.track&&"audio"===m.receiver.track.kind){x=m;break}}x&&x.sender?x.sender.replaceTrack(a.getAudioTracks()[0]):s.pc.addTrack(a.getAudioTracks()[0],a)}else ge.log((i.replaceAudio?"Replacing":"Adding")+" audio track:",a.getAudioTracks()[0]),s.pc.addTrack(a.getAudioTracks()[0],a);if((!i.update&&ee(i)||i.update&&(i.addVideo||i.replaceVideo))&&a.getVideoTracks()&&a.getVideoTracks().length)if(s.myStream.addTrack(a.getVideoTracks()[0]),ge.unifiedPlan){ge.log((i.replaceVideo?"Replacing":"Adding")+" video track:",a.getVideoTracks()[0]);var _=null;f=s.pc.getTransceivers();if(f&&f.length>0)for(var p in f){m=f[p];if(m.sender&&m.sender.track&&"video"===m.sender.track.kind||m.receiver&&m.receiver.track&&"video"===m.receiver.track.kind){_=m;break}}_&&_.sender?_.sender.replaceTrack(a.getVideoTracks()[0]):s.pc.addTrack(a.getVideoTracks()[0],a)}else ge.log((i.replaceVideo?"Replacing":"Adding")+" video track:",a.getVideoTracks()[0]),s.pc.addTrack(a.getVideoTracks()[0],a)}else s.myStream=a,l=!0;if(!s.pc){var g={iceServers:d,iceTransportPolicy:c,bundlePolicy:u};"chrome"===ge.webRTCAdapter.browserDetails.browser&&(g["sdpSemantics"]=ge.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var y={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===h&&y.optional.push({googIPv6:!0}),n.rtcConstraints&&"object"===o(n.rtcConstraints))for(var p in ge.debug("Adding custom PeerConnection constraints:",n.rtcConstraints),n.rtcConstraints)y.optional.push(n.rtcConstraints[p]);"edge"===ge.webRTCAdapter.browserDetails.browser&&(g.bundlePolicy="max-bundle"),ge.log("Creating PeerConnection"),ge.debug(y),s.pc=new RTCPeerConnection(g,y),ge.debug(s.pc),s.pc.getStats&&(s.volume={},s.bitrate.value="0 kbits/sec"),ge.log("Preparing local SDP and gathering candidates (trickle="+s.trickle+")"),s.pc.oniceconnectionstatechange=function(e){s.pc&&r.iceState(s.pc.iceConnectionState)},s.pc.onicecandidate=function(t){if(null==t.candidate||"edge"===ge.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)ge.log("End of candidates."),s.iceDone=!0,!0===s.trickle?A(e,{completed:!0}):V(e,n);else{var i={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===s.trickle&&A(e,i)}},s.pc.ontrack=function(e){ge.log("Handling Remote Track"),ge.debug(e),e.streams&&(s.remoteStream=e.streams[0],r.onremotestream(s.remoteStream),e.track.onended||(ge.log("Adding onended callback to track:",e.track),e.track.onended=function(e){ge.log("Remote track muted/removed:",e),s.remoteStream&&(s.remoteStream.removeTrack(e.target),r.onremotestream(s.remoteStream))},e.track.onmute=e.track.onended,e.track.onunmute=function(e){ge.log("Remote track flowing again:",e);try{s.remoteStream.addTrack(e.target),r.onremotestream(s.remoteStream)}catch(ia){ge.error(ia)}}))}}if(l&&null!==a&&void 0!==a){ge.log("Adding local stream");var b=!0===n.simulcast2;a.getTracks().forEach((function(e){if(ge.log("Adding local track:",e),b)if("audio"===e.kind)s.pc.addTrack(e,a);else{ge.log("Enabling rid-based simulcasting:",e);var t=v(n.simulcastMaxBitrates);s.pc.addTransceiver(e,{direction:"sendrecv",streams:[a],sendEncodings:[{rid:"h",active:!0,maxBitrate:t.high},{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:t.low,scaleResolutionDownBy:4}]})}else s.pc.addTrack(e,a)}))}ae(i)&&!s.dataChannel[ge.dataChanDefaultLabel]&&(ge.log("Creating data channel"),B(e,ge.dataChanDefaultLabel,!1),s.pc.ondatachannel=function(t){ge.log("Data channel created by Janus:",t),B(e,t.channel.label,t.channel)}),s.myStream&&r.onlocalstream(s.myStream),null===t||void 0===t?U(e,i,n):s.pc.setRemoteDescription(t).then((function(){if(ge.log("Remote description accepted!"),s.remoteSdp=t.sdp,s.candidates&&s.candidates.length>0){for(var a=0;a<s.candidates.length;a++){var o=s.candidates[a];ge.debug("Adding remote candidate:",o),o&&!0!==o.completed?s.pc.addIceCandidate(o):s.pc.addIceCandidate(ge.endOfCandidates)}s.candidates=[]}H(e,i,n)}),n.error)}function O(e,t,i){i=i||{},i.success="function"==typeof i.success?i.success:ge.noop,i.error="function"==typeof i.error?i.error:X;var n=i.jsep;if(t&&n)return ge.error("Provided a JSEP to a createOffer"),void i.error("Provided a JSEP to a createOffer");if(!t&&(!n||!n.type||!n.sdp))return ge.error("A valid JSEP is required for createAnswer"),void i.error("A valid JSEP is required for createAnswer");i.media=i.media||{audio:!0,video:!0};var a=i.media,r=S[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return ge.warn("Invalid handle"),void i.error("Invalid handle");var s=r.webrtcStuff;if(s.trickle=oe(i.trickle),void 0===s.pc||null===s.pc)a.update=!1,a.keepAudio=!1,a.keepVideo=!1;else if(void 0!==s.pc&&null!==s.pc){if(ge.log("Updating existing media session"),a.update=!0,null!==i.stream&&void 0!==i.stream)i.stream!==s.myStream&&ge.log("Renegotiation involves a new external stream");else{if(a.addAudio){if(a.keepAudio=!1,a.replaceAudio=!1,a.removeAudio=!1,a.audioSend=!0,s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length)return ge.error("Can't add audio stream, there already is one"),void i.error("Can't add audio stream, there already is one")}else a.removeAudio?(a.keepAudio=!1,a.replaceAudio=!1,a.addAudio=!1,a.audioSend=!1):a.replaceAudio&&(a.keepAudio=!1,a.addAudio=!1,a.removeAudio=!1,a.audioSend=!0);if(null===s.myStream||void 0===s.myStream?(a.replaceAudio&&(a.keepAudio=!1,a.replaceAudio=!1,a.addAudio=!0,a.audioSend=!0),K(a)&&(a.keepAudio=!1,a.addAudio=!0)):null===s.myStream.getAudioTracks()||void 0===s.myStream.getAudioTracks()||0===s.myStream.getAudioTracks().length?(a.replaceAudio&&(a.keepAudio=!1,a.replaceAudio=!1,a.addAudio=!0,a.audioSend=!0),K(a)&&(a.keepVideo=!1,a.addAudio=!0)):!K(a)||a.removeAudio||a.replaceAudio||(a.keepAudio=!0),a.addVideo){if(a.keepVideo=!1,a.replaceVideo=!1,a.removeVideo=!1,a.videoSend=!0,s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length)return ge.error("Can't add video stream, there already is one"),void i.error("Can't add video stream, there already is one")}else a.removeVideo?(a.keepVideo=!1,a.replaceVideo=!1,a.addVideo=!1,a.videoSend=!1):a.replaceVideo&&(a.keepVideo=!1,a.addVideo=!1,a.removeVideo=!1,a.videoSend=!0);null===s.myStream||void 0===s.myStream||null===s.myStream.getVideoTracks()||void 0===s.myStream.getVideoTracks()||0===s.myStream.getVideoTracks().length?(a.replaceVideo&&(a.keepVideo=!1,a.replaceVideo=!1,a.addVideo=!0,a.videoSend=!0),ee(a)&&(a.keepVideo=!1,a.addVideo=!0)):!ee(a)||a.removeVideo||a.replaceVideo||(a.keepVideo=!0),a.addData&&(a.data=!0)}if(K(a)&&a.keepAudio&&ee(a)&&a.keepVideo)return r.consentDialog(!1),void z(e,n,a,i,s.myStream)}if(a.update&&!s.streamExternal){if(a.removeAudio||a.replaceAudio){if(s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length){var l=s.myStream.getAudioTracks()[0];ge.log("Removing audio track:",l),s.myStream.removeTrack(l);try{l.stop()}catch(ia){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var d=!0;if(a.replaceAudio&&ge.unifiedPlan&&(d=!1),d)for(var c in s.pc.getSenders()){l=s.pc.getSenders()[c];l&&l.track&&"audio"===l.track.kind&&(ge.log("Removing audio sender:",l),s.pc.removeTrack(l))}}}if(a.removeVideo||a.replaceVideo){if(s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length){l=s.myStream.getVideoTracks()[0];ge.log("Removing video track:",l),s.myStream.removeTrack(l);try{l.stop()}catch(ia){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var u=!0;if(a.replaceVideo&&ge.unifiedPlan&&(u=!1),u)for(var c in s.pc.getSenders()){l=s.pc.getSenders()[c];l&&l.track&&"video"===l.track.kind&&(ge.log("Removing video sender:",l),s.pc.removeTrack(l))}}}}if(null!==i.stream&&void 0!==i.stream){var h=i.stream;if(ge.log("MediaStream provided by the application"),ge.debug(h),a.update&&s.myStream&&s.myStream!==i.stream&&!s.streamExternal){try{var x=s.myStream.getTracks();for(var f in x){var p=x[f];ge.log(p),null!==p&&void 0!==p&&p.stop()}}catch(ia){}s.myStream=null}return s.streamExternal=!0,r.consentDialog(!1),void z(e,n,a,i,h)}if(K(a)||ee(a)){if(!ge.isGetUserMediaAvailable())return void i.error("getUserMedia not available");var m={mandatory:{},optional:[]};r.consentDialog(!0);var _=K(a);!0===_&&void 0!=a&&null!=a&&"object"===o(a.audio)&&(_=a.audio);var g=ee(a);if(!0===g&&void 0!=a&&null!=a){var v=!0===i.simulcast,y=!0===i.simulcast2;if(!v&&!y||n||void 0!==a.video&&!1!==a.video||(a.video="hires"),a.video&&"screen"!=a.video&&"window"!=a.video)if("object"===o(a.video))g=a.video;else{var b=0,C=0;"lowres"===a.video?(C=240,b=320):"lowres-16:9"===a.video?(C=180,b=320):"hires"===a.video||"hires-16:9"===a.video||"hdres"===a.video?(C=720,b=1280):"fhdres"===a.video?(C=1080,b=1920):"4kres"===a.video?(C=2160,b=3840):"stdres"===a.video?(C=480,b=640):"stdres-16:9"===a.video?(C=360,b=640):(ge.log("Default video setting is stdres 4:3"),C=480,b=640),ge.log("Adding media constraint:",a.video),g={height:{ideal:C},width:{ideal:b}},ge.log("Adding video constraint:",g)}else if("screen"===a.video||"window"===a.video){var w=function(t,o){r.consentDialog(!1),t?i.error(t):z(e,n,a,i,o)},T=function(e,t,i){ge.log("Adding media constraint (screen capture)"),ge.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){i?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(i){e.addTrack(i.getAudioTracks()[0]),t(null,e)})):t(null,e)}))["catch"]((function(e){r.consentDialog(!1),t(e)}))};if(a.screenshareFrameRate||(a.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){r.consentDialog(!1),K(a)&&!a.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(o){t.addTrack(o.getAudioTracks()[0]),z(e,n,a,i,t)})):z(e,n,a,i,t)}),(function(e){r.consentDialog(!1),i.error(e)}));if("chrome"===ge.webRTCAdapter.browserDetails.browser){var P=ge.webRTCAdapter.browserDetails.version,E=33;window.navigator.userAgent.match("Linux")&&(E=35),P>=26&&P<=E?(m={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:a.screenshareFrameRate,maxFrameRate:a.screenshareFrameRate,chromeMediaSource:"screen"}},audio:K(a)&&!a.keepAudio},T(m,w)):ge.extension.getScreen((function(e,t){if(e)return r.consentDialog(!1),i.error(e);m={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:a.screenshareFrameRate,maxFrameRate:a.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},m.video.mandatory.chromeMediaSourceId=t,T(m,w,K(a)&&!a.keepAudio)}))}else if("firefox"===ge.webRTCAdapter.browserDetails.browser){if(!(ge.webRTCAdapter.browserDetails.version>=33)){var k=new Error("NavigatorUserMediaError");return k.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",r.consentDialog(!1),void i.error(k)}m={video:{mozMediaSource:a.video,mediaSource:a.video},audio:K(a)&&!a.keepAudio},T(m,(function(e,t){if(w(e,t),!e)var i=t.currentTime,n=window.setInterval((function(){t||window.clearInterval(n),t.currentTime==i&&(window.clearInterval(n),t.onended&&t.onended()),i=t.currentTime}),500)}))}return}}null!==a&&void 0!==a&&"screen"===a.video||navigator.mediaDevices.enumerateDevices().then((function(t){var o=t.some((function(e){return"audioinput"===e.kind})),s=ne(a)||t.some((function(e){return"videoinput"===e.kind})),l=K(a),d=ee(a),c=$(a),u=te(a);if(l||d||c||u){var x=!!l&&o,f=!!d&&s;if(!x&&!f)return r.consentDialog(!1),i.error("No capture device found"),!1;if(!x&&c)return r.consentDialog(!1),i.error("Audio capture is required, but no capture device found"),!1;if(!f&&u)return r.consentDialog(!1),i.error("Video capture is required, but no capture device found"),!1}var p={audio:!(!o||a.keepAudio)&&_,video:!(!s||a.keepVideo)&&g};ge.debug("getUserMedia constraints",p),p.audio||p.video?navigator.mediaDevices.getUserMedia(p).then((function(t){r.consentDialog(!1),z(e,n,a,i,t)}))["catch"]((function(e){r.consentDialog(!1),i.error({code:e.code,name:e.name,message:e.message})})):(r.consentDialog(!1),z(e,n,a,i,h))}))["catch"]((function(e){r.consentDialog(!1),i.error("enumerateDevices error",e)}))}else z(e,n,a,i)}function N(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ge.noop,t.error="function"==typeof t.error?t.error:X;var i=t.jsep,n=S[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ge.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff;if(void 0!==i&&null!==i){if(null===a.pc)return ge.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");a.pc.setRemoteDescription(i).then((function(){if(ge.log("Remote description accepted!"),a.remoteSdp=i.sdp,a.candidates&&a.candidates.length>0){for(var e=0;e<a.candidates.length;e++){var n=a.candidates[e];ge.debug("Adding remote candidate:",n),n&&!0!==n.completed?a.pc.addIceCandidate(n):a.pc.addIceCandidate(ge.endOfCandidates)}a.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function U(e,t,i){i=i||{},i.success="function"==typeof i.success?i.success:ge.noop,i.error="function"==typeof i.error?i.error:ge.noop,i.customizeSdp="function"==typeof i.customizeSdp?i.customizeSdp:ge.noop;var n=S[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ge.warn("Invalid handle"),void i.error("Invalid handle");var a=n.webrtcStuff,o=!0===i.simulcast;o?ge.log("Creating offer (iceDone="+a.iceDone+", simulcast="+o+")"):ge.log("Creating offer (iceDone="+a.iceDone+")");var r={};if(ge.unifiedPlan){var s=null,l=null,d=a.pc.getTransceivers();if(d&&d.length>0)for(var c in d){var u=d[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(l||(l=u))}var h=K(t),x=Q(t);h||x?h&&x?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",ge.log("Setting audio transceiver to sendrecv:",s)):h&&!x?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",ge.log("Setting audio transceiver to sendonly:",s)):!h&&x&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",ge.log("Setting audio transceiver to recvonly:",s)):(s=a.pc.addTransceiver("audio",{direction:"recvonly"}),ge.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",ge.log("Setting audio transceiver to inactive:",s));var f=ee(t),p=ie(t);f||p?f&&p?l&&(l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",ge.log("Setting video transceiver to sendrecv:",l)):f&&!p?l&&(l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",ge.log("Setting video transceiver to sendonly:",l)):!f&&p&&(l?(l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",ge.log("Setting video transceiver to recvonly:",l)):(l=a.pc.addTransceiver("video",{direction:"recvonly"}),ge.log("Adding recvonly video transceiver:",l))):t.removeVideo&&l&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive",ge.log("Setting video transceiver to inactive:",l))}else r["offerToReceiveAudio"]=Q(t),r["offerToReceiveVideo"]=ie(t);var m=!0===i.iceRestart;m&&(r["iceRestart"]=!0),ge.debug(r);var _=ee(t);if(_&&o&&"firefox"===ge.webRTCAdapter.browserDetails.browser){ge.log("Enabling Simulcasting for Firefox (RID)");var g=a.pc.getSenders().find((function(e){return"video"==e.track.kind}));if(g){var y=g.getParameters();y||(y={});var b=v(i.simulcastMaxBitrates);y.encodings=[{rid:"h",active:!0,maxBitrate:b.high},{rid:"m",active:!0,maxBitrate:b.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:b.low,scaleResolutionDownBy:4}],g.setParameters(y)}}a.pc.createOffer(r).then((function(e){ge.debug(e);var t={type:e.type,sdp:e.sdp};i.customizeSdp(t),e.sdp=t.sdp,ge.log("Setting local description"),_&&o&&("chrome"===ge.webRTCAdapter.browserDetails.browser||"safari"===ge.webRTCAdapter.browserDetails.browser?(ge.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=q(e.sdp)):"firefox"!==ge.webRTCAdapter.browserDetails.browser&&ge.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),a.mySdp=e.sdp,a.pc.setLocalDescription(e)["catch"](i.error),a.mediaConstraints=r,a.iceDone||a.trickle?(ge.log("Offer ready"),ge.debug(i),i.success(e)):ge.log("Waiting for all candidates...")}),i.error)}function H(e,t,i){i=i||{},i.success="function"==typeof i.success?i.success:ge.noop,i.error="function"==typeof i.error?i.error:ge.noop,i.customizeSdp="function"==typeof i.customizeSdp?i.customizeSdp:ge.noop;var n=S[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ge.warn("Invalid handle"),void i.error("Invalid handle");var a=n.webrtcStuff,o=!0===i.simulcast;o?ge.log("Creating answer (iceDone="+a.iceDone+", simulcast="+o+")"):ge.log("Creating answer (iceDone="+a.iceDone+")");var r=null;if(ge.unifiedPlan){r={};var s=null,l=null,d=a.pc.getTransceivers();if(d&&d.length>0)for(var c in d){var u=d[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(l||(l=u))}var h=K(t),x=Q(t);if(h||x){if(h&&x){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",ge.log("Setting audio transceiver to sendrecv:",s)}catch(ia){ge.error(ia)}}else if(h&&!x)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",ge.log("Setting audio transceiver to sendonly:",s))}catch(ia){ge.error(ia)}else if(!h&&x)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",ge.log("Setting audio transceiver to recvonly:",s)}catch(ia){ge.error(ia)}else s=a.pc.addTransceiver("audio",{direction:"recvonly"}),ge.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",ge.log("Setting audio transceiver to inactive:",s)}catch(ia){ge.error(ia)}var f=ee(t),p=ie(t);if(f||p){if(f&&p){if(l)try{l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",ge.log("Setting video transceiver to sendrecv:",l)}catch(ia){ge.error(ia)}}else if(f&&!p){if(l)try{l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",ge.log("Setting video transceiver to sendonly:",l)}catch(ia){ge.error(ia)}}else if(!f&&p)if(l)try{l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",ge.log("Setting video transceiver to recvonly:",l)}catch(ia){ge.error(ia)}else l=a.pc.addTransceiver("video",{direction:"recvonly"}),ge.log("Adding recvonly video transceiver:",l)}else if(t.removeVideo&&l)try{l.setDirection?l.setDirection("inactive"):l.direction="inactive",ge.log("Setting video transceiver to inactive:",l)}catch(ia){ge.error(ia)}}else r="firefox"==ge.webRTCAdapter.browserDetails.browser||"edge"==ge.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:Q(t),offerToReceiveVideo:ie(t)}:{mandatory:{OfferToReceiveAudio:Q(t),OfferToReceiveVideo:ie(t)}};ge.debug(r);var m=ee(t);if(m&&o&&"firefox"===ge.webRTCAdapter.browserDetails.browser){ge.log("Enabling Simulcasting for Firefox (RID)");var _=a.pc.getSenders()[1];ge.log(_);var g=_.getParameters();ge.log(g);var y=v(i.simulcastMaxBitrates);_.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:y.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:y.medium},{rid:"low",active:!0,priority:"low",maxBitrate:y.low}]})}a.pc.createAnswer(r).then((function(e){ge.debug(e);var t={type:e.type,sdp:e.sdp};i.customizeSdp(t),e.sdp=t.sdp,ge.log("Setting local description"),m&&o&&("chrome"===ge.webRTCAdapter.browserDetails.browser?ge.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==ge.webRTCAdapter.browserDetails.browser&&ge.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),a.mySdp=e.sdp,a.pc.setLocalDescription(e)["catch"](i.error),a.mediaConstraints=r,a.iceDone||a.trickle?i.success(e):ge.log("Waiting for all candidates...")}),i.error)}function V(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ge.noop,t.error="function"==typeof t.error?t.error:ge.noop;var i=S[e];if(null!==i&&void 0!==i&&null!==i.webrtcStuff&&void 0!==i.webrtcStuff){var n=i.webrtcStuff;ge.log("Sending offer/answer SDP..."),null!==n.mySdp&&void 0!==n.mySdp?(n.mySdp={type:n.pc.localDescription.type,sdp:n.pc.localDescription.sdp},!1===n.trickle&&(n.mySdp["trickle"]=!1),ge.debug(t),n.sdpSent=!0,t.success(n.mySdp)):ge.warn("Local SDP instance is invalid, not sending anything...")}else ge.warn("Invalid handle, not sending anything")}function G(e,t){var i=S[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ge.warn("Invalid handle"),0;var n=t?"remote":"local",a=i.webrtcStuff;return a.volume[n]||(a.volume[n]={value:0}),a.pc.getStats&&"chrome"===ge.webRTCAdapter.browserDetails.browser?!t||null!==a.remoteStream&&void 0!==a.remoteStream?t||null!==a.myStream&&void 0!==a.myStream?null===a.volume[n].timer||void 0===a.volume[n].timer?(ge.log("Starting "+n+" volume monitor"),a.volume[n].timer=setInterval((function(){a.pc.getStats((function(e){for(var i=e.result(),o=0;o<i.length;o++){var r=i[o];"ssrc"==r.type&&(t&&r.stat("audioOutputLevel")?a.volume[n].value=parseInt(r.stat("audioOutputLevel")):!t&&r.stat("audioInputLevel")&&(a.volume[n].value=parseInt(r.stat("audioInputLevel"))))}}))}),200),0):a.volume[n].value:(ge.warn("Local stream unavailable"),0):(ge.warn("Remote stream unavailable"),0):(ge.warn("Getting the "+n+" volume unsupported by browser"),0)}function Y(e,t){var i=S[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ge.warn("Invalid handle"),!0;var n=i.webrtcStuff;return null===n.pc||void 0===n.pc?(ge.warn("Invalid PeerConnection"),!0):void 0===n.myStream||null===n.myStream?(ge.warn("Invalid local MediaStream"),!0):t?null===n.myStream.getVideoTracks()||void 0===n.myStream.getVideoTracks()||0===n.myStream.getVideoTracks().length?(ge.warn("No video track"),!0):!n.myStream.getVideoTracks()[0].enabled:null===n.myStream.getAudioTracks()||void 0===n.myStream.getAudioTracks()||0===n.myStream.getAudioTracks().length?(ge.warn("No audio track"),!0):!n.myStream.getAudioTracks()[0].enabled}function W(e,t,i){var n=S[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ge.warn("Invalid handle"),!1;var a=n.webrtcStuff;return null===a.pc||void 0===a.pc?(ge.warn("Invalid PeerConnection"),!1):void 0===a.myStream||null===a.myStream?(ge.warn("Invalid local MediaStream"),!1):t?null===a.myStream.getVideoTracks()||void 0===a.myStream.getVideoTracks()||0===a.myStream.getVideoTracks().length?(ge.warn("No video track"),!1):(a.myStream.getVideoTracks()[0].enabled=!i,!0):null===a.myStream.getAudioTracks()||void 0===a.myStream.getAudioTracks()||0===a.myStream.getAudioTracks().length?(ge.warn("No audio track"),!1):(a.myStream.getAudioTracks()[0].enabled=!i,!0)}function Z(e){var t=S[e];if(null===t||void 0===t||null===t.webrtcStuff||void 0===t.webrtcStuff)return ge.warn("Invalid handle"),"Invalid handle";var i=t.webrtcStuff;return null===i.pc||void 0===i.pc?"Invalid PeerConnection":i.pc.getStats?null===i.bitrate.timer||void 0===i.bitrate.timer?(ge.log("Starting bitrate timer (via getStats)"),i.bitrate.timer=setInterval((function(){i.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(i.bitrate.bsnow=e.bytesReceived,i.bitrate.tsnow=e.timestamp,null===i.bitrate.bsbefore||null===i.bitrate.tsbefore)i.bitrate.bsbefore=i.bitrate.bsnow,i.bitrate.tsbefore=i.bitrate.tsnow;else{var n=i.bitrate.tsnow-i.bitrate.tsbefore;"safari"==ge.webRTCAdapter.browserDetails.browser&&(n/=1e3);var a=Math.round(8*(i.bitrate.bsnow-i.bitrate.bsbefore)/n);"safari"===ge.webRTCAdapter.browserDetails.browser&&(a=parseInt(a/1e3)),i.bitrate.value=a+" kbits/sec",i.bitrate.bsbefore=i.bitrate.bsnow,i.bitrate.tsbefore=i.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):i.bitrate.value:(ge.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function X(e){ge.error("WebRTC error:",e)}function J(e,n){ge.log("Cleaning WebRTC stuff");var a=S[e];if(null!==a&&void 0!==a){var o=a.webrtcStuff;if(null!==o&&void 0!==o){if(!0===n){var r={rtcgw:"hangup",transaction:ge.randomString(12)};null!==a.token&&void 0!==a.token&&(r["token"]=a.token),null!==m&&void 0!==m&&(r["apisecret"]=m),ge.debug("Sending hangup request (handle="+e+"):"),ge.debug(r),t?(r["session_id"]=b,r["handle_id"]=e,i.send(JSON.stringify(r))):ge.httpAPICall(l+"/"+b+"/"+e,{verb:"POST",withCredentials:x,body:r})}o.remoteStream=null,o.volume&&(o.volume["local"]&&o.volume["local"].timer&&clearInterval(o.volume["local"].timer),o.volume["remote"]&&o.volume["remote"].timer&&clearInterval(o.volume["remote"].timer)),o.volume={},o.bitrate.timer&&clearInterval(o.bitrate.timer),o.bitrate.timer=null,o.bitrate.bsnow=null,o.bitrate.bsbefore=null,o.bitrate.tsnow=null,o.bitrate.tsbefore=null,o.bitrate.value=null;try{if(!o.streamExternal&&null!==o.myStream&&void 0!==o.myStream){ge.log("Stopping local stream tracks");var s=o.myStream.getTracks();for(var d in s){var c=s[d];ge.log(c),null!==c&&void 0!==c&&c.stop()}}}catch(ia){}o.streamExternal=!1,o.myStream=null;try{o.pc.close()}catch(ia){}o.pc=null,o.candidates=null,o.mySdp=null,o.remoteSdp=null,o.iceDone=!1,o.dataChannel={},o.dtmfSender=null}a.oncleanup()}}function q(e){for(var t=e.split("\r\n"),i=!1,n=[-1],a=[-1],o=null,r=null,s=null,l=null,d=-1,c=0;c<t.length;c++){var u=t[c].match(/m=(\w+) */);if(u){var h=u[1];if("video"===h){if(!(n[0]<0)){d=c;break}i=!0}else if(n[0]>-1){d=c;break}}else if(i){var x=t[c].match(/a=ssrc-group:FID (\d+) (\d+)/);if(x)n[0]=x[1],a[0]=x[2],t.splice(c,1),c--;else{if(n[0]){var f=t[c].match("a=ssrc:"+n[0]+" cname:(.+)");if(f&&(o=f[1]),f=t[c].match("a=ssrc:"+n[0]+" msid:(.+)"),f&&(r=f[1]),f=t[c].match("a=ssrc:"+n[0]+" mslabel:(.+)"),f&&(s=f[1]),f=t[c].match("a=ssrc:"+n[0]+" label:(.+)"),f&&(l=f[1]),0===t[c].indexOf("a=ssrc:"+a[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+n[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(n[0]<0){d=-1,i=!1;for(c=0;c<t.length;c++){u=t[c].match(/m=(\w+) */);if(u){h=u[1];if("video"===h){if(!(n[0]<0)){d=c;break}i=!0}else if(n[0]>-1){d=c;break}}else if(i){if(n[0]<0){var p=t[c].match(/a=ssrc:(\d+)/);if(p){n[0]=p[1],t.splice(c,1),c--;continue}}else{f=t[c].match("a=ssrc:"+n[0]+" cname:(.+)");if(f&&(o=f[1]),f=t[c].match("a=ssrc:"+n[0]+" msid:(.+)"),f&&(r=f[1]),f=t[c].match("a=ssrc:"+n[0]+" mslabel:(.+)"),f&&(s=f[1]),f=t[c].match("a=ssrc:"+n[0]+" label:(.+)"),f&&(l=f[1]),0===t[c].indexOf("a=ssrc:"+a[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+n[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(n[0]<0)return ge.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;d<0&&(d=t.length),n[1]=Math.floor(4294967295*Math.random()),n[2]=Math.floor(4294967295*Math.random()),a[1]=Math.floor(4294967295*Math.random()),a[2]=Math.floor(4294967295*Math.random());for(c=0;c<n.length;c++)o&&(t.splice(d,0,"a=ssrc:"+n[c]+" cname:"+o),d++),r&&(t.splice(d,0,"a=ssrc:"+n[c]+" msid:"+r),d++),s&&(t.splice(d,0,"a=ssrc:"+n[c]+" mslabel:"+s),d++),l&&(t.splice(d,0,"a=ssrc:"+n[c]+" label:"+l),d++),o&&(t.splice(d,0,"a=ssrc:"+a[c]+" cname:"+o),d++),r&&(t.splice(d,0,"a=ssrc:"+a[c]+" msid:"+r),d++),s&&(t.splice(d,0,"a=ssrc:"+a[c]+" mslabel:"+s),d++),l&&(t.splice(d,0,"a=ssrc:"+a[c]+" label:"+l),d++);return t.splice(d,0,"a=ssrc-group:FID "+n[2]+" "+a[2]),t.splice(d,0,"a=ssrc-group:FID "+n[1]+" "+a[1]),t.splice(d,0,"a=ssrc-group:FID "+n[0]+" "+a[0]),t.splice(d,0,"a=ssrc-group:SIM "+n[0]+" "+n[1]+" "+n[2]),e=t.join("\r\n"),e.endsWith("\r\n")||(e+="\r\n"),e}function K(e){return ge.debug("isAudioSendEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function $(e){return ge.debug("isAudioSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}function Q(e){return ge.debug("isAudioRecvEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function ee(e){return ge.debug("isVideoSendEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function te(e){return ge.debug("isVideoSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}function ie(e){return ge.debug("isVideoRecvEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}function ne(e){if(ge.debug("isScreenSendEnabled:",e),void 0===e||null===e)return!1;if("object"!==o(e.video)||"object"!==o(e.video.mandatory))return!1;var t=e.video.mandatory;return t.chromeMediaSource?"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource:t.mozMediaSource?"window"===t.mozMediaSource||"screen"===t.mozMediaSource:!!t.mediaSource&&("window"===t.mediaSource||"screen"===t.mediaSource)}function ae(e){return ge.debug("isDataEnabled:",e),"edge"==ge.webRTCAdapter.browserDetails.browser?(ge.warn("Edge doesn't support data channels yet"),!1):void 0!==e&&null!==e&&!0===e.data}function oe(e){return ge.debug("isTrickleEnabled:",e),void 0===e||null===e||!0===e}R(e),this.getServer=function(){return l},this.isConnected=function(){return y},this.reconnect=function(e){e=e||{},e.success="function"==typeof e.success?e.success:ge.noop,e.error="function"==typeof e.error?e.error:ge.noop,e["reconnect"]=!0,R(e)},this.getSessionId=function(){return b},this.destroy=function(e){I(e)},this.attach=function(e){D(e)}}ge.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,i=e&&e.Promise||Promise,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},extension:e&&e.extension||_e,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||window.adapter,httpAPICall:function(e,n){var a={method:n.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===n.verb&&(a.headers["Content-Type"]="application/json"),void 0!==n.withCredentials&&(a.credentials=!0===n.withCredentials?"include":n.withCredentials?n.withCredentials:"omit"),void 0!==n.body&&(a.body=JSON.stringify(n.body));var r=t(e,a)["catch"]((function(e){return i.reject({message:"Probably a network error, is the server down?",error:e})}));if(void 0!==n.timeout){var s=new i((function(e,t){var i=setTimeout((function(){return clearTimeout(i),t({message:"Request timed out",timeout:n.timeout})}),n.timeout)}));r=i.race([r,s])}return r.then((function(e){return e.ok?o(n.success)===o(ge.noop)?e.json().then((function(e){n.success(e)}))["catch"]((function(t){return i.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:i.reject({message:"API call failed",response:e})}))["catch"]((function(e){o(n.error)===o(ge.noop)&&n.error(e.message||"<< internal error >>",e)})),r}}},ge.useOldDependencies=function(e){var t=e&&e.jQuery||jQuery,i=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new i(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||_e,webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,i){var n=void 0!==i.body?{contentType:"application/json",data:JSON.stringify(i.body)}:{},a=void 0!==i.withCredentials?{xhrFields:{withCredentials:i.withCredentials}}:{};return t.ajax(t.extend(n,a,{url:e,type:i.verb,cache:!1,dataType:"json",async:i.async,timeout:i.timeout,success:function(e){o(i.success)===o(ge.noop)&&i.success(e)},error:function(e,t,n){o(i.error)===o(ge.noop)&&i.error(t,n)}}))}}},ge.noop=function(){},ge.dataChanDefaultLabel="JanusDataChannel",ge.endOfCandidates=null,ge.init=function(e){if(e=e||{},e.callback="function"==typeof e.callback?e.callback:ge.noop,!0===ge.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),ge.trace=ge.noop,ge.debug=ge.noop,ge.vdebug=ge.noop,ge.log=ge.noop,ge.warn=ge.noop,ge.error=ge.noop,!0===e.debug||"all"===e.debug)ge.trace=console.trace.bind(console),ge.debug=console.debug.bind(console),ge.vdebug=console.debug.bind(console),ge.log=console.log.bind(console),ge.warn=console.warn.bind(console),ge.error=console.error.bind(console);else if(Array.isArray(e.debug))for(var t in e.debug){var i=e.debug[t];switch(i){case"trace":ge.trace=console.trace.bind(console);break;case"debug":ge.debug=console.debug.bind(console);break;case"vdebug":ge.vdebug=console.debug.bind(console);break;case"log":ge.log=console.log.bind(console);break;case"warn":ge.warn=console.warn.bind(console);break;case"error":ge.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+i+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}ge.log("Initializing library");var n=e.dependencies||ge.useDefaultDependencies();ge.isArray=n.isArray,ge.webRTCAdapter=n.webRTCAdapter,ge.httpAPICall=n.httpAPICall,ge.newWebSocket=n.newWebSocket,ge.extension=n.extension,ge.extension.init(),ge.listDevices=function(e,t){e="function"==typeof e?e:ge.noop,null==t&&(t={audio:!0,video:!0}),ge.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(i){ge.debug(i),e(i);try{var n=t.getTracks();for(var a in n){var o=n[a];null!==o&&void 0!==o&&o.stop()}}catch(ia){}}))}))["catch"]((function(t){ge.error(t),e([])})):(ge.warn("navigator.mediaDevices unavailable"),e([]))},ge.attachMediaStream=function(e,t){if("chrome"===ge.webRTCAdapter.browserDetails.browser){var i=ge.webRTCAdapter.browserDetails.version;i>=52?e.srcObject=t:ge.error("Error attaching stream to element")}else e.srcObject=t},ge.reattachMediaStream=function(e,t){if("chrome"===ge.webRTCAdapter.browserDetails.browser){var i=ge.webRTCAdapter.browserDetails.version;i>=52?e.srcObject=t.srcObject:"undefined"!==typeof e.src?e.src=t.src:ge.error("Error reattaching stream to element")}else e.srcObject=t.srcObject};var a=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,o=a?"pagehide":"beforeunload",r=window["on"+o];if(window.addEventListener(o,(function(e){for(var t in ge.log("Closing window"),ge.sessions)null!==ge.sessions[t]&&void 0!==ge.sessions[t]&&ge.sessions[t].destroyOnUnload&&(ge.log("Destroying session "+t),ge.sessions[t].destroy({asyncRequest:!1,notifyDestroyed:!1}));r&&"function"==typeof r&&r()})),ge.safariVp8=!1,"safari"===ge.webRTCAdapter.browserDetails.browser&&ge.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var t in RTCRtpSender.getCapabilities("video").codecs){var s=RTCRtpSender.getCapabilities("video").codecs[t];if(s&&s.mimeType&&"video/vp8"===s.mimeType.toLowerCase()){ge.safariVp8=!0;break}}ge.safariVp8?ge.log("This version of Safari supports VP8"):ge.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var l=new RTCPeerConnection({},{});l.createOffer({offerToReceiveVideo:!0}).then((function(e){ge.safariVp8=-1!==e.sdp.indexOf("VP8"),ge.safariVp8?ge.log("This version of Safari supports VP8"):ge.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),l.close(),l=null}))}if(ge.unifiedPlan=!1,"firefox"===ge.webRTCAdapter.browserDetails.browser&&ge.webRTCAdapter.browserDetails.version>=59)ge.unifiedPlan=!0;else if("chrome"===ge.webRTCAdapter.browserDetails.browser&&ge.webRTCAdapter.browserDetails.version<72)ge.unifiedPlan=!1;else if("undefined"===typeof RTCRtpTransceiver||"currentDirection"in RTCRtpTransceiver.prototype){var d=new RTCPeerConnection;try{d.addTransceiver("audio"),ge.unifiedPlan=!0}catch(ia){}d.close()}else ge.unifiedPlan=!1;ge.initDone=!0,e.callback()}},ge.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection},ge.isGetUserMediaAvailable=function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia},ge.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="",n=0;n<e;n++){var a=Math.floor(Math.random()*t.length);i+=t.substring(a,a+1)}return i},window.Janus_Talk=ge;var ve=window.Janus_Talk,ye=null,be=null,Se="tts-"+Janus_Talk.randomString(12),Ce=null;ve.init({debug:"all",callback:function(){window.stopTalk=function(){ye.destroy()},window.startTalk=function(){ve.isWebrtcSupported()?ye=new ve({server:window.EZUIKit.opt.rtcUrl,success:function(){ye.attach({plugin:"rtcgw.plugin.tts",opaqueId:Se,success:function(e){be=e,ve.log("Plugin attached! ("+be.getPlugin()+", id="+be.getId()+")");var t=window.EZUIKit.opt.talkLink;console.log("ttsUlr",t);var i={request:"start",url:t,codec:"opus",dir:"sendrecv",audio_debug:1};"gb28181"===window.EZUIKit.opt.talkType&&(i["devProto"]="gb28181"),ve.debug("Trying a createOffer too (audio/video sendrecv)"),be.createOffer({media:{audio:!0,video:!1,data:!1},simulcast:!1,simulcast2:!1,success:function(e){ve.debug("Got SDP!"),ve.debug(e),be.send({message:i,jsep:e}),"undefined"!==typeof window.EZUIKit.handleTalkSuccess&&window.EZUIKit.handleTalkSuccess()},error:function(e){ve.error("WebRTC error:",e),"undefined"!==typeof window.EZUIKit.handleTalkError&&window.EZUIKit.handleTalkError(e)}})},error:function(e){console.error("  -- Error attaching plugin...",e),bootbox.alert("Error attaching plugin... "+e),"undefined"!==window.EZUIKit.handleTalkError&&window.EZUIKit.handleTalkError(e)},consentDialog:function(e){ve.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){ve.log("ICE state changed to "+e)},mediaState:function(e,t){ve.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){ve.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){ve.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(e,t){ve.debug(" ::: Got a message :::"),ve.debug(e),void 0!==t&&null!==t&&(ve.debug("Handling SDP as well..."),ve.debug(t),be.handleRemoteJsep({jsep:t}));var i=e["result"];if(null!==i&&void 0!==i){if("done"===i)return bootbox.alert("The TTS Test is over"),null!==Ce&&void 0!==Ce&&Ce.stop(),void(Ce=null);"msg"===i&&"undefined"!==typeof window.EZUIKit.handleTalkMessage&&window.EZUIKit.handleTalkMessage(e);var n=i["status"];"slow_link"===n&&toastr.warning("Janus apparently missed many packets we sent, maybe we should reduce the bitrate","Packet loss?",{timeOut:2e3})}},onlocalstream:function(e){ve.debug(" ::: Got a local stream :::"),ve.debug(e),ve.attachMediaStream(document.getElementById("myaudio"),e),"completed"!==be.webrtcStuff.pc.iceConnectionState&&"connected"!==be.webrtcStuff.pc.iceConnectionState&&(null==Ce?document.getElementById("audioright"):Ce.spin());var t=e.getAudioTracks();null===t||void 0===t||t.length},onremotestream:function(e){ve.debug(" ::: Got a remote stream :::"),ve.debug(e),ve.attachMediaStream(document.getElementById("peeraudio"),e);var t=e.getAudioTracks();null===t||void 0===t||0===t.length||document.getElementById("peeraudio").play()},ondataopen:function(e){ve.log("The DataChannel is available!")},ondata:function(e){ve.debug("We got data from the DataChannel! "+e)},oncleanup:function(){ve.log(" ::: Got a cleanup notification :::"),null!==Ce&&void 0!==Ce&&Ce.stop(),Ce=null}})},error:function(e){ve.error(e),"undefined"!==window.EZUIKit.handleTalkError&&window.EZUIKit.handleTalkError(e)},destroyed:function(){}}):bootbox.alert("No WebRTC support... ")}}}),window.janus=ye,window.tts=be;var we=function(){function e(t){var i=this;r(this,e),this.jSPlugin=t,this.codeHandler=new xe,this.pluginStatus=new Y(this,this.jSPlugin.params.id);var n=document.createElement("div");n.id="audioleft";var a=document.createElement("div");a.id="audioright",a.style="display:none;";var o=document.createElement("audio");o.id="myaudio",o.muted=!0,o.setAttribute("autoplay",!0),o.setAttribute("controls",!0),n.appendChild(o),n.style="display:none;";var s=document.createElement("audio");s.id="peeraudio",s.setAttribute("autoplay",!0),s.setAttribute("controls",!0),a.appendChild(s),window.EZUIKit["handleTalkError"]=function(e){console.log("talk err",e),"undefined"!==typeof i.jSPlugin.handleTalkError&&i.jSPlugin.handleTalkError(e)},window.EZUIKit["handleTalkSuccess"]=function(e){console.log("talk success",e),"undefined"!==typeof i.jSPlugin.handleTalkSuccess&&i.jSPlugin.handleTalkSuccess(e)},window.EZUIKit.opt={rtcUrl:"",talkLink:"",ttsUrl:"",stream:"",deviceSerial:M(this.jSPlugin.url).deviceSerial,channelNo:M(this.jSPlugin.url).channelNo},document.body.appendChild(n),document.body.appendChild(a)}return l(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"startTalk",value:function(e){var t=this;if(this.jSPlugin.capacity&&this.jSPlugin.capacity.support_talk&&(!this.jSPlugin.capacity||"3"!==this.jSPlugin.capacity.support_talk&&"1"!==this.jSPlugin.capacity.support_talk))return"function"===typeof this.jSPlugin.params.handleError&&(this.pluginStatus.loadingSetText({text:"设备不支持对讲",color:"red",delayClear:2e3}),this.jSPlugin.params.handleError({msg:"设备不支持对讲",retcode:-1e3,id:this.jSPlugin.params.id,type:"handleError"})),console.log("设备不支持对讲"),!1;var i=new FormData;i.append("accessToken",this.jSPlugin.accessToken),i.append("deviceSerial",M(this.jSPlugin.url).deviceSerial),i.append("channelNo",M(this.jSPlugin.url).channelNo),fetch(this.jSPlugin.env.domain+"/api/lapp/live/talk/url",{method:"POST",body:i}).then((function(e){return e.json()})).then((function(i){if(200==i.code){var n=i.data;if(n){var a=n.rtcUrl;-1===a.indexOf("ws")&&(a=a.replace("https","wss").replace("rtcgw","rtcgw-ws")),window.EZUIKit.opt.rtcUrl=a,window.EZUIKit.opt.ttsUrl="tts://"+n.ttsUrl,window.EZUIKit.opt.deviceSerial=M(t.jSPlugin.url).deviceSerial,window.EZUIKit.opt.channelNo=M(t.jSPlugin.url).channelNo;var o=window.EZUIKit.opt.ttsUrl.split("?");if(2===o.length||-1!==window.EZUIKit.opt.deviceSerial.indexOf(":")){var r="talk?dev="+window.EZUIKit.opt.deviceSerial+"&chann="+window.EZUIKit.opt.channelNo+"&encodetype=2";window.EZUIKit.opt.talkLink=window.EZUIKit.opt.ttsUrl.split("?")[0]+"/"+r,n.ttsUrl.indexOf("gb28181")>-1&&(window.EZUIKit.opt.talkType="gb28181")}else{r="talk://"+window.EZUIKit.opt.deviceSerial+":0:"+window.EZUIKit.opt.channelNo+":cas.ys7.com:6500";window.EZUIKit.opt.talkLink=window.EZUIKit.opt.ttsUrl.split("?")[0]+"/"+r}e&&e(n.ttsUrl.indexOf("gb28181")>-1),window.EZUIKit.opt.stream=n.stream,window.startTalk()}}else console.log(i.code,t.codeHandler.matchInfo(i.code,"talk")),t.pluginStatus.loadingSetText({text:t.codeHandler.matchInfo(i.code,"talk").msg||i.msg,color:"red",delayClear:2e3}),"function"===typeof t.jSPlugin.params.handleError&&t.jSPlugin.params.handleError({msg:i.msg,retcode:i.code,id:t.jSPlugin.params.id,type:"handleError"})}))["catch"]((function(e){console.log("err",e)}))}},{key:"stopTalk",value:function(){window.stopTalk(),document.getElementById("myaudio")&&document.getElementById("myaudio").srcObject&&document.getElementById("myaudio").srcObject.getTracks()[0].stop()}}]),e}(),Te=function(){function e(t){var i=this;r(this,e),this.jSPlugin=t;var n=document.createElement("style");n.innerHTML="\n    body{\n      padding: 0;\n      margin: 0;\n    }\n    #mobile-ez-ptz-container {\n      display: inline-block;\n      width: 375px;\n      text-align: center;\n    }\n    .live-ptz-title{\n      height: 25px;\n      font-size: 18px;\n      color: #2c2c2c;\n      text-align: center;\n      font-weight: 700;\n      margin: 24px 0 12px;\n    }\n    .live-ptz-intro {\n      margin-bottom: 24px;\n      color: #aaaaaa;\n    }\n    .mobile-ez-ptz-wrap {\n      background-image: linear-gradient(180deg, #f6f8ff 0%, #ededed6b 50%)\n    }\n    #mobile-ez-ptz-container .mobile-ez-ptz-container {\n      position: relative;\n      width: 260px;\n      height: 260px;\n      background: rgba(255, 255, 255, 0.80);\n      border: 1px solid rgba(255, 255, 255, 0.80);\n      border-radius: 100%;\n      cursor: pointer;\n      overflow: hidden;\n      margin: auto;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top {\n      width: 0;\n      height: 0;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-bottom: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 6px);\n      top: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top.active {\n      border-bottom-color: #1890FF;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom {\n      width: 0;\n      height: 0;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 6px);\n      bottom: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom.active {\n      border-top-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right {\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-left: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 6px);\n      right: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right.active {\n      border-left-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left {\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-right: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 6px);\n      left: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left.active {\n      border-right-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .ez-ptz-main.center {\n      width: 52px;\n      height: 52px;\n      background: #FFFFFF;\n      border: 2px solid #eee;\n      border-radius: 100%;\n      top: calc(50% - 26px);\n      left: calc(50% - 26px);\n      position: absolute;\n      /* box-shadow: 0px -39px 40px 6px #1890ff; */\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-wrap {\n      display: inline-block;\n      padding: 24px 24px;\n      border-radius: 100%;\n      overflow: hidden;\n    }\n\n    #mobile-ez-ptz-container .ez-ptz-close {\n      position: absolute;\n      color: #FFFFFF;\n      top: 0;\n      right: 0px;\n    }",document.getElementsByTagName("head")[0].appendChild(n);var a=document.createElement("div");a.className="mobile-ez-ptz-container",a.id="mobile-ez-ptz-container",a.style="display:inline-block;width: ".concat(this.jSPlugin.width,"px;text-align:center;");var o=document.createElement("div");o.className="live-ptz-title",o.id="live-ptz-title",o.innerHTML="云台控制",document.getElementById("live-ptz-title")||a.appendChild(o);var s=document.createElement("div");s.className="live-ptz-intro",s.id="live-ptz-intro",s.innerHTML="请通过操控云台来调整摄像机视角",document.getElementById("live-ptz-intro")||a.appendChild(s);var l=document.createElement("div");l.id="mobile-ez-ptz-item",l.className="mobile-ez-ptz-wrap",l.innerHTML='\n    <div class="mobile-ez-ptz-container" id="mobile-ez-ptz-container">\n      <div class="ez-ptz-main center"></div>\n      <div class="mobile-ez-ptz-icon top default"></div>\n      <div class="mobile-ez-ptz-icon left default"></div>\n      <div class="mobile-ez-ptz-icon bottom default"></div>\n      <div class="mobile-ez-ptz-icon right default"></div>\n    </div>\n      ',document.getElementById("mobile-ez-ptz-item")||a.appendChild(l),T(a,document.getElementById("".concat(this.jSPlugin.id,"-wrap"))),document.getElementById("mobile-ez-ptz-item").ontouchstart=function(e){e.preventDefault(),console.log("触摸开始"),i._handlePtzTouch(e,"start")},document.getElementById("mobile-ez-ptz-item").ontouchend=function(e){e.preventDefault(),console.log("触摸结束",e),i._handlePtzTouch(e,"stop")},document.getElementById("mobile-ez-ptz-item").onmousedown=function(e){e.preventDefault(),console.log("触摸开始"),i._handlePtzTouch(e,"start")},document.getElementById("mobile-ez-ptz-item").onmouseup=function(e){e.preventDefault(),console.log("触摸结束",e),i._handlePtzTouch(e,"stop")}}return l(e,[{key:"show",value:function(){document.getElementById("mobile-ez-ptz-item").style="display: inline-block"}},{key:"hide",value:function(){document.getElementById("mobile-ez-ptz-item").style="display: none"}},{key:"_handlePtzTouch",value:function(e,t){var i=document.getElementById("mobile-ez-ptz-item").getBoundingClientRect(),n=i.left+130,a=i.top+130,o=e.x||e.changedTouches[0].clientX,r=e.y||e.changedTouches[0].clientY,s=o-n,l=r-a,d=0,c=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";Math.abs(s)>Math.abs(l)?s>0?(d=3,document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("default","active")):(d=2,document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("default","active")):l>0?(d=1,document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("default","active")):(d=0,document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("default","active")),document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(0===d?180:1===d?0:2===d?90:270,"deg, #c0ddf1 0%, rgba(100,143,252,0.00) 50%)"),"stop"===t&&(c=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",document.getElementById("mobile-ez-ptz-item").style="",document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("active","default"));var u=new FormData;u.append("deviceSerial",M(this.jSPlugin.url).deviceSerial),u.append("channelNo",M(this.jSPlugin.url).channelNo),u.append("speed",1),u.append("direction",d),u.append("accessToken",this.jSPlugin.accessToken),fetch(c,{method:"POST",body:u}).then((function(e){return e.json()})).then((function(e){200==e.code||60005!=e.code&&60002!=e.code&&60003!=e.code&&60004!=e.code||(document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(0===d?180:1===d?0:2===d?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 50%)"))}))["catch"]((function(e){console.log("云台调用异常",e)}))}}]),e}(),Pe=0,Ee="成功",ke={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]},footer:{color:"#FFFFFF",backgroundColor:"rgb(0 0 0 / 0%)",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-0",iconId:"play",part:"left",defaultActive:1,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-1",iconId:"capturePicture",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-2",iconId:"sound",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-3",iconId:"pantile",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-4",iconId:"recordvideo",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-5",iconId:"talk",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-6",iconId:"hd",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-7",iconId:"webExpend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-8",iconId:"expend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]}},Re={retcode:Pe,msg:Ee,data:ke},Ie={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},De={data:Ie},Me={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Ae={data:Me},Be={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Le={data:Be},Fe={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},je={data:Fe},ze={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:0},{iconId:"deviceName",part:"left",defaultActive:0,isrender:0},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:0},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:0},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:0}]}},Oe={data:ze},Ne={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Ue={data:Ne},He={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Ve={data:He},Ge={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:0},{iconId:"deviceName",part:"left",defaultActive:0,isrender:0},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:0},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:0},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"speed",part:"right",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:0}]}},Ye={data:Ge},We=[{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcLive",themeIntro:"PC直播全量版",themeName:"PC直播全量版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Le.data.header,footer:Le.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"security",themeIntro:"PC直播安防版",themeName:"PC直播安防版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:je.data.header,footer:je.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"voice",themeIntro:"PC直播语音版",themeName:"PC直播语音版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Ue.data.header,footer:Ue.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"simple",themeIntro:"PC直播极简版",themeName:"PC直播极简版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"",header:Oe.data.header,footer:Oe.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcRec",themeIntro:"PC回放全量版",themeName:"PC回放全量版",themeType:"webRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Ve.data.header,footer:Ve.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileLive",themeIntro:"Mobile直播全量版",themeName:"Mobile直播全量版",themeType:"mobileLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:De.data.header,footer:De.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileRec",themeIntro:"Mobile回放全量版",themeName:"Mobile回放全量版",themeType:"mobileRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Ae.data.header,footer:Ae.data.footer},{autoFocus:0,createTime:"2021-06-14T08:04:37.000Z",themeId:"miniRec",themeIntro:"Mobile回放全量版",themeName:"Mobile回放全量版",themeType:"mobileRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"",header:Ye.data.header,footer:Ye.data.footer}],Ze=function(){function e(t){var i=this;r(this,e),this.jSPlugin=t,this.enableZoom=!1,this.videoWidth=1920,this.videoHeight=1080,this.currentScale=1,this.currentPosition={x:0,y:0,xPercent:.1,yPercent:.1,xCurrentVideo:0,yCurrentVideo:0,left:0,top:0,right:1920,bottom:1080},this.clientRect=document.getElementById(t.id).getBoundingClientRect(),this.DOM=document.getElementById(t.id),this.isFullScreen=!1;var n=document.createElement("div");n.id="".concat(t.id,"-zoom-container"),n.style="position: absolute;\n    display:none;\n    left: 12px;\n    bottom: ".concat(t.isMobile?"48px":"80px",";\n    zoom: ").concat(t.isMobile?"0.8":"1");var a='\n    <div\n    style="display: inline-flex;flex-direction: column;width: 38px;height: 160px;background:rgba(0,0,0,0.60);border-radius: 8px;align-items: center;">\n    <div id="'.concat(this.jSPlugin.id,'-scale-value" style="font-size: 12px;color:#FFFFFF;margin-top:10px;margin-bottom:4px;">2.0X</div>\n    <div style="width: 24px;" id="').concat(this.jSPlugin.id,'-addScale">\n      <?xml version="1.0" encoding="utf-8"?>\n      <svg version="1.1" fill="#FFFFFF" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n         viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n      <title>放大</title>\n      <g id="矩形">\n        <rect class="st0" width="20" height="20" fill="none"/>\n      </g>\n      <g id="形状结合">\n        <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5\n          s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>\n      </g>\n      <g id="路径-4">\n        <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>\n      </g>\n      <g id="路径-4备份">\n        <path class="st2" d="M10,13.2c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C10.6,12.9,10.3,13.2,10,13.2z"/>\n      </g>\n      </svg>\n    </div>\n    <div style="\n    position: relative;\n    width: 1px;\n    height: 64px;\n    border: 1px solid rgba(255,255,255,0.75);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;">\n    <div class="scale-body-line-dot" id="').concat(this.jSPlugin.id,'-scale-body-line-dot" style="width: 8px;\n      height: 8px;\n      background: #FFFFFF;\n      border-radius: 100%;\n      position: absolute;\n      border: 1.5px solid rgba(64,122,255,1);"></div>\n      <div id="').concat(this.jSPlugin.id,'-line-dot" style="width: 1px;\n      height: 0%;\n      background: #1890FF;\n      bottom: 0;"></div>\n    </div>\n    <div style="width: 24px;margin-top: 6px;" id="').concat(this.jSPlugin.id,'-subScale">\n      <?xml version="1.0" encoding="utf-8"?>\n      <svg fill="#FFFFFF" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n        <title>缩小</title>\n        <g id="矩形">\n          <rect class="st0" width="20" height="20" fill="none"/>\n        </g>\n        <g id="形状结合">\n          <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5\n            s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>\n        </g>\n        <g id="路径-4">\n          <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>\n        </g>\n      </svg>\n    </div>\n  </div>\n    ');n.innerHTML=a,document.getElementById("".concat(t.id,"-audioControls-left")).parentNode.appendChild(n),document.getElementById("".concat(t.id,"-addScale")).onclick=function(){i.addScale()},document.getElementById("".concat(t.id,"-subScale")).onclick=function(){i.subScale()}}return l(e,[{key:"onMouseDown",value:function(e){var t=this.enableZoom;if(!t)return!1;this.moveX=e.clientX,this.moveY=e.clientY}},{key:"onMouseUp",value:function(e){var t=this.currentPosition,i=this.enableZoom;if(!i)return!1;t.left=t.left-(e.clientX-this.moveX),t.top=t.top-(e.clientY-this.moveY),this.doScale()}},{key:"onTouchstart",value:function(e){var t=this.enableZoom;if(!t)return!1;if(this.jSPlugin.use3DZoom||1===this.currentScale)return!1;var i=this.jSPlugin.beforeMobileZoomVerify();if(!i)return!1;if(!this.inited){var n=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=n.width,this.videoHeight=n.height,this.currentPosition.left=0,this.currentPosition.top=0,this.isFullScreen?(this.currentPosition.right=n.height,this.currentPosition.bottom=n.width):(this.currentPosition.right=n.width,this.currentPosition.bottom=n.height),this.inited=!0}var a=e.touches,o=a[0];if(o){var r={clientX:0,clientY:0};this.isFullScreen?(r.clientX=o.clientY,r.clientY=this.videoHeight-o.clientX):(r.clientX=o.clientX,r.clientY=o.clientY),this.point1=r}}},{key:"onTouchend",value:function(e){var t=this,i=this.currentPosition,n=this.enableZoom;if(!n)return!1;var a=e.changedTouches,o=a[0];this.isFullScreen?(i.top=i.top-(o.clientY-this.point1.clientX),i.left=i.left-(this.videoHeight-o.clientX-this.point1.clientY)):(i.left=i.left-(o.clientX-t.point1.clientX),i.top=i.top-(o.clientY-t.point1.clientY)),t.doScale()}},{key:"renderDot",value:function(){var e=this.currentScale;document.getElementById("".concat(this.jSPlugin.id,"-scale-value"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-value")).innerHTML="".concat(e,".0X")),document.getElementById("".concat(this.jSPlugin.id,"-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-line-dot")).style.height="".concat((e-1)/7*100,"%")),document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot")).style.bottom="calc(".concat((e-1)/7*100,"% - 6px)"))}},{key:"getTopMostElement",value:function(e,t,i){var n=e?e.getBoundingClientRect():null,a=t?t.getBoundingClientRect():null,o=i?i.getBoundingClientRect():null;if(!n&&!a&&!o)return null;if(!n)return a.top<o.top?t:i;if(!a)return n.top<o.top?e:i;if(!o)return n.top<a.top?e:t;var r=[n.top,a.top,o.top],s=Math.max.apply(Math,r);return n.top===s?e:a.top===s?t:i}},{key:"handleFullscreen",value:function(e,t,i){this.isFullScreen=e,this.clientRect={width:t,height:i}}},{key:"startZoom",value:function(){var e=this,t=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=t.width||this.jSPlugin.width,this.videoHeight=t.height||this.jSPlugin.height,this.currentPosition.left=0,this.currentPosition.top=0,this.isFullScreen?(this.currentPosition.right=t.height,this.currentPosition.bottom=t.width,this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(this.videoWidth,0,0,this.videoHeight,!1)):(this.currentPosition.right=t.width,this.currentPosition.bottom=t.height,this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1)),this.currentScale=1,document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="block");try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1),this.jSPlugin.jSPlugin.bEZoom=!0}catch(i){console.log(i)}this.renderDot(),this.enableZoom=!0,this.jSPlugin.isMobile?(document.getElementById("".concat(this.jSPlugin.id,"canvas0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("touchstart",(function(t){return e.onTouchstart(t)})),document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("touchend",(function(t){return e.onTouchend(t)}))),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("touchstart",(function(t){return e.onTouchstart(t)})),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("touchend",(function(t){return e.onTouchend(t)}))),document.getElementById("".concat(this.jSPlugin.id,"-player"))&&(document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("touchstart",(function(t){return e.onTouchstart(t)})),document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("touchend",(function(t){return e.onTouchend(t)})))):(document.getElementById("".concat(this.jSPlugin.id,"canvas0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("mousedown",(function(t){return e.onMouseDown(t)})),document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("mouseup",(function(t){return e.onMouseUp(t)}))),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("mousedown",(function(t){return e.onMouseDown(t)})),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("mouseup",(function(t){return e.onMouseUp(t)}))),document.getElementById("".concat(this.jSPlugin.id,"-player"))&&(document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("mousedown",(function(t){return e.onMouseDown(t)})),document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("mouseup",(function(t){return e.onMouseUp(t)}))))}},{key:"stopZoom",value:function(){this.currentScale=1;try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1)}catch(e){console.log(e)}document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="none"),this.renderDot(),this.enableZoom=!1}},{key:"doScale",value:function(){var e=this.currentPosition,t=this.currentScale;this.isFullScreen?(e.left=e.left+.5*(e.right-e.left)-this.videoWidth/(2*t)*.5,e.left<0?e.left=0:e.left>this.videoWidth-this.videoWidth/(2*t)&&(e.left=this.videoWidth-this.videoWidth/(2*t)),e.right=e.left+this.videoWidth/(2*t),e.top=e.top+.5*(e.bottom-e.top)-this.videoHeight/(2*t)*.5,e.top<0?e.top=0:e.top>this.videoHeight-this.videoHeight/(2*t)&&(e.top=this.videoHeight-this.videoHeight/(2*t)),e.bottom=e.top+this.videoHeight/(2*t)):(e.left=e.left+e.xPercent*(e.right-e.left)-this.videoWidth/t*.5,e.left<0?e.left=0:e.left>this.videoWidth-this.videoWidth/t&&(e.left=this.videoWidth-this.videoWidth/t),e.right=e.left+this.videoWidth/t,e.top=e.top+e.yPercent*(e.bottom-e.top)-this.videoHeight/t*.5,e.top<0?e.top=0:e.top>this.videoHeight-this.videoHeight/t&&(e.top=this.videoHeight-this.videoHeight/t),e.bottom=e.top+this.videoHeight/t),e.left=parseInt(e.left,10),e.right=parseInt(e.right,10),e.top=parseInt(e.top,10),e.bottom=parseInt(e.bottom,10);try{this.isFullScreen?this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(e.top,e.bottom,e.left,e.right,1!=t,!0):e.left<e.right&&e.top<e.bottom&&e.bottom<=this.videoHeight&&e.right<=this.videoWidth&&this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(e.left,e.right,e.top,e.bottom,1!=t)}catch(i){console.log(i)}this.renderDot()}},{key:"addScale",value:function(){var e=this.currentScale,t=this.currentPosition;if(e>=8)return console.log("达到最大倍率了"),this.jSPlugin.Message&&this.jSPlugin.Message["default"]("已经放大到最大倍数8.0X"),!1;this.currentScale++,t.xPercent=.5,t.yPercent=.5,this.doScale()}},{key:"subScale",value:function(){var e=this.currentScale,t=this.currentPosition;if(e<=1)return console.log("达到最小倍率了"),!1;this.currentScale--,t.xPercent=.5,t.yPercent=.5,this.doScale()}}]),e}(),Xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},s="";r=Object.assign(r,o);var l=new Headers;Object.keys(r).map((function(e){l.append(e,r[e])})),r=l,Object.keys(Object.assign({},i)).forEach((function(e){var t=i[e];"string"===typeof i[e]&&(t=i[e].replace("%","%25")),"undefined"!==typeof i[e]&&(s+="&".concat(e,"=").concat(encodeURIComponent(t)))})),s.length>0&&(s=-1!==["GET","PUT","DELETE"].indexOf(t.toUpperCase())?"?".concat(s.slice(1)):s.slice(1));var d=e+(-1!==["GET","PUT","DELETE"].indexOf(t.toUpperCase())?s:""),c={headers:r,method:t};"POST"===t&&(c.body=s),"POST"===t&&o&&"application/json"===o["Content-Type"]&&(c.body=JSON.stringify(i)),"GET"===t&&(-1===d.indexOf("?")?d+="?_r=".concat(Math.random()):d+="&_r=".concat(Math.random())),fetch(d,c).then((function(e){var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?e.json():e.text()})).then((function(e){n&&n(e)}))["catch"]((function(e){a&&a(e)}))},Je=function(e,t,i,n,a,o){return'\n<svg  id="'.concat(e,'-hdSelect-icon" class="theme-icon-item-icon ').concat(t,"-btn\" data-type='hd' style=\"display: ").concat(["hd","0"].includes(o.level)?"flex":"none",'"  fill="').concat(i,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(n>a?48:32,'" height="').concat(n>a?48:32,'" viewBox="-6 -6 32 32">\n    <path d="M17.4,16.5H3.1c-0.8,0-1.4-0.6-1.4-1.4V5.4c0-0.9,0.7-1.6,1.6-1.6h14.1c0.8,0,1.4,0.6,1.4,1.4v9.8 C18.8,15.9,18.2,16.5,17.4,16.5z M3.3,5C3.1,5,2.9,5.2,2.9,5.4v9.7c0,0.2,0.1,0.3,0.3,0.3h14.3c0.2,0,0.3-0.1,0.3-0.3V5.3 c0-0.2-0.1-0.3-0.3-0.3H3.3z" />\n    <path d="M13.3,13.6h-1.6c-0.4,0-0.7-0.3-0.7-0.7V7.4c0-0.4,0.3-0.7,0.7-0.7h1.6c1.2,0,2.2,1,2.2,2.2v2.4 C15.6,12.6,14.6,13.6,13.3,13.6z M12.2,12.5h1.1c0.6,0,1.1-0.5,1.1-1.1V9c0-0.6-0.5-1.1-1.1-1.1h-1.1V12.5z" />\n    <path d="M5.5,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3C5,7,5.2,6.8,5.5,6.8S6.1,7,6.1,7.3v5.7C6.1,13.4,5.8,13.6,5.5,13.6z" />\n    <path d="M9.2,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3c0-0.3,0.2-0.6,0.6-0.6S9.8,7,9.8,7.3v5.7C9.8,13.4,9.5,13.6,9.2,13.6z" />\n    <rect x="5.6" y="9.6" width="3.6" height="1.1" />\n</svg>\n')},qe=function(e,t,i,n,a,o){return'\n<svg id="'.concat(e,'-sdSelect-icon" class="theme-icon-item-icon ').concat(t,"-btn\" data-type='sd' style=\"display: ").concat(["sd","1"].includes(o.level)?"flex":"none",'"  fill="').concat(i,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(n>a?48:32,'" height="').concat(n>a?48:32,'" viewBox="-6 -8 40 44">\n    <path d="M24.1,23.8h-20c-1.1,0-1.9-0.9-1.9-1.9V8.4c0-1.2,1-2.2,2.1-2.2h19.7c1.1,0,1.9,0.9,1.9,1.9v13.8\n        C26,23,25.1,23.8,24.1,23.8z M4.3,7.7C4,7.7,3.7,8,3.7,8.4v13.5c0,0.2,0.2,0.4,0.4,0.4h20c0.2,0,0.4-0.2,0.4-0.4V8.2\n        c0-0.2-0.2-0.4-0.4-0.4H4.3z"/>\n    <path d="M18.4,19.8h-2.2c-0.5,0-0.9-0.4-0.9-0.9v-7.8c0-0.5,0.4-0.9,0.9-0.9h2.2c1.7,0,3.1,1.4,3.1,3.1v3.3\n    C21.5,18.4,20.1,19.8,18.4,19.8z M16.7,18.3h1.6c0.9,0,1.6-0.7,1.6-1.6v-3.3c0-0.9-0.7-1.6-1.6-1.6h-1.6V18.3z"/>\n    <path d="M10.5,19.8c1.2,0,2.1-0.3,2.7-0.9c0.6-0.6,0.9-1.3,0.9-2.1c0-0.8-0.3-1.4-0.9-1.8c-0.4-0.2-1.1-0.5-2.2-0.8\n        l0,0l-1-0.2c-0.4-0.1-0.8-0.2-1-0.4c-0.4-0.2-0.6-0.5-0.6-0.9c0-0.4,0.1-0.6,0.4-0.9s0.7-0.3,1.3-0.3c0.8,0,1.4,0.2,1.8,0.6\n        c0.2,0.3,0.3,0.6,0.4,0.9l0,0h1.4c0-0.6-0.2-1.1-0.5-1.6c-0.6-0.8-1.6-1.2-2.9-1.2c-1,0-1.8,0.3-2.4,0.8c-0.6,0.5-0.9,1.2-0.9,2\n        c0,0.7,0.3,1.3,1,1.7c0.4,0.2,0.9,0.4,1.7,0.6l0,0l1.2,0.3c0.6,0.2,1.1,0.3,1.3,0.4c0.3,0.2,0.5,0.5,0.5,0.9c0,0.5-0.2,0.9-0.6,1.1\n        s-0.9,0.4-1.5,0.4c-0.9,0-1.6-0.2-2-0.7c-0.2-0.3-0.3-0.6-0.4-1.1l0,0H6.8c0,0.9,0.3,1.6,0.9,2.2C8.2,19.5,9.2,19.8,10.5,19.8z"/>\n    <defs>\n    <filter id="Adobe_OpacityMaskFilter" filterUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5">\n        <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>\n    </filter>\n    </defs>\n    <mask maskUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5" id="mask-2_2_">\n    <g class="st2">\n        <path id="path-1_2_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4\n        v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>\n    </g>\n    </mask>\n    <defs>\n    <filter id="Adobe_OpacityMaskFilter_1_" filterUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5">\n        <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>\n    </filter>\n    </defs>\n    <mask maskUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5" id="mask-2_3_">\n    <g class="st5">\n        <path id="path-1_3_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4\n        v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>\n    </g>\n    </mask>\n</svg>\n')},Ke=[{name:"高清",level:"0",streamType:1,icon:Je},{name:"标清",level:"1",streamType:1,icon:qe}],$e=[{name:"高清",level:"hd",streamType:1,icon:Je},{name:"标清",level:"sd",streamType:2,icon:qe}],Qe=function(e,t,i,n){var a=function(e){console.log(e),e.meta&&i(e)},o=function(e){console.log(e),n(e)},r="".concat(e.env.domain,"/api/service/media/template/getDetail?accessToken=").concat(e.accessToken,"&id=").concat(t);fetch(r,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("get theme data",e),a(e)}))["catch"]((function(e){o(e)}))},et=function(e,t,i,n,a){return new Promise((function(o,r){L("".concat(e,"/api/lapp/device/ptz/mirror"),"POST",{accessToken:t,deviceSerial:i,channelNo:n,command:a},"",o)}))},tt=function(e,t,i,n){var a="".concat(e,"/api/service/device/capacity/video/quality?accessToken=").concat(t,"&deviceSerial=").concat(i,"&channelNo=").concat(n);return fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(e.meta&&200===e.meta.code&&e.data&&e.data.length>0){var t=e.data.find((function(e){return 2===e.streamTypeIn}));if(t)return $e}return Ke}))["catch"]((function(){return Ke}))},it=function(e){var t="";return Object.keys(e).map((function(i,n){t+="".concat(i,":").concat(e[i]).concat(n<Object.keys(e).length-1?";":"")})),t},nt=500,at=function(){function e(t){var i=this;if(r(this,e),this.jSPlugin=t,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.autoFocus=0,this.autoFocusTimer=null,this.recordTimer=null,this.nextRate=1,this.showHD=!1,this.themeInited=!1,this.decoderState={state:{isEditing:!1,play:!1,pauseDate:null,sound:!1,recordvideo:!1,recordCount:"00:00",talk:!1,zoom:!1,pantile:!1,hd:{},hdList:[],speed:!1,expend:!1,webExpend:!1,cloudRec:"cloud.rec"===M(t.url).type,rec:"rec"===M(t.url).type,type:M(t.url).type}},this.allowZoom=!this.jSPlugin.use3DZoom,this.zoomDisable=!1,this.pluginStatus=new Y(this,this.jSPlugin.params.id),this.inited=!1,this.isMobile=F(),"undefined"!==typeof t.isMobile&&(this.isMobile=t.isMobile),this.pauseTime=null,this.themeData=Re.data,this.deviceQ,this.jSPlugin.themeId)switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":case"miniRec":var n=G.find(We,(function(e){return e.themeId===i.jSPlugin.themeId}));n&&(this.themeData=n),this.initThemeData();break;case"themeData":this.themeData=this.jSPlugin.params.themeData,this.initThemeData();break;default:this.fetchThemeData(this.jSPlugin.themeId);break}this.jSPlugin.Talk||(this.jSPlugin.Talk=new we(this.jSPlugin)),S("".concat(this.jSPlugin.staticPath,"/speed/speed.css")),S("".concat(this.jSPlugin.staticPath,"/css/theme.css"))}return l(e,[{key:"fetchThemeData",value:function(e){var t=this,i=function(e){0==e.meta.code&&e.data&&(t.themeData=e.data,e.data.header&&(t.themeData.header=e.data.header,t.themeData.header.btnList=t.themeData.header.btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),e.data.footer&&(t.themeData.footer=e.data.footer,t.themeData.footer.btnList=t.themeData.footer.btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),t.initThemeData(),t.renderThemeData())},n=function(){t.renderThemeData()};Qe(this.jSPlugin,e,i,n)}},{key:"changeTheme",value:function(e){var t=this;if("string"===typeof e)switch(this.jSPlugin.themeId=e,this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":case"miniRec":var i=G.find(We,(function(e){return e.themeId===t.jSPlugin.themeId}));i&&(this.themeData=i),this.initThemeData();break;default:this.fetchThemeData(e);break}else"object"===o(e)&&(this.themeData=e,this.initThemeData(),this.decoderState.state.isEditing&&this.editStart());this.jSPlugin&&this.jSPlugin.handleThemeChange&&this.jSPlugin.handleThemeChange(e)}},{key:"renderThemeData",value:function(){var e=this,t=this.themeData,i=t.header,n=t.footer;if(this.isNeedRenderHeader&&i&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=i.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=i.color.replace("-diy",""),i.btnList.map((function(t,i){t.isrender&&e.setDecoderState(d({},t.iconId,e.decoderState.state[t.iconId]))}))),this.isNeedRenderFooter&&n)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=n.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=n.color.replace("-diy",""),n.btnList.map((function(t,i){if(t.isrender&&e.setDecoderState(d({},t.iconId,e.decoderState.state[t.iconId])),"play"===t.iconId&&t.defaultActive&&!e.themeInited)var n=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(n),e.jSPlugin.play(),e.themeInited=!0)}),50)})),this.themeData.autoFocus>0&&(this.autoFocus=parseInt(this.themeData.autoFocus),this.startAutoFocus(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",(function(){document.getElementById("".concat(e.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),e.startAutoFocus()}))),this.setDecoderState({cloudRec:"cloud.rec"===M(this.jSPlugin.url).type,rec:"rec"===M(this.jSPlugin.url).type,type:M(this.jSPlugin.url).type});else if(!this.themeInited)var a=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(a),e.jSPlugin.play(),e.themeInited=!0)}),50);var o=G.findIndex(this.themeData.footer.btnList,(function(e){return"zoom"===e.iconId&&e.isrender>0}))>=0;o&&(this.isMobile&&!this.jSPlugin.use3DZoom&&(this.jSPlugin.beforeMobileZoomVerify=function(){var t=e.decoderState.state.play;return!!t}),this.jSPlugin.Zoom=new Ze(this.jSPlugin));var r=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(r),e.jSPlugin.reSize(e.jSPlugin.params.width,e.jSPlugin.params.height))}),50)}},{key:"setDecoderState",value:function(e){var t=this,i=this.themeData,n=i.header,a=i.footer;Object.keys(e).map((function(i,o){var r="#FFFFFF",s="#FFFFFF",l=n.btnList.findIndex((function(e){return e.iconId===i}));switch(-1===l?(r=a.color.replace("-diy",""),s=a.activeColor.replace("-diy","")):(r=n.color.replace("-diy",""),s=a.activeColor.replace("-diy","")),i){case"play":e[i]?document.getElementById("".concat(t.jSPlugin.id,"-play"))&&(document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[1].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-play")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).childNodes[0].children[0].style.fill=e[i]?s:r):document.getElementById("".concat(t.jSPlugin.id,"-play"))&&(document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[0].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-play")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).childNodes[0].children[1].style.fill=e[i]?s:r);break;case"sound":document.getElementById("".concat(t.jSPlugin.id,"-sound"))&&(e[i]?(document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-sound")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).childNodes[0].children[1].style.fill=e[i]?s:r):(document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-sound")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).childNodes[0].children[0].style.fill=e[i]?s:r));break;case"recordvideo":document.getElementById("".concat(t.jSPlugin.id,"-recordvideo"))&&(document.getElementById("".concat(t.jSPlugin.id,"-recordvideo")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-recordvideo-content")).childNodes[0].style.fill=e[i]?s:r,e[i]?t.countTime("add",0):t.countTime("destroy",0));break;case"talk":document.getElementById("".concat(t.jSPlugin.id,"-talk"))&&(document.getElementById("".concat(t.jSPlugin.id,"-talk")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-talk-content")).childNodes[1].style.fill=e[i]?s:r);break;case"zoom":document.getElementById("".concat(t.jSPlugin.id,"-zoom"))&&(document.getElementById("".concat(t.jSPlugin.id,"-zoom")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-zoom-content")).childNodes[1].style.fill=e[i]?s:r);break;case"pantile":document.getElementById("".concat(t.jSPlugin.id,"-pantile"))&&(document.getElementById("".concat(t.jSPlugin.id,"-pantile")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-pantile-content")).childNodes[0].style.fill=e[i]?s:r);break;case"webExpend":e[i]?(document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend")).className="disabled")):(document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend")).className="")),document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[0].style.fill=e[i]?s:r,document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[1].style.fill=e[i]?s:r);break;case"capturePicture":document.getElementById("".concat(t.jSPlugin.id,"-capturePicture"))&&(document.getElementById("".concat(t.jSPlugin.id,"-capturePicture")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-capturePicture-content")).childNodes[0].style.fill=e[i]?s:r);break;case"expend":e[i]?(document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend")).className="disabled")):(document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend")).className="")),document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[0].style.fill=e[i]?s:r,document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[1].style.fill=e[i]?s:r);break;case"hd":break;case"speed":document.getElementById("".concat(t.jSPlugin.id,"-speed"))&&(document.getElementById("".concat(t.jSPlugin.id,"-speed-content")).children[1].children[0].style.color=e[i]?s:r,document.getElementById("".concat(t.jSPlugin.id,"-speed-content")).children[1].children[0].style.borderColor=e[i]?s:r),document.getElementById("".concat(t.jSPlugin.id,"-select-mask"))&&(t.isMobile&&e[i]?document.getElementById("".concat(t.jSPlugin.id,"-select-mask")).style.display="block":document.getElementById("".concat(t.jSPlugin.id,"-select-mask")).style.display="none");break;case"cloudRec":document.getElementById("".concat(t.jSPlugin.id,"-cloudRec"))&&(console.log("document.getElementById(`${this.jSPlugin.id}-cloudRec-content`)",document.getElementById("".concat(t.jSPlugin.id,"-cloudRec"))),document.getElementById("".concat(t.jSPlugin.id,"-cloudRec")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=e[i]?s:r),document.getElementById("".concat(t.jSPlugin.id,"-rec"))&&(document.getElementById("".concat(t.jSPlugin.id,"-rec")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=e[i]?r:s);break;case"rec":document.getElementById("".concat(t.jSPlugin.id,"-cloudRec"))&&(document.getElementById("".concat(t.jSPlugin.id,"-cloudRec")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=e[i]?r:s),document.getElementById("".concat(t.jSPlugin.id,"-rec"))&&(document.getElementById("".concat(t.jSPlugin.id,"-rec")).className=e[i]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=e[i]?s:r);break}t.decoderState.state=Object.assign(t.decoderState.state,e)}))}},{key:"startAutoFocus",value:function(){var e=this,t=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout((function(){document.getElementById("".concat(e.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.pointerEvents="none")}),1e3*t)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer)}},{key:"hideFooter",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="none")}},{key:"showFooter",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="block")}},{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"renderFooter",value:function(e,t){var i=this,n=this.matchBtn(e),a=document.createElement("div");a.className="theme-icon-item",a.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(n.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(n.id,'-content" title="').concat(n.title,'" style="height:').concat(this.jSPlugin.width>nt?48:32,'px;display: flex;align-items: center;position:relative;">')).concat(n.domString,"</div>")+"</span>",a.onclick=function(e){if(i.decoderState.state.isEditing)return!1;n.onclick(e)},n.onmouseenter&&(a.onmouseenter=function(e){if(i.decoderState.state.isEditing)return!1;n.onmouseenter(e)}),n.onmouseleave&&(a.onmouseleave=function(e){if(i.decoderState.state.isEditing)return!1;n.onmouseleave(e)});var o=document.createElement("span");o.className="icon-move left",o.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(n.id,'-left" title="左移" style="position: absolute;top: calc(50% - 10px);left: -4px;"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080;"><path d="M7.4,10V5.3c0-0.3-0.3-0.6-0.6-0.6c-0.1,0-0.3,0.1-0.4,0.2L3.7,7.4c-0.2,0.2-0.3,0.6,0,0.8 c0,0,0,0,0.1,0.1l2.7,2.2c0.2,0.2,0.6,0.2,0.8-0.1C7.3,10.3,7.4,10.2,7.4,10z"></path></svg></span>'),o.onclick=function(){i.editIcon(n.id,"left","footer")},a.appendChild(o);var r=document.createElement("span");r.className="icon-move right",r.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(n.id,'-right" class="ezuikit-theme-icon" title="右移" style="position: absolute;top: calc(50% - 10px);left: calc(100% - 8px);"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080"><path d="M3.4,5.2v4.7c0,0.3,0.3,0.6,0.6,0.6c0.1,0,0.3-0.1,0.4-0.2l2.7-2.5c0.2-0.2,0.3-0.6,0-0.8 c0,0,0,0-0.1-0.1L4.4,4.8C4.1,4.6,3.8,4.6,3.6,4.9C3.5,5,3.4,5.1,3.4,5.2z"></path></svg></span>'),r.onclick=function(){i.editIcon(n.id,"right","footer")},a.appendChild(r);var s=document.createElement("span");s.className="icon-move close",s.innerHTML='<span id="'.concat(n.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -10px;right: -10px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span>',s.onclick=function(){i.editIcon(n.id,"delete","footer")},a.appendChild(s),"left"===t?document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[0].appendChild(a):document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[1].appendChild(a)}},{key:"editIcon",value:function(e,t,i){console.log("编辑组件",e,t,i);var n=this.themeData;console.log("themeData",this.themeData);var a=this.themeData[i].btnList,o=G.findIndex(a,(function(t){return t.iconId===e})),r=a[o];switch(t){case"delete":if("rec"===e){if(-1===G.findIndex(a,(function(e){return"cloudRec"===e.iconId&&1==e.isrender})))return this.jSPlugin.Message&&this.jSPlugin.Message["default"]("必须选中一种存储介质"),!1}else if("cloudRec"===e&&-1===G.findIndex(a,(function(e){return"rec"===e.iconId&&1==e.isrender})))return this.jSPlugin.Message&&this.jSPlugin.Message["default"]("必须选中一种存储介质"),!1;a[o].isrender=0;break;case"right":for(var s=-1,l=o+1;l<a.length;l++)if(a[l].part===a[o].part&&1==a[l].isrender){s=l;break}-1!==s&&(a[o]=a[s],a[s]=r);break;case"left":for(var d=-1,c=o-1;c>=0;c--)if(a[c].part===a[o].part&&1==a[c].isrender){d=c;break}-1!==d&&(a[o]=a[d],a[d]=r);break}n[i].btnList=a,this.changeTheme(n)}},{key:"renderHeader",value:function(e,t){var i=this,n=this.matchBtn(e),a=document.createElement("div");a.className="theme-icon-item",a.style="max-width:50%;",a.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(n.id,'" style="position:relative;";>')+'<span id="'.concat(this.jSPlugin.id,"-").concat(n.id,'-content" title="').concat(n.title,'" style="display:inline-block;height:').concat(this.width>nt?48:32,'px;">')).concat(n.domString,"</span>")+'<span id="'.concat(this.jSPlugin.id,"-").concat(n.id,'-remove" title="移除" style="position: absolute;top: -6px;left: 38px;display: none;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span></span>',a.onclick=function(e){if(i.decoderState.state.isEditing)return!1;n.onclick(e)};var o=document.createElement("span");o.className="icon-move close",o.innerHTML='<span id="'.concat(n.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -6px;right: -6px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span>',o.onclick=function(){i.editIcon(n.id,"delete","header")},a.appendChild(o),"left"===t?document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(a):document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[1].appendChild(a)}},{key:"countTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var n=document.createElement("div");n.id=this.jSPlugin.id+"time-area",n.className="time-area",n.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(n)}if(this.countTimer&&clearInterval(this.countTimer),"add"===e){var a=t;document.getElementById(i.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval((function(){++a,document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML=o(a)}),1e3)}else"destroy"===e&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(i.jSPlugin.id+"time-area")&&(document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(i.jSPlugin.id+"time-area").style.display="none"));function o(e){var t=parseInt(e),i=0,n=0,a="00",o="00",r="00";return t>59&&(i=parseInt(t/60),t=parseInt(t%60),i>59&&(n=parseInt(i/60),i=parseInt(i%60))),a=parseInt(t)>9?parseInt(t):"0"+parseInt(t),o=parseInt(i)>9?parseInt(i):"0"+parseInt(i),r=parseInt(n)>9?parseInt(n):"0"+parseInt(n),n>0?r+":"+o+":"+a:i>0?o+":"+a:"00:"+a}}},{key:"setDisabled",value:function(e){var t=this.decoderState.state.sound,i=e?"cursor: not-allowed; fill: gray; color: gray":"cursor: default";null!=document.getElementById("".concat(this.jSPlugin.id,t?"-sound-icon":"-nosound-icon"))&&document.getElementById("".concat(this.jSPlugin.id,t?"-sound-icon":"-nosound-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon")).setAttribute("style",i),null!=document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon")).setAttribute("style",i),null!=document.getElementById("".concat(this.jSPlugin.id,"-talk-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-talk-icon")).setAttribute("style",i),this.allowZoom||null!=document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon")).setAttribute("style",i),null!=document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon")).setAttribute("style",i);var n=document.getElementsByClassName("".concat(this.jSPlugin.id,"-select-quality-btn"));if(n.length)for(var a=0;a<n.length;a++)e?(n[a].style.cursor="not-allowed",n[a].style.fill="gray",n[a].style.color="gray"):(n[a].style.cursor="default",n[a].style.fill="",n[a].style.color="");null!=document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))&&document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).setAttribute("style",document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).getAttribute("style")+";"+(e?"cursor: not-allowed;color: gray;border-color: gray;":"cursor: default;color: #ffffff;border-color: #ffffff;")),this.zoomDisable=this.jSPlugin.use3DZoom&&e}},{key:"matchBtn",value:function(e){var t=this,i=this.themeData,n=i.header,a=i.footer,r={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},s=n.btnList.findIndex((function(t){return t.iconId===e}));switch(-1===s?(r.color=a.color,r.backgroundColor=a.backgroundColor,r.activeColor=a.activeColor):(r.color=n.color,r.backgroundColor=n.backgroundColor,r.activeColor=n.activeColor),e){case"play":r.title="播放/结束播放",r.id=e,r.domString='<div style="height: 100%">'+'<svg id="'.concat(this.jSPlugin.id+"-play-icon",'" class="theme-icon-item-icon" style="display:none" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'"  fill="').concat(r.color,'" viewBox="-6 -6 32 32">\n            <path id="Stroke-1" class="st1" d="M10.5,1.7c-4.9,0-8.8,4-8.8,8.8s4,8.8,8.8,8.8s8.8-4,8.8-8.8S15.4,1.7,10.5,1.7z M10.5,2.7\n              c4.3,0,7.8,3.5,7.8,7.8s-3.5,7.8-7.8,7.8s-7.8-3.5-7.8-7.8S6.2,2.7,10.5,2.7z"/>\n            <path class="st2" d="M8.7,8C9,8,9.3,8.3,9.3,8.6v3.8C9.3,12.7,9,13,8.7,13C8.3,13,8,12.7,8,12.4V8.6C8,8.3,8.3,8,8.7,8z"/>\n            <path id="Rectangle-Copy-10" class="st2" d="M12.8,8c0.3,0,0.6,0.3,0.6,0.6v3.8c0,0.3-0.3,0.6-0.6,0.6c-0.3,0-0.6-0.3-0.6-0.6V8.6\n              C12.2,8.3,12.5,8,12.8,8z"/>\n          </svg>')+'<svg id="'.concat(this.jSPlugin.id+"-stop-icon",'" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M13,9.8L10.1,8C9.9,7.9,9.7,7.9,9.5,7.9c-0.6,0-1,0.4-1,1v3.7c0,0.2,0.1,0.4,0.2,0.5c0.3,0.5,0.9,0.6,1.4,0.3 l2.9-1.8c0.1-0.1,0.2-0.2,0.3-0.3C13.6,10.7,13.4,10.1,13,9.8z" /><path d="M10.5,1.9c-4.9,0-8.8,4-8.8,8.8c0,4.9,4,8.8,8.8,8.8s8.8-4,8.8-8.8C19.4,5.8,15.4,1.9,10.5,1.9z M10.5,18.5 c-4.3,0-7.8-3.5-7.8-7.8s3.5-7.8,7.8-7.8c4.3,0,7.8,3.5,7.8,7.8S14.9,18.5,10.5,18.5z" /></svg></div>',r.onclick=function(){var e=t.decoderState.state,i=e.play,n=e.isEditing,a=e.rec,o=e.cloudRec,r=e.recordvideo,s=e.pantile;if(n)return!1;t.jSPlugin.recTimer&&clearInterval(t.jSPlugin.recTimer),i?(a||o?(t.Rec&&t.Rec.unSyncTimeLine(),t.jSPlugin.pause().then((function(){t.setDecoderState({play:!i}),t.setDisabled(i)}))):(t.jSPlugin.stop().then((function(){t.setDecoderState({play:!i}),t.setDisabled(i)})),t.jSPlugin.Zoom.stopZoom(),t.jSPlugin.close3DZoom()),r&&t.setDecoderState({recordvideo:!1})):(a||o?(t.Rec&&t.Rec.syncTimeLine(),t.jSPlugin.resume().then((function(){t.setDecoderState({play:!i}),t.setDisabled(i)}))):t.jSPlugin.play().then((function(){t.setDecoderState({play:!i}),t.setDisabled(i)})),t.jSPlugin.use3DZoom&&t.resetMobileZoomStatus()),t.jSPlugin.use3DZoom?(t.setDecoderState({zoom:!1}),t.allowZoom=!1):t.allowZoom=a||o,s&&t.Ptz&&(t.Ptz.hide(),t.setDecoderState({pantile:!1})),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display="none")};break;case"sound":r.title="声音",r.id=e,r.domString='<span style="height: 100%">'+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-nosound-icon" style="display:none" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">\n            <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"/>\n            <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n            <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"/>\n            <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"/>\n            </svg>')+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-sound-icon" style="display:inline-block" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" fill="').concat(r.color,'" viewBox="-6 -6 32 32">\n              <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7\n                c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"/>\n              <path d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3\n                c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"/>\n              <path id="Stroke-5" class="st1" d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8\n                C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0\n                L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"/>\n              <path  d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4\n                c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4\n                c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n            </svg>')+"</span>",r.onclick=function(){var e=t.decoderState.state,i=e.play,n=e.sound,a=e.talk,o=e.pantile;i&&!a&&(n?(t.jSPlugin.closeSound(),t.setDecoderState({sound:!1})):(t.jSPlugin.openSound(),t.setDecoderState({sound:!0})),o&&t.Ptz&&(t.Ptz.hide(),t.setDecoderState({pantile:!1})))};break;case"recordvideo":r.title="录屏",r.id=e,r.domString='<svg id="'.concat(this.jSPlugin.id,'-recordvideo-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M11.6,5.3H4.7c-1.4,0-2.5,1.1-2.5,2.5v5.9c0,1.4,1.1,2.5,2.5,2.5h6.9c1.4,0,2.5-1.1,2.5-2.5V7.7 C14.1,6.4,13,5.3,11.6,5.3z M4.7,6.3h6.9c0.8,0,1.5,0.7,1.5,1.5v5.9c0,0.8-0.7,1.5-1.5,1.5H4.7c-0.8,0-1.5-0.7-1.5-1.5V7.7 C3.3,6.9,3.9,6.3,4.7,6.3z" /><path d="M16.6,6.7c0.9-0.8,2.3-0.1,2.4,1l0,0.1v5.7c0,1.2-1.3,1.9-2.3,1.2l-0.1-0.1L13.3,12 c-0.2-0.2-0.2-0.5-0.1-0.7c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.7c0.3,0.2,0.7,0.1,0.8-0.3l0-0.1V7.8c0-0.4-0.4-0.6-0.7-0.4 l-0.1,0l-3.3,2.7c-0.2,0.2-0.5,0.1-0.7-0.1c-0.2-0.2-0.1-0.5,0-0.6l0.1-0.1L16.6,6.7z" /></svg>',r.onclick=function(){var e=t.decoderState.state,i=e.play,n=e.recordvideo;i&&(n?(t.jSPlugin.stopSave(),t.setDecoderState({recordvideo:!1})):(t.jSPlugin.startSave("".concat((new Date).getTime())),t.setDecoderState({recordvideo:!0})))};break;case"capturePicture":r.title="截图",r.id=e,r.domString='<svg id="'.concat(this.jSPlugin.id,'-capturePicture-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.8,7.7c-2,0-3.7,1.6-3.7,3.7S8.7,15,10.8,15c2,0,3.7-1.6,3.7-3.7S12.8,7.7,10.8,7.7z M10.8,8.7c1.5,0,2.7,1.2,2.7,2.7S12.2,14,10.8,14c-1.5,0-2.7-1.2-2.7-2.7S9.3,8.7,10.8,8.7z" /><path d="M8.6,3.7l-0.1,0C8,3.7,7.7,4,7.5,4.3l-1,1.7l-1.3,0C4,6.1,3.1,7,3.1,8.2v7.1 c0,1.2,0.9,2.1,2.1,2.1h11.1c1.2,0,2.1-0.9,2.1-2.1V8.2l0-0.1c-0.1-1.1-1-1.9-2.1-1.9l-1.3,0l-1.1-1.8c-0.2-0.4-0.7-0.6-1.1-0.6H8.6 z M8.6,4.7h4.2c0.1,0,0.2,0.1,0.3,0.1l1.2,2c0.1,0.2,0.3,0.2,0.4,0.2h1.6c0.6,0,1.1,0.5,1.1,1.1v7.1c0,0.6-0.5,1.1-1.1,1.1H5.1 c-0.6,0-1.1-0.5-1.1-1.1V8.2c0-0.6,0.5-1.1,1.1-1.1h1.6c0.2,0,0.3-0.1,0.4-0.2l1.2-2C8.4,4.7,8.5,4.7,8.6,4.7z" /></svg>',r.onclick=function(){var e=t.decoderState.state.play;e?t.jSPlugin.capturePicture("".concat((new Date).getTime())):console.log("视频未播放，无法截图")};break;case"talk":r.title="对讲",r.id=e,r.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-talk-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.1,2.7C8.5,2.7,7.2,4,7.2,5.6v5.2c0,1.6,1.3,2.9,2.9,2.9l0.2,0c1.5-0.1,2.7-1.4,2.7-2.9V5.6\tC13,4,11.7,2.7,10.1,2.7z M10.1,3.7c1.1,0,1.9,0.9,1.9,1.9v5.2c0,1-0.8,1.8-1.8,1.9l-0.1,0c-1,0-1.9-0.9-1.9-1.9V5.6 C8.2,4.5,9,3.7,10.1,3.7z" /><path d="M15.1,8.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,3-2.5,5.5-5.5,5.5c-3,0-5.4-2.3-5.5-5.3l0-0.2V9 c0-0.3,0.2-0.5,0.5-0.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,2.5,2,4.5,4.5,4.5c2.4,0,4.4-1.9,4.5-4.3l0-0.2V9 C14.6,8.7,14.8,8.5,15.1,8.5z" /><path d="M13.5,17.7c0.3,0,0.5,0.2,0.5,0.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-7c-0.3,0-0.5-0.2-0.5-0.5 c0-0.2,0.2-0.4,0.4-0.5l0.1,0H13.5z" /><path d="M10.1,15.2c0.2,0,0.4,0.2,0.5,0.4l0,0.1v2.5c0,0.3-0.2,0.5-0.5,0.5c-0.2,0-0.4-0.2-0.5-0.4l0-0.1 v-2.5C9.6,15.4,9.8,15.2,10.1,15.2z" /></svg>',r.onclick=function(){var e=t.decoderState.state,i=e.talk,n=e.sound,a=e.play,o=e.pantile;if(a){if(i){console.log("结束对讲"),t.setDecoderState({talk:!1}),t.jSPlugin.Talk.stopTalk();var r=G.findIndex(t.themeData.footer.btnList,(function(e){return"sound"===e.iconId&&1===e.isrender&&1===e.defaultActive}))>-1;t.themeData&&r&&(t.jSPlugin.openSound(),t.setDecoderState({sound:!0}))}else console.log("开始对讲"),t.setDecoderState({talk:!0}),t.jSPlugin.Talk.startTalk((function(e){n&&!e&&(t.jSPlugin.closeSound(),t.setDecoderState({sound:!1}))}));o&&t.Ptz&&(t.Ptz.hide(),t.setDecoderState({pantile:!1}))}};break;case"zoom":r.title=this.jSPlugin.use3DZoom?"3D定位":"电子放大",r.id=e,r.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-zoom-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="5 -6 5 32" style="enable-background:new 0 0 20 20.1;" xml:space="preserve">\n              <path class="st1" d="M8.8,2.6c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2s-6.2-2.8-6.2-6.2S5.3,2.6,8.8,2.6z M8.8,3.9\n                c-2.8,0-5,2.2-5,5s2.2,5,5,5s5-2.2,5-5S11.5,3.9,8.8,3.9z M12.7,12.7l3.9,3.9"/>\n              <path class="st2" d="M11.2,9.5h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S11.6,9.5,11.2,9.5z"/>\n              <path class="st2" d="M8.7,12c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C9.3,11.8,9.1,12,8.7,12z"/>\n              <path class="st2" d="M16.9,17.6c-0.1,0-0.3-0.1-0.4-0.2l-3.9-3.9c-0.2-0.2-0.2-0.6,0-0.8s0.6-0.2,0.8,0l3.9,3.9\n                c0.2,0.2,0.2,0.6,0,0.8C17.2,17.5,17,17.6,16.9,17.6z"/>\n          </svg>'),r.onclick=function(){var e=t.decoderState.state,i=e.zoom,n=e.play,a=e.rec,o=e.cloudRec;if(e.pantile,t.jSPlugin.use3DZoom){if(!n)return!1;i?t.jSPlugin.close3DZoom():t.jSPlugin.enable3DZoom()}else{if(t.zoomDisable||!a&&!o&&!n)return!1;i?(console.log("结束电子放大"),t.jSPlugin.Zoom.stopZoom()):(console.log("开始电子放大"),t.jSPlugin.Zoom.startZoom())}t.setDecoderState({zoom:!i})};break;case"pantile":r.title="云台控制",r.id=e,r.domString='<svg id="'.concat(this.jSPlugin.id,'-pantile-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.2,7.8c1.6,0,2.9,1.3,2.9,2.9s-1.3,2.9-2.9,2.9s-2.9-1.3-2.9-2.9S8.5,7.8,10.2,7.8z M10.2,8.8c-1.1,0-1.9,0.9-1.9,1.9s0.9,1.9,1.9,1.9s1.9-0.9,1.9-1.9S11.2,8.8,10.2,8.8z" /><path d="M8.8,3.5c0.7-0.6,1.8-0.6,2.5-0.1l0.1,0.1l1.4,1.1c0.2,0.2,0.3,0.5,0.1,0.7 c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1,0l-1.4-1.1C10.5,3.9,10,3.9,9.6,4.2L9.4,4.3L8,5.4C7.8,5.5,7.5,5.5,7.3,5.3c-0.2-0.2-0.1-0.5,0-0.6 l0.1-0.1L8.8,3.5z" /><path d="M2.5,12.3c-0.6-0.7-0.6-1.8-0.1-2.5l0.1-0.1l1.1-1.4c0.2-0.2,0.5-0.3,0.7-0.1 c0.2,0.2,0.2,0.4,0.1,0.6l0,0.1l-1.1,1.4C3,10.6,3,11.1,3.2,11.5l0.1,0.1L4.4,13c0.2,0.2,0.1,0.5-0.1,0.7c-0.2,0.2-0.5,0.1-0.6,0 l-0.1-0.1L2.5,12.3z" /><path d="M17.7,12.3c0.6-0.7,0.6-1.8,0.1-2.5l-0.1-0.1l-1.1-1.4c-0.2-0.2-0.5-0.3-0.7-0.1 c-0.2,0.2-0.2,0.4-0.1,0.6l0,0.1l1.1,1.4c0.3,0.4,0.3,0.9,0.1,1.3l-0.1,0.1L15.8,13c-0.2,0.2-0.1,0.5,0.1,0.7c0.2,0.2,0.5,0.1,0.6,0 l0.1-0.1L17.7,12.3z" /><path d="M8.8,18.2c0.7,0.6,1.8,0.6,2.5,0.1l0.1-0.1l1.4-1.1c0.2-0.2,0.3-0.5,0.1-0.7 c-0.2-0.2-0.4-0.2-0.6-0.1l-0.1,0l-1.4,1.1c-0.4,0.3-0.9,0.3-1.3,0.1l-0.1-0.1L8,16.3c-0.2-0.2-0.5-0.1-0.7,0.1 c-0.2,0.2-0.1,0.5,0,0.6l0.1,0.1L8.8,18.2z" /></svg>',r.onclick=function(){var e=t.decoderState.state,i=e.play,n=e.pantile,a=e.expend;if(i)if(n)console.log("隐藏云台"),t.Ptz.hide(),t.setDecoderState({pantile:!1});else{if(console.log("显示云台"),t.isMobile&&!a)return console.log("移动端，非全屏状态不展示云台"),!1;t.Ptz.show(),t.setDecoderState({pantile:!0})}};break;case"expend":r.title="全局全屏",r.id=e,r.domString='<span><svg id="'.concat(this.jSPlugin.id,'-expend-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,4.1,6.9,4.1H5.2 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.9,7.4,3.7,7.6,3.4,7.6z" /><path d="M6.9,18.1H5.2c-1.2,0-2.2-1-2.2-2.2v-1.8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8c0,0.7,0.6,1.2,1.2,1.2 h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,18.1,6.9,18.1z" /><path d="M15.7,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.9,17.1,16.9,18.1,15.7,18.1z" /><path d="M17.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-0.7-0.6-1.3-1.2-1.3h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8 c1.2,0,2.2,1,2.2,2.3v1.8C17.9,7.4,17.7,7.6,17.4,7.6z" /></svg>'+'<svg class="theme-icon-item-icon" style="display:none" width="'.concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" fill="').concat(r.color,'" viewBox="-6 -6 32 32">\n            <path class="st1" d="M5.7,8.1H3.9c-0.3,0-0.6-0.2-0.6-0.6S3.6,7,3.9,7h1.9c0.7,0,1.3-0.6,1.3-1.3V3.8c0-0.3,0.2-0.6,0.6-0.6\n              s0.6,0.2,0.6,0.6v1.9C8.2,7,7.1,8.1,5.7,8.1z"/>\n            <path class="st1" d="M7.6,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-0.7-0.6-1.3-1.3-1.3H3.9c-0.3,0-0.6-0.2-0.6-0.6s0.2-0.6,0.6-0.6h1.9\n              c1.3,0,2.4,1.1,2.4,2.4v1.9C8.2,17.5,7.9,17.7,7.6,17.7z"/>\n            <path class="st1" d="M13.4,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.6,0.2,0.6,0.6S17.5,14,17.2,14\n              h-1.9c-0.7,0-1.3,0.6-1.3,1.3v1.9C14,17.5,13.8,17.7,13.4,17.7z"/>\n            <path class="st1" d="M17.2,8.1h-1.9c-1.3,0-2.4-1.1-2.4-2.4V3.8c0-0.3,0.2-0.6,0.6-0.6S14,3.5,14,3.8v1.9C14,6.4,14.6,7,15.3,7h1.9\n              c0.3,0,0.6,0.2,0.6,0.6S17.5,8.1,17.2,8.1z"/>\n          </svg>\n          </span>'),r.onclick=function(){var e=t.decoderState.state;e.webExpend;var i=e.expend,n=e.zoom,a=e.pantile;if(i)if(t.isMobile){s=parseInt(getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(t.jSPlugin.id)).height,10);document.getElementById("".concat(t.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(t.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-32px"),document.getElementById("".concat(t.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(t.jSPlugin.id,"-headControl")).style.position="relative"),R(document.getElementById("".concat(t.jSPlugin.id,"-wrap")),t.jSPlugin.width,t.jSPlugin.height+s),t.jSPlugin.jSPlugin.JS_Resize(t.jSPlugin.width,t.jSPlugin.height),a&&t.Ptz&&(t.Ptz.hide(),t.setDecoderState({pantile:!1})),t.jSPlugin.fullScreenWidth=t.jSPlugin.width,t.jSPlugin.fullScreenHeight=t.jSPlugin.height;var o=t.jSPlugin.Zoom.currentScale;t.jSPlugin.Zoom&&t.jSPlugin.Zoom.handleFullscreen&&t.jSPlugin.Zoom.handleFullscreen(!i,t.jSPlugin.width,t.jSPlugin.height),t.jSPlugin.Zoom.stopZoom(),n&&setTimeout((function(){t.jSPlugin.Zoom.startZoom(),t.jSPlugin.Zoom.currentScale=o,t.jSPlugin.Zoom.doScale(o)}),200)}else{console.log("取消全局全屏");var r=D();r.then((function(e){console.log("取消全屏",e,t.jSPlugin),t.jSPlugin.jSPlugin.JS_Resize(t.jSPlugin.width,t.jSPlugin.height)}))}else if(console.log("执行全局全屏"),t.isMobile){var s=parseInt(getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(t.jSPlugin.id)).height,10);E(document.getElementById("".concat(t.jSPlugin.id,"-wrap")));var l=document.documentElement.clientWidth,d=document.documentElement.clientHeight;document.getElementById("".concat(t.jSPlugin.id)).style["backface-visibility"]="hidden",t.jSPlugin.jSPlugin.JS_Resize(d,l-s,!0),t.jSPlugin.fullScreenWidth=d,t.jSPlugin.fullScreenHeight=l-s;var c=t.jSPlugin.Zoom.currentScale;t.jSPlugin.Zoom&&t.jSPlugin.Zoom.handleFullscreen&&t.jSPlugin.Zoom.handleFullscreen(!i,d,l-s),t.jSPlugin.Zoom.stopZoom(),n&&setTimeout((function(){t.jSPlugin.Zoom.startZoom(),t.jSPlugin.Zoom.currentScale=c,t.jSPlugin.Zoom.doScale(c)}),200)}else{l=window.screen.width,d=window.screen.height;var u=t,h=k(document.getElementById("".concat(t.jSPlugin.id)));h.then((function(e){t.jSPlugin.jSPlugin.JS_Resize(l,d),t.jSPlugin.fullScreenWidth=l,t.jSPlugin.fullScreenHeight=d}))["catch"]((function(e){console.log(e)})),t.jSPlugin.close3DZoom(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach((function(e){window.addEventListener(e,(function(e){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;return t?(u.jSPlugin.jSPlugin.JS_Resize(l,d),u.jSPlugin.fullScreenWidth=l,u.jSPlugin.fullScreenHeight=d):u.jSPlugin.jSPlugin.JS_Resize(u.jSPlugin.width,u.jSPlugin.height),t}))}))}t.setDecoderState({expend:!i})};break;case"webExpend":r.title="网页全屏",r.id=e,r.domString='<span><svg id="'.concat(this.jSPlugin.id,'-webExpend-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.1,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S6.8,4.1,6.6,4.1H4.8 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.6,7.4,3.3,7.6,3.1,7.6z" /><path d="M15.3,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.6,17.1,16.6,18.1,15.3,18.1z" /><circle class="st2" cx="10.2" cy="10.4" r="1.1"/></svg>'+'<svg class="theme-icon-item-icon" fill="'.concat(r.color,'" style="display:none;" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-6 -6 32 32">\n          <path class="st1" d="M5.4,8.1H3.5C3.2,8.1,3,7.9,3,7.6s0.2-0.5,0.5-0.5h1.9c0.8,0,1.4-0.6,1.4-1.4V3.8c0-0.3,0.2-0.5,0.5-0.5\n            s0.5,0.2,0.5,0.5v1.9C7.7,7,6.7,8.1,5.4,8.1z"/>\n          <path class="st1" d="M13.1,17.7c-0.3,0-0.5-0.2-0.5-0.5v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.5,0.2,0.5,0.5s-0.2,0.5-0.5,0.5H15\n            c-0.8,0-1.4,0.6-1.4,1.4v1.9C13.6,17.4,13.4,17.7,13.1,17.7z"/>\n            <circle class="st2" cx="10.2" cy="10.4" r="1.1"/>\n          ')+"</svg></span>",r.onclick=function(){var e=t.decoderState.state,i=e.webExpend,n=e.expend,a=e.zoom;if(n)return console.log("正在全局全屏"),!1;if(t.jSPlugin.recTimer&&clearInterval(t.jSPlugin.recTimer),i){console.log("取消网页全屏");var o=D();o.then((function(e){t.jSPlugin.jSPlugin.JS_Resize(t.jSPlugin.width,t.jSPlugin.height)}))}else{console.log("执行网页全屏");var r=0,s=0,l=window.screen.width,d=window.screen.height,c=t,u=k(document.getElementById("".concat(t.jSPlugin.id,"-wrap")));u.then((function(e){document.getElementById("".concat(t.jSPlugin.id,"-canvas-container"))&&(r=parseInt(window.getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(t.jSPlugin.id,"-headControl"))&&(s=parseInt(window.getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-headControl"))).height,10)),t.jSPlugin.jSPlugin.JS_Resize(l,d-r-s),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach((function(e){window.addEventListener(e,(function(e){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;return t?(document.getElementById("".concat(c.jSPlugin.id,"-loading-item-0"))&&(document.getElementById("".concat(c.jSPlugin.id,"-loading-item-0")).style.height=window.screen.height-parseInt(window.getComputedStyle(document.getElementById("".concat(c.jSPlugin.id,"-headControl"))).height,10)+"px"),c.jSPlugin.jSPlugin.JS_Resize(l,d-r-s)):(document.getElementById("".concat(c.jSPlugin.id,"-loading-item-0"))&&(document.getElementById("".concat(c.jSPlugin.id,"-loading-item-0")).style.height=c.jSPlugin.height+parseInt(window.getComputedStyle(document.getElementById("".concat(c.jSPlugin.id,"-headControl"))).height,10)+"px"),c.jSPlugin.jSPlugin.JS_Resize(c.jSPlugin.width,c.jSPlugin.height),n&&(c.setDecoderState({expend:!1}),a&&c.jSPlugin.use3DZoom&&c.jSPlugin.enable3DZoom())),document.getElementById("".concat(c.jSPlugin.id,"-canvas-container"))&&(r=parseInt(window.getComputedStyle(document.getElementById("".concat(c.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(c.jSPlugin.id,"-headControl"))&&(s=parseInt(window.getComputedStyle(document.getElementById("".concat(c.jSPlugin.id,"-headControl"))).height,10)),t}))}))}))["catch"]((function(e){console.log(e)}))}t.setDecoderState({webExpend:!i})};break;case"hd":var l="".concat(this.jSPlugin.id,"-select-quality"),d="".concat(l,"-item");return r.title="画面清晰度",r.id=e,r.domString='<ul id="'.concat(this.jSPlugin.id,'-hdSelect" class="hd speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;bottom: calc(constant(safe-area-inset-bottom) + ').concat(this.isMobile?"80px":"50px",") !important;bottom: calc(env(safe-area-inset-bottom) + ").concat(this.isMobile?"80px":"50px",') !important;">\n          \x3c!-- 由接口返回生成 --\x3e  \n        </ul><span id="').concat(this.jSPlugin.id,'-hdSelect-icon-warp">\n           \x3c!-- 由接口返回生成 --\x3e\n          </span>'),r.onclick=function(e){var i=t.decoderState.state,n=i.hd,a=i.expend,o=i.recordvideo,r=i.play,s=i.hdList,d=i.zoom,c=i.pantile;if(e.stopPropagation(),r){var u=e.target.id,h=e.target.getAttribute("data-type");if(0===u.indexOf(l)){if(n.type+""!==h){var x=s.find((function(e){return e.level+""===h}));if(x&&(x.streamType!==n.streamType||x.level+""!==n.level+"")){t.jSPlugin.changeVideoLevel(x),t.setDecoderState({hd:x}),d&&t.jSPlugin.Zoom.stopZoom();var f=document.getElementById("".concat(t.jSPlugin.id,"-hdSelect-icon")),p=document.getElementById("".concat(t.jSPlugin.id,"-sdSelect-icon"));f&&(f.style.display=["hd","0"].includes(x.level)?"block":"none"),p&&(p.style.display=["sd","1"].includes(x.level)?"block":"none")}}t.resetMobileZoomStatus(),o&&t.setDecoderState({recordvideo:!1})}t.showHD=!t.showHD,document.getElementById("".concat(t.jSPlugin.id,"-hdSelect"))&&(document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.display="none"===document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.display?"block":"none",t.isMobile&&(document.getElementById("".concat(t.jSPlugin.id,"-select-hd-mask")).style.display="none"===document.getElementById("".concat(t.jSPlugin.id,"-select-hd-mask")).style.display?"block":"none"),t.themeData.autoFocus>0&&("none"===document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.display?t.startAutoFocus():t.stopAutoFocus())),t.isMobile&&a&&t.showHD?document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).className="hd speed-select mobile expend":document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).className=t.isMobile?"hd speed-select mobile":"speed-select",t.isMobile&&(a?(document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.bottom="env(safe-area-inset-bottom)",document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.bottom="constant(safe-area-inset-bottom)"):(document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.bottom="calc(constant(safe-area-inset-bottom) + 80px)",document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.bottom="calc(env(safe-area-inset-bottom) + 80px)")),c&&t.Ptz&&(t.Ptz.hide(),t.setDecoderState({pantile:!1}))}},tt(this.jSPlugin.env.domain,this.jSPlugin.accessToken,this.jSPlugin.deviceSerial,this.jSPlugin.channelNo).then((function(e){var i=e;t.setDecoderState({hdList:i});var n=t.jSPlugin.url.indexOf("hd.live")>-1?i[0]:i[1];t.setDecoderState({hd:n});var a=document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")),s=document.getElementById("".concat(t.jSPlugin.id,"-hdSelect-icon-warp"));a&&(a.innerHTML="\n            ".concat(c(i).reverse().map((function(e){if(e.name&&void 0!=e.level)return'<li class="selectOption default '.concat(d,'" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;" name="option" data-type="').concat(e.level,'" id="').concat(l,"_").concat(e.level,'">').concat(e.name,"</li>")})).join(""),'\n            <li class="selectOption cancel" style="').concat(t.isMobile?"":"display:none;",'" name="option" id="').concat(t.jSPlugin.id,'-select-speed">取消</li>\n          ')),s&&("object"===o(t.decoderState.state.hd)&&"function"===typeof t.decoderState.state.hd.icon?s.innerHTML="\n              ".concat(i.map((function(e){if(e.name&&"function"===typeof e.icon)return e.icon(t.jSPlugin.id,l,r.color,t.jSPlugin.width,nt,t.decoderState.state.hd)})).join(""),'\n              <span class=\'speed-select-mask\' style="display:none" id="').concat(t.jSPlugin.id,'-select-hd-mask"></span>\n            '):"object"===o(t.decoderState.state.hd)&&"string"===typeof t.decoderState.state.hd.name&&$(s).prepend('<div class="theme-icon-item-icon '.concat(l,'-btn" data-type="').concat(t.decoderState.state.hd.level,'" style="width: ').concat(t.jSPlugin.width>nt?48:32,'px">').concat(t.decoderState.state.hd.name,"</div>")))})),r;case"speed":r.title="回放倍速",r.id=e,r.domString='<ul id="'.concat(this.jSPlugin.id,'-speedSelect" class="speed speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;bottom: calc(constant(safe-area-inset-bottom) + ').concat(this.isMobile?"80px":"50px",") !important;bottom: calc(env(safe-area-inset-bottom) + ").concat(this.isMobile?"80px":"50px",') !important;">')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed4">4倍</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed2">2倍</li>')+'<li class="selectOption active" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed1">1倍（正常播放）</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed05">0.5倍</li>')+'<li class="selectOption cancel" style="'.concat(this.isMobile?"":"display:none;",'" name="option" id="').concat(this.jSPlugin.id,'-select-speed">取消</li>')+"</ul>"+'<span>\n          <div style="font-size: 12px;\n          vertical-align: bottom;\n          display: inline-flex;\n          padding: 0px 7px;\n          width: 48px;\n          line-height: 24px;\n          justify-content: center;\n          border: 1px solid '.concat(r.color,';\n          text-align: center;border-radius: 12.5px;"\n          id="').concat(this.jSPlugin.id,'-speed-text"\n          >').concat(1===this.nextRate?"倍速":"".concat(this.nextRate,"倍").replace("3","0.5"),"</div>\n                ")+'<span class=\'speed-select-mask\' style="display:none" id="'.concat(this.jSPlugin.id,'-select-mask"></span>')+"</span>",r.onclick=function(e){var i=t.decoderState.state,n=i.speed,a=i.expend,o=i.play;if(e.stopPropagation(),!o)return!1;if(!n&&t.isMobile&&(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).className=a?"speed speed-select mobile expend":"speed speed-select mobile"),t.isMobile&&(a?(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.bottom="constant(safe-area-inset-bottom)",document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.bottom="env(safe-area-inset-bottom)"):(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.bottom="calc(constant(safe-area-inset-bottom) + 80px)",document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.bottom="calc(env(safe-area-inset-bottom) + 80px)")),t.nextRate=1,e.target.id)switch(e.target.id){case"".concat(t.jSPlugin.id,"-select-speed1"):console.log("倍速1"),t.nextRate=1,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(1),t.jSPlugin.speed=1,t.setDecoderState({speed:!n});break;case"".concat(t.jSPlugin.id,"-select-speed2"):console.log("倍速2"),t.nextRate=2,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(2),t.jSPlugin.speed=2,t.setDecoderState({speed:!n});break;case"".concat(t.jSPlugin.id,"-select-speed4"):console.log("倍速4"),t.nextRate=4,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(4),t.jSPlugin.speed=4,t.setDecoderState({speed:!n});break;case"".concat(t.jSPlugin.id,"-select-speed05"):console.log("倍速05"),t.nextRate=3,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(.5),t.jSPlugin.speed=.5,t.setDecoderState({speed:!n});break;default:t.isMobile?t.setDecoderState({speed:!n}):t.setDecoderState({speed:!0});break}t.isMobile&&e.target.id==="".concat(t.jSPlugin.id,"-speed-text")?document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display="block":document.getElementById("".concat(t.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display="none"===document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display?"block":"none"),t.setDecoderState({speed:!n}),t.themeData.autoFocus>0&&("none"===document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display?t.startAutoFocus():t.stopAutoFocus())};break;case"deviceName":r.title="设备名称",r.id=e,r.domString="<span>设备名称</span>",r.onclick=function(){};break;case"deviceID":r.title="设备序列号",r.id=e,r.domString="<span>设备序列号</span>",r.onclick=function(){};break;case"cloudRec":r.title="云存储回放",r.id=e,r.domString='\n        <span>\n          <svg class="theme-icon-item-icon" fill="'.concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="-10 0 40 15">\n\t<path d="M9.5,13.1c-0.3,0-0.5-0.2-0.5-0.5V8.8c0-0.3,0.2-0.5,0.5-0.5S10,8.5,10,8.8v3.8C10,12.8,9.8,13.1,9.5,13.1z"/>\n\t<path d="M7.6,10.6c-0.1,0-0.3-0.1-0.4-0.2C7,10.2,7,9.9,7.3,9.7l1.9-1.7c0.2-0.2,0.5-0.2,0.7,0l1.8,1.7\n\t\tc0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.5,0.2-0.7,0L9.5,9.1l-1.6,1.4C7.8,10.6,7.7,10.6,7.6,10.6z"/>\n\t<path d="M13.2,15.7H5.6c-2.1-0.1-3.8-1.8-3.8-3.9c0-1.8,1.3-3.4,3-3.8c0.4-2.2,2.3-3.9,4.6-3.9c2.3,0,4.2,1.7,4.6,3.8\n\t\tc1.8,0.4,3.1,1.9,3.1,3.8C17.1,13.9,15.4,15.7,13.2,15.7z M5.6,14.7h7.6c1.6,0,2.9-1.3,2.9-2.9c0-1.5-1.1-2.7-2.6-2.9l-0.4,0l0-0.4\n\t\tc-0.2-1.9-1.7-3.3-3.6-3.3C7.5,5.1,6,6.6,5.8,8.5l0,0.4l-0.4,0c-1.4,0.2-2.5,1.4-2.5,2.9C2.8,13.3,4.1,14.6,5.6,14.7z"/>\n          </svg>\n        </span>\n        '),r.onclick=function(){console.log("点击云回放"),t.setDecoderState({type:"cloud.rec",cloudRec:!0,rec:!1}),t.jSPlugin.changePlayUrl({type:"cloud.rec"},(function(){var e=w("begin",t.jSPlugin.url)||(new Date).Format("yyyyMMdd");t.Rec.renderRec("".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8)));var i=t.decoderState.state.zoom;i&&(t.setDecoderState({zoom:!1}),t.jSPlugin.Zoom.stopZoom(),t.jSPlugin.close3DZoom())}),!1)};break;case"rec":r.title="本地存储",r.id=e,r.domString='\n        <span>\n        <svg class="theme-icon-item-icon" fill='.concat(r.color,' version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>nt?48:32,'" height="').concat(this.jSPlugin.width>nt?48:32,'" viewBox="0 0 40 15">\n          <path d="M13,16.3H5.5c-1.1,0-2-0.9-2-2V3.8c0-1.1,0.9-2,2-2h5.4c0.5,0,1,0.2,1.4,0.6l2.1,2.1C14.8,4.8,15,5.3,15,5.9\n  v8.4C15,15.4,14.1,16.3,13,16.3z M5.5,2.8c-0.6,0-1,0.4-1,1v10.5c0,0.6,0.4,1,1,1H13c0.6,0,1-0.4,1-1V5.9c0-0.3-0.1-0.5-0.3-0.7\n  L11.6,3c-0.2-0.2-0.4-0.3-0.7-0.3H5.5z"/>\n<path d="M6.3,7.3C6,7.3,5.8,7,5.8,6.8V4.5C5.8,4.2,6,4,6.3,4s0.5,0.2,0.5,0.5v2.2C6.8,7,6.6,7.3,6.3,7.3z"/>\n<path d="M8.5,7.3C8.3,7.3,8,7,8,6.8V4.5C8,4.2,8.3,4,8.5,4S9,4.2,9,4.5v2.2C9,7,8.8,7.3,8.5,7.3z"/>\n<path d="M10.8,7.3c-0.3,0-0.5-0.2-0.5-0.5V4.5c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v2.2C11.3,7,11.1,7.3,10.8,7.3z"\n  />\n        </svg>\n      </span>\n        '),r.onclick=function(){console.log("点击本地回放"),t.setDecoderState({type:"rec",cloudRec:!1,rec:!0}),t.jSPlugin.changePlayUrl({type:"rec"},(function(){console.log("---------本地回放");var e=w("begin",t.jSPlugin.url)||(new Date).Format("yyyyMMdd");t.Rec.renderRec("".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8)));var i=t.decoderState.state.zoom;i&&(t.setDecoderState({zoom:!1}),t.jSPlugin.Zoom.stopZoom(),t.jSPlugin.close3DZoom())}),!1)};break}return r}},{key:"changeRecSpeed",value:function(e){var t=this,i=function(e){if(console.log("setLiActive",e),!document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")))return!1;document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[0].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[0].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[1].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[1].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[2].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[2].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[3].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[3].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[e].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[e].className.replace("default","active")},n="1";switch(e){case 1:i(2),n="倍速";break;case 2:i(1),n="".concat(e,"倍");break;case 4:i(0),n="".concat(e,"倍");break;case.5:i(3),n="".concat(e,"倍");break;default:i(2),n="".concat(e,"倍");break}document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))&&(document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).innerHTML=n)}},{key:"initThemeData",value:function(){var e=this,t=this.themeData,i=t.header,n=t.footer,a=this.jSPlugin.id;if(this.header=te.header,this.footer=te.footer,this.isNeedRenderHeader=G.findIndex(i.btnList,(function(e){return e.isrender>0}))>=0&&"miniRec"!=this.jSPlugin.id,this.isMobile&&(this.isNeedRenderHeader=G.findIndex(i.btnList,(function(e){return e.isrender>0&&"deviceID"===e.iconId||e.isrender>0&&"deviceName"===e.iconId}))>=0&&"miniRec"!=this.jSPlugin.id),this.isNeedRenderFooter=G.findIndex(n.btnList,(function(e){return e.isrender>0}))>=0&&"miniRec"!=this.jSPlugin.id,console.log("miniRec："+this.jSPlugin.themeId),this.isNeedRenderTimeLine=G.findIndex(i.btnList,(function(e){return"cloudRec"===e.iconId&&1===e.isrender||"rec"===e.iconId&&1===e.isrender}))>=0&&!this.jSPlugin.disabledTimeLine&&"miniRec"!=this.jSPlugin.id,["date-switch-container-wrap","rec-type-container-wrap","mobile-rec-wrap","mobile-ez-ptz-container"].forEach((function(e,t){document.getElementById(e)&&document.getElementById(e).parentElement.removeChild(document.getElementById(e))})),this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width: calc(100% - 100px);'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>");else{var o=document.createElement("div");o.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),o.setAttribute("class","header-controls"),o.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex;width:calc(100% - 100px);overflow:hidden;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' class=\"header-controls-right\" style='display:flex;'></div>");var r={height:this.jSPlugin.width>nt?"48px":"32px","line-height":this.jSPlugin.width>nt?"48px":"32px",display:"flex","justify-content":"space-between",top:0,"z-index":1,background:"#000000",color:"#FFFFFF",width:"100%"};o.style=it(r),document.getElementById("".concat(a,"-wrap")).insertBefore(o,document.getElementById(a));var s=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(s)}),50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));if(this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(this.jSPlugin.width>nt?48:32,"px"),document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='<div id="'.concat(this.jSPlugin.id,'-audioControls"  class="footer-controls" style=\'display:flex;justify-content: space-between;height: ').concat(this.jSPlugin.width>nt?48:32,"px;width:100%;'><div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div></div>"));else{var l=document.createElement("div");l.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),l.setAttribute("class","ez-iframe-footer-container");var d={"min-height":this.jSPlugin.width>nt?"48px":"32px","max-height":this.jSPlugin.width>nt?"96px":"80px",position:"relative","margin-top":this.jSPlugin.width>nt?"-48px":"-32px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%"};l.style=it(d),l.innerHTML='<div id="'.concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;height:').concat(this.jSPlugin.width>nt?48:32,"px;justify-content: space-between;width:100%;z-index:999;position: relative;'><div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div></div>"),T(l,document.getElementById(a))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=i.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=i.color;var c,u=m(i.btnList);try{for(u.s();!(c=u.n()).done;){var h=c.value;if(h.isrender)try{this.renderHeader(h.iconId,h.part)}catch(y){}}}catch(b){u.e(b)}finally{u.f()}}if(this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=n.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=n.color;var x,f=m(n.btnList);try{for(f.s();!(x=f.n()).done;){var p=x.value;if(p.isrender)try{this.renderFooter(p.iconId,p.part)}catch(y){}}}catch(b){f.e(b)}finally{f.f()}}if(console.log("this.isNeedRenderTimeLine:"+this.isNeedRenderTimeLine),this.isNeedRenderTimeLine)if(this.isMobile)document.getElementById("".concat(this.jSPlugin.id,"-headControl-right"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl-right")).style.display="none"),this.Rec=new se(this.jSPlugin,this.changeRecSpeed,this.resetMobileZoomStatus);else{this.Rec?(this.Rec.unSyncTimeLine(),this.Rec.recInit()):(this.jSPlugin.decoderState=this.decoderState,this.jSPlugin.setDecoderState=this.setDecoderState,this.Rec=new ne(this.jSPlugin));var _=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(_)}),50)}var g=G.findIndex(this.themeData.footer.btnList,(function(e){return"pantile"===e.iconId&&1===e.isrender}))>=0&&!this.jSPlugin.disabledPTZ;if(g&&(this.isMobile&&(this.MobilePtz=new Te(this.jSPlugin)),this.Ptz=new fe(this.jSPlugin)),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach((function(t){var i=e;window.addEventListener(t,(function(e){var t=i.decoderState.state,n=t.expend;t.webExpend;var a=t.zoom,o=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;i.jSPlugin.Theme.Rec&&setTimeout((function(){i.jSPlugin.Theme.Rec.recAutoSize((function(){if(i.jSPlugin.Zoom.currentScale>1){var e=i.jSPlugin.Zoom.currentScale;i.jSPlugin.Zoom.stopZoom(),setTimeout((function(){i.jSPlugin.Zoom.startZoom(),i.jSPlugin.Zoom.currentScale=e,i.jSPlugin.Zoom.doScale(e)}),200)}}))}),100),o||(n&&a&&i.jSPlugin.use3DZoom&&i.jSPlugin.enable3DZoom(),i.setDecoderState({webExpend:!1,expend:!1})),document.getElementById("".concat(i.jSPlugin.id,"-hdSelect"))&&(document.getElementById("".concat(i.jSPlugin.id,"-hdSelect")).style.display="none"),document.getElementById("".concat(i.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(i.jSPlugin.id,"-speedSelect")).style.display="none"),i.isMobile&&(document.getElementById("".concat(i.jSPlugin.id,"-select-hd-mask"))&&(document.getElementById("".concat(i.jSPlugin.id,"-select-hd-mask")).style.display="none"),document.getElementById("".concat(i.jSPlugin.id,"-select-mask"))&&(document.getElementById("".concat(i.jSPlugin.id,"-select-mask")).style.display="none")),i.themeData.autoFocus>0&&i.startAutoFocus()}))})),this.themeData.poster){this.jSPlugin.poster=this.themeData.poster;var v=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(v),e.jSPlugin.setPoster(e.themeData.poster))}),50)}this.inited=!0,this.getDeviceInfo(),this.renderThemeData()}},{key:"resetMobileZoomStatus",value:function(){if(this.isMobile){var e=document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"));e&&e.style&&"none"!=e.style.display&&(console.log("结束电子放大"),e.style.display="none"),this.jSPlugin.jSPlugin.Zoom&&this.jSPlugin.jSPlugin.Zoom.resetZoom()}}},{key:"getDeviceInfo",value:function(e){var t=this,i=function(i){200==i.code&&i.data&&(e&&e(i),document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content"))&&(document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.maxWidth="100%",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.overflow="hidden",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.textOverflow="ellipsis",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.whiteSpace="nowrap",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).innerHTML=i.data.deviceName),document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content"))&&(document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.maxWidth="100%",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.overflow="hidden",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.textOverflow="ellipsis",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.whiteSpace="nowrap",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).innerHTML=M(t.jSPlugin.url).deviceSerial))};L(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:M(this.jSPlugin.url).deviceSerial},"",i)}},{key:"editStart",value:function(e){var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));i&&i.setAttribute("class","header-controls themeEditing"),t&&t.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(e){var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));i&&i.setAttribute("class","header-controls"),t&&t.setAttribute("class","footer-controls"),this.setDecoderState({isEditing:!1})}},{key:"webExpend",value:function(){var e=this,t=this.decoderState.state;t.webExpend;var i=t.expend,n=t.play;if(!n)return!1;if(i)return console.log("正在全局全屏"),!1;console.log("执行网页全屏");var a=0,o=0,r=k(document.getElementById("".concat(this.jSPlugin.id,"-wrap")));r.then((function(t){console.log("全屏promise",window.screen.width),document.getElementById("".concat(e.jSPlugin.id,"-canvas-container"))&&(a=parseInt(window.getComputedStyle(document.getElementById("".concat(e.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(e.jSPlugin.id,"-headControl"))&&(o=parseInt(window.getComputedStyle(document.getElementById("".concat(e.jSPlugin.id,"-headControl"))).height,10)),console.log("this.jSPlugin.JS_Resiz",a,o,document.body.clientWidth),e.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height-a-o)}))["catch"]((function(e){console.log(e)}))}},{key:"expend",value:function(){var e=this,t=this.decoderState.state,i=t.webExpend;t.expend;var n=t.play;if(t.pantile,!n)return!1;if(i)return console.log("正在网站全屏"),!1;if(console.log("执行全局全屏"),this.isMobile){var a=parseInt(getComputedStyle(document.getElementById("".concat(this.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).height,10);E(document.getElementById("".concat(this.jSPlugin.id,"-wrap")));var o=document.documentElement.clientWidth,r=document.documentElement.clientHeight;document.getElementById("".concat(this.jSPlugin.id)).style["backface-visibility"]="hidden",this.jSPlugin.jSPlugin.JS_Resize(r,o-a)}else{var s=k(document.getElementById("".concat(this.jSPlugin.id)));s.then((function(t){e.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height)}))["catch"]((function(e){console.log(e)}))}}},{key:"disabledFECBtn",value:function(){var e=["".concat(this.jSPlugin.id,"-capturePicture"),"".concat(this.jSPlugin.id,"-capturePicture-content"),"".concat(this.jSPlugin.id,"-capturePicture-icon"),"".concat(this.jSPlugin.id,"-recordvideo"),"".concat(this.jSPlugin.id,"-recordvideo-content"),"".concat(this.jSPlugin.id,"-recordvideo-icon"),"".concat(this.jSPlugin.id,"-zoom"),"".concat(this.jSPlugin.id,"-zoom-content"),"".concat(this.jSPlugin.id,"-zoom-icon")],t=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));if(this.jSPlugin.use3DZoom?this.jSPlugin.close3DZoom():this.jSPlugin.Zoom.stopZoom(),this.setDecoderState({zoom:!1}),t){var i,n=m(e);try{for(n.s();!(i=n.n()).done;){var a=i.value,o=t.querySelector("#".concat(a));o&&(o.style.display="none")}}catch(r){n.e(r)}finally{n.f()}}}},{key:"resumeFECBtn",value:function(){var e=["".concat(this.jSPlugin.id,"-capturePicture"),"".concat(this.jSPlugin.id,"-capturePicture-content"),"".concat(this.jSPlugin.id,"-capturePicture-icon"),"".concat(this.jSPlugin.id,"-recordvideo"),"".concat(this.jSPlugin.id,"-recordvideo-content"),"".concat(this.jSPlugin.id,"-recordvideo-icon"),"".concat(this.jSPlugin.id,"-zoom"),"".concat(this.jSPlugin.id,"-zoom-content"),"".concat(this.jSPlugin.id,"-zoom-icon")],t=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));if(t){var i,n=m(e);try{for(n.s();!(i=n.n()).done;){var a=i.value,o=t.querySelector("#".concat(a));o&&(o.style.display="")}}catch(r){n.e(r)}finally{n.f()}}}}]),e}(),ot=function(){function e(t,i){r(this,e),this.jSPlugin=t,this.isMobile=i,this.timer=null,this.initToastCustom()}return l(e,[{key:"initToastCustom",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom"))?document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom")).style.display="none":this.randerToast()}},{key:"randerToast",value:function(){var e=this.jSPlugin.width,t=1;t=this.isMobile?e/375||1:e/1024||1;var i=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),n=document.createElement("div");n.style="display:none;position:absolute;top:0;width: 100%;align-items: center;justify-content: center;",n.id="".concat(this.jSPlugin.id,"-wrap-Toast-custom"),this.isMobile?n.innerHTML='<div id="'.concat(this.jSPlugin.id,'-wrap-Toast-custom-content" \n            style="padding: ').concat(12*t,"px ").concat(20*t,"px;font-size: ").concat(16*t,"px;line-height:").concat(16*t,"px;border-radius: ").concat(8*t,"px;margin-top: ").concat(667*t*.53,'px;\n            background-color: rgba(0,0,0,0.8);color:rgba(255,255,255,0.90);box-sizing: border-box;z-index: 999;">\n            </div>\n            '):n.innerHTML='<div id="'.concat(this.jSPlugin.id,'-wrap-Toast-custom-content" \n            style="padding: ').concat(20*t,"px ").concat(32*t,"px;font-size: ").concat(24*t,"px;line-height:").concat(24*t,"px;border-radius: ").concat(12*t,"px;margin-top: ").concat(36*t,'px;\n            background-color: rgba(0,0,0,0.7);color:rgba(255,255,255,0.90);box-sizing: border-box;z-index: 999;">\n            </div>\n            '),i.insertBefore(n,document.getElementById(this.jSPlugin.id))}},{key:"initToastContent",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;console.log("content----------------",e),this.timer=null,document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom"))?(document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom-content")).innerText=e||"",this.timer=setTimeout((function(){document.getElementById("".concat(t.jSPlugin.id,"-wrap"))&&document.getElementById("".concat(t.jSPlugin.id,"-wrap-Toast-custom"))&&document.getElementById("".concat(t.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(t.jSPlugin.id,"-wrap-Toast-custom")))}),i)):(this.randerToast(),this.initToastContent(e))}}]),e}(),rt=function(e,t,i){var n=function(e){console.log(e),t(e)},a=function(e){console.log(e),i(e)},o=new FormData;o.append("deviceSerial",M(e.url).deviceSerial),o.append("cmd","open"),e.accessToken;var r="".concat(e.env.domain,"/api/v3/device/acs/remote/door?accessToken=").concat(e.accessToken);fetch(r,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(e){console.log("get theme data",e),n(e)}))["catch"]((function(e){a(e)}))},st=function(e,t,i){var n=function(e){console.log(e),t(e)},a=function(e){console.log(e),i(e)},o={accessToken:e.accessToken,pageStart:0,pageSize:4,default:!0,voiceName:"轻应用语音文件"},r={"Content-Type":"application/x-www-form-urlencoded"},s="".concat(e.env.domain,"/api/lapp/voice/query");Xe(s,"POST",o,n,a,r)},lt=function(e,t,i,n){var a=function(e){console.log(e),i(e)},o=function(e){console.log(e),n(e)},r="".concat(e.env.domain,"/api/lapp/voice/send"),s=new FormData;s.append("deviceSerial",M(e.url).deviceSerial),s.append("accessToken",e.accessToken),s.append("channelNo",M(e.url).channelNo||1),s.append("fileUrl",t),fetch(r,{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){a(e)}))["catch"]((function(e){o(e)}))},dt=function(){function e(t,i){r(this,e),this.jSPlugin=t,this.videoWidth=t.width,this.switchFooter=i,this.sendLoadingStats=!1,this.toastCustom=new ot(t,!1),this.quickReplyList=["你好，请将快递放在门口","你好，稍等","你好，请将快递放入小区快递柜","你好，请将外卖放在门口"],this.initQuickReply()}return l(e,[{key:"initQuickReply",value:function(){document.getElementById("pc-quickReply-back")||this.renderQuickReply(),document.getElementById("pc-quickReply-back-item-0")||this.getQuickReplyList()}},{key:"renderQuickReply",value:function(){var e=this,t=this.videoWidth/1024||1,i=document.createElement("div");i.style="width:100%;",i.innerHTML='<div style="width:100%;display:flex;flex-direction:row;align-items: center;">\n        <div id="pc-quickReply-back" style="display: flex;align-items: center;margin: 0 '.concat(8*t,"px 0 ").concat(16*t,'px;cursor: pointer;">\n            <div style="height: ').concat(32*t,'px;">\n                <svg width="').concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>返回</title>\n                    <defs>\n                        <filter id="filter-1">\n                            <feColorMatrix in="SourceGraphic" type="matrix" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix>\n                        </filter>\n                    </defs>\n                    <g id="控件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <g id="快速回复loading" transform="translate(-16.000000, -497.000000)">\n                            <g id="返回" transform="translate(0.000000, 425.000000)" filter="url(#filter-1)">\n                                <g transform="translate(16.000000, 72.000000)">\n                                    <rect id="Rectangle" x="0" y="0" width="32" height="32"></rect>\n                                    <path d="M12.5,7.5 C13.2988404,7.5 13.9518304,8.12445998 13.9974537,8.91186361 L14,9 L14,21.5 L26.5,21.5 C27.2988404,21.5 27.9518304,22.12446 27.9974537,22.9118636 L28,23 C28,23.7988404 27.37554,24.4518304 26.5881364,24.4974537 L26.5,24.5 L12.5,24.5 C11.7011596,24.5 11.0481696,23.87554 11.0025463,23.0881364 L11,23 L11,9 C11,8.17157288 11.6715729,7.5 12.5,7.5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" transform="translate(19.500000, 16.000000) rotate(45.000000) translate(-19.500000, -16.000000) "></path>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <span style="font-size: ').concat(24*t,'px;">返回</span>\n        </div>\n        <div id="pc-quickReply-content" style="display: block;width:calc(100% - ').concat(160*t,"px);margin: 0 ").concat(24*t,'px;"></div>\n        <div id="pc-quickReply-loading" style="display: none;width:calc(100% - ').concat(160*t,"px);margin: 0 ").concat(24*t,'px;"></div>\n        <div id="pc-quickReply-loaderror" style="display: none;width:calc(100% - ').concat(160*t,"px);margin: 0 ").concat(24*t,'px;"></div>\n    </div>'),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).appendChild(i),document.getElementById("pc-quickReply-back").onclick=function(){e.switchFooter("onBell")}}},{key:"matchQuickReplyBtn",value:function(){var e=this,t=this.videoWidth/1024||1,i=document.getElementById("pc-quickReply-content");this.quickReplyList&&this.quickReplyList.length>0&&this.quickReplyList.forEach((function(n,a){var o=document.createElement("div");o.id="pc-quickReply-back-item-".concat(a),o.style="margin: ".concat(8*t,"px 0 ").concat(8*t,"px ").concat(8*t,"px;cursor: pointer;\n            padding: 0 ").concat(20*t,"px;min-height: ").concat(64*t,"px;width:calc(50% - ").concat(16*t,"px);\n            display: inline-block;background: rgba(0,0,0,0.70);border-radius: 8px;text-align: center;\n            box-sizing: border-box;font-size:").concat(24*t,"px;color: rgba(255,255,255,0.90);"),o.innerHTML='<div id="pc-quickReply-back-item-box-'.concat(a,'">\n            <span id="pc-quickReply-name-').concat(a,'" style="line-height: ').concat(64*t,'px;">').concat(n.voiceName,"</span>\n            </div>"),o.onclick=function(){e.sendLoadingStats||(console.log("item:"+n),e.sendQuickReply(n,a))},i.appendChild(o)}))}},{key:"setBtnCheckLoading",value:function(e,t){var i=this.videoWidth/1024||1;if(t>-1){document.getElementById("pc-quickReply-back-item-".concat(t));var n=document.getElementById("pc-quickReply-back-item-box-".concat(t)),a=document.getElementById("pc-quickReply-name-".concat(t));if(1==e){var o=document.getElementById("pc-quickReply-icon-loading-".concat(t));o&&a&&n.removeChild(o)}else if(a){var r=document.createElement("span");r.id="pc-quickReply-icon-loading-".concat(t),r.style="vertical-align: middle;margin-right:".concat(16*i,"px;"),r.innerHTML='<svg width="'.concat(30*i,'" height="').concat(30*i,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>'),n.insertBefore(r,a)}}}},{key:"getQuickReplyList",value:function(){var e=this;console.log("getQuickReplyList"),this.madeLoadingDom(0);var t=function(t){if(t&&200==t.code){var i=t.data||[],n=[];t.data.forEach((function(e,t){n=e.voiceName.split("_"),i[t].voiceName=n[1]})),e.quickReplyList=i,setTimeout((function(){e.madeLoadingDom(2)}),500)}else e.madeLoadingDom(1)},i=function(t){console.log(t),e.madeLoadingDom(1)};st(this.jSPlugin,t,i)}},{key:"madeLoadingDom",value:function(e){var t=this,i=this.videoWidth/1024||1;if(0==e){if(document.getElementById("pc-quickReply-content").style.display="none",document.getElementById("pc-quickReply-loaderror").style.display="none",document.getElementById("pc-quickReply-loading").style.display="block",!document.getElementById("pc-quickReply-loading-box")){var n=document.createElement("div");n.id="pc-quickReply-loading-box",n.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;",n.innerHTML='<div class="" style="heigth:'.concat(40*i,'px">\n                <svg width="').concat(40*i,'" height="').concat(40*i,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>\n            </div>\n            <div style="font-size: ').concat(28*i,"px;margin-top:").concat(10*i,"px;line-height:").concat(36*i,'px;">加载中…</div>'),document.getElementById("pc-quickReply-loading").appendChild(n)}}else if(1==e){if(document.getElementById("pc-quickReply-content").style.display="none",document.getElementById("pc-quickReply-loading").style.display="none",document.getElementById("pc-quickReply-loaderror").style.display="block",!document.getElementById("pc-quickReply-loaderror-box")){var a=document.createElement("div");a.id="pc-quickReply-loaderror-box",a.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;",a.innerHTML='<div style="font-size: '.concat(28*i,'px;color: rgba(255,255,255,0.90);">快速回复加载失败</div>\n            <div id="pc-quickReply-loaderror-reload" style="font-size: ').concat(24*i,"px;margin-top:").concat(16*i,'px;color: rgba(100,143,252,0.90);cursor: pointer;">重新加载</div>'),document.getElementById("pc-quickReply-loaderror").appendChild(a),document.getElementById("pc-quickReply-loaderror-reload").onclick=function(){t.getQuickReplyList()}}}else document.getElementById("pc-quickReply-loading").style.display="none",document.getElementById("pc-quickReply-loaderror").style.display="none",document.getElementById("pc-quickReply-content").style.display="block",this.matchQuickReplyBtn()}},{key:"sendQuickReply",value:function(e,t){var i=this;this.sendLoadingStats=!0,this.setBtnCheckLoading(0,t);var n=function(e){i.sendLoadingStats=!1,i.setBtnCheckLoading(1,t),e&&200==e.code?i.toastCustom.initToastContent("快捷回复成功"):i.toastCustom.initToastContent("快捷回复失败，请重试"),i.switchFooter("onBell")},a=function(e){console.log(e),i.sendLoadingStats=!1,i.setBtnCheckLoading(1,t),i.toastCustom.initToastContent("快捷回复失败，请重试"),i.switchFooter("onBell")};lt(this.jSPlugin,e.fileUrl,n,a)}}]),e}(),ct=function(){function e(t,i){r(this,e),this.jSPlugin=t,this.videoWidth=t.width,this.switchFooter=i,this.toastCustom=new ot(t,!1),this.lockStatus=!1,this.initRemoteUnlock()}return l(e,[{key:"initRemoteUnlock",value:function(){document.getElementById("pc-remoteUnlock-back")?this.madeSlideEvent():this.renderRemoteUnlock()}},{key:"renderRemoteUnlock",value:function(){var e=this,t=this.videoWidth/1024||1,i=document.createElement("div");i.style="width:100%;",i.id="pc-remoteUnlock-box",i.innerHTML='<div style="width:100%;display:flex;flex-direction:row;align-items: center;">\n        <div id="pc-remoteUnlock-back" style="display: flex;align-items: center;margin: 0 '.concat(8*t,"px 0 ").concat(16*t,'px;cursor: pointer;">\n            <div style="height: ').concat(32*t,'px;">\n                <svg width="').concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>返回</title>\n                    <defs>\n                        <filter id="filter-1">\n                            <feColorMatrix in="SourceGraphic" type="matrix" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix>\n                        </filter>\n                    </defs>\n                    <g id="控件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <g id="快速回复loading" transform="translate(-16.000000, -497.000000)">\n                            <g id="返回" transform="translate(0.000000, 425.000000)" filter="url(#filter-1)">\n                                <g transform="translate(16.000000, 72.000000)">\n                                    <rect id="Rectangle" x="0" y="0" width="32" height="32"></rect>\n                                    <path d="M12.5,7.5 C13.2988404,7.5 13.9518304,8.12445998 13.9974537,8.91186361 L14,9 L14,21.5 L26.5,21.5 C27.2988404,21.5 27.9518304,22.12446 27.9974537,22.9118636 L28,23 C28,23.7988404 27.37554,24.4518304 26.5881364,24.4974537 L26.5,24.5 L12.5,24.5 C11.7011596,24.5 11.0481696,23.87554 11.0025463,23.0881364 L11,23 L11,9 C11,8.17157288 11.6715729,7.5 12.5,7.5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" transform="translate(19.500000, 16.000000) rotate(45.000000) translate(-19.500000, -16.000000) "></path>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <span style="font-size: ').concat(24*t,'px;user-select: none;">返回</span>\n        </div>\n        <div id="pc-remoteUnlock-content" style="display: block;width:calc(100% - ').concat(160*t,"px);margin: 0 ").concat(24*t,'px;"></div>\n    </div>'),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).appendChild(i),document.getElementById("pc-remoteUnlock-back").onclick=function(){e.goback()},this.renderRemoteUnlockSlide()}},{key:"renderRemoteUnlockSlide",value:function(){var e=this.videoWidth/1024||1,t=document.getElementById("pc-remoteUnlock-content"),i=document.createElement("div");i.id="pc-remoteUnlock-content-slide",i.style="width: 100%;display: flex;justify-content: center;cursor: pointer;",i.innerHTML='<div id="pc-remoteUnlock-slide-box" style="width: '.concat(400*e,"px;line-height: ").concat(80*e,"px;height: ").concat(80*e,"px;border: 1px solid rgba(255,255,255,1);border-radius: ").concat(40*e,'px;position: relative;text-align: center;">\n        <div id="pc-remoteUnlock-slide-bgColor" style="border-radius: ').concat(40*e,"px;width: ").concat(64*e,"px;height: ").concat(80*e,'px;position: absolute;left: 0;top: 0;"></div>\n        <div id="pc-remoteUnlock-slide-tips" style="height: ').concat(80*e,"px;line-height: ").concat(80*e,"px;font-size: ").concat(24*e,"px;border-radius: ").concat(40*e,'px;position: absolute;text-align: center;user-select: none;color: rgba(255,255,255,0.90);width: 100%;">右滑开锁</div>\n        <div id="pc-remoteUnlock-slide-ball" style="top: ').concat(8*e,"px;left: ").concat(8*e,"px;width: ").concat(64*e,"px;height: ").concat(64*e,'px;background: #598FFF;position: absolute;text-align: center;border-radius:50%;display: flex;align-items: center;justify-content: center;">\n            <svg id="slide-ball-start" style="display: inline;" width="').concat(36*e,'px" height="').concat(36*e,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title></title>\n                <g id="icon/箭头向右" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    <rect id="矩形" fill="#000000" fill-rule="nonzero" opacity="0" x="0" y="0" width="24" height="24"></rect>\n                    <path d="M14.2841136,6.3689007 L19.9432338,12.0287579 L14.2863796,17.6856122 L12.8580239,16.2572565 L16.114,12.9999007 L4.00000001,13 L4.00000001,11 L16.058,10.9999007 L12.8557579,7.79725638 L14.2841136,6.3689007 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </svg>\n            <svg id="slide-ball-end"  style="display: none;" width="').concat(36*e,'" height="').concat(36*e,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#598FFF" p-id="2400"></path></svg>\n            \n        </div>\n    </div>'),t.appendChild(i),this.madeSlideEvent()}},{key:"getOffsetLeft",value:function(e){var t=0;do{t+=e.offsetLeft,e=e.parentNode}while(e.parentNode);return t}},{key:"madeSlideEvent",value:function(){var e=this.videoWidth/1024||1,t=document.getElementById("".concat(this.jSPlugin.id)),i=this.getOffsetLeft(t),n=document.getElementById("pc-remoteUnlock-slide-box"),a=document.getElementById("pc-remoteUnlock-slide-bgColor"),o=document.getElementById("pc-remoteUnlock-slide-tips"),r=document.getElementById("pc-remoteUnlock-slide-ball"),s=this;function l(){s.lockStatus||(s.lockStatus=!0,document.getElementById("slide-ball-start").style.display="none",document.getElementById("slide-ball-end").style.display="inline",a.style.width=n.clientWidth+"px",a.style.backgroundColor="#598FFF",n.style.border="0",r.style.backgroundColor="#ffffff",o.textContent="正在开锁",r.onmousedown=null,document.onmousemove=null,s.sendRemoteUnlockApi())}r.onmousedown=function(t){t=t||window.event;var o=t.offsetX;r.style.transition="",a.style.transition="",document.onmouseup=function(){console.log("--------------onmouseup"),s.lockStatus||(a.style.width="0px",r.style.left=8*e+"px",r.style.transition="left 0.6s linear",a.style.transition="width 0.6s linear"),document.onmouseup=null,document.onmousemove=null},document.onmousemove=function(t){t=t||window.event;console.log("videoDom",i);var a=t.pageX-n.offsetLeft-o-i,d=n.clientWidth-r.clientWidth-8*e;a<=0&&(a=0),a>=d&&(a=d),r.style.left=a+"px",a!=d||s.lockStatus||l()}}}},{key:"resetRemoteUnlockSlide",value:function(){var e=document.getElementById("pc-remoteUnlock-box"),t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock"));e&&t&&t.removeChild(e)}},{key:"sendRemoteUnlockApi",value:function(){var e=this;console.log("下发远程开锁");var t=function(t){t&&200==t.code?e.toastCustom.initToastContent("开锁成功"):e.toastCustom.initToastContent("开锁失败，请重试"),e.goback()},i=function(t){console.log(t),e.toastCustom.initToastContent("开锁失败，请重试"),e.goback()};rt(this.jSPlugin,t,i)}},{key:"goback",value:function(){this.switchFooter("onCall"),this.resetRemoteUnlockSlide()}}]),e}(),ut={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0},header:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000 linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)",activeColor:"#1890FF",autoFocus:0,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"ringStatus",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"callStatus",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]}},footer:{onBell:{color:"#ffffff",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"quickReply",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"rejection",part:"left",defaultActive:0,isrender:1,color:"#2C2C2C",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"answer",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-3",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000080",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"mute",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"hangUp",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]}}},ht={data:ut},xt=function(e){var t="";return Object.keys(e).map((function(i,n){t+="".concat(i,":").concat(e[i]).concat(n<Object.keys(e).length-1?";":"")})),t},ft=function(){function e(t,i,n,a){var o=this;r(this,e),d(this,"autoPlayRing",(function(){console.log("autoPlayRing");var e=document.getElementById("bellring-audio");e&&(e.muted=!1,e.src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3",e.paused&&e.play()),window.removeEventListener("click",o.autoPlayRing)})),d(this,"muteCommon",(function(e){var t=o.decoderState.state,i=t.talk,n=t.sound;i?(console.log("结束对讲"),o.setDecoderState({talk:!1,mute:!0},e.backgroundColor),o.jSPlugin.Talk.stopTalk(),n||o.jSPlugin.openSound(),o.setDecoderState({sound:!0})):(o.setDecoderState({talk:!1,mute:!0},e.backgroundColor),n||o.jSPlugin.openSound(),o.setDecoderState({sound:!0}))})),d(this,"switchCallStatus",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=o.themeData,n=i.header,a=i.footer,r=null;if("onCall"==e){console.log("接听"),o.bellStatus="onCall",o.switchFooter("onCall"),a[o.bellStatus].btnList.map((function(e,t){e.isrender&&o.renderFooter(e.iconId,e),"mute"==e.iconId&&(r=e)})),n[o.bellStatus].btnList.map((function(e,t){e.isrender&&o.renderHeader(e.iconId,e)}));var s=document.getElementById("".concat(o.jSPlugin.id,"-header-onBell"));s&&s.parentElement.removeChild(s),1==o.themeData.customConfig.bellPoster&&document.getElementById("bellring-icon")&&document.getElementById("".concat(o.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),0==o.themeData.customConfig.defaultMicro&&r?o.muteCommon(r):o.setDecoderState({mute:!1},r.backgroundColor),o.removeBellRing()}else console.log("响铃"),o.bellStatus="onBell",o.jSPlugin.Theme.changeTheme(o.themeData,t)})),this.jSPlugin=t,this.videoWidth=t.width,this.videoHeight=t.height,this.themeData=i,this.setDecoderState=n,this.decoderState=a,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.autoFocus=0,this.autoFocusTimer=null,this.bellStatus="onBell",this.recordTimer=null,this.nextRate=1,this.themeInited=!1,this.inited=!1,this.activeThemeStatus=!0,this.activeThemeStatusTxt="模板未激活",this.toastCustom=new ot(t,!1)}return l(e,[{key:"initBellRing",value:function(){var e=this,t=this.decoderState.state,i=t.play,n=t.isEditing;t.rejection;var a=this.videoWidth,o=a/1024;this.maxBellTime=1e3*this.themeData.customConfig.maxBellTime;var r=document.getElementById("bellring"),s=document.getElementById("bellring-audio");if(!r&&!s){if(this.jSPlugin.isNeedBellRing){var l=document.createElement("div");l.id="bellring",l.innerHTML='<div>\n          <audio id="bellring-audio" loop autoplay>\n            <source src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3" type="audio/mpeg">\n          </audio>\n          </div>',document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(l)}if(1!=this.themeData.customConfig.bellPoster||n)document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"));else{var d=(this.videoHeight-180*o)/2,c=document.createElement("div");c.id="bellring-icon",c.style="position: absolute;pointer-events: none;background: none;width: 100%;\n          position: absolute;top: ".concat(d,"px;display: flex;align-items: center;justify-content: center;"),c.innerHTML='<div style="width: '.concat(180*o,"px;height: ").concat(180*o,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.2);border-radius: 50%;">\n            <div style="width: ').concat(100*o,"px;height: ").concat(100*o,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.3);border-radius: 50%;">\n              <svg width="').concat(40*o,'px" height="').concat(40*o,'px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <title>icon/响铃</title>\n                  <g id="icon/响铃" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <polygon id="Path" points="0 0 40.0000002 0 40.0000002 40.0000002 0 40.0000002"></polygon>\n                      <path d="M20.0000001,4.25000002 C22.0363461,4.25000002 23.698175,5.84879552 23.8000507,7.8591997 L23.8050001,8.05500003 L23.805316,8.99953253 C27.1874196,9.97041766 29.6921839,13.0354462 29.80936,16.723731 L29.80936,16.723731 L29.8133335,16.9800001 L29.8133335,21.6416668 C29.8133335,22.3259481 30.0858837,22.9835569 30.5703302,23.4680033 L30.5703302,23.4680033 L31.6386635,24.5363367 C32.338953,25.2366262 32.760721,26.1675592 32.8273086,27.1785295 L32.8273086,27.1785295 L32.8350001,27.4233334 C32.8350001,29.577547 31.0892137,31.3233335 28.9350001,31.3233335 L28.9350001,31.3233335 L24.5666667,31.323 L24.5650266,31.3951531 C24.4527075,33.8194458 22.4520933,35.7500001 20.0000001,35.7500001 C17.5482065,35.7500001 15.5473098,33.8197367 15.4349743,31.3967059 L15.4326667,31.323 L11.0666667,31.3233335 C9.06159524,31.3233335 7.39851917,29.8069287 7.18810198,27.8229374 L7.17194359,27.6230185 L7.1666667,27.4233334 C7.1666667,26.3411154 7.59733134,25.3020086 8.36300328,24.5363367 L8.36300328,24.5363367 L9.43133662,23.4680033 C9.91578309,22.9835569 10.1883334,22.3259481 10.1883334,21.6416668 L10.1883334,21.6416668 L10.1883334,16.9800001 C10.1883334,13.1909619 12.7263704,9.99530436 16.1948593,8.99965364 L16.1950001,8.05500003 C16.1950001,5.95360729 17.8979654,4.25000002 20.0000001,4.25000002 Z M23.0656667,31.323 L16.9336667,31.323 L16.9352114,31.3619281 C17.0285826,32.9723844 18.3649772,34.2500001 20.0000001,34.2500001 C21.6352227,34.2500001 22.9714318,32.9721919 23.0647896,31.3604131 L23.0656667,31.323 Z M21.5116668,10.1783334 L18.4900001,10.1783334 C14.7336124,10.1783334 11.6883334,13.2231481 11.6883334,16.9800001 L11.6883334,16.9800001 L11.6883334,21.6416668 C11.6883334,22.7238848 11.2576687,23.7629916 10.4919968,24.5286635 L10.4919968,24.5286635 L9.42366346,25.5969969 C8.93921698,26.0814433 8.6666667,26.7390521 8.66637526,27.402427 L8.66637526,27.402427 L8.67048222,27.560237 C8.74130967,28.8268108 9.79171396,29.8233335 11.0666667,29.8233335 L11.0666667,29.8233335 L23.7906939,29.8222289 C23.8004164,29.8218553 23.8101862,29.8216668 23.8200001,29.8216668 L23.8486667,29.823 L28.9350001,29.8233335 C30.2055455,29.8233335 31.2450456,28.8367727 31.329826,27.609522 L31.3354106,27.4481422 L31.3293607,27.2529336 C31.2880301,26.6292837 31.0210852,26.0400787 30.5780034,25.5969969 L30.5780034,25.5969969 L29.50967,24.5286635 C28.7439981,23.7629916 28.3133335,22.7238848 28.3133335,21.6416668 L28.3133335,21.6416668 L28.3134279,16.9919039 L28.3098332,16.759466 C28.1934023,13.0970787 25.1864454,10.1783334 21.5116668,10.1783334 L21.5116668,10.1783334 Z M20.0000001,5.75000002 C18.7795808,5.75000002 17.7813801,6.69770708 17.7003155,7.89717688 L17.6950001,8.05500003 L17.6952875,8.7158769 C17.9568453,8.69103758 18.2219393,8.67833337 18.4900001,8.67833337 L18.4900001,8.67833337 L21.5116668,8.67833337 C21.7792577,8.67833337 22.0439466,8.69101238 22.3051575,8.71580951 L22.3050001,8.05500003 C22.3050001,6.7819079 21.273481,5.75000002 20.0000001,5.75000002 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                  </g>\n              </svg>\n            </div>\n          </div>'),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(c),i&&"onBell"==this.bellStatus&&this.jSPlugin.pause()}setTimeout((function(){var t=e.decoderState.state,i=t.isEditing,n=t.rejection;"onBell"!=e.bellStatus||n||(e.removeBellRing(),i||e.answerOvertime())}),this.maxBellTime)}}},{key:"removeBellRing",value:function(){document.getElementById("bellring")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring")),document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}},{key:"matchBtn",value:function(e,t){var i=this,n=this.themeData,a=n.header,o=n.footer,r=this.decoderState.state,s=r.mute,l=r.rejection,d={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},c=a[this.bellStatus].btnList.findIndex((function(t){return t.iconId===e}));-1===c?(d.color=o[this.bellStatus].color,d.backgroundColor=o[this.bellStatus].backgroundColor,d.activeColor=o[this.bellStatus].activeColor):(d.color=a[this.bellStatus].color,d.backgroundColor=a[this.bellStatus].backgroundColor,d.activeColor=a[this.bellStatus].activeColor);var u=this.videoWidth/6;this.videoWidth;var h=this.videoWidth/1024||1;switch(e){case"ringStatus":return d.title=this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,d.id=e,d.domString='<span id="header-onBell-ringStatus" style="color:'.concat(t.color||"#FFFFFF",";font-size: ").concat(32*h,'px;display: block;text-align: left;font-weight: 500;" >').concat(this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,"</span>"),d.onclick=function(){},d;case"deviceCategory":return d.title="设备名称",d.id=e,d.domString='<span id="header-onBell-deviceCategory" \n          style="\n          color:'.concat(t.color||"#FFFFFF",";\n          font-size: ").concat(24*h,"px;\n          padding-top: ").concat(16*h,'px;\n          display: block;\n          max-width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          text-align: left;\n          ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),d.onclick=function(){},d;case"callStatus":return d.title="通话中",d.id=e,d.domString='<span id="header-onCall-ringStatus" style="color:'.concat(t.color||"#FFFFFF",";font-size: ").concat(32*h,'px;display: block;text-align: left;" >通话中</span>'),d.onclick=function(){},d;case"deviceCategory":return d.title="设备名称",d.id=e,d.domString='<span id="header-onCall-deviceCategory"\n           style="color:'.concat(t.color||"#FFFFFF",";\n           font-size: ").concat(24*h,"px;\n           padding-top: ").concat(16*h,'px;\n           display: block;\n           max-width: 100%;\n           overflow: hidden;\n           text-overflow: ellipsis;\n           white-space: nowrap;\n           text-align: left;\n           ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),d.onclick=function(){},d;case"rejection":return d.title="拒绝",d.id=e,d.domString='<div style="width: '.concat(.7*u,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(.5*u,"px;height: ").concat(.5*u,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.3*u,'px" height="').concat(.3*u,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>拒绝</title>\n                        <g id="icon/拒绝" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*u,'px;user-select: none;">拒绝</div>\n            </div>'),d.onclick=function(){var e=i.decoderState.state,t=e.play,n=e.isEditing,a=e.rejection;if(n||a)return!1;console.log("拒绝"),t&&i.jSPlugin.stop(),i.removeBellRing(),i.setDecoderState({play:!1,rejection:!0}),i.rejectionStatusDispose(),"function"===typeof i.jSPlugin.hangUpCallback&&i.jSPlugin.hangUpCallback("rejection")},d;case"quickReply":return d.title="快捷回复",d.id=e,d.domString='<div style="width: '.concat(.7*u,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(.5*u,"px;height: ").concat(.5*u,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.3*u,'px" height="').concat(.3*u,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>快捷回复</title>\n                        <g id="icon/web快捷回复" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M17.4723401,6.00464509 C24.1317208,5.8200623 29.613145,11.1601938 29.613145,17.806299 C29.613145,19.5506656 29.2343807,21.2437888 28.5133012,22.7904909 L28.638,22.51 L29.9802796,28.9334997 C30.0980856,29.4978889 29.6719785,30.0050773 29.131395,30.0271186 L29.0218792,30.0249315 L28.9025577,30.0074816 L22.488349,28.6446207 L22.3501503,28.7067675 C21.0679643,29.242563 19.6940914,29.5480927 18.2793303,29.6038407 L18.2793303,29.6038407 L17.8062986,29.6131454 C11.1610025,29.6131454 5.820073,24.1313212 6.00464384,17.4723718 C6.17540866,11.3038211 11.3038207,6.17540904 17.4723401,6.00464509 Z M17.8062986,16.2974446 C16.9707372,16.2974446 16.2926003,16.9755814 16.2926003,17.8111428 C16.2926003,18.6467043 16.9707372,19.3248411 17.8062986,19.3248411 C18.64186,19.3248411 19.3199969,18.6467043 19.3199969,17.8111428 C19.3199969,16.9755814 18.64186,16.2974446 17.8062986,16.2974446 Z M12.9624642,16.2974446 C12.1269027,16.2974446 11.4487659,16.9755814 11.4487659,17.8111428 C11.4487659,18.6467043 12.1269027,19.3248411 12.9624642,19.3248411 C13.7980256,19.3248411 14.4761624,18.6467043 14.4761624,17.8111428 C14.4761624,16.9755814 13.7980256,16.2974446 12.9624642,16.2974446 Z M22.650133,16.2974446 C21.8145716,16.2974446 21.1364348,16.9755814 21.1364348,17.8111428 C21.1364348,18.6467043 21.8145716,19.3248411 22.650133,19.3248411 C23.4856945,19.3248411 24.1638313,18.6467043 24.1638313,17.8111428 C24.1638313,16.9755814 23.4856945,16.2974446 22.650133,16.2974446 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*u,'px;user-select: none;">快捷回复</div>\n            </div>'),d.onclick=function(){var e=i.decoderState.state.rejection;if(e)return!1;console.log("快捷回复"),i.switchFooter("quickReply"),i.quickReplyEle=new dt(i.jSPlugin,i.switchFooter)},d;case"answer":return d.title="接听",d.id=e,d.domString='<div style="width: '.concat(.7*u,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(.5*u,"px;height: ").concat(.5*u,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.3*u,'px" height="').concat(.3*u,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>接听</title>\n                        <g id="icon/接听" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M15.7728281,19.6822968 C13.2528132,17.165123 10.8435994,14.2473605 11.9999084,13.0938925 C13.6505608,11.4432401 15.0881341,10.4261428 12.1646895,6.78675259 C9.23840386,3.14452132 7.28659974,5.94011849 5.68708632,7.53963191 C3.84324225,9.38631703 5.59049048,16.2645088 12.3891328,23.0659922 C19.1877751,29.8646345 26.0688079,31.6147238 27.9154931,29.7680386 C29.5150065,28.1685252 32.3106036,26.2195622 28.6712134,23.2932765 C25.0318232,20.3669909 24.0147259,21.8045642 22.3640735,23.4580576 C21.2077645,24.6086845 18.2928431,22.1994707 15.7728281,19.6822968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.727936, 17.728157) rotate(-360.000000) translate(-17.727936, -17.728157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*u,'px;user-select: none;">接听</div>\n            </div>'),d.onclick=function(){var e=i.decoderState.state,n=e.play,r=e.isEditing,s=e.talk,l=e.sound,d=e.rejection;if(r||d)return!1;console.log("接听"),i.jSPlugin.pluginStatus.loadingClear(),n||(i.jSPlugin.pluginStatus.loadingStart(i.jSPlugin.id),i.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"}),i.jSPlugin.play(),i.setDecoderState({play:!n})),s||1!=i.themeData.customConfig.defaultMicro||(i.setDecoderState({talk:!0,mute:!1}),l&&i.jSPlugin.closeSound(),i.jSPlugin.Talk.startTalk()),i.setDecoderState({sound:!1}),i.bellStatus="onCall",i.switchFooter("onCall"),o[i.bellStatus].btnList.map((function(e,t){e.isrender&&i.renderFooter(e.iconId,e)})),a[i.bellStatus].btnList.map((function(e,t){e.isrender&&i.renderHeader(e.iconId,e)}));var c=document.getElementById("".concat(i.jSPlugin.id,"-header-onBell"));c&&c.parentElement.removeChild(c),1==i.themeData.customConfig.bellPoster&&(document.getElementById("bellring-icon")&&document.getElementById("".concat(i.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),i.jSPlugin.setPoster("")),0==i.themeData.customConfig.defaultMicro&&(i.muteCommon(t),i.jSPlugin.openSound(),i.setDecoderState({sound:!0})),i.removeBellRing(),i.maxTalkTime=1e3*i.themeData.customConfig.maxTalkTime*60;var u=i;setTimeout((function(){s&&(console.log("结束对讲"),u.setDecoderState({talk:!1}),u.jSPlugin.Talk.stopTalk()),n&&(u.jSPlugin.stop(),u.setDecoderState({play:!n})),i.rejectionStatusDispose(),i.remoteUnlockEle&&i.remoteUnlockEle.goback(),"function"===typeof i.jSPlugin.hangUpCallback&&i.jSPlugin.hangUpCallback("hangUp")}),i.maxTalkTime)},d;case"remoteUnlock":return d.title="远程开锁",d.id=e,d.domString='<div style="width: '.concat(.7*u,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(.5*u,"px;height: ").concat(.5*u,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.3*u,'px" height="').concat(.3*u,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>开锁</title>\n                        <g id="icon/开锁" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M18,4 C21.3137085,4 24,6.6862915 24,10 L24,10 L24,19.787 L29.5,19.7875 C30.0522847,19.7875 30.5,20.2352153 30.5,20.7875 C30.5,21.3397847 30.0522847,21.7875 29.5,21.7875 L24,21.787 L24,26 C24,29.2383969 21.4344251,31.8775718 18.2249383,31.9958615 L18,32 C14.6862915,32 12,29.3137085 12,26 L12,26 L12,10 C12,6.6862915 14.6862915,4 18,4 Z M18,6 C15.790861,6 14,7.790861 14,10 L14,10 L14,26 C14,28.209139 15.790861,30 18,30 C20.209139,30 22,28.209139 22,26 L22,26 L22,21.787 L18.5,21.7875 C17.9477153,21.7875 17.5,21.3397847 17.5,20.7875 C17.5,20.2352153 17.9477153,19.7875 18.5,19.7875 L22,19.787 L22,10 C22,7.85780461 20.3160315,6.10892112 18.1996403,6.00489531 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*u,'px;user-select: none;">远程开锁</div>\n            </div>'),d.onclick=function(){var e=i.decoderState.state,t=e.isEditing,n=e.rejection;if(t||"onBell"==i.bellStatus||n)return!1;console.log("远程开锁"),i.switchFooter("remoteUnlock"),i.remoteUnlockEle=new ct(i.jSPlugin,i.switchFooter)},d;case"mute":return d.title="静音",d.id=e,d.domString='<div style="width: '.concat(.7*u,'px;display: flex;flex-direction: column;align-items: center;">\n                <div id="').concat(this.jSPlugin.id,'-icon-mute" style="width: ').concat(.5*u,"px;height: ").concat(.5*u,"px;border-radius: 50%;border: 1px solid ").concat(l?"#CCCCCC":t.backgroundColor,";background: ").concat(l&&s?"#cccccc":"#ffffff",';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.3*u,'px" height="').concat(.3*u,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>静音</title>\n                        <g id="icon/静音" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path id="icon-mute-path" d="M29.2988305,7.56559704 C29.8540627,8.1086468 29.8980234,8.97727504 29.4240597,9.57172938 L29.3223594,9.6867869 L22.585,16.574 L22.5859243,26.0592702 C22.5859243,26.9500521 21.8638029,27.6721735 20.973021,27.6721735 C20.6007147,27.6721735 20.2398727,27.5433734 19.9517149,27.3076254 L15.583,23.733 L10.4341733,28.9987008 C9.85492024,29.5909486 8.9052312,29.6014828 8.31298346,29.0222298 C7.75775121,28.47918 7.71379057,27.6105518 8.18775419,27.0160974 L8.28945454,26.9010399 L27.1776406,7.58912597 C27.7568937,6.99687823 28.7065827,6.98634397 29.2988305,7.56559704 Z M22.2503608,7.16816759 C22.4679282,7.45036017 22.5859243,7.79665625 22.5859243,8.15298221 L22.585,9.899 L10.778,21.971 L9.47580645,21.9713498 C7.69424274,21.9713498 6.25,20.5271071 6.25,18.7455434 L6.25,15.65293 C6.25,13.8713663 7.69424274,12.4271235 9.47580645,12.4271235 L12.787,12.427 L19.9882064,6.87564241 C20.6936617,6.33174431 21.7064627,6.46271229 22.2503608,7.16816759 Z" id="形状结合" fill="').concat(s?"#ffffff":l?"#cccccc":t.backgroundColor,'"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*u,'px;user-select: none;">静音</div>\n            </div>'),d.onclick=function(){var e=i.decoderState.state,n=e.talk,a=e.sound;e.play;var o=e.rejection;if(o)return!1;console.log("静音"),n?(console.log("结束对讲"),i.setDecoderState({talk:!1,mute:!0},t.backgroundColor),i.jSPlugin.Talk.stopTalk(),i.jSPlugin.openSound(),i.setDecoderState({sound:!0})):(console.log("开始对讲"),i.setDecoderState({talk:!0,mute:!1},t.backgroundColor),a&&(i.jSPlugin.closeSound(),i.setDecoderState({sound:!1})),i.jSPlugin.Talk.startTalk())},d;case"hangUp":return d.title="挂断",d.id=e,d.domString='<div style="width: '.concat(.7*u,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(.5*u,"px;height: ").concat(.5*u,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.3*u,'px" height="').concat(.3*u,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>挂断</title>\n                        <g id="icon/挂断" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*u,'px;">挂断</div>\n            </div>'),d.onclick=function(){var e=i.decoderState.state,t=e.talk,n=e.play,a=e.sound,o=e.rejection;if(o)return!1;t&&(console.log("结束对讲"),i.setDecoderState({talk:!1}),i.jSPlugin.Talk.stopTalk()),n&&(i.jSPlugin.stop(),i.setDecoderState({play:!n})),a&&(i.jSPlugin.closeSound(),i.setDecoderState({sound:!1})),(n||t)&&(console.log("挂断"),i.removeBellRing(),i.rejectionStatusDispose(),"function"===typeof i.jSPlugin.hangUpCallback&&i.jSPlugin.hangUpCallback("hangUp"))},d;default:return d}}},{key:"answerOvertime",value:function(){this.toastCustom.initToastContent("应答超时");var e=this.decoderState.state.play;console.log("应答超时"),e&&this.jSPlugin.stop(),this.setDecoderState({play:!1,rejection:!0}),this.rejectionStatusDispose(),this.switchFooter("onBell"),"function"===typeof this.jSPlugin.hangUpCallback&&this.jSPlugin.hangUpCallback("rejection")}},{key:"rejectionStatusDispose",value:function(){var e=this,t=this.themeData.footer,i=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),a=document.getElementById("header-".concat(this.bellStatus,"-ringStatus"));"onBell"==this.bellStatus?(i.innerHTML="",i.style.color="#ffffff"):(n.innerHTML="",n.style.color="#ffffff"),console.log("rejectionStatusDispose"),this.setDecoderState({rejection:!0}),t[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderFooter(t.iconId,t)})),a.innerText="通话已结束",this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:!1,type:2})}},{key:"userNoDevice",value:function(){var e=this;this.removeBellRing(),this.setDecoderState({rejection:!0});var t=this.themeData.footer,i=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));"onBell"==this.bellStatus?(i.innerHTML="",i.style.color="#ffffff"):(n.innerHTML="",n.style.color="#ffffff"),console.log("userNoDevice"),this.setDecoderState({rejection:!0}),t[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderFooter(t.iconId,t)})),this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:!1,type:2})}},{key:"renderHeader",value:function(e,t){var i=this,n=this.videoWidth/1024||1,a=this.matchBtn(e,t);if(document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content"))){var o=document.createElement("span");o.innerHTML="".concat(a.domString),document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content")).appendChild(o)}else{var r=document.createElement("div");r.id="".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus),r.style="max-width:50%;position:relative;",r.innerHTML='<span id="'.concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,'-content" style="display:inline-block;height:auto;padding-top: ').concat(32*n,'px;";>\n        ').concat(a.domString,"\n      </span>"),r.onclick=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;a.onclick(e)},document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(r)}}},{key:"renderFooter",value:function(e,t){var i=this,n=this.decoderState.state.mute;if(console.log("-------------renderFooter"),"remoteUnlock"==e&&this.jSPlugin.capacity&&(!this.jSPlugin.capacity["support_unlock"]||0==this.jSPlugin.capacity["support_unlock"]))return!1;var a=this.matchBtn(e,t),o=this.videoWidth/6,r=document.createElement("div");r.className="theme-icon-item",this.jSPlugin.isWebConsole?r.style="padding:0 ".concat(.1*o,"px;"):r.style="padding:0 ".concat(.1*o,"px;cursor: pointer;"),r.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(a.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(a.id,'-content" title="').concat(a.title,'" style="display: flex;align-items: center;position:relative;">')).concat(a.domString,"</div>")+"</span>",r.onclick=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;a.onclick(e)},a.onmouseenter&&(r.onmouseenter=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;a.onmouseenter(e)}),a.onmouseleave&&(r.onmouseleave=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;a.onmouseleave(e)});var s=this.videoWidth/597,l=document.createElement("span");l.className="icon-move left",l.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(a.id,'-left" title="左移" style="display: inline-block;border-radius: 2px;overflow: hidden;position: absolute;top: calc(50% - ').concat(35*s,"px); width: ").concat(10*s,"px; height: ").concat(40*s,'px;cursor: pointer;">\n        <svg width="100%" height="100%" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-614.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头左" transform="translate(0.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(1.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n        </span>'),l.onclick=function(){i.editIcon(a.id,"left","footer")},r.appendChild(l);var d=document.createElement("span");if(d.className="icon-move right",d.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(a.id,'-right" class="ezuikit-theme-icon" title="右移" style="display: inline-block;border-radius: 2px;overflow: hidden;position: absolute;top: calc(50% - ').concat(35*s,"px);left: ").concat(20*s+.5*o,"px; width: ").concat(10*s,"px; height: ").concat(40*s,'px;cursor: pointer;">\n        <svg width="100%" height="100%" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-684.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头右" transform="translate(70.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(5.500000, 20.000000) scale(-1, 1) translate(-5.500000, -20.000000) translate(2.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n        </span>'),d.onclick=function(){i.editIcon(a.id,"right","footer")},r.appendChild(d),"answer"==e||"rejection"==e||"hangUp"==e);else{var c=document.createElement("span");c.className="icon-move close",c.innerHTML='<span id="'.concat(a.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: ').concat(-15*s-1,"px;left: ").concat(20*s+.5*o-4.5*s,'px;cursor: pointer;">\n            <svg width="').concat(18*s,'" height="').concat(18*s,'" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <title></title>\n                  <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <g id="H5呼叫模板" transform="translate(-680.000000, -5006.000000)">\n                          <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                              <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                                  <g id="编组" transform="translate(170.000000, 0.000000)">\n                                      <g id="关闭1" transform="translate(66.000000, 0.000000)">\n                                          <rect id="矩形" fill-rule="nonzero" x="0" y="0" width="18" height="18"></rect>\n                                          <path d="M9,1.125 C4.65117188,1.125 1.125,4.65117188 1.125,9 C1.125,13.3488281 4.65117188,16.875 9,16.875 C13.3488281,16.875 16.875,13.3488281 16.875,9 C16.875,4.65117188 13.3488281,1.125 9,1.125 Z M11.9074219,11.9917969 L10.7472656,11.9865234 L9,9.90351562 L7.25449219,11.9847656 L6.09257813,11.9900391 C6.01523438,11.9900391 5.95195313,11.9285156 5.95195313,11.8494141 C5.95195313,11.8160156 5.96425781,11.784375 5.98535156,11.7580078 L8.27226563,9.03339844 L5.98535156,6.31054687 C5.96425781,6.28417969 5.95195313,6.25253906 5.95195313,6.21914062 C5.95195313,6.14179687 6.01523438,6.07851562 6.09257813,6.07851562 L7.25449219,6.08378906 L9,8.16679687 L10.7455078,6.08554688 L11.9056641,6.08027344 C11.9830078,6.08027344 12.0462891,6.14179687 12.0462891,6.22089844 C12.0462891,6.25429687 12.0339844,6.2859375 12.0128906,6.31230469 L9.72949219,9.03515625 L12.0146484,11.7597656 C12.0357422,11.7861328 12.0480469,11.8177734 12.0480469,11.8511719 C12.0480469,11.9285156 11.9847656,11.9917969 11.9074219,11.9917969 Z" id="形状" fill="#595959"></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </svg>\n          </span>'),c.onclick=function(){i.editIcon(a.id,"delete","footer")},r.appendChild(c)}"onCall"==this.bellStatus?document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).appendChild(r):document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(r),this.decoderState.state.isEditing&&"mute"==e&&"onCall"==this.bellStatus&&(0!=this.themeData.customConfig.defaultMicro||n?this.setDecoderState({mute:!1},t.backgroundColor):this.setDecoderState({mute:!0},t.backgroundColor))}},{key:"switchFooter",value:function(e){var t={};switch(this.themeData&&(t=this.themeData.footer),e){case"onBell":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).style.display="none"),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"))?"none"==document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex"):document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex";break;case"onCall":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="flex",this.themeData&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=t[this.bellStatus].color);break;case"quickReply":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none";break;case"remoteUnlock":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).style.display="flex";break}}},{key:"initThemeData",value:function(){var e=this;console.log("-------------initThemeData");var t=this.decoderState.state.isEditing,i=this.themeData,n=i.header,a=i.footer,o=this.jSPlugin.id,r=this.videoWidth,s=r/1024;if(this.isNeedRenderHeader=G.findIndex(n[this.bellStatus].btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderFooter=G.findIndex(a[this.bellStatus].btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width: calc(100% - 100px);padding-left: 3%;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>");else{var l=document.createElement("div");l.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),l.setAttribute("class","header-controls"),l.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex;width:calc(100% - 100px);overflow:hidden;padding-left: 3%;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' class=\"header-controls-right\" style='display:flex;'></div>"),console.log(this.jSPlugin.height);var d=.2*this.jSPlugin.height+"px",c={height:d,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:"100%",position:"relative","margin-bottom":"-"+d,"align-items":"center",background:"transparent linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)"};l.style=xt(c),document.getElementById("".concat(o,"-wrap")).insertBefore(l,document.getElementById(o));var u=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(u)}),50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));var h=.3*this.jSPlugin.height;if(this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(h,"px"),"onCall"==this.bellStatus?document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls"  class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 4%;width:100%;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              '):document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls"  class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 4%;width:100%;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              '));else{var x=document.createElement("div");x.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),x.setAttribute("class","ez-iframe-footer-container");var f={"min-height":h+"px","max-height":h+"px",position:"relative","margin-top":"-"+h+"px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%","align-items":"center","background-image":"linear-gradient(180deg, rgba(0,0,0,0.00) 0%, rgba(0,0,0,0.60) 100%)","font-size":24*s+"px"};x.style=xt(f),x.innerHTML='\n            <div id="'.concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            '),T(x,document.getElementById(o))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=n[this.bellStatus].backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=n[this.bellStatus].color,n[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderHeader(t.iconId,t)}))),this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=a[this.bellStatus].backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=a[this.bellStatus].color,a[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderFooter(t.iconId,t)}))),1==this.themeData.customConfig.bellPoster&&!t){this.jSPlugin.poster="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg";var p=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(p),e.jSPlugin.setPoster(e.jSPlugin.poster))}),50)}this.activeThemeStatus&&(this.initBellRing(),window.addEventListener("click",this.autoPlayRing)),this.inited=!0,this.getCallDeviceInfo()}},{key:"renderThemeData",value:function(){var e=this,t=this.decoderState.state.isEditing,i=this.themeData,n=i.header,a=i.footer;if(this.isNeedRenderHeader&&n&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=n[this.bellStatus].backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=n[this.bellStatus].color.replace("-diy",""),n[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.setDecoderState(d({},t.iconId,e.decoderState.state[t.iconId]))}))),this.isNeedRenderFooter&&a)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=a[this.bellStatus].backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=a[this.bellStatus].color.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=a[this.bellStatus].color.replace("-diy",""),a[this.bellStatus].btnList.map((function(i,n){if(i.isrender&&e.setDecoderState(d({},i.iconId,e.decoderState.state[i.iconId])),0==n&&!e.themeInited&&e.activeThemeStatus)var a=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(a),1!=e.themeData.customConfig.bellPoster||t?e.jSPlugin.play():e.jSPlugin.pluginStatus.loadingClear(),e.themeInited=!0)}),50)})),-1!==this.jSPlugin.url.indexOf("hd.live")&&this.setDecoderState({hd:!0}),this.themeData.autoFocus>0&&(this.autoFocus=parseInt(this.themeData.autoFocus),this.startAutoFocus(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",(function(){e.stopAutoFocus()}))),this.setDecoderState({cloudRec:"cloud.rec"===M(this.jSPlugin.url).type,rec:"rec"===M(this.jSPlugin.url).type,type:M(this.jSPlugin.url).type});else if(!this.themeInited&&this.activeThemeStatus)var o=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(o),e.themeData&&e.themeData.customConfig&&1==e.themeData.customConfig.bellPoster&&!t?e.jSPlugin.pluginStatus.loadingClear():e.jSPlugin.play(),e.themeInited=!0)}),50);var r=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(r),e.jSPlugin.reSize(e.jSPlugin.params.width,e.jSPlugin.params.height))}),50)}},{key:"setThemeData",value:function(e,t){this.themeData=e,"onCall"==t&&(this.bellStatus="onCall")}},{key:"startAutoFocus",value:function(){var e=this,t=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout((function(){document.getElementById("".concat(e.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.pointerEvents="none")}),1e3*t)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.startAutoFocus()}},{key:"editIcon",value:function(e,t,i){console.log("编辑组件",e,t,i);var n=this.themeData;console.log("themeData",this.themeData);var a=this.themeData[i][this.bellStatus].btnList,o=G.findIndex(a,(function(t){return t.iconId===e})),r=a[o];switch(t){case"delete":a[o].isrender=0;break;case"right":for(var s=-1,l=o+1;l<a.length;l++)if(a[l].part===a[o].part&&1==a[l].isrender){s=l;break}-1!==s&&(a[o]=a[s],a[s]=r);break;case"left":for(var d=-1,c=o-1;c>=0;c--)if(a[c].part===a[o].part&&1==a[c].isrender){d=c;break}-1!==d&&(a[o]=a[d],a[d]=r);break}console.log("new btnList",a),n[i][this.bellStatus].btnList=a,this.jSPlugin.Theme.changeTheme(n)}},{key:"countTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var n=document.createElement("div");n.id=this.jSPlugin.id+"time-area",n.className="time-area",n.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(n)}if(this.countTimer&&clearInterval(this.countTimer),"add"===e){var a=t;document.getElementById(i.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval((function(){++a,document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML=o(a)}),1e3)}else"destroy"===e&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(i.jSPlugin.id+"time-area")&&(document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(i.jSPlugin.id+"time-area").style.display="none"));function o(e){var t=parseInt(e),i=0,n=0,a="00",o="00",r="00";return t>59&&(i=parseInt(t/60),t=parseInt(t%60),i>59&&(n=parseInt(i/60),i=parseInt(i%60))),a=parseInt(t)>9?parseInt(t):"0"+parseInt(t),o=parseInt(i)>9?parseInt(i):"0"+parseInt(i),r=parseInt(n)>9?parseInt(n):"0"+parseInt(n),n>0?r+":"+o+":"+a:i>0?o+":"+a:"00:"+a}}},{key:"editStart",value:function(e){console.log("----------editStart2");var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));document.getElementById("".concat(this.jSPlugin.id,"-headControl")),t&&t.setAttribute("class","footer-controls themeEditing"),i&&i.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(e){console.log("----------editEnd2");var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-headControl")),n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));i&&i.setAttribute("class","header-controls"),t&&t.setAttribute("class","footer-controls"),n&&n.setAttribute("class","footer-controls")}},{key:"fetchThemeData",value:function(e){var t=this,i=function(e){0==e.meta.code&&e.data?(t.activeThemeStatus=!0,t.themeData=e.data,e.data.header&&(t.themeData.header=e.data.header,t.themeData.header[t.bellStatus].btnList=t.themeData.header[t.bellStatus].btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),e.data.footer&&(t.themeData.footer=e.data.footer,t.themeData.footer[t.bellStatus].btnList=t.themeData.footer[t.bellStatus].btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),t.jSPlugin.capacity?(t.initThemeData(),t.renderThemeData()):setTimeout((function(){t.initThemeData(),t.renderThemeData()}),300)):(t.activeThemeStatus=!1,t.jSPlugin.pluginStatus.loadingClear(),t.setDecoderState({rejection:!0}),"111021"==e.meta.code?(t.jSPlugin.pluginStatus.loadingSetText({text:"无效的模板id",color:"#fff"}),t.activeThemeStatusTxt="无效的模板id"):"111023"==e.meta.code?(t.jSPlugin.pluginStatus.loadingSetText({text:"您的试用特权已到期，需前往轻应用控制台购买后使用。",color:"#fff"}),t.activeThemeStatusTxt="试用特权已到期"):(t.jSPlugin.pluginStatus.loadingSetText({text:"模板未激活，请先在开放平台轻应用控制台购买模板",color:"#fff"}),t.activeThemeStatusTxt="模板未激活"),t.themeData=ht.data,t.initThemeData(),t.renderThemeData())},n=function(){t.renderThemeData()};Qe(this.jSPlugin,e,i,n)}},{key:"getCallDeviceInfo",value:function(){var e=this;this.videoWidth;var t=this,i=function(i){200==i.code&&i.data&&(console.log("---------getCallDeviceInfo"),e.deviceInfoData=i.data,i.data.isEncrypt&&setTimeout((function(){console.log("---------------------视频已加密"),t.jSPlugin.pluginStatus&&t.jSPlugin.pluginStatus.loadingClear(),t.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})}),50),document.getElementById("header-".concat(e.bellStatus,"-deviceCategory"))&&(document.getElementById("header-".concat(e.bellStatus,"-deviceCategory")).innerText=""+i.data.deviceName)),20018!=i.code||e.jSPlugin.isWebConsole||e.userNoDevice()};L(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:M(this.jSPlugin.url).deviceSerial},"",i)}},{key:"setHeaderText",value:function(e){var t=this.videoWidth/1024||1;document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content"))&&(document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(32*t,'px;display: block">').concat(e,'</span><span style="font-size: ').concat(24*t,"px;padding-top: ").concat(16*t,'px;display: block;">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"","</span>"))}}]),e}(),pt=function(){function e(t,i){r(this,e),this.jSPlugin=t,this.heightPop=i||366,this.initPopupCustom()}return l(e,[{key:"initPopupCustom",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom"))?document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom")).style.display="flex":this.randerPopup()}},{key:"randerPopup",value:function(){var e=this,t=document.documentElement.clientWidth,i=t/375||1,n=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(n),n.innerHTML="@keyframes slideContentUp {0%   {bottom: -".concat(366*i,"px;}\n        25%  {bottom: -").concat(244*i,"px;}\n        50%  {bottom: -").concat(122*i,"px;}\n        100% {bottom:0;}} .open-popup{animation:slideContentUp 0.3s 1 linear; -webkit-animation: slideContentUp 0.3s 1 linear;}");var a=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),o=document.createElement("div");o.style="display:flex;",o.id="".concat(this.jSPlugin.id,"-wrap-popup-custom"),o.innerHTML='<div id="'.concat(this.jSPlugin.id,'-wrap-popup-custom-mask" style="height:100%;width:100%;position:fixed;top:0;left:0;z-index:9998;background-color: rgba(0,0,0,0.75);overflow:hidden;">\n        </div>\n        <div id="').concat(this.jSPlugin.id,'-wrap-popup-board" class="open-popup" style="bottom:0;height: ').concat(this.heightPop*i,'px;position:fixed;left: 0; width: 100%;background-color:#ffffff;z-index: 9999;border-radius: 16px 16px 0px 0px;">\n            <div style="margin-top: ').concat(20*i,"px;padding: 0 ").concat(15*i,'px;width: 100%;display:flex;flex-direction: row;align-items: center;">\n                <div id="').concat(this.jSPlugin.id,'-popup-board-close">\n                    <svg width="').concat(24*i,'px" height="').concat(24*i,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>icon/close</title>\n                        <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <g id="common/Close/Dark">\n                                <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                                <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>\n                            </g>\n                        </g>\n                    </svg>\n                </div>\n                <div id="popup-board-title-content" style="width: ').concat(180*i,"px;font-size: ").concat(18*i,"px;margin-left: ").concat(59*i,'px;font-family: PingFangSC-Medium;color: #2C2C2C;font-weight: 500;text-align: center;"></div>\n            </div>\n            <div id="').concat(this.jSPlugin.id,'-popup-board-content" style="width:100%;padding: 0 ').concat(15*i,"px;height: ").concat((this.heightPop-48)*i,'px;box-sizing: border-box;display: flex;align-items: center;justify-content: center;flex-direction: column;"></div>\n        </div>\n        '),a.appendChild(o),document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom-mask")).onclick=function(){e.closePopupCustom()},document.getElementById("".concat(this.jSPlugin.id,"-popup-board-close")).onclick=function(){e.closePopupCustom()}}},{key:"closePopupCustom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e();var t=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),i=document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom"));t&&i&&t.removeChild(i)}},{key:"initPopupContent",value:function(e,t){document.getElementById("popup-board-title-content").innerText=e||"",t&&document.getElementById("".concat(this.jSPlugin.id,"-popup-board-content")).appendChild(t)}}]),e}(),mt=function(){function e(t,i,n){r(this,e),this.jSPlugin=t,this.videoWidth=n,this.switchFooter=i,this.toastCustom=new ot(t,!0),this.sendLoadingStats=!1,this.quickReplyList=["你好，请将快递放在门口","你好，稍等","你好，请将快递放入小区快递柜","你好，请将外卖放在门口"],this.popupCustom=new pt(t,366),document.getElementById("mobile-quickReply-list")||(this.popupCustom.initPopupContent("快捷回复",this.renderQuickReply()),this.initQuickReply())}return l(e,[{key:"initQuickReply",value:function(){document.getElementById("mobile-quickReply-list-item-0")||this.getQuickReplyList()}},{key:"renderQuickReply",value:function(){document.documentElement.clientWidth;var e=document.createElement("div");return e.style="width:100%;",e.id="mobile-quickReply-list",e.innerHTML='<div id="mobile-quickReply-content" style="display: block;width:100%;margin-bottom: 36px;"></div>\n    <div id="mobile-quickReply-loading" style="display: none;width:100%;"></div>\n    <div id="mobile-quickReply-loaderror" style="display: none;width:100%;"></div>',e}},{key:"matchQuickReplyBtn",value:function(){var e=this,t=this.videoWidth/375||1,i=document.getElementById("mobile-quickReply-content");this.quickReplyList&&this.quickReplyList.length>0&&this.quickReplyList.forEach((function(n,a){var o=document.createElement("div");o.id="mobile-quickReply-list-item-".concat(a),o.style="margin: ".concat(14*t,"px 0;\n            padding: ").concat(12*t,"px ").concat(15*t,"px;min-height: ").concat(50*t,"px;width:100%;\n            background: #ffffff;border-radius: ").concat(25*t,"px;display: flex;align-items: center;\n            box-sizing: border-box;font-size:").concat(16*t,"px;color: #2c2c2c;"),o.innerHTML='\n            <svg id="mobile-quickReply-icon-'.concat(a,'" width="').concat(24*t,'px" height="').concat(24*t,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>icon/快捷回复播放</title>\n                    <g id="icon/快捷回复播放" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                        <path d="M18.9877488,4.36609064 C21.024173,6.11256041 22.2495,8.93566941 22.2495,12.0024 C22.2495,15.066006 21.0272636,17.8857191 18.9943957,19.6331539 C18.6802816,19.9031635 18.2067557,19.8674098 17.9367461,19.5532957 C17.6667365,19.2391816 17.7024902,18.7656557 18.0166043,18.4956461 C19.708691,17.0411437 20.7495,14.6399857 20.7495,12.0024 C20.7495,9.36223947 19.7060688,6.95821183 18.0112512,5.50470936 C17.6968304,5.23505702 17.6605383,4.76157212 17.9301906,4.44715124 C18.199843,4.13273036 18.6733279,4.09643829 18.9877488,4.36609064 Z M12.2442357,5.87579772 L12.2496,6.0179 L12.2496,17.9819 C12.2496,19.4241617 10.6173522,20.2281184 9.48072691,19.4058312 L9.36879527,19.318145 L5.5996,16.1243865 L3.4996,16.1249 C2.581479,16.1249 1.8284129,15.4182283 1.75540159,14.518493 L1.7496,14.3749 L1.7496,9.6249 C1.7496,8.70699712 2.45696726,7.95373471 3.35611134,7.88070323 L3.4996,7.8749 L5.5996,7.8743865 L9.36863059,4.68279453 C10.4692948,3.74976994 12.1377395,4.4768074 12.2442357,5.87579772 Z M10.3952894,5.79039368 L10.338321,5.82721597 L6.35932099,9.19721597 C6.33078024,9.2209397 6.30781291,9.23786997 6.28390041,9.25347262 L6.35932099,9.19721597 C6.32908972,9.22282023 6.29742069,9.24561685 6.26463127,9.26563212 C6.24087088,9.28012218 6.21634729,9.29327785 6.19105714,9.30506452 C6.18413632,9.30829747 6.1773583,9.31133066 6.1705483,9.31425704 C6.10964585,9.34044144 6.04445985,9.35881628 5.97637056,9.36805338 C5.95756973,9.37054904 5.94148484,9.37214804 5.92538001,9.37322799 L5.8746,9.3749 L3.4996,9.3749 C3.38149734,9.3749 3.28218291,9.45734262 3.25621762,9.56766695 L3.2496,9.6249 L3.2496,14.3749 C3.2496,14.4934644 3.33170357,14.592449 3.44222164,14.6183106 L3.4996,14.6249 L5.8746,14.6249 L5.92192315,14.6263483 C5.93923255,14.627429 5.95652113,14.629109 5.97375563,14.6313909 L5.8746,14.6249 C5.9789469,14.6249 6.0783167,14.6462095 6.168595,14.6847142 C6.18010037,14.6895946 6.19235048,14.695194 6.2044823,14.7011451 C6.22547728,14.7114805 6.24528995,14.7223727 6.26453263,14.7341072 C6.266314,14.735195 6.26795143,14.7362034 6.26958602,14.7372187 L6.28086895,14.7443598 C6.30587317,14.7605037 6.32985559,14.7780945 6.3526978,14.7970136 L6.35940473,14.802655 L10.3380567,18.1733603 C10.4825575,18.2956302 10.695338,18.2179271 10.7408386,18.0492187 L10.7496,17.9819 L10.7496,6.0179 C10.7496,5.82820058 10.5532313,5.71607381 10.3952894,5.79039368 Z M15.9361636,7.38657032 C17.3580982,8.28109203 18.2498,10.0509458 18.2498,12.0044 C18.2498,13.9607796 17.3563865,15.7307985 15.9326223,16.6154437 C15.5807928,16.8340503 15.1183629,16.7260519 14.8997563,16.3742223 C14.6811497,16.0223928 14.7891481,15.5599629 15.1409777,15.3413563 C16.1036696,14.7431949 16.7498,13.4630899 16.7498,12.0044 C16.7498,10.5466827 16.103548,9.26399865 15.1374364,8.65622968 C14.7868297,8.43566726 14.6814079,7.97264316 14.9019703,7.62203641 C15.1225327,7.27142966 15.5855568,7.1660079 15.9361636,7.38657032 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>\n                    </g>\n                </svg>\n            <span id="mobile-quickReply-name-').concat(a,'" style="padding-left: 5px;">').concat(n.voiceName,"</span>"),o.onclick=function(){console.log("item:"+n),e.sendLoadingStats||(e.setBtnCheckStatus(a),e.sendQuickReply(n))},i.appendChild(o)}))}},{key:"setBtnCheckStatus",value:function(e){var t=this,i="";this.quickReplyList.forEach((function(n,a){i=document.getElementById("mobile-quickReply-list-item-".concat(a)),a==e?(i.style.background="#F4F6FC",i.style.color="#648FFC",t.setBtnCheckLoding(0,a)):(i.style.background="#ffffff",i.style.color="#2c2c2c")}))}},{key:"setBtnCheckLoding",value:function(e,t){console.log(t);var i=this.videoWidth/375||1;if(t>-1){var n=document.getElementById("mobile-quickReply-list-item-".concat(t)),a=document.getElementById("mobile-quickReply-name-".concat(t)),o=document.getElementById("mobile-quickReply-icon-".concat(t));if(1==e){var r=document.getElementById("mobile-quickReply-icon-loading-".concat(t));if(r&&a){var s=document.createElement("span");s.id="mobile-quickReply-icon-".concat(t),s.style="height:".concat(24*i,"px;"),s.innerHTML='\n                <svg width="'.concat(24*i,'px" height="').concat(24*i,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>icon/快捷回复播放</title>\n                    <g id="icon/快捷回复播放" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                        <path d="M18.9877488,4.36609064 C21.024173,6.11256041 22.2495,8.93566941 22.2495,12.0024 C22.2495,15.066006 21.0272636,17.8857191 18.9943957,19.6331539 C18.6802816,19.9031635 18.2067557,19.8674098 17.9367461,19.5532957 C17.6667365,19.2391816 17.7024902,18.7656557 18.0166043,18.4956461 C19.708691,17.0411437 20.7495,14.6399857 20.7495,12.0024 C20.7495,9.36223947 19.7060688,6.95821183 18.0112512,5.50470936 C17.6968304,5.23505702 17.6605383,4.76157212 17.9301906,4.44715124 C18.199843,4.13273036 18.6733279,4.09643829 18.9877488,4.36609064 Z M12.2442357,5.87579772 L12.2496,6.0179 L12.2496,17.9819 C12.2496,19.4241617 10.6173522,20.2281184 9.48072691,19.4058312 L9.36879527,19.318145 L5.5996,16.1243865 L3.4996,16.1249 C2.581479,16.1249 1.8284129,15.4182283 1.75540159,14.518493 L1.7496,14.3749 L1.7496,9.6249 C1.7496,8.70699712 2.45696726,7.95373471 3.35611134,7.88070323 L3.4996,7.8749 L5.5996,7.8743865 L9.36863059,4.68279453 C10.4692948,3.74976994 12.1377395,4.4768074 12.2442357,5.87579772 Z M10.3952894,5.79039368 L10.338321,5.82721597 L6.35932099,9.19721597 C6.33078024,9.2209397 6.30781291,9.23786997 6.28390041,9.25347262 L6.35932099,9.19721597 C6.32908972,9.22282023 6.29742069,9.24561685 6.26463127,9.26563212 C6.24087088,9.28012218 6.21634729,9.29327785 6.19105714,9.30506452 C6.18413632,9.30829747 6.1773583,9.31133066 6.1705483,9.31425704 C6.10964585,9.34044144 6.04445985,9.35881628 5.97637056,9.36805338 C5.95756973,9.37054904 5.94148484,9.37214804 5.92538001,9.37322799 L5.8746,9.3749 L3.4996,9.3749 C3.38149734,9.3749 3.28218291,9.45734262 3.25621762,9.56766695 L3.2496,9.6249 L3.2496,14.3749 C3.2496,14.4934644 3.33170357,14.592449 3.44222164,14.6183106 L3.4996,14.6249 L5.8746,14.6249 L5.92192315,14.6263483 C5.93923255,14.627429 5.95652113,14.629109 5.97375563,14.6313909 L5.8746,14.6249 C5.9789469,14.6249 6.0783167,14.6462095 6.168595,14.6847142 C6.18010037,14.6895946 6.19235048,14.695194 6.2044823,14.7011451 C6.22547728,14.7114805 6.24528995,14.7223727 6.26453263,14.7341072 C6.266314,14.735195 6.26795143,14.7362034 6.26958602,14.7372187 L6.28086895,14.7443598 C6.30587317,14.7605037 6.32985559,14.7780945 6.3526978,14.7970136 L6.35940473,14.802655 L10.3380567,18.1733603 C10.4825575,18.2956302 10.695338,18.2179271 10.7408386,18.0492187 L10.7496,17.9819 L10.7496,6.0179 C10.7496,5.82820058 10.5532313,5.71607381 10.3952894,5.79039368 Z M15.9361636,7.38657032 C17.3580982,8.28109203 18.2498,10.0509458 18.2498,12.0044 C18.2498,13.9607796 17.3563865,15.7307985 15.9326223,16.6154437 C15.5807928,16.8340503 15.1183629,16.7260519 14.8997563,16.3742223 C14.6811497,16.0223928 14.7891481,15.5599629 15.1409777,15.3413563 C16.1036696,14.7431949 16.7498,13.4630899 16.7498,12.0044 C16.7498,10.5466827 16.103548,9.26399865 15.1374364,8.65622968 C14.7868297,8.43566726 14.6814079,7.97264316 14.9019703,7.62203641 C15.1225327,7.27142966 15.5855568,7.1660079 15.9361636,7.38657032 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>\n                    </g>\n                </svg>\n                '),n.insertBefore(s,a)}}else if(o&&a){n.removeChild(o);var l=document.createElement("span");l.id="mobile-quickReply-icon-loading-".concat(t),l.style="height:".concat(20*i,"px;width: ").concat(24*i,"px;"),l.innerHTML='<svg width="'.concat(20*i,'" height="').concat(20*i,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#666666" p-id="2400"></path></svg>'),n.insertBefore(l,a)}}}},{key:"getQuickReplyList",value:function(){var e=this;console.log("getQuickReplyList"),this.madeLoadingDom(0);var t=function(t){if(t&&200==t.code){var i=t.data||[],n=[];t.data.forEach((function(e,t){n=e.voiceName.split("_"),i[t].voiceName=n[1]})),e.quickReplyList=i,setTimeout((function(){e.madeLoadingDom(2)}),500)}else e.madeLoadingDom(1)},i=function(t){console.log(t),e.madeLoadingDom(1)};st(this.jSPlugin,t,i)}},{key:"madeLoadingDom",value:function(e){var t=this,i=this.videoWidth/375||1;if(0==e){if(document.getElementById("mobile-quickReply-content").style.display="none",document.getElementById("mobile-quickReply-loaderror").style.display="none",document.getElementById("mobile-quickReply-loading").style.display="block",!document.getElementById("mobile-quickReply-loading-box")){var n=document.createElement("div");n.id="mobile-quickReply-loading-box",n.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: row;",n.innerHTML='<div class="" style="heigth:'.concat(20*i,'px">\n                <svg width="').concat(20*i,'" height="').concat(20*i,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#666666" p-id="2400"></path></svg>   \n            </div>\n            <div style="font-size: ').concat(16*i,"px;margin-left:",10,'px;color:#666666;">正在加载，请稍候</div>'),document.getElementById("mobile-quickReply-loading").appendChild(n)}}else if(1==e){if(document.getElementById("mobile-quickReply-content").style.display="none",document.getElementById("mobile-quickReply-loading").style.display="none",document.getElementById("mobile-quickReply-loaderror").style.display="block",!document.getElementById("mobile-quickReply-loaderror-box")){var a=document.createElement("div");a.id="mobile-quickReply-loaderror-box",a.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;",a.innerHTML='<div style="">\n                <img style="width:'.concat(186*i,"px;height:").concat(120*i,'px;" src="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPZ34KAAStrAAA0pZ5cGTw167.png" />\n            </div>\n            <div style="font-size: ').concat(16*i,'px;color: #666666;">\n                <span>加载失败 </span>\n                <span id="mobile-quickReply-loaderror-reload" \n                style="color: #648FFC;-webkit-tap-highlight-color: transparent;">点击重试</span>\n            </div>'),document.getElementById("mobile-quickReply-loaderror").appendChild(a),document.getElementById("mobile-quickReply-loaderror-reload").onclick=function(){t.getQuickReplyList()}}}else document.getElementById("mobile-quickReply-loading").style.display="none",document.getElementById("mobile-quickReply-loaderror").style.display="none",document.getElementById("mobile-quickReply-content").style.display="block",this.matchQuickReplyBtn()}},{key:"sendQuickReply",value:function(e){var t=this;this.sendLoadingStats=!0;var i=function(e){t.sendLoadingStats=!1,e&&200==e.code?t.toastCustom.initToastContent("快捷回复成功"):t.toastCustom.initToastContent("快捷回复失败，请重试"),t.popupCustom.closePopupCustom()},n=function(e){console.log(e),t.sendLoadingStats=!1,t.toastCustom.initToastContent("快捷回复失败，请重试"),t.popupCustom.closePopupCustom()};lt(this.jSPlugin,e.fileUrl,i,n)}},{key:"closeQuickReplyEle",value:function(){this.popupCustom.closePopupCustom()}}]),e}(),_t=function(){function e(t,i,n){r(this,e),this.jSPlugin=t,this.videoWidth=n,this.switchFooter=i,this.toastCustom=new ot(t,!0),this.lockStatus=!1,this.popupCustom=new pt(t,265),this.popupCustom.initPopupContent("远程开锁",this.renderRemoteUnlock()),this.renderRemoteUnlockSlide()}return l(e,[{key:"initRemoteUnlock",value:function(){document.getElementById("mobile-remoteUnlock-content")?this.madeSlideEvent():this.renderRemoteUnlock()}},{key:"renderRemoteUnlock",value:function(){var e=this.videoWidth/1024||1,t=document.createElement("div");return t.style="width:100%;",t.id="mobile-remoteUnlock-box",t.innerHTML='<div style="width:100%;display:flex;flex-direction:row;align-items: center;">\n        <div id="mobile-remoteUnlock-content" style="display: block;width:calc(100% - '.concat(160*e,"px);margin: 0 ").concat(24*e,'px;"></div>\n    </div>'),t}},{key:"renderRemoteUnlockSlide",value:function(){var e=this.videoWidth/375||1,t=document.getElementById("mobile-remoteUnlock-content"),i=document.createElement("div");i.id="mobile-remoteUnlock-content-slide",i.style="width: 100%;display: flex;justify-content: center;padding: 0 ".concat(15*e,"px"),i.innerHTML='<div id="mobile-remoteUnlock-slide-box" style="width: 100%;line-height: '.concat(60*e,"px;height: ").concat(60*e,"px;border: 1px solid rgba(100,143,252,1);border-radius: ").concat(30*e,'px;position: relative;text-align: center;">\n        <div id="mobile-remoteUnlock-slide-bgColor" style="border-radius: ').concat(30*e,"px;width: ").concat(44*e,"px;height: ").concat(60*e,'px;position: absolute;left: 0;top: 0;"></div>\n        <div id="mobile-remoteUnlock-slide-tips" style="height: ').concat(60*e,"px;line-height: ").concat(60*e,"px;font-size: ").concat(14*e,"px;border-radius: ").concat(30*e,'px;position: absolute;text-align: center;user-select: none;color: #666666;width: 100%;">右滑开锁</div>\n        <div id="mobile-remoteUnlock-slide-ball" style="top: ').concat(8*e,"px;left: ").concat(8*e,"px;width: ").concat(44*e,"px;height: ").concat(44*e,'px;background: #598FFF;position: absolute;text-align: center;border-radius:50%;display:flex;align-items: center;justify-content: center;">\n            <svg id="slide-ball-start" style="display: inline;" width="').concat(24*e,'px" height="').concat(24*e,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title>icon/箭头向右</title>\n                <g id="icon/箭头向右" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    <rect id="矩形" fill="#000000" fill-rule="nonzero" opacity="0" x="0" y="0" width="24" height="24"></rect>\n                    <path d="M14.2841136,6.3689007 L19.9432338,12.0287579 L14.2863796,17.6856122 L12.8580239,16.2572565 L16.114,12.9999007 L4.00000001,13 L4.00000001,11 L16.058,10.9999007 L12.8557579,7.79725638 L14.2841136,6.3689007 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </svg>\n            <svg id="slide-ball-end" style="display: none;" width="').concat(20*e,'" height="').concat(20*e,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#648ffc" p-id="2400"></path></svg>\n        </div>\n    </div>'),t.appendChild(i),this.madeSlideEvent()}},{key:"madeSlideEvent",value:function(){var e=this.videoWidth/375||1,t=document.getElementById("mobile-remoteUnlock-slide-box"),i=document.getElementById("mobile-remoteUnlock-slide-bgColor"),n=document.getElementById("mobile-remoteUnlock-slide-tips"),a=document.getElementById("mobile-remoteUnlock-slide-ball"),o=this;function r(){o.lockStatus=!0,document.getElementById("slide-ball-start").style.display="none",document.getElementById("slide-ball-end").style.display="inline",i.style.width=t.clientWidth+"px",i.style.backgroundColor="#598FFF",t.style.border="0",a.style.backgroundColor="#ffffff",n.textContent="正在开锁",n.style.color="#ffffff",a.ontouchstart=null,o.sendRemoteUnlockApi()}a.ontouchstart=function(n){console.log("ontouchstart");n=n||window.event;var s=n.touches[0].pageX;a.style.transition="",i.style.transition="",document.ontouchmove=function(i){i=i||window.event;var n=i.touches[0].pageX-t.offsetLeft-s,l=t.clientWidth-a.clientWidth-8*e;n<=0&&(n=0),n>=l&&(n=l),a.style.left=n+"px",n!=l||o.lockStatus||r()},document.ontouchend=function(){o.lockStatus||(i.style.width="0px",a.style.left=8*e+"px",a.style.transition="left 0.6s linear",i.style.transition="width 0.6s linear"),document.ontouchend=null,document.ontouchmove=null}}}},{key:"resetRemoteUnlockSlide",value:function(){var e=this.videoWidth/1024||1;this.lockStatus=!1;var t=document.getElementById("mobile-remoteUnlock-slide-box"),i=document.getElementById("mobile-remoteUnlock-slide-bgColor"),n=document.getElementById("mobile-remoteUnlock-slide-tips"),a=document.getElementById("mobile-remoteUnlock-slide-ball");i.style.width="0px",a.style.left=8*e+"px",n.textContent="右滑开锁",n.style.color="#666666",document.getElementById("slide-ball-start").style.display="inline",document.getElementById("slide-ball-end").style.display="none",i.style.backgroundColor="#FFFFFF",t.style.border="1px solid rgba(255,255,255,1)",a.style.backgroundColor="#598FFF"}},{key:"sendRemoteUnlockApi",value:function(){var e=this;console.log("下发远程开锁");var t=function(t){t&&200==t.code?e.toastCustom.initToastContent("开锁成功"):e.toastCustom.initToastContent("开锁失败，请重试"),e.popupCustom.closePopupCustom()},i=function(t){console.log(t),e.toastCustom.initToastContent("开锁失败，请重试"),e.popupCustom.closePopupCustom()};rt(this.jSPlugin,t,i)}},{key:"closeRemoteUnlock",value:function(){this.popupCustom.closePopupCustom()}}]),e}(),gt={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0},header:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000 linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)",activeColor:"#1890FF",autoFocus:0,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"ringStatus",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"callStatus",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]}},footer:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"quickReply",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"rejection",part:"left",defaultActive:0,isrender:1,color:"#2C2C2C",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"answer",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-3",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000080",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"mute",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"hangUp",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]}}},vt={data:gt},yt=function(e){var t="";return Object.keys(e).map((function(i,n){t+="".concat(i,":").concat(e[i]).concat(n<Object.keys(e).length-1?";":"")})),t},bt=function(){function e(t,i,n,a){var o=this;r(this,e),d(this,"switchCallStatus",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=o.themeData,n=i.header,a=i.footer,r=null;if("onCall"==e){console.log("接听"),o.bellStatus="onCall",o.switchFooter("onCall"),a[o.bellStatus].btnList.map((function(e,t){e.isrender&&o.renderFooter(e.iconId,e),"mute"==e.iconId&&(r=e)})),n[o.bellStatus].btnList.map((function(e,t){e.isrender&&o.renderHeader(e.iconId,e)}));var s=document.getElementById("".concat(o.jSPlugin.id,"-header-onBell"));s&&s.parentElement.removeChild(s),1==o.themeData.customConfig.bellPoster&&document.getElementById("bellring-icon")&&document.getElementById("".concat(o.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),0==o.themeData.customConfig.defaultMicro&&r?o.muteCommon(r):o.setDecoderState({mute:!1},r.backgroundColor),o.removeBellRing(),o.miniRecCloseClick()}else console.log("响铃"),o.bellStatus="onBell",o.jSPlugin.Theme.changeTheme(o.themeData,t)})),d(this,"muteCommon",(function(e){var t=o.decoderState.state,i=t.talk,n=t.sound;i?(console.log("结束对讲"),o.setDecoderState({talk:!1,mute:!0},e.backgroundColor),o.jSPlugin.Talk.stopTalk(),n||o.jSPlugin.openSound(),o.setDecoderState({sound:!0})):(o.setDecoderState({talk:!1,mute:!0},e.backgroundColor),n||o.jSPlugin.openSound(),o.setDecoderState({sound:!0}))})),d(this,"autoPlayRing",(function(){console.log("autoPlayRing");var e=document.getElementById("bellring-audio");e&&(e.muted=!1,e.src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3",e.paused&&e.play());var t=o.checkIsAppleDevice()||!1;t?window.removeEventListener("touchstart",o.autoPlayRing):window.removeEventListener("click",o.autoPlayRing)})),this.jSPlugin=t,this.videoWidth=t.width,this.videoHeight=t.height,this.themeData=i,this.setDecoderState=n,this.decoderState=a,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.autoFocus=0,this.autoFocusTimer=null,this.bellStatus="onBell",this.recordTimer=null,this.nextRate=1,this.themeInited=!1,this.inited=!1,this.miniRecStatus="rec",this.activeThemeStatus=!0,this.activeThemeStatusTxt="模板未激活",this.miniRecNum=0,this.toastCustom=new ot(t,!0)}return l(e,[{key:"initBellRing",value:function(){var e=this,t=this.decoderState.state,i=t.play,n=t.isEditing,a=this.videoWidth,o=a/375;this.maxBellTime=1e3*this.themeData.customConfig.maxBellTime;var r=document.getElementById("bellring"),s=document.getElementById("bellring-audio");if(!r&&!s){if(this.jSPlugin.isNeedBellRing){var l=document.createElement("div");l.id="bellring",l.innerHTML='<div>\n          <audio id="bellring-audio" loop autoplay>\n            <source src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3" type="audio/mpeg">\n          </audio>\n          </div>',document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(l)}if(1!=this.themeData.customConfig.bellPoster||n)document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"));else{var d=1.8*a,c=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(c=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+.1*d+6);var u=c+(this.videoHeight-130*o)/2,h=document.createElement("div");h.id="bellring-icon",h.style="position: absolute;pointer-events: none;background: none;width: 100%;\n          position: absolute;top: ".concat(u,"px;display: flex;align-items: center;justify-content: center;"),h.innerHTML='<div style="width: '.concat(130*o,"px;height: ").concat(130*o,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.2);border-radius: 50%;">\n            <div style="width: ').concat(80*o,"px;height: ").concat(80*o,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.3);border-radius: 50%;">\n              <svg width="').concat(40*o,'px" height="').concat(40*o,'px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <title>icon/响铃</title>\n                  <g id="icon/响铃" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <polygon id="Path" points="0 0 40.0000002 0 40.0000002 40.0000002 0 40.0000002"></polygon>\n                      <path d="M20.0000001,4.25000002 C22.0363461,4.25000002 23.698175,5.84879552 23.8000507,7.8591997 L23.8050001,8.05500003 L23.805316,8.99953253 C27.1874196,9.97041766 29.6921839,13.0354462 29.80936,16.723731 L29.80936,16.723731 L29.8133335,16.9800001 L29.8133335,21.6416668 C29.8133335,22.3259481 30.0858837,22.9835569 30.5703302,23.4680033 L30.5703302,23.4680033 L31.6386635,24.5363367 C32.338953,25.2366262 32.760721,26.1675592 32.8273086,27.1785295 L32.8273086,27.1785295 L32.8350001,27.4233334 C32.8350001,29.577547 31.0892137,31.3233335 28.9350001,31.3233335 L28.9350001,31.3233335 L24.5666667,31.323 L24.5650266,31.3951531 C24.4527075,33.8194458 22.4520933,35.7500001 20.0000001,35.7500001 C17.5482065,35.7500001 15.5473098,33.8197367 15.4349743,31.3967059 L15.4326667,31.323 L11.0666667,31.3233335 C9.06159524,31.3233335 7.39851917,29.8069287 7.18810198,27.8229374 L7.17194359,27.6230185 L7.1666667,27.4233334 C7.1666667,26.3411154 7.59733134,25.3020086 8.36300328,24.5363367 L8.36300328,24.5363367 L9.43133662,23.4680033 C9.91578309,22.9835569 10.1883334,22.3259481 10.1883334,21.6416668 L10.1883334,21.6416668 L10.1883334,16.9800001 C10.1883334,13.1909619 12.7263704,9.99530436 16.1948593,8.99965364 L16.1950001,8.05500003 C16.1950001,5.95360729 17.8979654,4.25000002 20.0000001,4.25000002 Z M23.0656667,31.323 L16.9336667,31.323 L16.9352114,31.3619281 C17.0285826,32.9723844 18.3649772,34.2500001 20.0000001,34.2500001 C21.6352227,34.2500001 22.9714318,32.9721919 23.0647896,31.3604131 L23.0656667,31.323 Z M21.5116668,10.1783334 L18.4900001,10.1783334 C14.7336124,10.1783334 11.6883334,13.2231481 11.6883334,16.9800001 L11.6883334,16.9800001 L11.6883334,21.6416668 C11.6883334,22.7238848 11.2576687,23.7629916 10.4919968,24.5286635 L10.4919968,24.5286635 L9.42366346,25.5969969 C8.93921698,26.0814433 8.6666667,26.7390521 8.66637526,27.402427 L8.66637526,27.402427 L8.67048222,27.560237 C8.74130967,28.8268108 9.79171396,29.8233335 11.0666667,29.8233335 L11.0666667,29.8233335 L23.7906939,29.8222289 C23.8004164,29.8218553 23.8101862,29.8216668 23.8200001,29.8216668 L23.8486667,29.823 L28.9350001,29.8233335 C30.2055455,29.8233335 31.2450456,28.8367727 31.329826,27.609522 L31.3354106,27.4481422 L31.3293607,27.2529336 C31.2880301,26.6292837 31.0210852,26.0400787 30.5780034,25.5969969 L30.5780034,25.5969969 L29.50967,24.5286635 C28.7439981,23.7629916 28.3133335,22.7238848 28.3133335,21.6416668 L28.3133335,21.6416668 L28.3134279,16.9919039 L28.3098332,16.759466 C28.1934023,13.0970787 25.1864454,10.1783334 21.5116668,10.1783334 L21.5116668,10.1783334 Z M20.0000001,5.75000002 C18.7795808,5.75000002 17.7813801,6.69770708 17.7003155,7.89717688 L17.6950001,8.05500003 L17.6952875,8.7158769 C17.9568453,8.69103758 18.2219393,8.67833337 18.4900001,8.67833337 L18.4900001,8.67833337 L21.5116668,8.67833337 C21.7792577,8.67833337 22.0439466,8.69101238 22.3051575,8.71580951 L22.3050001,8.05500003 C22.3050001,6.7819079 21.273481,5.75000002 20.0000001,5.75000002 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                  </g>\n              </svg>\n            </div>\n          </div>'),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(h),i&&"onBell"==this.bellStatus&&this.jSPlugin.pause()}setTimeout((function(){var t=e.decoderState.state,i=t.isEditing,n=t.rejection;"onBell"!=e.bellStatus||n||(e.removeBellRing(),i||e.answerOvertime())}),this.maxBellTime)}}},{key:"removeBellRing",value:function(){document.getElementById("bellring")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring")),document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}},{key:"getMiniCallTimeUrl",value:function(){if(console.log("--------------getMiniCallTimeUrl"),-1!==this.jSPlugin.url.indexOf("hd.live")?this.recUrl=this.jSPlugin.url.replace("hd.live","rec"):this.recUrl=this.jSPlugin.url.replace("live","rec"),this.jSPlugin.callTime){var e=parseInt(this.jSPlugin.callTime),t=e+5e3,i=e-1e4,n=new Date(i).Format("yyyyMMddhhmmss"),a=new Date(t).Format("yyyyMMddhhmmss");this.recUrl="".concat(this.recUrl,"?begin=").concat(n,"&end=").concat(a),console.log("recurl="+this.recUrl)}}},{key:"initMiniRec",value:function(){var e=this,t=this,i=this.videoWidth,n=i/375,a=1.8*i,o=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(o=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+.1*a+6);var r=o+this.videoHeight+10*n;if(console.log(o),document.getElementById("miniRecbox"))document.getElementById("miniRecbox")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox")),document.getElementById("miniClose")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose")),this.initMiniRec();else{var s=document.createElement("div");s.id="miniRecbox",s.style="-webkit-border-radius: 8px;border-radius: 8px;overflow: hidden;position: absolute;top: ".concat(r,"px;right: ").concat(9*n,"px;"),s.innerHTML='<div id="miniRec"></div>',document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(s),this.getMiniCallTimeUrl();var l={domain:"https://open.ys7.com"};this.miniRecPlayer=new an({id:"miniRec",width:160*n,height:90*n,template:"miniRec",url:this.recUrl,accessToken:this.jSPlugin.accessToken,handleError:function(i){console.log("小窗口handleError------------",i),i&&6701==i.retcode?(e.miniRecNum=e.miniRecNum+1,console.log("小窗口miniRecNum-----------------",e.miniRecNum),e.miniRecNum<5?t.miniRecPlayer.changePlayUrl({type:"miniRec"}):(console.log("小窗口------------------已播放5次，关闭小窗口"),t.miniRecCloseClick())):(console.log("小窗口------------------播放失败，关闭小窗口"),t.miniRecCloseClick())},env:this.jSPlugin.env||l});var d=document.createElement("div");d.id="miniClose",d.style="position: absolute;top: ".concat(r+8,"px;right: ").concat(16*n,"px;"),d.innerHTML='<div id="miniClose-btn" style="width: '.concat(24*n,"px;height: ").concat(24*n,'px;display: flex;align-items: center;justify-content: center;border-radius: 50%;background: rgba(0,0,0,0.1);">\n          <svg width="').concat(24*n,'px" height="').concat(24*n,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title>close</title>\n              <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="common/Close/Dark">\n                      <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                      <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#fff" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </svg>\n        </div>'),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(d),document.getElementById("miniClose-btn").onclick=function(){t.miniRecCloseClick()}}}},{key:"initMiniImageRec",value:function(){console.log("initMiniImageRec");var e=this.videoWidth,t=e/375,i=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(i=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+26);var n=i+this.videoHeight+10*t;if(document.getElementById("miniRecbox"))document.getElementById("miniRecbox").style.top=n+"px",document.getElementById("miniClose").style.top=n+8+"px";else{var a=document.createElement("div");a.id="miniRecbox",a.style="-webkit-border-radius: 8px;border-radius: 8px;overflow: hidden;position: absolute;\n        top: ".concat(n,"px;\n        right: ").concat(9*t,"px;\n        user-select: none;\n        "),a.innerHTML='<div id="miniRec" style="width: '.concat(160*t,"px;height: ").concat(90*t,'px;display: flex;align-items: center;justify-content: center;">\n          <embed id="miniRec-embed" style="z-index: 3;position: absolute;width: ').concat(160*t,"px;height: ").concat(90*t,'px;" type="image/svg+xml" src="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg" />\n          <div style="color: #FFFFFF;font-size: 12px;z-index: 4;">示意小窗位置</div>\n        </div>'),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(a);var o=document.createElement("div");o.id="miniClose",o.style="z-index: 4;position: absolute;top: ".concat(n+8,"px;right: ").concat(16*t,"px;"),o.innerHTML='<div id="miniClose-btn" style="width: '.concat(24*t,"px;height: ").concat(24*t,'px;display: flex;align-items: center;justify-content: center;border-radius: 50%;">\n          <svg width="').concat(24*t,'px" height="').concat(24*t,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title>close</title>\n              <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="common/Close/Dark">\n                      <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                      <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#fff" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </svg>\n        </div>'),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(o),document.getElementById("miniClose-btn").onclick=function(){}}}},{key:"miniRecCloseClick",value:function(){document.getElementById("miniRecbox")&&(console.log("---------------------miniRecCloseClick"),"rec"==this.miniRecStatus&&(this.miniRecPlayer&&this.miniRecPlayer.stop(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose")),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox"))))}},{key:"miniRecSwitchClick",value:function(){console.log("---------------小窗口切换");var e=this.decoderState.state.isEditing,t=this.videoWidth,i=t/375,n=1.8*t,a=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(a=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+.1*n+6),console.log("headerHeight-------",a);var o=a+this.videoHeight+10*i;if(console.log("videoTop-------",o),"rec"==this.miniRecStatus){this.miniRecStatus="live",e?(document.getElementById("miniRec-embed").style.width=this.jSPlugin.width+"px",document.getElementById("miniRec-embed").style.height=this.jSPlugin.height+"px",document.getElementById("miniRec").style.width=this.jSPlugin.width+"px",document.getElementById("miniRec").style.height=this.jSPlugin.height+"px"):this.miniRecPlayer.reSize(this.jSPlugin.width,this.jSPlugin.height),this.jSPlugin.reSize(160*i,90*i);var r=this.videoHeight+10*i,s=.2*n-90*i-10*i;document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.width=this.videoWidth+"px",document.getElementById("".concat(this.jSPlugin.id)).style.marginTop=r+"px",document.getElementById("".concat(this.jSPlugin.id)).style.marginLeft=t-160*i-9+"px",document.getElementById("".concat(this.jSPlugin.id)).style.overflow="hidden",document.getElementById("".concat(this.jSPlugin.id)).style.borderRadius="8px",document.getElementById("miniRecbox").style.top=a+"px",document.getElementById("miniRecbox").style.left="0",document.getElementById("miniRecbox").style.right="0",document.getElementById("miniRecbox").style.borderRadius="0px",document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop=s+"px"}else console.log(this.jSPlugin.width),this.miniRecStatus="rec",e?(document.getElementById("miniRec-embed").style.width=160*i+"px",document.getElementById("miniRec-embed").style.height=90*i+"px",document.getElementById("miniRec").style.width=160*i+"px",document.getElementById("miniRec").style.height=90*i+"px"):this.miniRecPlayer.reSize(160*i,90*i),this.jSPlugin.reSize(this.videoWidth,this.videoHeight),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.width=this.videoWidth+NaN,document.getElementById("".concat(this.jSPlugin.id)).style.marginTop="0",document.getElementById("".concat(this.jSPlugin.id)).style.marginLeft="0",document.getElementById("".concat(this.jSPlugin.id)).style.overflow="hidden",document.getElementById("".concat(this.jSPlugin.id)).style.borderRadius="0px",document.getElementById("miniRecbox").style.top=o+"px",document.getElementById("miniRecbox").style.right="9px",document.getElementById("miniRecbox").style.left="auto",document.getElementById("miniRecbox").style.borderRadius="8px",document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop=.2*n+"px"}},{key:"matchBtn",value:function(e,t){var i=this,n=this.themeData,a=n.header,o=n.footer,r=this.decoderState.state,s=r.mute,l=r.rejection;document.documentElement.clientHeight;var d=this.videoWidth,c=d/375,u=this.videoWidth/375||1,h={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},x=a[this.bellStatus].btnList.findIndex((function(t){return t.iconId===e}));-1===x?(h.color=o[this.bellStatus].color,h.backgroundColor=o[this.bellStatus].backgroundColor,h.activeColor=o[this.bellStatus].activeColor):(h.color=a[this.bellStatus].color,h.backgroundColor=a[this.bellStatus].backgroundColor,h.activeColor=a[this.bellStatus].activeColor);var f=this.videoWidth/4;switch(e){case"ringStatus":return h.title=this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,h.id=e,h.domString='<span id="header-onBell-ringStatus" style="color:'.concat(t.color||"#2C2C2C",";font-size: ").concat(24*u,'px;display: block;font-weight: 600;" >').concat(this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,"</span>"),h.onclick=function(){},h;case"deviceCategory":return h.title="设备名称",h.id=e,h.domString='<span id="header-onBell-deviceCategory" \n          style="color:'.concat(t.color||"#2C2C2C",";\n          font-size: ").concat(14*u,"px;\n          padding-top: ").concat(5*u,'px;\n          display: block;\n          max-width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),h.onclick=function(){},h;case"callStatus":return h.title="通话中",h.id=e,h.domString='<span id="header-onCall-ringStatus" style="color:'.concat(t.color||"#2C2C2C",";font-size: ").concat(24*u,'px;display: block;font-weight: 600;" >通话中</span>'),h.onclick=function(){},h;case"deviceCategory":return h.title="设备名称",h.id=e,h.domString='<span id="header-onCall-deviceCategory" \n          style="color:'.concat(t.color||"#2C2C2C",";\n          font-size: ").concat(14*u,"px;\n          padding-top: ").concat(5*u,'px;\n          display: block;\n          max-width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),h.onclick=function(){},h;case"rejection":return h.title="拒绝",h.id=e,h.domString='<div style="width: '.concat(.66*f,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(.66*f,"px;height: ").concat(.66*f,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.4*f,'px" height="').concat(.4*f,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>拒绝</title>\n                        <g id="icon/拒绝" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*f,'px;user-select: none;">拒绝</div>\n            </div>'),h.onclick=function(){var e=i,t=i.decoderState.state,n=t.play,a=t.isEditing,o=t.rejection;if(a||o)return!1;console.log("拒绝"),n&&i.jSPlugin.stop(),i.removeBellRing(),i.setDecoderState({play:!1,rejection:!0}),e.miniRecCloseClick(),i.rejectionStatusDispose(),"function"===typeof i.jSPlugin.hangUpCallback&&i.jSPlugin.hangUpCallback("rejection")},h;case"quickReply":return h.title="快捷回复",h.id=e,h.domString='<div id="'.concat(this.jSPlugin.id,'-btn-quickReply" style="width: ').concat(126*c,"px;height: ").concat(40*c,"px;color:").concat(l?"rgba(44,44,44,0.5)":h.color,';background: #F8F8F8;border-radius: 20px;display: flex;flex-direction: row;align-items: center;justify-content: center;-webkit-tap-highlight-color:transparent;">\n                <div>\n                  <svg width="').concat(24*c,'px" height="').concat(24*c,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                      <title>快捷回复</title>\n                      <g id="icon/H5快捷回复" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                          <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                          <path d="M10.7238197,2.25008794 C16.2230834,2.09766093 20.7496,6.50749909 20.7496,11.9958 C20.7496,13.4362841 20.4368194,14.8344518 19.8413577,16.1117061 L19.9440524,15.8792521 L21.0527769,21.184554 C21.1496277,21.6485507 20.8013031,22.0657304 20.3577211,22.0873894 L20.2613374,22.0858497 L20.1628027,22.0714397 L14.866,20.946 L14.7518767,20.9973203 C13.6930577,21.439776 12.5585243,21.69208 11.3902258,21.7381162 L11.3902258,21.7381162 L10.9996,21.7458 C5.51196728,21.7458 1.10147008,17.2189531 1.25388722,11.7200456 C1.39490345,6.62610538 5.62990538,2.39110345 10.7238197,2.25008794 Z M11.0183931,3.74628651 L10.7653544,3.74951278 C6.46729462,3.86849655 2.87229655,7.46349462 2.75331206,11.7615803 C2.62431432,16.4155628 6.35610614,20.2458 10.9996,20.2458 C12.2165433,20.2458 13.3936843,19.9831552 14.4692454,19.4827855 C14.6166569,19.4142071 14.7823612,19.395387 14.9413973,19.4291603 L14.9413973,19.4291603 L19.349,20.365 L18.4274231,15.948046 C18.4026128,15.8291836 18.4071487,15.7066932 18.4398273,15.5909727 L18.4398273,15.5909727 L18.4818423,15.4778939 C18.9851908,14.3982208 19.2496,13.216279 19.2496,11.9958 C19.2496,7.35166383 15.4197191,3.62050444 10.7653544,3.74951278 Z M10.9996,10.7498 C11.6896,10.7498 12.2496,11.3098 12.2496,11.9998 C12.2496,12.6898 11.6896,13.2498 10.9996,13.2498 C10.3096,13.2498 9.7496,12.6898 9.7496,11.9998 C9.7496,11.3098 10.3096,10.7498 10.9996,10.7498 Z M6.9996,10.7498 C7.6896,10.7498 8.2496,11.3098 8.2496,11.9998 C8.2496,12.6898 7.6896,13.2498 6.9996,13.2498 C6.3096,13.2498 5.7496,12.6898 5.7496,11.9998 C5.7496,11.3098 6.3096,10.7498 6.9996,10.7498 Z M14.9996,10.7498 C15.6896,10.7498 16.2496,11.3098 16.2496,11.9998 C16.2496,12.6898 15.6896,13.2498 14.9996,13.2498 C14.3096,13.2498 13.7496,12.6898 13.7496,11.9998 C13.7496,11.3098 14.3096,10.7498 14.9996,10.7498 Z" id="形状结合" fill="').concat(l?"rgba(44,44,44,0.5)":"#2c2c2c",'" fill-rule="nonzero"></path>\n                      </g>\n                  </svg>\n                </div>\n                <div style="margin-left: 5px;user-select: none;font-size:14px">快捷回复<div>\n            </div>'),h.onclick=function(){var e=i.decoderState.state,t=e.isEditing,n=e.rejection;if(t||n)return!1;console.log("快捷回复"),i.switchFooter("quickReply"),i.quickReplyEle=new mt(i.jSPlugin,i.switchFooter,i.videoWidth)},h;case"answer":return h.title="接听",h.id=e,h.domString='<div style="width: '.concat(.66*f,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(.66*f,"px;height: ").concat(.66*f,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.4*f,'px" height="').concat(.4*f,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>接听</title>\n                        <g id="icon/接听" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M15.7728281,19.6822968 C13.2528132,17.165123 10.8435994,14.2473605 11.9999084,13.0938925 C13.6505608,11.4432401 15.0881341,10.4261428 12.1646895,6.78675259 C9.23840386,3.14452132 7.28659974,5.94011849 5.68708632,7.53963191 C3.84324225,9.38631703 5.59049048,16.2645088 12.3891328,23.0659922 C19.1877751,29.8646345 26.0688079,31.6147238 27.9154931,29.7680386 C29.5150065,28.1685252 32.3106036,26.2195622 28.6712134,23.2932765 C25.0318232,20.3669909 24.0147259,21.8045642 22.3640735,23.4580576 C21.2077645,24.6086845 18.2928431,22.1994707 15.7728281,19.6822968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.727936, 17.728157) rotate(-360.000000) translate(-17.727936, -17.728157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*f,'px;user-select: none;">接听</div>\n            </div>'),h.onclick=function(){var e=i.decoderState.state,n=e.play,r=e.isEditing,s=e.talk,l=e.sound,d=e.rejection;if(r||d)return!1;console.log("接听"),i.jSPlugin.pluginStatus.loadingClear(),i.bellStatus="onCall",i.switchFooter("onCall"),o[i.bellStatus].btnList.map((function(e,t){e.isrender&&i.renderFooter(e.iconId,e)})),a[i.bellStatus].btnList.map((function(e,t){e.isrender&&i.renderHeader(e.iconId,e)}));var c=document.getElementById("".concat(i.jSPlugin.id,"-header-onBell"));c&&c.parentElement.removeChild(c),1==i.themeData.customConfig.bellPoster&&(document.getElementById("bellring-icon")&&document.getElementById("".concat(i.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),i.jSPlugin.setPoster("")),i.removeBellRing(),i.miniRecCloseClick(),n||(i.jSPlugin.pluginStatus.loadingStart(i.jSPlugin.id),i.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"}),i.jSPlugin.play(),i.setDecoderState({play:!n})),s||1!=i.themeData.customConfig.defaultMicro||(i.setDecoderState({talk:!0,mute:!1}),l&&i.jSPlugin.closeSound(),i.jSPlugin.Talk.startTalk()),i.setDecoderState({sound:!1}),0==i.themeData.customConfig.defaultMicro&&(i.muteCommon(t),i.jSPlugin.openSound(),i.setDecoderState({sound:!0})),i.maxTalkTime=1e3*i.themeData.customConfig.maxTalkTime*60;var u=i;setTimeout((function(){s&&(console.log("结束对讲"),u.setDecoderState({talk:!1}),u.jSPlugin.Talk.stopTalk()),n&&(u.jSPlugin.stop(),u.setDecoderState({play:!n})),i.rejectionStatusDispose(),i.remoteUnlockEle&&i.remoteUnlockEle.closeRemoteUnlock(),"function"===typeof i.jSPlugin.hangUpCallback&&i.jSPlugin.hangUpCallback("hangUp")}),i.maxTalkTime)},h;case"remoteUnlock":return h.title="远程开锁",h.id=e,h.domString='<div style="width: '.concat(.66*f,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(.66*f,"px;height: ").concat(.66*f,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.4*f,'px" height="').concat(.4*f,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>开锁</title>\n                        <g id="icon/开锁" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M18,4 C21.3137085,4 24,6.6862915 24,10 L24,10 L24,19.787 L29.5,19.7875 C30.0522847,19.7875 30.5,20.2352153 30.5,20.7875 C30.5,21.3397847 30.0522847,21.7875 29.5,21.7875 L24,21.787 L24,26 C24,29.2383969 21.4344251,31.8775718 18.2249383,31.9958615 L18,32 C14.6862915,32 12,29.3137085 12,26 L12,26 L12,10 C12,6.6862915 14.6862915,4 18,4 Z M18,6 C15.790861,6 14,7.790861 14,10 L14,10 L14,26 C14,28.209139 15.790861,30 18,30 C20.209139,30 22,28.209139 22,26 L22,26 L22,21.787 L18.5,21.7875 C17.9477153,21.7875 17.5,21.3397847 17.5,20.7875 C17.5,20.2352153 17.9477153,19.7875 18.5,19.7875 L22,19.787 L22,10 C22,7.85780461 20.3160315,6.10892112 18.1996403,6.00489531 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*f,'px;user-select: none;">远程开锁</div>\n            </div>'),h.onclick=function(){var e=i.decoderState.state,t=e.isEditing;e.play;var n=e.rejection;if(t||"onBell"==i.bellStatus||n)return!1;console.log("远程开锁"),i.switchFooter("remoteUnlock"),i.remoteUnlockEle=new _t(i.jSPlugin,i.switchFooter,i.videoWidth)},h;case"mute":return h.title="静音",h.id=e,h.domString='<div style="width: '.concat(.66*f,'px;display: flex;flex-direction: column;align-items: center;">\n                <div id="').concat(this.jSPlugin.id,'-icon-mute" style="width: ').concat(.66*f,"px;height: ").concat(.66*f,"px;border-radius: 50%;border: 1px solid ").concat(l?"#cccccc":t.backgroundColor,";background: ").concat(l&&s?"#cccccc":"#ffffff",';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.4*f,'px" height="').concat(.4*f,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>icon/静音</title>\n                        <g id="icon/静音" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path id="icon-mute-path" d="M29.2988305,7.56559704 C29.8540627,8.1086468 29.8980234,8.97727504 29.4240597,9.57172938 L29.3223594,9.6867869 L22.585,16.574 L22.5859243,26.0592702 C22.5859243,26.9500521 21.8638029,27.6721735 20.973021,27.6721735 C20.6007147,27.6721735 20.2398727,27.5433734 19.9517149,27.3076254 L15.583,23.733 L10.4341733,28.9987008 C9.85492024,29.5909486 8.9052312,29.6014828 8.31298346,29.0222298 C7.75775121,28.47918 7.71379057,27.6105518 8.18775419,27.0160974 L8.28945454,26.9010399 L27.1776406,7.58912597 C27.7568937,6.99687823 28.7065827,6.98634397 29.2988305,7.56559704 Z M22.2503608,7.16816759 C22.4679282,7.45036017 22.5859243,7.79665625 22.5859243,8.15298221 L22.585,9.899 L10.778,21.971 L9.47580645,21.9713498 C7.69424274,21.9713498 6.25,20.5271071 6.25,18.7455434 L6.25,15.65293 C6.25,13.8713663 7.69424274,12.4271235 9.47580645,12.4271235 L12.787,12.427 L19.9882064,6.87564241 C20.6936617,6.33174431 21.7064627,6.46271229 22.2503608,7.16816759 Z" id="形状结合" fill="').concat(s?"#ffffff":l?"#cccccc":t.backgroundColor,'"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*f,'px;user-select: none;">静音</div>\n            </div>'),h.onclick=function(){var e=i.decoderState.state,n=e.talk,a=e.sound;e.play;var o=e.rejection;if(o)return!1;console.log("静音"),n?(console.log("结束对讲"),i.setDecoderState({talk:!1,mute:!0},t.backgroundColor),i.jSPlugin.Talk.stopTalk(),i.jSPlugin.openSound(),i.setDecoderState({sound:!0})):(console.log("开始对讲"),i.setDecoderState({talk:!0,mute:!1},t.backgroundColor),a&&(i.jSPlugin.closeSound(),i.setDecoderState({sound:!1})),i.jSPlugin.Talk.startTalk())},h;case"hangUp":return h.title="挂断",h.id=e,h.domString='<div style="width: '.concat(.66*f,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(.66*f,"px;height: ").concat(.66*f,"px;border-radius: 50%;background: ").concat(l?"#CCCCCC":t.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(.4*f,'px" height="').concat(.4*f,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>挂断</title>\n                        <g id="icon/挂断" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(.1*f,'px;user-select: none;">挂断</div>\n            </div>'),h.onclick=function(){var e=i,t=i.decoderState.state,n=t.talk,a=t.play,o=t.rejection;if(o)return!1;n&&(console.log("结束对讲"),i.setDecoderState({talk:!1}),i.jSPlugin.Talk.stopTalk()),a&&(i.jSPlugin.stop(),i.setDecoderState({play:!a})),(a||n)&&(e.miniRecCloseClick(),console.log("挂断"),i.rejectionStatusDispose(),"function"===typeof i.jSPlugin.hangUpCallback&&i.jSPlugin.hangUpCallback("hangUp"))},h;default:return h}}},{key:"answerOvertime",value:function(){this.toastCustom.initToastContent("应答超时");var e=this.decoderState.state.play;console.log("应答超时"),e&&this.jSPlugin.stop(),this.setDecoderState({play:!1,rejection:!0}),this.miniRecCloseClick(),this.rejectionStatusDispose(),this.quickReplyEle&&this.quickReplyEle.closeQuickReplyEle(),"function"===typeof this.jSPlugin.hangUpCallback&&this.jSPlugin.hangUpCallback("rejection")}},{key:"rejectionStatusDispose",value:function(){var e=this,t=this.themeData.footer,i=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),a=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")),o=document.getElementById("header-".concat(this.bellStatus,"-ringStatus"));"onBell"==this.bellStatus?(i.innerHTML="",a.innerHTML="",i.style.color="#2C2C2C"):(n.innerHTML="",n.style.color="#2C2C2C"),console.log("rejectionStatusDispose"),this.setDecoderState({rejection:!0}),t[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderFooter(t.iconId,t)})),o.innerText="通话已结束",this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:!0,type:2})}},{key:"userNoDevice",value:function(){var e=this;this.removeBellRing(),this.setDecoderState({rejection:!0});var t=this.themeData.footer,i=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),a=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn"));"onBell"==this.bellStatus?(i.innerHTML="",a.innerHTML="",i.style.color="#2C2C2C"):(n.innerHTML="",n.style.color="#2C2C2C"),console.log("userNoDevice"),this.setDecoderState({rejection:!0}),t[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderFooter(t.iconId,t)})),this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:!0,type:2})}},{key:"renderHeader",value:function(e,t){var i=this,n=this.matchBtn(e,t);if(document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content"))){var a=document.createElement("span");a.innerHTML="".concat(n.domString),document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content")).appendChild(a)}else{var o=document.createElement("div");o.id="".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus),o.style="max-width:50%;position:relative;",o.innerHTML='<span id="'.concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,'-content" style="display:inline-block;height:auto;";>\n            ').concat(n.domString,"\n          </span>"),o.onclick=function(e){if(i.decoderState.state.isEditing)return!1;n.onclick(e)},document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(o)}}},{key:"renderFooter",value:function(e,t){var i=this,n=this.decoderState.state.mute;if("remoteUnlock"==e&&this.jSPlugin.capacity&&(!this.jSPlugin.capacity["support_unlock"]||0==this.jSPlugin.capacity["support_unlock"]))return!1;var a=this.matchBtn(e,t),o=this.videoWidth/4,r=document.createElement("div");if(r.className="theme-icon-item","quickReply"!==a.id&&(r.style="width:".concat(.66*o,"px;padding:0 ").concat(.12*o,"px;box-sizing: content-box;-webkit-tap-highlight-color:transparent;")),r.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(a.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(a.id,'-content" title="').concat(a.title,'" style="display: flex;align-items: center;position:relative;">')).concat(a.domString,"</div>")+"</span>",r.onclick=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;a.onclick(e)},a.onmouseenter&&(r.onmouseenter=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;a.onmouseenter(e)}),a.onmouseleave&&(r.onmouseleave=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;a.onmouseleave(e)}),"quickReply"!=e){var s=document.createElement("span");s.className="icon-move left",s.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(a.id,'-left" title="左移" style="height: 40px;position: absolute;top: calc(50% - 33px);left: 1px;display: inline-block;border-radius: 2px;overflow: hidden;cursor: pointer;">\n          <svg width="10px" height="40px" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-614.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头左" transform="translate(0.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(1.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n          </span>'),s.onclick=function(){i.editIcon(a.id,"left","footer")},r.appendChild(s);var l=document.createElement("span");l.className="icon-move right",l.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(a.id,'-right" class="ezuikit-theme-icon" title="右移" style="height: 40px;position: absolute;top: calc(50% - 33px);left: calc(100% - 11px);display: inline-block;border-radius: 2px;overflow: hidden;cursor: pointer;">\n          <svg width="10px" height="40px" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-684.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头右" transform="translate(70.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(5.500000, 20.000000) scale(-1, 1) translate(-5.500000, -20.000000) translate(2.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n          </span>'),l.onclick=function(){i.editIcon(a.id,"right","footer")},r.appendChild(l)}if("answer"==e||"rejection"==e||"hangUp"==e);else{var d=document.createElement("span");d.className="icon-move close",d.innerHTML='<span id="'.concat(a.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -6px;right: -2px;cursor: pointer;">\n            <svg width="16px" height="16px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title></title>\n                <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    <g id="H5呼叫模板" transform="translate(-680.000000, -5006.000000)">\n                        <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                            <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                                <g id="编组" transform="translate(170.000000, 0.000000)">\n                                    <g id="关闭1" transform="translate(66.000000, 0.000000)">\n                                        <rect id="矩形" fill-rule="nonzero" x="0" y="0" width="18" height="18"></rect>\n                                        <path d="M9,1.125 C4.65117188,1.125 1.125,4.65117188 1.125,9 C1.125,13.3488281 4.65117188,16.875 9,16.875 C13.3488281,16.875 16.875,13.3488281 16.875,9 C16.875,4.65117188 13.3488281,1.125 9,1.125 Z M11.9074219,11.9917969 L10.7472656,11.9865234 L9,9.90351562 L7.25449219,11.9847656 L6.09257813,11.9900391 C6.01523438,11.9900391 5.95195313,11.9285156 5.95195313,11.8494141 C5.95195313,11.8160156 5.96425781,11.784375 5.98535156,11.7580078 L8.27226563,9.03339844 L5.98535156,6.31054687 C5.96425781,6.28417969 5.95195313,6.25253906 5.95195313,6.21914062 C5.95195313,6.14179687 6.01523438,6.07851562 6.09257813,6.07851562 L7.25449219,6.08378906 L9,8.16679687 L10.7455078,6.08554688 L11.9056641,6.08027344 C11.9830078,6.08027344 12.0462891,6.14179687 12.0462891,6.22089844 C12.0462891,6.25429687 12.0339844,6.2859375 12.0128906,6.31230469 L9.72949219,9.03515625 L12.0146484,11.7597656 C12.0357422,11.7861328 12.0480469,11.8177734 12.0480469,11.8511719 C12.0480469,11.9285156 11.9847656,11.9917969 11.9074219,11.9917969 Z" id="形状" fill="#595959"></path>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </svg>\n          </span>'),d.onclick=function(){i.editIcon(a.id,"delete","footer")},r.appendChild(d)}"onCall"==this.bellStatus?document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).appendChild(r):(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(r),"quickReply"===a.id&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).appendChild(r)),this.decoderState.state.isEditing&&"mute"==e&&"onCall"==this.bellStatus&&(0!=this.themeData.customConfig.defaultMicro||n?this.setDecoderState({mute:!1},t.backgroundColor):this.setDecoderState({mute:!0},t.backgroundColor))}},{key:"switchFooter",value:function(e){var t=this.themeData.footer;switch(e){case"onBell":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"))?"none"==document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="flex"):(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="flex");break;case"onCall":document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="flex",this.themeData&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=t[this.bellStatus].color);break}}},{key:"initThemeData",value:function(){var e=this;console.log("-------------initThemeData");var t=this.themeData,i=t.header,n=t.footer,a=this.decoderState.state.isEditing,o=this.videoWidth,r=o/375,s=1.8*o,l=this.jSPlugin.id;if(this.isNeedRenderHeader=G.findIndex(i[this.bellStatus].btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderFooter=G.findIndex(n[this.bellStatus].btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width:100%;overflow:hidden;justify-content: center;'></div>");else{var c,u=document.createElement("div");u.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),u.setAttribute("class","header-controls"),u.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex;width:100%;overflow:hidden;justify-content: center;'></div>"),console.log(this.jSPlugin.height),this.jSPlugin.height;var h=(c={display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:"100%",position:"relative","margin-bottom":.1*s+"px","align-items":"center","text-align":"center","font-size":"24ox"},d(c,"color","#2c2c2c"),d(c,"margin-top","6px"),c);u.style=yt(h),document.getElementById("".concat(l,"-wrap")).insertBefore(u,document.getElementById(l));var x=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(x)}),50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));if(this.jSPlugin.height,this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="".concat(.2*s,"px"),"onCall"==this.bellStatus?document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls-quickReplyBtn" class="footer-controls" style=\'min-height: ').concat(40*r,"px;margin-bottom: ").concat(40*r,"px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>\n              <div id=\"").concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              '):document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls-quickReplyBtn" class="footer-controls" style=\'min-height: ').concat(40*r,"px;margin-bottom: ").concat(40*r,"px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>\n              <div id=\"").concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              '));else{var f=document.createElement("div");f.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),f.setAttribute("class","ez-iframe-footer-container");var p={position:"relative","margin-top":.2*s+"px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%","align-items":"center","font-size":"12px"};f.style=yt(p),f.innerHTML='\n            <div id="'.concat(this.jSPlugin.id,'-audioControls-quickReplyBtn" class="footer-controls" style=\'min-height: ').concat(40*r,"px;margin-bottom: ").concat(40*r,"px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>\n            <div id=\"").concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            '),T(f,document.getElementById(l))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&i[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderHeader(t.iconId,t)})),this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=n[this.bellStatus].backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=n[this.bellStatus].color,n[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.renderFooter(t.iconId,t)}))),1!=this.themeData.customConfig.bellPoster||a)this.jSPlugin.setPoster("");else{this.jSPlugin.poster="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg";var m=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(m),e.jSPlugin.setPoster(e.jSPlugin.poster))}),50)}if(this.activeThemeStatus){this.initBellRing();var _=this.checkIsAppleDevice()||!1;_?window.addEventListener("touchstart",this.autoPlayRing):window.addEventListener("click",this.autoPlayRing)}this.inited=!0,this.getCallDeviceInfo()}},{key:"checkIsAppleDevice",value:function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=e.indexOf("iPad")>-1,n=e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1;return!!(t||i||n)}},{key:"renderThemeData",value:function(){var e=this,t=this.themeData,i=t.header,n=t.footer,a=this.decoderState.state.isEditing;if(this.isNeedRenderHeader&&i&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=i[this.bellStatus].color.replace("-diy",""),i[this.bellStatus].btnList.map((function(t,i){t.isrender&&e.setDecoderState(d({},t.iconId,e.decoderState.state[t.iconId]))}))),this.isNeedRenderFooter&&n)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=n[this.bellStatus].backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=n[this.bellStatus].color.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=n[this.bellStatus].color.replace("-diy",""),n[this.bellStatus].btnList.map((function(t,i){if(t.isrender&&e.setDecoderState(d({},t.iconId,e.decoderState.state[t.iconId])),console.log("-------------activeThemeStatus"),0==i&&!e.themeInited&&e.activeThemeStatus)var n=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(n),1!=e.themeData.customConfig.bellPoster||a?e.jSPlugin.play():e.jSPlugin.pluginStatus.loadingClear(),e.themeInited=!0)}),50)})),-1!==this.jSPlugin.url.indexOf("hd.live")&&this.setDecoderState({hd:!0}),this.themeData.autoFocus>0&&(this.autoFocus=parseInt(this.themeData.autoFocus),this.startAutoFocus(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",(function(){e.stopAutoFocus()}))),this.setDecoderState({cloudRec:"cloud.rec"===M(this.jSPlugin.url).type,rec:"rec"===M(this.jSPlugin.url).type,type:M(this.jSPlugin.url).type});else if(!this.themeInited&&this.activeThemeStatus)var o=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(o),e.themeData&&e.themeData.customConfig&&1==e.themeData.customConfig.bellPoster&&!a?e.jSPlugin.pluginStatus.loadingClear():e.jSPlugin.play(),e.themeInited=!0)}),50);var r=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(r),e.jSPlugin.reSize(e.jSPlugin.params.width,e.jSPlugin.params.height))}),50);a||this.jSPlugin.isWebConsole?1==this.themeData.customConfig.miniWinRec?this.initMiniImageRec():this.miniRecCloseClick():setTimeout((function(){"onBell"==e.bellStatus&&e.jSPlugin.capacity&&1==e.jSPlugin.capacity["support_doorcall_playback"]&&(console.log("小窗口initMiniRec-------------设备能力集成功"),1==e.themeData.customConfig.miniWinRec&&(console.log("小窗口initMiniRec---------------画中画设置已开启"),(!e.deviceInfoData||e.deviceInfoData&&!e.deviceInfoData.isEncrypt)&&(console.log("小窗口initMiniRec---------------设备未加密"),e.miniRecNum=0,e.initMiniRec())))}),1e3)}},{key:"setThemeData",value:function(e,t){this.themeData=e,"onCall"==t&&(this.bellStatus="onCall")}},{key:"startAutoFocus",value:function(){var e=this,t=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout((function(){document.getElementById("".concat(e.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.pointerEvents="none")}),1e3*t)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.startAutoFocus()}},{key:"editIcon",value:function(e,t,i){console.log("编辑组件",e,t,i);var n=this.themeData;console.log("themeData",this.themeData);var a=this.themeData[i][this.bellStatus].btnList,o=G.findIndex(a,(function(t){return t.iconId===e})),r=a[o];switch(t){case"delete":a[o].isrender=0;break;case"right":for(var s=-1,l=o+1;l<a.length;l++)if(a[l].part===a[o].part&&1==a[l].isrender){s=l;break}-1!==s&&(a[o]=a[s],a[s]=r);break;case"left":for(var d=-1,c=o-1;c>=0;c--)if(a[c].part===a[o].part&&1==a[c].isrender){d=c;break}-1!==d&&(a[o]=a[d],a[d]=r);break}console.log("new btnList",a),n[i][this.bellStatus].btnList=a,this.jSPlugin.Theme.changeTheme(n)}},{key:"countTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var n=document.createElement("div");n.id=this.jSPlugin.id+"time-area",n.className="time-area",n.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(n)}if(this.countTimer&&clearInterval(this.countTimer),"add"===e){var a=t;document.getElementById(i.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval((function(){++a,document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML=o(a)}),1e3)}else"destroy"===e&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(i.jSPlugin.id+"time-area")&&(document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(i.jSPlugin.id+"time-area").style.display="none"));function o(e){var t=parseInt(e),i=0,n=0,a="00",o="00",r="00";return t>59&&(i=parseInt(t/60),t=parseInt(t%60),i>59&&(n=parseInt(i/60),i=parseInt(i%60))),a=parseInt(t)>9?parseInt(t):"0"+parseInt(t),o=parseInt(i)>9?parseInt(i):"0"+parseInt(i),r=parseInt(n)>9?parseInt(n):"0"+parseInt(n),n>0?r+":"+o+":"+a:i>0?o+":"+a:"00:"+a}}},{key:"editStart",value:function(e){console.log("----------editStart1");var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));document.getElementById("".concat(this.jSPlugin.id,"-headControl")),t&&t.setAttribute("class","footer-controls themeEditing"),i&&i.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(e){console.log("----------editEnd1");var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-headControl")),n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));i&&i.setAttribute("class","header-controls"),t&&t.setAttribute("class","footer-controls"),n&&n.setAttribute("class","footer-controls")}},{key:"fetchThemeData",value:function(e){var t=this;switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"miniRec":break;default:var i=function(e){0==e.meta.code&&e.data?(t.activeThemeStatus=!0,t.themeData=e.data,e.data.header&&(t.themeData.header=e.data.header,t.themeData.header[t.bellStatus].btnList=t.themeData.header[t.bellStatus].btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),e.data.footer&&(t.themeData.footer=e.data.footer,t.themeData.footer[t.bellStatus].btnList=t.themeData.footer[t.bellStatus].btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),t.jSPlugin.capacity?(t.initThemeData(),t.renderThemeData()):setTimeout((function(){t.initThemeData(),t.renderThemeData()}),300)):(t.activeThemeStatus=!1,t.jSPlugin.pluginStatus.loadingClear(),t.setDecoderState({rejection:!0}),"111021"==e.meta.code?(t.jSPlugin.pluginStatus.loadingSetText({text:"无效的模板id",color:"#fff",type:1}),t.activeThemeStatusTxt="无效的模板id"):"111023"==e.meta.code?(t.jSPlugin.pluginStatus.loadingSetText({text:"您的试用特权已到期，需前往轻应用控制台购买后使用。",color:"#fff",type:1}),t.activeThemeStatusTxt="试用特权已到期"):(t.jSPlugin.pluginStatus.loadingSetText({text:"模板未激活，请先在开放平台轻应用控制台购买模板",color:"#fff",type:1}),t.activeThemeStatusTxt="模板未激活"),t.themeData=vt.data,t.initThemeData(),t.renderThemeData())},n=function(){t.renderThemeData()};Qe(this.jSPlugin,e,i,n);break}}},{key:"getCallDeviceInfo",value:function(){var e=this;this.videoWidth;var t=function(t){200==t.code&&t.data&&(e.deviceInfoData=t.data,console.log("------------getDeviceInfo"),t.data.isEncrypt&&(console.log("小窗口miniRecCloseClick------------设备已加密"),e.miniRecCloseClick(),setTimeout((function(){e.jSPlugin.pluginStatus.loadingClear(),e.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})}),50)),document.getElementById("header-".concat(e.bellStatus,"-deviceCategory"))&&(document.getElementById("header-".concat(e.bellStatus,"-deviceCategory")).innerText=""+t.data.deviceName)),20018!=t.code||e.jSPlugin.isWebConsole||e.userNoDevice()};L(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:M(this.jSPlugin.url).deviceSerial},"",t)}},{key:"setHeaderText",value:function(e){console.log("setHeaderText");var t=this.videoWidth/375||1;document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content"))&&(document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(24*t,'px;display: block">').concat(e,'</span><span style="font-size: ').concat(14*t,"px;padding-top: ").concat(5*t,'px;display: block;">').concat(this.deviceInfoData&&this.deviceInfoData.category||"","</span>"))}}]),e}(),St=function(){function e(t){if(r(this,e),this.jSPlugin=t,this.videoWidth=t.width,this.autoFocus=0,this.autoFocusTimer=null,this.decoderState={state:{isEditing:!1,play:!1,sound:!1,recordvideo:!1,recordCount:"00:00",talk:!1,mute:!1,rejection:!1,cloudRec:"cloud.rec"===M(t.url).type,rec:"rec"===M(t.url).type,type:M(t.url).type}},console.log("matchEzopenUrl(jSPlugin.url)",M(t.url),this.decoderState.state),this.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),"undefined"!==typeof t.isMobile&&(this.isMobile=t.isMobile),this.themeData={},"themeData"==this.jSPlugin.themeId&&(this.themeData=this.jSPlugin.params.themeData),this.jSPlugin.themeId)switch(this.isMobile?this.call=new bt(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState):this.call=new ft(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState),this.jSPlugin.themeId){case"themeData":this.themeData=this.jSPlugin.params.themeData,this.call.initThemeData(),this.call.renderThemeData();break;default:this.call.fetchThemeData(this.jSPlugin.themeId);break}this.jSPlugin.Talk||(this.jSPlugin.Talk=new we(this.jSPlugin)),S("".concat(this.jSPlugin.staticPath,"/speed/speed.css")),S("".concat(this.jSPlugin.staticPath,"/css/theme.css"))}return l(e,[{key:"changeTheme",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"onBell";if("string"===typeof e)switch(this.jSPlugin.themeId=e,this.jSPlugin.themeId){case"pcLive":case"mobileCall":case"webCall":this.call.initThemeData(),this.call.renderThemeData();break;default:this.call.fetchThemeData(e);break}else"object"===o(e)&&(this.themeData=e,this.call.setThemeData(e,i),this.call.initThemeData(),this.call.renderThemeData(),this.decoderState.state.isEditing&&t&&this.call.editStart());this.jSPlugin&&this.jSPlugin.handleThemeChange&&this.jSPlugin.handleThemeChange(e)}},{key:"setDecoderState",value:function(e,t){var i=this,n=this.themeData;n.header,n.footer,Object.keys(e).map((function(n){switch(n){case"mute":document.getElementById("".concat(i.jSPlugin.id,"-icon-mute"))&&(console.log("mute"),e[n]?(document.getElementById("".concat(i.jSPlugin.id,"-icon-mute")).style.background=t,document.getElementById("".concat(i.jSPlugin.id,"-icon-mute")).style.border=" 1px solid ".concat(t),document.getElementById("icon-mute-path").style.fill="#ffffff"):(document.getElementById("".concat(i.jSPlugin.id,"-icon-mute")).style.background="#ffffff",document.getElementById("".concat(i.jSPlugin.id,"-icon-mute")).style.border="1px solid ".concat(t),document.getElementById("icon-mute-path").style.fill=t));break}i.decoderState.state=Object.assign(i.decoderState.state,e)}))}},{key:"startAutoFocus",value:function(){var e=this,t=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout((function(){document.getElementById("".concat(e.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.pointerEvents="none")}),1e3*t)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.startAutoFocus()}},{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"editIcon",value:function(e,t,i){console.log("编辑组件",e,t,i);var n=this.themeData;console.log("themeData",this.themeData);var a=this.themeData[i].btnList,o=G.findIndex(a,(function(t){return t.iconId===e})),r=a[o];switch(t){case"delete":if("rec"===e){if(-1===G.findIndex(a,(function(e){return"cloudRec"===e.iconId&&1==e.isrender})))return this.jSPlugin.Message&&this.jSPlugin.Message["default"]("必须选中一种存储介质"),!1}else if("cloudRec"===e&&-1===G.findIndex(a,(function(e){return"rec"===e.iconId&&1==e.isrender})))return this.jSPlugin.Message&&this.jSPlugin.Message["default"]("必须选中一种存储介质"),!1;a[o].isrender=0;break;case"right":for(var s=-1,l=o+1;l<a.length;l++)if(a[l].part===a[o].part&&1==a[l].isrender){s=l;break}-1!==s&&(a[o]=a[s],a[s]=r);break;case"left":for(var d=-1,c=o-1;c>=0;c--)if(a[c].part===a[o].part&&1==a[c].isrender){d=c;break}-1!==d&&(a[o]=a[d],a[d]=r);break}console.log("new btnList",a),n[i].btnList=a,this.changeTheme(n)}},{key:"countTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var n=document.createElement("div");n.id=this.jSPlugin.id+"time-area",n.className="time-area",n.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(n)}if(this.countTimer&&clearInterval(this.countTimer),"add"===e){var a=t;document.getElementById(i.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval((function(){++a,document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML=o(a)}),1e3)}else"destroy"===e&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(i.jSPlugin.id+"time-area")&&(document.getElementById(i.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(i.jSPlugin.id+"time-area").style.display="none"));function o(e){var t=parseInt(e),i=0,n=0,a="00",o="00",r="00";return t>59&&(i=parseInt(t/60),t=parseInt(t%60),i>59&&(n=parseInt(i/60),i=parseInt(i%60))),a=parseInt(t)>9?parseInt(t):"0"+parseInt(t),o=parseInt(i)>9?parseInt(i):"0"+parseInt(i),r=parseInt(n)>9?parseInt(n):"0"+parseInt(n),n>0?r+":"+o+":"+a:i>0?o+":"+a:"00:"+a}}},{key:"editStart",value:function(e){var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),n=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));n&&n.setAttribute("class","header-controls themeEditing"),t&&t.setAttribute("class","footer-controls themeEditing"),i&&i.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(e){var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),i=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));i&&i.setAttribute("class","header-controls"),t&&t.setAttribute("class","footer-controls"),this.setDecoderState({isEditing:!1})}},{key:"setDisabled",value:function(e){}},{key:"getDeviceInfo",value:function(){var e=this,t=this.videoWidth/1024||1,i=function(i){200==i.code&&i.data&&(i.data.isEncrypt&&setTimeout((function(){e.jSPlugin.pluginStatus.loadingClear(),e.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})}),50),document.getElementById("".concat(e.jSPlugin.id,"-deviceCategory-content"))&&(document.getElementById("".concat(e.jSPlugin.id,"-deviceCategory-content")).style.maxWidth="100%",document.getElementById("".concat(e.jSPlugin.id,"-deviceCategory-content")).style.overflow="hidden",document.getElementById("".concat(e.jSPlugin.id,"-deviceCategory-content")).style.textOverflow="ellipsis",document.getElementById("".concat(e.jSPlugin.id,"-deviceCategory-content")).style.whiteSpace="nowrap",document.getElementById("".concat(e.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(32*t,'px;display: block">有人按门铃</span><span style="font-size: ').concat(24*t,"px;padding-top: ").concat(16*t,'px;display: block;">').concat(i.data.category,"</span>")))};L(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:M(this.jSPlugin.url).deviceSerial},"",i)}}]),e}(),Ct=function(){function e(t){r(this,e),this.jSPlugin=t;var i=window["EZUIKIT_TIMER_INTERVAL_".concat(t.id)];i&&Object.keys(i).length>0&&this.resetTimer(),window["EZUIKIT_TIMER_INTERVAL_".concat(t.id)]={}}return l(e,[{key:"createInterval",value:function(e,t,i){var n=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];n[e]=setInterval(t,i)}},{key:"clearTimer",value:function(e){var t=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];t[e]&&(clearInterval(t[e]),delete t[e])}},{key:"resetTimer",value:function(){var e=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];for(var t in e)clearInterval(e[t]),delete e[t]}}]),e}(),wt=l((function e(t){var i=this;r(this,e),d(this,"initMap",(function(){var e=i,t=i.videoWidth;if(document.getElementById("".concat(i.jSPlugin.id,"-miniRecbox")))document.getElementById("".concat(i.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(i.jSPlugin.id,"-miniRecbox"))),i.initMap();else{var n=document.createElement("div");n.id="".concat(i.jSPlugin.id,"-miniRecbox"),n.style=";position: absolute;bottom:96px;right:0;",n.innerHTML='<div  id="'.concat(i.jSPlugin.id,'-mapbox" style="\n        width: ').concat(.3333*t,"px;\n        height: ").concat(.3333*t*.5625,'px;\n      "></div>'),document.getElementById("".concat(i.jSPlugin.id,"-wrap")).insertBefore(n,document.getElementById("".concat(i.jSPlugin.id,"-ez-iframe-footer-container"))),e.map=e.loadMap("".concat(i.jSPlugin.id,"-mapbox"))}return e.map})),d(this,"loadMap",(function(e){var t=new BMapGL.Map(e);return t.centerAndZoom(new BMapGL.Point(116.297611,40.047363),15),t.enableScrollWheelZoom(!0),t})),d(this,"createCircle",(function(e,t,n,a){var o=new BMapGL.Point(e,t),r=new BMapGL.Marker(o,{title:a});if(i.map.addOverlay(r),0!=n){var s=new BMapGL.Circle(new BMapGL.Point(e,t),n,{strokeColor:"#ff4d4f",strokeWeight:4,strokeOpacity:1,strokeStyle:"dashed",fillOpacity:0});i.map.addOverlay(s)}})),d(this,"createInspectPoints",(function(e){e.map((function(e){i.createCircle(e.longitude,e.latitude,e.radius,e.inspectPointName)}))})),d(this,"createPolygon",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#407AFF",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"solid",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"407AFF",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=[],d=e.split(";");d.map((function(e){var t=e.split(",");l.push(new BMapGL.Point(t[0],t[1]))})),i.inspectRange=new BMapGL.Polygon(l,{strokeColor:t,strokeWeight:a,strokeOpacity:o,strokeStyle:n,fillOpacity:s,fillColor:r}),i.map.addOverlay(i.inspectRange)})),d(this,"createTrack",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#18C796",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"solid",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:500,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]&&arguments[10],h=[];if(e.map((function(e){var t=!1;i.currentTrack.length>0&&i.currentTrack.map((function(i){i.longitude===e.longitude&&i.latitude===e.latitude&&i.reportTime===e.reportTime&&(t=!0)})),t||(0==h.length&&i.currentTrack.length>0&&h.push(new BMapGL.Point(i.currentTrack[i.currentTrack.length-1].longitude,i.currentTrack[i.currentTrack.length-1].latitude)),h.push(new BMapGL.Point(e.longitude,e.latitude)))})),0!=h.length){var x=new BMapGL.Polyline(h,{strokeColor:n,strokeWeight:o,strokeOpacity:r,strokeStyle:a,fillOpacity:s});if(t?(i.map.addOverlay(x),i.map.centerAndZoom(h[h.length-1],15)):(i.trackAni=new BMapGLLib.TrackAnimation(i.map,x,{overallView:u,tilt:l,duration:d,delay:c}),i.trackAni.start()),i.currentTrack=e,i.currentTrack.length>0&&i.currentTrack.length>0){var f=new BMapGL.Point(i.currentTrack[0].longitude,i.currentTrack[0].latitude);if(i.startPoint=new BMapGL.Marker(f,{icon:new BMapGL.Icon("".concat(i.jSPlugin.staticPath,"/imgs/start.png"),new BMapGL.Size(32,47)),offset:new BMapGL.Size(0,-17)}),i.map.addOverlay(i.startPoint),1==i.currentTrack.length)return;var p=new BMapGL.Point(i.currentTrack[i.currentTrack.length-1].longitude,i.currentTrack[i.currentTrack.length-1].latitude);i.endPoint&&i.map.removeOverlay(i.endPoint),setTimeout((function(){i.endPoint=new BMapGL.Marker(p,{icon:new BMapGL.Icon("".concat(i.jSPlugin.staticPath,"/imgs/end.png"),new BMapGL.Size(30,30))}),i.map.addOverlay(i.endPoint)}),t?0:d)}}})),d(this,"centerToTrack",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;i.currentTrack.length>0&&(1==i.currentTrack.length?i.map.centerAndZoom(new BMapGL.Point(i.currentTrack[0].longitude,i.currentTrack[0].latitude),e):i.map.centerAndZoom(new BMapGL.Point(i.currentTrack[i.currentTrack.length-1].longitude,i.currentTrack[i.currentTrack.length-1].latitude),e))})),this.jSPlugin=t,this.videoWidth=t.width,this.toastCustom=new ot(t,!1),this.currentTrack=[],this.startPoint=null,this.endPoint=null,this.trackAni=null,this.inspectRange=null,this.map=this.initMap()})),Tt=l((function e(t){var i=this;r(this,e),d(this,"init",(function(){var e=i,t=i.videoWidth+290,n=i.videoHeight+170;if(document.getElementById("".concat(i.jSPlugin.id,"-inspect-global-box")))document.getElementById("".concat(i.jSPlugin.id,"-inspect-global-box"))&&document.getElementById("".concat(i.jSPlugin.id,"-wrap")).parentNode.removeChild(document.getElementById("".concat(i.jSPlugin.id,"-inspect-global-box"))),e.init();else{var a=document.createElement("div");a.id="".concat(i.jSPlugin.id,"-inspect-global-box"),a.style=";position: absolute; left:0; top: 0; width: ".concat(t,"px; height: ").concat(n,"px; z-index: 10000; width: ").concat(i.videoWidth+290,"px; height: ").concat(i.videoHeight+170,"px;"),a.innerHTML='<div id="'.concat(i.jSPlugin.id,'-inspect-loading-box" style="\n        overflow: auto;\n        box-sizing: border-box;\n        font-size: 14px;\n        color: #595959;\n        line-height: 24px;\n        font-weight: bold;\n        padding-top: ').concat((n-80)/2,'px;\n        width: 100%;\n        height: 100%;\n        background: #fff; \n      ">\n      <div style="text-align:center;"><div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div></div>\n      <div style="color: #595959; font-size:14px; font-weight: 400; text-align: center;">加载中…</div>\n      </div>\n      '),document.getElementById("".concat(i.jSPlugin.id,"-wrap")).parentNode.appendChild(a)}})),d(this,"deviceErrorInfo",(function(e,t){var n={tips:"",refreshBtn:"",refreshShow:!1},a=Object.assign(n,e);if(document.getElementById("".concat(i.jSPlugin.id,"-no-inspect-box")))document.getElementById("".concat(i.jSPlugin.id,"-no-inspect-box"))&&document.getElementById("".concat(i.jSPlugin.id,"-inspect-global-box")).removeChild(document.getElementById("".concat(i.jSPlugin.id,"-no-inspect-box"))),i.deviceErrorInfo(e,t);else{i.videoHeight;var o=document.createElement("div");o.id="".concat(i.jSPlugin.id,"-no-inspect-box"),o.style="width:100%;height:100%; background: #ffffff; display: flex; justify-content: center; align-items: center",o.innerHTML='<div style="\n        overflow: auto;\n        box-sizing: border-box;\n        font-size: 14px;\n        color: #595959;\n        text-align: center;\n      ">\n      <div style="text-align:center; height: 21px;">\n      <svg t="1689074472491" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7172" xmlns:xlink="http://www.w3.org/1999/xlink" width="21" height="21"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z" fill="#FF4D4F" p-id="7173"></path></svg>\n      </div>\n      <div style="color: #595959; font-size:14px; margin: 5px 0 16px;font-weight: 400; text-align: center;">'.concat(a.tips,'</div>\n      <button id="').concat(i.jSPlugin.id,'-inspect-device-status-refresh" style="display: ').concat(a.refreshShow?"block":"none",';  width: 80px; margin: 0 auto;" type="button" class="ezuikit-btn ezuikit-btn-primary"><span>').concat(a.refreshBtn,"</span></button>\n      </div>\n      "),document.getElementById("".concat(i.jSPlugin.id,"-inspect-global-box")).appendChild(o),document.getElementById("".concat(i.jSPlugin.id,"-inspect-device-status-refresh")).addEventListener("click",(function(){t&&t()}))}})),d(this,"globalContainerToggle",(function(e,t){document.getElementById(e)&&(document.getElementById(e).style.display=t?"block":"none")})),this.jSPlugin=t,this.videoWidth=t.width,this.videoHeight=t.height,this.toastCustom=new ot(t,!1),this.init()})),Pt=function(){function e(t){r(this,e),this.timer=null;var i={wrapNode:document.body,time:2e3,content:"",type:"info",center:!1,top:8};this.params=a(a({},i),t),this.init()}return l(e,[{key:"init",value:function(){var e=this;this.timer=null;var t=this.params,i=t.wrapNode,n=t.content,a=t.time,o=t.type,r=t.center,s=t.top;this.wrapNode=i;var l=document.createElement("div");l.setAttribute("class","ezuikit-message"),r?l.setAttribute("style","top: 50%; transform: translateY(-50%);"):l.setAttribute("style","top: ".concat(s||0,"px;")),this.wrapNode.appendChild(l),this.initMessageContent(o,n,l),0!==a&&(this.timer=setTimeout((function(){e.wrapNode.removeChild(l)}),a||2e3))}},{key:"initMessageContent",value:function(e,t,i){var n=document.createElement("div");n.setAttribute("class","ezuikit-message-notice"),n.innerHTML='\n\t\t\t<div class="ezuikit-message-notice-content">\n\t\t\t\t<div class="ezuikit-message-custom-content ezuikit-message-'.concat(e,'">\n\t\t\t\t\t<span role="img" aria-label="check-circle" class="ezdicon ezdicon-check-circle">\n\t\t\t\t\t\t').concat("warning"===e?'<svg fill="currentColor" t="1691567271942" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z"></path></svg>':"","\n\t\t\t\t\t\t").concat("info"===e?'<svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>':"","\n\t\t\t\t\t\t").concat("error"===e?'<svg fill="currentColor" t="1691567308585" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m165.376 618.24l-65.92-0.32L512 563.392l-99.328 118.4-66.048 0.32a7.936 7.936 0 0 1-8-8c0-1.92 0.64-3.712 1.92-5.184L470.528 513.92 340.48 359.04a8 8 0 0 1 6.08-13.184l66.112 0.256L512 464.576l99.328-118.4 65.92-0.256c4.48 0 8.064 3.456 8.064 8a8.32 8.32 0 0 1-1.92 5.12l-129.92 154.944 130.048 155.008a8 8 0 0 1-6.08 13.184z"></path></svg>':"","\n\t\t\t\t\t\t").concat("success"===e?'<svg fill="currentColor" viewBox="64 64 896 896" focusable="false" data-icon="check-circle" width="1em" height="1em" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"></path></svg>':"","\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>").concat(t,"</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t"),i.appendChild(n)}}]),e}(),Et=function(){function e(t){r(this,e);var i={id:"",width:"100%",height:"100%",preview:!0,showIcon:!0,src:"",alt:"",fallback:"https://img.ys7.com/group32/M00/81/9D/CtxIA2HnrGyADm_jAAAFfWjIDJs811.png"};this.params=a(a({},i),t),this.id=Math.random().toString(36).substr(2),this.init()}return l(e,[{key:"init",value:function(){var e=this.params,t=e.id,i=e.width,n=e.height,a=e.preview;if(document.getElementById(t)){var o=document.createElement("div");o.setAttribute("class","ezuikit-image"),o.setAttribute("style","width:".concat(i,";height:").concat(n,";")),document.getElementById(t).appendChild(o),this.initImage(o),a&&this.initPreview(o)}}},{key:"previewImg",value:function(){var e=this.params,t=e.src,i=e.alt,n=e.fallback,a=document.createElement("div");a.setAttribute("id",this.id+"-preview"),a.setAttribute("class","ezuikit-image-preview"),a.innerHTML='\n\t\t\t<div class="ezuikit-image-preview-mask"></div>\n\t\t\t<div class="ezuikit-image-preview-img-wrapper">\n\t\t\t\t<div class="ezuikit-image-preview-operations" id="'.concat(this.id,'-ezuikit-image-preview-operations">\n\t\t\t\t\t<div class="ezuikit-image-preview-operations-operation">\n\t\t\t\t\t\t<span role="img" aria-label="close" class="anticon anticon-close ezuikit-image-preview-operations-icon">\n\t\t\t\t\t\t\t<svg viewBox="64 64 896 896" focusable="false" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ezuikit-image-preview-wrap">\n\t\t\t\t\t<div class="ezuikit-image-preview-img-main"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t');var o=document.createElement("img");o.setAttribute("class","ezuikit-image-preview-img"),o.setAttribute("alt",i),o.setAttribute("src",t),o.addEventListener("error",(function(){o.setAttribute("src",n)})),document.body.appendChild(a),a.querySelector(".ezuikit-image-preview-img-main").appendChild(o),document.getElementById(this.id+"-ezuikit-image-preview-operations").addEventListener("click",(function(){document.body.removeChild(a)}))}},{key:"initImage",value:function(e){var t=this.params,i=t.src,n=t.alt,a=t.fallback,o=document.createElement("img");o.setAttribute("class","ezuikit-image-img"),o.setAttribute("alt",n),o.setAttribute("src",i),o.addEventListener("error",(function(){o.setAttribute("src",a)})),e.appendChild(o)}},{key:"initPreview",value:function(e){var t=this,i=this.params.showIcon,n=document.createElement("div");n.setAttribute("class","ezuikit-image-mask"),i&&(n.innerHTML='\n\t\t\t\t<div class="ezuikit-image-mask-info">\n\t\t\t\t\t<span class="ezuikit-image-anticon-eye">\n\t\t\t\t\t\t<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em"  aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>\n\t\t\t\t\t\t预览\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t'),e.appendChild(n),e.onclick=function(){t.previewImg()}}}]),e}(),kt=function(){function e(t){r(this,e);var i={id:"",parentNodeId:"",title:"",content:"",placement:"top",cancelText:"取消",arrowPointAtCenter:!1,okText:"确定",onCancel:function(){},onConfirm:function(){}};this.params=a(a({},i),t),this.initState=!1,this.init(t)}return l(e,[{key:"init",value:function(){var e=this,t=this.params,i=t.id,n=t.content,a=t.placement,o=t.title,r=document.getElementById(i);if(r){var s=document.createElement("div");if(s.setAttribute("id",i+"-popover"),s.setAttribute("class","ezuikit-popover"),s.setAttribute("style","display:none;"),s.innerHTML='\n\t\t\t\t\t<div class="ezuikit-popover-arrow">\n\t\t\t\t\t\t<span class="ezuikit-popover-arrow-content"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ezuikit-popover-inner">\n\t\t\t\t\t\t'.concat(o?'<div class="ezuikit-popover-title">'.concat(o,"</div>"):"",'\n\t\t\t\t\t\t<div class="ezuikit-popover-inner-content">').concat(n,"</div>\n\t\t\t\t\t</div>\n\t\t\t\t"),!document.getElementById(i+"-popover")){var l=document.body;this.params.parentNodeId&&(l=document.getElementById(this.params.parentNodeId)),l.appendChild(s),this.renderPopover(s,r,a)}document.body.addEventListener("click",(function(t){e.addEventListenerFn(t)}))}}},{key:"addEventListenerFn",value:function(e){var t=this.params.id,i=document.getElementById(t),n=document.getElementById(t+"-popover");i&&e.target!==i&&!i.contains(e.target)&&n&&e.target!==n&&!n.contains(e.target)&&this.hidePopover()}},{key:"hidePopover",value:function(){var e=this.params.id,t=document.getElementById(e+"-popover");t&&document.body.removeChild(t)}},{key:"renderPopover",value:function(e,t,i,n,a){e.style.display="block";var o=t.getBoundingClientRect(),r=o.top,s=o.left,l=o.width,d=o.height,c=e.getBoundingClientRect(),u=c.width,h=c.height;n&&(u=n),a&&(h=a);var x=document.body;this.params.parentNodeId&&(x=document.getElementById(this.params.parentNodeId));var f=this.params.arrowPointAtCenter,p=0,m=0,_=e.getElementsByClassName("ezuikit-popover-arrow")[0],g=_.getBoundingClientRect(),v=g.width,y=g.height;if(f){var b=0,S=0;switch(i){case"top":b=u/2,S=h;break;case"bottom":b=u/2,S=0;break;case"left":b=u,S=h/2;break;case"right":b=0,S=h/2;break;case"topLeft":b=(l-v)/2,S=h;break;case"topRight":b=u-(l+v)/2,S=h;break;case"bottomLeft":b=(l-v)/2,S=0;break;case"bottomRight":b=u-(l+v)/2,S=0;break;case"leftTop":b=u,S=(d-y)/2;break;case"leftBottom":b=u,S=h-(d+y)/2;break;case"rightTop":b=0,S=(d-10)/2;break;case"rightBottom":b=0,S=h-(d+y)/2;break;default:b=u/2,S=h;break}_.style.left=b+"px",_.style.top=S+"px"}switch(i){case"top":p=-(h+y),m=(l-u)/2,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-top");break;case"bottom":p=d-y/2,m=(l-u)/2,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottom");break;case"left":p=(d-h)/2,m=-(u+v/2),e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-left");break;case"right":p=(d-h)/2,m=l-v/2,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-right");break;case"topLeft":p=-(h+y),m=0,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-topLeft");break;case"topRight":p=-(h+y),m=l-u,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-topRight");break;case"bottomLeft":p=d-y/2,m=0,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottomLeft");break;case"bottomRight":p=d-y/2,m=l-u,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottomRight");break;case"leftTop":p=0,m=-(u+v/2),e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-leftTop");break;case"leftBottom":p=d-h,m=-(u+v/2),e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-leftBottom");break;case"rightTop":p=0,m=l-v/2,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-rightTop");break;case"rightBottom":p=d-h,m=l-v/2,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-rightBottom");break;default:p=-h,m=(l-u)/2,e.setAttribute("class","ezuikit-popover ezuikit-popover-placement-top");break}var C=document.documentElement.scrollTop||document.body.scrollTop,w=document.documentElement.scrollLeft||document.body.scrollLeft;e.style.top=r+C+p+"px",e.style.left=s+w+m+"px";var T=e.getBoundingClientRect(),P=x===document.body?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:x.getBoundingClientRect(),E=i;T.left<P.left&&(E=E.replace("Right","Left"),E=E.replace("right","left")),T.right>P.right&&(E=E.replace("Left","Right"),E=E.replace("left","right")),T.top<P.top&&(E=E.replace("Top","Bottom"),E=E.replace("top","bottom")),T.bottom>P.bottom&&(E=E.replace("Bottom","Top"),E=E.replace("bottom","top")),E!==i&&this.renderPopover(e,t,E,u,h)}}]),e}(),Rt=function(){function e(t){r(this,e);var i={id:"",content:"",placement:"top",cancelText:"取消",arrowPointAtCenter:!1,okText:"确定",onCancel:function(){},onConfirm:function(){}};this.params=a(a({},i),t),this.PopconfirmDom=null,this.init(t)}return l(e,[{key:"init",value:function(){var e=this,t=this.params,i=t.content,n=t.cancelText,o=t.okText,r=t.onCancel,s=t.onConfirm,l=document.createElement("div");l.innerHTML='\n      <div class="ezuikit-confirm">\n        <div class="ezuikit-confirm-content">\n\t\t\t\t\t<span class="ezuikit-confirm-icon">\n          \t<svg fill="currentColor" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z"></path></svg>\n          </span>\n\t\t\t\t\t<span class="ezuikit-confirm-content-label">'.concat(i,'</span>\n        </div>\n        <div class="ezuikit-popover-buttons"></div>\n      </div>\n      ');var d=document.createElement("button");d.className="ezuikit-btn ezuikit-cancel-btn",d.innerText=n;var c=document.createElement("button");return c.className="ezuikit-btn ezuikit-ok-btn ezuikit-btn-primary",c.innerText=o,l.querySelector(".ezuikit-popover-buttons").appendChild(d),l.querySelector(".ezuikit-popover-buttons").appendChild(c),this.PopconfirmDom=new kt(a(a({},this.params),{},{content:l.innerHTML})),document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-cancel-btn")&&(document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-cancel-btn").onclick=function(){r?r():e.hide()}),document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-ok-btn")&&(document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-ok-btn").onclick=function(){s?s():e.hide()}),this.PopconfirmDom}},{key:"hide",value:function(){this.PopconfirmDom.hidePopover()}}]),e}(),It=function(){function e(t){r(this,e);var i={id:"",width:"100%",height:"100%",preview:!0,poster:"",fallback:"https://img.ys7.com/group32/M00/81/9D/CtxIA2HnrGyADm_jAAAFfWjIDJs811.png",src:""};this.params=a(a({},i),t),this.id=Math.random().toString(36).substr(2),this.init()}return l(e,[{key:"init",value:function(){var e=this.params,t=e.id,i=e.width,n=e.height,a=e.preview;if(document.getElementById(t)){var o=document.createElement("div");o.setAttribute("class","ezuikit-video"),o.setAttribute("style","width:".concat(i,";height:").concat(n,";")),document.getElementById(t).appendChild(o),this.initVideo(o),a&&this.initPreview(o)}}},{key:"previewVideo",value:function(){var e=this.params.src,t=document.createElement("div");t.setAttribute("id",this.id+"-preview"),t.setAttribute("class","ezuikit-image-video"),t.innerHTML='\n\t\t\t<div class="ezuikit-video-preview-mask"></div>\n\t\t\t<div class="ezuikit-video-preview-img-wrapper">\n\t\t\t\t<div class="ezuikit-video-preview-operations" id="'.concat(this.id,'-ezuikit-video-preview-operations">\n\t\t\t\t\t<div class="ezuikit-video-preview-operations-operation">\n\t\t\t\t\t\t<span role="img" aria-label="close" class="anticon anticon-close ezuikit-video-preview-operations-icon">\n\t\t\t\t\t\t\t<svg viewBox="64 64 896 896" focusable="false" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ezuikit-video-preview-wrap">\n\t\t\t\t\t<div class="ezuikit-video-preview-img-wrapper">\n\t\t\t\t\t\t<video\n\t\t\t\t\t\t\tclass="ezuikit-video-preview-img custom-controls"\n\t\t\t\t\t\t\tsrc="').concat(e,'"\n\t\t\t\t\t\t\tautoplay \n\t\t\t\t\t\t\tcontrols \n\t\t\t\t\t\t\tcontrolslist="nodownload noremoteplayback noplaybackrate"\n\t\t\t\t\t\t\tdisablePictureInPicture\n\t\t\t\t\t\t\tdisableRemotePlayback\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t'),document.body.appendChild(t),document.getElementById(this.id+"-ezuikit-video-preview-operations").addEventListener("click",(function(){document.body.removeChild(t)}))}},{key:"initVideo",value:function(e){var t=this.params,i=t.poster,n=t.fallback,a=document.createElement("img");a.setAttribute("class","ezuikit-video-img"),a.setAttribute("src",i),a.addEventListener("error",(function(){a.setAttribute("src",n)})),e.appendChild(a)}},{key:"initPreview",value:function(e){var t=this,i=document.createElement("div");i.setAttribute("class","ezuikit-video-mask"),i.innerHTML='\n\t\t\t<div class="ezuikit-video-mask-info">\n\t\t\t\t<span class="ezuikit-video-anticon-eye">\n\t\t\t\t\t<svg width="28" height="28" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 28 28" style="enable-background:new 0 0 28 28;" xml:space="preserve">\n\t\t\t\t\t<circle cx="14" cy="14" r="14" style="opacity:0.7;fill-rule:evenodd;clip-rule:evenodd;enable-background:new;"/>\n\t\t\t\t\t<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M18.3,15.2l-5.3,3.3c-0.7,0.4-1.6,0.2-2.1-0.5c-0.1-0.2-0.2-0.5-0.2-0.8v-6.6\n\t\t\t\t\t\tc0-0.8,0.7-1.5,1.5-1.5c0.3,0,0.6,0.1,0.8,0.2l5.3,3.3c0.7,0.4,0.9,1.4,0.5,2.1C18.6,14.9,18.4,15,18.3,15.2z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t',e.appendChild(i),e.onclick=function(){t.previewVideo()}}}]),e}(),Dt=function(e,t,i){var n=function(e){t&&t(e)},a=function(e){i&&i(e)},o={accessToken:e.accessToken,deviceSerial:M(e.url).deviceSerial},r={"Content-Type":"application/x-www-form-urlencoded"},s="".concat(e.env.domain,"/api/service/devicekit/bodycamera/inspect/detail/latest");Xe(s,"GET",o,n,a,r)},Mt=function(e,t,i,n){var a=function(e){i&&i(e)},o=function(e){n&&n(e)},r={accessToken:e.accessToken,inspectRecordId:t,page:0},s={"Content-Type":"application/x-www-form-urlencoded"},l="".concat(e.env.domain,"/api/service/devicekit/bodycamera/device/trace");Xe(l,"GET",r,a,o,s)},At=function(e,t,i){var n=function(e){t&&t(e)},a=function(e){i&&i(e)},o={accessToken:e.accessToken,deviceSerial:M(e.url).deviceSerial},r={"Content-Type":"application/x-www-form-urlencoded"},s="".concat(e.env.domain,"/api/service/devicekit/bodycamera");Xe(s,"GET",o,n,a,r)},Bt=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,r=function(e){a&&a(e)},s=function(e){o&&o(e)},l={accessToken:e.accessToken,inspectRecordId:t,pageStart:i,pageSize:n},d={"Content-Type":"application/x-www-form-urlencoded"},c="".concat(e.env.domain,"/api/service/devicekit/bodycamera/inspect/event/page");Xe(c,"GET",l,r,s,d)},Lt=function(e,t,i,n){var a=function(e){i&&i(e)},o=function(e){n&&n(e)},r={accessToken:e.accessToken,deviceSerial:M(e.url).deviceSerial,validateCode:M(e.url).validCode,channelNo:M(e.url).channelNo,evidenceFileType:t},s={"Content-Type":"application/x-www-form-urlencoded"},l="".concat(e.env.domain,"/api/service/devicekit/common/file/evidence");Xe(l,"POST",r,a,o,s)},Ft=function(e,t,i,n){var a=function(e){i&&i(e)},o=function(e){n&&n(e)},r={accessToken:e.accessToken,taskId:t},s={"Content-Type":"application/x-www-form-urlencoded"},l="".concat(e.env.domain,"/api/v3/open/cloud/video/frame/stop");Xe(l,"POST",r,a,o,s)},jt=function(e,t,i,n){var a=function(e){i&&i(e)},o=function(e){n&&n(e)},r={accessToken:e.accessToken,taskId:t},s={"Content-Type":"application/x-www-form-urlencoded"},l="".concat(e.env.domain,"/api/service/devicekit/opencloud/task/info");Xe(l,"GET",r,a,o,s)},zt=function(e,t,i,n){var a={accessToken:e.accessToken,inspectRecordId:"",eventType:"",evidenceFileId:"",eventTime:"",eventBeginTime:"",eventEndTime:"",depositaryOfficer:"",eventRemark:"",evidenceFileType:""},o=function(e){i&&i(e)},r=function(e){n&&n(e)},s=Object.assign(a,t),l={"Content-Type":"application/x-www-form-urlencoded"},d="".concat(e.env.domain,"/api/service/devicekit/bodycamera/inspect/event");Xe(d,"POST",s,o,r,l)},Ot=function(e,t,i,n){var a={accessToken:e.accessToken,inspectRecordId:"",inspectEventId:"",eventType:"",eventRemark:""},o=function(e){i&&i(e)},r=function(e){n&&n(e)},s=Object.assign(a,t),l={"Content-Type":"application/x-www-form-urlencoded"},d="".concat(e.env.domain,"/api/service/devicekit/bodycamera/inspect/event/update");Xe(d,"POST",s,o,r,l)},Nt=function(e,t,i,n){var a={accessToken:e.accessToken,inspectEventId:""},o=function(e){i&&i(e)},r=function(e){n&&n(e)},s=Object.assign(a,t),l={"Content-Type":"application/x-www-form-urlencoded"},d="".concat(e.env.domain,"/api/service/devicekit/bodycamera/inspect/event/delete");Xe(d,"POST",s,o,r,l)};function Ut(e){var t=parseInt(e%864e5/36e5),i=parseInt(e%36e5/6e4),n=parseInt(e%6e4/1e3);return(t<10?"0".concat(t):t)+":"+(i<10?"0".concat(i):i)+":"+(n<10?"0".concat(n):n)}var Ht=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};r(this,e),this.jSPlugin=t,this.currentEventInfo=i,this.inspectInfo=t.Theme.inspect.inspectInfo,this.type=a,this.timer=n,this.startTime=1e3,this.videoRecordingStatus=!0,this.saveSuccessCallback=o,this.init()}return l(e,[{key:"init",value:function(){this.renderEventDetail(),this.eventDetailDomEvent()}},{key:"show",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-wrap")).setAttribute("class","inspect-event-detail-wrap show")}},{key:"hide",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-wrap")).setAttribute("class","inspect-event-detail-wrap"),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-box")).innerHTML=""}},{key:"validationEventTag",value:function(){var e=document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).value;return 0==e.length?(document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).style.display="block",document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).innerHTML="请输入事件标签",document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).setAttribute("class","ezuikit-input input-has-error"),!1):(document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).setAttribute("class","ezuikit-input"),!0)}},{key:"renderVideo",value:function(e,t,i){var n=this;if(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML="",1===e||2===e){if(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML='\n      <div class="video-stroage-exceptional-status-tips-wrap" style="background:url('.concat(this.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n        <div class="video-stroage-exceptional-status-icon">\n        <div type="default" class="ezuikit-spin ezuikit-spin-sm ezuikit-spin-spinning ezuikit-spin-dot-white"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n        </div>\n        <span class="video-stroage-exceptional-status-tips">视频正在存储中…</span>\n      </div>\n     '),1!==this.type){var a=this.currentEventInfo.evidenceId;this.timer.clearTimer("videoRecordingStatusTimer"),this.timer.createInterval("videoRecordingStatusTimer",(function(){jt(n.jSPlugin,a,(function(e){if(e.meta&&200===e.meta.code){var t=e.data,i=t.taskStatus,a=t.fileUrl,o=t.videoCoverPic,r=o||"".concat(n.jSPlugin.staticPath,"/imgs/bg.svg");n.renderVideo(i,r,a)}}))}),1e3)}}else 4===e||5===e||6===e||7===e?(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML='\n        <div class="video-stroage-exceptional-status-tips-wrap video-stroage-exceptional-status-tips-error" style="background:url('.concat(this.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n          <div class="video-stroage-exceptional-status-icon">\n            <svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>\n          </div>\n          <span class="video-stroage-exceptional-status-tips">视频存储失败</span>\n        </div>\n       '),this.timer.clearTimer("videoRecordingStatusTimer")):0!==e&&3!==e||(new It({id:"".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview"),poster:t,fallback:"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg"),src:i}),this.timer.clearTimer("videoRecordingStatusTimer"))}},{key:"renderEventDetail",value:function(){var e=this,t=this.currentEventInfo,i=t.evidenceFileType,n=t.fileUrl,a=t.taskStatus,o=t.videoCoverPic,r=document.createElement("div");r.setAttribute("class","inspectEventDetail");var s="";if(s=1===i?o||"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg"):n||"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg"),r.innerHTML='\n      <div class="inspectEventDetail-header">\n        <div class="inspectEventDetail-back" id="'.concat(this.jSPlugin.id,'-inspectEventDetail-back">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M605.888 137.344a6.4 6.4 0 0 1 1.472 4.032l0.64 70.784a6.4 6.4 0 0 1-2.368 5.056L281.6 480H876.8v64H279.744l325.376 264a6.4 6.4 0 0 1 2.368 4.928l0.128 69.632a6.4 6.4 0 0 1-10.432 4.992l-422.016-342.4a42.24 42.24 0 0 1-7.04-57.344l3.264-3.904 3.776-3.456 421.76-344a6.4 6.4 0 0 1 8.96 0.896z"></path></svg>\n        </div>\n        <div class="inspectEventDetail-type">').concat(1===this.type?"编辑":"").concat(0===i?"图片存证":"视频存证",'</div>\n      </div>\n      <div class="inspectEventDetail-content" style="\n        height: ').concat(document.getElementById("".concat(this.jSPlugin.id,"-wrap")).clientHeight-158,'px;\n        overflow: auto;\n      ">\n        ').concat(0===i?'<div class="inspectEventDetail-content-img-box">\n            <p class="inspectEventDetail-content-img-tips" style="display: '.concat(1==this.type?"none":"blcok",';">图片已取证，请填写存证信息：</p>\n            <div class="inspectEventDetail-content-img-detail" id="').concat(this.jSPlugin.id,'-inspectEventDetail-picUrl"></div>\n          </div>'):'<div class="inspectEventDetail-content-video-box">\n            <div\n              id="'.concat(this.jSPlugin.id,'-inspectEventDetail-content-video-timer"\n              class="inspectEventDetail-content-video-timer"\n              style="display: ').concat(1==this.type?"none":"flex",';"\n            >\n              <div class="video-recording-time-wrap">\n                <svg fill="currentColor" width="10" height="10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 10" style="enable-background:new 0 0 10 10;" xml:space="preserve"><circle class="st0" cx="5" cy="5" r="3"/><path class="st1" d="M5,10c-2.8,0-5-2.2-5-5c0-2.8,2.2-5,5-5s5,2.2,5,5C10,7.8,7.8,10,5,10z M5,0.5c-2.5,0-4.5,2-4.5,4.5c0,2.5,2,4.5,4.5,4.5s4.5-2,4.5-4.5C9.5,2.5,7.5,0.5,5,0.5z"/></svg>\n                <div id="').concat(this.jSPlugin.id,'-video-recording-time" class="video-recording-time">00:00:00</div>\n              </div>\n              <button id="').concat(this.jSPlugin.id,'-video-recording-stop-btn" class="inspectEventDetail-stop-btn ezuikit-btn">\n              <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>\n              停止录制\n              </button>\n            </div>\n            <div id="').concat(this.jSPlugin.id,'-inspectEventDetail-content-video-info" class="inspectEventDetail-content-video-info" style="display: ').concat(1==this.type?"block":"none",';">\n              <p class="inspectEventDetail-content-video-tips" style="display: ').concat(1==this.type?"none":"blcok",';">视频已取证：</p>\n              <div class="inspectEventDetail-content-video-detail" id="').concat(this.jSPlugin.id,'-inspectEventDetail-videoPreview"></div>\n            </div>\n          </div>'),'\n        <div class="inspectEventDetail-content-info">\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title">事件时间：</div>\n            <div id="').concat(this.jSPlugin.id,'-inspectEventDetail-content-info-time" class="inspectEventDetail-content-info-item-value"></div>\n          </div>\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title">存证人员：</div>\n            <div class="inspectEventDetail-content-info-item-value">\n              ').concat(1===this.type?this.currentEventInfo.depositaryOfficer?"null"===this.currentEventInfo.depositaryOfficer?"-":this.currentEventInfo.depositaryOfficer:"-":this.inspectInfo.inspectPerson?"null"===this.inspectInfo.inspectPerson?"-":this.inspectInfo.inspectPerson:"-",'\n            </div>\n          </div>\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title inspectEventDetail-content-info-item-title-required">事件标签：</div>\n            <div class="ezuikit-form-item-control-input">\n              <div class="ezuikit-form-item-control-input-content">\n                <input\n                  id="').concat(this.jSPlugin.id,'-event-tag"\n                  maxlength="32"\n                  type="text"\n                  id="control-ref_note"\n                  class="ezuikit-input"\n                  placeholder="请输入事件标签"\n                  value="').concat(1===this.type&&this.currentEventInfo.eventType||"",'"\n                />\n              </div>\n              <div class="ezuikit-form-item-explain ezuikit-form-item-explain-connected">\n                <div id="').concat(this.jSPlugin.id,'-event-tag-error" class="ezuikit-form-item-explain-error" style="display: none">请输入事件标签</div>\n              </div>\n            </div>\n          </div>\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title">事件备注：</div>\n            <div class="ezuikit-input-textarea ezuikit-input-textarea-show-count" data-count="').concat(1===this.type?this.currentEventInfo.eventRemark&&this.currentEventInfo.eventRemark.length:0,' / 100">\n              <textarea\n              id="').concat(this.jSPlugin.id,'-event-remark"\n              maxlength="100"\n              class="ezuikit-input"\n              maxlength="100"\n              placeholder="请输入事件标注"\n              >').concat(1===this.type&&this.currentEventInfo.eventRemark||"",'</textarea>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="inspectEventDetail-footer">\n        <button id="').concat(this.jSPlugin.id,'-event-cancel" class="inspectEventDetail-footer-btn ezuikit-btn">取消</button>\n        <button id="').concat(this.jSPlugin.id,'-event-ok" class="inspectEventDetail-footer-btn ezuikit-btn ezuikit-btn-primary">保存</button>\n      </div>\n    '),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-box")).appendChild(r),1===this.type?document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat(1===i?this.currentEventInfo.eventBeginTime+" ~ "+this.currentEventInfo.eventEndTime:this.currentEventInfo.eventTime):(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat((new Date).Format("yyyy-MM-dd hh:mm:ss")).concat(1===i?" ~ -":""),1===i&&document.getElementById("".concat(this.jSPlugin.id,"-video-recording-time"))&&this.videoRecordingStatus&&(0===this.type&&document.getElementById("".concat(this.jSPlugin.id,"-event-ok")).setAttribute("disabled","disabled"),this.timer.createInterval("videoRecordingTimer",(function(){e.startTime&&(document.getElementById("".concat(e.jSPlugin.id,"-video-recording-time")).innerHTML=Ut(e.startTime)),e.startTime+=1e3,e.startTime>e.jSPlugin.inspectRecordingDuration&&(document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).click(),e.timer&&e.timer.clearTimer("videoRecordingTimer"))}),1e3))),1===i){var l=this.currentEventInfo&&this.currentEventInfo.fileUrl;this.renderVideo(a,s,l)}else new Et({id:"".concat(this.jSPlugin.id,"-inspectEventDetail-picUrl"),src:s,fallback:"".concat(this.jSPlugin.staticPath,"/imgs/fallback.svg"),showIcon:!1});this.show()}},{key:"eventDetailDomEvent",value:function(){var e=this,t=this.currentEventInfo,i=t.evidenceFileType,n=t.evidenceId;document.getElementById("".concat(this.jSPlugin.id,"-event-cancel")).addEventListener("click",(function(t){e.cancelPopover=new Rt({id:"".concat(e.jSPlugin.id,"-event-cancel"),content:"确定要取消吗？".concat(1===e.type?"取消后编辑的内容将不会保存。":"取消后对应存证也将删除。"),placement:"topRight",arrowPointAtCenter:!0,onCancel:function(){e.cancelPopover.hide()},onConfirm:function(){1===i&&(e.videoRecordingStatus&&0===e.type&&(e.timer&&e.timer.clearTimer("videoRecordingTimer"),e.startTime=1e3,document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).click()),e.timer.clearTimer("videoRecordingStatusTimer")),e.cancelPopover.hide(),e.hide()}})})),document.getElementById("".concat(this.jSPlugin.id,"-event-ok")).addEventListener("click",(function(){var t=e.validationEventTag();if(t){var i=e.currentEventInfo,n=i.evidenceFileType,a=i.evidenceId,o=e.inspectInfo,r=o.inspectRecordId,s=o.inspectPerson,l=document.getElementById("".concat(e.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML,d={inspectRecordId:r,depositaryOfficer:s,evidenceFileId:a,evidenceFileType:n,eventType:document.getElementById("".concat(e.jSPlugin.id,"-event-tag")).value,eventRemark:document.getElementById("".concat(e.jSPlugin.id,"-event-remark")).value};1===n&&(d.eventBeginTime=l.split("~")[0].trim(),d.eventEndTime=l.split("~")[1].trim(),e.timer.clearTimer("videoRecordingStatusTimer")),0===n&&(d.eventTime=l),1===e.type&&(d.inspectEventId=e.currentEventInfo.inspectEventId,delete d.depositaryOfficer,delete d.eventTime,delete d.eventBeginTime,delete d.eventEndTime,delete d.evidenceFileId,delete d.evidenceFileType,Ot(e.jSPlugin,d,(function(t){t.meta&&200===t.meta.code?(e.hide(),e.saveSuccessCallback&&e.saveSuccessCallback({eventType:d.eventType,eventRemark:d.eventRemark})):new Pt({type:"error",content:"保存失败，".concat(t.meta&&t.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-box")),top:40})}),(function(){new Pt({type:"error",content:"保存失败，请稍后重试！",wrapNode:document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-box")),top:40})}))),0===e.type&&zt(e.jSPlugin,d,(function(t){t.meta&&200===t.meta.code?(e.hide(),e.saveSuccessCallback&&e.saveSuccessCallback()):new Pt({type:"error",content:"保存失败，".concat(t.meta&&t.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-box")),top:40})}),(function(){new Pt({type:"error",content:"保存失败，请稍后重试！",wrapNode:document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-box")),top:40})}))}})),document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-back")).addEventListener("click",(function(){e.backPopover=new Rt({id:"".concat(e.jSPlugin.id,"-inspectEventDetail-back"),content:"确定要返回吗？".concat(1===e.type?"返回后编辑的内容将不会保存。":"返回后对应存证也将删除。"),placement:"bottomRight",arrowPointAtCenter:!0,onCancel:function(){e.backPopover.hide()},onConfirm:function(){1===i&&(e.videoRecordingStatus&&0===e.type&&(e.timer&&e.timer.clearTimer("videoRecordingTimer"),e.startTime=1e3,document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).click()),e.timer.clearTimer("videoRecordingStatusTimer")),e.backPopover.hide(),e.hide()}})})),document.getElementById("".concat(this.jSPlugin.id,"-video-recording-stop-btn"))&&document.getElementById("".concat(this.jSPlugin.id,"-video-recording-stop-btn")).addEventListener("click",(function(){document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn ezuikit-btn-loading"),document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block",Ft(e.jSPlugin,n,(function(t){document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn"))&&(document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn"),document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="none"),t.meta&&200===t.meta.code?jt(e.jSPlugin,n,(function(t){if(t.meta&&200===t.meta.code){var i=t.data,n=i.taskStatus,a=i.fileUrl,o=i.videoCoverPic;e.timer&&e.timer.clearTimer("videoRecordingTimer");var r=o||"".concat(e.jSPlugin.staticPath,"/imgs/bg.svg");e.renderVideo(n,r,a),document.getElementById("".concat(e.jSPlugin.id,"-inspectEventDetail-content-video-info")).style.display="block",document.getElementById("".concat(e.jSPlugin.id,"-inspectEventDetail-content-video-timer")).style.display="none";var s=document.getElementById("".concat(e.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML;document.getElementById("".concat(e.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat(s.split("~")[0]," ~ ").concat((new Date).Format("yyyy-MM-dd hh:mm:ss")),e.videoRecordingStatus=!1,document.getElementById("".concat(e.jSPlugin.id,"-event-ok")).removeAttribute("disabled")}})):new Pt({type:"error",content:"停止录制失败，请稍后重试！",wrapNode:document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-box")),top:40})}),(function(){document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn"))&&(document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn"),document.getElementById("".concat(e.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="none"),new Pt({type:"error",content:"停止录制失败，请稍后重试！",wrapNode:document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-box")),top:40})}))})),document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).addEventListener("input",(function(){e.validationEventTag()})),document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("input",(function(e){var t=e.target.value;e.target.parentNode.setAttribute("data-count","".concat(t.length," / 100"))})),document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("focus",(function(e){e.target.parentNode.setAttribute("class","ezuikit-input-textarea ezuikit-input-textarea-show-count ezuikit-input-textarea-focus")})),document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("blur",(function(e){e.target.parentNode.setAttribute("class","ezuikit-input-textarea ezuikit-input-textarea-show-count")}))}}]),e}(),Vt=function(){function e(t,i,n){var a=this;r(this,e),d(this,"hideDelEConfirm",(function(){for(var e=0;e<a.delEConfirmList.length;e++)a.delEConfirmList[e].hide()})),d(this,"initRender",(function(){var e=a;if(document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")))document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box"))&&document.getElementById("".concat(a.jSPlugin.id,"-wrap")).parentNode.removeChild(document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box"))),e.initRender();else{var t=document.createElement("div");t.id="".concat(a.jSPlugin.id,"-inspect-event-box"),t.setAttribute("class","inspect-event-box"),t.style=";float: right; position: relative;",t.innerHTML='\n      <div id="'.concat(a.jSPlugin.id,'-inspect-event-list-box" style="\n        width: 290px;\n        height: ').concat(a.videoHeight,'px;\n        overflow: hidden;\n        padding: 0;\n        box-sizing: border-box;\n      ">\n        <h1 style="\n          font-size: 16px;\n          color: #262626;\n          line-height: 24px;\n          font-weight: bold;\n          margin: 16px 16px 0;\n        ">巡检事件</h1>\n        <div id="').concat(a.jSPlugin.id,'-inspect-event-btn-wrap" style="\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 16px 16px;\n        ">\n          <div>\n            <button\n              id="').concat(a.jSPlugin.id,'-inspect-event-img"\n              style="min-width: 88px; margin: 0 auto;"\n              type="button"\n              class="ezuikit-btn ezuikit-btn-primary"\n            >\n            <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>\n            图片存证\n            </button>\n            <button\n              id="').concat(a.jSPlugin.id,'-inspect-event-video"\n              style="min-width: 88px; margin: 0 auto;"\n              type="button"\n              class="ezuikit-btn ezuikit-btn-primary"\n            >\n            <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>\n            视频存证</button>\n          </div>\n          <div id="').concat(a.jSPlugin.id,'-inspect-event-list-refresh" style="\n            width: 17px;\n            height: 32px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          ">\n            <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="13" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <path fill="currentColor" d="M960 416V192l-73.056 73.056a447.712 447.712 0 0 0-373.6-201.088C265.92 63.968 65.312 264.544 65.312 512S265.92 960.032 513.344 960.032a448.064 448.064 0 0 0 415.232-279.488 38.368 38.368 0 1 0-71.136-28.896 371.36 371.36 0 0 1-344.096 231.584C308.32 883.232 142.112 717.024 142.112 512S308.32 140.768 513.344 140.768c132.448 0 251.936 70.08 318.016 179.84L736 416h224z"></path>\n            </svg>\n          </div>\n        </div>\n        <div\n          id="').concat(a.jSPlugin.id,'-inspect-loading"\n          class="inspect-loading"\n          style="\n            height: ').concat(a.videoHeight-104,"px;\n            position: absolute; bottom: 0; right: 0;background: #fff; bottom: 0; right: 0; z-index: 99; width: 100%; align-items: center; justify-content: center;\n            display: ").concat(a.listLoading?"flex":"none",'\n          ">\n          <div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n        </div>\n        <div id="').concat(a.jSPlugin.id,'-inspect-event-list-nodata-wrap" style="\n          display: none;\n          height: ').concat(a.videoHeight-104,'px;\n          text-align: center;overflow: auto;\n        "> \n          <img style="width: 85px;height: 85px; margin: 120px auto 0;" src="').concat(a.jSPlugin.staticPath,'/imgs/empty.png" />\n          <p style="font-size: 14px;color: #595959;text-align: center;line-height: 22px;margin: 0;">暂无事件</p>\n        </div>\n        <div class="inspect-event-list-wrap" id="').concat(a.jSPlugin.id,'-inspect-event-list-wrap"\n          style="display: none; height: ').concat(a.videoHeight-104,'px; overflow-x: hidden; overflow-y: auto; padding-top: 4px; box-sizing: border-box; ">\n          <div id="').concat(a.jSPlugin.id,'-inspect-event-list-wrap-main"></div>\n          <div id="').concat(a.jSPlugin.id,'-inspect-event-list-more-loading" style="display: none;align-items: center;justify-content: center;" class="inspect-event-list-more-loading">\n            <div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n          </div>\n        </div>\n      </div>\n      <div id="').concat(a.jSPlugin.id,'-inspect-event-detail-wrap" class="inspect-event-detail-wrap" style="\n        height: ').concat(a.videoHeight,'px;\n      ">\n        <h1 style="\n          font-size: 16px;\n          color: #262626;\n          line-height: 24px;\n          font-weight: bold;\n          margin: 16px 16px 0;\n        ">巡检事件</h1>\n        <div id="').concat(a.jSPlugin.id,'-inspect-event-detail-box"></div>\n      </div>\n      '),document.getElementById("".concat(a.jSPlugin.id,"-wrap")).parentNode.appendChild(t),a.jSPlugin.Theme.decoderState.state.play?a.enableEvidenceBtn():a.disableEvidenceBtn(),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-img")).onclick=function(){a.listLoading||a.startEvidence||(a.startEvidence=!0,a.hideDelEConfirm(),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary ezuikit-btn-loading"),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block",Lt(a.jSPlugin,0,(function(e){a.startEvidence=!1,document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="none",e.meta&&200===e.meta.code?new Ht(a.jSPlugin,e.data,a.timer,0,(function(){a.initEvent(),new Pt({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})})):new Pt({type:"error",content:"图片存证失败，".concat(e.meta&&e.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})}),(function(){a.startEvidence=!1,document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="none",new Pt({type:"error",content:"图片存证失败，请稍后重试！",wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})})))},document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-video")).onclick=function(){a.listLoading||a.startEvidence||(a.startEvidence=!0,a.hideDelEConfirm(),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary ezuikit-btn-loading"),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block",Lt(a.jSPlugin,1,(function(e){a.startEvidence=!1,document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="none",e.meta&&200===e.meta.code?new Ht(a.jSPlugin,e.data,a.timer,0,(function(){a.initEvent(),new Pt({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})})):new Pt({type:"error",content:"视频存证失败，".concat(e.meta&&e.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})}),(function(){a.startEvidence=!1,document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="none",new Pt({type:"error",content:"视频存证失败，请稍后重试！",wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})})))},document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-refresh")).onclick=function(){a.listLoading||a.startEvidence||(a.hideDelEConfirm(),document.getElementById("".concat(a.jSPlugin.id,"-inspect-loading")).style.display="block",document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-wrap")).style.display="none",document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="none",e.initEvent())}}})),d(this,"renderList",(function(e){document.getElementById("".concat(a.jSPlugin.id,"-inspect-loading")).style.display="none";var t=e.data||[];if(t.length>0){document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-wrap")).style.display="block",document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="none";for(var i=function(){var i=document.createElement("div");i.setAttribute("class","inspect-event-item");var o="",r=t[n];i.setAttribute("id","".concat(a.jSPlugin.id,"-inspect-event-item-").concat(r.inspectEventId)),i.innerHTML=o,document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-wrap-main")).appendChild(i);var s,l=document.createElement("div");l.setAttribute("class","inspect-event-item-header-wrap"),1==r.evidenceFileType&&(s="".concat(r.eventBeginTime.split(" ")[1],"~").concat(r.eventEndTime.split(" ")[1])),0==r.evidenceFileType&&(s="".concat(r.eventTime.split(" ")[1]));var d="";1===r.evidenceFileType&&(1===r.taskStatus||2===r.taskStatus?d="storage":4===r.taskStatus||5===r.taskStatus||6===r.taskStatus||7===r.taskStatus?d="storage-error":0!==r.taskStatus&&3!==r.taskStatus||(d="storage-success")),l.innerHTML='\n        <div class="inspect-event-item-header '.concat(d,'">\n        <div class="inspect-event-item-header-left">\n          <span class="inspect-event-item-status-wrap">\n            <span class="inspect-event-item-status"></span>\n          </span>\n          <svg fill="currentColor" style="display: ').concat(1===r.evidenceFileType?"block":"none",'" width="16" height="16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t          viewBox="0 0 14 12" style="enable-background:new 0 0 14 12;" xml:space="preserve">\n            <path d="M1,12c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1h12c0.6,0,1,0.4,1,1v10c0,0.6-0.4,1-1,1H1z M1,11h1.6l0-3.5H1V11z\n            M10.5,1h-7v10h7V1z M13,7.5h-1.6l0,3.5H13V7.5z M6.1,4.2l2.3,1.2c0.4,0.2,0.4,0.6,0,0.8L8.1,6.3l-2,1c-0.2,0.1-0.4,0-0.4-0.2V4.4\n            C5.7,4.2,5.9,4.1,6.1,4.2z M13,6.6V4.9h-1.6v1.8H13z M1,6.6h1.6V4.9H1V6.6z M13,4V1h-1.6l0,3H13z M2.6,1H1v3h1.6L2.6,1z"/>\n          </svg>\n          <svg fill="currentColor" style="display: ').concat(1===r.evidenceFileType?"none":"block",'" width="16" height="16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n            viewBox="0 0 14 12" style="enable-background:new 0 0 14 12;" xml:space="preserve">\n            <path class="st0" d="M13,0c0.6,0,1,0.4,1,1v10c0,0.6-0.4,1-1,1H1c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1H13z M10.4,6.2L5.6,9.8L3.8,8\n            L1,10v1h12V9L10.4,6.2z M13,1H1v7.8l2.9-2.1l1.8,1.8l4.9-3.6L13,7.5V1z M5.5,2C6.3,2,7,2.7,7,3.5S6.3,5,5.5,5S4,4.3,4,3.5\n            S4.7,2,5.5,2z M5.5,3C5.2,3,5,3.2,5,3.5S5.2,4,5.5,4S6,3.8,6,3.5S5.8,3,5.5,3z"/>\n          </svg>\n          <span class="inspect-event-item-time">').concat(s||"-",'</span>\n        </div>\n        <div class="inspect-event-item-header-right">\n          <span class="inspect-event-item-header-toggle">\n          <svg fill="currentColor" class="inspect-event-item-header-toggle-up" style="display: none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M218.496 645.312l46.464 44.032 247.616-261.568 246.4 261.504 46.528-43.904-292.8-310.72z"></path></svg>  \n          <svg fill="currentColor" class="inspect-event-item-header-toggle-down"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M218.496 378.688l46.464-44.032 247.616 261.568 246.4-261.504 46.528 43.904-292.8 310.72z"></path></svg>\n          </span>\n        </div>\n        </div>\n        '),i.appendChild(l),l.onclick=function(e){var t=l.querySelector(".inspect-event-item-header-toggle-up").style.display;"none"===t?(l.querySelector(".inspect-event-item-header-toggle-up").style.display="block",l.querySelector(".inspect-event-item-header-toggle-down").style.display="none",i.querySelector(".inspect-event-item-body").style.display="block"):(l.querySelector(".inspect-event-item-header-toggle-up").style.display="none",l.querySelector(".inspect-event-item-header-toggle-down").style.display="block",i.querySelector(".inspect-event-item-body").style.display="none")};var c=document.createElement("div");c.setAttribute("class","inspect-event-item-body"),c.style.display="none";var u=(1===r.evidenceFileType?r.videoCoverPic:r.fileUrl)||"".concat(a.jSPlugin.staticPath,"/imgs/bg.svg");c.innerHTML='\n        <div class="inspect-event-item-img" id="'.concat(a.jSPlugin.id,"-inspect-view-").concat(r.inspectEventId,'"></div>\n        <div class="inspect-event-item-body-info">\n          <div class="inspect-event-item-body-info-tag">\n            <span class="inspect-event-item-body-info-tag-label" title="').concat(r.eventType,'">').concat(r.eventType,"</span>\n          </div>\n        </div>\n        "),i.appendChild(c),1==r.evidenceFileType&&(1===r.taskStatus||2===r.taskStatus?document.getElementById("".concat(a.jSPlugin.id,"-inspect-view-").concat(r.inspectEventId)).innerHTML='\n              <div class="video-stroage-exceptional-status-tips-wrap" style="background:url('.concat(a.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n                <div class="video-stroage-exceptional-status-icon">\n                <div type="default" class="ezuikit-spin ezuikit-spin-sm ezuikit-spin-spinning ezuikit-spin-dot-white"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n                </div>\n                <span class="video-stroage-exceptional-status-tips">视频正在存储中…</span>\n              </div>\n            '):4===r.taskStatus?document.getElementById("".concat(a.jSPlugin.id,"-inspect-view-").concat(r.inspectEventId)).innerHTML='\n            <div class="video-stroage-exceptional-status-tips-wrap video-stroage-exceptional-status-tips-error" style="background:url('.concat(a.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n              <div class="video-stroage-exceptional-status-icon">\n                <svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>\n              </div>\n              <span class="video-stroage-exceptional-status-tips">视频存储失败</span>\n            </div>\n            '):0!==r.taskStatus&&3!==r.taskStatus||new It({id:"".concat(a.jSPlugin.id,"-inspect-view-").concat(r.inspectEventId),src:r.fileUrl,poster:u,fallback:"".concat(a.jSPlugin.staticPath,"/imgs/bg.svg")})),0==r.evidenceFileType&&new Et({id:"".concat(a.jSPlugin.id,"-inspect-view-").concat(r.inspectEventId),src:u,fallback:"".concat(a.jSPlugin.staticPath,"/imgs/bg.svg"),showIcon:!1});var h=document.createElement("div");h.setAttribute("class","inspect-event-item-body-info-opr");var x=document.createElement("span");x.setAttribute("class","inspect-event-item-body-info-opr-icon"),x.innerHTML='\n          <svg fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M612.992 121.984a64 64 0 0 1 90.496 0l153.92 153.92a64 64 0 0 1 0 90.496l-435.2 435.2a96 96 0 0 1-23.04 17.024l525.312-0.128v64H175.808v-2.304a64 64 0 0 1-66.496-77.632l43.776-199.296a96 96 0 0 1 25.92-47.296zM523.072 302.4l-298.88 298.88a32 32 0 0 0-8.576 15.744l-43.776 199.296 190.848-51.712a32 32 0 0 0 14.272-8.256l300.032-300.032-153.92-153.92z m135.168-135.168L568.32 257.088l153.92 153.984 89.92-89.92-153.92-153.92z"></path></svg>\n        ',h.appendChild(x);var f=document.createElement("span");f.setAttribute("class","inspect-event-item-body-info-opr-icon"),f.id="".concat(a.jSPlugin.id,"-inspect-event-del-").concat(r.inspectEventId),f.innerHTML=' \n          <svg fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M128 320V256h767.872v64H832v512a64 64 0 0 1-64 64H256a64 64 0 0 1-64-64V320H128z m640 0H256v512h512V320zM464 432v256h-64v-256h64z m160 0v256h-64v-256h64zM704 128v64H320V128h384z"></path></svg>\n        ',h.appendChild(f),x.onclick=function(e){a.startEvidence||new Ht(a.jSPlugin,r,a.timer,1,(function(e){new Pt({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40}),r=Object.assign(r,e),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-item-").concat(r.inspectEventId)).querySelector(".inspect-event-item-body-info-tag-label").innerHTML=r.eventType,document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-item-").concat(r.inspectEventId)).querySelector(".inspect-event-item-body-info-tag-label").setAttribute("title",r.eventType)}))},f.onclick=function(e){a.startEvidence||(a.delE=new Rt({id:"".concat(a.jSPlugin.id,"-inspect-event-del-").concat(r.inspectEventId),content:"确定要删除该事件吗？",placement:"topRight",arrowPointAtCenter:!0,onCancel:function(){a.delE.hide()},onConfirm:function(){Nt(a.jSPlugin,{inspectEventId:r.inspectEventId},(function(e){e.meta&&200===e.meta.code?(a.delE.hide(),a.initEvent(),setTimeout((function(){new Pt({type:"success",content:"删除成功",wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})}),10)):new Pt({type:"error",content:"删除失败，".concat(e.meta&&e.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})}),(function(){new Pt({type:"error",content:"删除失败，请稍后重试！",wrapNode:document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-box")),top:40})}))}}),a.delEConfirmList.push(a.delE))},i.querySelector(".inspect-event-item-body-info").appendChild(h),document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-wrap")).onscroll=function(t){var i=t.target;a.hideDelEConfirm(),i.scrollTop+i.offsetHeight>=i.scrollHeight-48&&!a.listLoading&&(e.start+1)*e.size<e.total&&a.initEvent(e.start+1)}},n=0;n<t.length;n++)i()}else document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-wrap")).style.display="none",document.getElementById("".concat(a.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="block"})),this.jSPlugin=t,this.videoWidth=t.width,this.inspectRecordId=i,this.timer=n,this.listLoading=!1,this.startEvidence=!1,this.delEConfirmList=[],this.videoHeight=document.getElementById("".concat(t.id,"-wrap")).clientHeight||t.height,this.initEvent()}return l(e,[{key:"initEvent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=this;n.listLoading=!0,0===t?n.initRender(t):document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="flex";var a=function(t){new Pt({type:"error",content:t.meta&&t.meta.message||"列表获取失败，请稍后重试！",wrapNode:document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-box")),top:40}),n.renderList({})};Bt(n.jSPlugin,n.inspectRecordId,t,i,(function(t){n.listLoading=!1,document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="none",t.meta&&200===t.meta.code?n.renderList(t.data||{}):a(t)}),(function(t){n.listLoading=!1,document.getElementById("".concat(e.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="none",a(t)}))}},{key:"disableEvidenceBtn",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-img")).setAttribute("disabled","disabled"),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-video")).setAttribute("disabled","disabled")}},{key:"enableEvidenceBtn",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-img")).removeAttribute("disabled"),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-video")).removeAttribute("disabled")}}]),e}(),Gt=function(){function e(t,i,n,a,o){var s=this;r(this,e),d(this,"createLocationControl",(function(){var e=s;function t(){this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT,this.defaultOffset=new BMapGL.Size(40,105)}return t.prototype=new BMapGL.Control,t.prototype.initialize=function(t){var i=document.createElement("div");return i.style.cssText="width: 26px;height: 26px;display: flex;align-items: center;justify-content: center; box-shadow: 1px 2px 1px rgb(0 0 0 / 15%); background: #fff; cursor: pointer;",i.id="".concat(e.jSPlugin.id,"-location-btn"),i.innerHTML='<svg fill="#3385ff" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path d="M510.976716 128.626761c-211.205756 0-382.401119 171.195363-382.401119 382.401119s171.195363 382.401119 382.401119 382.401119S893.377836 722.131308 893.377836 510.925552 722.182472 128.626761 510.976716 128.626761zM736.508444 736.45728c-29.265914 29.265914-63.443589 52.289797-101.407415 68.355351-29.265914 12.381733-59.964425 20.158689-91.481563 23.433197L543.619466 704.019187l-63.443589 0 0 124.431298c-32.233437-3.069851-63.443589-10.949136-93.323474-23.535525-37.963825-16.065554-72.039173-39.089437-101.407415-68.355351-29.265914-29.265914-52.289797-63.443589-68.355351-101.407415-12.381733-29.265914-20.158689-59.964425-23.433197-91.481563l126.273209 0 0-63.443589L193.554112 480.227041c3.069851-32.233437 10.949136-63.443589 23.535525-93.323474 16.065554-37.963825 39.089437-72.039173 68.355351-101.407415 29.265914-29.265914 63.443589-52.289797 101.407415-68.355351 29.879884-12.58639 61.090037-20.465674 93.323474-23.535525l0 125.863895 63.443589 0L543.619466 193.707605c31.517138 3.172179 62.215649 11.051464 91.481563 23.433197 37.963825 16.065554 72.039173 39.089437 101.407415 68.355351 29.265914 29.265914 52.289797 63.443589 68.355351 101.407415 12.58639 29.879884 20.465674 61.090037 23.535525 93.323474L703.251724 480.227041l0 63.443589 125.045268 0c-3.172179 31.517138-11.051464 62.215649-23.433197 91.481563C788.798241 673.01369 765.876686 707.089038 736.508444 736.45728z" p-id="1506"></path><path d="M516.093135 415.248526c-56.280604 0-100.793445 43.489557-100.793445 99.770161s44.512841 101.816728 100.793445 101.816728S616.886579 571.29929 616.886579 515.018687 572.373738 415.248526 516.093135 415.248526z" p-id="1507"></path>\n      </svg>',i.onclick=function(t){setTimeout((function(){e.inspectMapWin.centerToTrack(18)}),100)},t.getContainer().appendChild(i),i},new t})),d(this,"initSwithcBtn",(function(){var e=document.createElement("div");e.id="".concat(s.jSPlugin.id,"-miniSwitch"),e.style="cursor: pointer;position: absolute; bottom: 106px; right: 10px; z-index: 999;",e.innerHTML="<div id='".concat(s.jSPlugin.id,'-miniSwitch-btn\' style="width: 32px;height: 32px;display: flex;align-items: center;justify-content: center;border-radius: 50%;background: rgba(0,0,0,0.70);">\n      <svg width="20px" height="20px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <title>大小窗切换</title>\n          <g id="icon/大小窗切换" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <rect id="矩形" x="0" y="0" width="24" height="24"></rect>\n              <path d="M16,3.25 C17.5187831,3.25 18.75,4.48121694 18.75,6 L18.75,6 L18.75,6.644 L19.095177,6.64456257 C20.6299163,6.64456257 21.9388658,7.64624846 22.0337198,8.99291851 L22.0392202,9.14979714 L22.0392202,17.639328 C22.0392202,19.0115638 20.7871129,20.0640733 19.2712041,20.1401546 L19.095177,20.1445626 L8.48326347,20.1445626 C6.94852423,20.1445626 5.63957467,19.1428767 5.54472071,17.7962066 L5.53922025,17.639328 L5.539,16.75 L5,16.75 C3.53746816,16.75 2.34159572,15.6082954 2.25501879,14.1675223 L2.25,14 L2.25,6 C2.25,4.48121694 3.48121694,3.25 5,3.25 L5,3.25 Z M18.75,14 C18.75,15.5187831 17.5187831,16.75 16,16.75 L16,16.75 L7.039,16.75 L7.03922025,17.639328 C7.03922025,18.1209822 7.57916546,18.5830417 8.33031492,18.6389177 L8.48326347,18.6445626 L19.095177,18.6445626 C19.873026,18.6445626 20.4615868,18.2126064 20.5321184,17.735283 L20.5392202,17.639328 L20.5392202,9.14979714 C20.5392202,8.66814298 19.999275,8.20608342 19.2481256,8.15020744 L19.095177,8.14456257 L18.75,8.144 Z M16,4.75 L5,4.75 C4.30964406,4.75 3.75,5.30964406 3.75,6 L3.75,6 L3.75,14 C3.75,14.6903559 4.30964406,15.25 5,15.25 L5,15.25 L16,15.25 C16.6903559,15.25 17.25,14.6903559 17.25,14 L17.25,14 L17.25,8.144 L17.2422027,8.14456257 L17.2422027,6.64456257 L17.25,6.644 L17.25,6 C17.25,5.35279131 16.7581253,4.8204661 16.1278052,4.75645361 L16,4.75 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n          </g>\n      </svg>\n    </div>'),document.getElementById("".concat(s.jSPlugin.id,"-wrap")).appendChild(e),document.getElementById("".concat(s.jSPlugin.id,"-miniSwitch-btn")).onclick=function(){G.throttle((function(){return s.miniRecSwitchClick()}),1e3)()}})),d(this,"initMiniWinToggleBtn",(function(){var e=s.videoWidth,t=.3333*e,i=.3333*e*.5625,n=document.createElement("div");n.id="".concat(s.jSPlugin.id,"-miniToggle"),n.style="cursor: pointer;position: absolute; bottom: ".concat(i/2+96-30,"px; right: ").concat(t,"px; z-index: 999; height:60px; box-sizing: border-box; padding-top: 20px; text-align: center; width:20px; overflow: hidden; background: #000000; border-radius: 2px 0px 0px 2px; opacity: 0.7;"),n.innerHTML="<div id='".concat(s.jSPlugin.id,"-miniToggle-btn'>\n    <svg id=\"").concat(s.jSPlugin.id,'-min-win-close-icon" style="display: inline-block" width="20px" height="20px" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10867" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path d="M378.688 217.856l-44.032 46.464 261.568 247.616-261.504 246.4 43.904 46.528 310.72-292.8z" fill="#ffffff" p-id="10868"></path>\n      </svg>\n    <svg id="').concat(s.jSPlugin.id,'-min-win-open-icon" style="display: none" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10671" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20">\n        <path d="M645.312 217.856l44.032 46.464-261.568 247.616 261.504 246.4-43.904 46.528-310.72-292.8z" fill="#ffffff" p-id="10672"></path>\n      </svg>\n    </div>'),document.getElementById("".concat(s.jSPlugin.id,"-wrap")).appendChild(n),document.getElementById("".concat(s.jSPlugin.id,"-miniToggle")).onclick=function(){s.miniWinToggleClick()}})),d(this,"init",(function(){s.initSwithcBtn(),s.initMiniWinToggleBtn()})),d(this,"setStyleListByIds",(function(e){e.map((function(e){var t=document.getElementById(e.id);t&&Object.keys(e.styleList).map((function(i){t.style[i]=e.styleList[i]}))}))})),this.jSPlugin=t,this.inspectMode=i,this.inspectMapWin=n,this.changeInspectMode=a,this.videoWidth=t.width,this.videoHeight=t.height,this.minWinStatus="open",this.decoderState=o,this.ZoomControl=new BMapGL.ZoomControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT,offset:new BMapGL.Size(40,50)}),this.LocationControl=this.createLocationControl(),this.NavigationControl3D=new BMapGL.NavigationControl3D({anchor:BMAP_ANCHOR_BOTTOM_LEFT,offset:new BMapGL.Size(28,105)}),this.init()}return l(e,[{key:"miniWinToggleClick",value:function(){var e=this.videoWidth,t=.3333*e;"open"===this.minWinStatus?(this.setStyleListByIds([{id:"video"===this.inspectMode?"".concat(this.jSPlugin.id,"-mapbox"):"".concat(this.jSPlugin.id),styleList:{width:"0px"}},{id:"".concat(this.jSPlugin.id,"-miniSwitch"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-miniToggle"),styleList:{right:"0px"}},{id:"".concat(this.jSPlugin.id,"-min-win-close-icon"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-min-win-open-icon"),styleList:{display:"inline-block"}}]),this.minWinStatus="close"):(this.setStyleListByIds([{id:"video"===this.inspectMode?"".concat(this.jSPlugin.id,"-mapbox"):"".concat(this.jSPlugin.id),styleList:{width:t+"px"}},{id:"".concat(this.jSPlugin.id,"-miniSwitch"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-miniToggle"),styleList:{right:t+"px"}},{id:"".concat(this.jSPlugin.id,"-min-win-close-icon"),styleList:{display:"inline-block"}},{id:"".concat(this.jSPlugin.id,"-min-win-open-icon"),styleList:{display:"none"}}]),this.minWinStatus="open")}},{key:"miniRecSwitchClick",value:function(){var e=this,t=this.videoWidth,i=.3333*t,n=.3333*t*.5625;"video"===this.inspectMode?(this.jSPlugin.Zoom&&this.jSPlugin.Zoom.stopZoom(),this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-mapbox"),styleList:{width:this.jSPlugin.width+"px",height:this.jSPlugin.height+"px",marginBottom:"-40px"}},{id:"".concat(this.jSPlugin.id,"-ez-iframe-footer-container"),styleList:{top:this.videoHeight+"px"}},{id:"".concat(this.jSPlugin.id),styleList:{position:"absolute",zIndex:"100",bottom:"96px",right:"0",overflow:"hidden"}}]),this.jSPlugin.reSize(i,n),this.inspectMode="map",this.changeInspectMode("map"),this.inspectMapWin.map.addControl(this.NavigationControl3D),this.inspectMapWin.map.addControl(this.LocationControl),this.inspectMapWin.map.addControl(this.ZoomControl),this.inspectMapWin.map.addOverlay(this.inspectMapWin.inspectRange),document.getElementById("".concat(this.jSPlugin.id,"-loading-item-btn-wrap"))&&this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-loading-item-btn"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-svg"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-wrap"),styleList:{border:"none",width:"32px",height:"14px"}}]),setTimeout((function(){e.inspectMapWin.centerToTrack(18)}),100)):(this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-mapbox"),styleList:{width:i+"px",height:n+"px",marginBottom:"0"}},{id:"".concat(this.jSPlugin.id,"-ez-iframe-footer-container"),styleList:{top:"0px"}},{id:"".concat(this.jSPlugin.id),styleList:{position:"relative",zIndex:"0",bottom:"0"}}]),this.jSPlugin.reSize(this.videoWidth,this.videoHeight),this.inspectMode="video",this.changeInspectMode("video"),this.inspectMapWin.map.removeControl(this.ZoomControl),this.inspectMapWin.map.removeControl(this.NavigationControl3D),this.inspectMapWin.map.removeControl(this.LocationControl),this.inspectMapWin.map.removeOverlay(this.inspectMapWin.inspectRange),document.getElementById("".concat(this.jSPlugin.id,"-loading-item-btn-wrap"))&&this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-loading-item-btn"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-svg"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-wrap"),styleList:{border:"1px solid rgb(255, 255, 255)",width:"80px",height:"32px",color:"#fff","text-align":"center","line-height":"32px","font-size":"14px"}}]),setTimeout((function(){e.inspectMapWin.centerToTrack()}),100),this.jSPlugin.Zoom&&this.decoderState.state.play&&this.jSPlugin.Zoom.startZoom()),this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-wrap"),styleList:{width:this.videoWidth+"px",height:this.videoHeight+112+"px"}}])}}]),e}(),Yt={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0,inspectInfo:{color:"#000000",backgroundColor:"#ffffff",activeColor:"#1890FF",btnList:[{btnKey:"inspectName",iconId:"inspectName",part:"left",defaultActive:0,isrender:1,color:"#262626"},{btnKey:"inspectBeginTime",iconId:"inspectBeginTime",part:"left",defaultActive:0,isrender:1,color:"#262626"},{btnKey:"inspectPerson",iconId:"inspectPerson",part:"right",defaultActive:0,isrender:1,color:"#262626"}]}},header:{color:"#2c2c2c",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"deviceName",iconId:"deviceName",part:"left",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"inspectTime",iconId:"inspectTime",part:"left",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"signalType",iconId:"signalType",part:"right",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"batteryStatus",iconId:"batteryStatus",part:"right",defaultActive:0,isrender:1,color:"#ffffff"}]},footer:{color:"#ffffff",backgroundColor:"#000000",activeColor:"blue",btnList:[{btnKey:"talk",iconId:"talk",part:"left",defaultActive:1,isrender:1,backgroundColor:"#cccccc"},{btnKey:"sound",iconId:"sound",part:"left",defaultActive:1,isrender:1,backgroundColor:"#cccccc"}]}},Wt={data:Yt},Zt=function(e){var t="";return Object.keys(e).map((function(i,n){t+="".concat(i,":").concat(e[i]).concat(n<Object.keys(e).length-1?";":"")})),t};function Xt(e){var t=parseInt(e%864e5/36e5),i=parseInt(e%36e5/6e4),n=parseInt(e%6e4/1e3);return(t<10?"0".concat(t):t)+":"+(i<10?"0".concat(i):i)+":"+(n<10?"0".concat(n):n)}var Jt=500,qt=function(){function e(t,i,n,a,o,s,l){r(this,e),this.jSPlugin=t,this.videoWidth=t.width,this.videoHeight=t.height,this.themeData=i,this.setDecoderState=n,this.decoderState=a,this.isNeedRenderInspectInfo=!1,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.inspectMode=o,this.changeInspectMode=s,this.themeInited=!1,this.inspectRecordId=null,this.inspectInfo={},this.activeThemeStatus=!0,this.activeThemeStatusTxt="模板未激活",this.globalContainer=new Tt(this.jSPlugin),this.toastCustom=new ot(t,!1),this.InspectEvent=null,this.timer=l}return l(e,[{key:"renderSignalType",value:function(e){if(!e)return null;var t,i=e.toUpperCase();return t="WIFI"===i?'<span><svg t="1688983236732" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path d="M0 352.832l93.12 98.752c231.296-245.44 606.464-245.44 837.76 0L1024 352.832C741.44 53.056 283.008 53.056 0 352.832z m372.352 395.008L512 896l139.648-148.16c-76.8-81.92-202.048-81.92-279.296 0zM186.24 550.4l93.12 98.752c128.448-136.32 336.96-136.32 465.408 0L837.824 550.4c-179.648-190.592-471.488-190.592-651.648 0z" fill="#ffffff" p-id="1530"></path>\n      </svg></span>':"<span>".concat(e,"</span>"),t}},{key:"renderBatteryStatus",value:function(e){var t;return e&&0!=e?(t='\n    <div style="\n      display: flex;\n      align-items: center;\n      position: relative;\n    ">\n      <span style="\n        margin-right: 3px; \n        color: '.concat(e<=20?"#FF4D4F":"#FFFFFF",'\n      ">').concat(e,'%</span>\n      <div style="\n        position: absolute;\n        right: 6px;\n        height: 8px;\n        width: 15px;\n      ">\n        <div style="\n          width: ').concat(e,"%;\n          height: 100%;\n          background: ").concat(e<=20?"#FF4D4F":"#FFFFFF",'\n          "></div>\n      </div>\n      <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="32" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path fill="').concat(e<=20?"#FF4D4F":"#FFFFFF",'"  d="M128 213.333333l640 0q52.992 0 90.496 37.504t37.504 90.496q52.992 0 90.496 37.504t37.504 90.496l0 85.333333q0 52.992-37.504 90.496t-90.496 37.504q0 52.992-37.504 90.496t-90.496 37.504l-640 0q-52.992 0-90.496-37.504t-37.504-90.496l0-341.333333q0-52.992 37.504-90.496t90.496-37.504zM768 298.666667l-640 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 341.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l640 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-341.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM896 426.666667l0 170.666667q17.664 0 30.165333-12.501333t12.501333-30.165333l0-85.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333z"></path>\n      </svg>\n    </div>\n    '),t):null}},{key:"renderInspectTime",value:function(e){if(!e)return null;var t,i=e.split(" "),n=i[0].split("-"),a=i[1].split(":"),o=new Date(n[0],n[1]-1,n[2],a[0],a[1],a[2]),r=(new Date).getTime()-new Date(o).getTime();return t='\n    <span style="\n      display: inline-block;\n      width:8px;\n      height:8px;\n      border-radius: 100%;\n      background: #FF4D4F;\n      margin-right: 4px;\n    "></span>\n    '.concat(Xt(r),"\n    "),t}},{key:"matchBtn",value:function(e,t){var i=this,n=this.themeData,a=n.customConfig,o=n.header,r=n.footer,s=a.inspectInfo,l={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},d=s.btnList.findIndex((function(t){return t.iconId===e}));switch(-1!==d?(l.color=s.color,l.backgroundColor=s.backgroundColor,l.activeColor=s.activeColor):(d=o.btnList.findIndex((function(t){return t.iconId===e})),-1!==d?(l.color=o.color,l.backgroundColor=o.backgroundColor,l.activeColor=o.activeColor):(l.color=r.color,l.backgroundColor=r.backgroundColor,l.activeColor=r.activeColor)),e){case"inspectName":return l.title="巡检名称",l.id=e,l.domString='<span id="'.concat(this.jSPlugin.id,'-inspectInfo-inspectName" \n        style="\n        color:').concat(t.color||"#262626",';\n        font-size: 18px;\n        text-align: left;\n        font-weight: bold;\n        padding: 0 16px;\n        ">巡检名称</span>'),l.onclick=function(){},l;case"inspectBeginTime":return l.title="巡检开始时间",l.id=e,l.domString='<span id="'.concat(this.jSPlugin.id,'-inspectInfo-inspectBeginTime" \n        style="\n        color:').concat(t.color||"#FFFFFF",';\n        font-size: 14px;\n        text-align: left;\n        padding-left: 16px;\n        border-left: 1px solid #d9d9d9;\n        line-height: 16px;\n        margin-top: 1px;\n        ">巡检开始时间：-</span>'),l.onclick=function(){},l;case"inspectPerson":return l.title="本地巡检员",l.id=e,l.domString='<span id="'.concat(this.jSPlugin.id,'-inspectInfo-inspectPerson" \n        style="\n        color:').concat(t.color||"#FFFFFF",';\n        font-size: 14px;\n        display: block;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        padding-right: 16px;\n        ">本地巡检员：-</span>'),l.onclick=function(){},l;case"deviceName":return l.title="设备名称",l.id=e,l.domString='<span id="'.concat(this.jSPlugin.id,'-header-deviceName" \n        style="\n        color:').concat(t.color||"#FFFFFF",";\n        font-size: 16px;\n        display: block;\n        max-width: ").concat(.33*this.jSPlugin.width,'px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        ">设备名称</span>'),l.onclick=function(){},l;case"inspectTime":return l.title="巡检时长",l.id=e,l.domString='<span id="'.concat(this.jSPlugin.id,'-header-inspectTime-wrap" \n        style="\n        color:').concat(t.color||"#FFFFFF",';\n        font-size: 14px;\n        display: flex;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        margin-left: 32px;\n        ">巡检时长：<span id="').concat(this.jSPlugin.id,'-header-inspectTime" style="display: flex; align-items: center;">-</span></span>'),l.onclick=function(){},l;case"signalType":return l.title="信号类型",l.id=e,l.domString='<span id="'.concat(this.jSPlugin.id,'-header-signalType" \n        style="\n        color:').concat(t.color||"#FFFFFF",';\n        font-size: 14px;\n        display: block;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        "></span>'),l.onclick=function(){},l;case"batteryStatus":return l.title="设备电量",l.id=e,l.domString='<span id="'.concat(this.jSPlugin.id,'-header-batteryStatus" \n        style="\n        color:').concat(t.color||"#FFFFFF",';\n        font-size: 14px;\n        display: flex;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        margin-left: 12px;\n        align-items: center;\n        "></span>'),l.onclick=function(){},l;case"talk":return l.title="对讲",l.id=e,l.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-talk-icon" class="theme-icon-item-icon" fill="').concat(l.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Jt?48:32,'" height="').concat(this.jSPlugin.width>Jt?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.1,2.7C8.5,2.7,7.2,4,7.2,5.6v5.2c0,1.6,1.3,2.9,2.9,2.9l0.2,0c1.5-0.1,2.7-1.4,2.7-2.9V5.6\tC13,4,11.7,2.7,10.1,2.7z M10.1,3.7c1.1,0,1.9,0.9,1.9,1.9v5.2c0,1-0.8,1.8-1.8,1.9l-0.1,0c-1,0-1.9-0.9-1.9-1.9V5.6 C8.2,4.5,9,3.7,10.1,3.7z" /><path d="M15.1,8.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,3-2.5,5.5-5.5,5.5c-3,0-5.4-2.3-5.5-5.3l0-0.2V9 c0-0.3,0.2-0.5,0.5-0.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,2.5,2,4.5,4.5,4.5c2.4,0,4.4-1.9,4.5-4.3l0-0.2V9 C14.6,8.7,14.8,8.5,15.1,8.5z" /><path d="M13.5,17.7c0.3,0,0.5,0.2,0.5,0.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-7c-0.3,0-0.5-0.2-0.5-0.5 c0-0.2,0.2-0.4,0.4-0.5l0.1,0H13.5z" /><path d="M10.1,15.2c0.2,0,0.4,0.2,0.5,0.4l0,0.1v2.5c0,0.3-0.2,0.5-0.5,0.5c-0.2,0-0.4-0.2-0.5-0.4l0-0.1 v-2.5C9.6,15.4,9.8,15.2,10.1,15.2z" />'+'</svg><span id="'.concat(this.jSPlugin.id,'-talk-label" style="margin-left: -3px">对讲</span>'),l.onclick=function(){var e=i.decoderState.state,t=e.talk,n=e.sound,a=e.play;if(a)if(t){console.log("结束对讲"),i.setDecoderState({talk:!1}),i.jSPlugin.Talk.stopTalk();var o=G.findIndex(i.themeData.footer.btnList,(function(e){return"sound"===e.iconId&&1===e.isrender&&1===e.defaultActive}))>-1;i.themeData&&o&&(i.jSPlugin.openSound(),i.setDecoderState({sound:!0}))}else console.log("开始对讲"),i.setDecoderState({talk:!0}),i.jSPlugin.Talk.startTalk((function(e){n&&!e&&(i.jSPlugin.closeSound(),i.setDecoderState({sound:!1}))}))},l;case"sound":return l.title="音量",l.id=e,l.domString='<span style="height: 100%">'+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-nosound-icon" style="display:none" fill="').concat(l.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Jt?48:32,'" height="').concat(this.jSPlugin.width>Jt?48:32,'" viewBox="-6 -7 32 31">\n          <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"/>\n          <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n          <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"/>\n          <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"/>\n          </svg>')+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-sound-icon" style="display:inline-block" width="').concat(this.jSPlugin.width>Jt?48:32,'" height="').concat(this.jSPlugin.width>Jt?48:32,'" fill="').concat(l.color,'" viewBox="-6 -7 32 32">\n            <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7\n              c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"/>\n            <path d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3\n              c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"/>\n            <path id="Stroke-5" class="st1" d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8\n              C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0\n              L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"/>\n            <path  d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4\n              c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4\n              c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n          </svg>')+'</span><span id="'.concat(this.jSPlugin.id,'-sound-label" style="margin-left: -3px; color: ').concat(l.color,'">音量</span>'),l.onclick=function(){var e=i.decoderState.state,t=e.play,n=e.sound,a=e.talk;t&&!a&&(n?(i.jSPlugin.closeSound(),i.setDecoderState({sound:!1})):(i.jSPlugin.openSound(),i.setDecoderState({sound:!0})))},l;default:return l}}},{key:"renderInspectInfo",value:function(e,t){var i=this.matchBtn(e,t),n=document.createElement("sapn");n.innerHTML="".concat(i.domString),"left"===t.part?document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl-left")).appendChild(n):document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl-right")).appendChild(n)}},{key:"renderHeader",value:function(e,t){var i=this.matchBtn(e,t),n=document.createElement("span");n.className="".concat(this.jSPlugin.id,"-header-content"),n.style="display: flex; align-items: center; ",n.innerHTML="\n      ".concat(i.domString,"\n    "),"left"===t.part?document.getElementById("".concat(this.jSPlugin.id,"-headControl-left")).appendChild(n):document.getElementById("".concat(this.jSPlugin.id,"-headControl-right")).appendChild(n)}},{key:"renderFooter",value:function(e,t){var i=this,n=this.matchBtn(e,t),a=this.videoWidth/6,o=document.createElement("div");o.className="theme-icon-item",this.jSPlugin.isWebConsole?o.style="padding:0 ".concat(.1*a,"px;"):o.style="padding:0 ".concat(.1*a,"px;cursor: pointer;"),o.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(n.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(n.id,'-content" title="').concat(n.title,'" style="display: flex;align-items: center;position:relative;">')).concat(n.domString,"</div>")+"</span>",o.onclick=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;n.onclick(e)},n.onmouseenter&&(o.onmouseenter=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;n.onmouseenter(e)}),n.onmouseleave&&(o.onmouseleave=function(e){if(i.decoderState.state.isEditing||!i.activeThemeStatus)return!1;n.onmouseleave(e)}),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(o)}},{key:"initThemeData",value:function(){var e=this,t=this.themeData,i=t.customConfig,n=t.header,a=t.footer,o=i.inspectInfo,r=this.jSPlugin.id;if(this.isNeedRenderInspectInfo=G.findIndex(o.btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderHeader=G.findIndex(n.btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderFooter=G.findIndex(a.btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderInspectInfo)if(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")))document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-inspectInfoControl-left' style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-inspectInfoControl-right' style='display:flex'></div>");else{var s=document.createElement("div");s.setAttribute("id","".concat(this.jSPlugin.id,"-inspectInfoControl")),s.setAttribute("class","inspectInfo-controls"),s.innerHTML="<div id='".concat(this.jSPlugin.id,"-inspectInfoControl-left' class=\"inspectInfo-controls-left\" style='display:flex;overflow:hidden;'></div><div id='").concat(this.jSPlugin.id,"-inspectInfoControl-right' class=\"inspectInfo-controls-right\" style='display:flex;'></div>");var l="58px",d={height:l,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#000000",width:"".concat(this.jSPlugin.width+290,"px"),position:"relative","align-items":"center",background:"#ffffff","border-bottom":"1px solid #D9D9D9","box-sizing":"border-box"};s.style=Zt(d),document.getElementById("".concat(r,"-wrap")).parentNode.insertBefore(s,document.getElementById("".concat(r,"-wrap")));var c=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(c)}),50)}else document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")));if(this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>");else{var u=document.createElement("div");u.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),u.setAttribute("class","header-controls"),u.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex; max-width: 70%; align-items: center; overflow: hidder;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' class=\"header-controls-right\" style='display:flex; align-items: center;'></div>");var h="56px",x={height:h,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:"100%",padding:"0 16px","box-sizing":"border-box",position:"relative","align-items":"center",background:"#000000"};u.style=Zt(x),document.getElementById("".concat(r,"-wrap")).insertBefore(u,document.getElementById(r));var f=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(f)}),50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));var p="56px";if(this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(p,"px"));else{var m=document.createElement("div");m.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),m.setAttribute("class","ez-iframe-footer-container");var _={position:"relative",display:"flex",height:"56px","flex-wrap":"wrap","justify-content":"center","z-index":999,top:0,color:"#FFFFFF",width:"100%","align-items":"center","background-color":"#000000","font-size":"14px"};m.style=Zt(_),m.innerHTML='\n          <div id="'.concat(this.jSPlugin.id,"-audioControls\" class=\"footer-controls\" style='display:flex;justify-content: center;padding: 0 4%;width:100%;z-index:999;position: relative;'>\n            <div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex;margin-lefacti'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div>\n          </div>\n          "),T(m,document.getElementById(r))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));this.isNeedRenderInspectInfo&&document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.background=o.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.color=o.color,o.btnList.map((function(t,i){t.isrender&&e.renderInspectInfo(t.iconId,t)}))),this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=n.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=n.color,n.btnList.map((function(t,i){t.isrender&&e.renderHeader(t.iconId,t)}))),this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=a.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=a.color,a.btnList.map((function(t,i){t.isrender&&e.renderFooter(t.iconId,t)}))),this.inspectMapWin=new wt(this.jSPlugin),this.inspectSmallWin=new Gt(this.jSPlugin,this.inspectMode,this.inspectMapWin,this.changeInspectMode,this.decoderState)}},{key:"renderThemeData",value:function(){var e=this,t=this.decoderState.state.isEditing,i=this.themeData,n=i.inspectInfo,a=i.header,o=i.footer;if(this.isNeedRenderInspectInfo&&n&&(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.background=n.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.color=n.color.replace("-diy",""),n.btnList.map((function(t,i){t.isrender&&e.setDecoderState(d({},t.iconId,e.decoderState.state[t.iconId]))}))),this.isNeedRenderHeader&&a&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=a.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=a.color.replace("-diy",""),a.btnList&&a.btnList.map((function(t,i){t.isrender&&e.setDecoderState(d({},t.iconId,e.decoderState.state[t.iconId]))}))),this.isNeedRenderFooter&&o)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=o.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=o.color.replace("-diy",""),o.btnList.map((function(i,n){if(i.isrender&&e.setDecoderState(d({},i.iconId,e.decoderState.state[i.iconId])),0==n&&!e.themeInited&&e.activeThemeStatus)var a=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(a),1!=e.themeData.customConfig.bellPoster||t?e.jSPlugin.play():e.jSPlugin.pluginStatus.loadingClear(),e.themeInited=!0)}),50)})),this.setDecoderState({cloudRec:"cloud.rec"===M(this.jSPlugin.url).type,rec:"rec"===M(this.jSPlugin.url).type,type:M(this.jSPlugin.url).type});else if(!this.themeInited&&this.activeThemeStatus)var r=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(r),e.themeData&&e.themeData.customConfig&&1==e.themeData.customConfig.bellPoster&&!t?e.jSPlugin.pluginStatus.loadingClear():e.jSPlugin.play(),e.themeInited=!0)}),50);var s=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(s),e.jSPlugin.reSize(e.videoWidth,e.videoHeight))}),50);this.jSPlugin.Zoom||(this.jSPlugin.Zoom=new Ze(this.jSPlugin)),this.getInspectDevInfo(this.jSPlugin,!0,!1)}},{key:"getInspectRecord",value:function(){var e=this,t=function(t){if(200==t.meta.code&&t.data){var i=t.data;i.inspectRange&&e.inspectMapWin.createPolygon(i.inspectRange,"#407AFF","dashed",4,1,"#407AFF",.08),i.inspectPoints&&i.inspectPoints.length>0&&e.inspectMapWin.createInspectPoints(i.inspectPoints),"video"===e.inspectMode&&e.inspectMapWin.map.removeOverlay(e.inspectMapWin.inspectRange),document.getElementById("".concat(e.jSPlugin.id,"-inspectInfo-inspectName"))&&i.inspectName&&(document.getElementById("".concat(e.jSPlugin.id,"-inspectInfo-inspectName")).innerText=""+i.inspectName),document.getElementById("".concat(e.jSPlugin.id,"-inspectInfo-inspectBeginTime"))&&i.beginTime&&(document.getElementById("".concat(e.jSPlugin.id,"-inspectInfo-inspectBeginTime")).innerText="巡检开始时间："+i.beginTime),document.getElementById("".concat(e.jSPlugin.id,"-header-inspectTime"))&&e.timer.createInterval("InspectTimer",(function(){document.getElementById("".concat(e.jSPlugin.id,"-header-inspectTime")).innerHTML=e.renderInspectTime(i.beginTime)}),1e3),document.getElementById("".concat(e.jSPlugin.id,"-inspectInfo-inspectPerson"))&&i.inspectPerson&&(document.getElementById("".concat(e.jSPlugin.id,"-inspectInfo-inspectPerson")).innerText="本地巡检员："+i.inspectPerson),e.inspectInfo=i,i.inspectRecordId&&Mt(e.jSPlugin,i.inspectRecordId,(function(t){200==t.meta.code&&t.data&&(e.inspectMapWin.createTrack(t.data,!0),e.timer.createInterval("TraceTimer",(function(){i.inspectRecordId&&Mt(e.jSPlugin,i.inspectRecordId,(function(t){200==t.meta.code&&t.data&&e.inspectMapWin.createTrack(t.data,!1)}),(function(){}))}),5e3))}),(function(){})),e.InspectEvent=new Vt(e.jSPlugin,i.inspectRecordId,e.timer)}},i=function(e){};Dt(this.jSPlugin,t,i)}},{key:"getInspectDevInfo",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(a){a.meta&&200==a.meta.code&&a.data?1===a.data.status?(n&&!t.decoderState.state.play&&(t.jSPlugin.pluginStatus.loadingStart(t.jSPlugin.id),t.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"}),t.jSPlugin.play()),t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-global-box"),!1),document.getElementById("".concat(t.jSPlugin.id,"-header-deviceName"))&&(document.getElementById("".concat(t.jSPlugin.id,"-header-deviceName")).innerText="".concat(a.data.deviceName,"(").concat(a.data.deviceSerial,")"),document.getElementById("".concat(t.jSPlugin.id,"-header-deviceName")).setAttribute("title","".concat(a.data.deviceName,"(").concat(a.data.deviceSerial,")"))),document.getElementById("".concat(t.jSPlugin.id,"-header-signalType"))&&(document.getElementById("".concat(t.jSPlugin.id,"-header-signalType")).innerHTML=t.renderSignalType(a.data.signalType)),document.getElementById("".concat(t.jSPlugin.id,"-header-batteryStatus"))&&(document.getElementById("".concat(t.jSPlugin.id,"-header-batteryStatus")).innerHTML=t.renderBatteryStatus(a.data.batteryStatus)),t.timer.createInterval("InspectDevInfoTimer",(function(){t.getInspectDevInfo(e,!1,!1)}),3e5),i&&t.getInspectRecord()):(t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-loading-box"),!1),t.jSPlugin.stop(),t.globalContainer.deviceErrorInfo({tips:"当前设备未在巡检中",refreshBtn:"刷新",refreshShow:!0},(function(){t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-no-inspect-box"),!1),t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-loading-box"),!0),t.getInspectDevInfo(e,!0,!0)}))):(t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-loading-box"),!1),t.jSPlugin.stop(),t.globalContainer.deviceErrorInfo({tips:a.meta.message,refreshShow:!1}))},o=function(){t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-global-box"),!1)};At(e,a,o)}},{key:"fetchThemeData",value:function(e){var t=this,i=function(e){if(0!==e.meta.code||!e.data)return t.activeThemeStatus=!1,t.jSPlugin.pluginStatus.loadingClear(),"111021"==e.meta.code?(t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-loading-box"),!1),t.jSPlugin.stop(),t.globalContainer.deviceErrorInfo({tips:"无效的模板id",refreshBtn:"刷新",refreshShow:!1}),void(t.activeThemeStatusTxt="无效的模板id")):"111023"==e.meta.code?(t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-loading-box"),!1),t.jSPlugin.stop(),t.globalContainer.deviceErrorInfo({tips:"您的试用特权已到期，需前往轻应用控制台购买后使用。",refreshBtn:"刷新",refreshShow:!1}),void(t.activeThemeStatusTxt="试用特权已到期")):(t.globalContainer.globalContainerToggle("".concat(t.jSPlugin.id,"-inspect-loading-box"),!1),t.jSPlugin.stop(),t.globalContainer.deviceErrorInfo({tips:"模板未激活，请先在开放平台轻应用控制台购买模板",refreshBtn:"刷新",refreshShow:!1}),void(t.activeThemeStatusTxt="模板未激活"));t.activeThemeStatus=!0,t.themeData=e.data,t.jSPlugin.capacity?(t.initThemeData(),t.renderThemeData()):setTimeout((function(){t.initThemeData(),t.renderThemeData()}),300)},n=function(){t.themeData=Wt.data,t.themeData.header&&(t.themeData.header.btnList=t.themeData.header.btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),t.themeData.footer&&(t.themeData.footer.btnList=t.themeData.footer.btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),t.initThemeData(),t.renderThemeData()};Qe(this.jSPlugin,e,i,n)}}]),e}(),Kt=function(){function e(t){var i=this;if(r(this,e),d(this,"changeInspectMode",(function(e){i.inspectMode=e})),this.jSPlugin=t,this.videoWidth=t.width,this.videoHeight=t.height,this.inspectMode="video",this.autoFocus=0,this.decoderState={state:{isEditing:!1,play:!1,sound:!1,recordvideo:!1,recordCount:"00:00",talk:!1,mute:!1,rejection:!1,cloudRec:"cloud.rec"===M(t.url).type,rec:"rec"===M(t.url).type,type:M(t.url).type}},this.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),"undefined"!==typeof t.isMobile&&(this.isMobile=t.isMobile),this.themeData=Wt.data,"themeData"==this.jSPlugin.themeId&&(this.themeData=this.jSPlugin.params.themeData),this.timer||(this.timer=new Ct(t)),this.jSPlugin.themeId)switch(this.isMobile||(this.inspect=new qt(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState,this.inspectMode,this.changeInspectMode,this.timer)),this.jSPlugin.themeId){case"themeData":this.themeData=this.jSPlugin.params.themeData,this.inspect.initThemeData(),this.inspect.renderThemeData();break;default:this.inspect.fetchThemeData(this.jSPlugin.themeId);break}this.jSPlugin.Talk||(this.jSPlugin.Talk=new we(this.jSPlugin)),S("".concat(this.jSPlugin.staticPath,"/css/theme.css")),S("".concat(this.jSPlugin.staticPath,"/css/component.css")),S("".concat(this.jSPlugin.staticPath,"/css/inspectTheme.css"))}return l(e,[{key:"setDecoderState",value:function(e,t){var i=this,n="#FFFFFF",a="#1890FF";Object.keys(e).map((function(t){switch(t){case"talk":document.getElementById("".concat(i.jSPlugin.id,"-talk"))&&(document.getElementById("".concat(i.jSPlugin.id,"-talk")).className=e[t]?"active":"",document.getElementById("".concat(i.jSPlugin.id,"-talk-content")).childNodes[1].style.fill=e[t]?a:n,document.getElementById("".concat(i.jSPlugin.id,"-talk-content")).childNodes[2].style.color=e[t]?a:n);break;case"sound":document.getElementById("".concat(i.jSPlugin.id,"-sound"))&&(e[t]?(document.getElementById("".concat(i.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(i.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:none",document.getElementById("".concat(i.jSPlugin.id,"-sound")).className=e[t]?"active":"",document.getElementById("".concat(i.jSPlugin.id,"-sound-content")).childNodes[0].children[1].style.fill=e[t]?a:n,document.getElementById("".concat(i.jSPlugin.id,"-sound-label")).style.color=e[t]?a:n):(document.getElementById("".concat(i.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(i.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:none",document.getElementById("".concat(i.jSPlugin.id,"-sound")).className=e[t]?"active":"",document.getElementById("".concat(i.jSPlugin.id,"-sound-label")).style.color=e[t]?a:n));break}i.decoderState.state=Object.assign(i.decoderState.state,e)}))}},{key:"setDisabled",value:function(e){var t=this.decoderState.state,i=t.sound;t.hd,null!=document.getElementById("".concat(this.jSPlugin.id,i?"-sound-icon":"-nosound-icon"))&&document.getElementById("".concat(this.jSPlugin.id,i?"-sound-icon":"-nosound-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-sound-label"))&&document.getElementById("".concat(this.jSPlugin.id,"-sound-label")).setAttribute("style",e?"cursor: not-allowed; color: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-talk-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-talk-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-talk-label"))&&document.getElementById("".concat(this.jSPlugin.id,"-talk-label")).setAttribute("style",e?"cursor: not-allowed; color: gray":"cursor: default")}},{key:"inspectEnding",value:function(){var e=document.createElement("div");e.id="".concat(this.jSPlugin.id,"-inspect-ending-box"),e.style="width:100%; height: ".concat(this.videoHeight+112,"px; position: absolute; z-index: 10000; bottom:0; left:0; background: #ffffff;"),e.innerHTML='<div style="\n      overflow: auto;\n      box-sizing: border-box;\n      font-size: 14px;\n      color: #595959;\n      text-align: center;\n      padding-top: '.concat((this.videoHeight+62)/2,'px;\n    ">\n    <div style="text-align:center; height: 21px;">\n    <svg t="1689074472491" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7172" xmlns:xlink="http://www.w3.org/1999/xlink" width="21" height="21"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z" fill="#FF4D4F" p-id="7173"></path></svg>\n    </div>\n    <div style="color: #595959; font-size:14px; margin: 5px 0 16px;font-weight: 400; text-align: center;">巡检已结束</div>\n    '),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).parentNode.appendChild(e),this.jSPlugin.Zoom&&this.jSPlugin.Zoom.stopZoom()}}]),e}();(function(e,i){"object"===o(t)&&"object"===o(t.exports)?t.exports=e.document?i(e,!0):function(e){if(!e.document)throw new Error("EZUIPlayer requires a window with a document");return i(e)}:i(e)})("undefined"!==typeof window?window:void 0,(function(e,t){var i;function n(e,t){for(var i=document.getElementsByTagName("head")[0].getElementsByTagName("script"),n=!1,a=0;a<i.length;a++)i[a].getAttribute("src")==e&&(n=!0,t());if(!n){var o=document.createElement("script");o.setAttribute("src",e),o.onload=t,document.getElementsByTagName("head")[0].appendChild(o)}}function a(e,t){for(var i=document.getElementsByTagName("head")[0].getElementsByTagName("link"),n=!1,a=0;a<i.length;a++)i[a].getAttribute("href")==e&&(n=!0,t());if(!n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=t,document.getElementsByTagName("head")[0].appendChild(o)}}function r(e,t,i,n,a,o){var r=e,s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=JSON.parse(s.responseText);a(e)}},s.open(t,r,!0);var l=new FormData;for(var d in i)l.append(d,i[d]);s.send(l)}var s={EZUIKitPlayer:void 0,EZUIKitTalk:void 0,opt:{apiDomain:"https://open.ys7.com/api/lapp/live/talk/url",filePath:"https://open.ys7.com/assets/ezuikit_v2.6.4",accessToken:"",url:"",deviceSerial:"",channelNo:"",id:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,videoLoading:!1},state:(i={countTimer:void 0,recodeTime:0,recodeTimer:void 0},d(i,"recodeTime",0),d(i,"fetchDefaultList",!1),d(i,"page",0),d(i,"pageSize",5),i),handleTalkSuccess:function(){},handleTalkError:function(){}},l="https://open.ys7.com",c=l,u=function(t){var i=this;this.opt={id:t.id,apiDomain:l+"/api/lapp/live/talk/url",filePath:c+"/assets/ezuikit_v2.6.4",decoderVersion:"",accessToken:"",url:"",deviceSerial:"",channelNo:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,fullScreenStatus:0,bSupporDoubleClickFull:!0,videoLoading:!1},this.params=t,t.id&&(this.opt.id=t.id),t.accessToken&&(this.opt.accessToken=t.accessToken),"undefined"!==typeof t.audio&&(this.opt.audio=t.audio),"undefined"!==typeof t.decoderVersion&&(this.opt.decoderVersion=t.decoderVersion),"undefined"!==typeof t.env&&("undefined"!==typeof t.env.domain&&(l=t.env.domain,this.opt.apiDomain=l+"/api/lapp/live/talk/url"),"undefined"!==typeof t.env.filePathDomain&&(c=t.env.filePathDomain,this.opt.filePathDomain=t.env.filePathDomain)),t.url&&(this.opt.url=t.url,this.opt.deviceSerial=t.url.split("/")[3],this.opt.channelNo=t.url.split("/")[4].split(".")[0]),"undefined"!==typeof t.template&&(this.opt.template=t.template),t.plugin&&(this.opt.plugin=t.plugin),"undefined"!==typeof t.autoplay&&(this.opt.autoplay=t.autoplay?1:0),"undefined"!==typeof t.bSupporDoubleClickFull&&(this.opt.bSupporDoubleClickFull=t.bSupporDoubleClickFull),"undefined"!==typeof t.handleTalkSuccess&&(e.EZUIKit.handleTalkSuccess=t.handleTalkSuccess),"undefined"!==typeof t.handleTalkError&&(e.EZUIKit.handleTalkError=t.handleTalkError);var d=this.opt.id,u=document.getElementById(d);u.style.fontSize=0,u.style.overflowY="auto",u.style.position="relative";var h=document.createElement("iframe");function x(){switch(i.opt.template){case"simple":var e=l+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+i.opt.url.replace("?","&")+"&autoplay="+i.opt.autoplay+"&audio="+i.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+d+"&decoderVersion="+i.opt.decoderVersion,n="";return"undefined"!==typeof t.controls&&t.controls&&(console.log("typeof",o(t.controls)),n="play,voice,hd,fullScreen",t.controls.length>0&&(n=t.controls.join(","),e+="&controls="+n)),t.websocketParams&&(e+="&websocketParams="+JSON.stringify(t.websocketParams)),e;case"standard":return l+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+i.opt.url.replace("?","&")+"&autoplay="+i.opt.autoplay+"&audio="+i.opt.audio+"&accessToken="+t.accessToken+"&templete=1&id="+d+"&decoderVersion="+i.opt.decoderVersion;case"security":return l+"/ezopen/h5/iframe_se?bSupporDoubleClickFull=0&url="+i.opt.url.replace("?","&")+"&autoplay="+i.opt.autoplay+"&audio="+i.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+d+"&decoderVersion="+i.opt.decoderVersion;case"theme":return e=l+"/jssdk/theme.html?url=".concat(t.url,"&accessToken=").concat(t.accessToken,"&id=").concat(d,"&isMobile=").concat(t.isMobile),"undefined"!==typeof t.isMobile&&(e+="&isMobile="+t.isMobile),"undefined"!==typeof t.autoplay&&(e+="&autoplay="+t.autoplay),"undefined"!==typeof t.domain&&"https://test12open.ys7.com"==t.domain&&(e+="&env=test12"),"undefined"!==typeof t.env&&"undefined"!==typeof t.env.domain&&"https://test12open.ys7.com"==t.env.domain&&(e+="&env=test12"),"undefined"!==typeof t.header&&(e+="&header="+t.header),e;default:return l+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+i.opt.url.replace("?","&")+"&autoplay="+i.opt.autoplay+"&audio="+i.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+d+"&decoderVersion="+i.opt.decoderVersion}}h.src=x();var f=document.getElementById(d).offsetHeight,p=document.getElementById(d).offsetWidth;t.height&&(f=parseInt(t.height),/\%$/.test(t.height)&&(p=document.getElementById(d).offsetWidth*(parseInt(t.height)/100))),t.width&&(p=parseInt(t.width),/\%$/.test(t.width)&&(p=document.getElementById(d).offsetWidth*(parseInt(t.width)/100))),h.width=p,h.height=f,h.id="EZUIKitPlayer-"+d,h.setAttribute("allowfullscreen",!0),h.setAttribute("allow","autoplay"),h.setAttribute("frameborder",0),u.appendChild(h);var m=i.opt.filePath+"/js/jquery.js",_="https://open.ys7.com/assets/layer/layer.js";n(m,(function(){n(_,(function(){if(g().headerContainer){var o=document.createElement("div");o.setAttribute("class","panel-top");var d=document.createElement("div");if(d.setAttribute("class","contros"),o.appendChild(d),u.insertBefore(o,h),g().capturePictureModule){var c=document.createElement("span");c.innerHTML='<span title="截图"><svg id="capturePicture" title="截图" t="1578882764585" class="icon" viewBox="0 0 1024 1024" version="1.1"  xmlns="http://www.w3.org/2000/svg" p-id="5958" width="24" height="24">  <path    d="M887.296 315.904h-153.6c-51.2 0-68.096-102.4-119.296-102.4H392.704c-34.304 0-51.2 102.4-102.4 102.4h-153.6c-29.696 0-51.2 21.504-51.2 51.2v439.296c0 25.6 21.504 47.104 51.2 47.104h751.104c29.696 0 51.2-21.504 51.2-51.2v-435.2c-0.512-30.208-21.504-51.2-51.712-51.2zM512 768c-115.2 0-204.8-89.6-204.8-200.704s89.6-200.704 204.8-200.704 204.8 89.6 204.8 200.704-93.696 200.704-204.8 200.704z m247.296-354.304c-12.8 0-25.6-12.8-25.6-25.6s12.8-25.6 25.6-25.6 25.6 12.8 25.6 25.6c0 17.408-12.8 25.6-25.6 25.6zM256 264.704c0-8.704-8.704-16.896-16.896-16.896h-51.2c-8.704 0-16.896 8.704-16.896 16.896V281.6H256v-16.896z m256 148.992c-85.504 0-153.6 68.096-153.6 153.6s68.096 153.6 153.6 153.6 153.6-68.096 153.6-153.6-68.096-153.6-153.6-153.6z"    fill="#ffffff" p-id="5959"></path></svg></span>',c.onclick=function(){i.capturePicture()},d.appendChild(c)}if(console.log("matchHeaderOpt().saveModule",g().saveModule),g().saveModule){var x=document.createElement("span");x.innerHTML='<span title="开始录像">  <svg id="startSave" t="1578882716693" class="icon" viewBox="0 0 1024 1024" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">    <path      d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"      p-id="3783" fill="#ffffff"></path>  </svg></span>',x.onclick=function(){i.startSave(),document.getElementById("startSave").setAttribute("class","icon hide"),document.getElementById("stopSave").setAttribute("class","icon")},d.appendChild(x);var f=document.createElement("span");f.innerHTML='<span title="结束录像"> <svg id="stopSave" t="1578882716693" class="icon hide" viewBox="0 0 1024 1024" version="1.1"   xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">   <path     d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"     p-id="3783" fill="red"></path> </svg> </span>',f.onclick=function(){i.stopSave(),document.getElementById("stopSave").setAttribute("class","icon hide"),document.getElementById("startSave").setAttribute("class","icon")},d.appendChild(f)}if(g().zoomModule){var p=document.createElement("span");p.innerHTML='<span title="开启电子放大">  <svg id="enableZoom" t="1578882639834" class="icon" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="#ffffff"></path>  </svg></span>',p.onclick=function(){i.enableZoom(),document.getElementById("enableZoom").setAttribute("class","icon hide"),document.getElementById("closeZoom").setAttribute("class","icon")},d.appendChild(p);var m=document.createElement("span");m.innerHTML='<span title="关闭电子放大">  <svg id="closeZoom" t="1578882639834" class="icon hide" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="red"></path>  </svg></span>',m.onclick=function(){i.closeZoom(),document.getElementById("closeZoom").setAttribute("class","icon hide"),document.getElementById("enableZoom").setAttribute("class","icon")},d.appendChild(m)}}function _(){var e={footerContainer:!1,talkModule:!1,broadcastModule:!1,hdModule:!1,fullScreenModule:!1},n=i.opt.template;switch(n){case"simple":if(t.footer&&t.footer instanceof Array){var a=t.footer;e={footerContainer:!0,talkModule:-1!==a.indexOf("talk"),broadcastModule:-1!==a.indexOf("broadcast"),hdModule:-1!==a.indexOf("hd"),fullScreenModule:-1!==a.indexOf("fullScreen")}}break;case"standard":if(t.footer&&t.footer instanceof Array){a=t.footer;e={footerContainer:!0,talkModule:-1!==a.indexOf("talk"),broadcastModule:-1!==a.indexOf("broadcast"),hdModule:-1!==a.indexOf("hd"),fullScreenModule:-1!==a.indexOf("fullScreen")}}break;case"security":break;case"voice":e={footerContainer:!0,talkModule:!0,broadcastModule:!0,hdModule:!0,fullScreenModule:!0};break}return e}function g(){var e={headerContainer:!1,capturePictureModule:!1,saveModule:!1,zoomModule:!1},n=i.opt.template;switch(n){case"simple":if(t.header&&t.header instanceof Array){var a=t.header;e={headerContainer:!0,capturePictureModule:-1!==a.indexOf("capturePicture"),saveModule:-1!==a.indexOf("save"),zoomModule:-1!==a.indexOf("zoom")}}break;case"standard":break;case"security":break;case"voice":e={headerContainer:!0,capturePictureModule:!0,saveModule:!0,zoomModule:!0};break}return e}if(_().footerContainer||-1!==i.opt.plugin.indexOf("talk")){var v=i.opt.filePath+"/npm/css/recoder.css",y=i.opt.filePath+"/npm/js/recoder.js",b=i.opt.filePath+"/recorder.js";if(a(v,(function(){})),n(y,(function(){n(b,(function(){}))})),-1!==i.opt.plugin.indexOf("talk")||_().talkModule){var S=function(t){if(console.log("data",t),200==t.code){var a=t.data;if(a){var o=a.rtcUrl;-1===o.indexOf("ws")&&(o=o.replace("https","wss").replace("rtcgw","rtcgw-ws")),i.opt.rtcUrl=o,i.opt.ttsUrl="tts://"+a.ttsUrl;var r="talk://"+i.opt.deviceSerial+":0:"+i.opt.channelNo+":cas.ys7.com:6500";if(i.opt.talkLink=i.opt.ttsUrl+"/"+r,i.opt.stream=a.stream,console.log("_this.opt",i.opt),!i.opt.isReliesReady){var l=i.opt.filePath+"/npm/js/adapeter.js",d=i.opt.filePath+"/npm/js/janus.js",c=i.opt.filePath+"/npm/js/tts.js";console.log("加载jquery.js"),n(l,(function(){console.log("加载adapeter.js"),n(d,(function(){console.log("加载janus.js"),n(c,(function(){console.log("加载tts.js"),i.opt.isReliesReady=!0}))}))}),(function(){return!!e.adapter}))}if(!document.getElementById("audioleft")){var u=document.createElement("div");u.style.display="none",u.id="audioleft",document.body.appendChild(u)}if(!document.getElementById("audioright")){var h=document.createElement("div");h.style.display="none",h.id="audioright",document.body.appendChild(h)}}}s.opt=i.opt,e.EZUIKit&&(e.EZUIKit.opt=i.opt)};r(i.opt.apiDomain,"POST",{accessToken:i.opt.accessToken,deviceSerial:i.opt.deviceSerial,channelNo:i.opt.channelNo},"",S)}if(_().footerContainer){var C=function(e,t){if(clearInterval(s.state.countTimer),"add"===e){var i=t;s.state.countTimer=setInterval((function(){++i,document.getElementById("time-area").innerHTML=n(i)}),1e3)}else if("sub"===e){i=t;s.state.countTimer=setInterval((function(){i>0?(i--,document.getElementById("time-area").innerHTML=n(i)):(clearInterval(s.state.countTimer),s.state.countTimer=void 0,console.log("倒计时结束，开启声音"))}),1e3)}else"destory"===e&&(clearInterval(s.state.countTimer),s.state.countTimer=void 0,document.getElementById("time-area").innerHTML="00:00");function n(e){var t=parseInt(e),i=0,n=0,a="00",o="00",r="00";return t>59&&(i=parseInt(t/60),t=parseInt(t%60),i>59&&(n=parseInt(i/60),i=parseInt(i%60))),a=parseInt(t)>9?parseInt(t):"0"+parseInt(t),o=parseInt(i)>9?parseInt(i):"0"+parseInt(i),r=parseInt(n)>9?parseInt(n):"0"+parseInt(n),n>0?r+":"+o+":"+a:i>0?o+":"+a:"00:"+a}},w=document.createElement("div");if(w.setAttribute("class","audio-controls"),u.appendChild(w),_().hdModule||_().fullScreenModule){var T=document.createElement("div");if(T.setAttribute("class","contros"),w.appendChild(T),_().hdModule){var P=document.createElement("span");P.setAttribute("id","video-hd"),P.innerHTML=-1===i.opt.url.indexOf(".hd")?"标清":"高清",P.onclick=function(){if(i.opt.videoLoading)return layer.msg("视频加载中，请稍后"),!1;var e=i.stop();i.opt.videoLoading=!0,e.then((function(e){i.opt.videoLoading=!1,-1===i.opt.url.indexOf(".hd")?(i.opt.url=i.opt.url.replace(".live",".hd.live"),P.innerHTML=-1===i.opt.url.indexOf(".hd")?"标清":"高清"):(i.opt.url=i.opt.url.replace(".hd.live",".live"),P.innerHTML=-1===i.opt.url.indexOf(".hd")?"标清":"高清"),i.play(i.opt.url)}))["catch"]((function(e){console.log("error",e)}))},T.appendChild(P)}if(_().fullScreenModule){var E=document.createElement("span");E.setAttribute("class","hide"),E.setAttribute("id","ezuikit-open-sound"),E.setAttribute("title","打开声音"),E.setAttribute("style","vertical-align: top;"),E.innerHTML='<svg t="1590476263239" class="icon" viewBox="0 0 1178 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2273" width="16" height="16"><path d="M665.6 51.2 665.6 51.2c-10.24-30.72-40.96-51.2-71.68-51.2-5.12 0-15.36 0-20.48 5.12l0 0L358.4 153.6 51.2 209.92l0 0C20.48 220.16 0 250.88 0 281.6 0 286.72 0 291.84 0 307.2l0 0 0 409.6 0 0c0 15.36 0 20.48 0 25.6 0 30.72 20.48 61.44 51.2 71.68l0 0L358.4 870.4l97.28 71.68 107.52 76.8 0 0c5.12 5.12 15.36 5.12 25.6 5.12 40.96 0 76.8-35.84 76.8-76.8 0-10.24 0-10.24 0-25.6l0 0L665.6 51.2zM563.2 870.4l-153.6-102.4-307.2-51.2L102.4 307.2l307.2-51.2 153.6-102.4L563.2 870.4z" p-id="2274" fill="#FF0000"></path><path d="M1049.6 537.6l112.64-112.64c20.48-20.48 20.48-56.32 0-76.8-20.48-20.48-56.32-20.48-76.8 0L972.8 460.8l-112.64-112.64c0 0 0 0 0 0-20.48-20.48-56.32-20.48-76.8 0 0 0 0 0 0 0-20.48 20.48-20.48 56.32 0 76.8l112.64 112.64-112.64 112.64c-20.48 20.48-20.48 56.32 0 76.8 20.48 20.48 56.32 20.48 76.8 0L972.8 614.4l112.64 112.64c20.48 20.48 56.32 20.48 76.8 0s20.48-56.32 0-76.8L1049.6 537.6z" p-id="2275" fill="#FF0000"></path></svg>',E.onclick=function(){i.openSound(0),E.setAttribute("class","hide"),k.setAttribute("class","")};var k=document.createElement("span");E.setAttribute("id","ezuikit-close-sound"),k.setAttribute("class","hide"),k.setAttribute("title","关闭声音"),k.setAttribute("style","vertical-align: top;"),k.innerHTML='<svg t="1590414410633" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20545" width="16" height="16"><path d="M840.533333 98.133333c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733334C883.2 256 938.666667 392.533333 938.666667 533.333333c0 140.8-55.466667 277.333333-157.866667 375.466667-17.066667 17.066667-17.066667 42.666667 0 59.733333 8.533333 8.533333 21.333333 12.8 29.866667 12.8 8.533333 0 21.333333-4.266667 29.866666-12.8 115.2-110.933333 183.466667-268.8 183.466667-435.2 0-166.4-68.266667-324.266667-183.466667-435.2zM571.733333 12.8c-17.066667-8.533333-34.133333-4.266667-46.933333 8.533333L281.6 256H42.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v426.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h238.933333l243.2 234.666667c8.533333 8.533333 17.066667 12.8 29.866667 12.8 4.266667 0 12.8 0 17.066666-4.266667 17.066667-8.533333 25.6-21.333333 25.6-38.4V51.2c0-17.066667-8.533333-34.133333-25.6-38.4zM512 870.4l-183.466667-179.2c-8.533333-4.266667-17.066667-8.533333-29.866666-8.533333H85.333333V341.333333h213.333334c12.8 0 21.333333-4.266667 29.866666-12.8L512 153.6v716.8z" p-id="20546" fill="#ffffff"></path><path d="M759.466667 349.866667c-12.8-21.333333-38.4-25.6-59.733334-8.533334-21.333333 12.8-25.6 38.4-8.533333 59.733334 21.333333 29.866667 34.133333 76.8 34.133333 123.733333 0 46.933333-12.8 93.866667-34.133333 123.733333-12.8 21.333333-8.533333 46.933333 8.533333 59.733334 8.533333 4.266667 17.066667 8.533333 25.6 8.533333 12.8 0 25.6-4.266667 34.133334-17.066667 34.133333-46.933333 51.2-106.666667 51.2-174.933333 0-68.266667-17.066667-128-51.2-174.933333z" p-id="20547" fill="#ffffff"></path></svg>',k.onclick=function(){i.closeSound(0),E.setAttribute("class",""),k.setAttribute("class","hide")},T.appendChild(E),T.appendChild(k)}if(1==i.opt.audio?k.setAttribute("class",""):(E.setAttribute("class",""),i.closeSound(0)),_().fullScreenModule){var R=document.createElement("span");R.setAttribute("title","全屏"),R.setAttribute("style","vertical-align: top;"),R.innerHTML='<svg id="fullScreen" t="1578020167938" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5035" width="16" height="16"> <path d="M348.373333 625.706667l-128 128-64 64v-128a33.28 33.28 0 0 0-35.413333-35.413334A33.493333 33.493333 0 0 0 85.333333 689.706667v213.333333A33.706667 33.706667 0 0 0 120.96 938.666667h213.333333a35.626667 35.626667 0 0 0 0-71.04h-128l64-64 128-128a35.2 35.2 0 0 0-49.92-49.92zM206.293333 156.373333h128a33.28 33.28 0 0 0 35.413334-35.413333A33.493333 33.493333 0 0 0 334.293333 85.333333H113.706667c-7.04 0-14.08 7.04-21.333334 14.293334a26.026667 26.026667 0 0 0-7.04 21.333333v213.333333a33.493333 33.493333 0 0 0 35.626667 35.413334 33.28 33.28 0 0 0 35.413333-35.413334v-128l192 192a35.2 35.2 0 0 0 49.92-49.92zM903.04 85.333333h-213.333333a33.493333 33.493333 0 0 0-35.413334 35.626667 33.28 33.28 0 0 0 35.413334 35.413333h128l-64 64-128 128a35.2 35.2 0 0 0 49.92 49.92l128-128 64-64v128a35.626667 35.626667 0 0 0 71.04 0v-213.333333A33.706667 33.706667 0 0 0 903.04 85.333333zM903.04 654.293333a33.28 33.28 0 0 0-35.413333 35.413334v128l-64-64-128-128a35.2 35.2 0 0 0-49.92 49.92l128 128 64 64h-128a35.626667 35.626667 0 0 0 0 71.04h213.333333A33.706667 33.706667 0 0 0 938.666667 903.04v-213.333333a33.493333 33.493333 0 0 0-35.626667-35.413334z" p-id="5036" fill="#ffffff"></path></svg>',R.onclick=function(){i.fullScreen()},T.appendChild(R)}}if(_().talkModule){var I=document.createElement("div"),D=document.createElement("div");I.setAttribute("class","ptp-talk off"),I.innerHTML='<span title="对讲"><svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1641" width="16" height="16">  <path    d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"    p-id="1642" fill="#ffffff"></path>  <path    d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"    p-id="1643" fill="#ffffff"></path>  <path    d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"    p-id="1644" fill="#ffffff"></path> </svg> </span> <span>开启对讲</span>',I.onclick=function(){if(console.log("EZUIKit.state.countTimer",s.state.countTimer),s.state.countTimer)return e.layer.msg("语音设备正忙，请稍后重试"),!1;C("add",0),console.log("开始对讲，关闭声音"),i.closeSound(0),console.log(i.opt),i.startTalk(),this.setAttribute("class","ptp-talk off hide"),D.setAttribute("class","ptp-talk on")},D.setAttribute("class","ptp-talk on hide"),D.innerHTML='<span title="对讲"> <svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1641" width="16" height="16">    <path      d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"      p-id="1642" fill="#ff0000"></path>    <path      d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"      p-id="1643" fill="#ff0000"></path>    <path      d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"      p-id="1644" fill="#ff0000"></path>  </svg> </span><span>关闭对讲</span>',D.onclick=function(){console.log(i.opt),i.stopTalk(),C("destory",0),i.openSound(0),this.setAttribute("class","ptp-talk on hide"),I.setAttribute("class","ptp-talk off")},w.appendChild(I),w.appendChild(D)}if(_().broadcastModule){var M=function e(t){function n(i){console.log("data",i),200==i.code&&(A(i.data,5),s.state.page=i.page.page,0!=t||0!=i.data.length||s.state.fetchDefaultList||(s.state.fetchDefaultList=!0,e(0)))}r(l+"/api/lapp/voice/query","POST",{accessToken:i.opt.accessToken,pageStart:t,pageSize:s.state.pageSize,default:s.state.fetchDefaultList?"true":"false"},"",n)},A=function(e){if(console.log("renderVoliceList",e),e&&e.length>0){for(var t=0;t<e.length;t++){var i=document.createElement("li");i.innerHTML="<li class='voice-item' id='voice-item-"+t+"' data-time="+(e[t]["duration"]||20)+" data-url="+e[t]["fileUrl"]+">"+(e[t]["voiceName"].length>10?e[t]["voiceName"].substr(0,10)+"...":e[t]["voiceName"])+"</li>",document.getElementsByClassName("voice-list-ul")[0].append(i),i.onclick=function(e){console.log("点击元素",e.target,e.target.dataset.url);var t=e.target.dataset.url,i=e.target.dataset.time;B(t,i)}}e.length===s.state.pageSize?document.getElementById("voice-list-end").innerHTML="向下滚动加载更多":document.getElementById("voice-list-end").innerHTML="没有更多数据了"}},B=function(t,n){function a(t){console.log("data.data",t.data),200==t.code?C("sub",parseInt(n)):"10001"==t.code?e.layer.msg("未找到当前语音"):e.layer.msg(t.msg||"发送失败，请稍后再试")}console.log("播放语音",t,n),r(l+"/api/lapp/voice/send","POST",{accessToken:i.opt.accessToken,deviceSerial:i.opt.deviceSerial,channelNo:i.opt.channelNo,fileUrl:t},"",a)},L=document.createElement("div"),F=document.createElement("div");L.setAttribute("class","broadcast off"),F.setAttribute("class","broadcast on hide"),L.innerHTML=' <span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ffffff" p-id="1127"></path>  </svg></span><span>语音播报</span>',L.onclick=function(){this.setAttribute("class","broadcast off hide"),F.setAttribute("class","broadcast on")},F.innerHTML='<div class="pop-hover">  <div class="pop-hover-content">    <div class="vioce-list" id="voice-list">      <ul class="voice-list-ul">      </ul>      <div id="voice-list-end"></div>    </div>    <div id="voice-custom" style="text-align: center;">自定义语音</div>  </div></div><span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ff0000" p-id="1127"></path>  </svg></span><span>语音播报</span>',F.onclick=function(){this.setAttribute("class","broadcast on hide"),L.setAttribute("class","broadcast off")},w.appendChild(L),w.appendChild(F),document.getElementById("voice-custom").onclick=function(){console.log("显示自定义语音"),j.setAttribute("class","speak off")},M(0);var j=document.createElement("div"),z=document.createElement("div");j.setAttribute("class","speak off hide"),z.setAttribute("class","speak on hide"),j.setAttribute("id","startSpeak"),z.setAttribute("id","stopSpeak"),j.innerHTML='<span title="按住说话">  <svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1639" width="16" height="16">    <path      d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"      p-id="1640" fill="#ffffff"></path>  </svg></span><span>按住说话</span>',z.innerHTML='<span title="按住说话"><svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1639" width="16" height="16">  <path    d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"    p-id="1640" fill="#ff0000"></path></svg></span><span>松开发送</span>',w.appendChild(j),w.appendChild(z),document.getElementById("voice-list").onscroll=function(e){var t=this.scrollHeight;console.log("sum",t,this.scrollTop,document.getElementById("voice-list").clientHeight),t<=this.scrollTop+this.clientHeight&&(console.log("拖动到底，执行加载",s.state.page),M(++s.state.page))};var O,N=document.createElement("div");N.setAttribute("class","time-area"),N.setAttribute("id","time-area"),N.innerHTML="00:00",w.appendChild(N),document.getElementById("startSpeak").onmousedown=function(){if(s.state.countTimer)return e.layer.msg("语音设备正忙，请稍后重试"),!1;var t;function n(i){var n=t.createMediaStreamSource(i);O=new e.Recorder(n)}function a(){O&&O.record()}function o(){console.log("run init");try{e.AudioContext=e.AudioContext||e.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,e.URL=e.URL||e.webkitURL,t=new AudioContext,console.log("Audio context set up."),console.log("navigator.getUserMedia "+(navigator.getUserMedia?"available.":"not present!"))}catch(ia){console.log("err",ia),e.layer.msg("No web audio support in this browser!")}navigator.getUserMedia({audio:!0},n,(function(e){console.log("No live audio input: "+e)}))}console.log("按住说话"),j.setAttribute("class","speak off hide"),z.setAttribute("class","speak on"),o(),C("add",0),setTimeout((function(){s.state.recodeTime=0,a()}),1e3),s.state.recodeTimer&&clearInterval(s.state.recodeTimer),s.state.recodeTimer=setInterval((function(){s.state.recodeTime>=59?(i.stopTalk(),C("destory",0),this.setAttribute("class","ptp-talk on hide"),I.setAttribute("class","ptp-talk off"),e.layer.msg("不超过1分钟")):s.state.recodeTime=s.state.recodeTime+1}),1e3)},document.getElementById("stopSpeak").onmouseup=function(){function t(){if(C("destory",0),s.state.recodeTime<1)return e.layer.msg("说话时间过短"),clearInterval(s.state.recodeTimer),!1;clearInterval(s.state.recodeTimer),n()}function n(){try{O&&O.stop(),O&&O.exportWAV((function(t){if(console.log("wav_file",t),t.size<1e3)return e.layer.msg("录音失败，请重试"),s.state.recodeTime=0,!1;C("sub",s.state.recodeTime+2);var n=new FormData;function a(t){console.log("data.data",t.data),200==t.code?C("sub",s.state.recodeTime+2):"10001"==t.code?e.layer.msg("未找到当前语音"):e.layer.msg(t.msg||"发送失败，请稍后再试")}function o(e){console.log("err",e)}n.append("voiceFile",t),n.append("accessToken",i.opt.accessToken),n.append("deviceSerial",i.opt.deviceSerial),n.append("channelNo",i.opt.channelNo),r(l+"/api/lapp/voice/sendonce","POST",{voiceFile:t,accessToken:i.opt.accessToken,deviceSerial:i.opt.deviceSerial,channelNo:i.opt.channelNo},"",a,o)})),O&&O.clear()}catch(t){console.log(t)}}console.log("松开发送"),z.setAttribute("class","speak on hide"),t()}}}}}))}));i=this;function g(e){i.opt.fullScreenStatus=e?1:0,t.fullScreenChangeCallBack&&t.fullScreenChangeCallBack({data:e,id:i.opt.id})}e.addEventListener("message",(function(n){n.origin;var a=i.opt.id;if(n.data.type)switch(n.data.type){case"openSound":a==n.data.id&&t.openSoundCallBack&&t.openSoundCallBack(n.data);break;case"closeSound":a==n.data.id&&t.closeSoundCallBack&&t.closeSoundCallBack(n.data);break;case"capturePicture":a==n.data.id&&t.capturePictureCallBack&&t.capturePictureCallBack(n.data);break;case"startSave":a==n.data.id&&t.startSaveCallBack&&t.startSaveCallBack(n.data);break;case"stopSave":a==n.data.id&&t.stopSaveCallBack&&t.stopSaveCallBack(n.data);break;case"fullScreen":a==n.data.id&&t.fullScreenCallBack&&t.fullScreenCallBack(n.data);break;case"getOSDTime":a==n.data.id&&t.getOSDTimeCallBack&&t.getOSDTimeCallBack(n.data);break;case"handleSuccess":a==n.data.id&&t.handleSuccess&&t.handleSuccess(n.data);break;case"handleError":a==n.data.id&&t.handleError&&t.handleError(n.data);break;case"dblclick":a==n.data.id&&i.opt.bSupporDoubleClickFull&&(0===i.opt.fullScreenStatus?i.fullScreen():i.cancelFullScreen());break;case"startTalk":i.startTalk(),i.closeSound();break;case"stopTalk":i.stopTalk(),i.openSound();break;case"clickEventHandle":console.log("event.data",n.data),t.clickEventHandle&&t.clickEventHandle(n.data);break;case"removeEventHandle":t.removeEventHandle&&t.removeEventHandle(n.data);break;case"esc":t.clickEventHandle&&t.clickEventHandle(n.data);break;case"iframeFullScreen":if(a==n.data.id){var o=function(t){var i=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(i)i.call(t);else if("undefined"!==typeof e.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}};o(document.getElementById("EZUIKitPlayer-"+n.data.id))}break}})),"undefined"!==typeof document.fullScreen?document.addEventListener("fullscreenchange",(function(){var e=document.fullscreen||!1;g(e)})):"undefined"!==typeof document.webkitIsFullScreen?document.addEventListener("webkitfullscreenchange",(function(){var e=document.webkitIsFullScreen||!1;g(e)})):"undefined"!==typeof document.mozFullScreen&&document.addEventListener("mozfullscreenchange",(function(){var e=document.mozFullScreen||!1;g(e)}))};u.prototype.play=function(t){var i="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(i).contentWindow;"object"===o(t)&&t.url&&(this.opt.url=t.url),"object"===o(t)&&t.accessToken&&(this.opt.accessToken=t.accessToken),"string"===typeof t&&(this.opt.url=t),n.postMessage({action:"play",accessToken:this.opt.accessToken,url:this.opt.url},l+"/ezopen/h5/iframe");var a=this;this.opt.videoLoading=!0;var r=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=a.opt.id;i==e.data.id&&"handleSuccess"===e.data.type&&(setTimeout((function(){a.opt.videoLoading=!1}),1e3),t(e.data))}))}));return r},u.prototype.stop=function(){var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;i.postMessage("stop",l+"/ezopen/h5/iframe");var n=this,a=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=n.opt.id;i==e.data.id&&"stop"===e.data.type&&t(e.data)}))}));return a},u.prototype.openSound=function(){var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;i.postMessage("openSound",l+"/ezopen/h5/iframe");var n=this,a=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=n.opt.id;i==e.data.id&&"openSound"===e.data.type&&t(e.data)}))}));return a},u.prototype.closeSound=function(){var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;i.postMessage("closeSound",l+"/ezopen/h5/iframe");var n=this,a=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=n.opt.id;i==e.data.id&&"closeSound"===e.data.type&&t(e.data)}))}));return a},u.prototype.startSave=function(t){var i="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(i).contentWindow;n.postMessage({action:"startSave",fileName:t||"default"},l+"/ezopen/h5/iframe");var a=this,o=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=a.opt.id;i==e.data.id&&"startSave"===e.data.type&&t(e.data)}))}));return o},u.prototype.stopSave=function(){var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;i.postMessage("stopSave",l+"/ezopen/h5/iframe");var n=this,a=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=n.opt.id;i==e.data.id&&"stopSave"===e.data.type&&t(e.data)}))}));return a},u.prototype.fullScreen=function(){if(1===this.opt.fullScreenStatus)return!1;var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var n=document.documentElement.clientWidth,a=document.documentElement.clientHeight,o=document.body;o=document.getElementById(t);var r="";r+="width:"+a+"px;",r+="height:"+n+"px;",r+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",r+="-webkit-transform-origin: "+n/2+"px "+n/2+"px;",r+="transform-origin: "+n/2+"px "+n/2+"px;",r+="position: fixed;top: 0;left: 0;z-index:10",o.style.cssText=r,setTimeout((function(){i.postMessage("autoResize",l+"/ezopen/h5/iframe")}),500)}else{var s=function(t){var i=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(i)i.call(t);else if("undefined"!==typeof e.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}};s(document.getElementById(t))}this.params.fullScreenCallBack&&this.params.fullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=1},u.prototype.cancelFullScreen=function(){if(0===this.opt.fullScreenStatus)return!1;var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var i=document.getElementById(e).width,n=document.getElementById(e).height,a=document.body;a=document.getElementById(e);var o="";o+="width:"+i+"px;",o+="height:"+n+"px;",o+="-webkit-transform: none; transform: none;",o+="-webkit-transform-origin: 0 0;",o+="transform-origin: 0 0;",a.style.cssText=o,setTimeout((function(){t.postMessage("autoResize",l+"/ezopen/h5/iframe")}),500);var r=e+"cancel-full-screen",s=document.getElementById(r);s&&document.body.removeChild(s)}else document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen();this.params.cancelFullScreenCallBack&&this.params.cancelFullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=0},u.prototype.capturePicture=function(t,i){var n="EZUIKitPlayer-"+this.opt.id,a=document.getElementById(n).contentWindow;a.postMessage({action:"capturePicture",fileName:t||"default",isUndownload:i},l+"/ezopen/h5/iframe");var o=this,r=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=o.opt.id;i==e.data.id&&"capturePicture"===e.data.type&&t(e.data)}))}));return r},u.prototype.enableZoom=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("enableZoom",l+"/ezopen/h5/iframe")},u.prototype.closeZoom=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("closeZoom",l+"/ezopen/h5/iframe")},u.prototype.getOSDTime=function(){var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;i.postMessage("getOSDTime",l+"/ezopen/h5/iframe");var n=this,a=new Promise((function(t,i){e.addEventListener("message",(function(e){var i=n.opt.id;i==e.data.id&&"getOSDTime"===e.data.type&&t(e.data)}))}));return a},u.prototype.autoResize=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("autoResize",l+"/ezopen/h5/iframe")},u.prototype.reSize=function(e,t){var i="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(i).contentWindow,a=document.getElementById(this.opt.id);a.style.width=e+"px",a.style.height=t+"px",document.getElementById(this.opt.id).style.width=e+"px",document.getElementById(this.opt.id).style.height=t+"px";var o=document.getElementById(i);o.setAttribute("width",e),o.setAttribute("height",t),o.style.width=e+"px",o.style.height=t+"px",setTimeout((function(){n.postMessage({action:"autoResize"},l+"/ezopen/h5/iframe")}),500)},u.prototype.startTalk=function(){console.log("执行开始对讲"),console.log(this.opt);var t=this;s.opt=this.opt,e.EZUIKit&&(e.EZUIKit.opt=this.opt);var i=function(i){if(200==i.code){var n=i.data;if(n){var a=n.rtcUrl;-1===a.indexOf("ws")&&(a=a.replace("https","wss").replace("rtcgw","rtcgw-ws")),t.opt.rtcUrl=a,t.opt.ttsUrl="tts://"+n.ttsUrl;var o="talk://"+t.opt.deviceSerial+":0:"+t.opt.channelNo+":cas.ys7.com:6500";t.opt.talkLink=t.opt.ttsUrl+"/"+o,t.opt.stream=n.stream,e.startTalk()}}};r(t.opt.apiDomain,"POST",{accessToken:t.opt.accessToken,deviceSerial:t.opt.deviceSerial,channelNo:t.opt.channelNo},"",i)},u.prototype.stopTalk=function(){console.log("执行结束对讲"),e.stopTalk()},u.prototype.edit=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("edit",l+"/ezopen/h5/iframe")},u.prototype.btnReRender=function(e){var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;i.postMessage({action:"btnReRender",data:e},l+"/ezopen/h5/iframe")},u.prototype.changePlayUrl=function(e){e.deviceSerial&&(this.opt.deviceSerial=e.deviceSerial),e.channelNo&&(this.opt.channelNo=e.channelNo),e.accessToken&&(this.opt.accessToken=e.accessToken);var t="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(t).contentWindow;i.postMessage({action:"changePlayUrl",data:e},l+"/ezopen/h5/iframe")},u.prototype.fetchThemeData=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage({action:"fetchThemeData"},l+"/ezopen/h5/iframe")},u.prototype.setThemeData=function(e,t,i){var n="EZUIKitPlayer-"+this.opt.id,a=document.getElementById(n).contentWindow;a.postMessage({action:"setThemeData",data:{accessToken:e,header:t,footer:i}},l+"/ezopen/h5/iframe")},s.EZUIKitPlayer=u,e.EZUIKitV3=s;var h=s;return h}));var $t=EZUIKitV3,Qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=void 0,a=void 0,o=void 0,r=[];return function(){var l=ei(t),d=(new Date).getTime(),c=!n||d-n>l;n=d;for(var u=arguments.length,h=Array(u),x=0;x<u;x++)h[x]=arguments[x];if(c&&i.leading)return i.accumulate?Promise.resolve(e.call(this,[h])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(h)));if(a?clearTimeout(o):a=ti(),r.push(h),o=setTimeout(s.bind(this),l),i.accumulate){var f=r.length-1;return a.promise.then((function(e){return e[f]}))}return a.promise};function s(){var t=a;clearTimeout(o),Promise.resolve(i.accumulate?e.call(this,r):e.apply(this,r[r.length-1])).then(t.resolve,t.reject),r=[],a=null}};function ei(e){return"function"===typeof e?e():e}function ti(){var e={};return e.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),e}var ii=O(Qt);(function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e};function n(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof z&&z];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}var a,o=n(this);function r(e,t){if(t)e:{var n=o;e=e.split(".");for(var a=0;a<e.length-1;a++){var r=e[a];if(!(r in n))break e;n=n[r]}e=e[e.length-1],a=n[e],t=t(a),t!=a&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function l(e){var i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return i?i.call(e):{next:t(e)}}if(r("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(a+(e||"")+"_"+o++,e)}function n(e,t){this.A=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.A};var a="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",o=0;return t})),r("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<n.length;a++){var r=o[n[a]];"function"===typeof r&&"function"!=typeof r.prototype[e]&&i(r.prototype,e,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return e})),"function"==typeof Object.setPrototypeOf)a=Object.setPrototypeOf;else{var d;e:{var c={a:!0},u={};try{u.__proto__=c,d=u.a;break e}catch(ra){}d=!1}a=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var h=a;function x(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function f(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function p(e,t){return e.h=3,{value:t}}function m(e){this.g=new x,this.G=e}function _(e,t){f(e.g);var i=e.g.j;return i?g(e,"return"in i?i["return"]:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),v(e))}function g(e,t,i,n){try{var a=t.call(e.g.j,i);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.m=!1,a;var o=a.value}catch(ga){return e.g.j=null,e.g.s(ga),v(e)}return e.g.j=null,n.call(e.g,o),v(e)}function v(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(la){e.g.v=void 0,e.g.s(la)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return _(e,t)},this[Symbol.iterator]=function(){return this}}function b(e,t){return t=new y(new m(t)),h&&e.prototype&&h(t,e.prototype),t}function S(e,t){e instanceof String&&(e+="");var i=0,n=!1,a={next:function(){if(!n&&i<e.length){var a=i++;return{value:t(a,e[a]),done:!1}}return n=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}if(x.prototype.o=function(e){this.v=e},x.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},x.prototype.return=function(e){this.l={return:e},this.h=this.u},m.prototype.o=function(e){return f(this.g),this.g.j?g(this,this.g.j.next,e,this.g.o):(this.g.o(e),v(this))},m.prototype.s=function(e){return f(this.g),this.g.j?g(this,this.g.j["throw"],e,this.g.o):(this.g.s(e),v(this))},r("Array.prototype.entries",(function(e){return e||function(){return S(this,(function(e,t){return[e,t]}))}})),"undefined"!==typeof Blob&&("undefined"===typeof FormData||!FormData.prototype.keys)){var C=function(e,t){for(var i=0;i<e.length;i++)t(e[i])},w=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},T=function(e,t,i){return t instanceof Blob?(i=void 0!==i?String(i+""):"string"===typeof t.name?t.name:"blob",t.name===i&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],i)),[String(e),t]):[String(e),String(t)]},P=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},E="object"===typeof globalThis?globalThis:"object"===typeof window?window:"object"===typeof self?self:this,k=E.FormData,R=E.XMLHttpRequest&&E.XMLHttpRequest.prototype.send,I=E.Request&&E.fetch,D=E.navigator&&E.navigator.sendBeacon,M=E.Element&&E.Element.prototype,A=E.Symbol&&Symbol.toStringTag;A&&(Blob.prototype[A]||(Blob.prototype[A]="Blob"),"File"in E&&!File.prototype[A]&&(File.prototype[A]="File"));try{new File([],"")}catch(ra){E.File=function(e,t,i){return e=new Blob(e,i||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(i&&void 0!==i.lastModified?new Date(i.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),A&&Object.defineProperty(e,A,{value:"File"}),e}}var B=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},L=function(e){this.i=[];var t=this;e&&C(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var i=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];C(i,(function(i){t.append(e.name,i)}))}else"select-multiple"===e.type||"select-one"===e.type?C(e.options,(function(i){!i.disabled&&i.selected&&t.append(e.name,i.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(i="textarea"===e.type?w(e.value):e.value,t.append(e.name,i))}))};if(e=L.prototype,e.append=function(e,t,i){P(arguments,2),this.i.push(T(e,t,i))},e.delete=function(e){P(arguments,1);var t=[];e=String(e),C(this.i,(function(i){i[0]!==e&&t.push(i)})),this.i=t},e.entries=function e(){var t,i=this;return b(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<i.i.length?e=p(e,i.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){P(arguments,1);for(var i=l(this),n=i.next();!n.done;n=i.next()){var a=l(n.value);n=a.next().value,a=a.next().value,e.call(t,a,n,this)}},e.get=function(e){P(arguments,1);var t=this.i;e=String(e);for(var i=0;i<t.length;i++)if(t[i][0]===e)return t[i][1];return null},e.getAll=function(e){P(arguments,1);var t=[];return e=String(e),C(this.i,(function(i){i[0]===e&&t.push(i[1])})),t},e.has=function(e){P(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,i,n,a,o,r=this;return b(e,(function(e){if(1==e.h&&(t=l(r),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,a=l(n),o=a.next().value,p(e,o));i=t.next(),e.h=2}))},e.set=function(e,t,i){P(arguments,2),e=String(e);var n=[],a=T(e,t,i),o=!0;C(this.i,(function(t){t[0]===e?o&&(o=!n.push(a)):n.push(t)})),o&&n.push(a),this.i=n},e.values=function e(){var t,i,n,a,o,r=this;return b(e,(function(e){if(1==e.h&&(t=l(r),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,a=l(n),a.next(),o=a.next().value,p(e,o));i=t.next(),e.h=2}))},L.prototype._asNative=function(){for(var e=new k,t=l(this),i=t.next();!i.done;i=t.next()){var n=l(i.value);i=n.next().value,n=n.next().value,e.append(i,n)}return e},L.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],i="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,n){return"string"==typeof e?t.push(i+B(w(n))+'"\r\n\r\n'+w(e)+"\r\n"):t.push(i+B(w(n))+'"; filename="'+B(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},L.prototype[Symbol.iterator]=function(){return this.entries()},L.prototype.toString=function(){return"[object FormData]"},M&&!M.matches&&(M.matches=M.matchesSelector||M.mozMatchesSelector||M.msMatchesSelector||M.oMatchesSelector||M.webkitMatchesSelector||function(e){e=(this.document||this.ownerDocument).querySelectorAll(e);for(var t=e.length;0<=--t&&e.item(t)!==this;);return-1<t}),A&&(L.prototype[A]="FormData"),R){var F=E.XMLHttpRequest.prototype.setRequestHeader;E.XMLHttpRequest.prototype.setRequestHeader=function(e,t){F.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},E.XMLHttpRequest.prototype.send=function(e){e instanceof L?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),R.call(this,e)):R.call(this,e)}}I&&(E.fetch=function(e,t){return t&&t.body&&t.body instanceof L&&(t.body=t.body._blob()),I.call(this,e,t)}),D&&(E.navigator.sendBeacon=function(e,t){return t instanceof L&&(t=t._asNative()),D.call(this,e,t)}),E.FormData=L}})();var ni=1,ai=3,oi=0,ri=256,si=768,li=1536,di=2304,ci=[{place:ai,name:"鱼眼不矫正",type:0,correctType:oi},{place:ai,name:"360°全景",type:1,correctType:si},{place:ai,name:"4分屏",type:4,correctList:[{correctType:ri,x:.25,y:.25},{correctType:ri,x:.75,y:.25},{correctType:ri,x:.25,y:.75},{correctType:ri,x:.75,y:.75}],correctType:ri},{place:ai,name:"柱状",type:5,correctType:li,viewParam:{x:0,y:0}}],ui=[{place:ni,name:"鱼眼不矫正",type:0,correctType:oi},{place:ni,name:"360°全景",type:1,correctType:si},{place:ni,name:"4分屏",type:2,correctList:[{correctType:ri,x:.25,y:.25},{correctType:ri,x:.75,y:.25},{correctType:ri,x:.25,y:.75},{correctType:ri,x:.75,y:.75}],correctType:ri},{place:ni,name:"广角",type:4,correctType:di}],hi={exports:{}};(function(e,t){(function(t,i){e.exports=i()})(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===o(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){a(this,e),this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return n(e,[{key:"$",value:function(e){var t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,i=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(t.test(e)){var n=t.exec(e);return document.getElementById(n[2])}if(i.test(e)){for(var a=i.exec(e),o=document.getElementsByTagName("*"),r=[],s=0,l=o.length;s<l;s++)o[s].className.match(new RegExp("(\\s|^)"+a[2]+"(\\s|$)"))&&r.push(o[s]);return r}}},{key:"dateFormat",value:function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}},{key:"downloadFile",value:function(e,t){var i=e;e instanceof Blob||e instanceof File||(i=new Blob([e]));var n=window.URL.createObjectURL(i),a=window.document.createElement("a");a.href=n,a.download=t;var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),a.dispatchEvent(o)}},{key:"createxmlDoc",value:function(){for(var t,i=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"],n=0,a=i.length;n<a;n++)try{t=new ActiveXObject(i[n]);break}catch(e){t=document.implementation.createDocument("","",null);break}return t.async="false",t}},{key:"parseXmlFromStr",value:function(e){if(null===e||""===e)return null;var t=this.createxmlDoc();if("Netscape"===navigator.appName||"Opera"===navigator.appName){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t.loadXML(e);return t}},{key:"encode",value:function(e){var t,i,n,a,o,r,s,l="",d=0;e=this._utf8_encode(e);while(d<e.length)t=e.charCodeAt(d++),i=e.charCodeAt(d++),n=e.charCodeAt(d++),a=t>>2,o=(3&t)<<4|i>>4,r=(15&i)<<2|n>>6,s=63&n,isNaN(i)?r=s=64:isNaN(n)&&(s=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(s);return l}},{key:"decode",value:function(e){var t,i,n,a,o,r,s,l="",d=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");while(d<e.length)a=this._keyStr.indexOf(e.charAt(d++)),o=this._keyStr.indexOf(e.charAt(d++)),r=this._keyStr.indexOf(e.charAt(d++)),s=this._keyStr.indexOf(e.charAt(d++)),t=a<<2|o>>4,i=(15&o)<<4|r>>2,n=(3&r)<<6|s,l+=String.fromCharCode(t),64!==r&&(l+=String.fromCharCode(i)),64!==s&&(l+=String.fromCharCode(n));return l=this._utf8_decode(l),l}},{key:"_utf8_encode",value:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}},{key:"_utf8_decode",value:function(e){var t="",i=0,n=0,a=0;while(i<e.length)if(n=e.charCodeAt(i),n<128)t+=String.fromCharCode(n),i++;else if(n>191&&n<224)a=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&a),i+=2;else{a=e.charCodeAt(i+1);var o=e.charCodeAt(i+2);t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&o),i+=3}return t}},{key:"isFirefox",value:function(){var e=!1,t=navigator.userAgent.toLowerCase(),i="",n=-1;return t.match(/firefox\/([\d.]+)/)&&(i=t.match(/firefox\/([\d.]+)/)[1],n=parseInt(i.split(".")[0],10),n>-1&&(e=!0)),e}},{key:"isSafari",value:function(){var e=!1,t=navigator.userAgent.toLowerCase(),i="",n=-1;return t.match(/version\/([\d.]+).safari./)&&(i=t.match(/version\/([\d.]+).safari./)[1],n=parseInt(i.split(".")[0],10),n>-1&&(e=!0)),e}},{key:"isEdge",value:function(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}},{key:"isIOS",value:function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return t}}]),e}();t.oTool=new o},function(e,t,i){var n,a;(function(t,i){"object"===o(e.exports)?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)})("undefined"!==typeof window?window:this,(function(i,r){var s=[],l=Object.getPrototypeOf,d=s.slice,c=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},u=s.push,h=s.indexOf,x={},f=x.toString,p=x.hasOwnProperty,m=p.toString,_=m.call(Object),g={},v=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=i.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,i){i=i||b;var n,a,o=i.createElement("script");if(o.text=e,t)for(n in S)a=t[n]||t.getAttribute&&t.getAttribute(n),a&&o.setAttribute(n,a);i.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"===o(e)||"function"===typeof e?x[f.call(e)]||"object":o(e)}var T="3.7.1",P=/HTML$/i,E=function e(t,i){return new e.fn.init(t,i)};function k(e){var t=!!e&&"length"in e&&e.length,i=w(e);return!v(e)&&!y(e)&&("array"===i||0===t||"number"===typeof t&&t>0&&t-1 in e)}function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}E.fn=E.prototype={jquery:T,constructor:E,length:0,toArray:function(){return d.call(this)},get:function(e){return null==e?d.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:s.sort,splice:s.splice},E.extend=E.fn.extend=function(){var e,t,i,n,a,r,s=arguments[0]||{},l=1,d=arguments.length,c=!1;for("boolean"===typeof s&&(c=s,s=arguments[l]||{},l++),"object"===o(s)||v(s)||(s={}),l===d&&(s=this,l--);l<d;l++)if(null!=(e=arguments[l]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(c&&n&&(E.isPlainObject(n)||(a=Array.isArray(n)))?(i=s[t],r=a&&!Array.isArray(i)?[]:a||E.isPlainObject(i)?i:{},a=!1,s[t]=E.extend(c,r,n)):void 0!==n&&(s[t]=n));return s},E.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==f.call(e))&&(t=l(e),!t||(i=p.call(t,"constructor")&&t.constructor,"function"===typeof i&&m.call(i)===_))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){C(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(k(e)){for(i=e.length;n<i;n++)if(!1===t.call(e[n],n,e[n]))break}else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},text:function(e){var t,i="",n=0,a=e.nodeType;if(!a)while(t=e[n++])i+=E.text(t);return 1===a||11===a?e.textContent:9===a?e.documentElement.textContent:3===a||4===a?e.nodeValue:i},makeArray:function(e,t){var i=t||[];return null!=e&&(k(Object(e))?E.merge(i,"string"===typeof e?[e]:e):u.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:h.call(t,e,i)},isXMLDoc:function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!P.test(t||i&&i.nodeName||"HTML")},merge:function(e,t){for(var i=+t.length,n=0,a=e.length;n<i;n++)e[a++]=t[n];return e.length=a,e},grep:function(e,t,i){for(var n,a=[],o=0,r=e.length,s=!i;o<r;o++)n=!t(e[o],o),n!==s&&a.push(e[o]);return a},map:function(e,t,i){var n,a,o=0,r=[];if(k(e))for(n=e.length;o<n;o++)a=t(e[o],o,i),null!=a&&r.push(a);else for(o in e)a=t(e[o],o,i),null!=a&&r.push(a);return c(r)},guid:1,support:g}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=s[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){x["[object "+t+"]"]=t.toLowerCase()}));var I=s.pop,D=s.sort,M=s.splice,A="[\\x20\\t\\r\\n\\f]",B=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g");E.contains=function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))};var L=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function F(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}E.escapeSelector=function(e){return(e+"").replace(L,F)};var j=b,z=u;(function(){var e,t,n,a,o,r,l,c,u,x,f=z,m=E.expando,_=0,v=0,y=te(),b=te(),S=te(),C=te(),w=function(e,t){return e===t&&(o=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="(?:\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",k="\\["+A+"*("+P+")(?:"+A+"*([*^$|!~]?=)"+A+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+A+"*\\]",L=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+k+")*)|.*)\\)|)",F=new RegExp(A+"+","g"),O=new RegExp("^"+A+"*,"+A+"*"),N=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),U=new RegExp(A+"|>"),H=new RegExp(L),V=new RegExp("^"+P+"$"),G={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+k),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,J=new RegExp("\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\([^\\r\\n\\f])","g"),q=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},K=function(){de()},$=xe((function(e){return!0===e.disabled&&R(e,"fieldset")}),{dir:"parentNode",next:"legend"});function Q(){try{return r.activeElement}catch(e){}}try{f.apply(s=d.call(j.childNodes),j.childNodes),s[j.childNodes.length].nodeType}catch(e){f={apply:function(e,t){z.apply(e,d.call(t))},call:function(e){z.apply(e,d.call(arguments,1))}}}function ee(e,t,i,n){var a,o,s,l,d,h,x,p=t&&t.ownerDocument,_=t?t.nodeType:9;if(i=i||[],"string"!==typeof e||!e||1!==_&&9!==_&&11!==_)return i;if(!n&&(de(t),t=t||r,c)){if(11!==_&&(d=Z.exec(e)))if(a=d[1]){if(9===_){if(!(s=t.getElementById(a)))return i;if(s.id===a)return f.call(i,s),i}else if(p&&(s=p.getElementById(a))&&ee.contains(t,s)&&s.id===a)return f.call(i,s),i}else{if(d[2])return f.apply(i,t.getElementsByTagName(e)),i;if((a=d[3])&&t.getElementsByClassName)return f.apply(i,t.getElementsByClassName(a)),i}if(!C[e+" "]&&(!u||!u.test(e))){if(x=e,p=t,1===_&&(U.test(e)||N.test(e))){p=X.test(e)&&le(t.parentNode)||t,p==t&&g.scope||((l=t.getAttribute("id"))?l=E.escapeSelector(l):t.setAttribute("id",l=m)),h=ue(e),o=h.length;while(o--)h[o]=(l?"#"+l:":scope")+" "+he(h[o]);x=h.join(",")}try{return f.apply(i,p.querySelectorAll(x)),i}catch(t){C(e,!0)}finally{l===m&&t.removeAttribute("id")}}}return be(e.replace(B,"$1"),t,i,n)}function te(){var e=[];function i(n,a){return e.push(n+" ")>t.cacheLength&&delete i[e.shift()],i[n+" "]=a}return i}function ie(e){return e[m]=!0,e}function ne(e){var t=r.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ae(e){return function(t){return R(t,"input")&&t.type===e}}function oe(e){return function(t){return(R(t,"input")||R(t,"button"))&&t.type===e}}function re(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&$(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return ie((function(t){return t=+t,ie((function(i,n){var a,o=e([],i.length,t),r=o.length;while(r--)i[a=o[r]]&&(i[a]=!(n[a]=i[a]))}))}))}function le(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function de(e){var i,n=e?e.ownerDocument||e:j;return n!=r&&9===n.nodeType&&n.documentElement?(r=n,l=r.documentElement,c=!E.isXMLDoc(r),x=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&j!=r&&(i=r.defaultView)&&i.top!==i&&i.addEventListener("unload",K),g.getById=ne((function(e){return l.appendChild(e).id=E.expando,!r.getElementsByName||!r.getElementsByName(E.expando).length})),g.disconnectedMatch=ne((function(e){return x.call(e,"*")})),g.scope=ne((function(){return r.querySelectorAll(":scope")})),g.cssHas=ne((function(){try{return r.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),g.getById?(t.filter.ID=function(e){var t=e.replace(J,q);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&c){var i=t.getElementById(e);return i?[i]:[]}}):(t.filter.ID=function(e){var t=e.replace(J,q);return function(e){var i="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&c){var i,n,a,o=t.getElementById(e);if(o){if(i=o.getAttributeNode("id"),i&&i.value===e)return[o];a=t.getElementsByName(e),n=0;while(o=a[n++])if(i=o.getAttributeNode("id"),i&&i.value===e)return[o]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&c)return t.getElementsByClassName(e)},u=[],ne((function(e){var t;l.appendChild(e).innerHTML="<a id='"+m+"' href='' disabled='disabled'></a><select id='"+m+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||u.push("\\["+A+"*(?:value|"+T+")"),e.querySelectorAll("[id~="+m+"-]").length||u.push("~="),e.querySelectorAll("a#"+m+"+*").length||u.push(".#.+[+~]"),e.querySelectorAll(":checked").length||u.push(":checked"),t=r.createElement("input"),t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&u.push(":enabled",":disabled"),t=r.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||u.push("\\["+A+"*name"+A+"*="+A+"*(?:''|\"\")")})),g.cssHas||u.push(":has"),u=u.length&&new RegExp(u.join("|")),w=function(e,t){if(e===t)return o=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!g.sortDetached&&t.compareDocumentPosition(e)===i?e===r||e.ownerDocument==j&&ee.contains(j,e)?-1:t===r||t.ownerDocument==j&&ee.contains(j,t)?1:a?h.call(a,e)-h.call(a,t):0:4&i?-1:1)},r):r}for(e in ee.matches=function(e,t){return ee(e,null,null,t)},ee.matchesSelector=function(e,t){if(de(e),c&&!C[t+" "]&&(!u||!u.test(t)))try{var i=x.call(e,t);if(i||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){C(t,!0)}return ee(t,r,null,[e]).length>0},ee.contains=function(e,t){return(e.ownerDocument||e)!=r&&de(e),E.contains(e,t)},ee.attr=function(e,i){(e.ownerDocument||e)!=r&&de(e);var n=t.attrHandle[i.toLowerCase()],a=n&&p.call(t.attrHandle,i.toLowerCase())?n(e,i,!c):void 0;return void 0!==a?a:e.getAttribute(i)},ee.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},E.uniqueSort=function(e){var t,i=[],n=0,r=0;if(o=!g.sortStable,a=!g.sortStable&&d.call(e,0),D.call(e,w),o){while(t=e[r++])t===e[r]&&(n=i.push(r));while(n--)M.call(e,i[n],1)}return a=null,e},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(d.apply(this)))},t=E.expr={cacheLength:50,createPseudo:ie,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,q),e[3]=(e[3]||e[4]||e[5]||"").replace(J,q),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ee.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ee.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&H.test(i)&&(t=ue(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,q).toLowerCase();return"*"===e?function(){return!0}:function(e){return R(e,t)}},CLASS:function(e){var t=y[e+" "];return t||(t=new RegExp("(^|"+A+")"+e+"("+A+"|$)"))&&y(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var a=ee.attr(n,e);return null==a?"!="===t:!t||(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.slice(-i.length)===i:"~="===t?(" "+a.replace(F," ")+" ").indexOf(i)>-1:"|="===t&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,a){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var d,c,u,h,x,f=o!==r?"nextSibling":"previousSibling",p=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!l&&!s,y=!1;if(p){if(o){while(f){u=t;while(u=u[f])if(s?R(u,g):1===u.nodeType)return!1;x=f="only"===e&&!x&&"nextSibling"}return!0}if(x=[r?p.firstChild:p.lastChild],r&&v){c=p[m]||(p[m]={}),d=c[e]||[],h=d[0]===_&&d[1],y=h&&d[2],u=h&&p.childNodes[h];while(u=++h&&u&&u[f]||(y=h=0)||x.pop())if(1===u.nodeType&&++y&&u===t){c[e]=[_,h,y];break}}else if(v&&(c=t[m]||(t[m]={}),d=c[e]||[],h=d[0]===_&&d[1],y=h),!1===y)while(u=++h&&u&&u[f]||(y=h=0)||x.pop())if((s?R(u,g):1===u.nodeType)&&++y&&(v&&(c=u[m]||(u[m]={}),c[e]=[_,y]),u===t))break;return y-=a,y===n||y%n===0&&y/n>=0}}},PSEUDO:function(e,i){var n,a=t.pseudos[e]||t.setFilters[e.toLowerCase()]||ee.error("unsupported pseudo: "+e);return a[m]?a(i):a.length>1?(n=[e,e,"",i],t.setFilters.hasOwnProperty(e.toLowerCase())?ie((function(e,t){var n,o=a(e,i),r=o.length;while(r--)n=h.call(e,o[r]),e[n]=!(t[n]=o[r])})):function(e){return a(e,0,n)}):a}},pseudos:{not:ie((function(e){var t=[],i=[],n=ye(e.replace(B,"$1"));return n[m]?ie((function(e,t,i,a){var o,r=n(e,null,a,[]),s=e.length;while(s--)(o=r[s])&&(e[s]=!(t[s]=o))})):function(e,a,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}})),has:ie((function(e){return function(t){return ee(e,t).length>0}})),contains:ie((function(e){return e=e.replace(J,q),function(t){return(t.textContent||E.text(t)).indexOf(e)>-1}})),lang:ie((function(e){return V.test(e||"")||ee.error("unsupported lang: "+e),e=e.replace(J,q).toLowerCase(),function(t){var i;do{if(i=c?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===l},focus:function(e){return e===Q()&&r.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:re(!1),disabled:re(!0),checked:function(e){return R(e,"input")&&!!e.checked||R(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){return R(e,"input")&&"button"===e.type||R(e,"button")},text:function(e){var t;return R(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,i){return[i<0?i+t:i]})),even:se((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:se((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:se((function(e,t,i){var n;for(n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:se((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=ae(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=oe(e);function ce(){}function ue(e,i){var n,a,o,r,s,l,d,c=b[e+" "];if(c)return i?0:c.slice(0);s=e,l=[],d=t.preFilter;while(s){for(r in n&&!(a=O.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(o=[])),n=!1,(a=N.exec(s))&&(n=a.shift(),o.push({value:n,type:a[0].replace(B," ")}),s=s.slice(n.length)),t.filter)!(a=G[r].exec(s))||d[r]&&!(a=d[r](a))||(n=a.shift(),o.push({value:n,type:r,matches:a}),s=s.slice(n.length));if(!n)break}return i?s.length:s?ee.error(e):b(e,l).slice(0)}function he(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function xe(e,t,i){var n=t.dir,a=t.next,o=a||n,r=i&&"parentNode"===o,s=v++;return t.first?function(t,i,a){while(t=t[n])if(1===t.nodeType||r)return e(t,i,a);return!1}:function(t,i,l){var d,c,u=[_,s];if(l){while(t=t[n])if((1===t.nodeType||r)&&e(t,i,l))return!0}else while(t=t[n])if(1===t.nodeType||r)if(c=t[m]||(t[m]={}),a&&R(t,a))t=t[n]||t;else{if((d=c[o])&&d[0]===_&&d[1]===s)return u[2]=d[2];if(c[o]=u,u[2]=e(t,i,l))return!0}return!1}}function fe(e){return e.length>1?function(t,i,n){var a=e.length;while(a--)if(!e[a](t,i,n))return!1;return!0}:e[0]}function pe(e,t,i){for(var n=0,a=t.length;n<a;n++)ee(e,t[n],i);return i}function me(e,t,i,n,a){for(var o,r=[],s=0,l=e.length,d=null!=t;s<l;s++)(o=e[s])&&(i&&!i(o,n,a)||(r.push(o),d&&t.push(s)));return r}function _e(e,t,i,n,a,o){return n&&!n[m]&&(n=_e(n)),a&&!a[m]&&(a=_e(a,o)),ie((function(o,r,s,l){var d,c,u,x,p=[],m=[],_=r.length,g=o||pe(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:me(g,p,e,s,l);if(i?(x=a||(o?e:_||n)?[]:r,i(v,x,s,l)):x=v,n){d=me(x,m),n(d,[],s,l),c=d.length;while(c--)(u=d[c])&&(x[m[c]]=!(v[m[c]]=u))}if(o){if(a||e){if(a){d=[],c=x.length;while(c--)(u=x[c])&&d.push(v[c]=u);a(null,x=[],d,l)}c=x.length;while(c--)(u=x[c])&&(d=a?h.call(o,u):p[c])>-1&&(o[d]=!(r[d]=u))}}else x=me(x===r?x.splice(_,x.length):x),a?a(null,r,x,l):f.apply(r,x)}))}function ge(e){for(var i,a,o,r=e.length,s=t.relative[e[0].type],l=s||t.relative[" "],d=s?1:0,c=xe((function(e){return e===i}),l,!0),u=xe((function(e){return h.call(i,e)>-1}),l,!0),x=[function(e,t,a){var o=!s&&(a||t!=n)||((i=t).nodeType?c(e,t,a):u(e,t,a));return i=null,o}];d<r;d++)if(a=t.relative[e[d].type])x=[xe(fe(x),a)];else{if(a=t.filter[e[d].type].apply(null,e[d].matches),a[m]){for(o=++d;o<r;o++)if(t.relative[e[o].type])break;return _e(d>1&&fe(x),d>1&&he(e.slice(0,d-1).concat({value:" "===e[d-2].type?"*":""})).replace(B,"$1"),a,d<o&&ge(e.slice(d,o)),o<r&&ge(e=e.slice(o)),o<r&&he(e))}x.push(a)}return fe(x)}function ve(e,i){var a=i.length>0,o=e.length>0,s=function(s,l,d,u,h){var x,p,m,g=0,v="0",y=s&&[],b=[],S=n,C=s||o&&t.find.TAG("*",h),w=_+=null==S?1:Math.random()||.1,T=C.length;for(h&&(n=l==r||l||h);v!==T&&null!=(x=C[v]);v++){if(o&&x){p=0,l||x.ownerDocument==r||(de(x),d=!c);while(m=e[p++])if(m(x,l||r,d)){f.call(u,x);break}h&&(_=w)}a&&((x=!m&&x)&&g--,s&&y.push(x))}if(g+=v,a&&v!==g){p=0;while(m=i[p++])m(y,b,l,d);if(s){if(g>0)while(v--)y[v]||b[v]||(b[v]=I.call(u));b=me(b)}f.apply(u,b),h&&!s&&b.length>0&&g+i.length>1&&E.uniqueSort(u)}return h&&(_=w,n=S),y};return a?ie(s):s}function ye(e,t){var i,n=[],a=[],o=S[e+" "];if(!o){t||(t=ue(e)),i=t.length;while(i--)o=ge(t[i]),o[m]?n.push(o):a.push(o);o=S(e,ve(a,n)),o.selector=e}return o}function be(e,i,n,a){var o,r,s,l,d,u="function"===typeof e&&e,h=!a&&ue(e=u.selector||e);if(n=n||[],1===h.length){if(r=h[0]=h[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===i.nodeType&&c&&t.relative[r[1].type]){if(i=(t.find.ID(s.matches[0].replace(J,q),i)||[])[0],!i)return n;u&&(i=i.parentNode),e=e.slice(r.shift().value.length)}o=G.needsContext.test(e)?0:r.length;while(o--){if(s=r[o],t.relative[l=s.type])break;if((d=t.find[l])&&(a=d(s.matches[0].replace(J,q),X.test(r[0].type)&&le(i.parentNode)||i))){if(r.splice(o,1),e=a.length&&he(r),!e)return f.apply(n,a),n;break}}}return(u||ye(e,h))(a,i,!c,n,!i||X.test(e)&&le(i.parentNode)||i),n}ce.prototype=t.filters=t.pseudos,t.setFilters=new ce,g.sortStable=m.split("").sort(w).join("")===m,de(),g.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(r.createElement("fieldset"))})),E.find=ee,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,ee.compile=ye,ee.select=be,ee.setDocument=de,ee.tokenize=ue,ee.escape=E.escapeSelector,ee.getText=E.text,ee.isXML=E.isXMLDoc,ee.selectors=E.expr,ee.support=E.support,ee.uniqueSort=E.uniqueSort})();var O=function(e,t,i){var n=[],a=void 0!==i;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(a&&E(e).is(i))break;n.push(e)}return n},N=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},U=E.expr.match.needsContext,H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,i){return v(t)?E.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?E.grep(e,(function(e){return e===t!==i})):"string"!==typeof t?E.grep(e,(function(e){return h.call(t,e)>-1!==i})):E.filter(t,e,i)}E.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?E.find.matchesSelector(n,e)?[n]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,i,n=this.length,a=this;if("string"!==typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<n;t++)if(E.contains(a[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)E.find(e,a[t],i);return n>1?E.uniqueSort(i):i},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"===typeof e&&U.test(e)?E(e):e||[],!1).length}});var G,Y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,W=E.fn.init=function(e,t,i){var n,a;if(!e)return this;if(i=i||G,"string"===typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Y.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),H.test(n[1])&&E.isPlainObject(t))for(n in t)v(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return a=b.getElementById(n[2]),a&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==i.ready?i.ready(e):e(E):E.makeArray(e,this)};W.prototype=E.fn,G=E(b);var Z=/^(?:parents|prev(?:Until|All))/,X={children:!0,contents:!0,next:!0,prev:!0};function J(e,t){while((e=e[t])&&1!==e.nodeType);return e}E.fn.extend({has:function(e){var t=E(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,a=this.length,o=[],r="string"!==typeof e&&E(e);if(!U.test(e))for(;n<a;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&E.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?h.call(E(e),this[0]):h.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,i){return O(e,"parentNode",i)},next:function(e){return J(e,"nextSibling")},prev:function(e){return J(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,i){return O(e,"nextSibling",i)},prevUntil:function(e,t,i){return O(e,"previousSibling",i)},siblings:function(e){return N((e.parentNode||{}).firstChild,e)},children:function(e){return N(e.firstChild)},contents:function(e){return null!=e.contentDocument&&l(e.contentDocument)?e.contentDocument:(R(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(i,n){var a=E.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"===typeof n&&(a=E.filter(n,a)),this.length>1&&(X[e]||E.uniqueSort(a),Z.test(e)&&a.reverse()),this.pushStack(a)}}));var q=/[^\x20\t\r\n\f]+/g;function K(e){var t={};return E.each(e.match(q)||[],(function(e,i){t[i]=!0})),t}function $(e){return e}function Q(e){throw e}function ee(e,t,i,n){var a;try{e&&v(a=e.promise)?a.call(e).done(t).fail(i):e&&v(a=e.then)?a.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}E.Callbacks=function(e){e="string"===typeof e?K(e):E.extend({},e);var t,i,n,a,o=[],r=[],s=-1,l=function(){for(a=a||e.once,n=t=!0;r.length;s=-1){i=r.shift();while(++s<o.length)!1===o[s].apply(i[0],i[1])&&e.stopOnFalse&&(s=o.length,i=!1)}e.memory||(i=!1),t=!1,a&&(o=i?[]:"")},d={add:function(){return o&&(i&&!t&&(s=o.length-1,r.push(i)),function t(i){E.each(i,(function(i,n){v(n)?e.unique&&d.has(n)||o.push(n):n&&n.length&&"string"!==w(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return E.each(arguments,(function(e,t){var i;while((i=E.inArray(t,o,i))>-1)o.splice(i,1),i<=s&&s--})),this},has:function(e){return e?E.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=r=[],o=i="",this},disabled:function(){return!o},lock:function(){return a=r=[],i||t||(o=i=""),this},locked:function(){return!!a},fireWith:function(e,i){return a||(i=i||[],i=[e,i.slice?i.slice():i],r.push(i),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(i){E.each(t,(function(t,n){var a=v(e[n[4]])&&e[n[4]];r[n[1]]((function(){var e=a&&a.apply(this,arguments);e&&v(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,a){var r=0;function s(e,t,n,a){return function(){var l=this,d=arguments,c=function(){var i,c;if(!(e<r)){if(i=n.apply(l,d),i===t.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"===o(i)||"function"===typeof i)&&i.then,v(c)?a?c.call(i,s(r,t,$,a),s(r,t,Q,a)):(r++,c.call(i,s(r,t,$,a),s(r,t,Q,a),s(r,t,$,t.notifyWith))):(n!==$&&(l=void 0,d=[i]),(a||t.resolveWith)(l,d))}},u=a?c:function(){try{c()}catch(c){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(c,u.error),e+1>=r&&(n!==Q&&(l=void 0,d=[c]),t.rejectWith(l,d))}};e?u():(E.Deferred.getErrorHook?u.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(u.error=E.Deferred.getStackHook()),i.setTimeout(u))}}return E.Deferred((function(i){t[0][3].add(s(0,i,v(a)?a:$,i.notifyWith)),t[1][3].add(s(0,i,v(e)?e:$)),t[2][3].add(s(0,i,v(n)?n:Q))})).promise()},promise:function(e){return null!=e?E.extend(e,a):a}},r={};return E.each(t,(function(e,i){var o=i[2],s=i[5];a[i[1]]=o.add,s&&o.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=o.fireWith})),a.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),a=d.call(arguments),o=E.Deferred(),r=function(e){return function(i){n[e]=this,a[e]=arguments.length>1?d.call(arguments):i,--t||o.resolveWith(n,a)}};if(t<=1&&(ee(e,o.done(r(i)).resolve,o.reject,!t),"pending"===o.state()||v(a[i]&&a[i].then)))return o.then();while(i--)ee(a[i],r(i),o.reject);return o.promise()}});var te=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&te.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){i.setTimeout((function(){throw e}))};var ie=E.Deferred();function ne(){b.removeEventListener("DOMContentLoaded",ne),i.removeEventListener("load",ne),E.ready()}E.fn.ready=function(e){return ie.then(e)["catch"]((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||ie.resolveWith(b,[E]))}}),E.ready.then=ie.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",ne),i.addEventListener("load",ne));var ae=function e(t,i,n,a,o,r,s){var l=0,d=t.length,c=null==n;if("object"===w(n))for(l in o=!0,n)e(t,i,l,n[l],!0,r,s);else if(void 0!==a&&(o=!0,v(a)||(s=!0),c&&(s?(i.call(t,a),i=null):(c=i,i=function(e,t,i){return c.call(E(e),i)})),i))for(;l<d;l++)i(t[l],n,s?a:a.call(t[l],l,i(t[l],n)));return o?t:c?i.call(t):d?i(t[0],n):r},oe=/^-ms-/,re=/-([a-z])/g;function se(e,t){return t.toUpperCase()}function le(e){return e.replace(oe,"ms-").replace(re,se)}var de=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ce(){this.expando=E.expando+ce.uid++}ce.uid=1,ce.prototype={cache:function(e){var t=e[this.expando];return t||(t={},de(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,a=this.cache(e);if("string"===typeof t)a[le(t)]=i;else for(n in t)a[le(n)]=t[n];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][le(t)]},access:function(e,t,i){return void 0===t||t&&"string"===typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(le):(t=le(t),t=t in n?[t]:t.match(q)||[]),i=t.length;while(i--)delete n[t[i]]}(void 0===t||E.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var ue=new ce,he=new ce,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function pe(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:xe.test(e)?JSON.parse(e):e)}function me(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(fe,"-$&").toLowerCase(),i=e.getAttribute(n),"string"===typeof i){try{i=pe(i)}catch(e){}he.set(e,t,i)}else i=void 0;return i}E.extend({hasData:function(e){return he.hasData(e)||ue.hasData(e)},data:function(e,t,i){return he.access(e,t,i)},removeData:function(e,t){he.remove(e,t)},_data:function(e,t,i){return ue.access(e,t,i)},_removeData:function(e,t){ue.remove(e,t)}}),E.fn.extend({data:function(e,t){var i,n,a,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(a=he.get(r),1===r.nodeType&&!ue.get(r,"hasDataAttrs"))){i=s.length;while(i--)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=le(n.slice(5)),me(r,n,a[n])));ue.set(r,"hasDataAttrs",!0)}return a}return"object"===o(e)?this.each((function(){he.set(this,e)})):ae(this,(function(t){var i;if(r&&void 0===t)return i=he.get(r,e),void 0!==i?i:(i=me(r,e),void 0!==i?i:void 0);this.each((function(){he.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){he.remove(this,e)}))}}),E.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=ue.get(e,t),i&&(!n||Array.isArray(i)?n=ue.access(e,t,E.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=E.queue(e,t),n=i.length,a=i.shift(),o=E._queueHooks(e,t),r=function(){E.dequeue(e,t)};"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete o.stop,a.call(e,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ue.get(e,i)||ue.access(e,i,{empty:E.Callbacks("once memory").add((function(){ue.remove(e,[t+"queue",i])}))})}}),E.fn.extend({queue:function(e,t){var i=2;return"string"!==typeof e&&(t=e,e="fx",i--),arguments.length<i?E.queue(this[0],e):void 0===t?this:this.each((function(){var i=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,a=E.Deferred(),o=this,r=this.length,s=function(){--n||a.resolveWith(o,[o])};"string"!==typeof e&&(t=e,e=void 0),e=e||"fx";while(r--)i=ue.get(o[r],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(s));return s(),a.promise(t)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ge=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),ve=["Top","Right","Bottom","Left"],ye=b.documentElement,be=function(e){return E.contains(e.ownerDocument,e)},Se={composed:!0};ye.getRootNode&&(be=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(Se)===e.ownerDocument});var Ce=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&be(e)&&"none"===E.css(e,"display")};function we(e,t,i,n){var a,o,r=20,s=n?function(){return n.cur()}:function(){return E.css(e,t,"")},l=s(),d=i&&i[3]||(E.cssNumber[t]?"":"px"),c=e.nodeType&&(E.cssNumber[t]||"px"!==d&&+l)&&ge.exec(E.css(e,t));if(c&&c[3]!==d){l/=2,d=d||c[3],c=+l||1;while(r--)E.style(e,t,c+d),(1-o)*(1-(o=s()/l||.5))<=0&&(r=0),c/=o;c*=2,E.style(e,t,c+d),i=i||[]}return i&&(c=+c||+l||0,a=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=a)),a}var Te={};function Pe(e){var t,i=e.ownerDocument,n=e.nodeName,a=Te[n];return a||(t=i.body.appendChild(i.createElement(n)),a=E.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),Te[n]=a,a)}function Ee(e,t){for(var i,n,a=[],o=0,r=e.length;o<r;o++)n=e[o],n.style&&(i=n.style.display,t?("none"===i&&(a[o]=ue.get(n,"display")||null,a[o]||(n.style.display="")),""===n.style.display&&Ce(n)&&(a[o]=Pe(n))):"none"!==i&&(a[o]="none",ue.set(n,"display",i)));for(o=0;o<r;o++)null!=a[o]&&(e[o].style.display=a[o]);return e}E.fn.extend({show:function(){return Ee(this,!0)},hide:function(){return Ee(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){Ce(this)?E(this).show():E(this).hide()}))}});var ke=/^(?:checkbox|radio)$/i,Re=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ie=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=b.createDocumentFragment(),t=e.appendChild(b.createElement("div")),i=b.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),g.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",g.option=!!t.lastChild})();var De={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Me(e,t){var i;return i="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?E.merge([e],i):i}function Ae(e,t){for(var i=0,n=e.length;i<n;i++)ue.set(e[i],"globalEval",!t||ue.get(t[i],"globalEval"))}De.tbody=De.tfoot=De.colgroup=De.caption=De.thead,De.th=De.td,g.option||(De.optgroup=De.option=[1,"<select multiple='multiple'>","</select>"]);var Be=/<|&#?\w+;/;function Le(e,t,i,n,a){for(var o,r,s,l,d,c,u=t.createDocumentFragment(),h=[],x=0,f=e.length;x<f;x++)if(o=e[x],o||0===o)if("object"===w(o))E.merge(h,o.nodeType?[o]:o);else if(Be.test(o)){r=r||u.appendChild(t.createElement("div")),s=(Re.exec(o)||["",""])[1].toLowerCase(),l=De[s]||De._default,r.innerHTML=l[1]+E.htmlPrefilter(o)+l[2],c=l[0];while(c--)r=r.lastChild;E.merge(h,r.childNodes),r=u.firstChild,r.textContent=""}else h.push(t.createTextNode(o));u.textContent="",x=0;while(o=h[x++])if(n&&E.inArray(o,n)>-1)a&&a.push(o);else if(d=be(o),r=Me(u.appendChild(o),"script"),d&&Ae(r),i){c=0;while(o=r[c++])Ie.test(o.type||"")&&i.push(o)}return u}var Fe=/^([^.]*)(?:\.(.+)|)/;function je(){return!0}function ze(){return!1}function Oe(e,t,i,n,a,r){var s,l;if("object"===o(t)){for(l in"string"!==typeof i&&(n=n||i,i=void 0),t)Oe(e,l,i,n,t[l],r);return e}if(null==n&&null==a?(a=i,n=i=void 0):null==a&&("string"===typeof i?(a=n,n=void 0):(a=n,n=i,i=void 0)),!1===a)a=ze;else if(!a)return e;return 1===r&&(s=a,a=function(e){return E().off(e),s.apply(this,arguments)},a.guid=s.guid||(s.guid=E.guid++)),e.each((function(){E.event.add(this,t,a,n,i)}))}function Ne(e,t,i){i?(ue.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var i,n=ue.get(this,t);if(1&e.isTrigger&&this[t]){if(n)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(n=d.call(arguments),ue.set(this,t,n),this[t](),i=ue.get(this,t),ue.set(this,t,!1),n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i}else n&&(ue.set(this,t,E.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=je)}})):void 0===ue.get(e,t)&&E.event.add(e,t,je)}E.event={global:{},add:function(e,t,i,n,a){var o,r,s,l,d,c,u,h,x,f,p,m=ue.get(e);if(de(e)){i.handler&&(o=i,i=o.handler,a=o.selector),a&&E.find.matchesSelector(ye,a),i.guid||(i.guid=E.guid++),(l=m.events)||(l=m.events=Object.create(null)),(r=m.handle)||(r=m.handle=function(t){return"undefined"!==typeof E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(q)||[""],d=t.length;while(d--)s=Fe.exec(t[d])||[],x=p=s[1],f=(s[2]||"").split(".").sort(),x&&(u=E.event.special[x]||{},x=(a?u.delegateType:u.bindType)||x,u=E.event.special[x]||{},c=E.extend({type:x,origType:p,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&E.expr.match.needsContext.test(a),namespace:f.join(".")},o),(h=l[x])||(h=l[x]=[],h.delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,r)||e.addEventListener&&e.addEventListener(x,r)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),a?h.splice(h.delegateCount++,0,c):h.push(c),E.event.global[x]=!0)}},remove:function(e,t,i,n,a){var o,r,s,l,d,c,u,h,x,f,p,m=ue.hasData(e)&&ue.get(e);if(m&&(l=m.events)){t=(t||"").match(q)||[""],d=t.length;while(d--)if(s=Fe.exec(t[d])||[],x=p=s[1],f=(s[2]||"").split(".").sort(),x){u=E.event.special[x]||{},x=(n?u.delegateType:u.bindType)||x,h=l[x]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=h.length;while(o--)c=h[o],!a&&p!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));r&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,m.handle)||E.removeEvent(e,x,m.handle),delete l[x])}else for(x in l)E.event.remove(e,x+t[d],i,n,!0);E.isEmptyObject(l)&&ue.remove(e,"handle events")}},dispatch:function(e){var t,i,n,a,o,r,s=new Array(arguments.length),l=E.event.fix(e),d=(ue.get(this,"events")||Object.create(null))[l.type]||[],c=E.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){r=E.event.handlers.call(this,l,d),t=0;while((a=r[t++])&&!l.isPropagationStopped()){l.currentTarget=a.elem,i=0;while((o=a.handlers[i++])&&!l.isImmediatePropagationStopped())l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,n=((E.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,s),void 0!==n&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,a,o,r,s=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(o=[],r={},i=0;i<l;i++)n=t[i],a=n.selector+" ",void 0===r[a]&&(r[a]=n.needsContext?E(a,this).index(d)>-1:E.find(a,this,null,[d]).length),r[a]&&o.push(n);o.length&&s.push({elem:d,handlers:o})}return d=this,l<t.length&&s.push({elem:d,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ke.test(t.type)&&t.click&&R(t,"input")&&Ne(t,"click",!0),!1},trigger:function(e){var t=this||e;return ke.test(t.type)&&t.click&&R(t,"input")&&Ne(t,"click"),!0},_default:function(e){var t=e.target;return ke.test(t.type)&&t.click&&R(t,"input")&&ue.get(t,"click")||R(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?je:ze,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:ze,isPropagationStopped:ze,isImmediatePropagationStopped:ze,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=je,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=je,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=je,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){function i(e){if(b.documentMode){var i=ue.get(this,"handle"),n=E.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,i(e),n.target===n.currentTarget&&i(n)}else E.event.simulate(t,e.target,E.event.fix(e))}E.event.special[e]={setup:function(){var n;if(Ne(this,e,!0),!b.documentMode)return!1;n=ue.get(this,t),n||this.addEventListener(t,i),ue.set(this,t,(n||0)+1)},trigger:function(){return Ne(this,e),!0},teardown:function(){var e;if(!b.documentMode)return!1;e=ue.get(this,t)-1,e?ue.set(this,t,e):(this.removeEventListener(t,i),ue.remove(this,t))},_default:function(t){return ue.get(t.target,e)},delegateType:t},E.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,a=b.documentMode?this:n,o=ue.get(a,t);o||(b.documentMode?this.addEventListener(t,i):n.addEventListener(e,i,!0)),ue.set(a,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,a=b.documentMode?this:n,o=ue.get(a,t)-1;o?ue.set(a,t,o):(b.documentMode?this.removeEventListener(t,i):n.removeEventListener(e,i,!0),ue.remove(a,t))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,a=e.relatedTarget,o=e.handleObj;return a&&(a===n||E.contains(n,a))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}})),E.fn.extend({on:function(e,t,i,n){return Oe(this,e,t,i,n)},one:function(e,t,i,n){return Oe(this,e,t,i,n,1)},off:function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,E(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"===o(e)){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!==typeof t||(i=t,t=void 0),!1===i&&(i=ze),this.each((function(){E.event.remove(this,e,i,t)}))}});var Ue=/<script|<style|<link/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ge(e,t){return R(e,"table")&&R(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function Ye(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ze(e,t){var i,n,a,o,r,s,l;if(1===t.nodeType){if(ue.hasData(e)&&(o=ue.get(e),l=o.events,l))for(a in ue.remove(t,"handle events"),l)for(i=0,n=l[a].length;i<n;i++)E.event.add(t,a,l[a][i]);he.hasData(e)&&(r=he.access(e),s=E.extend({},r),he.set(t,s))}}function Xe(e,t){var i=t.nodeName.toLowerCase();"input"===i&&ke.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Je(e,t,i,n){t=c(t);var a,o,r,s,l,d,u=0,h=e.length,x=h-1,f=t[0],p=v(f);if(p||h>1&&"string"===typeof f&&!g.checkClone&&He.test(f))return e.each((function(a){var o=e.eq(a);p&&(t[0]=f.call(this,a,o.html())),Je(o,t,i,n)}));if(h&&(a=Le(t,e[0].ownerDocument,!1,e,n),o=a.firstChild,1===a.childNodes.length&&(a=o),o||n)){for(r=E.map(Me(a,"script"),Ye),s=r.length;u<h;u++)l=a,u!==x&&(l=E.clone(l,!0,!0),s&&E.merge(r,Me(l,"script"))),i.call(e[u],l,u);if(s)for(d=r[r.length-1].ownerDocument,E.map(r,We),u=0;u<s;u++)l=r[u],Ie.test(l.type||"")&&!ue.access(l,"globalEval")&&E.contains(d,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},d):C(l.textContent.replace(Ve,""),l,d))}return e}function qe(e,t,i){for(var n,a=t?E.filter(t,e):e,o=0;null!=(n=a[o]);o++)i||1!==n.nodeType||E.cleanData(Me(n)),n.parentNode&&(i&&be(n)&&Ae(Me(n,"script")),n.parentNode.removeChild(n));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,a,o,r,s=e.cloneNode(!0),l=be(e);if(!g.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!E.isXMLDoc(e))for(r=Me(s),o=Me(e),n=0,a=o.length;n<a;n++)Xe(o[n],r[n]);if(t)if(i)for(o=o||Me(e),r=r||Me(s),n=0,a=o.length;n<a;n++)Ze(o[n],r[n]);else Ze(e,s);return r=Me(s,"script"),r.length>0&&Ae(r,!l&&Me(e,"script")),s},cleanData:function(e){for(var t,i,n,a=E.event.special,o=0;void 0!==(i=e[o]);o++)if(de(i)){if(t=i[ue.expando]){if(t.events)for(n in t.events)a[n]?E.event.remove(i,n):E.removeEvent(i,n,t.handle);i[ue.expando]=void 0}i[he.expando]&&(i[he.expando]=void 0)}}}),E.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return ae(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Je(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ge(this,e);t.appendChild(e)}}))},prepend:function(){return Je(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ge(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(Me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return ae(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Ue.test(e)&&!De[(Re.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(E.cleanData(Me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Je(this,arguments,(function(t){var i=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(Me(this)),i&&i.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var i,n=[],a=E(e),o=a.length-1,r=0;r<=o;r++)i=r===o?this:this.clone(!0),E(a[r])[t](i),u.apply(n,i.get());return this.pushStack(n)}}));var Ke=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),$e=/^--/,Qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},et=function(e,t,i){var n,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in n=i.call(e),t)e.style[a]=o[a];return n},tt=new RegExp(ve.join("|"),"i");function it(e,t,i){var n,a,o,r,s=$e.test(t),l=e.style;return i=i||Qe(e),i&&(r=i.getPropertyValue(t)||i[t],s&&r&&(r=r.replace(B,"$1")||void 0),""!==r||be(e)||(r=E.style(e,t)),!g.pixelBoxStyles()&&Ke.test(r)&&tt.test(t)&&(n=l.width,a=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=r,r=i.width,l.width=n,l.minWidth=a,l.maxWidth=o)),void 0!==r?r+"":r}function nt(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}(function(){function e(){if(c){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ye.appendChild(d).appendChild(c);var e=i.getComputedStyle(c);n="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",r=36===t(e.right),a=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),ye.removeChild(d),c=null}}function t(e){return Math.round(parseFloat(e))}var n,a,o,r,s,l,d=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,E.extend(g,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,a;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ye.appendChild(e).appendChild(t).appendChild(n),a=i.getComputedStyle(t),s=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===t.offsetHeight,ye.removeChild(e)),s}}))})();var at=["Webkit","Moz","ms"],ot=b.createElement("div").style,rt={};function st(e){var t=e[0].toUpperCase()+e.slice(1),i=at.length;while(i--)if(e=at[i]+t,e in ot)return e}function lt(e){var t=E.cssProps[e]||rt[e];return t||(e in ot?e:rt[e]=st(e)||e)}var dt=/^(none|table(?!-c[ea]).+)/,ct={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:"0",fontWeight:"400"};function ht(e,t,i){var n=ge.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function xt(e,t,i,n,a,o){var r="width"===t?1:0,s=0,l=0,d=0;if(i===(n?"border":"content"))return 0;for(;r<4;r+=2)"margin"===i&&(d+=E.css(e,i+ve[r],!0,a)),n?("content"===i&&(l-=E.css(e,"padding"+ve[r],!0,a)),"margin"!==i&&(l-=E.css(e,"border"+ve[r]+"Width",!0,a))):(l+=E.css(e,"padding"+ve[r],!0,a),"padding"!==i?l+=E.css(e,"border"+ve[r]+"Width",!0,a):s+=E.css(e,"border"+ve[r]+"Width",!0,a));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l+d}function ft(e,t,i){var n=Qe(e),a=!g.boxSizingReliable()||i,o=a&&"border-box"===E.css(e,"boxSizing",!1,n),r=o,s=it(e,t,n),l="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(s)){if(!i)return s;s="auto"}return(!g.boxSizingReliable()&&o||!g.reliableTrDimensions()&&R(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===E.css(e,"boxSizing",!1,n),r=l in e,r&&(s=e[l])),s=parseFloat(s)||0,s+xt(e,t,i||(o?"border":"content"),r,n,s)+"px"}function pt(e,t,i,n,a){return new pt.prototype.init(e,t,i,n,a)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=it(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,r,s,l=le(t),d=$e.test(t),c=e.style;if(d||(t=lt(l)),s=E.cssHooks[t]||E.cssHooks[l],void 0===i)return s&&"get"in s&&void 0!==(a=s.get(e,!1,n))?a:c[t];r=o(i),"string"===r&&(a=ge.exec(i))&&a[1]&&(i=we(e,t,a),r="number"),null!=i&&i===i&&("number"!==r||d||(i+=a&&a[3]||(E.cssNumber[l]?"":"px")),g.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(d?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var a,o,r,s=le(t),l=$e.test(t);return l||(t=lt(s)),r=E.cssHooks[t]||E.cssHooks[s],r&&"get"in r&&(a=r.get(e,!0,i)),void 0===a&&(a=it(e,t,n)),"normal"===a&&t in ut&&(a=ut[t]),""===i||i?(o=parseFloat(a),!0===i||isFinite(o)?o||0:a):a}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,i,n){if(i)return!dt.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ft(e,t,n):et(e,ct,(function(){return ft(e,t,n)}))},set:function(e,i,n){var a,o=Qe(e),r=!g.scrollboxSize()&&"absolute"===o.position,s=r||n,l=s&&"border-box"===E.css(e,"boxSizing",!1,o),d=n?xt(e,t,n,l,o):0;return l&&r&&(d-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-xt(e,t,"border",!1,o)-.5)),d&&(a=ge.exec(i))&&"px"!==(a[3]||"px")&&(e.style[t]=i,i=E.css(e,t)),ht(e,i,d)}}})),E.cssHooks.marginLeft=nt(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(it(e,"marginLeft"))||e.getBoundingClientRect().left-et(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(i){for(var n=0,a={},o="string"===typeof i?i.split(" "):[i];n<4;n++)a[e+ve[n]+t]=o[n]||o[n-2]||o[0];return a}},"margin"!==e&&(E.cssHooks[e+t].set=ht)})),E.fn.extend({css:function(e,t){return ae(this,(function(e,t,i){var n,a,o={},r=0;if(Array.isArray(t)){for(n=Qe(e),a=t.length;r<a;r++)o[t[r]]=E.css(e,t[r],!1,n);return o}return void 0!==i?E.style(e,t,i):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=pt,pt.prototype={constructor:pt,init:function(e,t,i,n,a,o){this.elem=e,this.prop=i,this.easing=a||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(E.cssNumber[i]?"":"px")},cur:function(){var e=pt.propHooks[this.prop];return e&&e.get?e.get(this):pt.propHooks._default.get(this)},run:function(e){var t,i=pt.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):pt.propHooks._default.set(this),this}},pt.prototype.init.prototype=pt.prototype,pt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[lt(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},pt.propHooks.scrollTop=pt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=pt.prototype.init,E.fx.step={};var mt,_t,gt=/^(?:toggle|show|hide)$/,vt=/queueHooks$/;function yt(){_t&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(yt):i.setTimeout(yt,E.fx.interval),E.fx.tick())}function bt(){return i.setTimeout((function(){mt=void 0})),mt=Date.now()}function St(e,t){var i,n=0,a={height:e};for(t=t?1:0;n<4;n+=2-t)i=ve[n],a["margin"+i]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function Ct(e,t,i){for(var n,a=(Pt.tweeners[t]||[]).concat(Pt.tweeners["*"]),o=0,r=a.length;o<r;o++)if(n=a[o].call(i,t,e))return n}function wt(e,t,i){var n,a,o,r,s,l,d,c,u="width"in t||"height"in t,h=this,x={},f=e.style,p=e.nodeType&&Ce(e),m=ue.get(e,"fxshow");for(n in i.queue||(r=E._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,s=r.empty.fire,r.empty.fire=function(){r.unqueued||s()}),r.unqueued++,h.always((function(){h.always((function(){r.unqueued--,E.queue(e,"fx").length||r.empty.fire()}))}))),t)if(a=t[n],gt.test(a)){if(delete t[n],o=o||"toggle"===a,a===(p?"hide":"show")){if("show"!==a||!m||void 0===m[n])continue;p=!0}x[n]=m&&m[n]||E.style(e,n)}if(l=!E.isEmptyObject(t),l||!E.isEmptyObject(x))for(n in u&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],d=m&&m.display,null==d&&(d=ue.get(e,"display")),c=E.css(e,"display"),"none"===c&&(d?c=d:(Ee([e],!0),d=e.style.display||d,c=E.css(e,"display"),Ee([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===E.css(e,"float")&&(l||(h.done((function(){f.display=d})),null==d&&(c=f.display,d="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,x)l||(m?"hidden"in m&&(p=m.hidden):m=ue.access(e,"fxshow",{display:d}),o&&(m.hidden=!p),p&&Ee([e],!0),h.done((function(){for(n in p||Ee([e]),ue.remove(e,"fxshow"),x)E.style(e,n,x[n])}))),l=Ct(p?m[n]:0,n,h),n in m||(m[n]=l.start,p&&(l.end=l.start,l.start=0))}function Tt(e,t){var i,n,a,o,r;for(i in e)if(n=le(i),a=t[n],o=e[i],Array.isArray(o)&&(a=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),r=E.cssHooks[n],r&&"expand"in r)for(i in o=r.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=a);else t[n]=a}function Pt(e,t,i){var n,a,o=0,r=Pt.prefilters.length,s=E.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var t=mt||bt(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,o=1-n,r=0,l=d.tweens.length;r<l;r++)d.tweens[r].run(o);return s.notifyWith(e,[d,o,i]),o<1&&l?i:(l||s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d]),!1)},d=s.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},i),originalProperties:t,originalOptions:i,startTime:mt||bt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=E.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(a)return this;for(a=!0;i<n;i++)d.tweens[i].run(1);return t?(s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d,t])):s.rejectWith(e,[d,t]),this}}),c=d.props;for(Tt(c,d.opts.specialEasing);o<r;o++)if(n=Pt.prefilters[o].call(d,e,c,d.opts),n)return v(n.stop)&&(E._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return E.map(c,Ct,d),v(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),E.fx.timer(E.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d}E.Animation=E.extend(Pt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return we(i.elem,e,ge.exec(t),i),i}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(q);for(var i,n=0,a=e.length;n<a;n++)i=e[n],Pt.tweeners[i]=Pt.tweeners[i]||[],Pt.tweeners[i].unshift(t)},prefilters:[wt],prefilter:function(e,t){t?Pt.prefilters.unshift(e):Pt.prefilters.push(e)}}),E.speed=function(e,t,i){var n=e&&"object"===o(e)?E.extend({},e):{complete:i||!i&&t||v(e)&&e,duration:e,easing:i&&t||t&&!v(t)&&t};return E.fx.off?n.duration=0:"number"!==typeof n.duration&&(n.duration in E.fx.speeds?n.duration=E.fx.speeds[n.duration]:n.duration=E.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&E.dequeue(this,n.queue)},n},E.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=E.isEmptyObject(e),o=E.speed(t,i,n),r=function(){var t=Pt(this,E.extend({},e),o);(a||ue.get(this,"finish"))&&t.stop(!0)};return r.finish=r,a||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!==typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",o=E.timers,r=ue.get(this);if(a)r[a]&&r[a].stop&&n(r[a]);else for(a in r)r[a]&&r[a].stop&&vt.test(a)&&n(r[a]);for(a=o.length;a--;)o[a].elem!==this||null!=e&&o[a].queue!==e||(o[a].anim.stop(i),t=!1,o.splice(a,1));!t&&i||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=ue.get(this),n=i[e+"queue"],a=i[e+"queueHooks"],o=E.timers,r=n?n.length:0;for(i.finish=!0,E.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var i=E.fn[t];E.fn[t]=function(e,n,a){return null==e||"boolean"===typeof e?i.apply(this,arguments):this.animate(St(t,!0),e,n,a)}})),E.each({slideDown:St("show"),slideUp:St("hide"),slideToggle:St("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),E.timers=[],E.fx.tick=function(){var e,t=0,i=E.timers;for(mt=Date.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||E.fx.stop(),mt=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){_t||(_t=!0,yt())},E.fx.stop=function(){_t=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var a=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(a)}}))},function(){var e=b.createElement("input"),t=b.createElement("select"),i=t.appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=i.selected,e=b.createElement("input"),e.value="t",e.type="radio",g.radioValue="t"===e.value}();var Et,kt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return ae(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,i){var n,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?E.prop(e,t,i):(1===o&&E.isXMLDoc(e)||(a=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?Et:void 0)),void 0!==i?null===i?void E.removeAttr(e,t):a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:(e.setAttribute(t,i+""),i):a&&"get"in a&&null!==(n=a.get(e,t))?n:(n=E.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&R(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,a=t&&t.match(q);if(a&&1===e.nodeType)while(i=a[n++])e.removeAttribute(i)}}),Et={set:function(e,t,i){return!1===t?E.removeAttr(e,i):e.setAttribute(i,i),i}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=kt[t]||E.find.attr;kt[t]=function(e,t,n){var a,o,r=t.toLowerCase();return n||(o=kt[r],kt[r]=a,a=null!=i(e,t,n)?r:null,kt[r]=o),a}}));var Rt=/^(?:input|select|textarea|button)$/i,It=/^(?:a|area)$/i;function Dt(e){var t=e.match(q)||[];return t.join(" ")}function Mt(e){return e.getAttribute&&e.getAttribute("class")||""}function At(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(q)||[]}E.fn.extend({prop:function(e,t){return ae(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,i){var n,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(e)||(t=E.propFix[t]||t,a=E.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):Rt.test(e.nodeName)||It.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,i,n,a,o,r;return v(e)?this.each((function(t){E(this).addClass(e.call(this,t,Mt(this)))})):(t=At(e),t.length?this.each((function(){if(n=Mt(this),i=1===this.nodeType&&" "+Dt(n)+" ",i){for(o=0;o<t.length;o++)a=t[o],i.indexOf(" "+a+" ")<0&&(i+=a+" ");r=Dt(i),n!==r&&this.setAttribute("class",r)}})):this)},removeClass:function(e){var t,i,n,a,o,r;return v(e)?this.each((function(t){E(this).removeClass(e.call(this,t,Mt(this)))})):arguments.length?(t=At(e),t.length?this.each((function(){if(n=Mt(this),i=1===this.nodeType&&" "+Dt(n)+" ",i){for(o=0;o<t.length;o++){a=t[o];while(i.indexOf(" "+a+" ")>-1)i=i.replace(" "+a+" "," ")}r=Dt(i),n!==r&&this.setAttribute("class",r)}})):this):this.attr("class","")},toggleClass:function(e,t){var i,n,a,r,s=o(e),l="string"===s||Array.isArray(e);return v(e)?this.each((function(i){E(this).toggleClass(e.call(this,i,Mt(this),t),t)})):"boolean"===typeof t&&l?t?this.addClass(e):this.removeClass(e):(i=At(e),this.each((function(){if(l)for(r=E(this),a=0;a<i.length;a++)n=i[a],r.hasClass(n)?r.removeClass(n):r.addClass(n);else void 0!==e&&"boolean"!==s||(n=Mt(this),n&&ue.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":ue.get(this,"__className__")||""))})))},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++])if(1===i.nodeType&&(" "+Dt(Mt(i))+" ").indexOf(t)>-1)return!0;return!1}});var Bt=/\r/g;E.fn.extend({val:function(e){var t,i,n,a=this[0];return arguments.length?(n=v(e),this.each((function(i){var a;1===this.nodeType&&(a=n?e.call(this,i,E(this).val()):e,null==a?a="":"number"===typeof a?a+="":Array.isArray(a)&&(a=E.map(a,(function(e){return null==e?"":e+""}))),t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=E.valHooks[a.type]||E.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:(i=a.value,"string"===typeof i?i.replace(Bt,""):null==i?"":i)):void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:Dt(E.text(e))}},select:{get:function(e){var t,i,n,a=e.options,o=e.selectedIndex,r="select-one"===e.type,s=r?null:[],l=r?o+1:a.length;for(n=o<0?l:r?o:0;n<l;n++)if(i=a[n],(i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!R(i.parentNode,"optgroup"))){if(t=E(i).val(),r)return t;s.push(t)}return s},set:function(e,t){var i,n,a=e.options,o=E.makeArray(t),r=a.length;while(r--)n=a[r],(n.selected=E.inArray(E.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},g.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Lt=i.location,Ft={guid:Date.now()},jt=/\?/;E.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var zt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,n,a){var r,s,l,d,c,u,h,x,f=[n||b],m=p.call(e,"type")?e.type:e,_=p.call(e,"namespace")?e.namespace.split("."):[];if(s=x=l=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!zt.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(_=m.split("."),m=_.shift(),_.sort()),c=m.indexOf(":")<0&&"on"+m,e=e[E.expando]?e:new E.Event(m,"object"===o(e)&&e),e.isTrigger=a?2:3,e.namespace=_.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),h=E.event.special[m]||{},a||!h.trigger||!1!==h.trigger.apply(n,t))){if(!a&&!h.noBubble&&!y(n)){for(d=h.delegateType||m,zt.test(d+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),l=s;l===(n.ownerDocument||b)&&f.push(l.defaultView||l.parentWindow||i)}r=0;while((s=f[r++])&&!e.isPropagationStopped())x=s,e.type=r>1?d:h.bindType||m,u=(ue.get(s,"events")||Object.create(null))[e.type]&&ue.get(s,"handle"),u&&u.apply(s,t),u=c&&s[c],u&&u.apply&&de(s)&&(e.result=u.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,a||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),t)||!de(n)||c&&v(n[m])&&!y(n)&&(l=n[c],l&&(n[c]=null),E.event.triggered=m,e.isPropagationStopped()&&x.addEventListener(m,Ot),n[m](),e.isPropagationStopped()&&x.removeEventListener(m,Ot),E.event.triggered=void 0,l&&(n[c]=l)),e.result}},simulate:function(e,t,i){var n=E.extend(new E.Event,i,{type:e,isSimulated:!0});E.event.trigger(n,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return E.event.trigger(e,t,i,!0)}});var Nt=/\[\]$/,Ut=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Vt=/^(?:input|select|textarea|keygen)/i;function Gt(e,t,i,n){var a;if(Array.isArray(t))E.each(t,(function(t,a){i||Nt.test(e)?n(e,a):Gt(e+"["+("object"===o(a)&&null!=a?t:"")+"]",a,i,n)}));else if(i||"object"!==w(t))n(e,t);else for(a in t)Gt(e+"["+a+"]",t[a],i,n)}E.param=function(e,t){var i,n=[],a=function(e,t){var i=v(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){a(this.name,this.value)}));else for(i in e)Gt(i,e[i],t,a);return n.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Vt.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!ke.test(e))})).map((function(e,t){var i=E(this).val();return null==i?null:Array.isArray(i)?E.map(i,(function(e){return{name:t.name,value:e.replace(Ut,"\r\n")}})):{name:t.name,value:i.replace(Ut,"\r\n")}})).get()}});var Yt=/%20/g,Wt=/#.*$/,Zt=/([?&])_=[^&]*/,Xt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Jt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qt=/^(?:GET|HEAD)$/,Kt=/^\/\//,$t={},Qt={},ei="*/".concat("*"),ti=b.createElement("a");function ii(e){return function(t,i){"string"!==typeof t&&(i=t,t="*");var n,a=0,o=t.toLowerCase().match(q)||[];if(v(i))while(n=o[a++])"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function ni(e,t,i,n){var a={},o=e===Qt;function r(s){var l;return a[s]=!0,E.each(e[s]||[],(function(e,s){var d=s(t,i,n);return"string"!==typeof d||o||a[d]?o?!(l=d):void 0:(t.dataTypes.unshift(d),r(d),!1)})),l}return r(t.dataTypes[0])||!a["*"]&&r("*")}function ai(e,t){var i,n,a=E.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:n||(n={}))[i]=t[i]);return n&&E.extend(!0,e,n),e}function oi(e,t,i){var n,a,o,r,s=e.contents,l=e.dataTypes;while("*"===l[0])l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(a in s)if(s[a]&&s[a].test(n)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),i[o]}function ri(e,t,i,n){var a,o,r,s,l,d={},c=e.dataTypes.slice();if(c[1])for(r in e.converters)d[r.toLowerCase()]=e.converters[r];o=c.shift();while(o)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift(),o)if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=d[l+" "+o]||d["* "+o],!r)for(a in d)if(s=a.split(" "),s[1]===o&&(r=d[l+" "+s[0]]||d["* "+s[0]],r)){!0===r?r=d[a]:!0!==d[a]&&(o=s[0],c.unshift(s[1]));break}if(!0!==r)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}ti.href=Lt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt.href,type:"GET",isLocal:Jt.test(Lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ei,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ai(ai(e,E.ajaxSettings),t):ai(E.ajaxSettings,e)},ajaxPrefilter:ii($t),ajaxTransport:ii(Qt),ajax:function(e,t){"object"===o(e)&&(t=e,e=void 0),t=t||{};var n,a,r,s,l,d,c,u,h,x,f=E.ajaxSetup({},t),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?E(p):E.event,_=E.Deferred(),g=E.Callbacks("once memory"),v=f.statusCode||{},y={},S={},C="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Xt.exec(r))s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(e,t){return null==c&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)w.always(e[w.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),T(0,t),this}};if(_.promise(w),f.url=((e||f.url||Lt.href)+"").replace(Kt,Lt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(q)||[""],null==f.crossDomain){d=b.createElement("a");try{d.href=f.url,d.href=d.href,f.crossDomain=ti.protocol+"//"+ti.host!==d.protocol+"//"+d.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!==typeof f.data&&(f.data=E.param(f.data,f.traditional)),ni($t,f,t,w),c)return w;for(h in u=E.event&&f.global,u&&0===E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qt.test(f.type),a=f.url.replace(Wt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Yt,"+")):(x=f.url.slice(a.length),f.data&&(f.processData||"string"===typeof f.data)&&(a+=(jt.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(a=a.replace(Zt,"$1"),x=(jt.test(a)?"&":"?")+"_="+Ft.guid+++x),f.url=a+x),f.ifModified&&(E.lastModified[a]&&w.setRequestHeader("If-Modified-Since",E.lastModified[a]),E.etag[a]&&w.setRequestHeader("If-None-Match",E.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+ei+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,w,f)||c))return w.abort();if(C="abort",g.add(f.complete),w.done(f.success),w.fail(f.error),n=ni(Qt,f,t,w),n){if(w.readyState=1,u&&m.trigger("ajaxSend",[w,f]),c)return w;f.async&&f.timeout>0&&(l=i.setTimeout((function(){w.abort("timeout")}),f.timeout));try{c=!1,n.send(y,T)}catch(e){if(c)throw e;T(-1,e)}}else T(-1,"No Transport");function T(e,t,o,s){var d,h,x,y,b,S=t;c||(c=!0,l&&i.clearTimeout(l),n=void 0,r=s||"",w.readyState=e>0?4:0,d=e>=200&&e<300||304===e,o&&(y=oi(f,w,o)),!d&&E.inArray("script",f.dataTypes)>-1&&E.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),y=ri(f,y,w,d),d?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(E.lastModified[a]=b),b=w.getResponseHeader("etag"),b&&(E.etag[a]=b)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=y.state,h=y.data,x=y.error,d=!x)):(x=S,!e&&S||(S="error",e<0&&(e=0))),w.status=e,w.statusText=(t||S)+"",d?_.resolveWith(p,[h,S,w]):_.rejectWith(p,[w,S,x]),w.statusCode(v),v=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[w,f,d?h:x]),g.fireWith(p,[w,S]),u&&(m.trigger("ajaxComplete",[w,f]),--E.active||E.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,i){return E.get(e,t,i,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,i,n,a){return v(i)&&(a=a||n,n=i,i=void 0),E.ajax(E.extend({url:e,type:t,dataType:a,data:i,success:n},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,i){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,i)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(i){E(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(r){}};var si={0:200,1223:204},li=E.ajaxSettings.xhr();g.cors=!!li&&"withCredentials"in li,g.ajax=li=!!li,E.ajaxTransport((function(e){var t,n;if(g.cors||li&&!e.crossDomain)return{send:function(a,o){var r,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];for(r in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(r,a[r]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(si[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,a){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&a("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){i&&i()}}}));var di=[],ci=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=di.pop()||E.expando+"_"+Ft.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,n){var a,o,r,s=!1!==e.jsonp&&(ci.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ci.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ci,"$1"+a):!1!==e.jsonp&&(e.url+=(jt.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return r||E.error(a+" was not called"),r[0]},e.dataTypes[0]="json",o=i[a],i[a]=function(){r=arguments},n.always((function(){void 0===o?E(i).removeProp(a):i[a]=o,e[a]&&(e.jsonpCallback=t.jsonpCallback,di.push(a)),r&&v(o)&&o(r[0]),r=o=void 0})),"script"})),g.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),E.parseHTML=function(e,t,i){return"string"!==typeof e?[]:("boolean"===typeof t&&(i=t,t=!1),t||(g.createHTMLDocument?(t=b.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=b.location.href,t.head.appendChild(n)):t=b),a=H.exec(e),o=!i&&[],a?[t.createElement(a[1])]:(a=Le([e],t,o),o&&o.length&&E(o).remove(),E.merge([],a.childNodes)));var n,a,o},E.fn.load=function(e,t,i){var n,a,r,s=this,l=e.indexOf(" ");return l>-1&&(n=Dt(e.slice(l)),e=e.slice(0,l)),v(t)?(i=t,t=void 0):t&&"object"===o(t)&&(a="POST"),s.length>0&&E.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){r=arguments,s.html(n?E("<div>").append(E.parseHTML(e)).find(n):e)})).always(i&&function(e,t){s.each((function(){i.apply(this,r||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,i){var n,a,o,r,s,l,d,c=E.css(e,"position"),u=E(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=E.css(e,"top"),l=E.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,d?(n=u.position(),r=n.top,a=n.left):(r=parseFloat(o)||0,a=parseFloat(l)||0),v(t)&&(t=t.call(e,i,E.extend({},s))),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+a),"using"in t?t.using.call(e,h):u.css(h)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],a={top:0,left:0};if("fixed"===E.css(n,"position"))t=n.getBoundingClientRect();else{t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;while(e&&(e===i.body||e===i.documentElement)&&"static"===E.css(e,"position"))e=e.parentNode;e&&e!==n&&1===e.nodeType&&(a=E(e).offset(),a.top+=E.css(e,"borderTopWidth",!0),a.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-E.css(n,"marginTop",!0),left:t.left-a.left-E.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&"static"===E.css(e,"position"))e=e.offsetParent;return e||ye}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;E.fn[e]=function(n){return ae(this,(function(e,n,a){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===a)return o?o[t]:e[n];o?o.scrollTo(i?o.pageXOffset:a,i?a:o.pageYOffset):e[n]=a}),e,n,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=nt(g.pixelPosition,(function(e,i){if(i)return i=it(e,t),Ke.test(i)?E(e).position()[t]+"px":i}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){E.fn[n]=function(a,o){var r=arguments.length&&(i||"boolean"!==typeof a),s=i||(!0===a||!0===o?"margin":"border");return ae(this,(function(t,i,a){var o;return y(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===a?E.css(t,i,s):E.style(t,i,a,s)}),t,r?a:void 0,r)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var ui=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var i,n,a;if("string"===typeof t&&(i=e[t],t=e,e=i),v(e))return n=d.call(arguments,2),a=function(){return e.apply(t||this,n.concat(d.call(arguments)))},a.guid=e.guid=e.guid||E.guid++,a},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=R,E.isFunction=v,E.isWindow=y,E.camelCase=le,E.type=w,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(ui,"$1")},n=[],a=function(){return E}.apply(t,n),void 0===a||(e.exports=a);var hi=i.jQuery,xi=i.$;return E.noConflict=function(e){return i.$===E&&(i.$=xi),e&&i.jQuery===E&&(i.jQuery=hi),E},"undefined"===typeof r&&(i.jQuery=i.$=E),E}))},function(e,t,i){var n;i.r(t),i.d(t,"v1",(function(){return g})),i.d(t,"v3",(function(){return O})),i.d(t,"v4",(function(){return U})),i.d(t,"v5",(function(){return Z})),i.d(t,"NIL",(function(){return X})),i.d(t,"version",(function(){return q})),i.d(t,"validate",(function(){return l})),i.d(t,"stringify",(function(){return f})),i.d(t,"parse",(function(){return y}));var a=new Uint8Array(16);function o(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function s(e){return"string"===typeof e&&r.test(e)}for(var l=s,d=[],c=0;c<256;++c)d.push((c+256).toString(16).substr(1));function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!l(i))throw TypeError("Stringified UUID is invalid");return i}var h,x,f=u,p=0,m=0;function _(e,t,i){var n=t&&i||0,a=t||new Array(16);e=e||{};var r=e.node||h,s=void 0!==e.clockseq?e.clockseq:x;if(null==r||null==s){var l=e.random||(e.rng||o)();null==r&&(r=h=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==s&&(s=x=16383&(l[6]<<8|l[7]))}var d=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:m+1,u=d-p+(c-m)/1e4;if(u<0&&void 0===e.clockseq&&(s=s+1&16383),(u<0||d>p)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=d,m=c,x=s,d+=122192928e5;var _=(1e4*(268435455&d)+c)%4294967296;a[n++]=_>>>24&255,a[n++]=_>>>16&255,a[n++]=_>>>8&255,a[n++]=255&_;var g=d/4294967296*1e4&268435455;a[n++]=g>>>8&255,a[n++]=255&g,a[n++]=g>>>24&15|16,a[n++]=g>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(var v=0;v<6;++v)a[n+v]=r[v];return t||f(a)}var g=_;function v(e){if(!l(e))throw TypeError("Invalid UUID");var t,i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i}var y=v;function b(e){e=unescape(encodeURIComponent(e));for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}var S="6ba7b810-9dad-11d1-80b4-00c04fd430c8",C="6ba7b811-9dad-11d1-80b4-00c04fd430c8",w=function(e,t,i){function n(e,n,a,o){if("string"===typeof e&&(e=b(e)),"string"===typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var r=new Uint8Array(16+e.length);if(r.set(n),r.set(e,n.length),r=i(r),r[6]=15&r[6]|t,r[8]=63&r[8]|128,a){o=o||0;for(var s=0;s<16;++s)a[o+s]=r[s];return a}return f(r)}try{n.name=e}catch(e){}return n.DNS=S,n.URL=C,n};function T(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return P(k(R(e),8*e.length))}function P(e){for(var t=[],i=32*e.length,n="0123456789abcdef",a=0;a<i;a+=8){var o=e[a>>5]>>>a%32&255,r=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(r)}return t}function E(e){return 14+(e+64>>>9<<4)+1}function k(e,t){e[t>>5]|=128<<t%32,e[E(t)-1]=t;for(var i=1732584193,n=-271733879,a=-1732584194,o=271733878,r=0;r<e.length;r+=16){var s=i,l=n,d=a,c=o;i=A(i,n,a,o,e[r],7,-680876936),o=A(o,i,n,a,e[r+1],12,-389564586),a=A(a,o,i,n,e[r+2],17,606105819),n=A(n,a,o,i,e[r+3],22,-1044525330),i=A(i,n,a,o,e[r+4],7,-176418897),o=A(o,i,n,a,e[r+5],12,1200080426),a=A(a,o,i,n,e[r+6],17,-1473231341),n=A(n,a,o,i,e[r+7],22,-45705983),i=A(i,n,a,o,e[r+8],7,1770035416),o=A(o,i,n,a,e[r+9],12,-1958414417),a=A(a,o,i,n,e[r+10],17,-42063),n=A(n,a,o,i,e[r+11],22,-1990404162),i=A(i,n,a,o,e[r+12],7,1804603682),o=A(o,i,n,a,e[r+13],12,-40341101),a=A(a,o,i,n,e[r+14],17,-1502002290),n=A(n,a,o,i,e[r+15],22,1236535329),i=B(i,n,a,o,e[r+1],5,-165796510),o=B(o,i,n,a,e[r+6],9,-1069501632),a=B(a,o,i,n,e[r+11],14,643717713),n=B(n,a,o,i,e[r],20,-373897302),i=B(i,n,a,o,e[r+5],5,-701558691),o=B(o,i,n,a,e[r+10],9,38016083),a=B(a,o,i,n,e[r+15],14,-660478335),n=B(n,a,o,i,e[r+4],20,-405537848),i=B(i,n,a,o,e[r+9],5,568446438),o=B(o,i,n,a,e[r+14],9,-1019803690),a=B(a,o,i,n,e[r+3],14,-187363961),n=B(n,a,o,i,e[r+8],20,1163531501),i=B(i,n,a,o,e[r+13],5,-1444681467),o=B(o,i,n,a,e[r+2],9,-51403784),a=B(a,o,i,n,e[r+7],14,1735328473),n=B(n,a,o,i,e[r+12],20,-1926607734),i=L(i,n,a,o,e[r+5],4,-378558),o=L(o,i,n,a,e[r+8],11,-2022574463),a=L(a,o,i,n,e[r+11],16,1839030562),n=L(n,a,o,i,e[r+14],23,-35309556),i=L(i,n,a,o,e[r+1],4,-1530992060),o=L(o,i,n,a,e[r+4],11,1272893353),a=L(a,o,i,n,e[r+7],16,-155497632),n=L(n,a,o,i,e[r+10],23,-1094730640),i=L(i,n,a,o,e[r+13],4,681279174),o=L(o,i,n,a,e[r],11,-358537222),a=L(a,o,i,n,e[r+3],16,-722521979),n=L(n,a,o,i,e[r+6],23,76029189),i=L(i,n,a,o,e[r+9],4,-640364487),o=L(o,i,n,a,e[r+12],11,-421815835),a=L(a,o,i,n,e[r+15],16,530742520),n=L(n,a,o,i,e[r+2],23,-995338651),i=F(i,n,a,o,e[r],6,-198630844),o=F(o,i,n,a,e[r+7],10,1126891415),a=F(a,o,i,n,e[r+14],15,-1416354905),n=F(n,a,o,i,e[r+5],21,-57434055),i=F(i,n,a,o,e[r+12],6,1700485571),o=F(o,i,n,a,e[r+3],10,-1894986606),a=F(a,o,i,n,e[r+10],15,-1051523),n=F(n,a,o,i,e[r+1],21,-2054922799),i=F(i,n,a,o,e[r+8],6,1873313359),o=F(o,i,n,a,e[r+15],10,-30611744),a=F(a,o,i,n,e[r+6],15,-1560198380),n=F(n,a,o,i,e[r+13],21,1309151649),i=F(i,n,a,o,e[r+4],6,-145523070),o=F(o,i,n,a,e[r+11],10,-1120210379),a=F(a,o,i,n,e[r+2],15,718787259),n=F(n,a,o,i,e[r+9],21,-343485551),i=I(i,s),n=I(n,l),a=I(a,d),o=I(o,c)}return[i,n,a,o]}function R(e){if(0===e.length)return[];for(var t=8*e.length,i=new Uint32Array(E(t)),n=0;n<t;n+=8)i[n>>5]|=(255&e[n/8])<<n%32;return i}function I(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function D(e,t){return e<<t|e>>>32-t}function M(e,t,i,n,a,o){return I(D(I(I(t,e),I(n,o)),a),i)}function A(e,t,i,n,a,o,r){return M(t&i|~t&n,e,t,a,o,r)}function B(e,t,i,n,a,o,r){return M(t&n|i&~n,e,t,a,o,r)}function L(e,t,i,n,a,o,r){return M(t^i^n,e,t,a,o,r)}function F(e,t,i,n,a,o,r){return M(i^(t|~n),e,t,a,o,r)}var j=T,z=w("v3",48,j),O=z;function N(e,t,i){e=e||{};var n=e.random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var a=0;a<16;++a)t[i+a]=n[a];return t}return f(n)}var U=N;function H(e,t,i,n){switch(e){case 0:return t&i^~t&n;case 1:return t^i^n;case 2:return t&i^t&n^i&n;case 3:return t^i^n}}function V(e,t){return e<<t|e>>>32-t}function G(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var a=0;a<n.length;++a)e.push(n.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,r=Math.ceil(o/16),s=new Array(r),l=0;l<r;++l){for(var d=new Uint32Array(16),c=0;c<16;++c)d[c]=e[64*l+4*c]<<24|e[64*l+4*c+1]<<16|e[64*l+4*c+2]<<8|e[64*l+4*c+3];s[l]=d}s[r-1][14]=8*(e.length-1)/Math.pow(2,32),s[r-1][14]=Math.floor(s[r-1][14]),s[r-1][15]=8*(e.length-1)&4294967295;for(var u=0;u<r;++u){for(var h=new Uint32Array(80),x=0;x<16;++x)h[x]=s[u][x];for(var f=16;f<80;++f)h[f]=V(h[f-3]^h[f-8]^h[f-14]^h[f-16],1);for(var p=i[0],m=i[1],_=i[2],g=i[3],v=i[4],y=0;y<80;++y){var b=Math.floor(y/20),S=V(p,5)+H(b,m,_,g)+v+t[b]+h[y]>>>0;v=g,g=_,_=V(m,30)>>>0,m=p,p=S}i[0]=i[0]+p>>>0,i[1]=i[1]+m>>>0,i[2]=i[2]+_>>>0,i[3]=i[3]+g>>>0,i[4]=i[4]+v>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}var Y=G,W=w("v5",80,Y),Z=W,X="00000000-0000-0000-0000-000000000000";function J(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var q=J},function(e,t,i){e.exports=i(4)},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.JSPluginV1=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(0),o=i(5),r=i(12),s=i(14),l=i(16),d=i(1),c=u(d);function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var x=function(){var e=-1,t=0,i=0,d=1,u=40,x=4194304,f=1001,p=1002,m=1003,_=2002,g=Symbol("OPTIONS"),v=Symbol("CURRENTPLAYRATE"),y=Symbol("CURRENTSOUNDWND"),b=Symbol("MAXWNDNUM"),S=Symbol("MAXWNDNUM"),C=Symbol("DRAWCANVAS"),w=Symbol("SHAPEID"),T=Symbol("WINDOWFULL"),P=Symbol("SINGLEWINDOW"),E=Symbol("FILETMP"),k=Symbol("STATUSTMP"),R=Symbol("UPGRADESTATUSURL"),I=Symbol("CURWNDINDEX"),D=Symbol("CALLBACKFUNCTION"),M=Symbol("PLUGINVERSION"),A=Symbol("CANFULLSCREEN"),B=function(){function L(e){h(this,L),this.oStreamClient=new o.StreamClient,this.oStorageManager=null,this.oJSPlugin=null,"string"===typeof e.staticPath&&(this.staticPath=e.staticPath);var t=this,n={szId:"playWnd",iMode:0,iType:1,iWidth:400,iHeight:300,iMaxSplit:4,iCurrentSplit:2,szBasePath:"./"};this[g]=Object.assign(n,e),this.iWidth=e.iWidth,this.iHeight=e.iHeight,this.b3DZoom=!1,this.bEZoom=!1;var a={border:"#000000",borderSelect:"#FFCC00",background:"#4C4B4B"};a=Object.assign(a,e.oStyle),this[g].oStyle=a,this[g].iCurrentSplit>this[g].iMaxSplit&&(this[g].iCurrentSplit=this[g].iMaxSplit),this[v]=1,this[y]=-1,this[b]=this[g].iMaxSplit*this[g].iMaxSplit,this[w]="",this[T]=!1,this[P]=null,this[E]=null,this[k]="",this[R]="",this[I]=-1,this[D]=null,this[A]=!0,this[M]="V1.2.0 build20190123",this.bPlay=!1,t.oStorageManager=new s.StorageManager(this[g].szBasePath+"/transform",{staticPath:this.staticPath}),"string"===typeof t[g].szId?t.oJSPlugin=(0,c["default"])("#"+t[g].szId):t.oJSPlugin=t[g].szId,this[S]=[];for(var r=0;r<this[b];r++)this[S][r]={},this[S][r].bSelect=!1,this[S][r].bPlay=!1,this[S][r].bPause=!1,this[S][r].bRecord=!1,this[S][r].oPlayCtrl=null,this[S][r].szPlayType="",this[S][r].szStorageUUID="",this[S][r].szStreamUUID="",this[S][r].aHead=[],this[S][r].bLoad=!1,this[S][r].windowID=t[g].szId+"canvas"+r,this[S][r].drawID=t[g].szId+"canvas_draw"+r,this[S][r].iRate=1,this[S][r].bEZoom=!1,this[S][r].szSecretKey="",this[S][r].bFrameForward=!1,this[S][r].iDecodeType=i,this[S][r].bFirstFrame=!1;t.listenBrowserVisibility(),0===this[g].iMode?t.createWindows():1===this[g].iMode||2===this[g].iMode&&t.createIMGWindows(),0===this[g].iType&&t.oJSPlugin.hide(),t.initEvent(),t.EventCallback.windowEventSelect(0),window.JSPlayerModuleLoaded=!0}return n(L,[{key:"listenBrowserVisibility",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){if(document.hidden)for(var t=0;t<16;t++)e[S][t]&&e[S][t].bLoad&&e[S][t].oPlayCtrl.PlayM4_IsVisible(!1);else for(var i=0;i<16;i++)e[S][i]&&e[S][i].bLoad&&e[S][i].oPlayCtrl.PlayM4_IsVisible(!0)}),!1)}},{key:"createWindows",value:function(e,t){var i=this;e&&t&&(i.iWidth=e,i.iHeight=t);var n=i.iWidth%i[g].iCurrentSplit,a=i.iHeight%i[g].iCurrentSplit,o=(i.iWidth-n-2*i[g].iCurrentSplit)/i[g].iCurrentSplit,r=(i.iHeight-a-2*i[g].iCurrentSplit)/i[g].iCurrentSplit,s=(i.iWidth-n)/i[g].iCurrentSplit,l=(i.iHeight-a)/i[g].iCurrentSplit,d=i[g].iCurrentSplit;"string"===typeof i[g].szId?i.oJSPlugin=(0,c["default"])("#"+i[g].szId):i.oJSPlugin=i[g].szId;var u='<div class="'+i[g].szId+'parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">',h=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(h)for(var x=0;x<1;x++){e=o+(x%d===d-1?n:0),t=r+(x+d>=Math.pow(d,2)?a:0);var f=s+(x%d===d-1?n:0),p=l+(x+d>=Math.pow(d,2)?a:0);f*=2,p*=2,u+='<div style="transform: scale(0.5);-webkit-transform: scale(0.5);-webkit-transform-origin:0 0;text-align:left;transform-origin:0 0; width:'+f+"px;height:"+p+'px;"><div style="float:left; background-color: '+i[g].oStyle.background+'; position: relative; width:100%; height:100%;"><canvas id="'+i[g].szId+"canvas_draw"+x+'"  class="'+i[g].szId+'draw-window" style="position:absolute; top:0; left:0; z-index:999;" wid="'+x+'" width='+f+" height="+p+"></canvas>"+(0===x?'<img style="display:none;" id="playImg'+x+'" src="">':"")+'<canvas id="'+i[g].szId+"canvas"+x+'" class="'+i[g].szId+'play-window" style="z-index:9;" wid="'+x+'" width="'+f+'" height="'+p+'"></canvas></div></div>'}else for(var m=0;m<i[b];m++){e=o+(m%d===d-1?n:0),t=r+(m+d>=Math.pow(d,2)?a:0);var _=s+(m%d===d-1?n:0),v=l+(m+d>=Math.pow(d,2)?a:0);u+='<div style="float:left; background-color: '+i[g].oStyle.background+"; position: relative; width: "+_+"px; height: "+v+'px;"><canvas id="'+i[g].szId+"canvas"+m+'" class="'+i[g].szId+'play-window" style="z-index:9;" wid="'+m+'" width="'+_+'" height="'+v+'"></canvas>'+(0===m?'<img style="display:none;" id="playImg'+m+'" src="">':"")+'<canvas id="'+i[g].szId+"canvas_draw"+m+'"  class="'+i[g].szId+'draw-window" style="position:absolute; top:0; left:0; z-index:999;" wid="'+m+'" width='+e+" height="+t+"></canvas></div>"}u+="</div>",i.oJSPlugin.html(u)}},{key:"createIMGWindows",value:function(e,t){var i=this;e&&t&&(i.iWidth=e,i.iHeight=t);var n=i.iWidth%i[g].iCurrentSplit,a=i.iHeight%i[g].iCurrentSplit,o=(i.iWidth-n-2*i[g].iCurrentSplit)/i[g].iCurrentSplit,r=(i.iHeight-a-2*i[g].iCurrentSplit)/i[g].iCurrentSplit,s=(i.iWidth-n)/i[g].iCurrentSplit,l=(i.iHeight-a)/i[g].iCurrentSplit,d=i[g].iCurrentSplit;"string"===typeof i[g].szId?i.oJSPlugin=(0,c["default"])("#"+i[g].szId):i.oJSPlugin=i[g].szId,i.oJSPlugin.html("");for(var u='<div class="'+i[g].szId+'parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">',h=0;h<i[b];h++){e=o+(h%d===d-1?n:0),t=r+(h+d>=Math.pow(d,2)?a:0);var x=s+(h%d===d-1?n:0),f=l+(h+d>=Math.pow(d,2)?a:0);u+='<div style="float:left; background-color: '+i[g].oStyle.background+"; position: relative; width: "+x+"px; height: "+f+'px;"><img id="'+i[g].szId+"canvas"+h+'" class="'+i[g].szId+'play-window" wid="'+h+'" width="'+x+'" height="'+f+'"></img><canvas id="'+i[g].szId+"canvas_draw"+h+'"  class="'+i[g].szId+'draw-window" style="position:absolute; top:0; left:0; z-index:999;" wid="'+h+'" width='+e+" height="+t+"></canvas></div>"}u+="</div>",i.oJSPlugin.html(u)}},{key:"initCallbackEvent",value:function(){var e=this;e.EventCallback=function(){return{openStreamCallback:function(){window.openStreamCallback&&window.openStreamCallback()},getStreamHeaderCallback:function(){window.getStreamHeaderCallback&&window.getStreamHeaderCallback()},getVideoStreamCallback:function(){window.getVideoStreamCallback&&window.getVideoStreamCallback()},appearFirstFrameCallback:function(){window.appearFirstFrameCallback&&window.appearFirstFrameCallback()},averageStreamSuccessCallback:function(){window.averageStreamSuccessCallback&&window.averageStreamSuccessCallback()},loadEventHandler:function(){window.loadEventHandler&&window.loadEventHandler()},zoomEventResponse:function(){},windowEventSelect:function(t){e[I]!==t&&(e[I]=t,(e[S][t].bEZoom||e.b3DZoom)&&((0,c["default"])("."+e[g].szId+"draw-window").unbind(),e[C].setDrawStatus(!1),e[C]=null,e[C]=new l.ESCanvas(e[g].szId+"canvas_draw0"),e[C].setShapeType("Rect"),e[C].setDrawStyle("#ff0000","",0),e[S][t].bEZoom?e[C].setDrawStatus(!0,(function(i){i.startPos&&i.endPos&&(i.startPos[0]>i.endPos[0]?e[S][t].oPlayCtrl.PlayM4_SetDisplayRegion(null,!1):e[S][t].oPlayCtrl.PlayM4_SetDisplayRegion({left:i.startPos[0],top:i.startPos[1],right:i.endPos[0],bottom:i.endPos[1]},!0))})):e.b3DZoom&&e[C].setDrawStatus(!0,(function(t){e[D](t)}))),window.GetSelectWndInfo&&window.GetSelectWndInfo(t))},pluginErrorHandler:function(e,t,i){window.PluginEventHandler&&window.PluginEventHandler(e,t,i)},windowEventOver:function(e){window.windowEventOver&&window.windowEventOver(e)},windowEventOut:function(e){window.windowEventOut&&window.windowEventOut(e)},windowEventUp:function(e){window.windowEventUp&&window.windowEventUp(e)},windowFullCcreenChange:function(e){window.windowFullCcreenChange&&window.windowFullCcreenChange(e)},firstFrameDisplay:function(e,t,i){window.firstFrameDisplay&&window.firstFrameDisplay(e,t,i)},performanceLack:function(){window.performanceLack&&window.performanceLack()},mouseEvent:function(e,t,i){var n='<?xml version="1.0"?><MouseEvent><WndIndex>0</WndIndex><EventType>'+e+"</EventType><Position><x>"+t+"</x><y>"+i+"</y><delta>0</delta></Position></MouseEvent>";window.onMouseEvent&&window.onMouseEvent(n)}}}()}},{key:"initEvent",value:function(){var e=this;e.initCallbackEvent(),e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().each((function(t){var i=this,n=!1;function a(){var t=document.getElementsByTagName("body")[0],i=document.getElementsByTagName("html")[0];switch(window.orientation){case-90:case 90:setTimeout((function(){e.JS_FullScreenDisplay(!0),i.style["overflow-y"]="hidden",i.style["height"]="100%",t.style["overflow-y"]="hidden",t.style["height"]="100%"}),200);break;case 0:case 180:setTimeout((function(){e.JS_CancelFullScreenDisplay(!0),i.style["overflow-y"]="auto",t.style["overflow-y"]="auto"}),200);break}}(0,c["default"])(i).unbind().bind("mousedown",(function(){e.EventCallback.windowEventSelect(parseInt(e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().eq(t).find("."+e[g].szId+"play-window").eq(0).attr("wid"),10))})),(0,c["default"])(i).bind("mouseenter",(function(t){var i=e[g].szId;i=t.target.id&&-1===t.target.id.indexOf("_")?t.target.id.split("canvas0")[0]:t.target.id.split("canvas_draw0")[0],(0,c["default"])("#"+i+"canvas_draw0").css("pointer-events","all"),e.bEZoom||e.b3DZoom?t.target.id&&-1===t.target.id.indexOf("_")&&(e[C]=null,(0,c["default"])("."+i+"draw-window").unbind(),e[C]=new l.ESCanvas(i+"canvas_draw0"),e[C].setShapeType("Rect"),e[C].setDrawStyle("#ff0000","",0),e.b3DZoom&&e[C].setDrawStatus(!0,(function(t){e[D](t)}))):(0,c["default"])("#"+i+"canvas_draw0").css("pointer-events","none")})),(0,c["default"])(i).bind("mouseleave",(function(t){var i=e[g].szId;i=t.target.id&&-1===t.target.id.indexOf("_")?t.target.id.split("canvas0")[0]:t.target.id.split("canvas_draw0")[0],(0,c["default"])("#"+i+"canvas_draw0").css("pointer-events","none")})),(0,c["default"])(i).bind("mouseover",(function(i){e.EventCallback.windowEventOver(t),i.stopPropagation()})),(0,c["default"])(i).bind("mouseout",(function(i){e.EventCallback.windowEventOut(t),i.stopPropagation()})),(0,c["default"])(i).bind("mousedown",(function(t){if(e[C]){n=!0;var i=t.offsetX/e[C].m_iCanvasWidth,a=t.offsetY/e[C].m_iCanvasHeight;2===t.button?e.EventCallback.mouseEvent(4,i,a):0===t.button&&e.EventCallback.mouseEvent(1,i,a)}t.stopPropagation()})),(0,c["default"])(i).bind("mousemove",(function(t){if(e[C]){var i=t.offsetX/e[C].m_iCanvasWidth,a=t.offsetY/e[C].m_iCanvasHeight;n?e.EventCallback.mouseEvent(7,i,a):e.EventCallback.mouseEvent(6,i,a)}t.stopPropagation()})),(0,c["default"])(i).bind("mousewheel",(function(t){if(e[C]){var i=t.offsetX/e[C].m_iCanvasWidth,n=t.offsetY/e[C].m_iCanvasHeight;e.EventCallback.mouseEvent(8,i,n)}t.stopPropagation()})),(0,c["default"])(i).bind("mouseup",(function(i){if(n=!1,e.EventCallback.windowEventUp(t),e[C]){var a=i.offsetX/e[C].m_iCanvasWidth,o=i.offsetY/e[C].m_iCanvasHeight;2===i.button?e.EventCallback.mouseEvent(5,a,o):0===i.button&&e.EventCallback.mouseEvent(3,a,o)}})),(new Date).getTime(),window.addEventListener("orientationchange",a,!1)})),"undefined"!==typeof document.fullScreen?document.addEventListener("fullscreenchange",(function(){var t=document.fullscreen||!1;e.EventCallback.windowFullCcreenChange(t)})):"undefined"!==typeof document.webkitIsFullScreen?document.addEventListener("webkitfullscreenchange",(function(){var t=document.webkitIsFullScreen||!1;e.EventCallback.windowFullCcreenChange(t)})):"undefined"!==typeof document.mozFullScreen&&document.addEventListener("mozfullscreenchange",(function(){var t=document.mozFullScreen||!1;e.EventCallback.windowFullCcreenChange(t)}))}},{key:"updateWnd",value:function(){for(var e=this,t=e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().length,i=e.iWidth%e[g].iCurrentSplit,n=e.iHeight%e[g].iCurrentSplit,a=(e.iWidth-i-2*e[g].iCurrentSplit)/e[g].iCurrentSplit,o=(e.iHeight-n-2*e[g].iCurrentSplit)/e[g].iCurrentSplit,r=(e.iWidth-i)/e[g].iCurrentSplit,s=(e.iHeight-n)/e[g].iCurrentSplit,l=e[g].iCurrentSplit,d=0;d<t;d++){var c=a+(d%l===l-1?i:0),u=o+(d+l>=Math.pow(l,2)?n:0),h=r+(d%l===l-1?i:0),x=s+(d+l>=Math.pow(l,2)?n:0);e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().eq(d).width(h),e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().eq(d).height(x),e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().eq(d).find("."+e[g].szId+"draw-window").attr("width",c),e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().eq(d).find("."+e[g].szId+"draw-window").attr("height",u),e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().eq(d).find("."+e[g].szId+"play-window").attr("width",h),e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).children().eq(d).find("."+e[g].szId+"play-window").attr("height",x)}}},{key:"cbPlayCtrlCallback",value:function(e,t,n,a,o,r,s){var l=this;if((0,c["default"])("#"+l[S][n].windowID).length){var h=!1;a&&o&&(h=!0),l[S][n].bLoad=!0,l.EventCallback&&l.EventCallback.openStreamCallback&&l.EventCallback.openStreamCallback(),l.oStreamClient.openStream(e,t,(function(e){if(e.errorCode&&"1"!=e.errorCode&&l.EventCallback&&l.EventCallback.pluginErrorHandler&&(l.EventCallback.pluginErrorHandler(n,e.errorCode,e),s(e)),e.bHead&&!l[S][n].bPlay){console.log(l.EventCallback),l.EventCallback&&l.EventCallback.getStreamHeaderCallback&&l.EventCallback.getStreamHeaderCallback(),l.firstGetData=!0,l[S][n].bPlay=!0,l.bPlay=!0,l[S][n].aHead=new Uint8Array(e.buf),l[S][n].oPlayCtrl.PlayM4_OpenStream(e.buf,u,2097152);try{var a=function(e,t){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=t.match(i);return null!=n?unescape(n[2]):null},o=a("begin",t.playURL),r=parseInt(o.slice(0,4)),c=parseInt(o.slice(4,6)),h=parseInt(o.slice(6,8)),m=parseInt(o.slice(9,11)),_=parseInt(o.slice(11,13)),g=parseInt(o.slice(13,15))+3;console.log("设置OSD时间: ",r+":"+c+":"+h+":"+m+":"+_+":"+g+":0"),l[S][n].oPlayCtrl.PlayM4_SetGlobalBaseTime(r,c,h,m,_,g,0)}catch(e){console.log("PlayM4_SetGlobalBaseTime:",e)}""!==l[S][n].szSecretKey&&l[S][n].oPlayCtrl.PlayM4_SetSecretKey(1,l[S][n].szSecretKey,128),4===l[S][n].aHead[8]?(console.log("PlayM4_SetStreamOpenMode:0"),l[S][n].oPlayCtrl.PlayM4_SetStreamOpenMode(0)):(console.log("PlayM4_SetStreamOpenMode:1"),l[S][n].oPlayCtrl.PlayM4_SetStreamOpenMode(1));var v=l[S][n].oPlayCtrl.PlayM4_SetRunTimeInfoCallBackEx(1,(function(e,t,i,n,a){l.EventCallback&&l.EventCallback.setRunTimeInfoCallBack&&l.EventCallback.setRunTimeInfoCallBack(e,t,i,n,a)}));console.log("错误实时信息回调:",v),l[S][n].oPlayCtrl.PlayM4_SetInputBufSize(x),l[S][n].oPlayCtrl.PlayM4_Play(l[S][n].windowID)}else{var y=new Uint8Array(e.buf),b=l[S][n].oPlayCtrl.PlayM4_GetInputBufSize(),C=l[S][n].oPlayCtrl.PlayM4_GetYUVBufSize(),w=l[S][n].oPlayCtrl.PlayM4_GetDecodeFrameType();b>.5*x&&b<.8*x&&1===l[S][n].iRate&&(w===d||l[S][n].bFrameForward||(l[S][n].oPlayCtrl.PlayM4_SetDecodeFrameType(d),l.EventCallback.performanceLack())),C>10&&C<15&&!l[S][n].bFrameForward&&w!==d&&(l[S][n].oPlayCtrl.PlayM4_SetDecodeFrameType(d),l.EventCallback.performanceLack()),C<10&&b<.5*x&&w!==i&&1===l[S][n].iRate&&l[S][n].oPlayCtrl.PlayM4_SetDecodeFrameType(i),e.statusString?l.EventCallback.pluginErrorHandler(n,f,e):e.type&&"exception"===e.type?l.EventCallback.pluginErrorHandler(n,p,e):(l.firstGetData&&(l.firstGetData=!1,console.log("第一次获取数据-----------6"),l.EventCallback&&l.EventCallback.getVideoStreamCallback&&l.EventCallback.getVideoStreamCallback()),l[S][n].oPlayCtrl.PlayM4_InputData(y,y.length)),!l[S][n].bFirstFrame&&e.errorCode&&"1"==e.errorCode&&l[S][n].oPlayCtrl.PlayM4_GetFrameResolution((function(e,t){0!=e&&0!=t&&(console.log("iWidth--------",e),console.log("iHeight--------",t),l[S][n].bFirstFrame=!0,l.EventCallback.firstFrameDisplay(n,e,t),l.EventCallback&&l.EventCallback.appearFirstFrameCallback&&l.EventCallback.appearFirstFrameCallback(),l.EventCallback&&l.EventCallback.averageStreamSuccessCallback&&l.EventCallback.averageStreamSuccessCallback())}))}l[S][n].szStorageUUID&&l.oStorageManager.inputData(l[S][n].szStorageUUID,e.buf),e=null}),(function(){})).then((function(e){l[S][n].szStreamUUID=e,l.oStreamClient.startPlay(e,a,o).then((function(){h?(l[S][n].szPlayType="playback",l[S][n].iRate=1,l[S][n].oPlayCtrl.PlayM4_PlayRate(l[S][n].iRate)):l[S][n].szPlayType="realplay",r()}),(function(e){s(e)}))}),(function(e){s(e)}))}}},{key:"cbPlayIMGCallback",value:function(e,t,i,n,a,o,r){var s=this;(0,c["default"])("#"+s[S][i].windowID).length&&(s[S][i].bPlay=!0,s.bPlay=!0,s.oStreamClient.openStream(e,t,(function(e){if(!e.bHead){var t=new Blob([e.buf],{type:"image/jpeg"}),n=URL.createObjectURL(t);(0,c["default"])("#"+s[g].szId+"canvas"+i).length&&(document.getElementById(s[g].szId+"canvas"+i).src=n)}}),(function(){if(s[S][i].bPlay){s.EventCallback.pluginErrorHandler(i,m),s[S][i].bPlay=!1;var e=s[S][i].oPlayCtrl.PlayM4_GetInputBufSize();console.log("PlayM4_GetInputBufSize2:::",e),s.bPlay=!1}})).then((function(e){s[S][i].szStreamUUID=e,s.oStreamClient.startPlay(e,n,a).then((function(){s[S][i].szPlayType="realplay",o()}),(function(e){r(e)}))}),(function(e){r(e)})))}},{key:"JS_UpdateWindowStyle",value:function(e){var t=this;this[g].oStyle=e,t.updateWnd()}},{key:"JS_GetPluginVersion",value:function(){var e=this;return e[M]}},{key:"JS_ArrangeWindow",value:function(e){var t=this;if(e<t[g].iMaxSplit?t[g].iCurrentSplit=e:t[g].iCurrentSplit=t[g].iMaxSplit,a.oTool.isFirefox())for(var i=0;i<t[g].iMaxSplit*t[g].iMaxSplit;i++)t[S][i].oPlayCtrl&&t[S][i].oPlayCtrl.PlayM4_ClearCanvas();t.updateWnd(),t.EventCallback.windowEventSelect(0)}},{key:"JS_SetSecretKey",value:function(e,t){return e<0||""===t||"undefined"===typeof t?-1:(this[S][e].szSecretKey=t,0)}},{key:"JS_Play",value:function(e,t,n,a,o){console.log("JS_Play");var s=this;s.playURL=t.playURL,s.szUrl=e;var l=new Promise((function(l,d){if(n<0||n>s[b]-1)d();else if(s[S][n].bFrameForward)d();else if(s[S][n].bPlay&&s.JS_Stop(n),0===s[g].iMode)setTimeout((function(){s[S][n].bFirstFrame=!1,s[S][n].iDecodeType=i,s[S][n].oPlayCtrl?s.cbPlayCtrlCallback(e,t,n,a,o,l,d):s[S][n].oPlayCtrl=new r.JSPlayCtrl(s[g].szBasePath+"/playctrl/",(function(i){"loaded"!==i.cmd||s[S][n].bLoad?"OnebyOne"===i.cmd?i.status?s[S][n].bPause&&(s.oStreamClient.resume(s[S][n].szStreamUUID),s[S][n].bPause=!1):s[S][n].bPause||(s.oStreamClient.pause(s[S][n].szStreamUUID),s[S][n].bPause=!0):i.cmd:s.cbPlayCtrlCallback(e,t,n,a,o,l,d)}),n,s.staticPath)}),200);else if(1===s[g].iMode);else if(2===s[g].iMode){var u=(0,c["default"])("."+s[g].szId+"play-window").eq(n);u.show(),s.cbPlayIMGCallback(e,t,n,a,o,l,d)}}));return l}},{key:"JS_Seek",value:function(e,t,i){var n=this,a=new Promise((function(a,o){e<0||e>n[b]-1?o():n[S][e].bPlay?(console.log("seek，清理缓存"),n[S][e].oPlayCtrl.aVideoYUVBuffer.splice(0,n[S][e].oPlayCtrl.aVideoYUVBuffer.length),n.oStreamClient.seek(n[S][e].szStreamUUID,t,i),a()):o()}));return a}},{key:"JS_GetSdkVersion",value:function(){var e=this;return e[S][0].oPlayCtrl.PlayM4_GetSdkVersion()}},{key:"JS_isInited",value:function(){var e=this;return e[S][0].bLoad}},{key:"JS_SetLostFrameMode",value:function(e){var t=this;return t[S][0].oPlayCtrl.PlayM4_SetLostFrameMode(e)}},{key:"JS_DestroyWorker",value:function(){var e=this;e[S].forEach((function(e){e.bPlay&&e.oPlayCtrl.PlayM4_CloseStream(),e.oPlayCtrl&&(e.oPlayCtrl.PlayM4_Destroy(),e.oPlayCtrl=null,e.bLoad=!1)})),e[C]&&e[C].setShapeType("")}},{key:"JS_Stop",value:function(e){var t=this,i=new Promise((function(i,n){e<0||e>t[b]-1?n():(t[S][e].szStorageUUID&&t.JS_StopSave(e),t[S][e].bEZoom&&t.JS_DisableZoom(e),t[y]===e&&(t[y]=-1),t.oStreamClient.stopAll(t[S][e].szStreamUUID).then((function(){if(t[S][e].bPlay=!1,t.bPlay=!1,t[S][e].bFrameForward=!1,t[S][e].iRate=1,0===t[g].iMode)t[S][e].oPlayCtrl&&(t[S][e].oPlayCtrl.PlayM4_Stop&&t[S][e].oPlayCtrl.PlayM4_Stop(),t[S][e].oPlayCtrl.PlayM4_CloseStream&&t[S][e].oPlayCtrl.PlayM4_CloseStream());else if(2===t[g].iMode){var n=(0,c["default"])("."+t[g].szId+"play-window").eq(e);n.hide()}setTimeout((function(){i()}),500)}),(function(){setTimeout((function(){n()}),500)})))}));return i}},{key:"JS_Pause",value:function(e,t){console.log("JS_Pause");var i=this,n=new Promise((function(n,a){if(e<0||e>i[b]-1)a();else{i[S][e].szStorageUUID&&i.JS_StopSave(e);var o=function(t){t.fileUint8Array&&(console.log("暂停缓存截图数据 start",t.fileUint8Array),i[S][e].tmpCapturePictureData=t.fileUint8Array)};i.JS_CapturePicture(0,""+(new Date).getTime(),"JPEG",o,!0).then((function(){}))["catch"]((function(e){return console.log(e)})),i[S][e].bPlay?i[S][e].bFrameForward?a():i.JS_GetOSDTime(0).then((function(o){var r=new Date(1e3*o),s=""+r.getFullYear()+(r.getMonth()>8?r.getMonth()+1:"0"+(r.getMonth()+1))+(r.getDate()>9?r.getDate():"0"+r.getDate())+(r.getHours()>9?r.getHours():"0"+r.getHours())+(r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes())+(r.getSeconds()>9?r.getSeconds():"0"+r.getSeconds());if(i[S][e].pauseTime=s,i[S][e].pauseDate=r.valueOf(),t)i.oStreamClient.stopAll(i[S][e].szStreamUUID).then((function(){if(i[S][e].bPlay=!1,i.bPlay=!1,i[S][e].bFrameForward=!1,i[S][e].iRate=1,0===i[g].iMode)i[S][e].oPlayCtrl&&(i[S][e].oPlayCtrl.PlayM4_Stop&&i[S][e].oPlayCtrl.PlayM4_Stop(),i[S][e].oPlayCtrl.PlayM4_CloseStream&&i[S][e].oPlayCtrl.PlayM4_CloseStream());else if(2===i[g].iMode){var t=(0,c["default"])("."+i[g].szId+"play-window").eq(e);t.hide()}setTimeout((function(){i[S][e].bPause=!0,n({pauseDate:r})}),500)}),(function(){setTimeout((function(){a()}),500)}));else{if(i[S][e].bPlay=!1,i.bPlay=!1,0===i[g].iMode)i[S][e].oPlayCtrl&&i[S][e].oPlayCtrl.PlayM4_Pause&&i[S][e].oPlayCtrl.PlayM4_Pause(!0);else if(2===i[g].iMode){var l=(0,c["default"])("."+i[g].szId+"play-window").eq(e);l.hide()}setTimeout((function(){i[S][e].bPause=!0,n({pauseDate:r})}),500)}}))["catch"]((function(e){a()})):a()}}));return n}},{key:"JS_Resume",value:function(e){console.log("JS_Resume");var t=0,i=this,n=new Promise((function(n,a){if(t>i[b]-1)a();else{if(e&&(i[S][t].pauseTime?i[S][t].pauseTime=i[S][t].pauseTime.slice(0,14-e.length)+e:i[S][t].pauseTime=e),-1!==i.playURL.indexOf("playback")){var o=i[S][t].pauseTime;console.log("pauseTime",o),i.playURL=i.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin="+o.slice(0,8)+"T"+o.slice(8,14)+"Z")}if(-1!==i.playURL.indexOf("cloudplayback")){var r=i[S][t].pauseDate;i.playURL=i.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+r),console.log("playURL:",i.playURL)}e?(i.JS_Play(i.szUrl,{playURL:i.playURL},t).then((function(e){n(e)}))["catch"]((function(e){a(e)})),i[S][t].bPause=!1):(i[S][t].oPlayCtrl&&i[S][t].oPlayCtrl.PlayM4_Pause&&i[S][t].oPlayCtrl.PlayM4_Pause(!1),i[S][t].bPause=!1,i[S][t].bPlay=!0,i.bPlay=!0,n())}}));return n}},{key:"JS_Slow",value:function(e){var t=this,n=new Promise((function(n,a){e<0||e>t[b]-1?a():t[S][e].bPlay&&-8!==t[S][e].iRate?t[S][e].bFrameForward?a():(t[S][e].iRate<0&&t[S][e].iRate>-8&&(t[S][e].iRate*=2),1===t[S][e].iRate&&(t[S][e].iRate*=-2),t[S][e].iRate>1&&(t[S][e].iRate/=2),t.oStreamClient.setPlayRate(t[S][e].szStreamUUID,t[S][e].iRate).then((function(){t[S][e].iRate<2?t[S][e].oPlayCtrl.PlayM4_SetDecodeFrameType(i):(console.log("单线程倍速，只解析I帧",t[S][e].iRate),t[S][e].oPlayCtrl.PlayM4_SetDecodeFrameType(d),t[S][e].oPlayCtrl.PlayM4_SetIFrameDecInterval(0)),t[S][e].oPlayCtrl.PlayM4_PlayRate(t[S][e].iRate),n()}),(function(e){a(e)}))):a()}));return n}},{key:"JS_Fast",value:function(e,t){var n=this,a=new Promise((function(a,o){if(e<0||e>n[b]-1)o();else if(n[S][e].bPlay){if(t)switch(t){case 1:case 2:case 4:n[S][e].iRate=t;break;case 3:n[S][e].iRate=3;break;default:n[S][e].iRate=this.iRate;break}else{if(n[S][e].bFrameForward)return void o();if(8===n[S][e].iRate)return void o();-2===n[S][e].iRate?n[S][e].iRate=1:n[S][e].iRate<-2?n[S][e].iRate/=2:n[S][e].iRate>0&&n[S][e].iRate<8&&(n[S][e].iRate*=2)}n.oStreamClient.setPlayRate(n[S][e].szStreamUUID,n[S][e].iRate).then((function(){n[S][e].iRate<2?(console.log("单线程倍速，全解析",n[S][e].iRate),n[S][e].oPlayCtrl.PlayM4_SetDecodeFrameType(i)):(console.log("单线程倍速，只解析I帧",n[S][e].iRate),n[S][e].oPlayCtrl.PlayM4_SetDecodeFrameType(d),8===n[S][e].iRate?n[S][e].oPlayCtrl.PlayM4_SetIFrameDecInterval(2):n[S][e].oPlayCtrl.PlayM4_SetIFrameDecInterval(0)),n[S][e].oPlayCtrl.PlayM4_PlayRate(n[S][e].iRate),a()}),(function(e){o(e)}))}else o()}));return a}},{key:"JS_Speed",value:function(e){var t=this,n=0,a=new Promise((function(a,o){n>t[b]-1?o():t[S][n].bPlay?t[S][n].bFrameForward?o():8!==t[S][n].iRate?(t[S][n].iRate=e,t.oStreamClient.setPlayRate(t[S][n].szStreamUUID,t[S][n].iRate).then((function(){t[S][n].iRate<=2||3===t[S][n].iRate?(console.log("单线程倍速，全解",t[S][n].iRate),t[S][n].oPlayCtrl.PlayM4_SetDecodeFrameType(i)):(console.log("单线程倍速，只解析I帧",t[S][n].iRate),t[S][n].oPlayCtrl.PlayM4_SetDecodeFrameType(d)),t[S][n].oPlayCtrl.PlayM4_PlayRate(t[S][n].iRate),a()}),(function(e){o(e)}))):o():o()}));return a}},{key:"JS_Transmission",value:function(e,t){var i=this,n=new Promise((function(n,a){e<0||e>i[b]-1?a():i[S][e].szStreamUUID?i.oStreamClient.transmission(i[S][e].szStreamUUID,t).then((function(e){n(e)}),(function(e){a(e)})):a()}));return n}},{key:"JS_FrameForward",value:function(e){var t=this,n=new Promise((function(n,a){e<0||e>t[b]-1?a():t[S][e].bPlay?(1!==t[S][e].iRate?(t[S][e].iRate=1,t[v]=t[S][e].iRate,t.oStreamClient.setPlayRate(t[S][e].szStreamUUID,t[S][e].iRate).then((function(){t[S][e].oPlayCtrl.PlayM4_PlayRate(t[S][e].iRate),t[S][e].oPlayCtrl.PlayM4_SetDecodeFrameType(i),t[S][e].oPlayCtrl.PlayM4_OneByOne(),t[S][e].bFrameForward=!0}),(function(e){a(e)}))):(t[S][e].oPlayCtrl.PlayM4_PlayRate(t[S][e].iRate),t[S][e].oPlayCtrl.PlayM4_SetDecodeFrameType(i),t[S][e].oPlayCtrl.PlayM4_OneByOne(),t[S][e].bFrameForward=!0),n()):a()}));return n}},{key:"JS_GetOSDTime",value:function(t){var i=this,n=new Promise((function(n,o){if(t<0||t>i[b]-1)o(e);else if(i[S][t].bPlay){var r=i[S][t].oPlayCtrl.PlayM4_GetOSDTime((function(e){var t=a.oTool.isIOS()||a.oTool.isSafari()||a.oTool.isEdge()?"/":" ",i=Date.parse(e.replace(/-/g,t))/1e3;n(i)}));0===r||o(e)}else o(e)}));return n}},{key:"JS_OpenSound",value:function(i){var n=this;return i<0||i>n[b]-1?e:n[S][i].bPlay?n[y]===i?e:(-1!==n[y]&&n[S][n[y]].oPlayCtrl.PlayM4_StopSound(),1!==n[S][i].oPlayCtrl.PlayM4_PlaySound(i)?e:(n[y]=i,t)):e}},{key:"JS_GetVolume",value:function(e,t){var i=this,n=i[S][e].oPlayCtrl.PlayM4_GetVolume((function(e){t&&t(e)}));return n}},{key:"JS_SetVolume",value:function(i,n){var a=this;return 0!==a[S][i].oPlayCtrl.PlayM4_SetVolume(n)?e:t}},{key:"JS_CloseSound",value:function(){var i=this,n=i[y];return n<0||n>i[b]-1?e:i[S][n].bPlay?1!==i[S][n].oPlayCtrl.PlayM4_StopSound()?e:(i[y]=-1,t):e}},{key:"JS_EnableZoom",value:function(i){var n=this;return i<0||i>n[b]-1?e:n[S][i].bPlay?((0,c["default"])("."+n[g].szId+"draw-window").unbind(),this[C]=new l.ESCanvas(n[g].szId+"canvas_draw0"),this[C].setShapeType("Rect"),this[C].setDrawStyle("#ff0000","",0),this[C].setDrawStatus(!0,(function(e){e.startPos&&e.endPos&&(e.startPos[0]>e.endPos[0]?n[S][i].oPlayCtrl.PlayM4_SetDisplayRegion(null,!1):n[S][i].oPlayCtrl.PlayM4_SetDisplayRegion({left:e.startPos[0],top:e.startPos[1],right:e.endPos[0],bottom:e.endPos[1]},!0))})),n[S][i].bEZoom=!0,t):e}},{key:"JS_DisableZoom",value:function(i){var n=this;return i<0||i>n[b]-1?e:n[S][i].bPlay?(this[C].setDrawStatus(!1),0!==this[S][i].oPlayCtrl.PlayM4_SetDisplayRegion(null,!1)?e:(this[S][i].bEZoom=!1,t)):e}},{key:"JS_Enable3DZoom",value:function(i,n){var a=this;if(i<0||i>a[b]-1)return e;if(!a[S][i].bPlay)return e;var o=this._JSPlayM4_GetFrameInfo();return this._JSPlayM4_SetDisplayRegion(0,o.width,0,o.height),(0,c["default"])("."+a[g].szId+"draw-window").unbind(),this[D]=n,this[C]=new l.ESCanvas(a[g].szId+"canvas_draw0"),this[C].setShapeType("Rect"),this[C].setDrawStyle("#ff0000","",0),this[C].setDrawStatus(!0,(function(e){n(e)})),this.b3DZoom=!0,t}},{key:"JS_Disable3DZoom",value:function(i){var n=this;return i<0||i>n[b]-1?e:n[S][i].bPlay?(this[C].setDrawStatus(!1),this.b3DZoom=!1,t):e}},{key:"JS_CapturePicture",value:function(e,t,i,n,o){var r=this;return new Promise((function(s,l){if(e<0||e>r[b]-1)l({code:-1,msg:"窗口号错误"});else if(!r[S][e].bPlay&&r[S][e].bPause&&r[S][e].tmpCapturePictureData&&(console.log("不在播放状态，使用缓存的截图"),d(r[S][e].tmpCapturePictureData),s({code:1,data:d(r[S][e].tmpCapturePictureData)})),r[S][e].bPlay){if(i||(i="JPEG"),"BMP"===i)r[S][e].oPlayCtrl.PlayM4_GetBMP((function(e){6===e?l({code:-1,msg:"获取图片数据失败！"}):(n?n(e):a.oTool.downloadFile(e,t+".BMP"),s({code:1,data:{fileName:t+".BMP",fileUint8Array:e}}))}));else if("JPEG"===i)try{r[S][e].oPlayCtrl.PlayM4_GetJPEG((function(e){6===e?l({code:_,msg:"内存不足，抓图失败"}):s({code:1,data:d(e)})}))}catch(B){console.log("JS_CapturePicture error",B)}}else l({code:-1,msg:"获取图片数据失败！"});function d(e){var i=function(e){for(var t=new Uint8Array(e),i="",n=0;n<t.length;n++)i+=String.fromCharCode(t[n]);return"data:image/jpeg;base64,"+window.btoa(i)},r={fileName:t+".jpeg",fileUint8Array:e,base64:i(e)};return n?(n(r),o||a.oTool.downloadFile(e,t+".jpeg")):a.oTool.downloadFile(e,t+".jpeg"),r}}))}},{key:"JS_StopRealPlayAll",value:function(){var e=this;e.oStreamClient.stopAll(),e[S].forEach((function(t,i){t.bPlay&&(t.szStorageUUID&&e.JS_StopSave(i),t.bEZoom&&e.JS_DisableZoom(i),0===e[g].iMode?(t.oPlayCtrl.PlayM4_Stop(),t.oPlayCtrl.PlayM4_CloseStream()):2===e[g].iMode&&(0,c["default"])("."+e[g].szId+"play-window").hide()),t.bPlay=!1})),e.bPlay=!1,e[y]=-1}},{key:"JS_StartSave",value:function(e,t,i){var n=this,a=new Promise((function(a,o){var r=0;if(i&&(r=i.iPackage),e<0||e>n[b]-1)o();else if(n[S][e].bPlay){t.indexOf(".mp4")<0&&(t+=".mp4");var s=n[S][e].aHead,l=0;"playback"===n[S][e].szPlayType&&(l=1),n.oStorageManager.startRecord(t,s,2,l,{cbEventHandler:function(t){n.EventCallback.pluginErrorHandler(e,t)},iPackage:r}).then((function(t){n[S][e].szStorageUUID=t,a()}),(function(){o()}))}else o()}));return a}},{key:"JS_StopSave",value:function(e){var t=this,i=new Promise((function(i,n){t[S][e].szStorageUUID?t.oStorageManager.stopRecord(t[S][e].szStorageUUID).then((function(){t[S][e].szStorageUUID="",i()}),(function(e){n(e)})):n()}));return i}},{key:"JS_GetLocalConfig",value:function(){return""}},{key:"JS_SetLocalConfig",value:function(){return 0}},{key:"JS_SetGridInfo",value:function(e){if(null===e||"undefined"===typeof e)return-1;var t="#ff0000";return e.drawColor&&(t=e.drawColor),this[C].setDrawStyle(t),this[C].setShapesInfoByType("Grid",[{szGridMap:e.gridMap,iGridColNum:e.gridColNum,iGridRowNum:e.gridRowNum}]),0}},{key:"JS_GetGridInfo",value:function(){if(!this[C])return{};var e=this[C].getShapesInfoByType("Grid")[0];return e?{gridColNum:e.iGridColNum,gridRowNum:e.iGridRowNum,gridMap:e.szGridMap}:{iGridRowNum:18,iGridColNum:22,szGridMap:""}}},{key:"JS_SetDrawShapeInfo",value:function(e,t){if("undefined"===typeof e||""===e)return-1;this[C].setShapeType(e),this[C].setDrawStyle(t.szDrawColor||"",t.szFillColor||"",t.iTranslucent||0),t.iMaxShapeSupport&&t.iMaxShapeSupport>0&&this[C].setMaxShapeSupport(t.iMaxShapeSupport),t.iMaxShapeSupport>0&&this[C].setCurrentShapeInfo({szId:"",szTips:t.szTips||"",iMinClosed:3,iMaxPointNum:t.iMaxPointSupport,iPolygonType:1,szDrawColor:t.szDrawColor||"",szFillColor:t.szFillColor||"",iTranslucent:t.iTranslucent||0})}},{key:"JS_SetPolygonInfo",value:function(e){if("undefined"===typeof e||!e.length)return-1;var t=[];if(e.length>0)for(var i=0,n=e.length;i<n;i++){var a=e[i].aPoint;a.length>0&&t.push(e[i])}return t.length>0?(this[C].setShapesInfoByType("Polygon",t),0):-1}},{key:"JS_GetPolygonInfo",value:function(){for(var e=[],t=this[C].getShapesInfoByType("Polygon"),i=0,n=t.length;i<n;i++){var a=t[i],o={aPoint:a.aPoint,bClosed:a.bClosed,szTips:a.szTips};e.push(o)}return e}},{key:"JS_SetLineInfo",value:function(e){if("undefined"===typeof e||!e.length)return-1;var t=[];if(e.length>0)for(var i=0,n=e.length;i<n;i++){var a=e[i].aPoint;a.length>0&&t.push(e[i])}return t.length>0?(this[C].setShapesInfoByType("Line",t),0):-1}},{key:"JS_GetLineInfo",value:function(){for(var e=[],t=this[C].getShapesInfoByType("Line"),i=0,n=t.length;i<n;i++){var a=t[i],o={iLineType:a.iLineType,aPoint:a.aPoint,szTips:a.szTips};e.push(o)}return e}},{key:"JS_SetRectInfo",value:function(e){if("undefined"===typeof e||!e.length)return-1;var t=[];if(e.length>0)for(var i=0,n=e.length;i<n;i++){var a=e[i].aPoint;a.length>0&&t.push(e[i])}return t.length>0?(this[C].setShapesInfoByType("Rect",t),0):-1}},{key:"JS_GetRectInfo",value:function(){for(var e=[],t=this[C].getShapesInfoByType("Rect"),i=0,n=t.length;i<n;i++){var a=t[i],o={aPoint:a.aPoint,szTips:a.szTips};e.push(o)}return e}},{key:"JS_SetRegionInfo",value:function(e){var t=this;this[C].clearAllShape();var i=a.oTool.parseXmlFromStr(e);if(this[C].setDrawStyle("#ff0000","#343434",.3),(0,c["default"])(i).find("DetectionRegionInfo").length>0){this[C].setShapeType("Rect");var n=parseInt((0,c["default"])(i).find("MaxRegionNum").eq(0).text(),10);this[C].setMaxShapeSupport(n),this[C].m_szDisplayMode=(0,c["default"])(i).find("DisplayMode").eq(0).text(),this[C].m_szVideoFormat=(0,c["default"])(i).find("videoFormat").eq(0).text(),this[C].m_iHorizontalResolution=parseInt((0,c["default"])(i).find("HorizontalResolution").eq(0).text(),10),this[C].m_iVerticalResolution=parseInt((0,c["default"])(i).find("VerticalResolution").eq(0).text(),10);var o=[];(0,c["default"])(i).find("DetectionRegion").each((function(){for(var e=[],i=0,n=(0,c["default"])(this).find("positionX").length;i<n;i++){var a=Math.round((0,c["default"])(this).find("positionX").eq(i).text())*t[C].m_iCanvasWidth/t[C].m_iHorizontalResolution,r=(t[C].m_iVerticalResolution-Math.round((0,c["default"])(this).find("positionY").eq(i).text()))*t[C].m_iCanvasHeight/t[C].m_iVerticalResolution;e.push([a,r])}e.length>0&&(0!==e[0][0]||0!==e[1][0]||0!==e[2][0]||0!==e[3][0])&&o.push({aPoint:e,iEditType:"transparent"===t[C].m_szDisplayMode?1:0,szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.3})})),this[C].setShapesInfoByType("Rect",o)}else if((0,c["default"])(i).find("MoveDetection").length>0){this[C].setShapeType("Grid");var r=parseInt((0,c["default"])(i).find("columnGranularity").eq(0).text(),10),s=parseInt((0,c["default"])(i).find("rowGranularity").eq(0).text(),10),l=(0,c["default"])(i).find("gridMap").eq(0).text();this[C].setShapesInfoByType("Grid",[{szGridMap:l,iGridColNum:r,iGridRowNum:s}])}return 0}},{key:"JS_GetRegionInfo",value:function(){if(!this[C])return"";var e=this[C].getShapeType(),t='<?xml version="1.0" encoding="utf-8"?>';if("Rect"===e){t+="<DetectionRegionInfo>",t+="<videoFormat>"+this[C].m_szVideoFormat+"</videoFormat><RegionType>roi</RegionType>",t+="<ROI><HorizontalResolution>"+this[C].m_iHorizontalResolution+"</HorizontalResolution><VerticalResolution>"+this[C].m_iVerticalResolution+"</VerticalResolution></ROI>",t+="<DisplayMode>"+this[C].m_szDisplayMode+"</DisplayMode><MaxRegionNum>"+this[C].getMaxShapeSupport()+"</MaxRegionNum>",t+="<DetectionRegionList>";for(var i=this[C].getShapesInfoByType("Rect"),n=0,a=i.length;n<a;n++){var o=i[n].aPoint;t+="<DetectionRegion><RegionCoordinatesList>",t+="<RegionCoordinates><positionX>"+Math.round(o[3][0]*this[C].m_iHorizontalResolution/this[C].m_iCanvasWidth)+"</positionX><positionY>"+(this[C].m_iVerticalResolution-Math.round(o[3][1]*this[C].m_iVerticalResolution/this[C].m_iCanvasHeight))+"</positionY></RegionCoordinates>",t+="<RegionCoordinates><positionX>"+Math.round(o[2][0]*this[C].m_iHorizontalResolution/this[C].m_iCanvasWidth)+"</positionX><positionY>"+(this[C].m_iVerticalResolution-Math.round(o[2][1]*this[C].m_iVerticalResolution/this[C].m_iCanvasHeight))+"</positionY></RegionCoordinates>",t+="<RegionCoordinates><positionX>"+Math.round(o[1][0]*this[C].m_iHorizontalResolution/this[C].m_iCanvasWidth)+"</positionX><positionY>"+(this[C].m_iVerticalResolution-Math.round(o[1][1]*this[C].m_iVerticalResolution/this[C].m_iCanvasHeight))+"</positionY></RegionCoordinates>",t+="<RegionCoordinates><positionX>"+Math.round(o[0][0]*this[C].m_iHorizontalResolution/this[C].m_iCanvasWidth)+"</positionX><positionY>"+(this[C].m_iVerticalResolution-Math.round(o[0][1]*this[C].m_iVerticalResolution/this[C].m_iCanvasHeight))+"</positionY></RegionCoordinates>",t+="</RegionCoordinatesList></DetectionRegion>"}t+="</DetectionRegionList>",t+="</DetectionRegionInfo>"}else if("Grid"===e){var r=this[C].getShapesInfoByType("Grid")[0];r||(r={iGridRowNum:18,iGridColNum:22,szGridMap:""}),t+="<MoveDetection><videoFormat>PAL</videoFormat><RegionType>grid</RegionType>",t+="<Grid><rowGranularity>"+r.iGridRowNum+"</rowGranularity><columnGranularity>"+r.iGridColNum+"</columnGranularity></Grid>",t+="<DisplayMode>transparent</DisplayMode>",t+="<gridMap>"+r.szGridMap+"</gridMap></MoveDetection>"}return t}},{key:"JS_SetDrawStatus",value:function(e){return this[C]?(this[C].setDrawStatus(e),0):-1}},{key:"JS_ClearRegion",value:function(){return this[C]?(this[C].clearAllShape(),0):-1}},{key:"JS_GetTextOverlay",value:function(){if(!this[C])return"";var e='<?xml version="1.0" encoding="utf-8"?>';e+="<OSD>",e+="<videoResolutionWidth>"+this[C].m_iHorizontalResolution+"</videoResolutionWidth>",e+="<videoResolutionHeight>"+this[C].m_iVerticalResolution+"</videoResolutionHeight>";for(var t="",i="",n="",a=this[C].getShapesInfoByType("RectOSD"),o=0,r=a.length;o<r;o++){var s=a[o],l=Math.round(s.iPositionX*this[C].m_iHorizontalResolution/this[C].m_iCanvasWidth),d=Math.round(s.iPositionY*this[C].m_iVerticalResolution/this[C].m_iCanvasHeight);"overlay-date"===s.szOSDType?(t+="<DateTimeOverlay><Type>"+s.szDateStyle+"</Type>",t+="<clockType>"+s.szClockType+"</clockType>",t+="<displayWeek>"+s.szDisplayWeek+"</displayWeek>",t+="<enabled>"+s.szEnabled+"</enabled>",t+="<alignment>"+s.szAlignment+"</alignment>",t+="<positionX>"+l+"</positionX><positionY>"+d+"</positionY></DateTimeOverlay>"):"overlay-ch"===s.szOSDType?(i+="<channelNameOverlay><enabled>"+s.szEnabled+"</enabled>",i+="<ChannelName>"+s.szText+"</ChannelName>",i+="<alignment>"+s.szAlignment+"</alignment>",i+="<positionX>"+l+"</positionX><positionY>"+d+"</positionY></channelNameOverlay>"):"overlay-text"===s.szOSDType&&(n+="<TextOverlay><id>"+s.szId+"</id><enabled>"+s.szEnabled+"</enabled>",n+="<alignment>"+s.szAlignment+"</alignment>",n+="<displayText>"+s.szText+"</displayText>",n+="<positionX>"+l+"</positionX><positionY>"+d+"</positionY></TextOverlay>")}return e+=t,e+=i,e+="<TextOverlayList>",e+=n,e+="</TextOverlayList>",e+="</OSD>",e}},{key:"JS_SetTextOverlay",value:function(e){var t=this;this[C].setMaxShapeSupport(20);var i=a.oTool.parseXmlFromStr(e);if(this[C].clearShapeByType("RectOSD"),(0,c["default"])(i).find("OSD").length>0){if(this[C].setDrawStyle("#ff0000","#343434",.7),this[C].m_iHorizontalResolution=parseInt((0,c["default"])(i).find("videoResolutionWidth").eq(0).text(),10),this[C].m_iVerticalResolution=parseInt((0,c["default"])(i).find("videoResolutionHeight").eq(0).text(),10),(0,c["default"])(i).find("channelNameOverlay").length>0){var n=(0,c["default"])(i).find("channelNameOverlay").eq(0),o=(0,c["default"])(n).find("ChannelName").eq(0).text(),r=(0,c["default"])(n).find("enabled").eq(0).text(),s=Math.round((0,c["default"])(n).find("positionX").eq(0).text())*this[C].m_iCanvasWidth/this[C].m_iHorizontalResolution,l=Math.round((0,c["default"])(n).find("positionY").eq(0).text())*this[C].m_iCanvasHeight/this[C].m_iVerticalResolution,d=(0,c["default"])(n).find("alignment").eq(0).text()||"0";this[C].addOSDShape(o,r,s,l,{szOSDType:"overlay-ch",szAlignment:d})}if((0,c["default"])(i).find("DateTimeOverlay").length>0){var u=(0,c["default"])(i).find("DateTimeOverlay").eq(0),h=(0,c["default"])(u).find("enabled").eq(0).text(),x=(0,c["default"])(u).find("Type").eq(0).text()||(0,c["default"])(u).find("type").eq(0).text(),f=(0,c["default"])(u).find("displayWeek").eq(0).text(),p=(0,c["default"])(u).find("clockType").eq(0).text(),m="",_="",g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=new Date;switch("true"===f&&(_=g[v.getDay()]),p="24hour"===p?"":"AM/PM",x){case"0":m="YYYY-MM-DD "+_+" hh:mm:ss "+p;break;case"1":m="MM-DD-YYYY "+_+" hh:mm:ss "+p;break;case"2":m="CHR-YYYY-MM-DD "+_+" hh:mm:ss "+p;break;case"3":m="CHR-MM-DD-YYYY "+_+" hh:mm:ss "+p;break;case"4":m="DD-MM-YYYY "+_+" hh:mm:ss "+p;break;case"5":m="CHR-DD-MM-YYYY "+_+" hh:mm:ss "+p;break}var y=Math.round((0,c["default"])(u).find("positionX").eq(0).text())*this[C].m_iCanvasWidth/this[C].m_iHorizontalResolution,b=Math.round((0,c["default"])(u).find("positionY").eq(0).text())*this[C].m_iCanvasHeight/this[C].m_iVerticalResolution,S=(0,c["default"])(u).find("alignment").eq(0).text()||"0";this[C].addOSDShape(m,h,y,b,{szOSDType:"overlay-date",szDateStyle:x,szDisplayWeek:f,szClockType:p,szAlignment:S})}(0,c["default"])(i).find("TextOverlayList").length>0&&(0,c["default"])(i).find("TextOverlayList").eq(0).find("TextOverlay").each((function(){var e=(0,c["default"])(this).find("displayText").eq(0).text(),i=(0,c["default"])(this).find("enabled").eq(0).text(),n=(0,c["default"])(this).find("id").eq(0).text(),a=Math.round((0,c["default"])(this).find("positionX").eq(0).text())*t[C].m_iCanvasWidth/t[C].m_iHorizontalResolution,o=Math.round((0,c["default"])(this).find("positionY").eq(0).text())*t[C].m_iCanvasHeight/t[C].m_iVerticalResolution,r=(0,c["default"])(this).find("alignment").eq(0).text()||"0";t[C].addOSDShape(e,i,a,o,{szOSDType:"overlay-text",szId:n,szAlignment:r})}))}return 0}},{key:"JS_ClearSnapInfo",value:function(e){return this[C]?(0===e?this[C].clearShapeByType("Rect"):1===e?this[C].clearShapeByType("Polygon"):2===e?this[C].clearShapeByType("Line"):3===e?(this[C].clearShapeByType("Rect"),this[C].clearShapeByType("Polygon")):5===e?this[C].clearShapeByType("Point"):this[C].clearAllShape(),0):-1}},{key:"JS_ClearTargetPolygon",value:function(e){var t=a.oTool.parseXmlFromStr(e),i=this[C].getAllShapesInfo(),n=i.length;if(n>0)for(var o=0;o<n;o++){var r=(0,c["default"])(t).find("id").eq(0).text();if("Polygon"===i[o].szType&&i[o].szId===r){this[C].deleteShape(o);break}}}},{key:"JS_SetSnapPolygonInfo",value:function(e){var t=this;this[C].setShapeType("Polygon"),this[C].setMaxShapeSupport(20),this[C].setDrawStyle("#FFFF00","#FFFF00",.1);var i=a.oTool.parseXmlFromStr(e),n=this[C].getAllShapesInfo(),o=n.length;if(o>0)for(var r=0;r<o;r++){var s=(0,c["default"])(i).find("id").eq(0).text();if("Polygon"===n[r].szType&&n[r].szId===s){this[C].deleteShape(r);break}}var l=[];return(0,c["default"])(i).find("SnapPolygonList").length>0&&(0,c["default"])(i).find("SnapPolygonList").eq(0).find("SnapPolygon").each((function(){var e=(0,c["default"])(this).find("id").eq(0).text(),i=parseInt((0,c["default"])(this).find("polygonType").eq(0).text()||"1",10),n=(0,c["default"])(this).find("Tips").eq(0).text()||(0,c["default"])(this).find("tips").eq(0).text(),a=parseInt((0,c["default"])(this).find("MinClosed").eq(0).text(),10),o=parseInt((0,c["default"])(this).find("PointNumMax").eq(0).text(),10),r=parseInt((0,c["default"])(this).find("EditType").eq(0).text(),10)||parseInt((0,c["default"])(this).find("editType").eq(0).text(),10)||0,s="true"===(0,c["default"])(this).find("isClosed").eq(0).text(),d="rgb("+(0,c["default"])(this).find("r").eq(0).text()+","+(0,c["default"])(this).find("g").eq(0).text()+","+(0,c["default"])(this).find("b").eq(0).text()+")",u=d,h=.1,x=parseInt((0,c["default"])(this).find("RedrawMode").eq(0).text(),10)||0,f=[];(0,c["default"])(this).find("pointList").eq(0).find("point").each((function(e){f[e]=[],f[e][0]=Math.round((0,c["default"])(this).find("x").eq(0).text()*t[C].m_iCanvasWidth),f[e][1]=Math.round((0,c["default"])(this).find("y").eq(0).text()*t[C].m_iCanvasHeight)})),f.length>0?(l.push({szId:e,iPolygonType:i,iMinClosed:a,iMaxPointNum:o,iEditType:r,aPoint:f,bClosed:s,szTips:n,szDrawColor:d,szFillColor:u,iTranslucent:h,iRedrawMode:x}),t[C].setDrawStatus(!1)):(t[C].setCurrentShapeInfo({szId:e,szTips:n,iMinClosed:a,iMaxPointNum:o,iPolygonType:i,szDrawColor:d,szFillColor:u,iTranslucent:h,iRedrawMode:x}),t[C].setDrawStatus(!0))})),l.length>0&&this[C].setShapesInfoByType("Polygon",l),0}},{key:"JS_GetSnapPolygonInfo",value:function(){for(var e="<?xml version='1.0' encoding='utf-8'?><SnapPolygonList>",t=this[C].getShapesInfoByType("Polygon"),i=0,n=t.length;i<n;i++){var a=t[i];e+="<SnapPolygon>",e+="<id>"+a.szId+"</id>",e+="<polygonType>"+a.iPolygonType+"</polygonType>",e+="<color>";var o=a.szDrawColor.substring(4,a.szDrawColor.length-1).split(",");e+="<r>"+o[0]+"</r>",e+="<g>"+o[1]+"</g>",e+="<b>"+o[2]+"</b>",e+="</color>",e+="<tips>"+a.szTips+"</tips>",e+="<isClosed>"+a.bClosed+"</isClosed>";var r=a.aPoint;e+="<pointList>";for(var s=0,l=r.length;s<l;s++)e+="<point><x>"+(r[s][0]/this[C].m_iCanvasWidth).toFixed(6)+"</x><y>"+(r[s][1]/this[C].m_iCanvasHeight).toFixed(6)+"</y></point>";e+="</pointList>",e+="</SnapPolygon>"}return e+="</SnapPolygonList>",e}},{key:"JS_SetSnapDrawMode",value:function(e,t){var i=this;return this[C]?(this[C].setDrawMutiShapeOneTime(!1),0===e&&3===t&&i[C].setDrawStatus(!1),0):-1}},{key:"JS_SetSnapLineInfo",value:function(e){var t=this;this[C].setShapeType("Line"),this[C].setMaxShapeSupport(20),this[C].setDrawStyle("#FFFF00","#FFFF00",.1);var i=a.oTool.parseXmlFromStr(e),n=this[C].getAllShapesInfo(),o=n.length;if(o>0)for(var r=0;r<o;r++){var s=(0,c["default"])(i).find("id").eq(0).text();if("Line"===n[r].szType&&n[r].szId===s){this[C].deleteShape(r);break}}var l=[];return(0,c["default"])(i).find("SnapLineList").length>0&&(0,c["default"])(i).find("SnapLineList").eq(0).find("SnapLine").each((function(){var e=(0,c["default"])(this).find("id").eq(0).text(),i=parseInt((0,c["default"])(this).find("LineTypeEx").eq(0).text(),10),n=parseInt((0,c["default"])(this).find("CustomType").text()||(0,c["default"])(this).find("LineType").text(),10),a=parseInt((0,c["default"])(this).find("ArrowType").text()||0,10),o=(0,c["default"])(this).find("Tips").eq(0).text()||(0,c["default"])(this).find("tips").eq(0).text(),r="rgb("+(0,c["default"])(this).find("r").eq(0).text()+","+(0,c["default"])(this).find("g").eq(0).text()+","+(0,c["default"])(this).find("b").eq(0).text()+")",s=[];s[0]=[],s[1]=[],s[0][0]=Math.round((0,c["default"])(this).find("StartPos").eq(0).find("x").eq(0).text()*t[C].m_iCanvasWidth),s[0][1]=Math.round((0,c["default"])(this).find("StartPos").eq(0).find("y").eq(0).text()*t[C].m_iCanvasHeight),s[1][0]=Math.round((0,c["default"])(this).find("EndPos").eq(0).find("x").eq(0).text()*t[C].m_iCanvasWidth),s[1][1]=Math.round((0,c["default"])(this).find("EndPos").eq(0).find("y").eq(0).text()*t[C].m_iCanvasHeight),s.length>0&&(l.push({szId:e,iLineType:i,aPoint:s,szTips:o,iDirection:n,iArrowType:a,szDrawColor:r}),t[C].setDrawStatus(!1))})),l.length>0&&this[C].setShapesInfoByType("Line",l),0}},{key:"JS_GetSnapLineInfo",value:function(){for(var e=this,t="<?xml version='1.0' encoding='utf-8'?><SnapLineList>",i=this[C].getShapesInfoByType("Line"),n=0,a=i.length;n<a;n++){t+="<SnapLine>",t+="<id>"+i[n].szId+"</id>",t+="<LineTypeEx>"+i[n].iLineType+"</LineTypeEx>",t+="<CustomType>0</CustomType><MoveChange>0</MoveChange><ArrowType>"+i[n].iArrowType+"</ArrowType>",t+="<tips>"+i[n].szTips+"</tips>";var o=i[n].aPoint;t+="<StartPos><x>"+(o[0][0]/e[C].m_iCanvasWidth).toFixed(6)+"</x><y>"+(o[0][1]/e[C].m_iCanvasHeight).toFixed(6)+"</y></StartPos>",t+="<EndPos><x>"+(o[1][0]/e[C].m_iCanvasWidth).toFixed(6)+"</x><y>"+(o[1][1]/e[C].m_iCanvasHeight).toFixed(6)+"</y></EndPos>",t+="<LineSelected>false</LineSelected>",i[n].aCrossArrowPoint.length>0&&(t+="<PDCArrow><Sp_x>"+(i[n].aCrossArrowPoint[0][0]/e[C].m_iCanvasWidth).toFixed(6)+"</Sp_x>",t+="<Sp_y>"+(i[n].aCrossArrowPoint[0][1]/e[C].m_iCanvasWidth).toFixed(6)+"</Sp_y>",t+="<Ep_x>"+(i[n].aCrossArrowPoint[1][0]/e[C].m_iCanvasWidth).toFixed(6)+"</Ep_x>",t+="<Ep_y>"+(i[n].aCrossArrowPoint[1][1]/e[C].m_iCanvasWidth).toFixed(6)+"</Ep_y></PDCArrow>"),t+="<PDCShowMark>false</PDCShowMark>";var r=i[n].szDrawColor.split(",")[0].split("(")[1],s=i[n].szDrawColor.split(",")[1],l=i[n].szDrawColor.split(",")[2].split(")")[0];t+="<color><r>"+(r||"255")+"</r><g>"+(s||"255")+"</g><b>"+(l||"0")+"</b></color>",t+="</SnapLine>"}return t+="</SnapLineList>",t}},{key:"JS_GetSnapPointInfo",value:function(){return""}},{key:"JS_SelectShapeById",value:function(e,t){return e?(this[C].selectShapeById(e,t),0):-1}},{key:"JS_DeleteChoosedShape",value:function(){var e=this[C].getAllShapesInfo(),t=e.length;if(t>0){for(var i=0;i<t;i++)if(e[i].bChoosed)return this[C].deleteShape(i),e[i].szId;return""}return""}},{key:"JS_SetSnapPointInfo",value:function(e){var t=this,i=a.oTool.parseXmlFromStr(e);if("1"===(0,c["default"])(i).find("mode").eq(0).text()){var n=(0,c["default"])(i).find("id").eq(0).text(),o="rgb("+(0,c["default"])(i).find("r").eq(0).text()+","+(0,c["default"])(i).find("g").eq(0).text()+","+(0,c["default"])(i).find("b").eq(0).text()+")";this[C].setShapeType("Point"),this[C].setDrawStatus(!0),this[C].setMaxShapeSupport(12),t[C].setCurrentShapeInfo({szId:n,szDrawColor:o,iTranslucent:1})}else{var r=[];this[C].clearShapeByType("Point"),this[C].setMaxShapeSupport(12),this[C].setDrawStatus(!1),(0,c["default"])(i).find("SnapPointList").length>0&&(0,c["default"])(i).find("SnapPointList").eq(0).find("SnapPoint").each((function(){var e=(0,c["default"])(this).find("id").eq(0).text(),i="rgb("+(0,c["default"])(this).find("r").eq(0).text()+","+(0,c["default"])(this).find("g").eq(0).text()+","+(0,c["default"])(this).find("b").eq(0).text()+")",n=[];n[0]=[],n[0][0]=Math.round((0,c["default"])(this).find("positionX").eq(0).text()*t[C].m_iCanvasWidth),n[0][1]=Math.round((0,c["default"])(this).find("positionY").eq(0).text()*t[C].m_iCanvasHeight),n.length>0&&r.push({szId:e,aPoint:n,szDrawColor:i,iTranslucent:1})})),r.length>0&&this[C].setShapesInfoByType("Point",r)}return 0}},{key:"JS_FullScreenDisplay",value:function(e){var t=this;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var i=document.documentElement.clientWidth,n=document.documentElement.clientHeight,a=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);a&&(i*=2,n*=2,t.oJSPlugin.find("."+t[g].szId+"parent-wnd").eq(0).css({width:i,height:n,"z-index":1e4}));var o=document.body;o=(0,c["default"])("#"+t[g].szId).find("canvas#"+t[g].szId+"canvas0")[0];var r="";i>=n?(r+="width:"+i+"px;",r+="height:"+n+"px;",r+="-webkit-transform: none",r+="-webkit-transform-origin: 0 0;",r+="transform-origin: 0 0;"):(r+="width:"+n+"px;",r+="height:"+i+"px;",r+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",r+="-webkit-transform-origin: "+i/2+"px "+i/2+"px;",r+="transform-origin: "+i/2+"px "+i/2+"px;"),r+="position: fixed;top: 0;left: 0;z-index:10",o.style.cssText=r,this[T]=e}else{if(e){var s=t.oJSPlugin.get(0);s.requestFullScreen?s.requestFullScreen():s.webkitRequestFullScreen?s.webkitRequestFullScreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen?s.msRequestFullscreen():s.oRequestFullscreen&&s.oRequestFullscreen()}this[T]=e}}},{key:"JS_CancelFullScreenDisplay",value:function(){var e=this;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var t=(0,c["default"])("."+e[g].szId+"parent-wnd").parent().eq(0).width(),i=(0,c["default"])("."+e[g].szId+"parent-wnd").parent().eq(0).height(),n=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);n&&(t*=2,i*=2,e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).css({width:t,height:i,"z-index":0}));var a=document.body;a=(0,c["default"])("#"+e[g].szId).find("canvas#"+e[g].szId+"canvas0")[0];var o="";t>=i?(o+="width:"+t+"px;",o+="height:"+i+"px;",o+="-webkit-transform: none",o+="-webkit-transform-origin: 0 0;",o+="transform-origin: 0 0;"):(o+="width:"+i+"px;",o+="height:"+t+"px;",o+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",o+="-webkit-transform-origin: "+t/2+"px "+t/2+"px;",o+="transform-origin: "+t/2+"px "+t/2+"px;"),a.style.cssText=o}else{if(e.oJSPlugin.find("."+e[g].szId+"parent-wnd").eq(0).width()===(0,c["default"])(window).width())return;document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()}this[P]=null,this[T]=!1}},{key:"JS_FullScreenSingle",value:function(e){var t=this;if(t[S][e].bPlay){var i=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1,n=t.oJSPlugin.find("."+t[g].szId+"parent-wnd").eq(0).children().eq(e).get(0);if(i){if(t.oJSPlugin.find("."+t[g].szId+"parent-wnd").eq(0).width()===(0,c["default"])(window).width())return;document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen(),t[P]=null,t[T]=!1}else n.requestFullScreen?n.requestFullScreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.mozRequestFullScreen&&n.mozRequestFullScreen(),t[P]=t.oJSPlugin.find("."+t[g].szId+"parent-wnd").eq(0).children().eq(e)}}},{key:"JS_StartDownload",value:function(e,t,i,n){var o=(0,c["default"])(a.oTool.parseXmlFromStr(n)).find("playbackURI").eq(0).text(),r=e+"?playbackURI="+o,s=".mp4";e.indexOf("picture/Streaming/tracks")>0&&(r=e,s=".jpg");var l=r.indexOf("&name=")+6,d=r.indexOf("&size=");return i=r.substring(l,d),(0,c["default"])("body").append('<a id="jsplugin_download_a" href="'+r+'" download='+i+s+'><li id="jsplugin_download_li"></li></a>'),(0,c["default"])("#jsplugin_download_li").trigger("click"),(0,c["default"])("#jsplugin_download_a").remove(),0}},{key:"JS_Resize",value:function(e,t,i){var n=this,o=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);o&&(e*=2,t*=2);var r=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1;this[T]&&r?(e=(0,c["default"])(window).width(),t=(0,c["default"])(window).height(),n.oJSPlugin.css({width:e,height:t})):n.oJSPlugin.css({width:o?e/2:e,height:o?t/2:t});var s=document.body;s=(0,c["default"])("#"+n[g].szId).find("canvas#"+n[g].szId+"canvas0")[0];var d="";if(d+="width:"+e+"px;",d+="height:"+t+"px;",d+="-webkit-transform: none;",d+="-webkit-transform-origin: 0 0;",d+="transform-origin: 0 0;",d+="z-index: 0;",s.style.cssText=d,o){var u=document.body;u=(0,c["default"])("#"+n[g].szId).find("canvas#"+n[g].szId+"canvas_draw0")[0];var h="";h+="width:"+e+"px;",h+="height:"+t+"px;",h+="position:absolute; top:0; left:0; z-index:999;",u.style.cssText=h,this.b3DZoom&&((0,c["default"])("."+n[g].szId+"draw-window").unbind(),n[C]=new l.ESCanvas(n[g].szId+"canvas_draw0",i||!1),n[C].setShapeType("Rect"),n[C].setDrawStyle("#ff0000","",0),n[C].setDrawStatus(!0,(function(e){n[D](e)})))}if(this[g].iWidth=e,this[g].iHeight=t,this.iWidth=e,this.iHeight=t,a.oTool.isFirefox())for(var x=0;x<n[g].iMaxSplit*n[g].iMaxSplit;x++)n[S][x].oPlayCtrl&&n[S][x].oPlayCtrl.PlayM4_ClearCanvas();n.updateWnd(),n[P]&&r&&(e=(0,c["default"])(window).width(),t=(0,c["default"])(window).height(),n[P].css({width:e,height:t}),n[P].find("."+n[g].szId+"play-window").attr("width",e),n[P].find("."+n[g].szId+"play-window").attr("height",t),n[P].find("."+n[g].szId+"draw-window").attr("width",e-2),n[P].find("."+n[g].szId+"draw-window").attr("height",t-2)),r||(n[P]=null,n[T]=!1),n[C]&&(n[C].resizeCanvas&&n[C].resizeCanvas(),n[C].canvasRedraw&&n[C].canvasRedraw())}},{key:"JS_WndCreate",value:function(e,t,i){var n=this;n.createWindows(t,i),this[C].updateCanvas(n[g].szId+"canvas_draw0"),this[C].clearAllShape(),0===e?n.oJSPlugin.hide():n.oJSPlugin.show(),n.EventCallback.windowEventSelect(0),n.initEvent(),n[E]=null}},{key:"JS_ExportDeviceConfig",value:function(e){return(0,c["default"])("body").append('<a id="jsplugin_download_a" href="'+e+'"><li id="jsplugin_download_li"></li></a>'),(0,c["default"])("#jsplugin_download_li").trigger("click"),(0,c["default"])("#jsplugin_download_a").remove(),0}},{key:"JS_OpenFileBrowser",value:function(e,t,i,n,a){var o=this;o[E]=null;var r=window.document.createElement("input");r.type="file","bmp"===t.toLowerCase()&&(r.accept="image/bmp",r.style.display="none",(0,c["default"])("body").append(r)),0===e&&r.setAttribute("webkitdirectory",""),r.addEventListener("change",(function(){1===e?(o[E]=r.files[0],i[n]=r.files[0].name,a&&a.$digest((function(){i[n]=r.files[0].name}))):0===e&&(o[E]=r.files)}));var s=document.createEvent("MouseEvents");s.that.initEvent("click",!0,!0),r.dispatchEvent(s)}},{key:"JS_UploadFile",value:function(e,t,i,n){var a=this,o=0,r=new XMLHttpRequest;return r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&(o=-1)},r.open("put",e,!1),r.setRequestHeader("Content-Type",n),r.send(a[E]),o}},{key:"JS_StartAsynUpload",value:function(e){var t=this,i=new XMLHttpRequest;return i.onreadystatechange=function(){4===i.readyState&&(t[k]=i.responseText)},i.open("put",e,!0),i.send(t[E]),0}},{key:"JS_StopAsynUpload",value:function(){var e=this;e[k]=""}},{key:"JS_GetUploadErrorInfo",value:function(){var e=this;return"string"===typeof e[k]&&e[k].length>0?e[k]:""}},{key:"JS_StartUpgradeEx",value:function(t,i){var n=this,o=new Promise((function(o,r){if(!t)return r(),e;if(!i)return r(),e;n[k]=0;var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)n[k]=100,o();else{n[k]=1;var e=a.oTool.parseXmlFromStr(s.responseText);"lowPrivilege"===(0,c["default"])(e).find("subStatusCode").text()?r(403):r()}},s.open("put",t,!0),s.send(n[E]),n[R]=i,setTimeout((function(){o()}),3e3)}));return o}},{key:"JS_UpgradeStatus",value:function(){var e=this;return 100===e[k]?0:e[k]}},{key:"JS_UpgradeProgress",value:function(){var e=this,t=0,i=new XMLHttpRequest;return i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(t=parseInt((0,c["default"])(a.oTool.parseXmlFromStr(i.responseText)).find("percent").text(),10))},i.open("get",e[R],!1),i.send(null),100===e[k]?100:t}},{key:"JS_StopUpgrade",value:function(){var e=this;return e[E]=null,0}},{key:"JS_ExportDeviceLog",value:function(e,t){t="Log.txt";var i=[],n=[];i=i.concat((0,c["default"])(e).find("searchMatchItem").toArray());for(var a=0;a<i.length;a++)n[a]=[],n[a][0]=(0,c["default"])(i[a]).find("logtime").text().replace("T"," ").replace("Z",""),n[a][1]=(0,c["default"])(i[a]).find("majortype").text(),n[a][2]=(0,c["default"])(i[a]).find("minortype").text(),n[a][3]=(0,c["default"])(i[a]).find("channelid").text(),n[a][4]=(0,c["default"])(i[a]).find("userName").text(),n[a][5]=(0,c["default"])(i[a]).find("remoteaddress").text();var o=[];function r(e){o.push(e);var t=e.slice("");if(/^[\u4e00-\u9fa5]/.test(e))for(var i=0;i<30-2*t.length;i++)o.push(" ");else for(var n=0;n<30-t.length;n++)o.push(" ")}r(" "),r((0,c["default"])(e).find("laLogTime").text()),r((0,c["default"])(e).find("laLogMajorType").text()),r((0,c["default"])(e).find("laLogMinorType").text()),r((0,c["default"])(e).find("laLogChannel").text()),r((0,c["default"])(e).find("laLogRemoteUser").text()),r((0,c["default"])(e).find("laLogRemoteIP").text()),o.push("\r\n");for(var s=0;s<n.length;s++){var l=(s+1).toString();r(l);for(var d=0;d<6;d++)r(n[s][d]);o.push("\r\n")}o=o.join("");var u=new Blob([o],{type:"text/plain"}),h=(window.URL||window.webkitURL).createObjectURL(u),x=window.document.createElement("a");x.href=h,x.download=t;var f=document.createEvent("MouseEvents");f.that.initEvent("click",!0,!0),x.dispatchEvent(f)}},{key:"outCsv",value:function(e,t,i,n){for(var a="",o="",r=0;r<i.length;r++)o+=(0,c["default"])(e).find(i[r]).eq(0).text()+",";o=o.slice(0,-1),a+=o+"\r\n";for(var s=0;s<n.length;s++){o="";for(var l=0;l<i.length;l++)o+='"'+n[s][l]+'",';o.slice(0,o.length-1),a+=o+"\r\n"}if(""!==a){var d="";d+=t;var u="\ufeff";if(window.navigator.msSaveOrOpenBlob){var h=u+a,x=new Blob([decodeURIComponent(encodeURI(h))],{type:"data:text/csv;charset=utf-8,"});navigator.msSaveBlob(x,d+".csv")}else{u="data:text/csv;charset=utf-8,\ufeff";var f=u+a,p=encodeURI(f),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",d+".csv"),document.body.appendChild(m),m.click()}}}},{key:"JS_ExportReport",value:function(e,t,i){var n=this,a=new Promise((function(a){var o=[],r=[],s=(0,c["default"])(e).find("NameList").text().split(",");o=o.concat((0,c["default"])(e).find("tDataItem").toArray());for(var l=0;l<o.length;l++){r[l]=[];for(var d=0;d<s.length;d++)r[l][d]=(0,c["default"])(o[l]).find(s[d]).text(),"logtime"===s[d]&&(r[l][d]=r[l][d].replace("T"," ").replace("Z",""))}var u=[];if(1===i)n.outCsv(e,t,s,r);else{var h=function(e){u.push(e);var t=e.slice("");if(/^[\u4e00-\u9fa5]/.test(e))for(var i=0;i<30-2*t.length;i++)u.push(" ");else for(var n=0;n<30-t.length;n++)u.push(" ")};h(" ");for(var x=0;x<s.length;x++)h((0,c["default"])(e).find(s[x]).eq(0).text());u.push("\r\n");for(var f=0;f<r.length;f++){var p=(f+1).toString();h(p);for(var m=0;m<s.length;m++)h(r[f][m]);u.push("\r\n")}u=u.join("");var _=void 0;_=new Blob([u],{type:"text/plain"});var g=(window.URL||window.webkitURL).createObjectURL(_),v=window.document.createElement("a");v.href=g,v.download=t;var y=document.createEvent("MouseEvents");y.that.initEvent("click",!0,!0),v.dispatchEvent(y)}a()}));return a}},{key:"JS_GetWndContainer",value:function(e){var t=this;return e<0||"undefined"===typeof e||null===e?-1:t.oJSPlugin.find("."+t[g].szId+"parent-wnd").eq(0).children().eq(e)[0]}},{key:"JS_GetWndStatus",value:function(e){if(e<0||"undefined"===typeof e||null===e)return-1;var t={bPlay:this[S][e].bPlay,bSound:this[y]===e,bSelect:this[S][e].bSelect,iRate:this[S][e].iRate};return t}},{key:"JS_SelectWnd",value:function(e){var t=this;t.oJSPlugin.find("."+t[g].szId+"parent-wnd").eq(0).children().eq(e).mousedown()}},{key:"JS_PlayWithImg",value:function(e){var t=this;if(1===this[g].iType){var i=(0,c["default"])("#"+t[g].szId+"canvas0"),n=(0,c["default"])("#"+t[g].szId+"canvas0").width(),a=(0,c["default"])("#"+t[g].szId+"canvas0").height();i.hide();var o=(0,c["default"])("#playImg0");o.show(),o.css({width:n+"px",height:a+"px"}),o.attr("src",e)}}},{key:"JS_SetCanFullScreen",value:function(e){this[A]=e}},{key:"JS_OpenPlayerSDKPrintLog",value:function(e){var t=this;t[S][e].oPlayCtrl.PlayM4_OpenPlayerSDKPrintLog(!0)}},{key:"JS_DownloadYUVdata",value:function(e){var t=this;t[S][e].oPlayCtrl.PlayM4_DownloadYUVdata()}},{key:"JS_DownloadPCMdata",value:function(e){var t=this;t[S][e].oPlayCtrl.PlayM4_DownloadPCMdata()}},{key:"_JSPlayM4_GetFrameInfo",value:function(){var e=this,t=e[S][0].oPlayCtrl;return{width:t.nWidth,height:t.nHeight}}},{key:"_JSPlayM4_SetDisplayRegion",value:function(e,t,i,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments[5],r=this,s=r[S][0].oPlayCtrl;console.log("canvasInfo:",r.iWidth,r.iHeight),console.log("canvasW:"+s.nWidth+",canvasH:"+s.nHeight+",left:"+e+",right:"+t+",top:"+i+",bottom:"+n),o?r[S][0].oPlayCtrl.PlayM4_SetDisplayRegion({left:e*r.iWidth/s.nHeight,top:i*r.iHeight/s.nWidth,right:t*r.iWidth/s.nHeight,bottom:n*r.iHeight/s.nWidth},a):r[S][0].oPlayCtrl.PlayM4_SetDisplayRegion({left:e*r.iWidth/s.nWidth,top:i*r.iHeight/s.nHeight,right:t*r.iWidth/s.nWidth,bottom:n*r.iHeight/s.nHeight},a)}},{key:"_JSPlayM4_SetDisplayFrameData",value:function(e,t,i,n,a){var o=this;o[S][0].oPlayCtrl.oSuperRender.SR_DisplayFrameData(e,t,i,n,a)}},{key:"_JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e){var t=this;t.EventCallback&&"function"===typeof t.EventCallback.setRunTimeInfoCallback&&1===e&&(console.log("PlayM4_SetRunTimeInfoCallBackEx 设置实时信息回调","解析模块",e),t[S][0].oPlayCtrl.PlayM4_SetRunTimeInfoCallBackEx(e,t.EventCallback.setRunTimeInfoCallback))}}]),L}();return B}();window.JSPluginV1=x,t.JSPluginV1=x},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StreamClient=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(2),o=i(6),r=i(7),s=i(8),l=i(11);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){var e=Symbol("WEBSOCKET"),t=Symbol("GETINDEX"),i=Symbol("PROTOCOLVERSION"),c=Symbol("CIPHERSUITES"),u=new o.DirectDeviceCustom,h=new r.DirectDevice,x=new s.LiveMedia,f=new l.LocalService,p=function(){function o(){d(this,o),this[i]="0.1",this[c]=0,this[e]=[],this.ERRORS={},this[t]=function(t){for(var i=-1,n=0,a=this[e].length;n<a;n++)if(this[e][n].id===t){i=n;break}return i}}return n(o,[{key:"openStream",value:function(n,o,r,s){var l=!1;n.indexOf("[")>-1&&(l=!0);var d=this,p=n.split("://"),m=p[0],_="",g=7681,v=1,y=0,b=!1;if(l)_=p[1].split("]:")[0]+"]",g=Math.floor(p[1].split("]:")[1].split("/")[0]),v=Math.floor(p[1].split("]:")[1].split("/")[1]/100),y=Math.floor(p[1].split("]:")[1].split("/")[1]%100)-1;else{_=p[1].split(":")[0],g=Math.floor(p[1].split(":")[1].split("/")[0]),v=Math.floor(p[1].split(":")[1].split("/")[1]/100),y=Math.floor(p[1].split(":")[1].split("/")[1]%100)-1;var S=p[1].split(":")[1].split("/")[2];""!==S&&"webSocketVideoCtrlProxy"===S&&(b=!0)}0===v&&(y=0),o=o||{};var C="&sessionID=";o.token&&!o.playURL&&(C="&token=");var w=o.sessionID||o.session||(o.playURL?"":o.token)||"",T=new window.WebSocket(m+"://"+_+":"+g+(o.mode?"/"+o.mode:"")+(b?"/webSocketVideoCtrlProxy":"")+"?version="+d[i]+"&cipherSuites="+d[c]+C+w+(o.proxy?"&proxy="+o.proxy:""));T.binaryType="arraybuffer";var P=(0,a.v4)(),E=-1,k=new Promise((function(n,a){T.onopen=function(){o.playURL||o.sessionID||o.deviceSerial||o.token||(d[e].push(u.createClientObject(T,P,v,y)),n(P))},T.onmessage=function(s){if("string"===typeof s.data){var l=JSON.parse(s.data),u=d[t](P);if(l&&l.version&&l.cipherSuite){if(d[i]=l.version,d[c]=parseInt(l.cipherSuite,10),l&&l.PKD&&l.rand)d[e].push(x.createClientObject(T,P,l.PKD,l.rand,o));else{var p="live://"+_+":"+g+"/"+v+"/"+y;-1===d[c]?d[e].push(f.createClientObject(T,P,p,o)):d[e].push(h.createClientObject(T,P,p))}return void n(P)}if(l&&l.sdp){var m=h.getMediaFromSdp(l.sdp);r({bHead:!0,buf:m})}if(l&&l.cmd&&"end"===l.cmd&&r({type:"exception",cmd:l.cmd}),l&&l.statusString&&("ok"===l.statusString.toLowerCase()&&d[e][u].resolve&&d[e][u].resolve(l),"ok"!==l.statusString.toLowerCase())){var b=h.getError(l);u>-1?d[e][u].reject&&d[e][u].reject(b):a(b)}l&&l.errorCode&&r(l)}else{var S={},C=new Uint8Array(s.data);if(E++,64===C.byteLength||40===C.byteLength){for(var w=-1,k=C.byteLength,R=0;R<k;R++)if(73===C[R]&&77===C[R+1]&&75===C[R+2]&&72===C[R+3]){w=R;break}if(-1!==w){var I=C.slice(w,w+40);S={bHead:!0,buf:I}}else S={bHead:!1,buf:C};r(S)}else E>0&&(S={bHead:!1,buf:C},r(S));C=null,S=null,s=null}},T.onclose=function(){for(var t=0,i=d[e].length;t<i;t++)if(d[e][t].id===P){d[e][t].resolve(),d[e].splice(t,1),setTimeout((function(){s()}),200);break}a()}}));return k}},{key:"startPlay",value:function(n,a,o){var r=this,s=this[t](n);a&&o&&"0.1"===r[i]&&(a=a.replace(/-/g,"").replace(/:/g,""),o=o.replace(/-/g,"").replace(/:/g,""));var l=new Promise((function(t,n){if(s>-1){r[e][s].resolve=t,r[e][s].reject=n;var l=null;a&&o?"0.1"!==r[i]?0===r[c]?l=x.playbackCmd(r[e][s],a,o):1===r[c]?l=h.playbackCmd(a,o,r[e][s].playURL):-1===r[c]&&(l=f.playbackCmd(r[e][s],a,o)):l=u.playbackCmd(a,o,r[e][s].iCurChannel,r[e][s].iCurStream):0===r[e][s].iCurChannel&&"0.1"===r[i]?l=u.zeroPlayCmd(r[e][s].iCurChannel,r[e][s].iCurStream):"0.1"!==r[i]?0===r[c]?l=x.playCmd(r[e][s]):1===r[c]?l=h.playCmd(r[e][s].playURL):-1===r[c]&&(l=f.playCmd(r[e][s])):l=u.playCmd(r[e][s].iCurChannel,r[e][s].iCurStream),r[e][s].socket.send(l),"0.1"===r[i]&&t()}else"0.1"===r[i]&&n()}));return l}},{key:"singleFrame",value:function(){}},{key:"setPlayRate",value:function(t,n){var a=this,o=new Promise((function(o,r){for(var s=0,l=a[e].length;s<l;s++)if(a[e][s].id===t){if("0.1"===a[i]){console.log("DirectDeviceCustom.playRateCmd:",n);var d=u.playRateCmd(n);a[e][s].socket.send(d),o();break}a[e][s].resolve=o,a[e][s].reject=r,console.log("DirectDevice.playRateCmd:",n);var c=h.playRateCmd(n);a[e][s].socket.send(c),o()}}));return o}},{key:"seek",value:function(t,i,n){var a=this,o=new Promise((function(o,r){for(var s=0,l=a[e].length;s<l;s++)if(a[e][s].id===t){a[e][s].resolve=o,a[e][s].reject=r;var d=x.seekCmd(i,n);a[e][s].socket.send(d)}}));return o}},{key:"pause",value:function(t){var n=this,a=new Promise((function(a,o){for(var r=0,s=n[e].length;r<s;r++)if(n[e][r].id===t){if("0.1"===n[i]){var l=u.pauseCmd();n[e][r].socket.send(l),a();break}n[e][r].resolve=a,n[e][r].reject=o;var d=h.pauseCmd();n[e][r].socket.send(d)}}));return a}},{key:"transmission",value:function(t,i){var n=this,a=new Promise((function(a,o){for(var r=0,s=n[e].length;r<s;r++)n[e][r].id===t&&(n[e][r].resolve=a,n[e][r].reject=o,n[e][r].socket.send(i))}));return a}},{key:"resume",value:function(t){var n=this,a=new Promise((function(a,o){for(var r=0,s=n[e].length;r<s;r++)if(n[e][r].id===t){if("0.1"===n[i]){var l=u.resumeCmd();n[e][r].socket.send(l),a();break}n[e][r].resolve=a,n[e][r].reject=o;var d=h.resumeCmd();n[e][r].socket.send(d)}}));return a}},{key:"stop",value:function(t){var i=this,n=new Promise((function(n,a){if(t){for(var o=-1,r=0,s=i[e].length;r<s;r++)if(i[e][r].id===t){o=r,i[e][r].resolve=n,i[e][r].socket.close(1e3,"CLOSE");break}-1===o&&a()}else a()}));return n}},{key:"stopAll",value:function(){var t=this,i=new Promise((function(i,n){for(var a=0,o=t[e].length;a<o;a++)t[e][a].socket.close(1e3,"CLOSE");console.log("停止所有流"),i()}));return i}}]),o}();return p}();t.StreamClient=c},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){var e=function(){function e(){a(this,e)}return n(e,[{key:"createClientObject",value:function(e,t,i,n){return{socket:e,id:t,iCurChannel:i,iCurStream:n,resolve:null,reject:null}}},{key:"zeroPlayCmd",value:function(e,t){var i=[0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e+1,0,0,0,t,0,0,4,0];return new Uint8Array(i)}},{key:"playCmd",value:function(e,t){var i=[0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,0,0,0,t,0,0,4,0];return new Uint8Array(i)}},{key:"playbackCmd",value:function(e,t,i,n){var a=e.split("T")[0],o=e.split("T")[1],r="0"+parseInt(a.substring(0,4),10).toString(16),s=parseInt(a.substring(4,6),10),l=parseInt(a.substring(6),10),d=parseInt(o.substring(0,2),10),c=parseInt(o.substring(2,4),10),u=parseInt(o.substring(4,6),10),h=t.split("T")[0],x=t.split("T")[1],f="0"+parseInt(h.substring(0,4),10).toString(16),p=parseInt(h.substring(4,6),10),m=parseInt(x.substring(0,2),10),_=parseInt(x.substring(2,4),10),g=parseInt(x.substring(4,6),10),v=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i,0,0,parseInt(r.substring(0,2),16),parseInt(r.substring(2,4),16),0,0,0,s,0,0,0,l,0,0,0,d,0,0,0,c,0,0,0,u,0,0,parseInt(f.substring(0,2),16),parseInt(f.substring(2,4),16),0,0,0,p,0,0,0,l,0,0,0,m,0,0,0,_,0,0,0,g,0,0,0,0,0,0,0,0,n,0,0,0];return new Uint8Array(v)}},{key:"playRateCmd",value:function(e){for(var t=(parseInt(e,10)>>>0).toString(16).toLocaleUpperCase().toString(16),i=t.length;i<8;i++)t="0"+t;for(var n=[0,0,0,0],a=0,o=t.length;a<o;a+=2)n[Math.floor(a/2)]=parseInt(t.substring(a,a+2),16);var r=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n[0],n[1],n[2],n[3]];return new Uint8Array(r)}},{key:"pauseCmd",value:function(){var e=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(e)}},{key:"resumeCmd",value:function(){var e=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(e)}}]),e}();return e}();t.DirectDeviceCustom=o},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=3001,r=3002,s=3003,l=function(){var e=function(){function e(){a(this,e)}return n(e,[{key:"createClientObject",value:function(e,t,i){return{socket:e,id:t,playURL:i,resolve:null,reject:null}}},{key:"getMediaFromSdp",value:function(e){for(var t=e.indexOf("MEDIAINFO=")+10,i=e.slice(t,t+80),n=[],a=0,o=i.length/2;a<o;a++)n[a]=parseInt(i.slice(2*a,2*a+2),16);return new Uint8Array(n)}},{key:"playCmd",value:function(e){var t={sequence:0,cmd:"realplay",url:e};return JSON.stringify(t)}},{key:"playbackCmd",value:function(e,t,i){var n={sequence:0,cmd:"playback",url:i,startTime:e,endTime:t};return JSON.stringify(n)}},{key:"playRateCmd",value:function(e){var t={sequence:0,cmd:"changespeed",speed:e};return JSON.stringify(t)}},{key:"pauseCmd",value:function(){var e={sequence:0,cmd:"pause"};return JSON.stringify(e)}},{key:"resumeCmd",value:function(){var e={sequence:0,cmd:"resume"};return JSON.stringify(e)}},{key:"getError",value:function(e){var t=o;return e&&(6===parseInt(e.statusCode,10)&&"streamLimit"===e.subStatusCode?t=r:4===parseInt(e.statusCode,10)&&"badAuthorization"===e.subStatusCode&&(t=s)),{iErrorNum:t,oError:e}}}]),e}();return e}();t.DirectDevice=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LiveMedia=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(9),o=l(a),r=i(10),s=l(r);function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){var e=function(){function e(){d(this,e)}return n(e,[{key:"createClientObject",value:function(e,t,i,n,a){var o=s["default"].AES.encrypt((new Date).getTime().toString(),s["default"].enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:s["default"].mode.CBC,iv:s["default"].enc.Hex.parse("12345678912345671234567891234567"),padding:s["default"].pad.Pkcs7}).ciphertext.toString();o.length<64&&(o+=o);var r=s["default"].AES.encrypt((new Date).getTime().toString(),s["default"].enc.Hex.parse("12345678912345671234567891234567"),{mode:s["default"].mode.CBC,iv:s["default"].enc.Hex.parse("12345678912345671234567891234567"),padding:s["default"].pad.Pkcs7}).ciphertext.toString();return{socket:e,id:t,PKD:i,rand:n,playURL:a.playURL||"",auth:a.auth||"",token:a.token||"",key:o,iv:r,resolve:null,reject:null}}},{key:"playCmd",value:function(e){var t={sequence:0,cmd:"realplay",url:e.playURL,key:o["default"].encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:s["default"].AES.encrypt(e.rand+":"+e.auth,s["default"].enc.Hex.parse(e.key),{mode:s["default"].mode.CBC,iv:s["default"].enc.Hex.parse(e.iv),padding:s["default"].pad.Pkcs7}).ciphertext.toString(),token:s["default"].AES.encrypt(e.token,s["default"].enc.Hex.parse(e.key),{mode:s["default"].mode.CBC,iv:s["default"].enc.Hex.parse(e.iv),padding:s["default"].pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(t)}},{key:"playbackCmd",value:function(e,t,i){var n={sequence:0,cmd:"playback",url:e.playURL,key:o["default"].encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:s["default"].AES.encrypt(e.rand+":"+e.auth,s["default"].enc.Hex.parse(e.key),{mode:s["default"].mode.CBC,iv:s["default"].enc.Hex.parse(e.iv),padding:s["default"].pad.Pkcs7}).ciphertext.toString(),token:s["default"].AES.encrypt(e.token,s["default"].enc.Hex.parse(e.key),{mode:s["default"].mode.CBC,iv:s["default"].enc.Hex.parse(e.iv),padding:s["default"].pad.Pkcs7}).ciphertext.toString(),startTime:t,endTime:i};return JSON.stringify(n)}},{key:"seekCmd",value:function(e,t){var i={sequence:0,cmd:"seek",startTime:e,endTime:t};return JSON.stringify(i)}}]),e}();return e}();t.LiveMedia=c},function(e,t,n){var a,r="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)};function s(e,t,i){null!=e&&("number"==typeof e?this.fromNumber(e,t,i):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function l(){return new s(null)}function d(e,t,i,n,a,o){var r=16383&t;for(t>>=14;--o>=0;){var s=16383&this[e],l=this[e++]>>14,d=t*s+l*r;s=r*s+((16383&d)<<14)+i[n]+a,a=(s>>28)+(d>>14)+t*l;i[n++]=268435455&s}return a}s.prototype.am=d,a=28,s.prototype.DB=a,s.prototype.DM=(1<<a)-1,s.prototype.DV=1<<a;var c=52;s.prototype.FV=Math.pow(2,c),s.prototype.F1=c-a,s.prototype.F2=2*a-c;var u,h,x="0123456789abcdefghijklmnopqrstuvwxyz",f=[];for(u="0".charCodeAt(0),h=0;h<=9;++h)f[u++]=h;for(u="a".charCodeAt(0),h=10;h<36;++h)f[u++]=h;for(u="A".charCodeAt(0),h=10;h<36;++h)f[u++]=h;function p(e){return x.charAt(e)}function m(e,t){var i=f[e.charCodeAt(t)];return null==i?-1:i}function _(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function g(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function y(e){var t=l();return t.fromInt(e),t}function b(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.fromRadix(e,t);i=2}this.s=this.t=0;for(var n=e.length,a=!1,o=0;--n>=0;){var r=8==i?255&e[n]:m(e,n);r<0?"-"==e.charAt(n)&&(a=!0):(a=!1,0==o?this[this.t++]=r:o+i>this.DB?(this[this.t-1]|=(r&(1<<this.DB-o)-1)<<o,this[this.t++]=r>>this.DB-o):this[this.t-1]|=r<<o,o+=i,o>=this.DB&&(o-=this.DB))}8==i&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&s.ZERO.subTo(this,this)}function S(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function C(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else if(64==e)e=6;else{if(4!=e)return this.toRadix(e);e=2}var t,i=(1<<e)-1,n=!1,a="",o=this.t,r=this.DB-o*this.DB%e;if(o-- >0)for(r<this.DB&&(t=this[o]>>r)>0&&(n=!0,a=p(t));o>=0;)r<e?(t=(this[o]&(1<<r)-1)<<e-r,t|=this[--o]>>(r+=this.DB-e)):(t=this[o]>>(r-=e)&i,r<=0&&(r+=this.DB,--o)),t>0&&(n=!0),n&&(a+=p(t));return n?a:"0"}function w(){var e=l();return s.ZERO.subTo(this,e),e}function T(){return this.s<0?this.negate():this}function P(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;t=i-e.t;if(0!=t)return t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0}function E(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),e>>1!=0&&(i+=1),i}function k(){return this.t<=0?0:this.DB*(this.t-1)+E(this[this.t-1]^this.s&this.DM)}function R(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s}function I(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s}function D(e,t){var i,n=e%this.DB,a=this.DB-n,o=(1<<a)-1,r=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)t[i+r+1]=this[i]>>a|s,s=(this[i]&o)<<n;for(i=r-1;i>=0;--i)t[i]=0;t[r]=s,t.t=this.t+r+1,t.s=this.s,t.clamp()}function M(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var n=e%this.DB,a=this.DB-n,o=(1<<n)-1;t[0]=this[i]>>n;for(var r=i+1;r<this.t;++r)t[r-i-1]|=(this[r]&o)<<a,t[r-i]=this[r]>>n;n>0&&(t[this.t-i-1]|=(this.s&o)<<a),t.t=this.t-i,t.clamp()}}function A(e,t){for(var i=0,n=0,a=Math.min(e.t,this.t);i<a;)n+=this[i]-e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n-=e[i],t[i++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[i++]=this.DV+n:n>0&&(t[i++]=n),t.t=i,t.clamp()}function B(e,t){var i=this.abs(),n=e.abs(),a=i.t;for(t.t=a+n.t;--a>=0;)t[a]=0;for(a=0;a<n.t;++a)t[a+i.t]=i.am(0,n[a],t,a,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)}function L(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var n=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,n,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()}function F(e,t,i){var n=e.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t)null!=t&&t.fromInt(0),null!=i&&this.copyTo(i);else{null==i&&(i=l());var o=l(),r=this.s,d=(e=e.s,this.DB-E(n[n.t-1]));if(d>0?(n.lShiftTo(d,o),a.lShiftTo(d,i)):(n.copyTo(o),a.copyTo(i)),n=o.t,a=o[n-1],0!=a){var c=a*(1<<this.F1)+(n>1?o[n-2]>>this.F2:0),u=this.FV/c,h=(c=(1<<this.F1)/c,1<<this.F2),x=i.t,f=x-n,p=null==t?l():t;for(o.dlShiftTo(f,p),i.compareTo(p)>=0&&(i[i.t++]=1,i.subTo(p,i)),s.ONE.dlShiftTo(n,p),p.subTo(o,o);o.t<n;)o[o.t++]=0;for(;--f>=0;){var m=i[--x]==a?this.DM:Math.floor(i[x]*u+(i[x-1]+h)*c);if((i[x]+=o.am(0,m,i,f,0,n))<m)for(o.dlShiftTo(f,p),i.subTo(p,i);i[x]<--m;)i.subTo(p,i)}null!=t&&(i.drShiftTo(n,t),r!=e&&s.ZERO.subTo(t,t)),i.t=n,i.clamp(),d>0&&i.rShiftTo(d,i),r<0&&s.ZERO.subTo(i,i)}}}}function j(e){var t=l();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t}function z(e){this.m=e}function O(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function N(e){return e}function U(e){e.divRemTo(this.m,null,e)}function H(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function V(e,t){e.squareTo(t),this.reduce(t)}function G(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV;return t>0?this.DV-t:-t}function Y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function W(e){var t=l();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t}function Z(e){var t=l();return e.copyTo(t),this.reduce(t),t}function X(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],n=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;i=t+this.m.t;for(e[i]+=this.m.am(0,n,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function J(e,t){e.squareTo(t),this.reduce(t)}function q(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function K(){return 0==(this.t>0?1&this[0]:this.s)}function $(e,t){if(e>4294967295||e<1)return s.ONE;var i=l(),n=l(),a=t.convert(this),o=E(e)-1;for(a.copyTo(i);--o>=0;)if(t.sqrTo(i,n),(e&1<<o)>0)t.mulTo(n,a,i);else{var r=i;i=n,n=r}return t.revert(i)}function Q(e,t){var i;return i=e<256||t.isEven()?new z(t):new Y(t),this.exp(e,i)}function ee(){var e=l();return this.copyTo(e),e}function te(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ie(){return 0==this.t?this.s:this[0]<<24>>24}function ne(){return 0==this.t?this.s:this[0]<<16>>16}function ae(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function oe(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function re(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=(t=Math.pow(e,t),y(t)),n=l(),a=l(),o="";for(this.divRemTo(i,n,a);n.signum()>0;)o=(t+a.intValue()).toString(e).substr(1)+o,n.divRemTo(i,n,a);return a.intValue().toString(e)+o}function se(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),n=Math.pow(t,i),a=!1,o=0,r=0,l=0;l<e.length;++l){var d=m(e,l);d<0?"-"==e.charAt(l)&&0==this.signum()&&(a=!0):(r=t*r+d,++o>=i&&(this.dMultiply(n),this.dAddOffset(r,0),r=o=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(r,0)),a&&s.ZERO.subTo(this,this)}function le(e,t,i){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(s.ONE.shiftLeft(e-1),me,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(s.ONE.shiftLeft(e-1),this);else{i=[];var n=7&e;i.length=1+(e>>3),t.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function de(){var e=this.t,t=[];t[0]=this.s;var i,n=this.DB-e*this.DB%8,a=0;if(e-- >0)for(n<this.DB&&(i=this[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=i|this.s<<this.DB-n);e>=0;)n<8?(i=(this[e]&(1<<n)-1)<<8-n,i|=this[--e]>>(n+=this.DB-8)):(i=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&i)&&(i|=-256),0==a&&(128&this.s)!=(128&i)&&++a,(a>0||i!=this.s)&&(t[a++]=i);return t}function ce(e){return 0==this.compareTo(e)}function ue(e){return this.compareTo(e)<0?this:e}function he(e){return this.compareTo(e)>0?this:e}function xe(e,t,i){var n,a,o=Math.min(e.t,this.t);for(n=0;n<o;++n)i[n]=t(this[n],e[n]);if(e.t<this.t){for(a=e.s&this.DM,n=o;n<this.t;++n)i[n]=t(this[n],a);i.t=this.t}else{for(a=this.s&this.DM,n=o;n<e.t;++n)i[n]=t(a,e[n]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()}function fe(e,t){return e&t}function pe(e){var t=l();return this.bitwiseTo(e,fe,t),t}function me(e,t){return e|t}function _e(e){var t=l();return this.bitwiseTo(e,me,t),t}function ge(e,t){return e^t}function ve(e){var t=l();return this.bitwiseTo(e,ge,t),t}function ye(e,t){return e&~t}function be(e){var t=l();return this.bitwiseTo(e,ye,t),t}function Se(){for(var e=l(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function Ce(e){var t=l();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function we(e){var t=l();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Te(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function Pe(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+Te(this[e]);return this.s<0?this.t*this.DB:-1}function Ee(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function ke(){for(var e=0,t=this.s&this.DM,i=0;i<this.t;++i)e+=Ee(this[i]^t);return e}function Re(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function Ie(e,t){var i=s.ONE.shiftLeft(e);return this.bitwiseTo(i,t,i),i}function De(e){return this.changeBit(e,me)}function Me(e){return this.changeBit(e,ye)}function Ae(e){return this.changeBit(e,ge)}function Be(e,t){for(var i=0,n=0,a=Math.min(e.t,this.t);i<a;)n+=this[i]+e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n+=e[i],t[i++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[i++]=n:n<-1&&(t[i++]=this.DV+n),t.t=i,t.clamp()}function Le(e){var t=l();return this.addTo(e,t),t}function Fe(e){var t=l();return this.subTo(e,t),t}function je(e){var t=l();return this.multiplyTo(e,t),t}function ze(){var e=l();return this.squareTo(e),e}function Oe(e){var t=l();return this.divRemTo(e,t,null),t}function Ne(e){var t=l();return this.divRemTo(e,null,t),t}function Ue(e){var t=l(),i=l();return this.divRemTo(e,t,i),[t,i]}function He(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Ve(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Ge(){}function Ye(e){return e}function We(e,t,i){e.multiplyTo(t,i)}function Ze(e,t){e.squareTo(t)}function Xe(e){return this.exp(e,new Ge)}function Je(e,t,i){var n,a=Math.min(this.t+e.t,t);for(i.s=0,i.t=a;a>0;)i[--a]=0;for(n=i.t-this.t;a<n;++a)i[a+this.t]=this.am(0,e[a],i,a,0,this.t);for(n=Math.min(e.t,t);a<n;++a)this.am(0,e[a],i,a,0,t-a);i.clamp()}function qe(e,t,i){--t;var n=i.t=this.t+e.t-t;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)i[this.t+n-t]=this.am(t-n,e[n],i,0,0,this.t+n-t);i.clamp(),i.drShiftTo(1,i)}function Ke(e){this.r2=l(),this.q3=l(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function $e(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=l();return e.copyTo(t),this.reduce(t),t}function Qe(e){return e}function et(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function tt(e,t){e.squareTo(t),this.reduce(t)}function it(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function nt(e,t){var i,n,a=e.bitLength(),o=y(1);if(a<=0)return o;i=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new z(t):t.isEven()?new Ke(t):new Y(t);var r=[],s=3,d=i-1,c=(1<<i)-1;if(r[1]=n.convert(this),i>1)for(a=l(),n.sqrTo(r[1],a);s<=c;)r[s]=l(),n.mulTo(a,r[s-2],r[s]),s+=2;var u,h=e.t-1,x=!0,f=l();for(a=E(e[h])-1;h>=0;){for(a>=d?u=e[h]>>a-d&c:(u=(e[h]&(1<<a+1)-1)<<d-a,h>0&&(u|=e[h-1]>>this.DB+a-d)),s=i;0==(1&u);)u>>=1,--s;if((a-=s)<0&&(a+=this.DB,--h),x)r[u].copyTo(o),x=!1;else{for(;s>1;)n.sqrTo(o,f),n.sqrTo(f,o),s-=2;s>0?n.sqrTo(o,f):(s=o,o=f,f=s),n.mulTo(f,r[u],o)}for(;h>=0&&0==(e[h]&1<<a);)n.sqrTo(o,f),s=o,o=f,f=s,--a<0&&(a=this.DB-1,--h)}return n.revert(o)}function at(e){var t=this.s<0?this.negate():this.clone();e=e.s<0?e.negate():e.clone();if(t.compareTo(e)<0){var i=t;t=e,e=i}i=t.getLowestSetBit();var n=e.getLowestSetBit();if(n<0)return t;for(i<n&&(n=i),n>0&&(t.rShiftTo(n,t),e.rShiftTo(n,e));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return n>0&&e.lShiftTo(n,e),e}function ot(e){if(e<=0)return 0;var t=this.DV%e,i=this.s<0?e-1:0;if(this.t>0)if(0==t)i=this[0]%e;else for(var n=this.t-1;n>=0;--n)i=(t*i+this[n])%e;return i}function rt(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return s.ZERO;for(var i=e.clone(),n=this.clone(),a=y(1),o=y(0),r=y(0),l=y(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(r.isEven()&&l.isEven()||(r.addTo(this,r),l.subTo(e,l)),r.rShiftTo(1,r)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);i.compareTo(n)>=0?(i.subTo(n,i),t&&a.subTo(r,a),o.subTo(l,o)):(n.subTo(i,n),t&&r.subTo(a,r),l.subTo(o,l))}return 0!=n.compareTo(s.ONE)?s.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l}z.prototype.convert=O,z.prototype.revert=N,z.prototype.reduce=U,z.prototype.mulTo=H,z.prototype.sqrTo=V,Y.prototype.convert=W,Y.prototype.revert=Z,Y.prototype.reduce=X,Y.prototype.mulTo=q,Y.prototype.sqrTo=J,s.prototype.copyTo=_,s.prototype.fromInt=g,s.prototype.fromString=b,s.prototype.clamp=S,s.prototype.dlShiftTo=R,s.prototype.drShiftTo=I,s.prototype.lShiftTo=D,s.prototype.rShiftTo=M,s.prototype.subTo=A,s.prototype.multiplyTo=B,s.prototype.squareTo=L,s.prototype.divRemTo=F,s.prototype.invDigit=G,s.prototype.isEven=K,s.prototype.exp=$,s.prototype.toString=C,s.prototype.negate=w,s.prototype.abs=T,s.prototype.compareTo=P,s.prototype.bitLength=k,s.prototype.mod=j,s.prototype.modPowInt=Q,s.ZERO=y(0),s.ONE=y(1),Ge.prototype.convert=Ye,Ge.prototype.revert=Ye,Ge.prototype.mulTo=We,Ge.prototype.sqrTo=Ze,Ke.prototype.convert=$e,Ke.prototype.revert=Qe,Ke.prototype.reduce=et,Ke.prototype.mulTo=it,Ke.prototype.sqrTo=tt;var st=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lt=67108864/st[st.length-1];function dt(e){var t,i=this.abs();if(1==i.t&&i[0]<=st[st.length-1]){for(t=0;t<st.length;++t)if(i[0]==st[t])return!0;return!1}if(i.isEven())return!1;for(t=1;t<st.length;){for(var n=st[t],a=t+1;a<st.length&&n<lt;)n*=st[a++];for(n=i.modInt(n);t<a;)if(n%st[t++]==0)return!1}return i.millerRabin(e)}function ct(e){var t=this.subtract(s.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var n=t.shiftRight(i);e=e+1>>1;e>st.length&&(e=st.length);for(var a=l(),o=0;o<e;++o){a.fromInt(st[Math.floor(Math.random()*st.length)]);var r=a.modPow(n,this);if(0!=r.compareTo(s.ONE)&&0!=r.compareTo(t)){for(var d=1;d++<i&&0!=r.compareTo(t);)if(r=r.modPowInt(2,this),0==r.compareTo(s.ONE))return!1;if(0!=r.compareTo(t))return!1}}return!0}function ut(){}function ht(e){var t;for(t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())}function xt(){this.j=this.i=0,this.S=[]}function ft(e){var t,i,n;for(t=0;t<256;++t)this.S[t]=t;for(t=i=0;t<256;++t)i=i+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[i],this.S[i]=n;this.j=this.i=0}function pt(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function mt(){return new xt}s.prototype.chunkSize=ae,s.prototype.toRadix=re,s.prototype.fromRadix=se,s.prototype.fromNumber=le,s.prototype.bitwiseTo=xe,s.prototype.changeBit=Ie,s.prototype.addTo=Be,s.prototype.dMultiply=He,s.prototype.dAddOffset=Ve,s.prototype.multiplyLowerTo=Je,s.prototype.multiplyUpperTo=qe,s.prototype.modInt=ot,s.prototype.millerRabin=ct,s.prototype.clone=ee,s.prototype.intValue=te,s.prototype.byteValue=ie,s.prototype.shortValue=ne,s.prototype.signum=oe,s.prototype.toByteArray=de,s.prototype.equals=ce,s.prototype.min=ue,s.prototype.max=he,s.prototype.and=pe,s.prototype.or=_e,s.prototype.xor=ve,s.prototype.andNot=be,s.prototype.not=Se,s.prototype.shiftLeft=Ce,s.prototype.shiftRight=we,s.prototype.getLowestSetBit=Pe,s.prototype.bitCount=ke,s.prototype.testBit=Re,s.prototype.setBit=De,s.prototype.clearBit=Me,s.prototype.flipBit=Ae,s.prototype.add=Le,s.prototype.subtract=Fe,s.prototype.multiply=je,s.prototype.divide=Oe,s.prototype.remainder=Ne,s.prototype.divideAndRemainder=Ue,s.prototype.modPow=nt,s.prototype.modInverse=rt,s.prototype.pow=Xe,s.prototype.gcd=at,s.prototype.isProbablePrime=dt,s.prototype.square=ze,function(e,t,i,n,a,o,s){function l(e){var t,n,a=this,o=e.length,r=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],o||(e=[o++]);r<i;)a.S[r]=r++;for(r=0;r<i;r++)t=a.S[r],s=s+t+e[r%o]&i-1,n=a.S[s],a.S[r]=n,a.S[s]=t;a.g=function(e){var t=a.S,n=a.i+1&i-1,o=t[n],r=a.j+o&i-1,s=t[r];t[n]=s,t[r]=o;for(var l=t[o+s&i-1];--e;)n=n+1&i-1,o=t[n],r=r+o&i-1,s=t[r],t[n]=s,t[r]=o,l=l*i+t[o+s&i-1];return a.i=n,a.j=r,l},a.g(i)}function d(e,t,i,n,a){if(i=[],a="undefined"===typeof e?"undefined":r(e),t&&"object"==a)for(n in e)if(n.indexOf("S")<5)try{i.push(d(e[n],t-1))}catch(e){}return i.length?i:e+("string"!=a?"\0":"")}function c(e,t,n,a){for(e+="",a=n=0;a<e.length;a++){var o=t,r=a&i-1,s=(n^=19*t[a&i-1])+e.charCodeAt(a);o[r]=s&i-1}for(a in e="",t)e+=String.fromCharCode(t[a]);return e}t.seedrandom=function(r,u){var h,x=[];r=c(d(u?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),x);return h=new l(x),c(h.S,e),t.random=function(){for(var e=h.g(n),t=s,r=0;e<a;)e=(e+r)*i,t*=i,r=h.g(1);for(;e>=o;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},s=t.pow(i,n),a=t.pow(2,a),o=2*a,c(t.random(),e)}([],Math,256,6,52),ut.prototype.nextBytes=ht,xt.prototype.init=ft,xt.prototype.next=pt;var _t,gt,vt,yt=256;function bt(e){gt[vt++]^=255&e,gt[vt++]^=e>>8&255,gt[vt++]^=e>>16&255,gt[vt++]^=e>>24&255,vt>=yt&&(vt-=yt)}function St(){bt((new Date).getTime())}if(null==gt){var Ct;for(gt=[],vt=0;vt<yt;)Ct=Math.floor(65536*Math.random()),gt[vt++]=Ct>>>8,gt[vt++]=255&Ct;vt=0,St()}function wt(){if(null==_t){for(St(),_t=mt(),_t.init(gt),vt=0;vt<gt.length;++vt)gt[vt]=0;vt=0}return _t.next()}function Tt(e){var t;for(t=0;t<e.length;++t)e[t]=wt()}function Pt(){}function Et(e){function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,t){return e>>>t|e<<32-t}return e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e),function(e){for(var t="",i=0;i<4*e.length;i++)t+="0123456789abcdef".charAt(e[i>>2]>>8*(3-i%4)+4&15)+"0123456789abcdef".charAt(e[i>>2]>>8*(3-i%4)&15);return t}(function(e,n){var a,o,r,s,l,d,c,u,h,x,f,p,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],g=Array(64);for(e[n>>5]|=128<<24-n%32,e[15+(n+64>>9<<4)]=n,h=0;h<e.length;h+=16){for(a=_[0],o=_[1],r=_[2],s=_[3],l=_[4],d=_[5],c=_[6],u=_[7],x=0;x<64;x++)g[x]=x<16?e[x+h]:t(t(t(i(g[x-2],17)^i(g[x-2],19)^g[x-2]>>>10,g[x-7]),i(g[x-15],7)^i(g[x-15],18)^g[x-15]>>>3),g[x-16]),f=t(t(t(t(u,i(l,6)^i(l,11)^i(l,25)),l&d^~l&c),m[x]),g[x]),p=t(i(a,2)^i(a,13)^i(a,22),a&o^a&r^o&r),u=c,c=d,d=l,l=t(s,f),s=r,r=o,o=a,a=t(f,p);_[0]=t(a,_[0]),_[1]=t(o,_[1]),_[2]=t(r,_[2]),_[3]=t(s,_[3]),_[4]=t(l,_[4]),_[5]=t(d,_[5]),_[6]=t(c,_[6]),_[7]=t(u,_[7])}return _}(function(e){for(var t=[],i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}(e),8*e.length))}Pt.prototype.nextBytes=Tt;var kt={hex:function(e){return Et(e)}};function Rt(e){function t(e,t){return e<<t|e>>>32-t}function i(e){var t,i,n="";for(t=7;t>=0;t--)i=e>>>4*t&15,n+=i.toString(16);return n}var n,a,o,r,s,l,d,c=Array(80),u=1732584193,h=4023233417,x=2562383102,f=271733878,p=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e);o=e.length;var m=[];for(n=0;n<o-3;n+=4)a=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),m.push(a);switch(o%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(o-1)<<24|8388608;break;case 2:n=e.charCodeAt(o-2)<<24|e.charCodeAt(o-1)<<16|32768;break;case 3:n=e.charCodeAt(o-3)<<24|e.charCodeAt(o-2)<<16|e.charCodeAt(o-1)<<8|128}for(m.push(n);m.length%16!=14;)m.push(0);for(m.push(o>>>29),m.push(o<<3&4294967295),e=0;e<m.length;e+=16){for(n=0;n<16;n++)c[n]=m[e+n];for(n=16;n<=79;n++)c[n]=t(c[n-3]^c[n-8]^c[n-14]^c[n-16],1);for(a=u,o=h,r=x,s=f,l=p,n=0;n<=19;n++)d=t(a,5)+(o&r|~o&s)+l+c[n]+1518500249&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;for(n=20;n<=39;n++)d=t(a,5)+(o^r^s)+l+c[n]+1859775393&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;for(n=40;n<=59;n++)d=t(a,5)+(o&r|o&s|r&s)+l+c[n]+2400959708&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;for(n=60;n<=79;n++)d=t(a,5)+(o^r^s)+l+c[n]+3395469782&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;u=u+a&4294967295,h=h+o&4294967295,x=x+r&4294967295,f=f+s&4294967295,p=p+l&4294967295}return d=i(u)+i(h)+i(x)+i(f)+i(p),d.toLowerCase()}var It={hex:function(e){return Rt(e)}},Dt=function(e){function t(e,t){var i,n,a,o,r;return a=2147483648&e,o=2147483648&t,i=1073741824&e,n=1073741824&t,r=(1073741823&e)+(1073741823&t),i&n?2147483648^r^a^o:i|n?1073741824&r?3221225472^r^a^o:1073741824^r^a^o:r^a^o}function i(e,i,n,a,o,r,s){return e=t(e,t(t(i&n|~i&a,o),s)),t(e<<r|e>>>32-r,i)}function n(e,i,n,a,o,r,s){return e=t(e,t(t(i&a|n&~a,o),s)),t(e<<r|e>>>32-r,i)}function a(e,i,n,a,o,r,s){return e=t(e,t(t(i^n^a,o),s)),t(e<<r|e>>>32-r,i)}function o(e,i,n,a,o,r,s){return e=t(e,t(t(n^(i|~a),o),s)),t(e<<r|e>>>32-r,i)}function r(e){var t,i="",n="";for(t=0;t<=3;t++)n=e>>>8*t&255,n="0"+n.toString(16),i+=n.substr(n.length-2,2);return i}var s,l,d,c,u,h,x,f,p=[];e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e),p=function(e){var t,i=e.length;t=i+8;for(var n=16*((t-t%64)/64+1),a=Array(n-1),o=0,r=0;r<i;)t=(r-r%4)/4,o=r%4*8,a[t]|=e.charCodeAt(r)<<o,r++;return a[(r-r%4)/4]|=128<<r%4*8,a[n-2]=i<<3,a[n-1]=i>>>29,a}(e);for(u=1732584193,h=4023233417,x=2562383102,f=271733878,e=0;e<p.length;e+=16)s=u,l=h,d=x,c=f,u=i(u,h,x,f,p[e+0],7,3614090360),f=i(f,u,h,x,p[e+1],12,3905402710),x=i(x,f,u,h,p[e+2],17,606105819),h=i(h,x,f,u,p[e+3],22,3250441966),u=i(u,h,x,f,p[e+4],7,4118548399),f=i(f,u,h,x,p[e+5],12,1200080426),x=i(x,f,u,h,p[e+6],17,2821735955),h=i(h,x,f,u,p[e+7],22,4249261313),u=i(u,h,x,f,p[e+8],7,1770035416),f=i(f,u,h,x,p[e+9],12,2336552879),x=i(x,f,u,h,p[e+10],17,4294925233),h=i(h,x,f,u,p[e+11],22,2304563134),u=i(u,h,x,f,p[e+12],7,1804603682),f=i(f,u,h,x,p[e+13],12,4254626195),x=i(x,f,u,h,p[e+14],17,2792965006),h=i(h,x,f,u,p[e+15],22,1236535329),u=n(u,h,x,f,p[e+1],5,4129170786),f=n(f,u,h,x,p[e+6],9,3225465664),x=n(x,f,u,h,p[e+11],14,643717713),h=n(h,x,f,u,p[e+0],20,3921069994),u=n(u,h,x,f,p[e+5],5,3593408605),f=n(f,u,h,x,p[e+10],9,38016083),x=n(x,f,u,h,p[e+15],14,3634488961),h=n(h,x,f,u,p[e+4],20,3889429448),u=n(u,h,x,f,p[e+9],5,568446438),f=n(f,u,h,x,p[e+14],9,3275163606),x=n(x,f,u,h,p[e+3],14,4107603335),h=n(h,x,f,u,p[e+8],20,1163531501),u=n(u,h,x,f,p[e+13],5,2850285829),f=n(f,u,h,x,p[e+2],9,4243563512),x=n(x,f,u,h,p[e+7],14,1735328473),h=n(h,x,f,u,p[e+12],20,2368359562),u=a(u,h,x,f,p[e+5],4,4294588738),f=a(f,u,h,x,p[e+8],11,2272392833),x=a(x,f,u,h,p[e+11],16,1839030562),h=a(h,x,f,u,p[e+14],23,4259657740),u=a(u,h,x,f,p[e+1],4,2763975236),f=a(f,u,h,x,p[e+4],11,1272893353),x=a(x,f,u,h,p[e+7],16,4139469664),h=a(h,x,f,u,p[e+10],23,3200236656),u=a(u,h,x,f,p[e+13],4,681279174),f=a(f,u,h,x,p[e+0],11,3936430074),x=a(x,f,u,h,p[e+3],16,3572445317),h=a(h,x,f,u,p[e+6],23,76029189),u=a(u,h,x,f,p[e+9],4,3654602809),f=a(f,u,h,x,p[e+12],11,3873151461),x=a(x,f,u,h,p[e+15],16,530742520),h=a(h,x,f,u,p[e+2],23,3299628645),u=o(u,h,x,f,p[e+0],6,4096336452),f=o(f,u,h,x,p[e+7],10,1126891415),x=o(x,f,u,h,p[e+14],15,2878612391),h=o(h,x,f,u,p[e+5],21,4237533241),u=o(u,h,x,f,p[e+12],6,1700485571),f=o(f,u,h,x,p[e+3],10,2399980690),x=o(x,f,u,h,p[e+10],15,4293915773),h=o(h,x,f,u,p[e+1],21,2240044497),u=o(u,h,x,f,p[e+8],6,1873313359),f=o(f,u,h,x,p[e+15],10,4264355552),x=o(x,f,u,h,p[e+6],15,2734768916),h=o(h,x,f,u,p[e+13],21,1309151649),u=o(u,h,x,f,p[e+4],6,4149444226),f=o(f,u,h,x,p[e+11],10,3174756917),x=o(x,f,u,h,p[e+2],15,718787259),h=o(h,x,f,u,p[e+9],21,3951481745),u=t(u,s),h=t(h,l),x=t(x,d),f=t(f,c);return(r(u)+r(h)+r(x)+r(f)).toLowerCase()};function Mt(e,t){return new s(e,t)}function At(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var i=[],n=e.length-1;n>=0&&t>0;){var a=e.charCodeAt(n--);a<128?i[--t]=a:a>127&&a<2048?(i[--t]=63&a|128,i[--t]=a>>6|192):(i[--t]=63&a|128,i[--t]=a>>6&63|128,i[--t]=a>>12|224)}for(i[--t]=0,n=new Pt,a=[];t>2;){for(a[0]=0;0==a[0];)n.nextBytes(a);i[--t]=a[0]}return i[--t]=2,i[--t]=0,new s(i)}function Bt(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function Lt(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Mt(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function Ft(e){return e.modPowInt(this.e,this.n)}function jt(e){return e=At(e,this.n.bitLength()+7>>3),null==e?null:(e=this.doPublic(e),null==e?null:(e=e.toString(16),0==(1&e.length)?e:"0"+e))}function zt(e,t){for(var i=e.toByteArray(),n=0;n<i.length&&0==i[n];)++n;if(i.length-n!=t-1||2!=i[n])return null;for(++n;0!=i[n];)if(++n>=i.length)return null;for(var a="";++n<i.length;){var o=255&i[n];o<128?a+=String.fromCharCode(o):o>191&&o<224?(a+=String.fromCharCode((31&o)<<6|63&i[n+1]),++n):(a+=String.fromCharCode((15&o)<<12|(63&i[n+1])<<6|63&i[n+2]),n+=2)}return a}function Ot(e,t,i){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Mt(e,16),this.e=parseInt(t,16),this.d=Mt(i,16)):alert("Invalid RSA private key")}function Nt(e,t,i,n,a,o,r,s){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Mt(e,16),this.e=parseInt(t,16),this.d=Mt(i,16),this.p=Mt(n,16),this.q=Mt(a,16),this.dmp1=Mt(o,16),this.dmq1=Mt(r,16),this.coeff=Mt(s,16)):alert("Invalid RSA private key")}function Ut(e,t){var i=new ut,n=e>>1;this.e=parseInt(t,16);for(var a=new s(t,16);;){for(;;)if(this.p=new s(e-n,1,i),0==this.p.subtract(s.ONE).gcd(a).compareTo(s.ONE)&&this.p.isProbablePrime(10))break;for(;;)if(this.q=new s(n,1,i),0==this.q.subtract(s.ONE).gcd(a).compareTo(s.ONE)&&this.q.isProbablePrime(10))break;if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}o=this.p.subtract(s.ONE);var r=this.q.subtract(s.ONE),l=o.multiply(r);if(0==l.gcd(a).compareTo(s.ONE)){this.n=this.p.multiply(this.q),this.d=a.modInverse(l),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(r),this.coeff=this.q.modInverse(this.p);break}}}function Ht(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);var t=e.mod(this.p).modPow(this.dmp1,this.p);for(e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;)t=t.add(this.p);return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)}function Vt(e){return e=this.doPrivate(Mt(e,16)),null==e?null:zt(e,this.n.bitLength()+7>>3)}Bt.prototype.doPublic=Ft,Bt.prototype.setPublic=Lt,Bt.prototype.encrypt=jt,Bt.prototype.doPrivate=Ht,Bt.prototype.setPrivate=Ot,Bt.prototype.setPrivateEx=Nt,Bt.prototype.generate=Ut,Bt.prototype.decrypt=Vt;var Gt=[];Gt.sha1="3021300906052b0e03021a05000414",Gt.sha256="3031300d060960864801650304020105000420";var Yt=[];function Wt(e,t,i){t/=4;e=(0,Yt[i])(e),i="00"+Gt[i]+e,e="",t=t-4-i.length;for(var n=0;n<t;n+=2)e+="ff";return sPaddedMessageHex="0001"+e+i}function Zt(e,t){var i=Wt(e,this.n.bitLength(),t);return this.doPrivate(Mt(i,16)).toString(16)}function Xt(e){return e=Wt(e,this.n.bitLength(),"sha1"),this.doPrivate(Mt(e,16)).toString(16)}function Jt(e){return e=Wt(e,this.n.bitLength(),"sha256"),this.doPrivate(Mt(e,16)).toString(16)}function qt(e,t,i){var n=new Bt;return n.setPublic(t,i),n.doPublic(e)}function Kt(e,t,i){return qt(e,t,i).toString(16).replace(/^1f+00/,"")}function $t(e){for(var t in Gt){var i=Gt[t],n=i.length;if(e.substring(0,n)==i)return[t,e.substring(n)]}return[]}function Qt(e,t,i,n){return t=Kt(t,i,n),i=$t(t),0!=i.length&&(t=i[1],e=(0,Yt[i[0]])(e),t==e)}function ei(e,t){var i=Mt(e,16);return Qt(t,i,this.n.toString(16),this.e.toString(16))}function ti(e,t){t=t.replace(/[ \n]+/g,"");var i=this.doPublic(Mt(t,16)).toString(16).replace(/^1f+00/,""),n=$t(i);return 0!=n.length&&(i=n[1],n=(0,Yt[n[0]])(e),i==n)}Yt.sha1=It.hex,Yt.sha256=kt.hex,Bt.prototype.signString=Zt,Bt.prototype.signStringWithSHA1=Xt,Bt.prototype.signStringWithSHA256=Jt,Bt.prototype.verifyString=ti,Bt.prototype.verifyHexSignatureForMessage=ei;var ii=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],Init:function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++)e.Sbox_Inv[e.Sbox[t]]=t;for(e.ShiftRowTab_Inv=Array(16),t=0;t<16;t++)e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t;for(e.xtime=Array(256),t=0;t<128;t++)e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27},Done:function(){delete e.Sbox_Inv,delete e.ShiftRowTab_Inv,delete e.xtime},ExpandKey:function(t){var i,n=t.length,a=1;switch(n){case 16:i=176;break;case 24:i=208;break;case 32:i=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var o=n;o<i;o+=4){var r=t.slice(o-4,o);o%n==0?(r=[e.Sbox[r[1]]^a,e.Sbox[r[2]],e.Sbox[r[3]],e.Sbox[r[0]]],(a<<=1)>=256&&(a^=283)):n>24&&o%n==16&&(r=[e.Sbox[r[0]],e.Sbox[r[1]],e.Sbox[r[2]],e.Sbox[r[3]]]);for(var s=0;s<4;s++)t[o+s]=t[o+s-n]^r[s]}},Encrypt:function(t,i){var n=i.length;e.AddRoundKey(t,i.slice(0,16));for(var a=16;a<n-16;a+=16)e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,i.slice(a,a+16));e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.AddRoundKey(t,i.slice(a,n))},Decrypt:function(t,i){var n=i.length;for(e.AddRoundKey(t,i.slice(n-16,n)),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv),n-=32;n>=16;n-=16)e.AddRoundKey(t,i.slice(n,n+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv);e.AddRoundKey(t,i.slice(0,16))},SubBytes:function(e,t){for(var i=0;i<16;i++)e[i]=t[e[i]]},AddRoundKey:function(e,t){for(var i=0;i<16;i++)e[i]^=t[i]},ShiftRows:function(e,t){for(var i=[].concat(e),n=0;n<16;n++)e[n]=i[t[n]]},MixColumns:function(t){for(var i=0;i<16;i+=4){var n=t[i+0],a=t[i+1],o=t[i+2],r=t[i+3],s=n^a^o^r;t[i+0]^=s^e.xtime[n^a],t[i+1]^=s^e.xtime[a^o],t[i+2]^=s^e.xtime[o^r],t[i+3]^=s^e.xtime[r^n]}},MixColumns_Inv:function(t){for(var i=0;i<16;i+=4){var n=t[i+0],a=t[i+1],o=t[i+2],r=t[i+3],s=n^a^o^r,l=e.xtime[s],d=e.xtime[e.xtime[l^n^o]]^s;s^=e.xtime[e.xtime[l^a^r]],t[i+0]^=d^e.xtime[n^a],t[i+1]^=s^e.xtime[a^o],t[i+2]^=d^e.xtime[o^r],t[i+3]^=s^e.xtime[r^n]}}};return e}(),ni=function(){var e={};return ii.Init(),e.b256to64=function(e){var t,i,n,a="",o=0,r=e.length;for(n=0;n<r;n++)i=e.charCodeAt(n),0==o?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2&63),t=(3&i)<<4):1==o?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>4&15),t=(15&i)<<2):2==o&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>6&3),a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i)),o+=1,3==o&&(o=0);return o>0&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),a+="="),1==o&&(a+="="),a},e.b64to256=function(e){var t,i,n="",a=0,o=0,r=e.length;for(i=0;i<r;i++)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(i)),t>=0&&(a&&(n+=String.fromCharCode(o|t>>6-a&255)),a=a+2&7,o=t<<a&255);return n},e.b16to64=function(e){var t,i,n="";for(e.length%2==1&&(e="0"+e),t=0;t+3<=e.length;t+=3)i=parseInt(e.substring(t,t+3),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i);for(t+1==e.length?(i=parseInt(e.substring(t,t+1),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i<<2)):t+2==e.length&&(i=parseInt(e.substring(t,t+2),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&i)<<4));(3&n.length)>0;)n+="=";return n},e.b64to16=function(e){var t,i,n="",a=0;for(t=0;t<e.length;++t){if("="==e.charAt(t))break;v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t)),v<0||(0==a?(n+=p(v>>2),i=3&v,a=1):1==a?(n+=p(i<<2|v>>4),i=15&v,a=2):2==a?(n+=p(i),n+=p(v>>2),i=3&v,a=3):(n+=p(i<<2|v>>4),n+=p(15&v),a=0))}return 1==a&&(n+=p(i<<2)),n},e.string2bytes=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e.charCodeAt(i));return t},e.bytes2string=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e.blockXOR=function(e,t){for(var i=Array(16),n=0;n<16;n++)i[n]=e[n]^t[n];return i},e.blockIV=function(){var e=new Pt,t=Array(16);return e.nextBytes(t),t},e.pad16=function(e){var t=e.slice(0),n=(16-e.length%16)%16;for(i=e.length;i<e.length+n;i++)t.push(0);return t},e.depad=function(e){for(e=e.slice(0);0==e[e.length-1];)e=e.slice(0,e.length-1);return e},e.encryptAESCBC=function(t,i){var n=i.slice(0);ii.ExpandKey(n);for(var a=e.string2bytes(t),o=(a=e.pad16(a),e.blockIV()),r=0;r<a.length/16;r++){var s=a.slice(16*r,16*r+16),l=o.slice(16*r,16*r+16);s=e.blockXOR(l,s);ii.Encrypt(s,n),o=o.concat(s)}return n=e.bytes2string(o),e.b256to64(n)},e.decryptAESCBC=function(t,i){var n=i.slice(0);ii.ExpandKey(n);t=e.b64to256(t);for(var a=e.string2bytes(t),o=[],r=1;r<a.length/16;r++){var s=a.slice(16*r,16*r+16),l=a.slice(16*(r-1),16*(r-1)+16);ii.Decrypt(s,n),s=e.blockXOR(l,s),o=o.concat(s)}return o=e.depad(o),e.bytes2string(o)},e.wrap60=function(e){for(var t="",i=0;i<e.length;i++)i%60==0&&0!=i&&(t+="\n"),t+=e[i];return t},e.generateAESKey=function(){var e=Array(16);return(new Pt).nextBytes(e),e},e.generateRSAKey=function(e,t){Math.seedrandom(kt.hex(e));var i=new Bt;return i.generate(t,"10001"),i},e.publicKeyString=function(e){return pubkey=e.n.toString(16)},e.publicKeyID=function(e){return Dt(e)},e.publicKeyFromString=function(e){e=e.split("|")[0];var t=new Bt;return t.setPublic(e,"10001"),t},e.encrypt=function(t,i,n){var a="";try{var o=e.publicKeyFromString(i);a+=o.encrypt(t)+"?"}catch(t){return{status:"Invalid public key"}}return{status:"success",cipher:a}},e.decrypt=function(e,t){var i=e.split("?"),n=t.decrypt(i[0]);return{status:"success",plaintext:n,signature:"unsigned"}},e}();e.exports=ni},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=n||function(e,t){var i={},n=i.lib={},a=function(){},o=n.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=o.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var a=0;a<e;a++)t[n+a>>>2]|=(i[a>>>2]>>>24-a%4*8&255)<<24-(n+a)%4*8;else if(65535<i.length)for(a=0;a<e;a+=4)t[n+a>>>2]=i[a>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new r.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(i,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(i,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(i){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,a=i.sigBytes,o=this.blockSize,s=a/(4*o);s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,a=e.min(4*t,a),t){for(var l=0;l<t;l+=o)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=a}return new r.init(l,a)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);(function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var a=0;a<i;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,r=0;4>r&&a+.75*r<i;r++)e.push(n.charAt(o>>>6*(3-r)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var i=e.length,n=this._map,a=n.charAt(64);a&&(a=e.indexOf(a),-1!=a&&(i=a));a=[];for(var o=0,r=0;r<i;r++)if(r%4){var s=n.indexOf(e.charAt(r-1))<<r%4*2,l=n.indexOf(e.charAt(r))>>>6-r%4*2;a[o>>>2]|=(s|l)<<24-o%4*8,o++}return t.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(e){function t(e,t,i,n,a,o,r){return e=e+(t&i|~t&n)+a+r,(e<<o|e>>>32-o)+t}function i(e,t,i,n,a,o,r){return e=e+(t&n|i&~n)+a+r,(e<<o|e>>>32-o)+t}function a(e,t,i,n,a,o,r){return e=e+(t^i^n)+a+r,(e<<o|e>>>32-o)+t}function o(e,t,i,n,a,o,r){return e=e+(i^(t|~n))+a+r,(e<<o|e>>>32-o)+t}for(var r=n,s=r.lib,l=s.WordArray,d=s.Hasher,c=(s=r.algo,[]),u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;s=s.MD5=d.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var r=0;16>r;r++){var s=n+r,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}r=this._hash.words,s=e[n+0],l=e[n+1];var d=e[n+2],u=e[n+3],h=e[n+4],x=e[n+5],f=e[n+6],p=e[n+7],m=e[n+8],_=e[n+9],g=e[n+10],v=e[n+11],y=e[n+12],b=e[n+13],S=e[n+14],C=e[n+15],w=r[0],T=r[1],P=r[2],E=r[3];w=t(w,T,P,E,s,7,c[0]),E=t(E,w,T,P,l,12,c[1]),P=t(P,E,w,T,d,17,c[2]),T=t(T,P,E,w,u,22,c[3]),w=t(w,T,P,E,h,7,c[4]),E=t(E,w,T,P,x,12,c[5]),P=t(P,E,w,T,f,17,c[6]),T=t(T,P,E,w,p,22,c[7]),w=t(w,T,P,E,m,7,c[8]),E=t(E,w,T,P,_,12,c[9]),P=t(P,E,w,T,g,17,c[10]),T=t(T,P,E,w,v,22,c[11]),w=t(w,T,P,E,y,7,c[12]),E=t(E,w,T,P,b,12,c[13]),P=t(P,E,w,T,S,17,c[14]),T=t(T,P,E,w,C,22,c[15]),w=i(w,T,P,E,l,5,c[16]),E=i(E,w,T,P,f,9,c[17]),P=i(P,E,w,T,v,14,c[18]),T=i(T,P,E,w,s,20,c[19]),w=i(w,T,P,E,x,5,c[20]),E=i(E,w,T,P,g,9,c[21]),P=i(P,E,w,T,C,14,c[22]),T=i(T,P,E,w,h,20,c[23]),w=i(w,T,P,E,_,5,c[24]),E=i(E,w,T,P,S,9,c[25]),P=i(P,E,w,T,u,14,c[26]),T=i(T,P,E,w,m,20,c[27]),w=i(w,T,P,E,b,5,c[28]),E=i(E,w,T,P,d,9,c[29]),P=i(P,E,w,T,p,14,c[30]),T=i(T,P,E,w,y,20,c[31]),w=a(w,T,P,E,x,4,c[32]),E=a(E,w,T,P,m,11,c[33]),P=a(P,E,w,T,v,16,c[34]),T=a(T,P,E,w,S,23,c[35]),w=a(w,T,P,E,l,4,c[36]),E=a(E,w,T,P,h,11,c[37]),P=a(P,E,w,T,p,16,c[38]),T=a(T,P,E,w,g,23,c[39]),w=a(w,T,P,E,b,4,c[40]),E=a(E,w,T,P,s,11,c[41]),P=a(P,E,w,T,u,16,c[42]),T=a(T,P,E,w,f,23,c[43]),w=a(w,T,P,E,_,4,c[44]),E=a(E,w,T,P,y,11,c[45]),P=a(P,E,w,T,C,16,c[46]),T=a(T,P,E,w,d,23,c[47]),w=o(w,T,P,E,s,6,c[48]),E=o(E,w,T,P,p,10,c[49]),P=o(P,E,w,T,S,15,c[50]),T=o(T,P,E,w,x,21,c[51]),w=o(w,T,P,E,y,6,c[52]),E=o(E,w,T,P,u,10,c[53]),P=o(P,E,w,T,g,15,c[54]),T=o(T,P,E,w,l,21,c[55]),w=o(w,T,P,E,m,6,c[56]),E=o(E,w,T,P,C,10,c[57]),P=o(P,E,w,T,f,15,c[58]),T=o(T,P,E,w,b,21,c[59]),w=o(w,T,P,E,h,6,c[60]),E=o(E,w,T,P,v,10,c[61]),P=o(P,E,w,T,d,15,c[62]),T=o(T,P,E,w,_,21,c[63]);r[0]=r[0]+w|0,r[1]=r[1]+T|0,r[2]=r[2]+P|0,r[3]=r[3]+E|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;i[a>>>5]|=128<<24-a%32;var o=e.floor(n/4294967296);for(i[15+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),t=this._hash,i=t.words,n=0;4>n;n++)a=i[n],i[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}}),r.MD5=d._createHelper(s),r.HmacMD5=d._createHmacHelper(s)}(Math),function(){var e=n,t=e.lib,i=t.Base,a=t.WordArray,o=(t=e.algo,t.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var i=this.cfg,n=i.hasher.create(),o=a.create(),r=o.words,s=i.keySize;for(i=i.iterations;r.length<s;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var d=1;d<i;d++)l=n.finalize(l),n.reset();o.concat(l)}return o.sigBytes=4*s,o}}));e.EvpKDF=function(e,t,i){return o.create(i).compute(e,t)}}(),n.lib.Cipher||function(e){var t=n,i=t.lib,a=i.Base,o=i.WordArray,r=i.BufferedBlockAlgorithm,s=t.enc.Base64,l=t.algo.EvpKDF,d=i.Cipher=r.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,n){return("string"==typeof i?p:f).encrypt(e,t,i,n)},decrypt:function(t,i,n){return("string"==typeof i?p:f).decrypt(e,t,i,n)}}}});i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=t.mode={},u=function(t,i,n){var a=this._iv;a?this._iv=e:a=this._prevBlock;for(var o=0;o<n;o++)t[i+o]^=a[o]},h=(i.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;u.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),h.Decryptor=h.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,a=e.slice(t,t+n);i.decryptBlock(e,t),u.call(this,e,t,n),this._prevBlock=a}}),c=c.CBC=h,h=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=(i=i-e.sigBytes%i,i<<24|i<<16|i<<8|i),a=[],r=0;r<i;r+=4)a.push(n);i=o.create(a,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:c,padding:h}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv;e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var x=i.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(c=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){e=s.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var i=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return x.create({ciphertext:e,salt:i})}},i.SerializableCipher=a.extend({cfg:a.extend({format:c}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var a=e.createEncryptor(i,n);return t=a.finalize(t),a=a.cfg,x.create({ciphertext:t,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(t=(t.kdf={}).OpenSSL={execute:function(e,t,i,n){return n||(n=o.random(8)),e=l.create({keySize:t+i}).compute(e,n),i=o.create(e.words.slice(t),4*i),e.sigBytes=4*t,x.create({key:e,iv:i,salt:n})}},i.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:t}),encrypt:function(e,t,i,n){return n=this.cfg.extend(n),i=n.kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,e=f.encrypt.call(this,e,t,i.key,n),e.mixIn(i),e},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,f.decrypt.call(this,e,t,i.key,n)}}))}(),function(){for(var e=n,t=e.lib.BlockCipher,i=e.algo,a=[],o=[],r=[],s=[],l=[],d=[],c=[],u=[],h=[],x=[],f=[],p=0;256>p;p++)f[p]=128>p?p<<1:p<<1^283;var m=0,_=0;for(p=0;256>p;p++){var g=_^_<<1^_<<2^_<<3^_<<4;g=g>>>8^255&g^99;a[m]=g,o[g]=m;var v=f[m],y=f[v],b=f[y],S=257*f[g]^16843008*g;r[m]=S<<24|S>>>8,s[m]=S<<16|S>>>16,l[m]=S<<8|S>>>24,d[m]=S,S=16843009*b^65537*y^257*v^16843008*m,c[g]=S<<24|S>>>8,u[g]=S<<16|S>>>16,h[g]=S<<8|S>>>24,x[g]=S,m?(m=v^f[f[f[b^v]]],_^=f[f[_]]):m=_=1}var C=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes/4,n=(e=4*((this._nRounds=i+6)+1),this._keySchedule=[]),o=0;o<e;o++)if(o<i)n[o]=t[o];else{var r=n[o-1];o%i?6<i&&4==o%i&&(r=a[r>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r]):(r=r<<8|r>>>24,r=a[r>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r],r^=C[o/i|0]<<24),n[o]=n[o-i]^r}for(t=this._invKeySchedule=[],i=0;i<e;i++)o=e-i,r=i%4?n[o]:n[o-4],t[i]=4>i||4>=o?r:c[a[r>>>24]]^u[a[r>>>16&255]]^h[a[r>>>8&255]]^x[a[255&r]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,l,d,a)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,c,u,h,x,o),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,a,o,r,s){for(var l=this._nRounds,d=e[t]^i[0],c=e[t+1]^i[1],u=e[t+2]^i[2],h=e[t+3]^i[3],x=4,f=1;f<l;f++){var p=n[d>>>24]^a[c>>>16&255]^o[u>>>8&255]^r[255&h]^i[x++],m=n[c>>>24]^a[u>>>16&255]^o[h>>>8&255]^r[255&d]^i[x++],_=n[u>>>24]^a[h>>>16&255]^o[d>>>8&255]^r[255&c]^i[x++];h=n[h>>>24]^a[d>>>16&255]^o[c>>>8&255]^r[255&u]^i[x++],d=p,c=m,u=_}p=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^i[x++],m=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^i[x++],_=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^i[x++],h=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^i[x++],e[t]=p,e[t+1]=m,e[t+2]=_,e[t+3]=h},keySize:8});e.AES=t._createHelper(i)}(),t["default"]=n},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){var e=function(){function e(){a(this,e)}return n(e,[{key:"createClientObject",value:function(e,t,i,n){return{socket:e,id:t,playURL:i,deviceSerial:n.deviceSerial||"",verificationCode:n.verificationCode||"",resolve:null,reject:null}}},{key:"playCmd",value:function(e){var t={sequence:0,cmd:"realplay",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL};return JSON.stringify(t)}},{key:"playbackCmd",value:function(e,t,i){var n={sequence:0,cmd:"playback",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL,startTime:t,endTime:i};return JSON.stringify(n)}}]),e}();return e}();t.LocalService=o},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.JSPlayCtrl=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(13),o=r(a);function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=0,d=1,c=2,u=11,h=16,x=31,f=35,p=36,m=48,_=60,g=61,v=63,y=100,b=101,S=0,C=1,w=0,T=1,P=0,E=1,k=15,R=8,I=1,D=50,M=5,A=2,B=5242880,L=20480,F=100,j=20,z=100,O=200,N={width:0,height:0,frameNum:0,yuvData:null},U={width:0,height:0,frameNum:0,yuvData:null},H={sampleRate:0,channel:0,bitsPerSample:0,length:0,pcmData:null},V={id:null,cmd:null,data:null,errorCode:0,status:null};t.JSPlayCtrl=function(){function e(t,i,n,a){if(s(this,e),null==t||void 0===t||"string"!==typeof t)return l;if(this.szBasePath=t,!i||"function"!==typeof i)return l;this.fnCallBack=i,"string"===typeof a&&(this.staticPath=a),this.decodeWorker=null,this.streamOpenMode=null,this.bOpenStream=!1,this.audioRenderer=null,this.aAudioBuffer=[],this.iAudioBufferSize=0,this.Volume=0,this.oSuperRender=null,this.aVideoFrameBuffer=[],this.YUVBufferSize=I,this.szOSDTime=null,this.bJSPrintLog=!1,this.bWriteYUVData=!1,this.iYUV10size=0,this.aVideoYUVBuffer=[],this.bWritePCMData=!1,this.iAudioBuffer500Size=0,this.aAudioPCMBuffer=[],this.bWriteRawData=!1,this.iRawDataSize=0,this.aRawDataBuffer=[],this.bWriteRTPData=!0,this.iRTPDataSize=0,this.aRTPDataBuffer=[],this.downloadRTP=!1,this.rtpNum=0,this.bPlaySound=!1,this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.audioNum=0,this.videoNum=0,this.FrameForwardLen=1,this.bOnlyPlaySound=!1,this.bVideoCropInfo=!1,this.dataCallBackFun=null,this.YUVBufSizeCBFun=null,this.DecCallBackFun=null,this.DisplayCallBackFun=null,this.PCMCallBackFun=null,this.DecInfoYUV=N,this.DisplayInfoYUV=U,this.DecInfoPCM=H,this.nWidth=0,this.nHeight=0,this.nSPSCropLeft=0,this.nSPSCropRight=0,this.nSPSCropTop=0,this.nSPSCropBottom=0,this.sCanvasId=null,this.aDisplayBuf=null,this.bVisibility=!0,this.nDecFrameType=P,this.runtimeInfoCBFun=null,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.bDisRect=!1,this.stYUVRect={top:0,left:0,right:0,bottom:0},this.aInputDataLens=[],this.aInputDataBuffer=[],this.bIsGetYUV=!1,this.bIsFirstFrame=!0,this.iInputMaxBufSize=B,this.bIsInput=!1,this.bIsInputBufOver=!1,this.bIsInputBufWillOver=!1,this.iInputDataLen=L;var r=this;this.errorCode=d,this.loopNum=0,this.setCallBack=function(e,t,i,a,o){var r=V;r.id=n,r.cmd=t,r.data=i,r.errorCode=a,r.status=o,e.fnCallBack(r)},this.convertErrorCode=function(e){switch(e){case 1:return d;case 98:return l;default:return e}},this.arrayBufferCopy=function(e){var t=e.byteLength,i=new Uint8Array(t),n=new Uint8Array(e),a=0;for(a=0;a<t;a++)i[a]=n[a];return i},this.inputDataFun=function(){var e,t,i=0;if(r.bIsGetYUV=!1,r.bIsInputBufOver||r.bIsInputBufWillOver){e=new Uint8Array(1),t=new Uint8Array(e);var n={command:"InputData",data:t.buffer,dataSize:0};r.decodeWorker.postMessage(n,[n.data])}else if(r.bPlay&&(!r.bPause||r.bOnebyOne)||this.bOnlyPlaySound){while(r.aInputDataLens.length>0)if(i+=r.aInputDataLens.shift(),i>r.iInputDataLen)break;e=r.aInputDataBuffer.splice(0,i),t=new Uint8Array(e);n={command:"InputData",data:t.buffer,dataSize:i};r.decodeWorker.postMessage(n,[n.data])}e=null,t=null},this.getPic=function(e,t){if(null==this.decodeWorker||null==this.oSuperRender)return c;if(!this.bPlay)return c;if(!e||"function"!==typeof e)return l;if(this.dataCallBackFun=e,0===this.iZoomNum)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{if(0===this.iCanvasWidth||0===this.iCanvasHeight)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{var i=this.nWidth/this.iCanvasWidth,n=this.nHeight/this.iCanvasHeight;this.stYUVRect.left=Math.round(this.stDisplayRect.left*i),this.stYUVRect.top=Math.round(this.stDisplayRect.top*n),this.stYUVRect.right=Math.round(this.stDisplayRect.right*i),this.stYUVRect.bottom=Math.round(this.stDisplayRect.bottom*n)}if(this.stYUVRect.right-this.stYUVRect.left<32||this.stYUVRect.bottom-this.stYUVRect.top<32)return l}if(null==this.aDisplayBuf)return c;var a=this.arrayBufferCopy(this.aDisplayBuf),o={command:t,data:a.buffer,width:this.nWidth,height:this.nHeight,rect:this.stYUVRect};return this.decodeWorker.postMessage(o,[o.data]),d},this.createWorker=function(e){if(window.Worker){if(null==this.decodeWorker){var t=new Blob([(0,o["default"])(this.staticPath)]),i=URL.createObjectURL(t);if(this.decodeWorker=new Worker(i),e.bJSPrintLog&&console.log(">>>JSPlayV1.1 createWorker success!"),null==this.decodeWorker)return _}this.decodeWorker.onmessage=function(t){var i=null,n=t.data;switch(n["function"]){case"printLog":console.log("print JSPlayerSDK log failed");break;case"loaded":i="loaded",e.setCallBack(e,"loaded",0,0,!0);break;case"SetStreamOpenMode":i="SetStreamOpenMode";break;case"OpenStream":if(i="OpenStream",1===n.errorCode)return void(r.bOpenStream=!0);break;case"InputData":i="InputData",n.errorCode===u&&(r.bIsInputBufOver=!0,console.log("yff inputBuffer over set key frame \n"),r.nDecFrameType!=E&&r.PlayM4_SetDecodeFrameType(E)),n.errorCode===p&&(r.bIsInputBufWillOver=!0),n.errorCode===x&&(r.bIsInputBufOver=!1,r.bIsInputBufWillOver=!1,r.aInputDataLens.length>0&&r.bIsInput?(r.inputDataFun(),r.bIsInput=!1):r.bIsGetYUV=!0);break;case"GetFrameData":if(i="GetFrameData",!r.bOnlyPlaySound){if(null!=n.data&&null!=n.frameInfo&&(n.frameInfo.width,n.frameInfo.height),!r.bPlay)return;if(r.errorCode=n.errorCode,!(r.bIsFirstFrame||n.errorCode!==x&&n.errorCode!==f)){n.errorCode===x&&(r.bIsInputBufOver=!1,r.bIsInputBufWillOver=!1),r.loopNum>5?(r.bIsGetYUV=!0,r.loopNum=0):(r.inputDataFun(),r.loopNum++);break}r.bIsInputBufOver||r.bIsInputBufWillOver?r.inputDataFun():"videoType"===n.type&&(r.aInputDataLens.length>0&&r.bIsInput?(r.inputDataFun(),r.bIsInput=!1):r.bIsGetYUV=!0,r.bIsFirstFrame=!1)}if(r.bVisibility&&d===n.errorCode)switch(n.type){case"videoType":if(null==n.data||null==n.frameInfo)return l;null!=r.DecCallBackFun&&(r.DecInfoYUV.height=n.frameInfo.height,r.DecInfoYUV.width=n.frameInfo.width,r.DecInfoYUV.frameNum=n.frameInfo.frameNum,r.DecInfoYUV.yuvData=new Uint8Array(n.data),r.DecCallBackFun(r.DecInfoYUV)),r.bIsFirstFrame=!1,e.nWidth=n.frameInfo.width,e.nHeight=n.frameInfo.height,e.nSPSCropLeft=n.frameInfo.cropLeft,e.nSPSCropRight=n.frameInfo.cropRight,e.nSPSCropTop=n.frameInfo.cropTop,e.nSPSCropBottom=n.frameInfo.cropBottom;var a=new Object;if(a.data=n.data,a.osdTime=n.osd,a.nWidth=n.frameInfo.width,a.nHeight=n.frameInfo.height,a.frameNum=n.frameInfo.frameNum,a.timeStamp=n.frameInfo.timeStamp,e.bWriteYUVData){for(var o=new Uint8Array(n.data),s=e.aVideoYUVBuffer.length,c=0,_=o.length;c<_;c++)e.aVideoYUVBuffer[s+c]=o[c];e.iYUV10size++,o=null}if(e.bWriteYUVData&&e.iYUV10size>=j){var g=new Uint8Array(e.aVideoYUVBuffer);e.downloadFile(g,"videoYUV.data"),e.aVideoYUVBuffer.splice(0,e.aVideoYUVBuffer.length),e.bWriteYUVData=!1,e.iYUV10size=0,g=null}e.aVideoFrameBuffer.push(a),a=null;var v=e.aVideoFrameBuffer.length;if(v>M&&(e.bOnebyOne||e.aVideoFrameBuffer.splice(0,A)),e.bOnebyOne&&e.aVideoFrameBuffer.length>=k){e.setCallBack(e,"OnebyOne",0,0,!1),e.bIsFirstFrame=!0;break}break;case"audioType":if(e.bPlaySound&&!e.bPlayRateChange||r.bOnlyPlaySound){null!=r.PCMCallBackFun&&(r.DecInfoPCM.sampleRate=n.frameInfo.samplesPerSec,r.DecInfoPCM.channel=n.frameInfo.channels,r.DecInfoPCM.bitsPerSample=n.frameInfo.bitsPerSample,r.DecInfoPCM.pcmData=new Uint8Array(n.data),r.DecInfoPCM.length=r.DecInfoPCM.pcmData.length,r.PCMCallBackFun(r.DecInfoPCM));for(o=new Uint8Array(n.data),s=e.aAudioBuffer.length,c=0,_=o.length;c<_;c++)e.aAudioBuffer[s+c]=o[c];if(e.iAudioBufferSize++,o=null,e.bWritePCMData){for(o=new Uint8Array(n.data),s=e.aAudioPCMBuffer.length,c=0,_=o.length;c<_;c++)e.aAudioPCMBuffer[s+c]=o[c];console.log("audio_type num:"+e.iAudioBuffer500Size+", len:"+o.length),e.iAudioBuffer500Size++,o=null}if(e.bWritePCMData&&e.iAudioBuffer500Size>=F){var S=new Uint8Array(e.aAudioPCMBuffer);e.downloadFile(S,"audioPCM.data"),e.aAudioPCMBuffer.splice(0,e.aAudioPCMBuffer.length),e.bWritePCMData=!1,e.iAudioBuffer500Size=0,S=null}e.iAudioBufferSize>=D&&(e.audioRenderer.Play(e.aAudioBuffer,e.aAudioBuffer.length,n.frameInfo),e.aAudioBuffer.splice(0,e.aAudioBuffer.length),e.aAudioBuffer.length=0,e.iAudioBufferSize=0)}break}break;case"GetRawData":if(i="GetRawData",e.bWriteRawData){var C=new Uint8Array(n.data),w=e.aRawDataBuffer.length;for(c=0,_=C.length;c<_;c++)e.aRawDataBuffer[w+c]=C[c];e.iRawDataSize++,C=null}if(e.bWriteRawData&&e.iRawDataSize>=z){var T=new Uint8Array(e.aRawDataBuffer);e.downloadFile(T,"rawBuffer.data"),e.aRawDataBuffer.splice(0,e.aRawDataBuffer.length),e.bWriteRawData=!1,e.iRawDataSize=0,T=null}break;case"PlaySound":i="PlaySound";break;case"GetJPEG":if(i="GetJPEG",n.errorCode!==d)return void console.log("GetJPEG ErrorParam");var P=n.data;e.dataCallBackFun(P);break;case"GetBMP":if(i="GetBMP",n.errorCode!==d)return void console.log("GetBMP ErrorParam");var R=n.data;e.dataCallBackFun(R);break;case"RunTimeInfoCallBack":i="RunTimeInfoCallBack";var I=n.nRunTimeModule,B=n.nStrVersion,L=n.nFrameTimeStamp,O=n.nFrameNum,N=n.nErrorCode;null!=e.runtimeInfoCBFun&&e.runtimeInfoCBFun(I,B,L,O,N)}"GetFrameData"!==i&&"loaded"!=i?e.setCallBack(e,i,0,e.convertErrorCode(n.errorCode),!0):h!==n.errorCode&&b!==n.errorCode&&y!==n.errorCode&&m!==n.errorCode||e.setCallBack(e,i,0,e.convertErrorCode(n.errorCode),!0)}}},this.createWorker(r),this.draw=function(){if(r.bPlay){if(!r.bPause||r.bOnebyOne){requestAnimationFrame(r.draw);var e=r.aVideoFrameBuffer.length;if(null!=r.YUVBufSizeCBFun&&r.YUVBufSizeCBFun(e),r.bOnebyOne){if(e<=R&&r.setCallBack(r,"OnebyOne",0,x,!0),e<=r.FrameForwardLen+1)return void r.setCallBack(r,"OnebyOne",0,x,!0);var t=r.FrameForwardLen;while(t>1)r.aVideoFrameBuffer.shift(),t--;r.bOnebyOne=!1}if(e>0){var i=r.aVideoFrameBuffer.shift();r.aDisplayBuf=i.data;var n=new Uint8Array(r.aDisplayBuf);r.bVideoCropInfo?r.oSuperRender.SR_DisplayFrameData(i.nWidth,i.nHeight,n,i.nWidth-r.nSPSCropLeft-r.nSPSCropRight,i.nHeight-r.nSPSCropTop-r.nSPSCropBottom):r.oSuperRender.SR_DisplayFrameData(i.nWidth,i.nHeight,n,i.nWidth,i.nHeight),null!=r.DisplayCallBackFun&&(r.DisplayInfoYUV.height=i.nHeight,r.DisplayInfoYUV.width=i.nWidth,r.DisplayInfoYUV.frameNum=i.frameNum,r.DisplayInfoYUV.yuvData=new Uint8Array(n),r.DisplayCallBackFun(r.DisplayInfoYUV)),n=null,r.szOSDTime=i.osdTime,i=null}else r.setCallBack(r,"Play",0,x,!0)}}else r.bPlay||(r.aVideoFrameBuffer.splice(0,r.aVideoFrameBuffer.length),r.aAudioBuffer.splice(0,r.aAudioBuffer.length))}}return n(e,[{key:"PlayM4_SetCurrentFrameNum",value:function(e,t){return h}},{key:"PlayM4_OpenPlayerSDKPrintLog",value:function(e){return!0===e?(this.bJSPrintLog=!0,this.decodeWorker.postMessage({command:"printLog",data:e})):(this.bJSPrintLog=!1,this.decodeWorker.postMessage({command:"printLog",data:e})),d}},{key:"PlayM4_DownloadYUVdata",value:function(){return this.bWriteYUVData=!0,d}},{key:"PlayM4_DownloadPCMdata",value:function(){return this.bWritePCMData=!0,d}},{key:"PlayM4_SetDecCallBack",value:function(e){return e&&"function"===typeof e?(this.DecCallBackFun=e,d):l}},{key:"PlayM4_SetDisplayCallBack",value:function(e){return e&&"function"===typeof e?(this.DisplayCallBackFun=e,d):l}},{key:"PlayM4_SetPCMCallBack",value:function(e){return e&&"function"===typeof e?(this.PCMCallBackFun=e,d):l}},{key:"PlayM4_SetStreamOpenMode",value:function(e){return null==e||void 0===e||e!==w&&e!==T?l:(this.streamOpenMode=e,d)}},{key:"PlayM4_DownloadRTPData",value:function(e){this.downloadRTP=e}},{key:"PlayM4_SetVideoCropInfo",value:function(e){return null==e||void 0===e||"boolean"!==typeof e?l:(this.bVideoCropInfo=e,d)}},{key:"PlayM4_OpenStream",value:function(e,t,i){if(this.bJSPrintLog&&console.log(">>>JS PlayM4_OpenStream nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()),null==this.decodeWorker)return c;if(this.downloadRTP){var n=new Uint8Array(e.buffer);this.DownloadRTPData(n),console.log("write 40 hik head")}return null==e||t<=0||i<=0?l:(this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bIsFirstFrame=!0,this.bIsGetYUV=!1,this.bIsInput=!1,this.decodeWorker.postMessage({command:"SetStreamOpenMode",data:this.streamOpenMode}),this.decodeWorker.postMessage({command:"OpenStream",data:e,dataSize:t,bufPoolSize:i}),this.bOpenStream=!0,d)}},{key:"PlayM4_CloseStream",value:function(){return null===this.decodeWorker||!1===this.bOpenStream?c:(this.bOnlyPlaySound=!1,this.PlayM4_Stop(),this.decodeWorker.postMessage({command:"CloseStream"}),null!==this.oSuperRender&&(this.oSuperRender.SR_Destroy(),this.oSuperRender=null),null!==this.audioRenderer&&(this.audioRenderer.Stop(),this.audioRenderer=null),this.aAudioBuffer.splice(0,this.aAudioBuffer.length),this.aVideoFrameBuffer.splice(0,this.aVideoFrameBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),this.aVideoYUVBuffer.splice(0,this.aVideoYUVBuffer.length),this.aAudioPCMBuffer.splice(0,this.aAudioPCMBuffer.length),this.aRawDataBuffer.splice(0,this.aRawDataBuffer.length),this.bOpenStream=!1,this.iAudioBufferSize=0,this.szOSDTime=null,d)}},{key:"PlayM4_Destroy",value:function(){return null===this.decodeWorker||(this.PlayM4_CloseStream(),this.decodeWorker.terminate(),this.decodeWorker=null),d}},{key:"PlayM4_InputData",value:function(e,t){var i=this.aInputDataBuffer.length;if(4===t){var n=new Uint8Array(e.buffer);if(1===n[0]&&2===n[1]&&3===n[2]&&4===n[3])return this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,n=null,d}if(i+t>this.iInputMaxBufSize)return console.log("input over"),this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,u;var a=null,o=t;switch(this.streamOpenMode){case T:a=new Uint8Array(e.buffer),this.downloadRTP&&(this.DownloadRTPData(a),this.rtpNum++,console.log("STREAM_FILE psNUm:"+this.rtpNum)),this.aInputDataLens.push(t);break;case w:o=t+4;var r=new Uint32Array([t]),s=new Uint8Array(r.buffer);a=new Uint8Array(o),a.set(s,0),a.set(e,4),this.downloadRTP&&(this.DownloadRTPData(a),this.rtpNum++,console.log("STREAM_REALTIME rtpNUm:"+this.rtpNum)),r=null,s=null,this.aInputDataLens.push(t+4);break;default:return h}for(var l=0;l<o;l++)this.aInputDataBuffer[i+l]=a[l];return!this.bPlay&&!this.bOnlyPlaySound||null===this.decodeWorker||!1===this.bOpenStream||(a=null,this.bOnlyPlaySound||this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0),d}},{key:"DownloadRTPData",value:function(e){if(this.bWriteRTPData){for(var t=new Uint8Array(e),i=this.aRTPDataBuffer.length,n=0,a=t.length;n<a;n++)this.aRTPDataBuffer[i+n]=t[n];this.iRTPDataSize++,t=null}if(this.bWriteRTPData&&this.iRTPDataSize>=O){console.log("download"+O+"RTPdata");var o=new Uint8Array(this.aRTPDataBuffer);this.downloadFile(o,"RTP.data"),this.aRTPDataBuffer.splice(0,this.aRTPDataBuffer.length),this.iRTPDataSize=0,this.rtpNum=0,this.downloadRTP=!1,o=null}}},{key:"PlayM4_Play",value:function(e){if(null===this.decodeWorker)return c;if(this.bJSPrintLog&&console.log(">>>JS PlayM4_Play canvasID: "+e),null===e)this.bOnlyPlaySound=!0,this.decodeWorker.postMessage({command:"OnlyPlaySound"}),this.sCanvasId=null;else{if("string"!==typeof e)return l;if(this.bOnebyOne&&(this.bPlayRateChange=!1,this.bOnebyOne=!1,this.bPause=!1,this.draw()),this.bPlay)return d;if(null==this.oSuperRender&&(this.oSuperRender=new SuperRender(e,this.szBasePath),null==this.oSuperRender))return g;this.sCanvasId=e,this.bPlay=!0,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.bOnlyPlaySound=!1,this.draw()}return null==this.audioRenderer&&(this.audioRenderer=new AudioRenderer,null==this.audioRenderer)?g:(this.decodeWorker.postMessage({command:"Play"}),d)}},{key:"PlayM4_Stop",value:function(){return null==this.decodeWorker||null==this.oSuperRender?c:this.bPlay?(this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0),this.bPlay=!1,this.bOnebyOne=!1,this.bPause=!1,this.oSuperRender.SR_SetDisplayRect(null),this.iZoomNum=0,this.bDisRect=!1,d):c}},{key:"PlayM4_PlayRate",value:function(e){return null==this.decodeWorker?c:(this.bPlayRateChange=1!==e,e<1&&(e=1),this.iInputDataLen=e*L,this.decodeWorker.postMessage({command:"PlayRate",playRate:e}),d)}},{key:"PlayM4_Pause",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?c:this.bPlay?this.bOnebyOne||this.bPause==e?c:"boolean"!==typeof e?l:(this.bPause=e,this.bIsFirstFrame=!0,e?this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0):(this.bPlaySound&&this.PlayM4_PlaySound(),this.draw()),d):c}},{key:"PlayM4_OneByOne",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?c:this.bPlay?e>10||e<=0?l:(e||(e=1),this.iInputDataLen=L,this.FrameForwardLen=e,this.bPause=!0,this.bOnebyOne=!0,this.bIsFirstFrame=!0,this.draw(),d):c}},{key:"PlayM4_PlaySound",value:function(e){return null===this.decodeWorker||!1===this.bOpenStream?c:e<0||e>16?l:null==this.audioRenderer&&(this.audioRenderer=new AudioRenderer,null==this.audioRenderer)?g:(this.decodeWorker.postMessage({command:"PlaySound"}),this.audioRenderer.SetWndNum(e),0!==this.Volume&&this.audioRenderer.SetVolume(this.Volume),this.audioRenderer.oAudioContext.resume(),this.bPlaySound=!0,d)}},{key:"PlayM4_StopSound",value:function(){return null==this.decodeWorker||null==this.audioRenderer?c:this.bPlaySound?(this.decodeWorker.postMessage({command:"StopSound"}),this.bPlaySound=!1,d):c}},{key:"PlayM4_SetDisplayBuf",value:function(e){return null==this.decodeWorker?c:e<=0?l:(this.YUVBufferSize=e,d)}},{key:"PlayM4_SetSecretKey",value:function(e,t,i){if(null==this.decodeWorker||!1===this.bOpenStream)return c;if(null==t)return l;if(C===e){if(128!==i)return l;if(null==t||void 0===t)return l}else if(S!==e)return l;return this.decodeWorker.postMessage({command:"SetSecretKey",data:t,nKeyType:e,nKeyLen:i}),d}},{key:"PlayM4_SetDecodeFrameType",value:function(e){return console.log("PlayM4_SetDecodeFrameType nFrameType:"+e),null==this.decodeWorker||null==this.oSuperRender?c:e!==P&&e!==E?l:(this.bJSPrintLog&&console.log(">>>JS PlayM4_SetDecodeFrameType :"+e),this.nDecFrameType=e,this.decodeWorker.postMessage({command:"SetDecodeFrameType",data:e}),d)}},{key:"PlayM4_SetIFrameDecInterval",value:function(e){return this.nDecFrameType!==E?c:e<0?l:(this.decodeWorker.postMessage({command:"SetIFrameDecInterval",data:e}),d)}},{key:"PlayM4_SetLostFrameMode",value:function(e){return e<0||e>1?l:(this.decodeWorker.postMessage({command:"SetLostFrameMode",data:e}),d)}},{key:"PlayM4_SetDisplayRegion",value:function(e,t){if(null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return c;if(null===this.canvasId)return c;if(!0===t){if(null===e||void 0===e)return l;if("number"!==typeof e.left||"number"!==typeof e.top||"number"!==typeof e.right||"number"!==typeof e.bottom)return l;if(e.right<0||e.left<0||e.top<0||e.bottom<0)return l;var i=e.left,n=e.right,a=e.top,o=e.bottom,r=document.getElementById(this.sCanvasId).getBoundingClientRect();if(this.iCanvasWidth=r.width,this.iCanvasHeight=r.height,n-i<16||o-a<16||n-i>this.iCanvasWidth||o-a>this.iCanvasHeight)return l;0!==this.iZoomNum&&(i=Math.round(i/this.iRatio_x)+this.stDisplayRect.left,a=Math.round(a/this.iRatio_y)+this.stDisplayRect.top,n=Math.round(n/this.iRatio_x)+this.stDisplayRect.left,o=Math.round(o/this.iRatio_y)+this.stDisplayRect.top),this.stDisplayRect={top:a,left:i,right:n,bottom:o},this.oSuperRender.SR_SetDisplayRect(this.stDisplayRect),this.bDisRect=!0;var s=n-i,u=o-a;this.iRatio_x=this.iCanvasWidth/s,this.iRatio_y=this.iCanvasHeight/u}else this.oSuperRender.SR_SetDisplayRect(null),this.iZoomNum=0,this.bDisRect=!1;return(this.bPause||this.bOnebyOne||this.bPlayRateChange)&&(this.bVideoCropInfo?this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,new Uint8Array(this.aDisplayBuf),this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom):this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,new Uint8Array(this.aDisplayBuf),this.nWidth,this.nHeight)),d}},{key:"PlayM4_GetBMP",value:function(e){return this.getPic(e,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function(e){return this.getPic(e,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function(e){return null==this.decodeWorker||null==this.audioRenderer?c:e<0||e>100||""===e?l:(this.Volume=e,this.audioRenderer.SetVolume(e),d)}},{key:"PlayM4_GetVolume",value:function(e){if(null==this.decodeWorker)return c;if(null==this.audioRenderer)return c;if(e&&"function"===typeof e){var t=this.audioRenderer.GetVolume();return null===t?v:(e(t),d)}return l}},{key:"PlayM4_GetOSDTime",value:function(e){return null==this.decodeWorker?c:this.bPlay?e&&"function"===typeof e?(e(this.szOSDTime),d):l:c}},{key:"PlayM4_IsVisible",value:function(e){return this.bVisibility=e,d}},{key:"PlayM4_GetSdkVersion",value:function(){return"07040005"}},{key:"PlayM4_GetBuildDate",value:function(){return"20230303"}},{key:"PlayM4_GetInputBufSize",value:function(){return this.aInputDataBuffer.length}},{key:"PlayM4_SetInputBufSize",value:function(e){return e>0?(this.iInputMaxBufSize=e,console.log(">>JSBufferSize SetInputBufSize:"+this.iInputMaxBufSize),d):l}},{key:"PlayM4_GetYUVBufSize",value:function(){return this.aVideoFrameBuffer.length}},{key:"PlayM4_GetFrameResolution",value:function(e){return null==this.decodeWorker?c:e&&"function"===typeof e?(e(this.nWidth,this.nHeight),d):l}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function(e){return e&&"function"===typeof e?(this.YUVBufSizeCBFun=e,d):l}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function(){return null!=this.YUVBufSizeCBFun&&(this.YUVBufSizeCBFun=null),d}},{key:"PlayM4_ClearCanvas",value:function(){return null==this.oSuperRender?c:(this.bVideoCropInfo?this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom):this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,null,this.nWidth,this.nHeight),d)}},{key:"PlayM4_ReleaseInputBuffer",value:function(){return null===this.aInputDataBuffer?c:(this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),d)}},{key:"PlayM4_GetDecodeFrameType",value:function(){return this.nDecFrameType}},{key:"PlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeInfoCBFun=t,this.decodeWorker.postMessage({command:"SetRunTimeInfoCB",nModuleType:e}),d}},{key:"PlayM4_SetDemuxModel",value:function(e,t){return this.decodeWorker.postMessage({command:"SetDemuxModel",nIdemuxType:e,bTrue:t}),d}},{key:"PlayM4_SkipErrorData",value:function(e){return this.decodeWorker.postMessage({command:"SkipErrorData",bSkip:e}),d}},{key:"PlayM4_SetDecodeERC",value:function(e){return this.decodeWorker.postMessage({command:"SetDecodeERC",nLevel:e}),d}},{key:"PlayM4_SetANRParam",value:function(e,t){return this.decodeWorker.postMessage({command:"SetANRParam",nEnable:e,nANRLevel:t}),d}},{key:"PlayM4_SetResampleValue",value:function(e,t){return this.decodeWorker.postMessage({command:"SetResampleValue",nEnable:e,resampleValue:t}),d}},{key:"PlayM4_SetGlobalBaseTime",value:function(e,t,i,n,a,o,r){return e<2e3||e>3e3||t<1||t>12||e<0||t<0||i<0||n<0||a<0||o<0||r<0?h:(this.decodeWorker.postMessage({command:"SetGlobalBaseTime",year:e,month:t,day:i,hour:n,min:a,sec:o,ms:r}),d)}},{key:"downloadFile",value:function(e,t){var i=e;e instanceof Blob||e instanceof File||(i=new Blob([e]));var n=window.URL.createObjectURL(i),a=window.document.createElement("a");a.href=n,a.download=t;var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),a.dispatchEvent(o)}}]),e}()},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://open.ys7.com/assets/ezuikit_v3.6";return"\n/**\n * Created by wangweijie5 on 2016/12/5.\n */\n(function (event) {\n    const AUDIO_TYPE = 0;\t// 音频\n    const VIDEO_TYPE = 1;   // 视频\n    const PRIVT_TYPE = 2;  // 私有帧\n\n    const PLAYM4_AUDIO_FRAME = 100; // 音频帧\n    const PLAYM4_VIDEO_FRAME = 101; // 视频帧\n\n    const PLAYM4_OK = 1;\n    const PLAYM4_ORDER_ERROR = 2;\n    const PLAYM4_DECODE_ERROR = 44 \t// 解码失败\n    const PLAYM4_NOT_KEYFRAME = 48; \t// 非关键帧\n    const PLAYM4_NEED_MORE_DATA = 31;   // 需要更多数据才能解析\n    const PLAYM4_NEED_NEET_LOOP = 35; //丢帧需要下个循环\n    const PLAYM4_SYS_NOT_SUPPORT = 16; \t// 不支持\n\n    importScripts('"+e+'/js/playctrl/Decoder.js\');\n    Module.addOnPostRun(function () {\n        postMessage({ \'function\': "loaded" });\n    });\n\n    var iStreamMode = 0;  // 流模式\n\n    var bOpenMode = false;\n    var bOpenStream = false;\n\n    var funGetFrameData = null;\n    var funGetAudFrameData = null;\n\n    var bWorkerPrintLog = false;//worker层log开关\n\n    var g_nPort = -1;\n\n    self.JSPlayM4_RunTimeInfoCallBack = function (nPort, pstRunTimeInfo, pUser) {\n        let port = nPort;\n        let user = pUser;\n        let nRunTimeModule = Module.HEAP32[pstRunTimeInfo >> 2];\n        let nStrVersion = Module.HEAP32[pstRunTimeInfo + 4 >> 2];\n        let nFrameTimeStamp = Module.HEAP32[pstRunTimeInfo + 8 >> 2];\n        let nFrameNum = Module.HEAP32[pstRunTimeInfo + 12 >> 2];\n        let nErrorCode = Module.HEAP32[pstRunTimeInfo + 16 >> 2];\n        // console.log("nRunTimeModule:"+nRunTimeModule+",nFrameNum:"+nFrameNum+",nErrorCode:"+nErrorCode);\n        postMessage({ \'function\': "RunTimeInfoCallBack", \'nRunTimeModule\': nRunTimeModule, \'nStrVersion\': nStrVersion, \'nFrameTimeStamp\': nFrameTimeStamp, \'nFrameNum\': nFrameNum, \'nErrorCode\': nErrorCode });\n    }\n\n    onmessage = function (event) {\n        var eventData = event.data;\n        var res = 0;\n        switch (eventData.command) {\n            case "printLog":\n                let downloadFlag = eventData.data;\n                if (downloadFlag === true) {\n                    bWorkerPrintLog = true;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n                else {\n                    bWorkerPrintLog = false;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n\n                if (res !== PLAYM4_OK) {\n                    console.log("DecodeWorker.js: PlayerSDK print log failed,res" + res);\n                    postMessage({ \'function\': "printLog", \'errorCode\': res });\n                }\n                break;\n            case "SetPlayPosition":\n                let nFrameNumOrTime = eventData.data;\n                let enPosType = eventData.type;\n                // res = Module._SetPlayPosition(nFrameNumOrTime,enPosType);\n                // if (res !== PLAYM4_OK)\n                // {\n                //     postMessage({\'function\': "SetPlayPosition", \'errorCode\': res});\n                //     return;\n                // }\n                // //有没有buffer需要清除\n\n                break;\n            case "SetStreamOpenMode":\n                //获取端口号\n                g_nPort = Module._GetPort();\n                //设置流打开模式\n                iStreamMode = eventData.data;\n                res = Module._SetStreamOpenMode(g_nPort, iStreamMode);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetStreamOpenMode", \'errorCode\': res });\n                    return;\n                }\n                bOpenMode = true;\n                break;\n\n            case "OpenStream":\n                // 接收到的数据\n                var iHeadLen = eventData.dataSize;\n                var pHead = Module._malloc(iHeadLen + 4);\n                if (pHead === null) {\n                    return;\n                }\n                var aHead = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n                aHead.set(eventData.data);\n                res = Module._OpenStream(g_nPort, pHead, iHeadLen, eventData.bufPoolSize);\n                postMessage({ \'function\': "OpenStream", \'errorCode\': res });\n                if (res !== PLAYM4_OK) {\n                    //释放内存\n                    Module._free(pHead);\n                    pHead = null;\n                    return;\n                }\n                bOpenStream = true;\n                break;\n            case "Play":\n                let resP = Module._Play(g_nPort);\n                if (resP !== PLAYM4_OK) {\n                    return;\n                }\n                break;\n            case "InputData":\n                // 接收到的数据\n                var iLen = eventData.dataSize;\n                if (iLen > 0) {\n                    var pInputData = Module._malloc(iLen);\n                    if (pInputData === null) {\n                        return;\n                    }\n                    var inputData = new Uint8Array(eventData.data);\n                    // var aInputData = Module.HEAPU8.subarray(pInputData, pInputData + iLen);\n                    // aInputData.set(inputData);\n                    Module.writeArrayToMemory(inputData, pInputData);\n                    inputData = null;\n                    res = Module._InputData(g_nPort, pInputData, iLen);\n                    if (res !== PLAYM4_OK) {\n                        let errorCode = Module._GetLastError(g_nPort);\n                        let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                        postMessage({ \'function\': "InputData", \'errorCode\': errorCode, "sourceRemain": sourceRemain });\n                    }\n                    Module._free(pInputData);\n                    pInputData = null;\n                } else {\n                    let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                    if (sourceRemain == 0) {\n                        // console.log("C buffer and JS buffer size is both 0");\n                        postMessage({ \'function\': "InputData", \'errorCode\': PLAYM4_NEED_MORE_DATA });\n                        return;\n                    }\n                }\n\n                /////////////////////\n                if (funGetFrameData === null) {\n                    funGetFrameData = Module.cwrap(\'GetFrameData\', \'number\');\n                }\n\n                while (bOpenMode && bOpenStream) {\n\n                    var ret = getFrameData(funGetFrameData);\n                    // 直到获取视频帧或数据不足为止\n                    if (PLAYM4_VIDEO_FRAME === ret || PLAYM4_NEED_MORE_DATA === ret || PLAYM4_ORDER_ERROR === ret || PLAYM4_NEED_NEET_LOOP === ret)//PLAYM4_VIDEO_FRAME === ret ||\n                    {\n                        break;\n                    }\n                }\n                break;\n\n            case "SetSecretKey":\n                var keyLen = eventData.nKeyLen;\n                var pKeyData = Module._malloc(keyLen);\n                if (pKeyData === null) {\n                    return;\n                }\n                var nKeySize = eventData.data.length\n                var bufData = stringToBytes(eventData.data);\n                var aKeyData = Module.HEAPU8.subarray(pKeyData, pKeyData + keyLen);\n                let u8array = new Uint8Array(keyLen);\n                aKeyData.set(u8array, 0);\n                aKeyData.set(new Uint8Array(bufData));\n                aKeyData = null;\n                u8array = null;\n\n                res = Module._SetSecretKey(g_nPort, eventData.nKeyType, pKeyData, keyLen);//, nKeySize\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetSecretKey", \'errorCode\': res });\n                    Module._free(pKeyData);\n                    pKeyData = null;\n                    return;\n                }\n\n                Module._free(pKeyData);\n                pKeyData = null;\n                break;\n\n            case "GetBMP":\n                var nBMPWidth = eventData.width;\n                var nBMPHeight = eventData.height;\n                var pYUVData = eventData.data;\n                var nYUVSize = nBMPWidth * nBMPHeight * 3 / 2;\n                var oBMPCropRect = eventData.rect;\n\n                var pDataYUV = Module._malloc(nYUVSize);\n                if (pDataYUV === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData, 0, nYUVSize), pDataYUV);\n\n                // 分配BMP空间\n                var nBmpSize = nBMPWidth * nBMPHeight * 4 + 60;\n                var pBmpData = Module._malloc(nBmpSize);\n                var pBmpSize = Module._malloc(4);\n                if (pBmpData === null || pBmpSize === null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n\n                    if (pBmpData != null) {\n                        Module._free(pBmpData);\n                        pBmpData = null;\n                    }\n\n                    if (pBmpSize != null) {\n                        Module._free(pBmpSize);\n                        pBmpSize = null;\n                    }\n                    return;\n                }\n\n                //Module._memset(pBmpSize, nBmpSize, 4); // 防止bmp截图出现输入数据过大的错误码\n                Module.setValue(pBmpSize, nBmpSize, "i32");\n                res = Module._GetBMP(g_nPort, pDataYUV, nYUVSize, pBmpData, pBmpSize,\n                    oBMPCropRect.left, oBMPCropRect.top, oBMPCropRect.right, oBMPCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetBMP", \'errorCode\': res });\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                    return;\n                }\n\n                // 获取BMP图片大小\n                var nBmpDataSize = Module.getValue(pBmpSize, "i32");\n\n                // 获取BMP图片数据\n                var aBmpData = new Uint8Array(nBmpDataSize);\n                aBmpData.set(Module.HEAPU8.subarray(pBmpData, pBmpData + nBmpDataSize));\n\n                postMessage({ \'function\': "GetBMP", \'data\': aBmpData, \'errorCode\': res }, [aBmpData.buffer]);\n                aBmpData = null;\n                if (pDataYUV != null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                }\n                if (pBmpData != null) {\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                }\n                if (pBmpSize != null) {\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                }\n                break;\n\n            case "GetJPEG":\n                var nJpegWidth = eventData.width;\n                var nJpegHeight = eventData.height;\n                var pYUVData1 = eventData.data;\n                var nYUVSize1 = nJpegWidth * nJpegHeight * 3 / 2;\n                var oJpegCropRect = eventData.rect;\n\n                var pDataYUV1 = Module._malloc(nYUVSize1);\n                if (pDataYUV1 === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData1, 0, nYUVSize1), pDataYUV1);\n\n                // 分配JPEG空间\n                var pJpegData = Module._malloc(nYUVSize1);\n                var pJpegSize = Module._malloc(4);\n                if (pJpegData === null || pJpegSize === null) {\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                Module.setValue(pJpegSize, nJpegWidth * nJpegHeight * 2, "i32");    // JPEG抓图，输入缓冲长度不小于当前帧YUV大小\n\n                res = Module._GetJPEG(g_nPort, pDataYUV1, nYUVSize1, pJpegData, pJpegSize,\n                    oJpegCropRect.left, oJpegCropRect.top, oJpegCropRect.right, oJpegCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetJPEG", \'errorCode\': res });\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                // 获取JPEG图片大小\n                var nJpegSize = Module.getValue(pJpegSize, "i32");\n\n                // 获取JPEG图片数据\n                var aJpegData = new Uint8Array(nJpegSize);\n                aJpegData.set(Module.HEAPU8.subarray(pJpegData, pJpegData + nJpegSize));\n\n                postMessage({ \'function\': "GetJPEG", \'data\': aJpegData, \'errorCode\': res }, [aJpegData.buffer]);\n\n                nJpegSize = null;\n                aJpegData = null;\n\n                if (pDataYUV1 != null) {\n                    Module._free(pDataYUV1);\n                    pDataYUV1 = null;\n                }\n                if (pJpegData != null) {\n                    Module._free(pJpegData);\n                    pJpegData = null;\n                }\n                if (pJpegSize != null) {\n                    Module._free(pJpegSize);\n                    pJpegSize = null;\n                }\n                break;\n\n            case "SetDecodeFrameType":\n                var nFrameType = eventData.data;\n                res = Module._SetDecodeFrameType(g_nPort, nFrameType);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetDecodeFrameType", \'errorCode\': res });\n                    return;\n                }\n                break;\n            case "CloseStream":\n                //stop\n                let resS = Module._Stop(g_nPort);\n                if (resS !== PLAYM4_OK) {\n                    postMessage({ \'function\': "Stop", \'errorCode\': res });\n                    return;\n                }\n                //closeStream\n                res = Module._CloseStream(g_nPort);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "CloseStream", \'errorCode\': res });\n                    return;\n                }\n                //freePort\n                let resF = Module._FreePort(g_nPort);\n                if (resF !== PLAYM4_OK) {\n                    postMessage({ \'function\': "FreePort", \'errorCode\': res });\n                    return;\n                }\n                break;\n            case "PlaySound":\n                let resPS = Module._PlaySound(g_nPort);\n                if (resPS !== PLAYM4_OK) {\n                    console.log("PlaySound failed");\n                    return;\n                }\n                break;\n            case "StopSound":\n                let resSS = Module._StopSound();\n                if (resSS !== PLAYM4_OK) {\n                    console.log("StopSound failed");\n                    return;\n                }\n                break;\n            case "SetVolume":\n                let resSV = Module._SetVolume(g_nPort, eventData.volume);\n                if (resSV !== PLAYM4_OK) {\n                    console.log("Audio SetVolume failed");\n                    return;\n                }\n                break;\n            case "GetVolume":\n                let volume = Module._GetVolume();\n                if (volume > 0) {\n                    postMessage({ \'function\': "GetVolume", \'volume\': volume });\n                }\n                else {\n                    console.log("Audio GetVolume failed");\n                    return;\n                }\n                break;\n            case "OnlyPlaySound":\n                let resOPS = Module._OnlyPlaySound(g_nPort);\n                if (resOPS !== PLAYM4_OK) {\n                    console.log("OnlyPlaySound failed");\n                    return;\n                }\n                break;\n            case "Pause":\n                let resPa = Module._Pause(g_nPort, eventData.bPlay);\n                if (resPa !== PLAYM4_OK) {\n                    console.log("Pause failed");\n                    return;\n                }\n            case "PlayRate":\n                Module._SetPlayRate(g_nPort, eventData.playRate);\n                break;\n            case "SetIFrameDecInterval":\n                Module._SetIFrameDecInterval(g_nPort, eventData.data);\n                break;\n            case "SetLostFrameMode":\n                Module._SetLostFrameMode(g_nPort, eventData.data);\n                break;\n            case "SetDemuxModel":\n                Module._SetDemuxModel(g_nPort, eventData.nIdemuxType, eventData.bTrue);\n                break;\n            case "SkipErrorData":\n                Module._SkipErrorData(g_nPort, eventData.bSkip);\n                break;\n            case "SetDecodeERC":\n                Module._SetDecodeERC(g_nPort, eventData.nLevel);\n                break;\n            case "SetANRParam":\n                Module._SetANRParam(g_nPort, eventData.nEnable, eventData.nANRLevel);\n                break;\n            case "SetResampleValue":\n                Module._SetResampleValue(g_nPort, eventData.nEnable, eventData.resampleValue);\n                break;\n            case "GetLastError":\n                let errorCode = Module._GetLastError(g_nPort);\n                postMessage({ \'function\': "GetLastError", \'errorCode\': errorCode });\n                break;\n            case "SetGlobalBaseTime":\n                Module._SetGlobalBaseTime(g_nPort, eventData.year, eventData.month, eventData.day, eventData.hour, eventData.min, eventData.sec, eventData.ms);\n                break;\n            case "SetRunTimeInfoCB":\n                Module._SetRunTimeInfoCallBackEx(g_nPort, eventData.nModuleType, 0);\n                break;\n            default:\n                break;\n        }\n    };\n\n    function getOSDTime(oFrameInfo) {\n        var iYear = oFrameInfo.year;\n        var iMonth = oFrameInfo.month;\n        var iDay = oFrameInfo.day;\n        var iHour = oFrameInfo.hour;\n        var iMinute = oFrameInfo.minute;\n        var iSecond = oFrameInfo.second;\n\n        if (iMonth < 10) {\n            iMonth = "0" + iMonth;\n        }\n        if (iDay < 10) {\n            iDay = "0" + iDay;\n        }\n        if (iHour < 10) {\n            iHour = "0" + iHour;\n        }\n        if (iMinute < 10) {\n            iMinute = "0" + iMinute;\n        }\n        if (iSecond < 10) {\n            iSecond = "0" + iSecond;\n        }\n\n        return iYear + "-" + iMonth + "-" + iDay + " " + iHour + ":" + iMinute + ":" + iSecond;\n    }\n    // 获取帧数据\n    function getFrameData(fun) {\n        // function getFrameData() {\n        // 获取帧数据\n        // var res = Module._GetFrameData();\n        var res = fun();\n        if (res === PLAYM4_OK) {\n            var oFrameInfo = Module._GetFrameInfo();\n            switch (oFrameInfo.frameType) {\n                case AUDIO_TYPE:\n                    var iSize = oFrameInfo.frameSize;\n                    if (0 === iSize) {\n                        return -1;\n                    }\n                    var pPCM = Module._GetFrameBuffer();\n                    // var audioBuf = new ArrayBuffer(iSize);\n                    var aPCMData = new Uint8Array(iSize);\n                    aPCMData.set(Module.HEAPU8.subarray(pPCM, pPCM + iSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: audio media Info: nSise:" + oFrameInfo.frameSize + ",nSampleRate:" + oFrameInfo.samplesPerSec + \',channel:\' + oFrameInfo.channels + \',bitsPerSample:\' + oFrameInfo.bitsPerSample);\n                    }\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "audioType", \'data\': aPCMData.buffer,\n                        \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aPCMData.buffer]);\n\n                    oFrameInfo = null;\n                    pPCM = null;\n                    aPCMData = null;\n                    return PLAYM4_AUDIO_FRAME;\n\n                case VIDEO_TYPE:\n                    var szOSDTime = getOSDTime(oFrameInfo);\n\n                    var iWidth = oFrameInfo.width;\n                    var iHeight = oFrameInfo.height;\n\n                    var iYUVSize = iWidth * iHeight * 3 / 2;\n                    if (0 === iYUVSize) {\n                        return -1;\n                    }\n\n                    var pYUV = Module._GetFrameBuffer();\n\n                    // 图像数据渲染后压回，若从主码流切到子码流，存在数组大小与图像大小不匹配现象\n                    var aYUVData = new Uint8Array(iYUVSize);\n                    aYUVData.set(Module.HEAPU8.subarray(pYUV, pYUV + iYUVSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: video media Info: Width:" + oFrameInfo.width + ",Height:" + oFrameInfo.height + ",timeStamp:" + oFrameInfo.timeStamp);\n                    }\n\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "videoType", \'data\': aYUVData.buffer,\n                        \'dataLen\': aYUVData.length, \'osd\': szOSDTime, \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aYUVData.buffer]);\n\n                    oFrameInfo = null;\n                    pYUV = null;\n                    aYUVData = null;\n                    return PLAYM4_VIDEO_FRAME;\n\n                case PRIVT_TYPE:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n\n                default:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n            }\n        }\n        else {\n            let errorCode = Module._GetLastError(g_nPort);\n            //解码失败返回裸数据\n            if (PLAYM4_DECODE_ERROR === errorCode) {\n                var rawInfo = Module._GetRawDataInfo();\n                var pRawData = Module._GetRawDataBuffer();\n                var aRawData = new Uint8Array(rawInfo.isize);\n                aRawData.set(Module.HEAPU8.subarray(pRawData, pRawData + rawInfo.isize));\n                postMessage({\n                    \'function\': "GetRawData", \'type\': "", \'data\': aRawData.buffer,\n                    \'rawDataLen\': rawInfo.isize, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n                rawInfo = null;\n                pRawData = null;\n                aRawData = null;\n            }\n            //需要更多数据\n            if (PLAYM4_NEED_MORE_DATA === errorCode || PLAYM4_SYS_NOT_SUPPORT === errorCode || PLAYM4_NEED_NEET_LOOP === errorCode) {\n                postMessage({\n                    \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                    \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n            }\n            return errorCode;\n        }\n    }\n\n    // 开始计算时间\n    function startTime() {\n        return new Date().getTime();\n    }\n\n    // 结束计算时间\n    function endTime() {\n        return new Date().getTime();\n    }\n\n    // 字母字符串转byte数组\n    function stringToBytes(str) {\n        var ch, st, re = [];\n        for (var i = 0; i < str.length; i++) {\n            ch = str.charCodeAt(i);  // get char\n            st = [];                 // set up "stack"\n            do {\n                st.push(ch & 0xFF);  // push byte to stack\n                ch = ch >> 8;          // shift value down by 1 byte\n            }\n            while (ch);\n            // add stack contents to result\n            // done because chars have "wrong" endianness\n            re = re.concat(st.reverse());\n        }\n        // return an array of bytes\n        return re;\n    }\n})();\n'};t["default"]=n},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StorageManager=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(2),o=i(0),r=i(15),s=l(r);function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c="Web/RecordFiles/",u="Web/PlaybackFiles/",h=1e3,x=1,f=3001;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.URL=window.URL||window.webkitURL;var p=function(){function e(t,i,n,a){d(this,e),this.szUUID=t,this.szFileName=i,this.iStreamType=n,this.szPath="",this.bStart=!1,this.aStreamList=[],this.options=a}return n(e,[{key:"init",value:function(){var e=this;0===this.iStreamType?this.szPath=c:1===this.iStreamType&&(this.szPath=u),this.szPath+=this.getDateDir();var t=e.szPath.split("/"),i=new Promise((function(i){window.requestFileSystem(window.TEMPORARY,e.options.iFileSize,(function(n){e.createDir(n.root,t,(function(){i()}))}),e.errorHandler)}));return i}},{key:"getDateDir",value:function(){return o.oTool.dateFormat(new Date,"yyyy-MM-dd")}},{key:"createDir",value:function(e,t,i){var n=this;t.length?e.getDirectory(t[0],{create:!0},(function(e){n.createDir(e,t.slice(1),i)}),n.errorHandler):i()}},{key:"errorHandler",value:function(){}},{key:"writeFileHeader",value:function(e){var t=this;window.requestFileSystem(window.TEMPORARY,t.options.iFileSize,(function(i){i.root.getFile(t.szPath+"/"+t.szFileName,{create:!0},(function(i){i.createWriter((function(i){i.onwriteend=function(){t.bStart=!0,t.writeFile(i)},i.onerror=function(){},i.seek(i.length);var n=new Blob([e]);i.write(n)}),t.errorHandler)}),t.errorHandler)}),t.errorHandler)}},{key:"writeFileContent",value:function(e){this.aStreamList.push(e)}},{key:"writeFile",value:function(e){var t=this;if(this.bStart)if(this.aStreamList.length>0){var i=this.aStreamList.shift();if(e.seek(e.length),e.length>=this.options.iFileSize)return void(this.options.cbEventHandler&&this.options.cbEventHandler(f,this.szUUID));var n=new Blob([i]);e.write(n)}else setTimeout((function(){t.writeFile(e)}),h)}},{key:"stopWriteFile",value:function(){var e=this;this.bStart=!1,this.aStreamList.length=0;var t=new Promise((function(t){window.requestFileSystem(window.TEMPORARY,e.options.iFileSize,(function(i){i.root.getFile(e.szPath+"/"+e.szFileName,{create:!1},(function(e){e.file((function(e){t(),o.oTool.downloadFile(e,e.name)}))}),e.errorHandler)}),e.errorHandler)}));return t}}]),e}(),m=function(){function e(t,i,n,a,o,r,s,l){d(this,e),this.szBasePath=t,this.szUUID=i,this.szFileName=n,this.aHeadBuf=new Uint8Array(a),this.iPackType=o,this.iStreamType=r,this.oWorker=null,this.oFileSystem=null,this.options=s,this.bHead=!0,this.staticPath=l}return n(e,[{key:"init",value:function(){var e=this,t=new Promise((function(t,i){e.initFileSystem().then((function(){e.initWorker().then((function(){t(e.szUUID)}),(function(e){i(e)}))}),(function(e){i(e)}))}));return t}},{key:"initFileSystem",value:function(){var e=this;this.oFileSystem=new p(this.szUUID,this.szFileName,this.iStreamType,this.options);var t=new Promise((function(t,i){e.oFileSystem.init().then((function(){t()}),(function(e){i(e)}))}));return t}},{key:"initWorker",value:function(){var e=this,t=new Promise((function(t){var i=new Blob([(0,s["default"])(e.staticPath)]),n=URL.createObjectURL(i);e.oWorker=new Worker(n),e.oWorker.onmessage=function(i){var n=i.data,a=e.iPackType;if(1===e.options.iPackage&&(a=12),"loaded"===n.type)e.oWorker.postMessage({type:"create",buf:e.aHeadBuf.buffer,len:40,packType:a},[e.aHeadBuf.buffer]);else if("created"===n.type)t();else if("outputData"===n.type){var o=new Uint8Array(n.buf);1===e.options.iPackage?e.bHead?(e.oFileSystem.writeFileHeader(o),e.bHead=!1):e.oFileSystem.writeFileContent(o):x===n.dType?e.oFileSystem.writeFileHeader(o):e.oFileSystem.writeFileContent(o)}}}));return t}},{key:"inputData",value:function(e){if(this.oWorker){var t=new Uint8Array(e);this.oWorker.postMessage({type:"inputData",buf:t.buffer,len:t.length},[t.buffer])}}},{key:"stopRecord",value:function(){var e=this,t=new Promise((function(t,i){e.oWorker?e.oWorker.postMessage({type:"release"}):i(),e.oFileSystem?e.oFileSystem.stopWriteFile().then((function(){e.bHead=!0,t()}),(function(){i()})):i()}));return t}}]),e}(),_=function(){var e=Symbol("STORAGELIST"),t=function(){function t(i,n,a){d(this,t),this.szBasePath=i,this[e]={},this.options={iFileSize:1073741824},Object.assign(this.options,n),"string"===typeof n.staticPath&&(this.staticPath=n.staticPath)}return n(t,[{key:"startRecord",value:function(t,i,n,o,r){var s=this,l=(0,a.v4)(),d=Object.assign({},this.options,r),c=new m(this.szBasePath,l,t,i,n,o,d,this.staticPath),u=new Promise((function(t,i){c.init().then((function(i){s[e][i]=c,t(i)}),(function(e){i(e)}))}));return u}},{key:"inputData",value:function(t,i){var n=this[e][t];n&&n.inputData(i)}},{key:"stopRecord",value:function(t){var i=this,n=new Promise((function(n,a){var o=i[e][t];o?o.stopRecord().then((function(){delete i[e][t],n()}),(function(){a()})):a()}));return n}}]),t}();return t}();t.StorageManager=_},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://open.ys7.com/assets/ezuikit_v3.6";return"(function() {\n    const RECORDRTP = 0;  //录制一份未经过转封装的码流原始数据，用于定位问题\n    self.Module = { memoryInitializerRequest: loadMemInitFile(), TOTAL_MEMORY: 128*1024*1024 };\n    importScripts('"+e+'/js/transform/SystemTransform.js\');\n\n    Module.postRun.push(function() {\n        postMessage({type: "loaded"});\n    });\n\n    onmessage = function (e) {\n        var data = e.data;\n\n        if ("create" === data.type) {\n            var iHeadLen = data.len;\n            var pHead = Module._malloc(iHeadLen);\n\n            var aData = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n            aData.set(new Uint8Array(data.buf));\n\n            var iTransType = data.packType;//目标格式 RTP->PS\n            if (RECORDRTP) {\n                postMessage({type: "created"});\n                postMessage({type: "outputData", buf: data.buf, dType: 1}, [data.buf]);\n            } else {\n                var iRet = Module._ST_Create(pHead, iHeadLen, iTransType);\n                if (iRet != 0) {\n                    console.log("_ST_Create failed!");\n                } else {\n                    Module._ST_Start();\n                    postMessage({type: "created"});\n                }\n            }\n\n        } else if ("inputData" === data.type) {\n            if (RECORDRTP) {\n                var aFileData = new Uint8Array(data.buf);  // 拷贝一份\n                var iBufferLen = aFileData.length;\n                var szBufferLen = iBufferLen.toString(16);\n                if (szBufferLen.length === 1) {\n                    szBufferLen = "000" + szBufferLen;\n                } else if (szBufferLen.length === 2) {\n                    szBufferLen = "00" + szBufferLen;\n                } else if (szBufferLen.length === 3) {\n                    szBufferLen = "0" + szBufferLen;\n                }\n                var aData = [0, 0, parseInt(szBufferLen.substring(0, 2), 16), parseInt(szBufferLen.substring(2, 4), 16)];\n                for(var iIndex = 0, iDataLength = aFileData.length; iIndex < iDataLength; iIndex++) {\n                    aData[iIndex + 4] = aFileData[iIndex]\n                }\n                var dataUint8 = new Uint8Array(aData);\n                postMessage({type: "outputData", buf: dataUint8.buffer, dType: 2}, [dataUint8.buffer]);\n            } else {\n                var iDataLen = data.len;\n                var pData = Module._malloc(iDataLen);\n\n                var aData = Module.HEAPU8.subarray(pData, pData + iDataLen);\n                aData.set(new Uint8Array(data.buf));\n\n                var iRet = Module._ST_InputData(0, pData, iDataLen);\n                if (iRet != 0) {\n                    //console.log("_ST_InputData failed!");// 一开始会有一些失败，但是不影响后面的文件存储\n                }\n\n                Module._free(pData);\n            }\n        } else if ("release" === data.type) {\n            Module._ST_Stop();\n            Module._ST_Release();\n\n            close();\n        }\n    };\n\n    function loadMemInitFile() {\n        var req = new XMLHttpRequest();\n        req.open(\'GET\', \''+e+"/js/transform/SystemTransform.js.mem');\n        req.responseType = 'arraybuffer';\n        req.send();\n\n        return req;\n    }\n})();"};t["default"]=n},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ESCanvas=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),r=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==o(t)&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+o(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){var e=null,t=Symbol("TRANS"),i=Symbol("CANVAS"),a=Symbol("CONTEXT"),o=Symbol("SHAPES"),s=Symbol("DRAWSTATUS"),u=Symbol("SHAPETYPE"),h=Symbol("MAXSHAPENUMSUPPORT"),x=Symbol("SHAPESTYLE"),f=Symbol("POLYGONDRAWING"),p=Symbol("CURRENTSHAPEINFO"),m=Symbol("DRAWSHAPEMULTIONETIME"),_=Symbol("EVENTCALLBACK");function g(){e[a].clearRect(0,0,e.m_iCanvasWidth,e.m_iCanvasHeight);for(var t=0,i=e[o].length;t<i;t++)e[o][t].draw()}function v(t){var i=e[o].length;i<e[h]&&e[o].push(t)}function y(){var n=!1,a={},r=0,l=0,d=0,c=0,x=0,y=0,b="draw",C=null;function T(){for(var t=-1,i=0,n=e[o].length;i<n;i++)if(e[o][i].m_bChoosed){t=i;break}return t}e[i][0].oncontextmenu=function(){return!1},e[i][0].onselectstart=function(){return!1},e[i].unbind(),e[i].bind("mousedown",(function(t){if(2===t.button)e[f]&&C&&C.m_aPoint.length>=C.m_iMinClosed&&(C.m_bClosed=!0,e[f]=!1,C.setPointInfo(C.m_aPoint),v(C),g(),n=!1,e[m]||(e[s]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(C.m_szType,"onDrawEnd",C.m_szId));else if(0===t.button){if(n){if(Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-l)>2&&(v(C),e[m]||(e[s]=!1)),e[_]){var a={startPos:[],endPos:[]};a.startPos=[r,l],a.endPos=[t.offsetX,t.offsetY],e[_]&&e[_](a),e.clearAllShape()}return C=null,void(n=!1)}if(r=t.offsetX,l=t.offsetY,b="draw",!e[f]){var d=T();if(-1!==d&&e[o][d].inArc(t.offsetX,t.offsetY,5)&&(b="stretch"),"stretch"!==b)for(var c=0,x=e[o].length;c<x;c++)e[o][c].inShape(t.offsetX,t.offsetY)&&2!==e[o][c].m_iEditType?(e[o][c].m_bChoosed=!0,e[o][c].getMouseDownPoints(t.offsetX,t.offsetY),b="drag",window.onDrawShapeEvent&&window.onDrawShapeEvent(e[o][c].m_szType,"onChoose",e[o][c].m_szId)):e[o][c].m_bChoosed=!1;e[i][0].style.cursor="drag"===b?"move":"default","draw"===b&&1===e[o].length&&1===e[o][0].m_iRedrawMode&&(e.deleteRepeatPolyonById(e[o][0].m_szId),e[s]=!0),e[s]&&!e[m]&&(b="draw")}if("draw"===b&&e[s]){if(e[h]<=e[o].length&&"Grid"!==e[u]&&"Point"!==e[u])return;"Rect"===e[u]?(C=new S,C.m_szTips=e[p].szTips||""):"Grid"===e[u]?0===e[o].length&&(C=new w,v(C)):"Polygon"===e[u]?(e[f]||(e[f]=!0,C=new P,C.m_szId=e[p].szId||"",C.m_szTips=e[p].szTips||"",C.m_iMinClosed=e[p].iMinClosed||3,C.m_iMaxPointNum=e[p].iMaxPointNum||11,C.m_iPolygonType=e[p].iPolygonType,C.m_szDrawColor=e[p].szDrawColor,C.m_szFillColor=e[p].szFillColor,C.m_iTranslucent=e[p].iTranslucent,C.m_iRedrawMode=e[p].iRedrawMode),1===C.m_iPolygonType&&(C.addPoint(r,l),C.m_aPoint.length===C.m_iMaxPointNum&&(C.m_bClosed=!0,e[f]=!1,v(C),g(),n=!1,e[m]||(e[s]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(C.m_szType,"onDrawEnd",C.m_szId)))):"Point"===e[u]&&(e.clearShapeByType("Point"),C=new E,C.m_szId=e[p].szId||"",C.m_szDrawColor=e[p].szDrawColor,C.setPointInfo([[r,l]]),v(C),g())}n=!0}})),e[i].bind("mouseenter",(function(t){a={isIn:!0,offsetX:t.offsetX,offsetY:t.offsetY},e[s]&&n&&("Rect"===e[u]?C.move([[r,l],[t.offsetX,t.offsetY]]):"Grid"===e[u]&&e[o][0].move(r,l,t.offsetX,t.offsetY))})),e[i].bind("mouseleave",(function(e){a={isIn:!1,offsetX:e.offsetX,offsetY:e.offsetY}})),e[i].bind("mousemove",(function(t){if(e[f])e[s]&&n&&("Polygon"===e[u]&&0===C.m_iPolygonType&&(C.m_bClosed=!0),g(),C.move(t.offsetX,t.offsetY,r,l));else{var i=T();i>-1?n&&("drag"===b?(e[o][i].drag(t.offsetX,t.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[o][i].m_szType,"onDrag",e[o][i].m_szId)):"stretch"===b&&(e[o][i].stretch(t.offsetX,t.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[o][i].m_szType,"onStretch",e[o][i].m_szId))):e[s]&&n&&a.isIn&&("Rect"===e[u]?C.move([[r,l],[t.offsetX,t.offsetY]]):"Grid"===e[u]&&e[o][0].move(r,l,t.offsetX,t.offsetY))}})),e[i].bind("mouseup",(function(t){if(e[i][0].style.cursor="default",null!==C&&"undefined"!==typeof C&&"draw"===b)if("Rect"===e[u]){if(Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-l)>2&&(v(C),e[m]||(e[s]=!1)),e[_]){var a={startPos:[],endPos:[]};a.startPos=[r,l],a.endPos=[t.offsetX,t.offsetY],e[_]&&e[_](a),e.clearAllShape()}C=null}else"Polygon"===e[u]&&0===C.m_iPolygonType&&e[f]&&Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-l)>2&&(v(C),e[f]=!1,e[m]||(e[s]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(C.m_szType,"onDrawEnd",C.m_szId));n=!!e[f],e[f]||g()})),e[i].bind("dblclick",(function(){e[s]&&"Grid"===e[u]&&(e[o][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",g())})),e[i].bind("touchstart",(function(i){var a=i.target.getBoundingClientRect();if(i.touches&&i.touches[0]){if(e[t]?(d=parseInt(i.touches[0].clientY-a.x)>0?parseInt(i.touches[0].clientY-a.x):0,c=parseInt(i.touches[0].clientX-a.y)>0?parseInt(i.touches[0].clientX-a.y):0):(d=parseInt(i.touches[0].clientX-a.x)>0?parseInt(i.touches[0].clientX-a.x):0,c=parseInt(i.touches[0].clientY-a.y)>0?parseInt(i.touches[0].clientY-a.y):0),b="draw",e[s]){if(e[h]<=e[o].length&&"Grid"!==e[u]&&"Point"!==e[u])return;"Rect"===e[u]?(C=new S,C.m_szTips=e[p].szTips||""):"Grid"===e[u]?0===e[o].length&&(C=new w,v(C)):"Polygon"===e[u]?(e[f]||(e[f]=!0,C=new P,C.m_szId=e[p].szId||"",C.m_szTips=e[p].szTips||"",C.m_iMinClosed=e[p].iMinClosed||3,C.m_iMaxPointNum=e[p].iMaxPointNum||11,C.m_iPolygonType=e[p].iPolygonType,C.m_szDrawColor=e[p].szDrawColor,C.m_szFillColor=e[p].szFillColor,C.m_iTranslucent=e[p].iTranslucent,C.m_iRedrawMode=e[p].iRedrawMode),1===C.m_iPolygonType&&(C.addPoint(d,c),C.m_aPoint.length===C.m_iMaxPointNum&&(C.m_bClosed=!0,e[f]=!1,v(C),g(),n=!1,e[m]||(e[s]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(C.m_szType,"onDrawEnd",C.m_szId)))):"Point"===e[u]&&(e.clearShapeByType("Point"),C=new E,C.m_szId=e[p].szId||"",C.m_szDrawColor=e[p].szDrawColor,C.setPointInfo([[d,c]]),v(C),g())}n=!0}})),e[i].bind("touchmove",(function(i){var a=i.target.getBoundingClientRect();if(i.touches&&i.touches[0])if(e[t]?(x=parseInt(i.touches[0].clientY-a.x)>0?parseInt(i.touches[0].clientY-a.x):0,y=parseInt(i.touches[0].clientX-a.y)>0?parseInt(i.touches[0].clientX-a.y):0):(x=parseInt(i.touches[0].clientX-a.x)>0?parseInt(i.touches[0].clientX-a.x):0,y=parseInt(i.touches[0].clientY-a.y)>0?parseInt(i.touches[0].clientY-a.y):0),e[f])e[s]&&n&&("Polygon"===e[u]&&0===C.m_iPolygonType&&(C.m_bClosed=!0),g(),C.move(i.touches[0].offsetX,i.touches[0].offsetY,d,c));else{var r=T();r>-1?n&&("drag"===b?(e[o][r].drag(x,y),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[o][r].m_szType,"onDrag",e[o][r].m_szId)):"stretch"===b&&(e[o][r].stretch(x,y),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[o][r].m_szType,"onStretch",e[o][r].m_szId))):e[s]&&n&&("Rect"===e[u]?e[t]?C.move([[2*d,2*(a.width-c)],[2*x,2*(a.width-y)]]):C.move([[2*d,2*c],[2*x,2*y]]):"Grid"===e[u]&&e[o][0].move(d,c,x,y))}})),e[i].bind("touchend",(function(t){if(console.log("起始点坐标：",d,c),console.log("结束点坐标：",x,y),d!=x||c!=y){if(e[i][0].style.cursor="default",null!==C&&"undefined"!==typeof C&&"draw"===b)if("Rect"===e[u]){if(Math.abs(x-d)>2&&Math.abs(y-c)>2&&(v(C),e[m]||(e[s]=!1)),e[_]&&Math.abs(x-d)>15&&Math.abs(y-c)>15){var a={startPos:[],endPos:[]};a.startPos=[d,c],a.endPos=[x,y],e[_]&&e[_](a)}e.clearAllShape(),C=null}else"Polygon"===e[u]&&0===C.m_iPolygonType&&e[f]&&Math.abs(x-d)>2&&Math.abs(y-c)>2&&(v(C),e[f]=!1,e[m]||(e[s]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(C.m_szType,"onDrawEnd",C.m_szId));n=!!e[f],e[f]||g()}}))}var b=function(){function t(){c(this,t),this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=e[x].szDrawColor,this.m_szFillColor=e[x].szFillColor,this.m_iTranslucent=e[x].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}return n(t,[{key:"draw",value:function(){}},{key:"drag",value:function(t,i){if(2!==this.m_iEditType){var n=this.m_aPoint.length,a=0;for(a=0;a<n;a++)if(this.m_aPoint[a][0]+t-this.m_iDriftStartX>e.m_iCanvasWidth||this.m_aPoint[a][1]+i-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][0]+t-this.m_iDriftStartX<0||this.m_aPoint[a][1]+i-this.m_iDriftStartY<0)return this.m_iDriftStartX=t,void(this.m_iDriftStartY=i);for(a=0;a<n;a++)this.m_aPoint[a][0]=this.m_aPoint[a][0]+t-this.m_iDriftStartX,this.m_aPoint[a][1]=this.m_aPoint[a][1]+i-this.m_iDriftStartY;this.m_iDriftStartX=t,this.m_iDriftStartY=i,this.setPointInfo(this.m_aPoint),g()}}},{key:"stretch",value:function(e,t){0===this.m_iEditType&&(-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t),this.setPointInfo(this.m_aPoint),g())}},{key:"inShape",value:function(e,t){for(var i=!1,n=this.m_aPoint.length,a=0,o=n-1;a<n;o=a++)this.m_aPoint[a][1]>t!==this.m_aPoint[o][1]>t&&e<(this.m_aPoint[o][0]-this.m_aPoint[a][0])*(t-this.m_aPoint[a][1])/(this.m_aPoint[o][1]-this.m_aPoint[a][1])+this.m_aPoint[a][0]&&(i=!i);return i}},{key:"inArc",value:function(e,t,i){for(var n=!1,a=0,o=this.m_aPoint.length;a<o;a++){var r=Math.sqrt((e-this.m_aPoint[a][0])*(e-this.m_aPoint[a][0])+(t-this.m_aPoint[a][1])*(t-this.m_aPoint[a][1]));if(r<i){n=!0,this.m_iIndexChoosePoint=a;break}}return n}},{key:"getMouseDownPoints",value:function(e,t){this.m_iDriftStartX=e,this.m_iDriftStartY=t}},{key:"getPointInfo",value:function(){return this.m_aPoint}},{key:"setPointInfo",value:function(e){null!==e&&"undefined"!==typeof e&&e.length>0&&(this.m_aPoint=e,this.setEdgePoints(e))}},{key:"addPoint",value:function(e,t){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([e,t]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)}},{key:"setEdgePoints",value:function(e){for(var t=0,i=e.length;t<i;t++)0===t?(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1],this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1],this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1],this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]):(e[t][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1]),e[t][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1]),e[t][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]),e[t][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1]))}}]),t}(),S=function(t){function i(){c(this,i);var e=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.m_szType="Rect",e}return d(i,t),n(i,[{key:"setPointInfo",value:function(e){if(null!==e&&"undefined"!==typeof e){for(var t=e[0][0],i=e[0][1],n=e[0][0],a=e[0][1],o=0,r=e.length;o<r;o++)t>e[o][0]&&(t=e[o][0]),i>e[o][1]&&(i=e[o][1]),n<e[o][0]&&(n=e[o][0]),a<e[o][1]&&(a=e[o][1]);this.m_aPoint=[[t,i],[n,i],[n,a],[t,a]]}}},{key:"draw",value:function(){e[a].fillStyle=this.m_szFillColor,e[a].strokeStyle=this.m_szDrawColor;var t=this.m_aPoint[0][0],i=this.m_aPoint[0][1],n=this.m_aPoint[2][0]-t,o=this.m_aPoint[2][1]-i;if(e[a].globalAlpha=this.m_iTranslucent,e[a].fillRect(t,i,n,o),e[a].globalAlpha=1,e[a].fillText(this.m_szTips,(t+this.m_aPoint[2][0])/2,(i+this.m_aPoint[2][1])/2),this.m_bChoosed){var r=Math.round(n/2),s=Math.round(o/2);if(0===this.m_iEditType)for(var l=[t,t+r,t+n,t,t+n,t,t+r,t+n],d=[i,i,i,i+s,i+s,i+o,i+o,i+o],c=0;c<8;c++)e[a].beginPath(),e[a].arc(l[c],d[c],3,0,360,!1),e[a].fillStyle=this.m_szDrawColor,e[a].closePath(),e[a].fill()}e[a].strokeRect(t,i,n,o)}},{key:"stretch",value:function(e,t){0===this.m_iEditType&&(0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?t<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=t,this.m_aPoint[1][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):3===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=e,this.m_aPoint[3][0]=e):4===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=e,this.m_aPoint[2][0]=e):5===this.m_iIndexChoosePoint?e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t):6===this.m_iIndexChoosePoint?t>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=t,this.m_aPoint[3][1]=t):7===this.m_iIndexChoosePoint&&e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t),g())}},{key:"move",value:function(e){g(),this.m_bChoosed=!0;var t=e[0][0],i=e[0][1],n=e[1][0],a=e[1][1];this.setPointInfo([[t,i],[n,i],[n,a],[t,a]]),this.draw()}},{key:"inArc",value:function(e,t,i){for(var n=this.m_aPoint[0][0],a=this.m_aPoint[0][1],o=this.m_aPoint[2][0]-n,r=this.m_aPoint[2][1]-a,s=Math.round(o/2),l=Math.round(r/2),d=[n,n+s,n+o,n,n+o,n,n+s,n+o],c=[a,a,a,a+l,a+l,a+r,a+r,a+r],u=0;u<8;u++){var h=Math.sqrt((e-d[u])*(e-d[u])+(t-c[u])*(t-c[u]));if(h<i)return this.m_iIndexChoosePoint=u,!0}return!1}}]),i}(b),C=function(t){function i(e,t){c(this,i);var n=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n.m_szType="RectOSD",n.m_szOSDType="overlay-date",n.m_szText=e||"",n.m_szEnabled=t||"",n.m_szDateStyle="",n.m_szClockType="",n.m_szDisplayWeek="",n.m_szId="",n.m_szAlignment="0",n}return d(i,t),n(i,[{key:"draw",value:function(){if("true"===this.m_szEnabled){var t=this.m_aPoint[0][0],i=this.m_aPoint[0][1],n=this.m_aPoint[2][0]-t,o=this.m_aPoint[2][1]-i;e[a].beginPath(),e[a].strokeStyle=this.m_szDrawColor,e[a].globalAlpha=1,e[a].rect(t,i,n,o),e[a].font="15px serif",e[a].strokeText(this.m_szText,t,i+15),e[a].stroke()}}},{key:"drag",value:function(t,i){var n=this.m_aPoint.length,a=0;if("0"===this.m_szAlignment){for(a=0;a<n;a++)if(this.m_aPoint[a][1]+i-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][0]+t-this.m_iDriftStartX<0||this.m_aPoint[a][1]+i-this.m_iDriftStartY<0)return this.m_iDriftStartX=t,void(this.m_iDriftStartY=i);for(a=0;a<n;a++)this.m_aPoint[a][0]=this.m_aPoint[a][0]+t-this.m_iDriftStartX,this.m_aPoint[a][1]=this.m_aPoint[a][1]+i-this.m_iDriftStartY}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(a=0;a<n;a++)if(this.m_aPoint[a][1]+i-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][1]+i-this.m_iDriftStartY<0)return this.m_iDriftStartX=t,void(this.m_iDriftStartY=i);for(a=0;a<n;a++)this.m_aPoint[a][1]=this.m_aPoint[a][1]+i-this.m_iDriftStartY}this.m_iDriftStartX=t,this.m_iDriftStartY=i,this.setEdgePoints(this.m_aPoint),g()}},{key:"stretch",value:function(){}}]),i}(b),w=function(t){function i(){c(this,i);var e=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.m_szType="Grid",e.m_iGridColNum=22,e.m_iGridRowNum=18,e.m_szGridMap="",e.m_aAddGridMap=[],e}return d(i,t),n(i,[{key:"draw",value:function(){for(var t=e.m_iCanvasWidth/this.m_iGridColNum,i=e.m_iCanvasHeight/this.m_iGridRowNum,n="",o=0;o<this.m_iGridRowNum;o++){for(var r=this.m_szGridMap.substring(6*o,6*o+6),s=parseInt("f"+r,16).toString(2).split("").slice(4),l="",d=0;d<this.m_iGridColNum;d++){var c="";"1"===s[d]?(e[a].strokeStyle=this.m_szDrawColor,e[a].globalAlpha=1,e[a].strokeRect(t*d,i*o,t,i),c="1"):c="0",this.m_aAddGridMap.length&&1===this.m_aAddGridMap[o][d]&&(e[a].strokeStyle=this.m_szDrawColor,e[a].strokeRect(t*d,i*o,t,i),c="1"),l+=c}n+=parseInt("1111"+l+"00",2).toString(16).substring(1)}this.m_szGridMap=n}},{key:"move",value:function(t,i,n,a){var o=e.m_iCanvasWidth/this.m_iGridColNum,r=e.m_iCanvasHeight/this.m_iGridRowNum,s=Math.floor(t/o),l=Math.floor(i/r),d=Math.floor(Math.abs(n-t)/o),c=Math.floor(Math.abs(a-i)/r),u=1,h=1;u=n-t>0?1:-1,h=a-i>0?1:-1;for(var x=[],f=0;f<this.m_iGridRowNum;f++){x[f]=[];for(var p=0;p<this.m_iGridColNum;p++)x[f][p]=1===u?1===h?f>=l&&f<=l+c&&p>=s&&p<=s+d?1:0:f<=l&&f>=l-c&&p>=s&&p<=s+d?1:0:1===h?f>=l&&f<=l+c&&p<=s&&p>=s-d?1:0:f<=l&&f>=l-c&&p<=s&&p>=s-d?1:0}this.m_aAddGridMap=x,this.draw()}}]),i}(b),T=function(t){function i(){c(this,i);var e=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.m_szType="Line",e.m_iLineType=0,e.m_iDirection=0,e.m_iArrowType=0,e.m_aCrossArrowPoint=[],e}return d(i,t),n(i,[{key:"draw",value:function(){0===this.m_iLineType?this.drawNormalLine():1===this.m_iLineType?this.drawArrowLine():3===this.m_iLineType?this.drawCrossLine():4===this.m_iLineType&&this.drawLineCount()}},{key:"drawNormalLine",value:function(){if(e[a].globalAlpha=1,this.m_aPoint.length>0){e[a].beginPath(),e[a].strokeStyle=this.m_szDrawColor,e[a].lineWidth=2,e[a].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var t=1,i=this.m_aPoint.length;t<i;t++)e[a].lineTo(this.m_aPoint[t][0],this.m_aPoint[t][1]);if(e[a].stroke(),this.m_bChoosed)for(var n=0,o=this.m_aPoint.length;n<o;n++)e[a].beginPath(),e[a].fillStyle=this.m_szDrawColor,e[a].arc(this.m_aPoint[n][0],this.m_aPoint[n][1],3,0,2*Math.PI,!0),e[a].closePath(),e[a].fill();""!==this.m_szTips&&(e[a].strokeStyle=this.m_szDrawColor,e[a].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}}},{key:"drawArrowLine",value:function(t,i,n,o,r,s,l,d){s="undefined"!==typeof s?s:30,l="undefined"!==typeof l?l:10,d="undefined"!==typeof d?d:1;var c=180*Math.atan2(n-r,i-o)/Math.PI,u=(c+s)*Math.PI/180,h=(c-s)*Math.PI/180,x=l*Math.cos(u),f=l*Math.sin(u),p=l*Math.cos(h),m=l*Math.sin(h);e[a].save(),e[a].beginPath();var _=i-x,g=n-f;e[a].moveTo(_,g),e[a].lineTo(i,n),_=i-p,g=n-m,e[a].lineTo(_,g),e[a].moveTo(i,n),e[a].lineTo(o,r),1===t&&(_=o+x,g=r+f,e[a].moveTo(_,g),e[a].lineTo(o,r),_=o+p,g=r+m,e[a].lineTo(_,g)),e[a].strokeStyle=this.m_szDrawColor,e[a].lineWidth=d,e[a].stroke(),e[a].restore()}},{key:"drawCrossLine",value:function(){this.drawNormalLine();var t=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,i=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,n=180*Math.atan2(i-this.m_aPoint[0][1],t-this.m_aPoint[0][0])/Math.PI,o=(n+90)*Math.PI/180,r=(n-90)*Math.PI/180,s=25*Math.cos(o),l=25*Math.sin(o),d=25*Math.cos(r),c=25*Math.sin(r),u=0,h=0;u=t-s,h=i-l;var x=0,f=0;0===this.m_iDirection?(x=-10,f=-15):1===this.m_iDirection?(x=10,f=10):(x=10,f=-15),0!==this.m_iDirection&&this.drawArrowLine(0,u,h,t,i),e[a].strokeStyle=this.m_szDrawColor,e[a].font="8px",e[a].strokeText("A",u+x,h+4),u=t-d,h=i-c,1!==this.m_iDirection&&this.drawArrowLine(0,u,h,t,i),e[a].strokeStyle=this.m_szDrawColor,e[a].font="8px",e[a].strokeText("B",u+f,h+4)}},{key:"drawLineCount",value:function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,i=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,n=(i+90)*Math.PI/180,a=(i-90)*Math.PI/180,o=25*Math.cos(n),r=25*Math.sin(n),s=25*Math.cos(a),l=25*Math.sin(a),d=0,c=0;d=e-o,c=t-r,1===this.m_iArrowType?(d=e-s,c=t-l,this.drawArrowLine(0,d,c,e,t)):0===this.m_iArrowType&&this.drawArrowLine(0,d,c,e,t),this.m_aCrossArrowPoint=[[e,t],[d,c]]}},{key:"inShape",value:function(e,t){for(var i=!1,n=0,a=this.m_aPoint.length-1;n<a;n++){var o=Math.sqrt((this.m_aPoint[n+1][0]-this.m_aPoint[n][0])*(this.m_aPoint[n+1][0]-this.m_aPoint[n][0])+(this.m_aPoint[n+1][1]-this.m_aPoint[n][1])*(this.m_aPoint[n+1][1]-this.m_aPoint[n][1])),r=Math.sqrt((e-this.m_aPoint[n][0])*(e-this.m_aPoint[n][0])+(t-this.m_aPoint[n][1])*(t-this.m_aPoint[n][1])),s=Math.sqrt((e-this.m_aPoint[n+1][0])*(e-this.m_aPoint[n+1][0])+(t-this.m_aPoint[n+1][1])*(t-this.m_aPoint[n+1][1]));r+s-o<1&&(i=!0)}return i}}]),i}(b),P=function(t){function i(){c(this,i);var e=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.m_szType="Polygon",e.m_iPolygonType=1,e}return d(i,t),n(i,[{key:"setPointInfo",value:function(e){if(null!==e&&"undefined"!==typeof e){if(0===this.m_iPolygonType){for(var t=e[0][0],i=e[0][1],n=e[0][0],a=e[0][1],o=0,r=e.length;o<r;o++)t>e[o][0]&&(t=e[o][0]),i>e[o][1]&&(i=e[o][1]),n<e[o][0]&&(n=e[o][0]),a<e[o][1]&&(a=e[o][1]);this.m_aPoint=[[t,i],[n,i],[n,a],[t,a]]}else this.m_iPolygonType,this.m_aPoint=e;this.setEdgePoints(e)}}},{key:"draw",value:function(){if(this.m_aPoint.length>0){e[a].fillStyle=this.m_szFillColor,e[a].strokeStyle=this.m_szDrawColor,e[a].globalAlpha=1;var t=0,i=0;if(this.m_bChoosed)for(t=0,i=this.m_aPoint.length;t<i;t++)e[a].beginPath(),e[a].arc(this.m_aPoint[t][0],this.m_aPoint[t][1],3,0,360,!1),e[a].fillStyle=this.m_szDrawColor,e[a].closePath(),e[a].fill();for(e[a].beginPath(),e[a].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),t=0,i=this.m_aPoint.length;t<i;t++)0!==t&&e[a].lineTo(this.m_aPoint[t][0],this.m_aPoint[t][1]);e[a].stroke(),this.m_bClosed&&(e[a].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),e[a].closePath(),e[a].stroke(),e[a].globalAlpha=this.m_iTranslucent,e[a].fill())}}},{key:"move",value:function(t,i,n,o){if(1===this.m_iPolygonType){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){e[a].fillStyle=this.m_szFillColor,e[a].strokeStyle=this.m_szDrawColor,e[a].globalAlpha=1;var r=0,s=0;for(r=0,s=this.m_aPoint.length;r<s;r++)e[a].beginPath(),e[a].arc(this.m_aPoint[r][0],this.m_aPoint[r][1],3,0,360,!1),e[a].fillStyle=this.m_szDrawColor,e[a].closePath(),e[a].fill();for(e[a].beginPath(),e[a].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),r=0,s=this.m_aPoint.length;r<s;r++)0!==r&&e[a].lineTo(this.m_aPoint[r][0],this.m_aPoint[r][1]);e[a].lineTo(t,i),e[a].closePath(),e[a].stroke()}}else if(0===this.m_iPolygonType){this.m_bChoosed=!0;var l=n,d=o,c=t,u=i;this.setPointInfo([[l,d],[c,d],[c,u],[l,u]]),this.draw()}}},{key:"stretch",value:function(e,t){0===this.m_iEditType&&(1===this.m_iPolygonType?-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t):0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t):3===this.m_iIndexChoosePoint&&e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t),this.setPointInfo(this.m_aPoint),g())}}]),i}(b),E=function(t){function i(){c(this,i);var e=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.m_szType="Point",e.m_szId="",e}return d(i,t),n(i,[{key:"draw",value:function(){e[a].beginPath(),e[a].fillStyle=this.m_szDrawColor,e[a].globalAlpha=1,e[a].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,2*Math.PI,!0),e[a].closePath(),e[a].fill()}},{key:"drag",value:function(){}},{key:"stretch",value:function(){}}]),i}(b),k=function(){function l(n,d){c(this,l),e=this,this[i]=(0,r["default"])("#"+n),this[t]=d||!1,this[a]=this[i][0].getContext("2d"),this[o]=[],this[s]=!1,this[u]="Rect",this[h]=10,this[m]=!0,this[p]={},this[_]=null,this[x]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[f]=!1,this.m_iCanvasWidth=this[i].width(),this.m_iCanvasHeight=this[i].height(),this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",y(),this[o].length=0}return n(l,[{key:"setDrawMutiShapeOneTime",value:function(e){this[m]=e}},{key:"setMaxShapeSupport",value:function(e){this[h]=e}},{key:"getMaxShapeSupport",value:function(){return this[h]}},{key:"setDrawStatus",value:function(e,t){this[s]=e,t&&e&&(this[_]=t),e||(this[_]=null)}},{key:"setShapeType",value:function(e){this[u]=e,g()}},{key:"setCurrentShapeInfo",value:function(e){this[p]=e||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}}},{key:"getShapeType",value:function(){return this[u]}},{key:"getAllShapesInfo",value:function(){for(var e=[],t=0,i=this[o].length;t<i;t++)"Grid"===this[o][t].m_szType?e.push({szType:this[o][t].m_szType,szGridMap:this[o][t].m_szGridMap,iGridColNum:this[o][t].m_iGridColNum,iGridRowNum:this[o][t].m_iGridRowNum}):"RectOSD"===this[o][t].m_szType?e.push({szType:this[o][t].m_szType,szText:this[o][t].m_szText,szEnabled:this[o][t].m_szEnabled,szOSDType:this[o][t].m_szOSDType,iPositionX:this[o][t].m_aPoint[0][0],iPositionY:this[o][t].m_aPoint[0][1],szDateStyle:this[o][t].m_szDateStyle,szClockType:this[o][t].m_szClockType,szDisplayWeek:this[o][t].m_szDisplayWeek,szId:this[o][t].m_szId,szAlignment:this[o][t].m_szAlignment}):e.push({szType:this[o][t].m_szType,aPoint:this[o][t].m_aPoint,szId:this[o][t].m_szId,bChoosed:this[o][t].m_bChoosed});return e}},{key:"deleteRepeatPolyonById",value:function(e){var t=this.getAllShapesInfo(),i=t.length;if(i>0)for(var n=0;n<i;n++)"Polygon"===t[n].szType&&t[n].szId===e&&this.deleteShape(n)}},{key:"getShapesInfoByType",value:function(e){for(var t=[],i=0,n=this[o].length;i<n;i++)this[o][i].m_szType===e&&("Grid"===this[o][i].m_szType?t.push({szType:this[o][i].m_szType,szGridMap:this[o][i].m_szGridMap,iGridColNum:this[o][i].m_iGridColNum,iGridRowNum:this[o][i].m_iGridRowNum}):"RectOSD"===this[o][i].m_szType?t.push({szType:this[o][i].m_szType,szText:this[o][i].m_szText,szEnabled:this[o][i].m_szEnabled,szOSDType:this[o][i].m_szOSDType,iPositionX:this[o][i].m_aPoint[0][0],iPositionY:this[o][i].m_aPoint[0][1],szDateStyle:this[o][i].m_szDateStyle,szClockType:this[o][i].m_szClockType,szDisplayWeek:this[o][i].m_szDisplayWeek,szId:this[o][i].m_szId,szAlignment:this[o][i].m_szAlignment}):"Polygon"===e?t.push({szType:this[o][i].m_szType,szId:this[o][i].m_szId,iPolygonType:this[o][i].m_iPolygonType,iMinClosed:this[o][i].m_iMinClosed,iMaxPointNum:this[o][i].m_iMaxPointNum,iEditType:this[o][i].m_iEditType,aPoint:this[o][i].m_aPoint,bClosed:this[o][i].m_bClosed,szTips:this[o][i].m_szTips,szDrawColor:this[o][i].m_szDrawColor,szFillColor:this[o][i].m_szFillColor,iTranslucent:this[o][i].m_iTranslucent}):"Line"===e?t.push({szType:this[o][i].m_szType,szId:this[o][i].m_szId,aPoint:this[o][i].m_aPoint,szTips:this[o][i].m_szTips,iLineType:this[o][i].m_iLineType,iDirection:this[o][i].m_iDirection,iArrowType:this[o][i].m_iArrowType,szDrawColor:this[o][i].m_szDrawColor,aCrossArrowPoint:this[o][i].m_aCrossArrowPoint}):"Rect"===e?t.push({szType:this[o][i].m_szType,iEditType:this[o][i].m_iEditType,aPoint:this[o][i].m_aPoint,szTips:this[o][i].m_szTips,szDrawColor:this[o][i].m_szDrawColor,szFillColor:this[o][i].m_szFillColor,iTranslucent:this[o][i].m_iTranslucent}):t.push({szType:this[o][i].m_szType,aPoint:this[o][i].m_aPoint}));return t}},{key:"setShapesInfoByType",value:function(e,t){t||(t=[]);var i=null;if("Rect"===e||"Polygon"===e||"Line"===e||"Point"===e)for(var n=0,a=t.length;n<a;n++)"Rect"===e?(i=new S,i.m_iEditType=t[n].iEditType,i.m_szTips=t[n].szTips||"",i.m_szDrawColor=t[n].szDrawColor,i.m_szFillColor=t[n].szFillColor,i.m_iTranslucent=t[n].iTranslucent,i.m_iRedrawMode=t[n].iRedrawMode):"Polygon"===e?(i=new P,0===t[n].iPolygonType?i.m_bClosed=!0:i.m_bClosed=t[n].bClosed,i.m_szTips=t[n].szTips||"",i.m_szId=t[n].szId||"",i.m_iPolygonType=t[n].iPolygonType,i.m_iMinClosed=t[n].iMinClosed||3,i.m_iMaxPointNum=t[n].iMaxPointNum||11,i.m_iEditType=t[n].iEditType,i.m_szDrawColor=t[n].szDrawColor,i.m_szFillColor=t[n].szFillColor,i.m_iTranslucent=t[n].iTranslucent,i.m_iRedrawMode=t[n].iRedrawMode):"Line"===e?(i=new T,i.m_iLineType=t[n].iLineType,i.m_szTips=t[n].szTips||"",i.m_szId=t[n].szId,i.m_iDirection=t[n].iDirection,i.m_iArrowType=t[n].iArrowType,i.m_szDrawColor=t[n].szDrawColor,i.setPointInfo(t[n].aPoint)):"Point"===e&&(i=new E,i.m_szId=t[n].szId,i.m_szDrawColor=t[n].szDrawColor,i.setPointInfo(t[n].aPoint)),i.setPointInfo(t[n].aPoint),0===n&&(i.m_bChoosed=!0),v(i);else"Grid"===e&&(i=new w,i.m_szGridMap=t[0].szGridMap||"",i.m_iGridColNum=t[0].iGridColNum||22,i.m_iGridRowNum=t[0].iGridRowNum||18,v(i));g()}},{key:"addOSDShape",value:function(e,t,i,n,a){i||n||(i=0,n=0),a||(a={});var o=new C(e,t),r=10*e.replace(/[^x00-xff]/g,"rr").length;o.m_szOSDType=a.szOSDType||"",o.m_szDateStyle=a.szDateStyle||"",o.m_szClockType=a.szClockType||"",o.m_szDisplayWeek=a.szDisplayWeek||"",o.m_szId=a.szId||"",o.m_szAlignment=""+a.szAlignment||"0","0"===o.m_szAlignment?o.m_aPoint=[[i,n],[r+i,n],[r+i,n+20],[i,n+20]]:"1"===o.m_szAlignment?o.m_aPoint=[[0,n],[r,n],[r,n+20],[0,n+20]]:"2"===o.m_szAlignment?o.m_aPoint=[[this.m_iCanvasWidth-r,n],[this.m_iCanvasWidth,n],[this.m_iCanvasWidth,n+20],[this.m_iCanvasWidth-r,n+20]]:o.m_aPoint=[[i,n],[r+i,n],[r+i,n+20],[i,n+20]],v(o),g()}},{key:"selectShapeById",value:function(t,i){for(var n=0,a=e[o].length;n<a;n++)t===e[o][n].m_szType&&(i===e[o][n].m_szId?e[o][n].m_bChoosed=!0:e[o][n].m_bChoosed=!1);g()}},{key:"setCanvasSize",value:function(e,t){e>0&&t>0&&(this.m_iCanvasWidth=e,this.m_iCanvasHeight=t,g())}},{key:"setDrawStyle",value:function(e,t,i){this[x]={szDrawColor:e,szFillColor:t,iTranslucent:i}}},{key:"clearAllShape",value:function(){this[o].length=0,e[f]=!1,g()}},{key:"clearShapeByType",value:function(t){for(var i=this[o].length,n=i;n>0;n--)this[o][n-1].m_szType===t&&("Grid"===t?(this[o][n-1].m_szGridMap="",this[o][n-1].m_aAddGridMap=[]):this[o].splice(n-1,1));"Polygon"===t&&(e[f]=!1),g()}},{key:"deleteShape",value:function(e){this[o].length>e&&this[o].splice(e,1),g()}},{key:"updateCanvas",value:function(e){this[i]=(0,r["default"])("#"+e),this[a]=this[i][0].getContext("2d"),this.m_iCanvasWidth=this[i].width(),this.m_iCanvasHeight=this[i].height(),y()}},{key:"resizeCanvas",value:function(){this.m_iCanvasWidth=this[i].width(),this.m_iCanvasHeight=this[i].height()}},{key:"canvasRedraw",value:function(){g()}}]),l}();return k}();t.ESCanvas=u}])}))})(hi);var xi={exports:{}};(function(e,t){(function(t,i){e.exports=i()})(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){var n;function a(e,t,i){null!=e&&("number"==typeof e?this.fromNumber(e,t,i):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new a(null)}function r(e,t,i,n,a,o){var r=16383&t;for(t>>=14;--o>=0;){var s=16383&this[e],l=this[e++]>>14,d=t*s+l*r;s=r*s+((16383&d)<<14)+i[n]+a,a=(s>>28)+(d>>14)+t*l;i[n++]=268435455&s}return a}a.prototype.am=r,n=28,a.prototype.DB=n,a.prototype.DM=(1<<n)-1,a.prototype.DV=1<<n;var s=52;a.prototype.FV=Math.pow(2,s),a.prototype.F1=s-n,a.prototype.F2=2*n-s;var l,d,c="0123456789abcdefghijklmnopqrstuvwxyz",u=[];for(l="0".charCodeAt(0),d=0;d<=9;++d)u[l++]=d;for(l="a".charCodeAt(0),d=10;d<36;++d)u[l++]=d;for(l="A".charCodeAt(0),d=10;d<36;++d)u[l++]=d;function h(e){return c.charAt(e)}function x(e,t){var i=u[e.charCodeAt(t)];return null==i?-1:i}function f(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function p(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function m(e){var t=o();return t.fromInt(e),t}function _(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.fromRadix(e,t);i=2}this.s=this.t=0;for(var n=e.length,o=!1,r=0;--n>=0;){var s=8==i?255&e[n]:x(e,n);s<0?"-"==e.charAt(n)&&(o=!0):(o=!1,0==r?this[this.t++]=s:r+i>this.DB?(this[this.t-1]|=(s&(1<<this.DB-r)-1)<<r,this[this.t++]=s>>this.DB-r):this[this.t-1]|=s<<r,r+=i,r>=this.DB&&(r-=this.DB))}8==i&&0!=(128&e[0])&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r)),this.clamp(),o&&a.ZERO.subTo(this,this)}function g(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function y(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else if(64==e)e=6;else{if(4!=e)return this.toRadix(e);e=2}var t,i=(1<<e)-1,n=!1,a="",o=this.t,r=this.DB-o*this.DB%e;if(o-- >0)for(r<this.DB&&(t=this[o]>>r)>0&&(n=!0,a=h(t));o>=0;)r<e?(t=(this[o]&(1<<r)-1)<<e-r,t|=this[--o]>>(r+=this.DB-e)):(t=this[o]>>(r-=e)&i,r<=0&&(r+=this.DB,--o)),t>0&&(n=!0),n&&(a+=h(t));return n?a:"0"}function b(){var e=o();return a.ZERO.subTo(this,e),e}function S(){return this.s<0?this.negate():this}function C(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;t=i-e.t;if(0!=t)return t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0}function w(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),e>>1!=0&&(i+=1),i}function T(){return this.t<=0?0:this.DB*(this.t-1)+w(this[this.t-1]^this.s&this.DM)}function P(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s}function E(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s}function k(e,t){var i,n=e%this.DB,a=this.DB-n,o=(1<<a)-1,r=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)t[i+r+1]=this[i]>>a|s,s=(this[i]&o)<<n;for(i=r-1;i>=0;--i)t[i]=0;t[r]=s,t.t=this.t+r+1,t.s=this.s,t.clamp()}function R(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var n=e%this.DB,a=this.DB-n,o=(1<<n)-1;t[0]=this[i]>>n;for(var r=i+1;r<this.t;++r)t[r-i-1]|=(this[r]&o)<<a,t[r-i]=this[r]>>n;n>0&&(t[this.t-i-1]|=(this.s&o)<<a),t.t=this.t-i,t.clamp()}}function I(e,t){for(var i=0,n=0,a=Math.min(e.t,this.t);i<a;)n+=this[i]-e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n-=e[i],t[i++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[i++]=this.DV+n:n>0&&(t[i++]=n),t.t=i,t.clamp()}function D(e,t){var i=this.abs(),n=e.abs(),o=i.t;for(t.t=o+n.t;--o>=0;)t[o]=0;for(o=0;o<n.t;++o)t[o+i.t]=i.am(0,n[o],t,o,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)}function M(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var n=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,n,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()}function A(e,t,i){var n=e.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)null!=t&&t.fromInt(0),null!=i&&this.copyTo(i);else{null==i&&(i=o());var s=o(),l=this.s,d=(e=e.s,this.DB-w(n[n.t-1]));if(d>0?(n.lShiftTo(d,s),r.lShiftTo(d,i)):(n.copyTo(s),r.copyTo(i)),n=s.t,r=s[n-1],0!=r){var c=r*(1<<this.F1)+(n>1?s[n-2]>>this.F2:0),u=this.FV/c,h=(c=(1<<this.F1)/c,1<<this.F2),x=i.t,f=x-n,p=null==t?o():t;for(s.dlShiftTo(f,p),i.compareTo(p)>=0&&(i[i.t++]=1,i.subTo(p,i)),a.ONE.dlShiftTo(n,p),p.subTo(s,s);s.t<n;)s[s.t++]=0;for(;--f>=0;){var m=i[--x]==r?this.DM:Math.floor(i[x]*u+(i[x-1]+h)*c);if((i[x]+=s.am(0,m,i,f,0,n))<m)for(s.dlShiftTo(f,p),i.subTo(p,i);i[x]<--m;)i.subTo(p,i)}null!=t&&(i.drShiftTo(n,t),l!=e&&a.ZERO.subTo(t,t)),i.t=n,i.clamp(),d>0&&i.rShiftTo(d,i),l<0&&a.ZERO.subTo(i,i)}}}}function B(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t}function L(e){this.m=e}function F(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function j(e){return e}function z(e){e.divRemTo(this.m,null,e)}function O(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function N(e,t){e.squareTo(t),this.reduce(t)}function U(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV;return t>0?this.DV-t:-t}function H(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function V(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t}function G(e){var t=o();return e.copyTo(t),this.reduce(t),t}function Y(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],n=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;i=t+this.m.t;for(e[i]+=this.m.am(0,n,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function W(e,t){e.squareTo(t),this.reduce(t)}function Z(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function X(){return 0==(this.t>0?1&this[0]:this.s)}function J(e,t){if(e>4294967295||e<1)return a.ONE;var i=o(),n=o(),r=t.convert(this),s=w(e)-1;for(r.copyTo(i);--s>=0;)if(t.sqrTo(i,n),(e&1<<s)>0)t.mulTo(n,r,i);else{var l=i;i=n,n=l}return t.revert(i)}function q(e,t){var i;return i=e<256||t.isEven()?new L(t):new H(t),this.exp(e,i)}function K(){var e=o();return this.copyTo(e),e}function $(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Q(){return 0==this.t?this.s:this[0]<<24>>24}function ee(){return 0==this.t?this.s:this[0]<<16>>16}function te(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ie(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function ne(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=(t=Math.pow(e,t),m(t)),n=o(),a=o(),r="";for(this.divRemTo(i,n,a);n.signum()>0;)r=(t+a.intValue()).toString(e).substr(1)+r,n.divRemTo(i,n,a);return a.intValue().toString(e)+r}function ae(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),n=Math.pow(t,i),o=!1,r=0,s=0,l=0;l<e.length;++l){var d=x(e,l);d<0?"-"==e.charAt(l)&&0==this.signum()&&(o=!0):(s=t*s+d,++r>=i&&(this.dMultiply(n),this.dAddOffset(s,0),s=r=0))}r>0&&(this.dMultiply(Math.pow(t,r)),this.dAddOffset(s,0)),o&&a.ZERO.subTo(this,this)}function oe(e,t,i){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(a.ONE.shiftLeft(e-1),xe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(a.ONE.shiftLeft(e-1),this);else{i=[];var n=7&e;i.length=1+(e>>3),t.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function re(){var e=this.t,t=[];t[0]=this.s;var i,n=this.DB-e*this.DB%8,a=0;if(e-- >0)for(n<this.DB&&(i=this[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=i|this.s<<this.DB-n);e>=0;)n<8?(i=(this[e]&(1<<n)-1)<<8-n,i|=this[--e]>>(n+=this.DB-8)):(i=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&i)&&(i|=-256),0==a&&(128&this.s)!=(128&i)&&++a,(a>0||i!=this.s)&&(t[a++]=i);return t}function se(e){return 0==this.compareTo(e)}function le(e){return this.compareTo(e)<0?this:e}function de(e){return this.compareTo(e)>0?this:e}function ce(e,t,i){var n,a,o=Math.min(e.t,this.t);for(n=0;n<o;++n)i[n]=t(this[n],e[n]);if(e.t<this.t){for(a=e.s&this.DM,n=o;n<this.t;++n)i[n]=t(this[n],a);i.t=this.t}else{for(a=this.s&this.DM,n=o;n<e.t;++n)i[n]=t(a,e[n]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()}function ue(e,t){return e&t}function he(e){var t=o();return this.bitwiseTo(e,ue,t),t}function xe(e,t){return e|t}function fe(e){var t=o();return this.bitwiseTo(e,xe,t),t}function pe(e,t){return e^t}function me(e){var t=o();return this.bitwiseTo(e,pe,t),t}function _e(e,t){return e&~t}function ge(e){var t=o();return this.bitwiseTo(e,_e,t),t}function ve(){for(var e=o(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function ye(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function be(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Se(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function Ce(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+Se(this[e]);return this.s<0?this.t*this.DB:-1}function we(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Te(){for(var e=0,t=this.s&this.DM,i=0;i<this.t;++i)e+=we(this[i]^t);return e}function Pe(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function Ee(e,t){var i=a.ONE.shiftLeft(e);return this.bitwiseTo(i,t,i),i}function ke(e){return this.changeBit(e,xe)}function Re(e){return this.changeBit(e,_e)}function Ie(e){return this.changeBit(e,pe)}function De(e,t){for(var i=0,n=0,a=Math.min(e.t,this.t);i<a;)n+=this[i]+e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n+=e[i],t[i++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[i++]=n:n<-1&&(t[i++]=this.DV+n),t.t=i,t.clamp()}function Me(e){var t=o();return this.addTo(e,t),t}function Ae(e){var t=o();return this.subTo(e,t),t}function Be(e){var t=o();return this.multiplyTo(e,t),t}function Le(){var e=o();return this.squareTo(e),e}function Fe(e){var t=o();return this.divRemTo(e,t,null),t}function je(e){var t=o();return this.divRemTo(e,null,t),t}function ze(e){var t=o(),i=o();return this.divRemTo(e,t,i),[t,i]}function Oe(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Ne(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Ue(){}function He(e){return e}function Ve(e,t,i){e.multiplyTo(t,i)}function Ge(e,t){e.squareTo(t)}function Ye(e){return this.exp(e,new Ue)}function We(e,t,i){var n,a=Math.min(this.t+e.t,t);for(i.s=0,i.t=a;a>0;)i[--a]=0;for(n=i.t-this.t;a<n;++a)i[a+this.t]=this.am(0,e[a],i,a,0,this.t);for(n=Math.min(e.t,t);a<n;++a)this.am(0,e[a],i,a,0,t-a);i.clamp()}function Ze(e,t,i){--t;var n=i.t=this.t+e.t-t;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)i[this.t+n-t]=this.am(t-n,e[n],i,0,0,this.t+n-t);i.clamp(),i.drShiftTo(1,i)}function Xe(e){this.r2=o(),this.q3=o(),a.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Je(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t}function qe(e){return e}function Ke(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function $e(e,t){e.squareTo(t),this.reduce(t)}function Qe(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function et(e,t){var i,n,a=e.bitLength(),r=m(1);if(a<=0)return r;i=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new L(t):t.isEven()?new Xe(t):new H(t);var s=[],l=3,d=i-1,c=(1<<i)-1;if(s[1]=n.convert(this),i>1)for(a=o(),n.sqrTo(s[1],a);l<=c;)s[l]=o(),n.mulTo(a,s[l-2],s[l]),l+=2;var u,h=e.t-1,x=!0,f=o();for(a=w(e[h])-1;h>=0;){for(a>=d?u=e[h]>>a-d&c:(u=(e[h]&(1<<a+1)-1)<<d-a,h>0&&(u|=e[h-1]>>this.DB+a-d)),l=i;0==(1&u);)u>>=1,--l;if((a-=l)<0&&(a+=this.DB,--h),x)s[u].copyTo(r),x=!1;else{for(;l>1;)n.sqrTo(r,f),n.sqrTo(f,r),l-=2;l>0?n.sqrTo(r,f):(l=r,r=f,f=l),n.mulTo(f,s[u],r)}for(;h>=0&&0==(e[h]&1<<a);)n.sqrTo(r,f),l=r,r=f,f=l,--a<0&&(a=this.DB-1,--h)}return n.revert(r)}function tt(e){var t=this.s<0?this.negate():this.clone();e=e.s<0?e.negate():e.clone();if(t.compareTo(e)<0){var i=t;t=e,e=i}i=t.getLowestSetBit();var n=e.getLowestSetBit();if(n<0)return t;for(i<n&&(n=i),n>0&&(t.rShiftTo(n,t),e.rShiftTo(n,e));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return n>0&&e.lShiftTo(n,e),e}function it(e){if(e<=0)return 0;var t=this.DV%e,i=this.s<0?e-1:0;if(this.t>0)if(0==t)i=this[0]%e;else for(var n=this.t-1;n>=0;--n)i=(t*i+this[n])%e;return i}function nt(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return a.ZERO;for(var i=e.clone(),n=this.clone(),o=m(1),r=m(0),s=m(0),l=m(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),t?(o.isEven()&&r.isEven()||(o.addTo(this,o),r.subTo(e,r)),o.rShiftTo(1,o)):r.isEven()||r.subTo(e,r),r.rShiftTo(1,r);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&l.isEven()||(s.addTo(this,s),l.subTo(e,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);i.compareTo(n)>=0?(i.subTo(n,i),t&&o.subTo(s,o),r.subTo(l,r)):(n.subTo(i,n),t&&s.subTo(o,s),l.subTo(r,l))}return 0!=n.compareTo(a.ONE)?a.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l}L.prototype.convert=F,L.prototype.revert=j,L.prototype.reduce=z,L.prototype.mulTo=O,L.prototype.sqrTo=N,H.prototype.convert=V,H.prototype.revert=G,H.prototype.reduce=Y,H.prototype.mulTo=Z,H.prototype.sqrTo=W,a.prototype.copyTo=f,a.prototype.fromInt=p,a.prototype.fromString=_,a.prototype.clamp=g,a.prototype.dlShiftTo=P,a.prototype.drShiftTo=E,a.prototype.lShiftTo=k,a.prototype.rShiftTo=R,a.prototype.subTo=I,a.prototype.multiplyTo=D,a.prototype.squareTo=M,a.prototype.divRemTo=A,a.prototype.invDigit=U,a.prototype.isEven=X,a.prototype.exp=J,a.prototype.toString=y,a.prototype.negate=b,a.prototype.abs=S,a.prototype.compareTo=C,a.prototype.bitLength=T,a.prototype.mod=B,a.prototype.modPowInt=q,a.ZERO=m(0),a.ONE=m(1),Ue.prototype.convert=He,Ue.prototype.revert=He,Ue.prototype.mulTo=Ve,Ue.prototype.sqrTo=Ge,Xe.prototype.convert=Je,Xe.prototype.revert=qe,Xe.prototype.reduce=Ke,Xe.prototype.mulTo=Qe,Xe.prototype.sqrTo=$e;var at=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ot=67108864/at[at.length-1];function rt(e){var t,i=this.abs();if(1==i.t&&i[0]<=at[at.length-1]){for(t=0;t<at.length;++t)if(i[0]==at[t])return!0;return!1}if(i.isEven())return!1;for(t=1;t<at.length;){for(var n=at[t],a=t+1;a<at.length&&n<ot;)n*=at[a++];for(n=i.modInt(n);t<a;)if(n%at[t++]==0)return!1}return i.millerRabin(e)}function st(e){var t=this.subtract(a.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var n=t.shiftRight(i);e=e+1>>1;e>at.length&&(e=at.length);for(var r=o(),s=0;s<e;++s){r.fromInt(at[Math.floor(Math.random()*at.length)]);var l=r.modPow(n,this);if(0!=l.compareTo(a.ONE)&&0!=l.compareTo(t)){for(var d=1;d++<i&&0!=l.compareTo(t);)if(l=l.modPowInt(2,this),0==l.compareTo(a.ONE))return!1;if(0!=l.compareTo(t))return!1}}return!0}function lt(){}function dt(e){var t;for(t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())}function ct(){this.j=this.i=0,this.S=[]}function ut(e){var t,i,n;for(t=0;t<256;++t)this.S[t]=t;for(t=i=0;t<256;++t)i=i+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[i],this.S[i]=n;this.j=this.i=0}function ht(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function xt(){return new ct}a.prototype.chunkSize=te,a.prototype.toRadix=ne,a.prototype.fromRadix=ae,a.prototype.fromNumber=oe,a.prototype.bitwiseTo=ce,a.prototype.changeBit=Ee,a.prototype.addTo=De,a.prototype.dMultiply=Oe,a.prototype.dAddOffset=Ne,a.prototype.multiplyLowerTo=We,a.prototype.multiplyUpperTo=Ze,a.prototype.modInt=it,a.prototype.millerRabin=st,a.prototype.clone=K,a.prototype.intValue=$,a.prototype.byteValue=Q,a.prototype.shortValue=ee,a.prototype.signum=ie,a.prototype.toByteArray=re,a.prototype.equals=se,a.prototype.min=le,a.prototype.max=de,a.prototype.and=he,a.prototype.or=fe,a.prototype.xor=me,a.prototype.andNot=ge,a.prototype.not=ve,a.prototype.shiftLeft=ye,a.prototype.shiftRight=be,a.prototype.getLowestSetBit=Ce,a.prototype.bitCount=Te,a.prototype.testBit=Pe,a.prototype.setBit=ke,a.prototype.clearBit=Re,a.prototype.flipBit=Ie,a.prototype.add=Me,a.prototype.subtract=Ae,a.prototype.multiply=Be,a.prototype.divide=Fe,a.prototype.remainder=je,a.prototype.divideAndRemainder=ze,a.prototype.modPow=et,a.prototype.modInverse=nt,a.prototype.pow=Ye,a.prototype.gcd=tt,a.prototype.isProbablePrime=rt,a.prototype.square=Le,function(e,t,i,n,a,o,r){function s(e){var t,n,a=this,o=e.length,r=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],o||(e=[o++]);r<i;)a.S[r]=r++;for(r=0;r<i;r++)t=a.S[r],s=s+t+e[r%o]&i-1,n=a.S[s],a.S[r]=n,a.S[s]=t;a.g=function(e){var t=a.S,n=a.i+1&i-1,o=t[n],r=a.j+o&i-1,s=t[r];t[n]=s,t[r]=o;for(var l=t[o+s&i-1];--e;)n=n+1&i-1,o=t[n],r=r+o&i-1,s=t[r],t[n]=s,t[r]=o,l=l*i+t[o+s&i-1];return a.i=n,a.j=r,l},a.g(i)}function l(e,t,i,n,a){if(i=[],a=typeof e,t&&"object"==a)for(n in e)if(n.indexOf("S")<5)try{i.push(l(e[n],t-1))}catch(o){}return i.length?i:e+("string"!=a?"\0":"")}function d(e,t,n,a){for(e+="",a=n=0;a<e.length;a++){var o=t,r=a&i-1,s=(n^=19*t[a&i-1])+e.charCodeAt(a);o[r]=s&i-1}for(a in e="",t)e+=String.fromCharCode(t[a]);return e}t.seedrandom=function(c,u){var h,x=[];c=d(l(u?[c,e]:arguments.length?c:[(new Date).getTime(),e,window],3),x);return h=new s(x),d(h.S,e),t.random=function(){for(var e=h.g(n),t=r,s=0;e<a;)e=(e+s)*i,t*=i,s=h.g(1);for(;e>=o;)e/=2,t/=2,s>>>=1;return(e+s)/t},c},r=t.pow(i,n),a=t.pow(2,a),o=2*a,d(t.random(),e)}([],Math,256,6,52),lt.prototype.nextBytes=dt,ct.prototype.init=ut,ct.prototype.next=ht;var ft,pt,mt,_t=256;function gt(e){pt[mt++]^=255&e,pt[mt++]^=e>>8&255,pt[mt++]^=e>>16&255,pt[mt++]^=e>>24&255,mt>=_t&&(mt-=_t)}function vt(){gt((new Date).getTime())}if(null==pt){var yt;for(pt=[],mt=0;mt<_t;)yt=Math.floor(65536*Math.random()),pt[mt++]=yt>>>8,pt[mt++]=255&yt;mt=0,vt()}function bt(){if(null==ft){for(vt(),ft=xt(),ft.init(pt),mt=0;mt<pt.length;++mt)pt[mt]=0;mt=0}return ft.next()}function St(e){var t;for(t=0;t<e.length;++t)e[t]=bt()}function Ct(){}function wt(e){function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,t){return e>>>t|e<<32-t}return e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e),function(e){for(var t="",i=0;i<4*e.length;i++)t+="0123456789abcdef".charAt(e[i>>2]>>8*(3-i%4)+4&15)+"0123456789abcdef".charAt(e[i>>2]>>8*(3-i%4)&15);return t}(function(e,n){var a,o,r,s,l,d,c,u,h,x,f,p,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],g=Array(64);for(e[n>>5]|=128<<24-n%32,e[15+(n+64>>9<<4)]=n,h=0;h<e.length;h+=16){for(a=_[0],o=_[1],r=_[2],s=_[3],l=_[4],d=_[5],c=_[6],u=_[7],x=0;x<64;x++)g[x]=x<16?e[x+h]:t(t(t(i(g[x-2],17)^i(g[x-2],19)^g[x-2]>>>10,g[x-7]),i(g[x-15],7)^i(g[x-15],18)^g[x-15]>>>3),g[x-16]),f=t(t(t(t(u,i(l,6)^i(l,11)^i(l,25)),l&d^~l&c),m[x]),g[x]),p=t(i(a,2)^i(a,13)^i(a,22),a&o^a&r^o&r),u=c,c=d,d=l,l=t(s,f),s=r,r=o,o=a,a=t(f,p);_[0]=t(a,_[0]),_[1]=t(o,_[1]),_[2]=t(r,_[2]),_[3]=t(s,_[3]),_[4]=t(l,_[4]),_[5]=t(d,_[5]),_[6]=t(c,_[6]),_[7]=t(u,_[7])}return _}(function(e){for(var t=[],i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}(e),8*e.length))}Ct.prototype.nextBytes=St;var Tt={hex:function(e){return wt(e)}};function Pt(e){function t(e,t){return e<<t|e>>>32-t}function i(e){var t,i,n="";for(t=7;t>=0;t--)i=e>>>4*t&15,n+=i.toString(16);return n}var n,a,o,r,s,l,d,c=Array(80),u=1732584193,h=4023233417,x=2562383102,f=271733878,p=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e);o=e.length;var m=[];for(n=0;n<o-3;n+=4)a=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),m.push(a);switch(o%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(o-1)<<24|8388608;break;case 2:n=e.charCodeAt(o-2)<<24|e.charCodeAt(o-1)<<16|32768;break;case 3:n=e.charCodeAt(o-3)<<24|e.charCodeAt(o-2)<<16|e.charCodeAt(o-1)<<8|128}for(m.push(n);m.length%16!=14;)m.push(0);for(m.push(o>>>29),m.push(o<<3&4294967295),e=0;e<m.length;e+=16){for(n=0;n<16;n++)c[n]=m[e+n];for(n=16;n<=79;n++)c[n]=t(c[n-3]^c[n-8]^c[n-14]^c[n-16],1);for(a=u,o=h,r=x,s=f,l=p,n=0;n<=19;n++)d=t(a,5)+(o&r|~o&s)+l+c[n]+1518500249&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;for(n=20;n<=39;n++)d=t(a,5)+(o^r^s)+l+c[n]+1859775393&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;for(n=40;n<=59;n++)d=t(a,5)+(o&r|o&s|r&s)+l+c[n]+2400959708&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;for(n=60;n<=79;n++)d=t(a,5)+(o^r^s)+l+c[n]+3395469782&4294967295,l=s,s=r,r=t(o,30),o=a,a=d;u=u+a&4294967295,h=h+o&4294967295,x=x+r&4294967295,f=f+s&4294967295,p=p+l&4294967295}return d=i(u)+i(h)+i(x)+i(f)+i(p),d.toLowerCase()}var Et={hex:function(e){return Pt(e)}},kt=function(e){function t(e,t){var i,n,a,o,r;return a=2147483648&e,o=2147483648&t,i=1073741824&e,n=1073741824&t,r=(1073741823&e)+(1073741823&t),i&n?2147483648^r^a^o:i|n?1073741824&r?3221225472^r^a^o:1073741824^r^a^o:r^a^o}function i(e,i,n,a,o,r,s){return e=t(e,t(t(i&n|~i&a,o),s)),t(e<<r|e>>>32-r,i)}function n(e,i,n,a,o,r,s){return e=t(e,t(t(i&a|n&~a,o),s)),t(e<<r|e>>>32-r,i)}function a(e,i,n,a,o,r,s){return e=t(e,t(t(i^n^a,o),s)),t(e<<r|e>>>32-r,i)}function o(e,i,n,a,o,r,s){return e=t(e,t(t(n^(i|~a),o),s)),t(e<<r|e>>>32-r,i)}function r(e){var t,i="",n="";for(t=0;t<=3;t++)n=e>>>8*t&255,n="0"+n.toString(16),i+=n.substr(n.length-2,2);return i}var s,l,d,c,u,h,x,f,p=[];e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e),p=function(e){var t,i=e.length;t=i+8;for(var n=16*((t-t%64)/64+1),a=Array(n-1),o=0,r=0;r<i;)t=(r-r%4)/4,o=r%4*8,a[t]|=e.charCodeAt(r)<<o,r++;return a[(r-r%4)/4]|=128<<r%4*8,a[n-2]=i<<3,a[n-1]=i>>>29,a}(e);for(u=1732584193,h=4023233417,x=2562383102,f=271733878,e=0;e<p.length;e+=16)s=u,l=h,d=x,c=f,u=i(u,h,x,f,p[e+0],7,3614090360),f=i(f,u,h,x,p[e+1],12,3905402710),x=i(x,f,u,h,p[e+2],17,606105819),h=i(h,x,f,u,p[e+3],22,3250441966),u=i(u,h,x,f,p[e+4],7,4118548399),f=i(f,u,h,x,p[e+5],12,1200080426),x=i(x,f,u,h,p[e+6],17,2821735955),h=i(h,x,f,u,p[e+7],22,4249261313),u=i(u,h,x,f,p[e+8],7,1770035416),f=i(f,u,h,x,p[e+9],12,2336552879),x=i(x,f,u,h,p[e+10],17,4294925233),h=i(h,x,f,u,p[e+11],22,2304563134),u=i(u,h,x,f,p[e+12],7,1804603682),f=i(f,u,h,x,p[e+13],12,4254626195),x=i(x,f,u,h,p[e+14],17,2792965006),h=i(h,x,f,u,p[e+15],22,1236535329),u=n(u,h,x,f,p[e+1],5,4129170786),f=n(f,u,h,x,p[e+6],9,3225465664),x=n(x,f,u,h,p[e+11],14,643717713),h=n(h,x,f,u,p[e+0],20,3921069994),u=n(u,h,x,f,p[e+5],5,3593408605),f=n(f,u,h,x,p[e+10],9,38016083),x=n(x,f,u,h,p[e+15],14,3634488961),h=n(h,x,f,u,p[e+4],20,3889429448),u=n(u,h,x,f,p[e+9],5,568446438),f=n(f,u,h,x,p[e+14],9,3275163606),x=n(x,f,u,h,p[e+3],14,4107603335),h=n(h,x,f,u,p[e+8],20,1163531501),u=n(u,h,x,f,p[e+13],5,2850285829),f=n(f,u,h,x,p[e+2],9,4243563512),x=n(x,f,u,h,p[e+7],14,1735328473),h=n(h,x,f,u,p[e+12],20,2368359562),u=a(u,h,x,f,p[e+5],4,4294588738),f=a(f,u,h,x,p[e+8],11,2272392833),x=a(x,f,u,h,p[e+11],16,1839030562),h=a(h,x,f,u,p[e+14],23,4259657740),u=a(u,h,x,f,p[e+1],4,2763975236),f=a(f,u,h,x,p[e+4],11,1272893353),x=a(x,f,u,h,p[e+7],16,4139469664),h=a(h,x,f,u,p[e+10],23,3200236656),u=a(u,h,x,f,p[e+13],4,681279174),f=a(f,u,h,x,p[e+0],11,3936430074),x=a(x,f,u,h,p[e+3],16,3572445317),h=a(h,x,f,u,p[e+6],23,76029189),u=a(u,h,x,f,p[e+9],4,3654602809),f=a(f,u,h,x,p[e+12],11,3873151461),x=a(x,f,u,h,p[e+15],16,530742520),h=a(h,x,f,u,p[e+2],23,3299628645),u=o(u,h,x,f,p[e+0],6,4096336452),f=o(f,u,h,x,p[e+7],10,1126891415),x=o(x,f,u,h,p[e+14],15,2878612391),h=o(h,x,f,u,p[e+5],21,4237533241),u=o(u,h,x,f,p[e+12],6,1700485571),f=o(f,u,h,x,p[e+3],10,2399980690),x=o(x,f,u,h,p[e+10],15,4293915773),h=o(h,x,f,u,p[e+1],21,2240044497),u=o(u,h,x,f,p[e+8],6,1873313359),f=o(f,u,h,x,p[e+15],10,4264355552),x=o(x,f,u,h,p[e+6],15,2734768916),h=o(h,x,f,u,p[e+13],21,1309151649),u=o(u,h,x,f,p[e+4],6,4149444226),f=o(f,u,h,x,p[e+11],10,3174756917),x=o(x,f,u,h,p[e+2],15,718787259),h=o(h,x,f,u,p[e+9],21,3951481745),u=t(u,s),h=t(h,l),x=t(x,d),f=t(f,c);return(r(u)+r(h)+r(x)+r(f)).toLowerCase()};function Rt(e,t){return new a(e,t)}function It(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var i=[],n=e.length-1;n>=0&&t>0;){var o=e.charCodeAt(n--);o<128?i[--t]=o:o>127&&o<2048?(i[--t]=63&o|128,i[--t]=o>>6|192):(i[--t]=63&o|128,i[--t]=o>>6&63|128,i[--t]=o>>12|224)}for(i[--t]=0,n=new Ct,o=[];t>2;){for(o[0]=0;0==o[0];)n.nextBytes(o);i[--t]=o[0]}return i[--t]=2,i[--t]=0,new a(i)}function Dt(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function Mt(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Rt(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function At(e){return e.modPowInt(this.e,this.n)}function Bt(e){return e=It(e,this.n.bitLength()+7>>3),null==e?null:(e=this.doPublic(e),null==e?null:(e=e.toString(16),0==(1&e.length)?e:"0"+e))}function Lt(e,t){for(var i=e.toByteArray(),n=0;n<i.length&&0==i[n];)++n;if(i.length-n!=t-1||2!=i[n])return null;for(++n;0!=i[n];)if(++n>=i.length)return null;for(var a="";++n<i.length;){var o=255&i[n];o<128?a+=String.fromCharCode(o):o>191&&o<224?(a+=String.fromCharCode((31&o)<<6|63&i[n+1]),++n):(a+=String.fromCharCode((15&o)<<12|(63&i[n+1])<<6|63&i[n+2]),n+=2)}return a}function Ft(e,t,i){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Rt(e,16),this.e=parseInt(t,16),this.d=Rt(i,16)):alert("Invalid RSA private key")}function jt(e,t,i,n,a,o,r,s){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Rt(e,16),this.e=parseInt(t,16),this.d=Rt(i,16),this.p=Rt(n,16),this.q=Rt(a,16),this.dmp1=Rt(o,16),this.dmq1=Rt(r,16),this.coeff=Rt(s,16)):alert("Invalid RSA private key")}function zt(e,t){var i=new lt,n=e>>1;this.e=parseInt(t,16);for(var o=new a(t,16);;){for(;;)if(this.p=new a(e-n,1,i),0==this.p.subtract(a.ONE).gcd(o).compareTo(a.ONE)&&this.p.isProbablePrime(10))break;for(;;)if(this.q=new a(n,1,i),0==this.q.subtract(a.ONE).gcd(o).compareTo(a.ONE)&&this.q.isProbablePrime(10))break;if(this.p.compareTo(this.q)<=0){var r=this.p;this.p=this.q,this.q=r}r=this.p.subtract(a.ONE);var s=this.q.subtract(a.ONE),l=r.multiply(s);if(0==l.gcd(o).compareTo(a.ONE)){this.n=this.p.multiply(this.q),this.d=o.modInverse(l),this.dmp1=this.d.mod(r),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}}function Ot(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);var t=e.mod(this.p).modPow(this.dmp1,this.p);for(e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;)t=t.add(this.p);return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)}function Nt(e){return e=this.doPrivate(Rt(e,16)),null==e?null:Lt(e,this.n.bitLength()+7>>3)}Dt.prototype.doPublic=At,Dt.prototype.setPublic=Mt,Dt.prototype.encrypt=Bt,Dt.prototype.doPrivate=Ot,Dt.prototype.setPrivate=Ft,Dt.prototype.setPrivateEx=jt,Dt.prototype.generate=zt,Dt.prototype.decrypt=Nt;var Ut=[];Ut.sha1="3021300906052b0e03021a05000414",Ut.sha256="3031300d060960864801650304020105000420";var Ht=[];function Vt(e,t,i){t/=4;e=(0,Ht[i])(e),i="00"+Ut[i]+e,e="",t=t-4-i.length;for(var n=0;n<t;n+=2)e+="ff";return sPaddedMessageHex="0001"+e+i}function Gt(e,t){var i=Vt(e,this.n.bitLength(),t);return this.doPrivate(Rt(i,16)).toString(16)}function Yt(e){return e=Vt(e,this.n.bitLength(),"sha1"),this.doPrivate(Rt(e,16)).toString(16)}function Wt(e){return e=Vt(e,this.n.bitLength(),"sha256"),this.doPrivate(Rt(e,16)).toString(16)}function Zt(e,t,i){var n=new Dt;return n.setPublic(t,i),n.doPublic(e)}function Xt(e,t,i){return Zt(e,t,i).toString(16).replace(/^1f+00/,"")}function Jt(e){for(var t in Ut){var i=Ut[t],n=i.length;if(e.substring(0,n)==i)return[t,e.substring(n)]}return[]}function qt(e,t,i,n){return t=Xt(t,i,n),i=Jt(t),0!=i.length&&(t=i[1],e=(0,Ht[i[0]])(e),t==e)}function Kt(e,t){var i=Rt(e,16);return qt(t,i,this.n.toString(16),this.e.toString(16))}function $t(e,t){t=t.replace(/[ \n]+/g,"");var i=this.doPublic(Rt(t,16)).toString(16).replace(/^1f+00/,""),n=Jt(i);return 0!=n.length&&(i=n[1],n=(0,Ht[n[0]])(e),i==n)}Ht.sha1=Et.hex,Ht.sha256=Tt.hex,Dt.prototype.signString=Gt,Dt.prototype.signStringWithSHA1=Yt,Dt.prototype.signStringWithSHA256=Wt,Dt.prototype.verifyString=$t,Dt.prototype.verifyHexSignatureForMessage=Kt;var Qt=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],Init:function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++)e.Sbox_Inv[e.Sbox[t]]=t;for(e.ShiftRowTab_Inv=Array(16),t=0;t<16;t++)e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t;for(e.xtime=Array(256),t=0;t<128;t++)e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27},Done:function(){delete e.Sbox_Inv,delete e.ShiftRowTab_Inv,delete e.xtime},ExpandKey:function(t){var i,n=t.length,a=1;switch(n){case 16:i=176;break;case 24:i=208;break;case 32:i=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var o=n;o<i;o+=4){var r=t.slice(o-4,o);o%n==0?(r=[e.Sbox[r[1]]^a,e.Sbox[r[2]],e.Sbox[r[3]],e.Sbox[r[0]]],(a<<=1)>=256&&(a^=283)):n>24&&o%n==16&&(r=[e.Sbox[r[0]],e.Sbox[r[1]],e.Sbox[r[2]],e.Sbox[r[3]]]);for(var s=0;s<4;s++)t[o+s]=t[o+s-n]^r[s]}},Encrypt:function(t,i){var n=i.length;e.AddRoundKey(t,i.slice(0,16));for(var a=16;a<n-16;a+=16)e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,i.slice(a,a+16));e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.AddRoundKey(t,i.slice(a,n))},Decrypt:function(t,i){var n=i.length;for(e.AddRoundKey(t,i.slice(n-16,n)),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv),n-=32;n>=16;n-=16)e.AddRoundKey(t,i.slice(n,n+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv);e.AddRoundKey(t,i.slice(0,16))},SubBytes:function(e,t){for(var i=0;i<16;i++)e[i]=t[e[i]]},AddRoundKey:function(e,t){for(var i=0;i<16;i++)e[i]^=t[i]},ShiftRows:function(e,t){for(var i=[].concat(e),n=0;n<16;n++)e[n]=i[t[n]]},MixColumns:function(t){for(var i=0;i<16;i+=4){var n=t[i+0],a=t[i+1],o=t[i+2],r=t[i+3],s=n^a^o^r;t[i+0]^=s^e.xtime[n^a],t[i+1]^=s^e.xtime[a^o],t[i+2]^=s^e.xtime[o^r],t[i+3]^=s^e.xtime[r^n]}},MixColumns_Inv:function(t){for(var i=0;i<16;i+=4){var n=t[i+0],a=t[i+1],o=t[i+2],r=t[i+3],s=n^a^o^r,l=e.xtime[s],d=e.xtime[e.xtime[l^n^o]]^s;s^=e.xtime[e.xtime[l^a^r]],t[i+0]^=d^e.xtime[n^a],t[i+1]^=s^e.xtime[a^o],t[i+2]^=d^e.xtime[o^r],t[i+3]^=s^e.xtime[r^n]}}};return e}(),ei=function(){var e={};return Qt.Init(),e.b256to64=function(e){var t,i,n,a="",o=0,r=e.length;for(n=0;n<r;n++)i=e.charCodeAt(n),0==o?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2&63),t=(3&i)<<4):1==o?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>4&15),t=(15&i)<<2):2==o&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>6&3),a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i)),o+=1,3==o&&(o=0);return o>0&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),a+="="),1==o&&(a+="="),a},e.b64to256=function(e){var t,i,n="",a=0,o=0,r=e.length;for(i=0;i<r;i++)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(i)),t>=0&&(a&&(n+=String.fromCharCode(o|t>>6-a&255)),a=a+2&7,o=t<<a&255);return n},e.b16to64=function(e){var t,i,n="";for(e.length%2==1&&(e="0"+e),t=0;t+3<=e.length;t+=3)i=parseInt(e.substring(t,t+3),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i);for(t+1==e.length?(i=parseInt(e.substring(t,t+1),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i<<2)):t+2==e.length&&(i=parseInt(e.substring(t,t+2),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&i)<<4));(3&n.length)>0;)n+="=";return n},e.b64to16=function(e){var t,i,n="",a=0;for(t=0;t<e.length;++t){if("="==e.charAt(t))break;v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t)),v<0||(0==a?(n+=h(v>>2),i=3&v,a=1):1==a?(n+=h(i<<2|v>>4),i=15&v,a=2):2==a?(n+=h(i),n+=h(v>>2),i=3&v,a=3):(n+=h(i<<2|v>>4),n+=h(15&v),a=0))}return 1==a&&(n+=h(i<<2)),n},e.string2bytes=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e.charCodeAt(i));return t},e.bytes2string=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e.blockXOR=function(e,t){for(var i=Array(16),n=0;n<16;n++)i[n]=e[n]^t[n];return i},e.blockIV=function(){var e=new Ct,t=Array(16);return e.nextBytes(t),t},e.pad16=function(e){var t=e.slice(0),n=(16-e.length%16)%16;for(i=e.length;i<e.length+n;i++)t.push(0);return t},e.depad=function(e){for(e=e.slice(0);0==e[e.length-1];)e=e.slice(0,e.length-1);return e},e.encryptAESCBC=function(t,i){var n=i.slice(0);Qt.ExpandKey(n);for(var a=e.string2bytes(t),o=(a=e.pad16(a),e.blockIV()),r=0;r<a.length/16;r++){var s=a.slice(16*r,16*r+16),l=o.slice(16*r,16*r+16);s=e.blockXOR(l,s);Qt.Encrypt(s,n),o=o.concat(s)}return n=e.bytes2string(o),e.b256to64(n)},e.decryptAESCBC=function(t,i){var n=i.slice(0);Qt.ExpandKey(n);t=e.b64to256(t);for(var a=e.string2bytes(t),o=[],r=1;r<a.length/16;r++){var s=a.slice(16*r,16*r+16),l=a.slice(16*(r-1),16*(r-1)+16);Qt.Decrypt(s,n),s=e.blockXOR(l,s),o=o.concat(s)}return o=e.depad(o),e.bytes2string(o)},e.wrap60=function(e){for(var t="",i=0;i<e.length;i++)i%60==0&&0!=i&&(t+="\n"),t+=e[i];return t},e.generateAESKey=function(){var e=Array(16);return(new Ct).nextBytes(e),e},e.generateRSAKey=function(e,t){Math.seedrandom(Tt.hex(e));var i=new Dt;return i.generate(t,"10001"),i},e.publicKeyString=function(e){return pubkey=e.n.toString(16)},e.publicKeyID=function(e){return kt(e)},e.publicKeyFromString=function(e){e=e.split("|")[0];var t=new Dt;return t.setPublic(e,"10001"),t},e.encrypt=function(t,i,n){var a="";try{var o=e.publicKeyFromString(i);a+=o.encrypt(t)+"?"}catch(ca){return{status:"Invalid public key"}}return{status:"success",cipher:a}},e.decrypt=function(e,t){var i=e.split("?"),n=t.decrypt(i[0]);return{status:"success",plaintext:n,signature:"unsigned"}},e}();e.exports=ei},function(e,t,i){e.exports=i(2)},function(e,t,i){var n;i.r(t),i.d(t,"StreamClient",(function(){return P}));var a=new Uint8Array(16);function o(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function s(e){return"string"===typeof e&&r.test(e)}for(var l=s,d=[],c=0;c<256;++c)d.push((c+256).toString(16).substr(1));function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!l(i))throw TypeError("Stringified UUID is invalid");return i}var h=u;function x(e,t,i){e=e||{};var n=e.random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var a=0;a<16;++a)t[i+a]=n[a];return t}return h(n)}var f=x;let p=function(){class e{constructor(){}createClientObject(e,t,i,n){return{socket:e,id:t,iCurChannel:i,iCurStream:n,resolve:null,reject:null}}zeroPlayCmd(e,t){let i=[0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e+1,0,0,0,t,0,0,4,0];return new Uint8Array(i)}playCmd(e,t){let i=[0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,0,0,0,t,0,0,4,0];return new Uint8Array(i)}playbackCmd(e,t,i,n){let a=e.split("T")[0],o=e.split("T")[1],r="0"+parseInt(a.substring(0,4),10).toString(16),s=parseInt(a.substring(4,6),10),l=parseInt(a.substring(6),10),d=parseInt(o.substring(0,2),10),c=parseInt(o.substring(2,4),10),u=parseInt(o.substring(4,6),10),h=t.split("T")[0],x=t.split("T")[1],f="0"+parseInt(h.substring(0,4),10).toString(16),p=parseInt(h.substring(4,6),10),m=parseInt(x.substring(0,2),10),_=parseInt(x.substring(2,4),10),g=parseInt(x.substring(4,6),10),v=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i,0,0,parseInt(r.substring(0,2),16),parseInt(r.substring(2,4),16),0,0,0,s,0,0,0,l,0,0,0,d,0,0,0,c,0,0,0,u,0,0,parseInt(f.substring(0,2),16),parseInt(f.substring(2,4),16),0,0,0,p,0,0,0,l,0,0,0,m,0,0,0,_,0,0,0,g,0,0,0,0,0,0,0,0,n,0,0,0];return new Uint8Array(v)}playRateCmd(e){let t=(parseInt(e,10)>>>0).toString(16).toLocaleUpperCase().toString(16);for(let a=t.length;a<8;a++)t="0"+t;let i=[0,0,0,0];for(let a=0,o=t.length;a<o;a+=2)i[Math.floor(a/2)]=parseInt(t.substring(a,a+2),16);let n=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i[0],i[1],i[2],i[3]];return new Uint8Array(n)}pauseCmd(){let e=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(e)}resumeCmd(){let e=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(e)}}return e}();const m=3001,_=3002,g=3003;let v=function(){class e{constructor(){}createClientObject(e,t,i){return{socket:e,id:t,playURL:i,resolve:null,reject:null}}getMediaFromSdp(e){let t=e.indexOf("MEDIAINFO=")+10,i=e.slice(t,t+80),n=[];for(let a=0,o=i.length/2;a<o;a++)n[a]=parseInt(i.slice(2*a,2*a+2),16);return new Uint8Array(n)}playCmd(e){let t={sequence:0,cmd:"realplay",url:e};return JSON.stringify(t)}playbackCmd(e,t,i){let n={sequence:0,cmd:"playback",url:i,startTime:e,endTime:t};return JSON.stringify(n)}playRateCmd(e){let t={sequence:0,cmd:"changespeed",speed:e};return JSON.stringify(t)}pauseCmd(){let e={sequence:0,cmd:"pause"};return JSON.stringify(e)}resumeCmd(){let e={sequence:0,cmd:"resume"};return JSON.stringify(e)}getError(e){let t=m;return e&&(6===parseInt(e.statusCode,10)&&"streamLimit"===e.subStatusCode?t=_:4===parseInt(e.statusCode,10)&&"badAuthorization"===e.subStatusCode&&(t=g)),{iErrorNum:t,oError:e}}}return e}();var y=i(0),b=i.n(y),S=S||function(e,t){var i={},n=i.lib={},a=function(){},o=n.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=o.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var a=0;a<e;a++)t[n+a>>>2]|=(i[a>>>2]>>>24-a%4*8&255)<<24-(n+a)%4*8;else if(65535<i.length)for(a=0;a<e;a+=4)t[n+a>>>2]=i[a>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new r.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(i,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(i,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(la){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,a=i.sigBytes,o=this.blockSize,s=a/(4*o);s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,a=e.min(4*t,a),t){for(var l=0;l<t;l+=o)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=a}return new r.init(l,a)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);(function(){var e=S,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var a=0;a<i;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,r=0;4>r&&a+.75*r<i;r++)e.push(n.charAt(o>>>6*(3-r)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var i=e.length,n=this._map,a=n.charAt(64);a&&(a=e.indexOf(a),-1!=a&&(i=a));a=[];for(var o=0,r=0;r<i;r++)if(r%4){var s=n.indexOf(e.charAt(r-1))<<r%4*2,l=n.indexOf(e.charAt(r))>>>6-r%4*2;a[o>>>2]|=(s|l)<<24-o%4*8,o++}return t.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(e){function t(e,t,i,n,a,o,r){return e=e+(t&i|~t&n)+a+r,(e<<o|e>>>32-o)+t}function i(e,t,i,n,a,o,r){return e=e+(t&n|i&~n)+a+r,(e<<o|e>>>32-o)+t}function n(e,t,i,n,a,o,r){return e=e+(t^i^n)+a+r,(e<<o|e>>>32-o)+t}function a(e,t,i,n,a,o,r){return e=e+(i^(t|~n))+a+r,(e<<o|e>>>32-o)+t}for(var o=S,r=o.lib,s=r.WordArray,l=r.Hasher,d=(r=o.algo,[]),c=0;64>c;c++)d[c]=4294967296*e.abs(e.sin(c+1))|0;r=r.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var r=0;16>r;r++){var s=o+r,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}r=this._hash.words,s=e[o+0],l=e[o+1];var c=e[o+2],u=e[o+3],h=e[o+4],x=e[o+5],f=e[o+6],p=e[o+7],m=e[o+8],_=e[o+9],g=e[o+10],v=e[o+11],y=e[o+12],b=e[o+13],S=e[o+14],C=e[o+15],w=r[0],T=r[1],P=r[2],E=r[3];w=t(w,T,P,E,s,7,d[0]),E=t(E,w,T,P,l,12,d[1]),P=t(P,E,w,T,c,17,d[2]),T=t(T,P,E,w,u,22,d[3]),w=t(w,T,P,E,h,7,d[4]),E=t(E,w,T,P,x,12,d[5]),P=t(P,E,w,T,f,17,d[6]),T=t(T,P,E,w,p,22,d[7]),w=t(w,T,P,E,m,7,d[8]),E=t(E,w,T,P,_,12,d[9]),P=t(P,E,w,T,g,17,d[10]),T=t(T,P,E,w,v,22,d[11]),w=t(w,T,P,E,y,7,d[12]),E=t(E,w,T,P,b,12,d[13]),P=t(P,E,w,T,S,17,d[14]),T=t(T,P,E,w,C,22,d[15]),w=i(w,T,P,E,l,5,d[16]),E=i(E,w,T,P,f,9,d[17]),P=i(P,E,w,T,v,14,d[18]),T=i(T,P,E,w,s,20,d[19]),w=i(w,T,P,E,x,5,d[20]),E=i(E,w,T,P,g,9,d[21]),P=i(P,E,w,T,C,14,d[22]),T=i(T,P,E,w,h,20,d[23]),w=i(w,T,P,E,_,5,d[24]),E=i(E,w,T,P,S,9,d[25]),P=i(P,E,w,T,u,14,d[26]),T=i(T,P,E,w,m,20,d[27]),w=i(w,T,P,E,b,5,d[28]),E=i(E,w,T,P,c,9,d[29]),P=i(P,E,w,T,p,14,d[30]),T=i(T,P,E,w,y,20,d[31]),w=n(w,T,P,E,x,4,d[32]),E=n(E,w,T,P,m,11,d[33]),P=n(P,E,w,T,v,16,d[34]),T=n(T,P,E,w,S,23,d[35]),w=n(w,T,P,E,l,4,d[36]),E=n(E,w,T,P,h,11,d[37]),P=n(P,E,w,T,p,16,d[38]),T=n(T,P,E,w,g,23,d[39]),w=n(w,T,P,E,b,4,d[40]),E=n(E,w,T,P,s,11,d[41]),P=n(P,E,w,T,u,16,d[42]),T=n(T,P,E,w,f,23,d[43]),w=n(w,T,P,E,_,4,d[44]),E=n(E,w,T,P,y,11,d[45]),P=n(P,E,w,T,C,16,d[46]),T=n(T,P,E,w,c,23,d[47]),w=a(w,T,P,E,s,6,d[48]),E=a(E,w,T,P,p,10,d[49]),P=a(P,E,w,T,S,15,d[50]),T=a(T,P,E,w,x,21,d[51]),w=a(w,T,P,E,y,6,d[52]),E=a(E,w,T,P,u,10,d[53]),P=a(P,E,w,T,g,15,d[54]),T=a(T,P,E,w,l,21,d[55]),w=a(w,T,P,E,m,6,d[56]),E=a(E,w,T,P,C,10,d[57]),P=a(P,E,w,T,f,15,d[58]),T=a(T,P,E,w,b,21,d[59]),w=a(w,T,P,E,h,6,d[60]),E=a(E,w,T,P,v,10,d[61]),P=a(P,E,w,T,c,15,d[62]),T=a(T,P,E,w,_,21,d[63]);r[0]=r[0]+w|0,r[1]=r[1]+T|0,r[2]=r[2]+P|0,r[3]=r[3]+E|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;i[a>>>5]|=128<<24-a%32;var o=e.floor(n/4294967296);for(i[15+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),t=this._hash,i=t.words,n=0;4>n;n++)a=i[n],i[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=l._createHelper(r),o.HmacMD5=l._createHmacHelper(r)}(Math),function(){var e=S,t=e.lib,i=t.Base,n=t.WordArray,a=(t=e.algo,t.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var i=this.cfg,a=i.hasher.create(),o=n.create(),r=o.words,s=i.keySize;for(i=i.iterations;r.length<s;){l&&a.update(l);var l=a.update(e).finalize(t);a.reset();for(var d=1;d<i;d++)l=a.finalize(l),a.reset();o.concat(l)}return o.sigBytes=4*s,o}}));e.EvpKDF=function(e,t,i){return a.create(i).compute(e,t)}}(),S.lib.Cipher||function(e){var t=S,i=t.lib,n=i.Base,a=i.WordArray,o=i.BufferedBlockAlgorithm,r=t.enc.Base64,s=t.algo.EvpKDF,l=i.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,n){return("string"==typeof i?f:x).encrypt(e,t,i,n)},decrypt:function(t,i,n){return("string"==typeof i?f:x).decrypt(e,t,i,n)}}}});i.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=t.mode={},c=function(t,i,n){var a=this._iv;a?this._iv=e:a=this._prevBlock;for(var o=0;o<n;o++)t[i+o]^=a[o]},u=(i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;c.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),u.Decryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,a=e.slice(t,t+n);i.decryptBlock(e,t),c.call(this,e,t,n),this._prevBlock=a}}),d=d.CBC=u,u=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=(i=i-e.sigBytes%i,i<<24|i<<16|i<<8|i),o=[],r=0;r<i;r+=4)o.push(n);i=a.create(o,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:u}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv;e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=i.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),x=(d=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){e=r.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var i=a.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:i})}},i.SerializableCipher=n.extend({cfg:n.extend({format:d}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var a=e.createEncryptor(i,n);return t=a.finalize(t),a=a.cfg,h.create({ciphertext:t,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),f=(t=(t.kdf={}).OpenSSL={execute:function(e,t,i,n){return n||(n=a.random(8)),e=s.create({keySize:t+i}).compute(e,n),i=a.create(e.words.slice(t),4*i),e.sigBytes=4*t,h.create({key:e,iv:i,salt:n})}},i.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:t}),encrypt:function(e,t,i,n){return n=this.cfg.extend(n),i=n.kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,e=x.encrypt.call(this,e,t,i.key,n),e.mixIn(i),e},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,x.decrypt.call(this,e,t,i.key,n)}}))}(),function(){for(var e=S,t=e.lib.BlockCipher,i=e.algo,n=[],a=[],o=[],r=[],s=[],l=[],d=[],c=[],u=[],h=[],x=[],f=0;256>f;f++)x[f]=128>f?f<<1:f<<1^283;var p=0,m=0;for(f=0;256>f;f++){var _=m^m<<1^m<<2^m<<3^m<<4;_=_>>>8^255&_^99;n[p]=_,a[_]=p;var g=x[p],v=x[g],y=x[v],b=257*x[_]^16843008*_;o[p]=b<<24|b>>>8,r[p]=b<<16|b>>>16,s[p]=b<<8|b>>>24,l[p]=b,b=16843009*y^65537*v^257*g^16843008*p,d[_]=b<<24|b>>>8,c[_]=b<<16|b>>>16,u[_]=b<<8|b>>>24,h[_]=b,p?(p=g^x[x[x[y^g]]],m^=x[x[m]]):p=m=1}var C=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes/4,a=(e=4*((this._nRounds=i+6)+1),this._keySchedule=[]),o=0;o<e;o++)if(o<i)a[o]=t[o];else{var r=a[o-1];o%i?6<i&&4==o%i&&(r=n[r>>>24]<<24|n[r>>>16&255]<<16|n[r>>>8&255]<<8|n[255&r]):(r=r<<8|r>>>24,r=n[r>>>24]<<24|n[r>>>16&255]<<16|n[r>>>8&255]<<8|n[255&r],r^=C[o/i|0]<<24),a[o]=a[o-i]^r}for(t=this._invKeySchedule=[],i=0;i<e;i++)o=e-i,r=i%4?a[o]:a[o-4],t[i]=4>i||4>=o?r:d[n[r>>>24]]^c[n[r>>>16&255]]^u[n[r>>>8&255]]^h[n[255&r]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,r,s,l,n)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,d,c,u,h,a),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,a,o,r,s){for(var l=this._nRounds,d=e[t]^i[0],c=e[t+1]^i[1],u=e[t+2]^i[2],h=e[t+3]^i[3],x=4,f=1;f<l;f++){var p=n[d>>>24]^a[c>>>16&255]^o[u>>>8&255]^r[255&h]^i[x++],m=n[c>>>24]^a[u>>>16&255]^o[h>>>8&255]^r[255&d]^i[x++],_=n[u>>>24]^a[h>>>16&255]^o[d>>>8&255]^r[255&c]^i[x++];h=n[h>>>24]^a[d>>>16&255]^o[c>>>8&255]^r[255&u]^i[x++],d=p,c=m,u=_}p=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^i[x++],m=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^i[x++],_=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^i[x++],h=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^i[x++],e[t]=p,e[t+1]=m,e[t+2]=_,e[t+3]=h},keySize:8});e.AES=t._createHelper(i)}();var C=S;let w=function(){class e{constructor(){}createClientObject(e,t,i,n,a){let o=C.AES.encrypt((new Date).getTime().toString(),C.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:C.mode.CBC,iv:C.enc.Hex.parse("12345678912345671234567891234567"),padding:C.pad.Pkcs7}).ciphertext.toString();o.length<64&&(o+=o);let r=C.AES.encrypt((new Date).getTime().toString(),C.enc.Hex.parse("12345678912345671234567891234567"),{mode:C.mode.CBC,iv:C.enc.Hex.parse("12345678912345671234567891234567"),padding:C.pad.Pkcs7}).ciphertext.toString();return{socket:e,id:t,PKD:i,rand:n,playURL:a.playURL||"",auth:a.auth||"",token:a.token||"",key:o,iv:r,resolve:null,reject:null}}playCmd(e){let t={sequence:0,cmd:"realplay",url:e.playURL,key:b.a.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:C.AES.encrypt(e.rand+":"+e.auth,C.enc.Hex.parse(e.key),{mode:C.mode.CBC,iv:C.enc.Hex.parse(e.iv),padding:C.pad.Pkcs7}).ciphertext.toString(),token:C.AES.encrypt(e.token,C.enc.Hex.parse(e.key),{mode:C.mode.CBC,iv:C.enc.Hex.parse(e.iv),padding:C.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(t)}playbackCmd(e,t,i){let n={sequence:0,cmd:"playback",url:e.playURL,key:b.a.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:C.AES.encrypt(e.rand+":"+e.auth,C.enc.Hex.parse(e.key),{mode:C.mode.CBC,iv:C.enc.Hex.parse(e.iv),padding:C.pad.Pkcs7}).ciphertext.toString(),token:C.AES.encrypt(e.token,C.enc.Hex.parse(e.key),{mode:C.mode.CBC,iv:C.enc.Hex.parse(e.iv),padding:C.pad.Pkcs7}).ciphertext.toString(),startTime:t,endTime:i};return JSON.stringify(n)}seekCmd(e,t){let i={sequence:0,cmd:"seek",startTime:e,endTime:t};return JSON.stringify(i)}}return e}(),T=function(){class e{constructor(){}createClientObject(e,t,i,n){return{socket:e,id:t,playURL:i,deviceSerial:n.deviceSerial||"",verificationCode:n.verificationCode||"",resolve:null,reject:null}}playCmd(e){let t={sequence:0,cmd:"realplay",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL};return JSON.stringify(t)}playbackCmd(e,t,i){let n={sequence:0,cmd:"playback",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL,startTime:t,endTime:i};return JSON.stringify(n)}}return e}(),P=function(){const e=Symbol("WEBSOCKET"),t=Symbol("GETINDEX"),i=Symbol("PROTOCOLVERSION"),n=Symbol("CIPHERSUITES");let a=new p,o=new v,r=new w,s=new T;class l{constructor(){this[i]="0.1",this[n]=0,this[e]=[],this.ERRORS={},this[t]=function(t){let i=-1;for(let n=0,a=this[e].length;n<a;n++)if(this[e][n].id===t){i=n;break}return i}}openStream(l,d,c,u){let h=!1;l.indexOf("[")>-1&&(h=!0);let x=this,p=l.split("://"),m=p[0],_="",g=7681,v=1,y=0,b=!1;if(h)_=p[1].split("]:")[0]+"]",g=Math.floor(p[1].split("]:")[1].split("/")[0]),v=Math.floor(p[1].split("]:")[1].split("/")[1]/100),y=Math.floor(p[1].split("]:")[1].split("/")[1]%100)-1;else{_=p[1].split(":")[0],g=Math.floor(p[1].split(":")[1].split("/")[0]),v=Math.floor(p[1].split(":")[1].split("/")[1]/100),y=Math.floor(p[1].split(":")[1].split("/")[1]%100)-1;let e=p[1].split(":")[1].split("/")[2];""!==e&&"webSocketVideoCtrlProxy"===e&&(b=!0)}0===v&&(y=0),d=d||{};let S="&sessionID=";d.token&&!d.playURL&&(S="&token=");let C=d.sessionID||d.session||(d.playURL?"":d.token)||"",w=new window.WebSocket(m+"://"+_+":"+g+(d.mode?"/"+d.mode:"")+(b?"/webSocketVideoCtrlProxy":"")+"?version="+x[i]+"&cipherSuites="+x[n]+S+C+(d.proxy?"&proxy="+d.proxy:""));w.binaryType="arraybuffer";let T=f(),P=-1,E=new Promise((function(l,h){w.onopen=function(){d.playURL||d.sessionID||d.deviceSerial||d.token||(x[e].push(a.createClientObject(w,T,v,y)),l(T))},w.onmessage=function(a){if("string"===typeof a.data){let u=JSON.parse(a.data),f=x[t](T);if(u&&u.version&&u.cipherSuite){if(x[i]=u.version,x[n]=parseInt(u.cipherSuite,10),u&&u.PKD&&u.rand)x[e].push(r.createClientObject(w,T,u.PKD,u.rand,d));else{let t="live://"+_+":"+g+"/"+v+"/"+y;-1===x[n]?x[e].push(s.createClientObject(w,T,t,d)):x[e].push(o.createClientObject(w,T,t))}return void l(T)}if(u&&u.sdp){let e=o.getMediaFromSdp(u.sdp);c({bHead:!0,buf:e})}if(u&&u.cmd&&"end"===u.cmd&&c({type:"exception",cmd:u.cmd}),u&&u.statusString&&("ok"===u.statusString.toLowerCase()&&x[e][f].resolve&&x[e][f].resolve(u),"ok"!==u.statusString.toLowerCase())){let t=o.getError(u);f>-1?x[e][f].reject&&x[e][f].reject(t):h(t)}u&&u.errorCode&&c(u)}else{let e={},t=new Uint8Array(a.data);if(P++,64===t.byteLength||40===t.byteLength){let i=-1,n=t.byteLength;for(let e=0;e<n;e++)if(73===t[e]&&77===t[e+1]&&75===t[e+2]&&72===t[e+3]){i=e;break}if(-1!==i){let n=t.slice(i,i+40);e={bHead:!0,buf:n}}else e={bHead:!1,buf:t};c(e)}else P>0&&(e={bHead:!1,buf:t},c(e));t=null,e=null,a=null}},w.onclose=function(){for(let t=0,i=x[e].length;t<i;t++)if(x[e][t].id===T){x[e][t].resolve(),x[e].splice(t,1),setTimeout((function(){u()}),200);break}h()}}));return E}startPlay(l,d,c){let u=this,h=this[t](l);d&&c&&"0.1"===u[i]&&(d=d.replace(/-/g,"").replace(/:/g,""),c=c.replace(/-/g,"").replace(/:/g,""));let x=new Promise((function(t,l){if(h>-1){u[e][h].resolve=t,u[e][h].reject=l;let x=null;d&&c?"0.1"!==u[i]?0===u[n]?x=r.playbackCmd(u[e][h],d,c):1===u[n]?x=o.playbackCmd(d,c,u[e][h].playURL):-1===u[n]&&(x=s.playbackCmd(u[e][h],d,c)):x=a.playbackCmd(d,c,u[e][h].iCurChannel,u[e][h].iCurStream):0===u[e][h].iCurChannel&&"0.1"===u[i]?x=a.zeroPlayCmd(u[e][h].iCurChannel,u[e][h].iCurStream):"0.1"!==u[i]?0===u[n]?x=r.playCmd(u[e][h]):1===u[n]?x=o.playCmd(u[e][h].playURL):-1===u[n]&&(x=s.playCmd(u[e][h])):x=a.playCmd(u[e][h].iCurChannel,u[e][h].iCurStream),u[e][h].socket.send(x),"0.1"===u[i]&&t()}else"0.1"===u[i]&&l()}));return x}singleFrame(){}setPlayRate(t,n){let r=this,s=new Promise((function(s,l){for(let d=0,c=r[e].length;d<c;d++)if(r[e][d].id===t){if("0.1"===r[i]){let t=a.playRateCmd(n);r[e][d].socket.send(t),s();break}{r[e][d].resolve=s,r[e][d].reject=l;let t=o.playRateCmd(n);r[e][d].socket.send(t)}}}));return s}seek(t,i,n){let a=this,o=new Promise((function(o,s){for(let l=0,d=a[e].length;l<d;l++)if(a[e][l].id===t){a[e][l].resolve=o,a[e][l].reject=s;let t=r.seekCmd(i,n);a[e][l].socket.send(t)}}));return o}pause(t){let n=this,r=new Promise((function(r,s){for(let l=0,d=n[e].length;l<d;l++)if(n[e][l].id===t){if("0.1"===n[i]){let t=a.pauseCmd();n[e][l].socket.send(t),r();break}{n[e][l].resolve=r,n[e][l].reject=s;let t=o.pauseCmd();n[e][l].socket.send(t)}}}));return r}transmission(t,i){let n=this,a=new Promise((function(a,o){for(let r=0,s=n[e].length;r<s;r++)n[e][r].id===t&&(n[e][r].resolve=a,n[e][r].reject=o,n[e][r].socket.send(i))}));return a}resume(t){let n=this,r=new Promise((function(r,s){for(let l=0,d=n[e].length;l<d;l++)if(n[e][l].id===t){if("0.1"===n[i]){let t=a.resumeCmd();n[e][l].socket.send(t),r();break}{n[e][l].resolve=r,n[e][l].reject=s;let t=o.resumeCmd();n[e][l].socket.send(t)}}}));return r}stop(t){let i=this,n=new Promise((function(n,a){if(t){let o=-1;for(let a=0,r=i[e].length;a<r;a++)if(i[e][a].id===t){o=a,i[e][a].resolve=n,i[e][a].socket.close(1e3,"CLOSE");break}-1===o&&a()}else a()}));return n}stopAll(){let t=this,i=new Promise((function(i,n){for(let a=0,o=t[e].length;a<o;a++)t[e][a].socket.close(1e3,"CLOSE");console.log("停止所有流"),i()}));return i}}return l}()}])}))})(xi);var fi,pi=xi.exports,mi=new Uint8Array(16);function _i(){if(!fi&&(fi="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!fi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fi(mi)}var gi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vi(e){return"string"===typeof e&&gi.test(e)}for(var yi=[],bi=0;bi<256;++bi)yi.push((bi+256).toString(16).substr(1));function Si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(yi[e[t+0]]+yi[e[t+1]]+yi[e[t+2]]+yi[e[t+3]]+"-"+yi[e[t+4]]+yi[e[t+5]]+"-"+yi[e[t+6]]+yi[e[t+7]]+"-"+yi[e[t+8]]+yi[e[t+9]]+"-"+yi[e[t+10]]+yi[e[t+11]]+yi[e[t+12]]+yi[e[t+13]]+yi[e[t+14]]+yi[e[t+15]]).toLowerCase();if(!vi(i))throw TypeError("Stringified UUID is invalid");return i}function Ci(e,t,i){e=e||{};var n=e.random||(e.rng||_i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var a=0;a<16;++a)t[i+a]=n[a];return t}return Si(n)}class wi{constructor(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}$(e){var t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,i=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(t.test(e)){var n=t.exec(e);return document.getElementById(n[2])}if(i.test(e)){for(var a=i.exec(e),o=document.getElementsByTagName("*"),r=[],s=0,l=o.length;s<l;s++)o[s].className.match(new RegExp("(\\s|^)"+a[2]+"(\\s|$)"))&&r.push(o[s]);return r}}dateFormat(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}downloadFile(e,t){let i=e;e instanceof Blob||e instanceof File||(i=new Blob([e]));var n=window.URL.createObjectURL(i),a=window.document.createElement("a");a.href=n,a.download=t;var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),a.dispatchEvent(o)}createxmlDoc(){for(var e,t=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"],i=0,n=t.length;i<n;i++)try{e=new ActiveXObject(t[i]);break}catch(ia){e=document.implementation.createDocument("","",null);break}return e.async="false",e}parseXmlFromStr(e){if(null===e||""===e)return null;var t=this.createxmlDoc();if("Netscape"===navigator.appName||"Opera"===navigator.appName){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t.loadXML(e);return t}encode(e){var t,i,n,a,o,r,s,l="",d=0;e=this._utf8_encode(e);while(d<e.length)t=e.charCodeAt(d++),i=e.charCodeAt(d++),n=e.charCodeAt(d++),a=t>>2,o=(3&t)<<4|i>>4,r=(15&i)<<2|n>>6,s=63&n,isNaN(i)?r=s=64:isNaN(n)&&(s=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(s);return l}decode(e){var t,i,n,a,o,r,s,l="",d=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");while(d<e.length)a=this._keyStr.indexOf(e.charAt(d++)),o=this._keyStr.indexOf(e.charAt(d++)),r=this._keyStr.indexOf(e.charAt(d++)),s=this._keyStr.indexOf(e.charAt(d++)),t=a<<2|o>>4,i=(15&o)<<4|r>>2,n=(3&r)<<6|s,l+=String.fromCharCode(t),64!==r&&(l+=String.fromCharCode(i)),64!==s&&(l+=String.fromCharCode(n));return l=this._utf8_decode(l),l}_utf8_encode(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}_utf8_decode(e){var t="",i=0,n=0,a=0;while(i<e.length)if(n=e.charCodeAt(i),n<128)t+=String.fromCharCode(n),i++;else if(n>191&&n<224)a=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&a),i+=2;else{a=e.charCodeAt(i+1);var o=e.charCodeAt(i+2);t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&o),i+=3}return t}isFirefox(){var e=!1,t=navigator.userAgent.toLowerCase(),i="",n=-1;return t.match(/firefox\/([\d.]+)/)&&(i=t.match(/firefox\/([\d.]+)/)[1],n=parseInt(i.split(".")[0],10),n>-1&&(e=!0)),e}isSafari(){var e=!1,t=navigator.userAgent.toLowerCase(),i="",n=-1;return t.match(/version\/([\d.]+).safari./)&&(i=t.match(/version\/([\d.]+).safari./)[1],n=parseInt(i.split(".")[0],10),n>-1&&(e=!0)),e}isEdge(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}isIOS(){let e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return t}}let Ti=new wi;const Pi=(e="https://open.ys7.com/assets/ezuikit_v3.6")=>`(function() {\n    const RECORDRTP = 0;  //录制一份未经过转封装的码流原始数据，用于定位问题\n    self.Module = { memoryInitializerRequest: loadMemInitFile(), TOTAL_MEMORY: 128*1024*1024 };\n    importScripts = (function (globalEval) {\n        var xhr = new XMLHttpRequest;\n        return function importScripts() {\n          var\n            args = Array.prototype.slice.call(arguments)\n            , len = args.length\n            , i = 0\n            , meta\n            , data\n            , content\n            ;\n          for (; i < len; i++) {\n            if (args[i].substr(0, 5).toLowerCase() === "data:") {\n              data = args[i];\n              content = data.indexOf(",");\n              meta = data.substr(5, content).toLowerCase();\n              data = decodeURIComponent(data.substr(content + 1));\n              if (/;s*base64s*[;,]/.test(meta)) {\n                data = atob(data);\n              }\n              if (/;s*charset=[uU][tT][fF]-?8s*[;,]/.test(meta)) {\n                data = decodeURIComponent(escape(data));\n              }\n            } else {\n              xhr.open("GET", args[i], false);\n              xhr.send(null);\n              data = xhr.responseText;\n            }\n            globalEval(data);\n          }\n        };\n      }(eval));\n    importScripts('${e}/js/transform/SystemTransform.js');\n\n    Module.postRun.push(function() {\n        postMessage({type: "loaded"});\n    });\n\n    onmessage = function (e) {\n        var data = e.data;\n\n        if ("create" === data.type) {\n            var iHeadLen = data.len;\n            var pHead = Module._malloc(iHeadLen);\n\n            var aData = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n            aData.set(new Uint8Array(data.buf));\n\n            var iTransType = data.packType;//目标格式 RTP->PS\n            if (RECORDRTP) {\n                postMessage({type: "created"});\n                postMessage({type: "outputData", buf: data.buf, dType: 1}, [data.buf]);\n            } else {\n                var iRet = Module._ST_Create(pHead, iHeadLen, iTransType);\n                if (iRet != 0) {\n                    console.log("_ST_Create failed!");\n                } else {\n                    Module._ST_Start();\n                    postMessage({type: "created"});\n                }\n            }\n\n        } else if ("inputData" === data.type) {\n            if (RECORDRTP) {\n                var aFileData = new Uint8Array(data.buf);  // 拷贝一份\n                var iBufferLen = aFileData.length;\n                var szBufferLen = iBufferLen.toString(16);\n                if (szBufferLen.length === 1) {\n                    szBufferLen = "000" + szBufferLen;\n                } else if (szBufferLen.length === 2) {\n                    szBufferLen = "00" + szBufferLen;\n                } else if (szBufferLen.length === 3) {\n                    szBufferLen = "0" + szBufferLen;\n                }\n                var aData = [0, 0, parseInt(szBufferLen.substring(0, 2), 16), parseInt(szBufferLen.substring(2, 4), 16)];\n                for(var iIndex = 0, iDataLength = aFileData.length; iIndex < iDataLength; iIndex++) {\n                    aData[iIndex + 4] = aFileData[iIndex]\n                }\n                var dataUint8 = new Uint8Array(aData);\n                postMessage({type: "outputData", buf: dataUint8.buffer, dType: 2}, [dataUint8.buffer]);\n            } else {\n                var iDataLen = data.len;\n                var pData = Module._malloc(iDataLen);\n\n                var aData = Module.HEAPU8.subarray(pData, pData + iDataLen);\n                aData.set(new Uint8Array(data.buf));\n\n                var iRet = Module._ST_InputData(0, pData, iDataLen);\n                if (iRet != 0) {\n                    //console.log("_ST_InputData failed!");// 一开始会有一些失败，但是不影响后面的文件存储\n                }\n\n                Module._free(pData);\n            }\n        } else if ("release" === data.type) {\n            Module._ST_Stop();\n            Module._ST_Release();\n\n            close();\n        }\n    };\n\n    function loadMemInitFile() {\n        var req = new XMLHttpRequest();\n        req.open('GET', '${e}/js/transform/SystemTransform.js.mem');\n        req.responseType = 'arraybuffer';\n        req.send();\n\n        return req;\n    }\n})();`,Ei="Web/RecordFiles/",ki="Web/PlaybackFiles/",Ri=1e3,Ii=1,Di=3001;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.URL=window.URL||window.webkitURL;class Mi{constructor(e,t,i,n){this.szUUID=e,this.szFileName=t,this.iStreamType=i,this.szPath="",this.bStart=!1,this.aStreamList=[],this.options=n}init(){var e=this;0===this.iStreamType?this.szPath=Ei:1===this.iStreamType&&(this.szPath=ki),this.szPath+=this.getDateDir();var t=e.szPath.split("/"),i=new Promise((function(i){window.requestFileSystem(window.TEMPORARY,e.options.iFileSize,(function(n){e.createDir(n.root,t,(function(){i()}))}),e.errorHandler)}));return i}getDateDir(){return Ti.dateFormat(new Date,"yyyy-MM-dd")}createDir(e,t,i){var n=this;t.length?e.getDirectory(t[0],{create:!0},(function(e){n.createDir(e,t.slice(1),i)}),n.errorHandler):i()}errorHandler(){}writeFileHeader(e){var t=this;window.requestFileSystem(window.TEMPORARY,t.options.iFileSize,(function(i){i.root.getFile(t.szPath+"/"+t.szFileName,{create:!0},(function(i){i.createWriter((function(i){i.onwriteend=function(){t.bStart=!0,t.writeFile(i)},i.onerror=function(){},i.seek(i.length);var n=new Blob([e]);i.write(n)}),t.errorHandler)}),t.errorHandler)}),t.errorHandler)}writeFileContent(e){this.aStreamList.push(e)}writeFile(e){var t=this;if(this.bStart)if(this.aStreamList.length>0){var i=this.aStreamList.shift();if(e.seek(e.length),e.length>=this.options.iFileSize)return void(this.options.cbEventHandler&&this.options.cbEventHandler(Di,this.szUUID));var n=new Blob([i]);e.write(n)}else setTimeout((function(){t.writeFile(e)}),Ri)}stopWriteFile(){var e=this;this.bStart=!1,this.aStreamList.length=0;var t=new Promise((function(t){window.requestFileSystem(window.TEMPORARY,e.options.iFileSize,(function(i){i.root.getFile(e.szPath+"/"+e.szFileName,{create:!1},(function(e){e.file((function(e){t(),Ti.downloadFile(e,e.name)}))}),e.errorHandler)}),e.errorHandler)}));return t}}class Ai{constructor(e,t,i,n,a,o,r,s){this.szBasePath=e,this.szUUID=t,this.szFileName=i,this.aHeadBuf=new Uint8Array(n),this.iPackType=a,this.iStreamType=o,this.oWorker=null,this.oFileSystem=null,this.options=r,this.bHead=!0,this.staticPath=s}init(){var e=this,t=new Promise((function(t,i){e.initFileSystem().then((function(){e.initWorker().then((function(){t(e.szUUID)}),(function(e){i(e)}))}),(function(e){i(e)}))}));return t}initFileSystem(){var e=this;this.oFileSystem=new Mi(this.szUUID,this.szFileName,this.iStreamType,this.options);var t=new Promise((function(t,i){e.oFileSystem.init().then((function(){t()}),(function(e){i(e)}))}));return t}initWorker(){var e=this,t=new Promise((function(t){var i=new Blob([Pi(e.staticPath)]);const n=URL.createObjectURL(i);e.oWorker=new Worker(n),e.oWorker.onmessage=function(i){var n=i.data;let a=e.iPackType;if(1===e.options.iPackage&&(a=12),"loaded"===n.type)e.oWorker.postMessage({type:"create",buf:e.aHeadBuf.buffer,len:40,packType:a},[e.aHeadBuf.buffer]);else if("created"===n.type)t();else if("outputData"===n.type){var o=new Uint8Array(n.buf);1===e.options.iPackage?e.bHead?(e.oFileSystem.writeFileHeader(o),e.bHead=!1):e.oFileSystem.writeFileContent(o):Ii===n.dType?e.oFileSystem.writeFileHeader(o):e.oFileSystem.writeFileContent(o)}}}));return t}inputData(e){if(this.oWorker){var t=new Uint8Array(e);this.oWorker.postMessage({type:"inputData",buf:t.buffer,len:t.length},[t.buffer])}}stopRecord(){var e=this,t=new Promise((function(t,i){e.oWorker?e.oWorker.postMessage({type:"release"}):i(),e.oFileSystem?e.oFileSystem.stopWriteFile().then((function(){e.bHead=!0,t()}),(function(){i()})):i()}));return t}}var Bi=function(){var e=Symbol("STORAGELIST");class t{constructor(t,i,n){this.szBasePath=t,this[e]={},this.options={iFileSize:1073741824},Object.assign(this.options,i),"string"===typeof i.staticPath&&(this.staticPath=i.staticPath)}startRecord(t,i,n,a,o){var r=this,s=Ci(),l=Object.assign({},this.options,o),d=new Ai(this.szBasePath,s,t,i,n,a,l,this.staticPath),c=new Promise((function(t,i){d.init().then((function(i){r[e][i]=d,t(i)}),(function(e){i(e)}))}));return c}inputData(t,i){var n=this[e][t];n&&n.inputData(i)}stopRecord(t){var i=this,n=new Promise((function(n,a){var o=i[e][t];o?o.stopRecord().then((function(){delete i[e][t],n()}),(function(){a()})):a()}));return n}}return t}(),Li={exports:{}};(function(e){(function(t,i){e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}})("undefined"!==typeof window?window:z,(function(e,t){var i=[],n=Object.getPrototypeOf,a=i.slice,o=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},r=i.push,s=i.indexOf,l={},d=l.toString,c=l.hasOwnProperty,u=c.toString,h=u.call(Object),x={},f=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},p=function(e){return null!=e&&e===e.window},m=e.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function g(e,t,i){i=i||m;var n,a,o=i.createElement("script");if(o.text=e,t)for(n in _)a=t[n]||t.getAttribute&&t.getAttribute(n),a&&o.setAttribute(n,a);i.head.appendChild(o).parentNode.removeChild(o)}function v(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?l[d.call(e)]||"object":typeof e}var y="3.7.1",b=/HTML$/i,S=function(e,t){return new S.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,i=v(e);return!f(e)&&!p(e)&&("array"===i||0===t||"number"===typeof t&&t>0&&t-1 in e)}function w(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}S.fn=S.prototype={jquery:y,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:i.sort,splice:i.splice},S.extend=S.fn.extend=function(){var e,t,i,n,a,o,r=arguments[0]||{},s=1,l=arguments.length,d=!1;for("boolean"===typeof r&&(d=r,r=arguments[s]||{},s++),"object"===typeof r||f(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&r!==n&&(d&&n&&(S.isPlainObject(n)||(a=Array.isArray(n)))?(i=r[t],o=a&&!Array.isArray(i)?[]:a||S.isPlainObject(i)?i:{},a=!1,r[t]=S.extend(d,o,n)):void 0!==n&&(r[t]=n));return r},S.extend({expando:"jQuery"+(y+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==d.call(e))&&(t=n(e),!t||(i=c.call(t,"constructor")&&t.constructor,"function"===typeof i&&u.call(i)===h))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){g(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(C(e)){for(i=e.length;n<i;n++)if(!1===t.call(e[n],n,e[n]))break}else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},text:function(e){var t,i="",n=0,a=e.nodeType;if(!a)while(t=e[n++])i+=S.text(t);return 1===a||11===a?e.textContent:9===a?e.documentElement.textContent:3===a||4===a?e.nodeValue:i},makeArray:function(e,t){var i=t||[];return null!=e&&(C(Object(e))?S.merge(i,"string"===typeof e?[e]:e):r.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:s.call(t,e,i)},isXMLDoc:function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!b.test(t||i&&i.nodeName||"HTML")},merge:function(e,t){for(var i=+t.length,n=0,a=e.length;n<i;n++)e[a++]=t[n];return e.length=a,e},grep:function(e,t,i){for(var n,a=[],o=0,r=e.length,s=!i;o<r;o++)n=!t(e[o],o),n!==s&&a.push(e[o]);return a},map:function(e,t,i){var n,a,r=0,s=[];if(C(e))for(n=e.length;r<n;r++)a=t(e[r],r,i),null!=a&&s.push(a);else for(r in e)a=t(e[r],r,i),null!=a&&s.push(a);return o(s)},guid:1,support:x}),"function"===typeof Symbol&&(S.fn[Symbol.iterator]=i[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var T=i.pop,P=i.sort,E=i.splice,k="[\\x20\\t\\r\\n\\f]",R=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g");S.contains=function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}S.escapeSelector=function(e){return(e+"").replace(I,D)};var M=m,A=r;(function(){var t,n,o,r,l,d,u,h,f,p,m=A,_=S.expando,g=0,v=0,y=te(),b=te(),C=te(),I=te(),D=function(e,t){return e===t&&(l=!0),0},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+k+"*("+L+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+k+"*\\]",j=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",z=new RegExp(k+"+","g"),O=new RegExp("^"+k+"*,"+k+"*"),N=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),U=new RegExp(k+"|>"),H=new RegExp(j),V=new RegExp("^"+L+"$"),G={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,J=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),q=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},K=function(){de()},$=xe((function(e){return!0===e.disabled&&w(e,"fieldset")}),{dir:"parentNode",next:"legend"});function Q(){try{return d.activeElement}catch(e){}}try{m.apply(i=a.call(M.childNodes),M.childNodes),i[M.childNodes.length].nodeType}catch(ia){m={apply:function(e,t){A.apply(e,a.call(t))},call:function(e){A.apply(e,a.call(arguments,1))}}}function ee(e,t,i,n){var a,o,r,s,l,c,u,p=t&&t.ownerDocument,g=t?t.nodeType:9;if(i=i||[],"string"!==typeof e||!e||1!==g&&9!==g&&11!==g)return i;if(!n&&(de(t),t=t||d,h)){if(11!==g&&(l=Z.exec(e)))if(a=l[1]){if(9===g){if(!(r=t.getElementById(a)))return i;if(r.id===a)return m.call(i,r),i}else if(p&&(r=p.getElementById(a))&&ee.contains(t,r)&&r.id===a)return m.call(i,r),i}else{if(l[2])return m.apply(i,t.getElementsByTagName(e)),i;if((a=l[3])&&t.getElementsByClassName)return m.apply(i,t.getElementsByClassName(a)),i}if(!I[e+" "]&&(!f||!f.test(e))){if(u=e,p=t,1===g&&(U.test(e)||N.test(e))){p=X.test(e)&&le(t.parentNode)||t,p==t&&x.scope||((s=t.getAttribute("id"))?s=S.escapeSelector(s):t.setAttribute("id",s=_)),c=ue(e),o=c.length;while(o--)c[o]=(s?"#"+s:":scope")+" "+he(c[o]);u=c.join(",")}try{return m.apply(i,p.querySelectorAll(u)),i}catch(v){I(e,!0)}finally{s===_&&t.removeAttribute("id")}}}return be(e.replace(R,"$1"),t,i,n)}function te(){var e=[];function t(i,a){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=a}return t}function ie(e){return e[_]=!0,e}function ne(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(ia){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ae(e){return function(t){return w(t,"input")&&t.type===e}}function oe(e){return function(t){return(w(t,"input")||w(t,"button"))&&t.type===e}}function re(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&$(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return ie((function(t){return t=+t,ie((function(i,n){var a,o=e([],i.length,t),r=o.length;while(r--)i[a=o[r]]&&(i[a]=!(n[a]=i[a]))}))}))}function le(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function de(e){var t,i=e?e.ownerDocument||e:M;return i!=d&&9===i.nodeType&&i.documentElement?(d=i,u=d.documentElement,h=!S.isXMLDoc(d),p=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,u.msMatchesSelector&&M!=d&&(t=d.defaultView)&&t.top!==t&&t.addEventListener("unload",K),x.getById=ne((function(e){return u.appendChild(e).id=S.expando,!d.getElementsByName||!d.getElementsByName(S.expando).length})),x.disconnectedMatch=ne((function(e){return p.call(e,"*")})),x.scope=ne((function(){return d.querySelectorAll(":scope")})),x.cssHas=ne((function(){try{return d.querySelector(":has(*,:jqfake)"),!1}catch(ia){return!0}})),x.getById?(n.filter.ID=function(e){var t=e.replace(J,q);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(J,q);return function(e){var i="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var i,n,a,o=t.getElementById(e);if(o){if(i=o.getAttributeNode("id"),i&&i.value===e)return[o];a=t.getElementsByName(e),n=0;while(o=a[n++])if(i=o.getAttributeNode("id"),i&&i.value===e)return[o]}return[]}}),n.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},n.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&h)return t.getElementsByClassName(e)},f=[],ne((function(e){var t;u.appendChild(e).innerHTML="<a id='"+_+"' href='' disabled='disabled'></a><select id='"+_+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||f.push("\\["+k+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+_+"-]").length||f.push("~="),e.querySelectorAll("a#"+_+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll(":checked").length||f.push(":checked"),t=d.createElement("input"),t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),u.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),t=d.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+k+"*name"+k+"*="+k+"*(?:''|\"\")")})),x.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),D=function(e,t){if(e===t)return l=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===d||e.ownerDocument==M&&ee.contains(M,e)?-1:t===d||t.ownerDocument==M&&ee.contains(M,t)?1:r?s.call(r,e)-s.call(r,t):0:4&i?-1:1)},d):d}for(t in ee.matches=function(e,t){return ee(e,null,null,t)},ee.matchesSelector=function(e,t){if(de(e),h&&!I[t+" "]&&(!f||!f.test(t)))try{var i=p.call(e,t);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(ia){I(t,!0)}return ee(t,d,null,[e]).length>0},ee.contains=function(e,t){return(e.ownerDocument||e)!=d&&de(e),S.contains(e,t)},ee.attr=function(e,t){(e.ownerDocument||e)!=d&&de(e);var i=n.attrHandle[t.toLowerCase()],a=i&&c.call(n.attrHandle,t.toLowerCase())?i(e,t,!h):void 0;return void 0!==a?a:e.getAttribute(t)},ee.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S.uniqueSort=function(e){var t,i=[],n=0,o=0;if(l=!x.sortStable,r=!x.sortStable&&a.call(e,0),P.call(e,D),l){while(t=e[o++])t===e[o]&&(n=i.push(o));while(n--)E.call(e,i[n],1)}return r=null,e},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(a.apply(this)))},n=S.expr={cacheLength:50,createPseudo:ie,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,q),e[3]=(e[3]||e[4]||e[5]||"").replace(J,q),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ee.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ee.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&H.test(i)&&(t=ue(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,q).toLowerCase();return"*"===e?function(){return!0}:function(e){return w(e,t)}},CLASS:function(e){var t=y[e+" "];return t||(t=new RegExp("(^|"+k+")"+e+"("+k+"|$)"))&&y(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var a=ee.attr(n,e);return null==a?"!="===t:!t||(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.slice(-i.length)===i:"~="===t?(" "+a.replace(z," ")+" ").indexOf(i)>-1:"|="===t&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,a){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var d,c,u,h,x,f=o!==r?"nextSibling":"previousSibling",p=t.parentNode,m=s&&t.nodeName.toLowerCase(),v=!l&&!s,y=!1;if(p){if(o){while(f){u=t;while(u=u[f])if(s?w(u,m):1===u.nodeType)return!1;x=f="only"===e&&!x&&"nextSibling"}return!0}if(x=[r?p.firstChild:p.lastChild],r&&v){c=p[_]||(p[_]={}),d=c[e]||[],h=d[0]===g&&d[1],y=h&&d[2],u=h&&p.childNodes[h];while(u=++h&&u&&u[f]||(y=h=0)||x.pop())if(1===u.nodeType&&++y&&u===t){c[e]=[g,h,y];break}}else if(v&&(c=t[_]||(t[_]={}),d=c[e]||[],h=d[0]===g&&d[1],y=h),!1===y)while(u=++h&&u&&u[f]||(y=h=0)||x.pop())if((s?w(u,m):1===u.nodeType)&&++y&&(v&&(c=u[_]||(u[_]={}),c[e]=[g,y]),u===t))break;return y-=a,y===n||y%n===0&&y/n>=0}}},PSEUDO:function(e,t){var i,a=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ee.error("unsupported pseudo: "+e);return a[_]?a(t):a.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ie((function(e,i){var n,o=a(e,t),r=o.length;while(r--)n=s.call(e,o[r]),e[n]=!(i[n]=o[r])})):function(e){return a(e,0,i)}):a}},pseudos:{not:ie((function(e){var t=[],i=[],n=ye(e.replace(R,"$1"));return n[_]?ie((function(e,t,i,a){var o,r=n(e,null,a,[]),s=e.length;while(s--)(o=r[s])&&(e[s]=!(t[s]=o))})):function(e,a,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}})),has:ie((function(e){return function(t){return ee(e,t).length>0}})),contains:ie((function(e){return e=e.replace(J,q),function(t){return(t.textContent||S.text(t)).indexOf(e)>-1}})),lang:ie((function(e){return V.test(e||"")||ee.error("unsupported lang: "+e),e=e.replace(J,q).toLowerCase(),function(t){var i;do{if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===u},focus:function(e){return e===Q()&&d.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:re(!1),disabled:re(!0),checked:function(e){return w(e,"input")&&!!e.checked||w(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){return w(e,"input")&&"button"===e.type||w(e,"button")},text:function(e){var t;return w(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,i){return[i<0?i+t:i]})),even:se((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:se((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:se((function(e,t,i){var n;for(n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:se((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=ae(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=oe(t);function ce(){}function ue(e,t){var i,a,o,r,s,l,d,c=b[e+" "];if(c)return t?0:c.slice(0);s=e,l=[],d=n.preFilter;while(s){for(r in i&&!(a=O.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(o=[])),i=!1,(a=N.exec(s))&&(i=a.shift(),o.push({value:i,type:a[0].replace(R," ")}),s=s.slice(i.length)),n.filter)!(a=G[r].exec(s))||d[r]&&!(a=d[r](a))||(i=a.shift(),o.push({value:i,type:r,matches:a}),s=s.slice(i.length));if(!i)break}return t?s.length:s?ee.error(e):b(e,l).slice(0)}function he(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function xe(e,t,i){var n=t.dir,a=t.next,o=a||n,r=i&&"parentNode"===o,s=v++;return t.first?function(t,i,a){while(t=t[n])if(1===t.nodeType||r)return e(t,i,a);return!1}:function(t,i,l){var d,c,u=[g,s];if(l){while(t=t[n])if((1===t.nodeType||r)&&e(t,i,l))return!0}else while(t=t[n])if(1===t.nodeType||r)if(c=t[_]||(t[_]={}),a&&w(t,a))t=t[n]||t;else{if((d=c[o])&&d[0]===g&&d[1]===s)return u[2]=d[2];if(c[o]=u,u[2]=e(t,i,l))return!0}return!1}}function fe(e){return e.length>1?function(t,i,n){var a=e.length;while(a--)if(!e[a](t,i,n))return!1;return!0}:e[0]}function pe(e,t,i){for(var n=0,a=t.length;n<a;n++)ee(e,t[n],i);return i}function me(e,t,i,n,a){for(var o,r=[],s=0,l=e.length,d=null!=t;s<l;s++)(o=e[s])&&(i&&!i(o,n,a)||(r.push(o),d&&t.push(s)));return r}function _e(e,t,i,n,a,o){return n&&!n[_]&&(n=_e(n)),a&&!a[_]&&(a=_e(a,o)),ie((function(o,r,l,d){var c,u,h,x,f=[],p=[],_=r.length,g=o||pe(t||"*",l.nodeType?[l]:l,[]),v=!e||!o&&t?g:me(g,f,e,l,d);if(i?(x=a||(o?e:_||n)?[]:r,i(v,x,l,d)):x=v,n){c=me(x,p),n(c,[],l,d),u=c.length;while(u--)(h=c[u])&&(x[p[u]]=!(v[p[u]]=h))}if(o){if(a||e){if(a){c=[],u=x.length;while(u--)(h=x[u])&&c.push(v[u]=h);a(null,x=[],c,d)}u=x.length;while(u--)(h=x[u])&&(c=a?s.call(o,h):f[u])>-1&&(o[c]=!(r[c]=h))}}else x=me(x===r?x.splice(_,x.length):x),a?a(null,r,x,d):m.apply(r,x)}))}function ge(e){for(var t,i,a,r=e.length,l=n.relative[e[0].type],d=l||n.relative[" "],c=l?1:0,u=xe((function(e){return e===t}),d,!0),h=xe((function(e){return s.call(t,e)>-1}),d,!0),x=[function(e,i,n){var a=!l&&(n||i!=o)||((t=i).nodeType?u(e,i,n):h(e,i,n));return t=null,a}];c<r;c++)if(i=n.relative[e[c].type])x=[xe(fe(x),i)];else{if(i=n.filter[e[c].type].apply(null,e[c].matches),i[_]){for(a=++c;a<r;a++)if(n.relative[e[a].type])break;return _e(c>1&&fe(x),c>1&&he(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(R,"$1"),i,c<a&&ge(e.slice(c,a)),a<r&&ge(e=e.slice(a)),a<r&&he(e))}x.push(i)}return fe(x)}function ve(e,t){var i=t.length>0,a=e.length>0,r=function(r,s,l,c,u){var x,f,p,_=0,v="0",y=r&&[],b=[],C=o,w=r||a&&n.find.TAG("*",u),P=g+=null==C?1:Math.random()||.1,E=w.length;for(u&&(o=s==d||s||u);v!==E&&null!=(x=w[v]);v++){if(a&&x){f=0,s||x.ownerDocument==d||(de(x),l=!h);while(p=e[f++])if(p(x,s||d,l)){m.call(c,x);break}u&&(g=P)}i&&((x=!p&&x)&&_--,r&&y.push(x))}if(_+=v,i&&v!==_){f=0;while(p=t[f++])p(y,b,s,l);if(r){if(_>0)while(v--)y[v]||b[v]||(b[v]=T.call(c));b=me(b)}m.apply(c,b),u&&!r&&b.length>0&&_+t.length>1&&S.uniqueSort(c)}return u&&(g=P,o=C),y};return i?ie(r):r}function ye(e,t){var i,n=[],a=[],o=C[e+" "];if(!o){t||(t=ue(e)),i=t.length;while(i--)o=ge(t[i]),o[_]?n.push(o):a.push(o);o=C(e,ve(a,n)),o.selector=e}return o}function be(e,t,i,a){var o,r,s,l,d,c="function"===typeof e&&e,u=!a&&ue(e=c.selector||e);if(i=i||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===t.nodeType&&h&&n.relative[r[1].type]){if(t=(n.find.ID(s.matches[0].replace(J,q),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}o=G.needsContext.test(e)?0:r.length;while(o--){if(s=r[o],n.relative[l=s.type])break;if((d=n.find[l])&&(a=d(s.matches[0].replace(J,q),X.test(r[0].type)&&le(t.parentNode)||t))){if(r.splice(o,1),e=a.length&&he(r),!e)return m.apply(i,a),i;break}}}return(c||ye(e,u))(a,t,!h,i,!t||X.test(e)&&le(t.parentNode)||t),i}ce.prototype=n.filters=n.pseudos,n.setFilters=new ce,x.sortStable=_.split("").sort(D).join("")===_,de(),x.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))})),S.find=ee,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,ee.compile=ye,ee.select=be,ee.setDocument=de,ee.tokenize=ue,ee.escape=S.escapeSelector,ee.getText=S.text,ee.isXML=S.isXMLDoc,ee.selectors=S.expr,ee.support=S.support,ee.uniqueSort=S.uniqueSort})();var B=function(e,t,i){var n=[],a=void 0!==i;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(a&&S(e).is(i))break;n.push(e)}return n},L=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},F=S.expr.match.needsContext,j=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(e,t,i){return f(t)?S.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?S.grep(e,(function(e){return e===t!==i})):"string"!==typeof t?S.grep(e,(function(e){return s.call(t,e)>-1!==i})):S.filter(t,e,i)}S.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,i,n=this.length,a=this;if("string"!==typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<n;t++)if(S.contains(a[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)S.find(e,a[t],i);return n>1?S.uniqueSort(i):i},filter:function(e){return this.pushStack(z(this,e||[],!1))},not:function(e){return this.pushStack(z(this,e||[],!0))},is:function(e){return!!z(this,"string"===typeof e&&F.test(e)?S(e):e||[],!1).length}});var O,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,U=S.fn.init=function(e,t,i){var n,a;if(!e)return this;if(i=i||O,"string"===typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),j.test(n[1])&&S.isPlainObject(t))for(n in t)f(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return a=m.getElementById(n[2]),a&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):f(e)?void 0!==i.ready?i.ready(e):e(S):S.makeArray(e,this)};U.prototype=S.fn,O=S(m);var H=/^(?:parents|prev(?:Until|All))/,V={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,a=this.length,o=[],r="string"!==typeof e&&S(e);if(!F.test(e))for(;n<a;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&S.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?s.call(S(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B(e,"parentNode")},parentsUntil:function(e,t,i){return B(e,"parentNode",i)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return B(e,"nextSibling")},prevAll:function(e){return B(e,"previousSibling")},nextUntil:function(e,t,i){return B(e,"nextSibling",i)},prevUntil:function(e,t,i){return B(e,"previousSibling",i)},siblings:function(e){return L((e.parentNode||{}).firstChild,e)},children:function(e){return L(e.firstChild)},contents:function(e){return null!=e.contentDocument&&n(e.contentDocument)?e.contentDocument:(w(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(i,n){var a=S.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"===typeof n&&(a=S.filter(n,a)),this.length>1&&(V[e]||S.uniqueSort(a),H.test(e)&&a.reverse()),this.pushStack(a)}}));var Y=/[^\x20\t\r\n\f]+/g;function W(e){var t={};return S.each(e.match(Y)||[],(function(e,i){t[i]=!0})),t}function Z(e){return e}function X(e){throw e}function J(e,t,i,n){var a;try{e&&f(a=e.promise)?a.call(e).done(t).fail(i):e&&f(a=e.then)?a.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}S.Callbacks=function(e){e="string"===typeof e?W(e):S.extend({},e);var t,i,n,a,o=[],r=[],s=-1,l=function(){for(a=a||e.once,n=t=!0;r.length;s=-1){i=r.shift();while(++s<o.length)!1===o[s].apply(i[0],i[1])&&e.stopOnFalse&&(s=o.length,i=!1)}e.memory||(i=!1),t=!1,a&&(o=i?[]:"")},d={add:function(){return o&&(i&&!t&&(s=o.length-1,r.push(i)),function t(i){S.each(i,(function(i,n){f(n)?e.unique&&d.has(n)||o.push(n):n&&n.length&&"string"!==v(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){var i;while((i=S.inArray(t,o,i))>-1)o.splice(i,1),i<=s&&s--})),this},has:function(e){return e?S.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=r=[],o=i="",this},disabled:function(){return!o},lock:function(){return a=r=[],i||t||(o=i=""),this},locked:function(){return!!a},fireWith:function(e,i){return a||(i=i||[],i=[e,i.slice?i.slice():i],r.push(i),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},S.extend({Deferred:function(t){var i=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(t){S.each(i,(function(i,n){var a=f(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=a&&a.apply(this,arguments);e&&f(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(t,n,a){var o=0;function r(t,i,n,a){return function(){var s=this,l=arguments,d=function(){var e,d;if(!(t<o)){if(e=n.apply(s,l),e===i.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"===typeof e||"function"===typeof e)&&e.then,f(d)?a?d.call(e,r(o,i,Z,a),r(o,i,X,a)):(o++,d.call(e,r(o,i,Z,a),r(o,i,X,a),r(o,i,Z,i.notifyWith))):(n!==Z&&(s=void 0,l=[e]),(a||i.resolveWith)(s,l))}},c=a?d:function(){try{d()}catch(ia){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(ia,c.error),t+1>=o&&(n!==X&&(s=void 0,l=[ia]),i.rejectWith(s,l))}};t?c():(S.Deferred.getErrorHook?c.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(c.error=S.Deferred.getStackHook()),e.setTimeout(c))}}return S.Deferred((function(e){i[0][3].add(r(0,e,f(a)?a:Z,e.notifyWith)),i[1][3].add(r(0,e,f(t)?t:Z)),i[2][3].add(r(0,e,f(n)?n:X))})).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},o={};return S.each(i,(function(e,t){var r=t[2],s=t[5];a[t[1]]=r.add,s&&r.add((function(){n=s}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),r.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=r.fireWith})),a.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,n=Array(i),o=a.call(arguments),r=S.Deferred(),s=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?a.call(arguments):i,--t||r.resolveWith(n,o)}};if(t<=1&&(J(e,r.done(s(i)).resolve,r.reject,!t),"pending"===r.state()||f(o[i]&&o[i].then)))return r.then();while(i--)J(o[i],s(i),r.reject);return r.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&q.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},S.readyException=function(t){e.setTimeout((function(){throw t}))};var K=S.Deferred();function $(){m.removeEventListener("DOMContentLoaded",$),e.removeEventListener("load",$),S.ready()}S.fn.ready=function(e){return K.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||K.resolveWith(m,[S]))}}),S.ready.then=K.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(S.ready):(m.addEventListener("DOMContentLoaded",$),e.addEventListener("load",$));var Q=function(e,t,i,n,a,o,r){var s=0,l=e.length,d=null==i;if("object"===v(i))for(s in a=!0,i)Q(e,t,s,i[s],!0,o,r);else if(void 0!==n&&(a=!0,f(n)||(r=!0),d&&(r?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(S(e),i)})),t))for(;s<l;s++)t(e[s],i,r?n:n.call(e[s],s,t(e[s],i)));return a?e:d?t.call(e):l?t(e[0],i):o},ee=/^-ms-/,te=/-([a-z])/g;function ie(e,t){return t.toUpperCase()}function ne(e){return e.replace(ee,"ms-").replace(te,ie)}var ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=S.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,a=this.cache(e);if("string"===typeof t)a[ne(t)]=i;else for(n in t)a[ne(n)]=t[n];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ne(t)]},access:function(e,t,i){return void 0===t||t&&"string"===typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(ne):(t=ne(t),t=t in n?[t]:t.match(Y)||[]),i=t.length;while(i--)delete n[t[i]]}(void 0===t||S.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var re=new oe,se=new oe,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,de=/[A-Z]/g;function ce(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}function ue(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(de,"-$&").toLowerCase(),i=e.getAttribute(n),"string"===typeof i){try{i=ce(i)}catch(ia){}se.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return se.hasData(e)||re.hasData(e)},data:function(e,t,i){return se.access(e,t,i)},removeData:function(e,t){se.remove(e,t)},_data:function(e,t,i){return re.access(e,t,i)},_removeData:function(e,t){re.remove(e,t)}}),S.fn.extend({data:function(e,t){var i,n,a,o=this[0],r=o&&o.attributes;if(void 0===e){if(this.length&&(a=se.get(o),1===o.nodeType&&!re.get(o,"hasDataAttrs"))){i=r.length;while(i--)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=ne(n.slice(5)),ue(o,n,a[n])));re.set(o,"hasDataAttrs",!0)}return a}return"object"===typeof e?this.each((function(){se.set(this,e)})):Q(this,(function(t){var i;if(o&&void 0===t)return i=se.get(o,e),void 0!==i?i:(i=ue(o,e),void 0!==i?i:void 0);this.each((function(){se.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){se.remove(this,e)}))}}),S.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=re.get(e,t),i&&(!n||Array.isArray(i)?n=re.access(e,t,S.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=S.queue(e,t),n=i.length,a=i.shift(),o=S._queueHooks(e,t),r=function(){S.dequeue(e,t)};"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete o.stop,a.call(e,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return re.get(e,i)||re.access(e,i,{empty:S.Callbacks("once memory").add((function(){re.remove(e,[t+"queue",i])}))})}}),S.fn.extend({queue:function(e,t){var i=2;return"string"!==typeof e&&(t=e,e="fx",i--),arguments.length<i?S.queue(this[0],e):void 0===t?this:this.each((function(){var i=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,a=S.Deferred(),o=this,r=this.length,s=function(){--n||a.resolveWith(o,[o])};"string"!==typeof e&&(t=e,e=void 0),e=e||"fx";while(r--)i=re.get(o[r],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(s));return s(),a.promise(t)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],pe=m.documentElement,me=function(e){return S.contains(e.ownerDocument,e)},_e={composed:!0};pe.getRootNode&&(me=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(_e)===e.ownerDocument});var ge=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&me(e)&&"none"===S.css(e,"display")};function ve(e,t,i,n){var a,o,r=20,s=n?function(){return n.cur()}:function(){return S.css(e,t,"")},l=s(),d=i&&i[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==d&&+l)&&xe.exec(S.css(e,t));if(c&&c[3]!==d){l/=2,d=d||c[3],c=+l||1;while(r--)S.style(e,t,c+d),(1-o)*(1-(o=s()/l||.5))<=0&&(r=0),c/=o;c*=2,S.style(e,t,c+d),i=i||[]}return i&&(c=+c||+l||0,a=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=a)),a}var ye={};function be(e){var t,i=e.ownerDocument,n=e.nodeName,a=ye[n];return a||(t=i.body.appendChild(i.createElement(n)),a=S.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),ye[n]=a,a)}function Se(e,t){for(var i,n,a=[],o=0,r=e.length;o<r;o++)n=e[o],n.style&&(i=n.style.display,t?("none"===i&&(a[o]=re.get(n,"display")||null,a[o]||(n.style.display="")),""===n.style.display&&ge(n)&&(a[o]=be(n))):"none"!==i&&(a[o]="none",re.set(n,"display",i)));for(o=0;o<r;o++)null!=a[o]&&(e[o].style.display=a[o]);return e}S.fn.extend({show:function(){return Se(this,!0)},hide:function(){return Se(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ge(this)?S(this).show():S(this).hide()}))}});var Ce=/^(?:checkbox|radio)$/i,we=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Te=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=m.createDocumentFragment(),t=e.appendChild(m.createElement("div")),i=m.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),x.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",x.option=!!t.lastChild})();var Pe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ee(e,t){var i;return i="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&w(e,t)?S.merge([e],i):i}function ke(e,t){for(var i=0,n=e.length;i<n;i++)re.set(e[i],"globalEval",!t||re.get(t[i],"globalEval"))}Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,x.option||(Pe.optgroup=Pe.option=[1,"<select multiple='multiple'>","</select>"]);var Re=/<|&#?\w+;/;function Ie(e,t,i,n,a){for(var o,r,s,l,d,c,u=t.createDocumentFragment(),h=[],x=0,f=e.length;x<f;x++)if(o=e[x],o||0===o)if("object"===v(o))S.merge(h,o.nodeType?[o]:o);else if(Re.test(o)){r=r||u.appendChild(t.createElement("div")),s=(we.exec(o)||["",""])[1].toLowerCase(),l=Pe[s]||Pe._default,r.innerHTML=l[1]+S.htmlPrefilter(o)+l[2],c=l[0];while(c--)r=r.lastChild;S.merge(h,r.childNodes),r=u.firstChild,r.textContent=""}else h.push(t.createTextNode(o));u.textContent="",x=0;while(o=h[x++])if(n&&S.inArray(o,n)>-1)a&&a.push(o);else if(d=me(o),r=Ee(u.appendChild(o),"script"),d&&ke(r),i){c=0;while(o=r[c++])Te.test(o.type||"")&&i.push(o)}return u}var De=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function Ae(){return!1}function Be(e,t,i,n,a,o){var r,s;if("object"===typeof t){for(s in"string"!==typeof i&&(n=n||i,i=void 0),t)Be(e,s,i,n,t[s],o);return e}if(null==n&&null==a?(a=i,n=i=void 0):null==a&&("string"===typeof i?(a=n,n=void 0):(a=n,n=i,i=void 0)),!1===a)a=Ae;else if(!a)return e;return 1===o&&(r=a,a=function(e){return S().off(e),r.apply(this,arguments)},a.guid=r.guid||(r.guid=S.guid++)),e.each((function(){S.event.add(this,t,a,n,i)}))}function Le(e,t,i){i?(re.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var i,n=re.get(this,t);if(1&e.isTrigger&&this[t]){if(n)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(n=a.call(arguments),re.set(this,t,n),this[t](),i=re.get(this,t),re.set(this,t,!1),n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i}else n&&(re.set(this,t,S.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Me)}})):void 0===re.get(e,t)&&S.event.add(e,t,Me)}S.event={global:{},add:function(e,t,i,n,a){var o,r,s,l,d,c,u,h,x,f,p,m=re.get(e);if(ae(e)){i.handler&&(o=i,i=o.handler,a=o.selector),a&&S.find.matchesSelector(pe,a),i.guid||(i.guid=S.guid++),(l=m.events)||(l=m.events=Object.create(null)),(r=m.handle)||(r=m.handle=function(t){return"undefined"!==typeof S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Y)||[""],d=t.length;while(d--)s=De.exec(t[d])||[],x=p=s[1],f=(s[2]||"").split(".").sort(),x&&(u=S.event.special[x]||{},x=(a?u.delegateType:u.bindType)||x,u=S.event.special[x]||{},c=S.extend({type:x,origType:p,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&S.expr.match.needsContext.test(a),namespace:f.join(".")},o),(h=l[x])||(h=l[x]=[],h.delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,r)||e.addEventListener&&e.addEventListener(x,r)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),a?h.splice(h.delegateCount++,0,c):h.push(c),S.event.global[x]=!0)}},remove:function(e,t,i,n,a){var o,r,s,l,d,c,u,h,x,f,p,m=re.hasData(e)&&re.get(e);if(m&&(l=m.events)){t=(t||"").match(Y)||[""],d=t.length;while(d--)if(s=De.exec(t[d])||[],x=p=s[1],f=(s[2]||"").split(".").sort(),x){u=S.event.special[x]||{},x=(n?u.delegateType:u.bindType)||x,h=l[x]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=h.length;while(o--)c=h[o],!a&&p!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));r&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,m.handle)||S.removeEvent(e,x,m.handle),delete l[x])}else for(x in l)S.event.remove(e,x+t[d],i,n,!0);S.isEmptyObject(l)&&re.remove(e,"handle events")}},dispatch:function(e){var t,i,n,a,o,r,s=new Array(arguments.length),l=S.event.fix(e),d=(re.get(this,"events")||Object.create(null))[l.type]||[],c=S.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){r=S.event.handlers.call(this,l,d),t=0;while((a=r[t++])&&!l.isPropagationStopped()){l.currentTarget=a.elem,i=0;while((o=a.handlers[i++])&&!l.isImmediatePropagationStopped())l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,n=((S.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,s),void 0!==n&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,a,o,r,s=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(o=[],r={},i=0;i<l;i++)n=t[i],a=n.selector+" ",void 0===r[a]&&(r[a]=n.needsContext?S(a,this).index(d)>-1:S.find(a,this,null,[d]).length),r[a]&&o.push(n);o.length&&s.push({elem:d,handlers:o})}return d=this,l<t.length&&s.push({elem:d,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:f(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&w(t,"input")&&Le(t,"click",!0),!1},trigger:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&w(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return Ce.test(t.type)&&t.click&&w(t,"input")&&re.get(t,"click")||w(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Me:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){function i(e){if(m.documentMode){var i=re.get(this,"handle"),n=S.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,i(e),n.target===n.currentTarget&&i(n)}else S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[e]={setup:function(){var n;if(Le(this,e,!0),!m.documentMode)return!1;n=re.get(this,t),n||this.addEventListener(t,i),re.set(this,t,(n||0)+1)},trigger:function(){return Le(this,e),!0},teardown:function(){var e;if(!m.documentMode)return!1;e=re.get(this,t)-1,e?re.set(this,t,e):(this.removeEventListener(t,i),re.remove(this,t))},_default:function(t){return re.get(t.target,e)},delegateType:t},S.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,a=m.documentMode?this:n,o=re.get(a,t);o||(m.documentMode?this.addEventListener(t,i):n.addEventListener(e,i,!0)),re.set(a,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,a=m.documentMode?this:n,o=re.get(a,t)-1;o?re.set(a,t,o):(m.documentMode?this.removeEventListener(t,i):n.removeEventListener(e,i,!0),re.remove(a,t))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,a=e.relatedTarget,o=e.handleObj;return a&&(a===n||S.contains(n,a))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}})),S.fn.extend({on:function(e,t,i,n){return Be(this,e,t,i,n)},one:function(e,t,i,n){return Be(this,e,t,i,n,1)},off:function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"===typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!==typeof t||(i=t,t=void 0),!1===i&&(i=Ae),this.each((function(){S.event.remove(this,e,i,t)}))}});var Fe=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Oe(e,t){return w(e,"table")&&w(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ne(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function He(e,t){var i,n,a,o,r,s,l;if(1===t.nodeType){if(re.hasData(e)&&(o=re.get(e),l=o.events,l))for(a in re.remove(t,"handle events"),l)for(i=0,n=l[a].length;i<n;i++)S.event.add(t,a,l[a][i]);se.hasData(e)&&(r=se.access(e),s=S.extend({},r),se.set(t,s))}}function Ve(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Ce.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Ge(e,t,i,n){t=o(t);var a,r,s,l,d,c,u=0,h=e.length,p=h-1,m=t[0],_=f(m);if(_||h>1&&"string"===typeof m&&!x.checkClone&&je.test(m))return e.each((function(a){var o=e.eq(a);_&&(t[0]=m.call(this,a,o.html())),Ge(o,t,i,n)}));if(h&&(a=Ie(t,e[0].ownerDocument,!1,e,n),r=a.firstChild,1===a.childNodes.length&&(a=r),r||n)){for(s=S.map(Ee(a,"script"),Ne),l=s.length;u<h;u++)d=a,u!==p&&(d=S.clone(d,!0,!0),l&&S.merge(s,Ee(d,"script"))),i.call(e[u],d,u);if(l)for(c=s[s.length-1].ownerDocument,S.map(s,Ue),u=0;u<l;u++)d=s[u],Te.test(d.type||"")&&!re.access(d,"globalEval")&&S.contains(c,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?S._evalUrl&&!d.noModule&&S._evalUrl(d.src,{nonce:d.nonce||d.getAttribute("nonce")},c):g(d.textContent.replace(ze,""),d,c))}return e}function Ye(e,t,i){for(var n,a=t?S.filter(t,e):e,o=0;null!=(n=a[o]);o++)i||1!==n.nodeType||S.cleanData(Ee(n)),n.parentNode&&(i&&me(n)&&ke(Ee(n,"script")),n.parentNode.removeChild(n));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,a,o,r,s=e.cloneNode(!0),l=me(e);if(!x.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!S.isXMLDoc(e))for(r=Ee(s),o=Ee(e),n=0,a=o.length;n<a;n++)Ve(o[n],r[n]);if(t)if(i)for(o=o||Ee(e),r=r||Ee(s),n=0,a=o.length;n<a;n++)He(o[n],r[n]);else He(e,s);return r=Ee(s,"script"),r.length>0&&ke(r,!l&&Ee(e,"script")),s},cleanData:function(e){for(var t,i,n,a=S.event.special,o=0;void 0!==(i=e[o]);o++)if(ae(i)){if(t=i[re.expando]){if(t.events)for(n in t.events)a[n]?S.event.remove(i,n):S.removeEvent(i,n,t.handle);i[re.expando]=void 0}i[se.expando]&&(i[se.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Ye(this,e,!0)},remove:function(e){return Ye(this,e)},text:function(e){return Q(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.appendChild(e)}}))},prepend:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(Ee(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return Q(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Fe.test(e)&&!Pe[(we.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(S.cleanData(Ee(t,!1)),t.innerHTML=e);t=0}catch(ia){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var i=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(Ee(this)),i&&i.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var i,n=[],a=S(e),o=a.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),S(a[s])[t](i),r.apply(n,i.get());return this.pushStack(n)}}));var We=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),Ze=/^--/,Xe=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Je=function(e,t,i){var n,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in n=i.call(e),t)e.style[a]=o[a];return n},qe=new RegExp(fe.join("|"),"i");function Ke(e,t,i){var n,a,o,r,s=Ze.test(t),l=e.style;return i=i||Xe(e),i&&(r=i.getPropertyValue(t)||i[t],s&&r&&(r=r.replace(R,"$1")||void 0),""!==r||me(e)||(r=S.style(e,t)),!x.pixelBoxStyles()&&We.test(r)&&qe.test(t)&&(n=l.width,a=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=r,r=i.width,l.width=n,l.minWidth=a,l.maxWidth=o)),void 0!==r?r+"":r}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}(function(){function t(){if(c){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pe.appendChild(d).appendChild(c);var t=e.getComputedStyle(c);n="1%"!==t.top,l=12===i(t.marginLeft),c.style.right="60%",r=36===i(t.right),a=36===i(t.width),c.style.position="absolute",o=12===i(c.offsetWidth/3),pe.removeChild(d),c=null}}function i(e){return Math.round(parseFloat(e))}var n,a,o,r,s,l,d=m.createElement("div"),c=m.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(x,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,i,n,a;return null==s&&(t=m.createElement("table"),i=m.createElement("tr"),n=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="box-sizing:content-box;border:1px solid",i.style.height="1px",n.style.height="9px",n.style.display="block",pe.appendChild(t).appendChild(i).appendChild(n),a=e.getComputedStyle(i),s=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===i.offsetHeight,pe.removeChild(t)),s}}))})();var Qe=["Webkit","Moz","ms"],et=m.createElement("div").style,tt={};function it(e){var t=e[0].toUpperCase()+e.slice(1),i=Qe.length;while(i--)if(e=Qe[i]+t,e in et)return e}function nt(e){var t=S.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=it(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,ot={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"};function st(e,t,i){var n=xe.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function lt(e,t,i,n,a,o){var r="width"===t?1:0,s=0,l=0,d=0;if(i===(n?"border":"content"))return 0;for(;r<4;r+=2)"margin"===i&&(d+=S.css(e,i+fe[r],!0,a)),n?("content"===i&&(l-=S.css(e,"padding"+fe[r],!0,a)),"margin"!==i&&(l-=S.css(e,"border"+fe[r]+"Width",!0,a))):(l+=S.css(e,"padding"+fe[r],!0,a),"padding"!==i?l+=S.css(e,"border"+fe[r]+"Width",!0,a):s+=S.css(e,"border"+fe[r]+"Width",!0,a));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l+d}function dt(e,t,i){var n=Xe(e),a=!x.boxSizingReliable()||i,o=a&&"border-box"===S.css(e,"boxSizing",!1,n),r=o,s=Ke(e,t,n),l="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(s)){if(!i)return s;s="auto"}return(!x.boxSizingReliable()&&o||!x.reliableTrDimensions()&&w(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===S.css(e,"boxSizing",!1,n),r=l in e,r&&(s=e[l])),s=parseFloat(s)||0,s+lt(e,t,i||(o?"border":"content"),r,n,s)+"px"}function ct(e,t,i,n,a){return new ct.prototype.init(e,t,i,n,a)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ke(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,r,s=ne(t),l=Ze.test(t),d=e.style;if(l||(t=nt(s)),r=S.cssHooks[t]||S.cssHooks[s],void 0===i)return r&&"get"in r&&void 0!==(a=r.get(e,!1,n))?a:d[t];o=typeof i,"string"===o&&(a=xe.exec(i))&&a[1]&&(i=ve(e,t,a),o="number"),null!=i&&i===i&&("number"!==o||l||(i+=a&&a[3]||(S.cssNumber[s]?"":"px")),x.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,n))||(l?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,n){var a,o,r,s=ne(t),l=Ze.test(t);return l||(t=nt(s)),r=S.cssHooks[t]||S.cssHooks[s],r&&"get"in r&&(a=r.get(e,!0,i)),void 0===a&&(a=Ke(e,t,n)),"normal"===a&&t in rt&&(a=rt[t]),""===i||i?(o=parseFloat(a),!0===i||isFinite(o)?o||0:a):a}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,i,n){if(i)return!at.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,t,n):Je(e,ot,(function(){return dt(e,t,n)}))},set:function(e,i,n){var a,o=Xe(e),r=!x.scrollboxSize()&&"absolute"===o.position,s=r||n,l=s&&"border-box"===S.css(e,"boxSizing",!1,o),d=n?lt(e,t,n,l,o):0;return l&&r&&(d-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-lt(e,t,"border",!1,o)-.5)),d&&(a=xe.exec(i))&&"px"!==(a[3]||"px")&&(e.style[t]=i,i=S.css(e,t)),st(e,i,d)}}})),S.cssHooks.marginLeft=$e(x.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ke(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(i){for(var n=0,a={},o="string"===typeof i?i.split(" "):[i];n<4;n++)a[e+fe[n]+t]=o[n]||o[n-2]||o[0];return a}},"margin"!==e&&(S.cssHooks[e+t].set=st)})),S.fn.extend({css:function(e,t){return Q(this,(function(e,t,i){var n,a,o={},r=0;if(Array.isArray(t)){for(n=Xe(e),a=t.length;r<a;r++)o[t[r]]=S.css(e,t[r],!1,n);return o}return void 0!==i?S.style(e,t,i):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=ct,ct.prototype={constructor:ct,init:function(e,t,i,n,a,o){this.elem=e,this.prop=i,this.easing=a||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(S.cssNumber[i]?"":"px")},cur:function(){var e=ct.propHooks[this.prop];return e&&e.get?e.get(this):ct.propHooks._default.get(this)},run:function(e){var t,i=ct.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ct.propHooks._default.set(this),this}},ct.prototype.init.prototype=ct.prototype,ct.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ct.propHooks.scrollTop=ct.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=ct.prototype.init,S.fx.step={};var ut,ht,xt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function pt(){ht&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(pt):e.setTimeout(pt,S.fx.interval),S.fx.tick())}function mt(){return e.setTimeout((function(){ut=void 0})),ut=Date.now()}function _t(e,t){var i,n=0,a={height:e};for(t=t?1:0;n<4;n+=2-t)i=fe[n],a["margin"+i]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function gt(e,t,i){for(var n,a=(bt.tweeners[t]||[]).concat(bt.tweeners["*"]),o=0,r=a.length;o<r;o++)if(n=a[o].call(i,t,e))return n}function vt(e,t,i){var n,a,o,r,s,l,d,c,u="width"in t||"height"in t,h=this,x={},f=e.style,p=e.nodeType&&ge(e),m=re.get(e,"fxshow");for(n in i.queue||(r=S._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,s=r.empty.fire,r.empty.fire=function(){r.unqueued||s()}),r.unqueued++,h.always((function(){h.always((function(){r.unqueued--,S.queue(e,"fx").length||r.empty.fire()}))}))),t)if(a=t[n],xt.test(a)){if(delete t[n],o=o||"toggle"===a,a===(p?"hide":"show")){if("show"!==a||!m||void 0===m[n])continue;p=!0}x[n]=m&&m[n]||S.style(e,n)}if(l=!S.isEmptyObject(t),l||!S.isEmptyObject(x))for(n in u&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],d=m&&m.display,null==d&&(d=re.get(e,"display")),c=S.css(e,"display"),"none"===c&&(d?c=d:(Se([e],!0),d=e.style.display||d,c=S.css(e,"display"),Se([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===S.css(e,"float")&&(l||(h.done((function(){f.display=d})),null==d&&(c=f.display,d="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,x)l||(m?"hidden"in m&&(p=m.hidden):m=re.access(e,"fxshow",{display:d}),o&&(m.hidden=!p),p&&Se([e],!0),h.done((function(){for(n in p||Se([e]),re.remove(e,"fxshow"),x)S.style(e,n,x[n])}))),l=gt(p?m[n]:0,n,h),n in m||(m[n]=l.start,p&&(l.end=l.start,l.start=0))}function yt(e,t){var i,n,a,o,r;for(i in e)if(n=ne(i),a=t[n],o=e[i],Array.isArray(o)&&(a=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),r=S.cssHooks[n],r&&"expand"in r)for(i in o=r.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=a);else t[n]=a}function bt(e,t,i){var n,a,o=0,r=bt.prefilters.length,s=S.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var t=ut||mt(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,o=1-n,r=0,l=d.tweens.length;r<l;r++)d.tweens[r].run(o);return s.notifyWith(e,[d,o,i]),o<1&&l?i:(l||s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d]),!1)},d=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},i),originalProperties:t,originalOptions:i,startTime:ut||mt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=S.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(a)return this;for(a=!0;i<n;i++)d.tweens[i].run(1);return t?(s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d,t])):s.rejectWith(e,[d,t]),this}}),c=d.props;for(yt(c,d.opts.specialEasing);o<r;o++)if(n=bt.prefilters[o].call(d,e,c,d.opts),n)return f(n.stop)&&(S._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,gt,d),f(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d}S.Animation=S.extend(bt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ve(i.elem,e,xe.exec(t),i),i}]},tweener:function(e,t){f(e)?(t=e,e=["*"]):e=e.match(Y);for(var i,n=0,a=e.length;n<a;n++)i=e[n],bt.tweeners[i]=bt.tweeners[i]||[],bt.tweeners[i].unshift(t)},prefilters:[vt],prefilter:function(e,t){t?bt.prefilters.unshift(e):bt.prefilters.push(e)}}),S.speed=function(e,t,i){var n=e&&"object"===typeof e?S.extend({},e):{complete:i||!i&&t||f(e)&&e,duration:e,easing:i&&t||t&&!f(t)&&t};return S.fx.off?n.duration=0:"number"!==typeof n.duration&&(n.duration in S.fx.speeds?n.duration=S.fx.speeds[n.duration]:n.duration=S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){f(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ge).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=S.isEmptyObject(e),o=S.speed(t,i,n),r=function(){var t=bt(this,S.extend({},e),o);(a||re.get(this,"finish"))&&t.stop(!0)};return r.finish=r,a||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!==typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",o=S.timers,r=re.get(this);if(a)r[a]&&r[a].stop&&n(r[a]);else for(a in r)r[a]&&r[a].stop&&ft.test(a)&&n(r[a]);for(a=o.length;a--;)o[a].elem!==this||null!=e&&o[a].queue!==e||(o[a].anim.stop(i),t=!1,o.splice(a,1));!t&&i||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=re.get(this),n=i[e+"queue"],a=i[e+"queueHooks"],o=S.timers,r=n?n.length:0;for(i.finish=!0,S.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var i=S.fn[t];S.fn[t]=function(e,n,a){return null==e||"boolean"===typeof e?i.apply(this,arguments):this.animate(_t(t,!0),e,n,a)}})),S.each({slideDown:_t("show"),slideUp:_t("hide"),slideToggle:_t("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),S.timers=[],S.fx.tick=function(){var e,t=0,i=S.timers;for(ut=Date.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||S.fx.stop(),ut=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ht||(ht=!0,pt())},S.fx.stop=function(){ht=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,i){return t=S.fx&&S.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,n){var a=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(a)}}))},function(){var e=m.createElement("input"),t=m.createElement("select"),i=t.appendChild(m.createElement("option"));e.type="checkbox",x.checkOn=""!==e.value,x.optSelected=i.selected,e=m.createElement("input"),e.value="t",e.type="radio",x.radioValue="t"===e.value}();var St,Ct=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return Q(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,i){var n,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?S.prop(e,t,i):(1===o&&S.isXMLDoc(e)||(a=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?St:void 0)),void 0!==i?null===i?void S.removeAttr(e,t):a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:(e.setAttribute(t,i+""),i):a&&"get"in a&&null!==(n=a.get(e,t))?n:(n=S.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!x.radioValue&&"radio"===t&&w(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,a=t&&t.match(Y);if(a&&1===e.nodeType)while(i=a[n++])e.removeAttribute(i)}}),St={set:function(e,t,i){return!1===t?S.removeAttr(e,i):e.setAttribute(i,i),i}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=Ct[t]||S.find.attr;Ct[t]=function(e,t,n){var a,o,r=t.toLowerCase();return n||(o=Ct[r],Ct[r]=a,a=null!=i(e,t,n)?r:null,Ct[r]=o),a}}));var wt=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;function Pt(e){var t=e.match(Y)||[];return t.join(" ")}function Et(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(Y)||[]}S.fn.extend({prop:function(e,t){return Q(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,i){var n,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,a=S.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,i,n,a,o,r;return f(e)?this.each((function(t){S(this).addClass(e.call(this,t,Et(this)))})):(t=kt(e),t.length?this.each((function(){if(n=Et(this),i=1===this.nodeType&&" "+Pt(n)+" ",i){for(o=0;o<t.length;o++)a=t[o],i.indexOf(" "+a+" ")<0&&(i+=a+" ");r=Pt(i),n!==r&&this.setAttribute("class",r)}})):this)},removeClass:function(e){var t,i,n,a,o,r;return f(e)?this.each((function(t){S(this).removeClass(e.call(this,t,Et(this)))})):arguments.length?(t=kt(e),t.length?this.each((function(){if(n=Et(this),i=1===this.nodeType&&" "+Pt(n)+" ",i){for(o=0;o<t.length;o++){a=t[o];while(i.indexOf(" "+a+" ")>-1)i=i.replace(" "+a+" "," ")}r=Pt(i),n!==r&&this.setAttribute("class",r)}})):this):this.attr("class","")},toggleClass:function(e,t){var i,n,a,o,r=typeof e,s="string"===r||Array.isArray(e);return f(e)?this.each((function(i){S(this).toggleClass(e.call(this,i,Et(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(i=kt(e),this.each((function(){if(s)for(o=S(this),a=0;a<i.length;a++)n=i[a],o.hasClass(n)?o.removeClass(n):o.addClass(n);else void 0!==e&&"boolean"!==r||(n=Et(this),n&&re.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":re.get(this,"__className__")||""))})))},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++])if(1===i.nodeType&&(" "+Pt(Et(i))+" ").indexOf(t)>-1)return!0;return!1}});var Rt=/\r/g;S.fn.extend({val:function(e){var t,i,n,a=this[0];return arguments.length?(n=f(e),this.each((function(i){var a;1===this.nodeType&&(a=n?e.call(this,i,S(this).val()):e,null==a?a="":"number"===typeof a?a+="":Array.isArray(a)&&(a=S.map(a,(function(e){return null==e?"":e+""}))),t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=S.valHooks[a.type]||S.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:(i=a.value,"string"===typeof i?i.replace(Rt,""):null==i?"":i)):void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:Pt(S.text(e))}},select:{get:function(e){var t,i,n,a=e.options,o=e.selectedIndex,r="select-one"===e.type,s=r?null:[],l=r?o+1:a.length;for(n=o<0?l:r?o:0;n<l;n++)if(i=a[n],(i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!w(i.parentNode,"optgroup"))){if(t=S(i).val(),r)return t;s.push(t)}return s},set:function(e,t){var i,n,a=e.options,o=S.makeArray(t),r=a.length;while(r--)n=a[r],(n.selected=S.inArray(S.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},x.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var It=e.location,Dt={guid:Date.now()},Mt=/\?/;S.parseXML=function(t){var i,n;if(!t||"string"!==typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(ia){}return n=i&&i.getElementsByTagName("parsererror")[0],i&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):t)),i};var At=/^(?:focusinfocus|focusoutblur)$/,Bt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(t,i,n,a){var o,r,s,l,d,u,h,x,_=[n||m],g=c.call(t,"type")?t.type:t,v=c.call(t,"namespace")?t.namespace.split("."):[];if(r=x=s=n=n||m,3!==n.nodeType&&8!==n.nodeType&&!At.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),d=g.indexOf(":")<0&&"on"+g,t=t[S.expando]?t:new S.Event(g,"object"===typeof t&&t),t.isTrigger=a?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:S.makeArray(i,[t]),h=S.event.special[g]||{},a||!h.trigger||!1!==h.trigger.apply(n,i))){if(!a&&!h.noBubble&&!p(n)){for(l=h.delegateType||g,At.test(l+g)||(r=r.parentNode);r;r=r.parentNode)_.push(r),s=r;s===(n.ownerDocument||m)&&_.push(s.defaultView||s.parentWindow||e)}o=0;while((r=_[o++])&&!t.isPropagationStopped())x=r,t.type=o>1?l:h.bindType||g,u=(re.get(r,"events")||Object.create(null))[t.type]&&re.get(r,"handle"),u&&u.apply(r,i),u=d&&r[d],u&&u.apply&&ae(r)&&(t.result=u.apply(r,i),!1===t.result&&t.preventDefault());return t.type=g,a||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(_.pop(),i)||!ae(n)||d&&f(n[g])&&!p(n)&&(s=n[d],s&&(n[d]=null),S.event.triggered=g,t.isPropagationStopped()&&x.addEventListener(g,Bt),n[g](),t.isPropagationStopped()&&x.removeEventListener(g,Bt),S.event.triggered=void 0,s&&(n[d]=s)),t.result}},simulate:function(e,t,i){var n=S.extend(new S.Event,i,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return S.event.trigger(e,t,i,!0)}});var Lt=/\[\]$/,Ft=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,n){var a;if(Array.isArray(t))S.each(t,(function(t,a){i||Lt.test(e)?n(e,a):Ot(e+"["+("object"===typeof a&&null!=a?t:"")+"]",a,i,n)}));else if(i||"object"!==v(t))n(e,t);else for(a in t)Ot(e+"["+a+"]",t[a],i,n)}S.param=function(e,t){var i,n=[],a=function(e,t){var i=f(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){a(this.name,this.value)}));else for(i in e)Ot(i,e[i],t,a);return n.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&zt.test(this.nodeName)&&!jt.test(e)&&(this.checked||!Ce.test(e))})).map((function(e,t){var i=S(this).val();return null==i?null:Array.isArray(i)?S.map(i,(function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}})):{name:t.name,value:i.replace(Ft,"\r\n")}})).get()}});var Nt=/%20/g,Ut=/#.*$/,Ht=/([?&])_=[^&]*/,Vt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Yt=/^(?:GET|HEAD)$/,Wt=/^\/\//,Zt={},Xt={},Jt="*/".concat("*"),qt=m.createElement("a");function Kt(e){return function(t,i){"string"!==typeof t&&(i=t,t="*");var n,a=0,o=t.toLowerCase().match(Y)||[];if(f(i))while(n=o[a++])"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function $t(e,t,i,n){var a={},o=e===Xt;function r(s){var l;return a[s]=!0,S.each(e[s]||[],(function(e,s){var d=s(t,i,n);return"string"!==typeof d||o||a[d]?o?!(l=d):void 0:(t.dataTypes.unshift(d),r(d),!1)})),l}return r(t.dataTypes[0])||!a["*"]&&r("*")}function Qt(e,t){var i,n,a=S.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:n||(n={}))[i]=t[i]);return n&&S.extend(!0,e,n),e}function ei(e,t,i){var n,a,o,r,s=e.contents,l=e.dataTypes;while("*"===l[0])l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(a in s)if(s[a]&&s[a].test(n)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),i[o]}function ti(e,t,i,n){var a,o,r,s,l,d={},c=e.dataTypes.slice();if(c[1])for(r in e.converters)d[r.toLowerCase()]=e.converters[r];o=c.shift();while(o)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift(),o)if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=d[l+" "+o]||d["* "+o],!r)for(a in d)if(s=a.split(" "),s[1]===o&&(r=d[l+" "+s[0]]||d["* "+s[0]],r)){!0===r?r=d[a]:!0!==d[a]&&(o=s[0],c.unshift(s[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(ia){return{state:"parsererror",error:r?ia:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}qt.href=It.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It.href,type:"GET",isLocal:Gt.test(It.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,S.ajaxSettings),t):Qt(S.ajaxSettings,e)},ajaxPrefilter:Kt(Zt),ajaxTransport:Kt(Xt),ajax:function(t,i){"object"===typeof t&&(i=t,t=void 0),i=i||{};var n,a,o,r,s,l,d,c,u,h,x=S.ajaxSetup({},i),f=x.context||x,p=x.context&&(f.nodeType||f.jquery)?S(f):S.event,_=S.Deferred(),g=S.Callbacks("once memory"),v=x.statusCode||{},y={},b={},C="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(d){if(!r){r={};while(t=Vt.exec(o))r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?o:null},setRequestHeader:function(e,t){return null==d&&(e=b[e.toLowerCase()]=b[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==d&&(x.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)w.always(e[w.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),T(0,t),this}};if(_.promise(w),x.url=((t||x.url||It.href)+"").replace(Wt,It.protocol+"//"),x.type=i.method||i.type||x.method||x.type,x.dataTypes=(x.dataType||"*").toLowerCase().match(Y)||[""],null==x.crossDomain){l=m.createElement("a");try{l.href=x.url,l.href=l.href,x.crossDomain=qt.protocol+"//"+qt.host!==l.protocol+"//"+l.host}catch(ia){x.crossDomain=!0}}if(x.data&&x.processData&&"string"!==typeof x.data&&(x.data=S.param(x.data,x.traditional)),$t(Zt,x,i,w),d)return w;for(u in c=S.event&&x.global,c&&0===S.active++&&S.event.trigger("ajaxStart"),x.type=x.type.toUpperCase(),x.hasContent=!Yt.test(x.type),a=x.url.replace(Ut,""),x.hasContent?x.data&&x.processData&&0===(x.contentType||"").indexOf("application/x-www-form-urlencoded")&&(x.data=x.data.replace(Nt,"+")):(h=x.url.slice(a.length),x.data&&(x.processData||"string"===typeof x.data)&&(a+=(Mt.test(a)?"&":"?")+x.data,delete x.data),!1===x.cache&&(a=a.replace(Ht,"$1"),h=(Mt.test(a)?"&":"?")+"_="+Dt.guid+++h),x.url=a+h),x.ifModified&&(S.lastModified[a]&&w.setRequestHeader("If-Modified-Since",S.lastModified[a]),S.etag[a]&&w.setRequestHeader("If-None-Match",S.etag[a])),(x.data&&x.hasContent&&!1!==x.contentType||i.contentType)&&w.setRequestHeader("Content-Type",x.contentType),w.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+Jt+"; q=0.01":""):x.accepts["*"]),x.headers)w.setRequestHeader(u,x.headers[u]);if(x.beforeSend&&(!1===x.beforeSend.call(f,w,x)||d))return w.abort();if(C="abort",g.add(x.complete),w.done(x.success),w.fail(x.error),n=$t(Xt,x,i,w),n){if(w.readyState=1,c&&p.trigger("ajaxSend",[w,x]),d)return w;x.async&&x.timeout>0&&(s=e.setTimeout((function(){w.abort("timeout")}),x.timeout));try{d=!1,n.send(y,T)}catch(ia){if(d)throw ia;T(-1,ia)}}else T(-1,"No Transport");function T(t,i,r,l){var u,h,m,y,b,C=i;d||(d=!0,s&&e.clearTimeout(s),n=void 0,o=l||"",w.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(y=ei(x,w,r)),!u&&S.inArray("script",x.dataTypes)>-1&&S.inArray("json",x.dataTypes)<0&&(x.converters["text script"]=function(){}),y=ti(x,y,w,u),u?(x.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(S.lastModified[a]=b),b=w.getResponseHeader("etag"),b&&(S.etag[a]=b)),204===t||"HEAD"===x.type?C="nocontent":304===t?C="notmodified":(C=y.state,h=y.data,m=y.error,u=!m)):(m=C,!t&&C||(C="error",t<0&&(t=0))),w.status=t,w.statusText=(i||C)+"",u?_.resolveWith(f,[h,C,w]):_.rejectWith(f,[w,C,m]),w.statusCode(v),v=void 0,c&&p.trigger(u?"ajaxSuccess":"ajaxError",[w,x,u?h:m]),g.fireWith(f,[w,C]),c&&(p.trigger("ajaxComplete",[w,x]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,i,n,a){return f(i)&&(a=a||n,n=i,i=void 0),S.ajax(S.extend({url:e,type:t,dataType:a,data:i,success:n},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,i){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,i)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(f(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return f(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=f(e);return this.each((function(i){S(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(ia){}};var ii={0:200,1223:204},ni=S.ajaxSettings.xhr();x.cors=!!ni&&"withCredentials"in ni,x.ajax=ni=!!ni,S.ajaxTransport((function(t){var i,n;if(x.cors||ni&&!t.crossDomain)return{send:function(a,o){var r,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];for(r in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(r,a[r]);i=function(e){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(ii[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=s.ontimeout=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){i&&n()}))},i=i("abort");try{s.send(t.hasContent&&t.data||null)}catch(ia){if(i)throw ia}},abort:function(){i&&i()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,a){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&a("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){i&&i()}}}));var ai=[],oi=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ai.pop()||S.expando+"_"+Dt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(t,i,n){var a,o,r,s=!1!==t.jsonp&&(oi.test(t.url)?"url":"string"===typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&oi.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(oi,"$1"+a):!1!==t.jsonp&&(t.url+=(Mt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return r||S.error(a+" was not called"),r[0]},t.dataTypes[0]="json",o=e[a],e[a]=function(){r=arguments},n.always((function(){void 0===o?S(e).removeProp(a):e[a]=o,t[a]&&(t.jsonpCallback=i.jsonpCallback,ai.push(a)),r&&f(o)&&o(r[0]),r=o=void 0})),"script"})),x.createHTMLDocument=function(){var e=m.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),S.parseHTML=function(e,t,i){return"string"!==typeof e?[]:("boolean"===typeof t&&(i=t,t=!1),t||(x.createHTMLDocument?(t=m.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=m.location.href,t.head.appendChild(n)):t=m),a=j.exec(e),o=!i&&[],a?[t.createElement(a[1])]:(a=Ie([e],t,o),o&&o.length&&S(o).remove(),S.merge([],a.childNodes)));var n,a,o},S.fn.load=function(e,t,i){var n,a,o,r=this,s=e.indexOf(" ");return s>-1&&(n=Pt(e.slice(s)),e=e.slice(0,s)),f(t)?(i=t,t=void 0):t&&"object"===typeof t&&(a="POST"),r.length>0&&S.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){o=arguments,r.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)})).always(i&&function(e,t){r.each((function(){i.apply(this,o||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,i){var n,a,o,r,s,l,d,c=S.css(e,"position"),u=S(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=S.css(e,"top"),l=S.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,d?(n=u.position(),r=n.top,a=n.left):(r=parseFloat(o)||0,a=parseFloat(l)||0),f(t)&&(t=t.call(e,i,S.extend({},s))),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+a),"using"in t?t.using.call(e,h):u.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],a={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;while(e&&(e===i.body||e===i.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==n&&1===e.nodeType&&(a=S(e).offset(),a.top+=S.css(e,"borderTopWidth",!0),a.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-S.css(n,"marginTop",!0),left:t.left-a.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||pe}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;S.fn[e]=function(n){return Q(this,(function(e,n,a){var o;if(p(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===a)return o?o[t]:e[n];o?o.scrollTo(i?o.pageXOffset:a,i?a:o.pageYOffset):e[n]=a}),e,n,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=$e(x.pixelPosition,(function(e,i){if(i)return i=Ke(e,t),We.test(i)?S(e).position()[t]+"px":i}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){S.fn[n]=function(a,o){var r=arguments.length&&(i||"boolean"!==typeof a),s=i||(!0===a||!0===o?"margin":"border");return Q(this,(function(t,i,a){var o;return p(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===a?S.css(t,i,s):S.style(t,i,a,s)}),t,r?a:void 0,r)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var ri=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var i,n,o;if("string"===typeof t&&(i=e[t],t=e,e=i),f(e))return n=a.call(arguments,2),o=function(){return e.apply(t||this,n.concat(a.call(arguments)))},o.guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=w,S.isFunction=f,S.isWindow=p,S.camelCase=ne,S.type=v,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(ri,"$1")};var si=e.jQuery,li=e.$;return S.noConflict=function(t){return e.$===S&&(e.$=li),t&&e.jQuery===S&&(e.jQuery=si),S},"undefined"===typeof t&&(e.jQuery=e.$=S),S}))})(Li);var Fi=Li.exports,ji=O(Fi);let zi=function(){let e=null;const t=Symbol("CANVAS"),i=Symbol("CONTEXT"),n=Symbol("SHAPES"),a=Symbol("DRAWSTATUS"),o=Symbol("SHAPETYPE"),r=Symbol("MAXSHAPENUMSUPPORT"),s=Symbol("SHAPESTYLE"),l=Symbol("POLYGONDRAWING"),d=Symbol("CURRENTSHAPEINFO"),c=Symbol("DRAWSHAPEMULTIONETIME"),u=Symbol("EVENTCALLBACK");function h(){e[i].clearRect(0,0,e.m_iCanvasWidth,e.m_iCanvasHeight);for(let t=0,i=e[n].length;t<i;t++)e[n][t].draw()}function x(t){let i=e[n].length;i<e[r]&&e[n].push(t)}function f(){let i=!1,s={},f=0,p=0,_=0,v=0,S=0,C=0,w="draw",T=null;function P(){let t=-1;for(let i=0,a=e[n].length;i<a;i++)if(e[n][i].m_bChoosed){t=i;break}return t}e[t][0].oncontextmenu=function(){return!1},e[t][0].onselectstart=function(){return!1},e[t].unbind(),e[t].bind("mousedown",(function(s){if(2===s.button)e[l]&&T&&T.m_aPoint.length>=T.m_iMinClosed&&(T.m_bClosed=!0,e[l]=!1,T.setPointInfo(T.m_aPoint),x(T),h(),i=!1,e[c]||(e[a]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(T.m_szType,"onDrawEnd",T.m_szId));else if(0===s.button){if(i){if(Math.abs(s.offsetX-f)>2&&Math.abs(s.offsetY-p)>2&&(x(T),e[c]||(e[a]=!1)),e[u]){let t={startPos:[],endPos:[]};t.startPos=[f,p],t.endPos=[s.offsetX,s.offsetY],e[u]&&e[u](t),e.clearAllShape()}return T=null,void(i=!1)}if(f=s.offsetX,p=s.offsetY,w="draw",!e[l]){let i=P();if(-1!==i&&e[n][i].inArc(s.offsetX,s.offsetY,5)&&(w="stretch"),"stretch"!==w)for(let t=0,a=e[n].length;t<a;t++)e[n][t].inShape(s.offsetX,s.offsetY)&&2!==e[n][t].m_iEditType?(e[n][t].m_bChoosed=!0,e[n][t].getMouseDownPoints(s.offsetX,s.offsetY),w="drag",window.onDrawShapeEvent&&window.onDrawShapeEvent(e[n][t].m_szType,"onChoose",e[n][t].m_szId)):e[n][t].m_bChoosed=!1;e[t][0].style.cursor="drag"===w?"move":"default","draw"===w&&1===e[n].length&&1===e[n][0].m_iRedrawMode&&(e.deleteRepeatPolyonById(e[n][0].m_szId),e[a]=!0),e[a]&&!e[c]&&(w="draw")}if("draw"===w&&e[a]){if(e[r]<=e[n].length&&"Grid"!==e[o]&&"Point"!==e[o])return;"Rect"===e[o]?(T=new m,T.m_szTips=e[d].szTips||""):"Grid"===e[o]?0===e[n].length&&(T=new g,x(T)):"Polygon"===e[o]?(e[l]||(e[l]=!0,T=new y,T.m_szId=e[d].szId||"",T.m_szTips=e[d].szTips||"",T.m_iMinClosed=e[d].iMinClosed||3,T.m_iMaxPointNum=e[d].iMaxPointNum||11,T.m_iPolygonType=e[d].iPolygonType,T.m_szDrawColor=e[d].szDrawColor,T.m_szFillColor=e[d].szFillColor,T.m_iTranslucent=e[d].iTranslucent,T.m_iRedrawMode=e[d].iRedrawMode),1===T.m_iPolygonType&&(T.addPoint(f,p),T.m_aPoint.length===T.m_iMaxPointNum&&(T.m_bClosed=!0,e[l]=!1,x(T),h(),i=!1,e[c]||(e[a]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(T.m_szType,"onDrawEnd",T.m_szId)))):"Point"===e[o]&&(e.clearShapeByType("Point"),T=new b,T.m_szId=e[d].szId||"",T.m_szDrawColor=e[d].szDrawColor,T.setPointInfo([[f,p]]),x(T),h())}i=!0}})),e[t].bind("mouseenter",(function(t){s={isIn:!0,offsetX:t.offsetX,offsetY:t.offsetY},e[a]&&i&&("Rect"===e[o]?T.move([[f,p],[t.offsetX,t.offsetY]]):"Grid"===e[o]&&e[n][0].move(f,p,t.offsetX,t.offsetY))})),e[t].bind("mouseleave",(function(e){s={isIn:!1,offsetX:e.offsetX,offsetY:e.offsetY}})),e[t].bind("mousemove",(function(t){if(e[l])e[a]&&i&&("Polygon"===e[o]&&0===T.m_iPolygonType&&(T.m_bClosed=!0),h(),T.move(t.offsetX,t.offsetY,f,p));else{let r=P();r>-1?i&&("drag"===w?(e[n][r].drag(t.offsetX,t.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[n][r].m_szType,"onDrag",e[n][r].m_szId)):"stretch"===w&&(e[n][r].stretch(t.offsetX,t.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[n][r].m_szType,"onStretch",e[n][r].m_szId))):e[a]&&i&&s.isIn&&("Rect"===e[o]?T.move([[f,p],[t.offsetX,t.offsetY]]):"Grid"===e[o]&&e[n][0].move(f,p,t.offsetX,t.offsetY))}})),e[t].bind("mouseup",(function(n){if(e[t][0].style.cursor="default",null!==T&&"undefined"!==typeof T&&"draw"===w)if("Rect"===e[o]){if(Math.abs(n.offsetX-f)>2&&Math.abs(n.offsetY-p)>2&&(x(T),e[c]||(e[a]=!1)),e[u]){let t={startPos:[],endPos:[]};t.startPos=[f,p],t.endPos=[n.offsetX,n.offsetY],e[u]&&e[u](t),e.clearAllShape()}T=null}else"Polygon"===e[o]&&0===T.m_iPolygonType&&e[l]&&Math.abs(n.offsetX-f)>2&&Math.abs(n.offsetY-p)>2&&(x(T),e[l]=!1,e[c]||(e[a]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(T.m_szType,"onDrawEnd",T.m_szId));i=!!e[l],e[l]||h()})),e[t].bind("dblclick",(function(){e[a]&&"Grid"===e[o]&&(e[n][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",h())})),e[t].bind("touchstart",(function(t){const s=t.target.getBoundingClientRect();if(console.log("开始触摸：",t,s),t.touches&&t.touches[0]){if(_=parseInt(t.touches[0].clientX-s.x)>0?parseInt(t.touches[0].clientX-s.x):0,v=parseInt(t.touches[0].clientY-s.y)>0?parseInt(t.touches[0].clientY-s.y):0,w="draw",e[a]){if(e[r]<=e[n].length&&"Grid"!==e[o]&&"Point"!==e[o])return;"Rect"===e[o]?(T=new m,T.m_szTips=e[d].szTips||""):"Grid"===e[o]?0===e[n].length&&(T=new g,x(T)):"Polygon"===e[o]?(e[l]||(e[l]=!0,T=new y,T.m_szId=e[d].szId||"",T.m_szTips=e[d].szTips||"",T.m_iMinClosed=e[d].iMinClosed||3,T.m_iMaxPointNum=e[d].iMaxPointNum||11,T.m_iPolygonType=e[d].iPolygonType,T.m_szDrawColor=e[d].szDrawColor,T.m_szFillColor=e[d].szFillColor,T.m_iTranslucent=e[d].iTranslucent,T.m_iRedrawMode=e[d].iRedrawMode),1===T.m_iPolygonType&&(T.addPoint(_,v),T.m_aPoint.length===T.m_iMaxPointNum&&(T.m_bClosed=!0,e[l]=!1,x(T),h(),i=!1,e[c]||(e[a]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(T.m_szType,"onDrawEnd",T.m_szId)))):"Point"===e[o]&&(e.clearShapeByType("Point"),T=new b,T.m_szId=e[d].szId||"",T.m_szDrawColor=e[d].szDrawColor,T.setPointInfo([[_,v]]),x(T),h())}i=!0}})),e[t].bind("touchmove",(function(t){const r=t.target.getBoundingClientRect();if(t.touches&&t.touches[0])if(S=parseInt(t.touches[0].clientX-r.x)>0?parseInt(t.touches[0].clientX-r.x):0,C=parseInt(t.touches[0].clientY-r.y)>0?parseInt(t.touches[0].clientY-r.y):0,e[l])e[a]&&i&&("Polygon"===e[o]&&0===T.m_iPolygonType&&(T.m_bClosed=!0),h(),T.move(t.touches[0].offsetX,t.touches[0].offsetY,_,v));else{let t=P();t>-1?i&&("drag"===w?(e[n][t].drag(S,C),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[n][t].m_szType,"onDrag",e[n][t].m_szId)):"stretch"===w&&(e[n][t].stretch(S,C),window.onDrawShapeEvent&&window.onDrawShapeEvent(e[n][t].m_szType,"onStretch",e[n][t].m_szId))):e[a]&&i&&("Rect"===e[o]?T.move([[2*_,2*v],[2*S,2*C]]):"Grid"===e[o]&&e[n][0].move(_,v,S,C))}})),e[t].bind("touchend",(function(n){if(_!=S||v!=C){if(e[t][0].style.cursor="default",null!==T&&"undefined"!==typeof T&&"draw"===w)if("Rect"===e[o]){if(Math.abs(S-_)>2&&Math.abs(C-v)>2&&(x(T),e[c]||(e[a]=!1)),e[u]&&Math.abs(S-_)>15&&Math.abs(C-v)>15){let t={startPos:[],endPos:[]};t.startPos=[_,v],t.endPos=[S,C],e[u]&&e[u](t)}e.clearAllShape(),T=null}else"Polygon"===e[o]&&0===T.m_iPolygonType&&e[l]&&Math.abs(S-_)>2&&Math.abs(C-v)>2&&(x(T),e[l]=!1,e[c]||(e[a]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(T.m_szType,"onDrawEnd",T.m_szId));i=!!e[l],e[l]||h()}}))}class p{constructor(){this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=e[s].szDrawColor,this.m_szFillColor=e[s].szFillColor,this.m_iTranslucent=e[s].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}draw(){}drag(t,i){if(2!==this.m_iEditType){let n=this.m_aPoint.length,a=0;for(a=0;a<n;a++)if(this.m_aPoint[a][0]+t-this.m_iDriftStartX>e.m_iCanvasWidth||this.m_aPoint[a][1]+i-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][0]+t-this.m_iDriftStartX<0||this.m_aPoint[a][1]+i-this.m_iDriftStartY<0)return this.m_iDriftStartX=t,void(this.m_iDriftStartY=i);for(a=0;a<n;a++)this.m_aPoint[a][0]=this.m_aPoint[a][0]+t-this.m_iDriftStartX,this.m_aPoint[a][1]=this.m_aPoint[a][1]+i-this.m_iDriftStartY;this.m_iDriftStartX=t,this.m_iDriftStartY=i,this.setPointInfo(this.m_aPoint),h()}}stretch(e,t){0===this.m_iEditType&&(-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t),this.setPointInfo(this.m_aPoint),h())}inShape(e,t){let i=!1,n=this.m_aPoint.length;for(let a=0,o=n-1;a<n;o=a++)this.m_aPoint[a][1]>t!==this.m_aPoint[o][1]>t&&e<(this.m_aPoint[o][0]-this.m_aPoint[a][0])*(t-this.m_aPoint[a][1])/(this.m_aPoint[o][1]-this.m_aPoint[a][1])+this.m_aPoint[a][0]&&(i=!i);return i}inArc(e,t,i){let n=!1;for(let a=0,o=this.m_aPoint.length;a<o;a++){let o=Math.sqrt((e-this.m_aPoint[a][0])*(e-this.m_aPoint[a][0])+(t-this.m_aPoint[a][1])*(t-this.m_aPoint[a][1]));if(o<i){n=!0,this.m_iIndexChoosePoint=a;break}}return n}getMouseDownPoints(e,t){this.m_iDriftStartX=e,this.m_iDriftStartY=t}getPointInfo(){return this.m_aPoint}setPointInfo(e){null!==e&&"undefined"!==typeof e&&e.length>0&&(this.m_aPoint=e,this.setEdgePoints(e))}addPoint(e,t){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([e,t]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)}setEdgePoints(e){for(let t=0,i=e.length;t<i;t++)0===t?(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1],this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1],this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1],this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]):(e[t][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1]),e[t][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1]),e[t][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]),e[t][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1]))}}class m extends p{constructor(){super(),this.m_szType="Rect"}setPointInfo(e){if(null!==e&&"undefined"!==typeof e){let t=e[0][0],i=e[0][1],n=e[0][0],a=e[0][1];for(let o=0,r=e.length;o<r;o++)t>e[o][0]&&(t=e[o][0]),i>e[o][1]&&(i=e[o][1]),n<e[o][0]&&(n=e[o][0]),a<e[o][1]&&(a=e[o][1]);this.m_aPoint=[[t,i],[n,i],[n,a],[t,a]]}}draw(){e[i].fillStyle=this.m_szFillColor,e[i].strokeStyle=this.m_szDrawColor;let t=this.m_aPoint[0][0],n=this.m_aPoint[0][1],a=this.m_aPoint[2][0]-t,o=this.m_aPoint[2][1]-n;if(e[i].globalAlpha=this.m_iTranslucent,e[i].fillRect(t,n,a,o),e[i].globalAlpha=1,e[i].fillText(this.m_szTips,(t+this.m_aPoint[2][0])/2,(n+this.m_aPoint[2][1])/2),this.m_bChoosed){let r=Math.round(a/2),s=Math.round(o/2);if(0===this.m_iEditType){let l=[t,t+r,t+a,t,t+a,t,t+r,t+a],d=[n,n,n,n+s,n+s,n+o,n+o,n+o];for(let t=0;t<8;t++)e[i].beginPath(),e[i].arc(l[t],d[t],3,0,360,!1),e[i].fillStyle=this.m_szDrawColor,e[i].closePath(),e[i].fill()}}e[i].strokeRect(t,n,a,o)}stretch(e,t){0===this.m_iEditType&&(0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?t<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=t,this.m_aPoint[1][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):3===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=e,this.m_aPoint[3][0]=e):4===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=e,this.m_aPoint[2][0]=e):5===this.m_iIndexChoosePoint?e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t):6===this.m_iIndexChoosePoint?t>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=t,this.m_aPoint[3][1]=t):7===this.m_iIndexChoosePoint&&e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t),h())}move(e){h(),this.m_bChoosed=!0;let t=e[0][0],i=e[0][1],n=e[1][0],a=e[1][1];this.setPointInfo([[t,i],[n,i],[n,a],[t,a]]),this.draw()}inArc(e,t,i){let n=this.m_aPoint[0][0],a=this.m_aPoint[0][1],o=this.m_aPoint[2][0]-n,r=this.m_aPoint[2][1]-a,s=Math.round(o/2),l=Math.round(r/2),d=[n,n+s,n+o,n,n+o,n,n+s,n+o],c=[a,a,a,a+l,a+l,a+r,a+r,a+r];for(let u=0;u<8;u++){let n=Math.sqrt((e-d[u])*(e-d[u])+(t-c[u])*(t-c[u]));if(n<i)return this.m_iIndexChoosePoint=u,!0}return!1}}class _ extends p{constructor(e,t){super(),this.m_szType="RectOSD",this.m_szOSDType="overlay-date",this.m_szText=e||"",this.m_szEnabled=t||"",this.m_szDateStyle="",this.m_szClockType="",this.m_szDisplayWeek="",this.m_szId="",this.m_szAlignment="0"}draw(){if("true"===this.m_szEnabled){let t=this.m_aPoint[0][0],n=this.m_aPoint[0][1],a=this.m_aPoint[2][0]-t,o=this.m_aPoint[2][1]-n;e[i].beginPath(),e[i].strokeStyle=this.m_szDrawColor,e[i].globalAlpha=1,e[i].rect(t,n,a,o),e[i].font="15px serif",e[i].strokeText(this.m_szText,t,n+15),e[i].stroke()}}drag(t,i){let n=this.m_aPoint.length,a=0;if("0"===this.m_szAlignment){for(a=0;a<n;a++)if(this.m_aPoint[a][1]+i-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][0]+t-this.m_iDriftStartX<0||this.m_aPoint[a][1]+i-this.m_iDriftStartY<0)return this.m_iDriftStartX=t,void(this.m_iDriftStartY=i);for(a=0;a<n;a++)this.m_aPoint[a][0]=this.m_aPoint[a][0]+t-this.m_iDriftStartX,this.m_aPoint[a][1]=this.m_aPoint[a][1]+i-this.m_iDriftStartY}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(a=0;a<n;a++)if(this.m_aPoint[a][1]+i-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][1]+i-this.m_iDriftStartY<0)return this.m_iDriftStartX=t,void(this.m_iDriftStartY=i);for(a=0;a<n;a++)this.m_aPoint[a][1]=this.m_aPoint[a][1]+i-this.m_iDriftStartY}this.m_iDriftStartX=t,this.m_iDriftStartY=i,this.setEdgePoints(this.m_aPoint),h()}stretch(){}}class g extends p{constructor(){super(),this.m_szType="Grid",this.m_iGridColNum=22,this.m_iGridRowNum=18,this.m_szGridMap="",this.m_aAddGridMap=[]}draw(){let t=e.m_iCanvasWidth/this.m_iGridColNum,n=e.m_iCanvasHeight/this.m_iGridRowNum,a="";for(let o=0;o<this.m_iGridRowNum;o++){let r=this.m_szGridMap.substring(6*o,6*o+6),s=parseInt("f"+r,16).toString(2).split("").slice(4),l="";for(let a=0;a<this.m_iGridColNum;a++){let r="";"1"===s[a]?(e[i].strokeStyle=this.m_szDrawColor,e[i].globalAlpha=1,e[i].strokeRect(t*a,n*o,t,n),r="1"):r="0",this.m_aAddGridMap.length&&1===this.m_aAddGridMap[o][a]&&(e[i].strokeStyle=this.m_szDrawColor,e[i].strokeRect(t*a,n*o,t,n),r="1"),l+=r}a+=parseInt("1111"+l+"00",2).toString(16).substring(1)}this.m_szGridMap=a}move(t,i,n,a){let o=e.m_iCanvasWidth/this.m_iGridColNum,r=e.m_iCanvasHeight/this.m_iGridRowNum,s=Math.floor(t/o),l=Math.floor(i/r),d=Math.floor(Math.abs(n-t)/o),c=Math.floor(Math.abs(a-i)/r),u=1,h=1;u=n-t>0?1:-1,h=a-i>0?1:-1;let x=[];for(let e=0;e<this.m_iGridRowNum;e++){x[e]=[];for(let t=0;t<this.m_iGridColNum;t++)x[e][t]=1===u?1===h?e>=l&&e<=l+c&&t>=s&&t<=s+d?1:0:e<=l&&e>=l-c&&t>=s&&t<=s+d?1:0:1===h?e>=l&&e<=l+c&&t<=s&&t>=s-d?1:0:e<=l&&e>=l-c&&t<=s&&t>=s-d?1:0}this.m_aAddGridMap=x,this.draw()}}class v extends p{constructor(){super(),this.m_szType="Line",this.m_iLineType=0,this.m_iDirection=0,this.m_iArrowType=0,this.m_aCrossArrowPoint=[]}draw(){0===this.m_iLineType?this.drawNormalLine():1===this.m_iLineType?this.drawArrowLine():3===this.m_iLineType?this.drawCrossLine():4===this.m_iLineType&&this.drawLineCount()}drawNormalLine(){if(e[i].globalAlpha=1,this.m_aPoint.length>0){e[i].beginPath(),e[i].strokeStyle=this.m_szDrawColor,e[i].lineWidth=2,e[i].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(let t=1,n=this.m_aPoint.length;t<n;t++)e[i].lineTo(this.m_aPoint[t][0],this.m_aPoint[t][1]);if(e[i].stroke(),this.m_bChoosed)for(let t=0,n=this.m_aPoint.length;t<n;t++)e[i].beginPath(),e[i].fillStyle=this.m_szDrawColor,e[i].arc(this.m_aPoint[t][0],this.m_aPoint[t][1],3,0,2*Math.PI,!0),e[i].closePath(),e[i].fill();""!==this.m_szTips&&(e[i].strokeStyle=this.m_szDrawColor,e[i].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}}drawArrowLine(t,n,a,o,r,s,l,d){s="undefined"!==typeof s?s:30,l="undefined"!==typeof l?l:10,d="undefined"!==typeof d?d:1;let c=180*Math.atan2(a-r,n-o)/Math.PI,u=(c+s)*Math.PI/180,h=(c-s)*Math.PI/180,x=l*Math.cos(u),f=l*Math.sin(u),p=l*Math.cos(h),m=l*Math.sin(h);e[i].save(),e[i].beginPath();let _=n-x,g=a-f;e[i].moveTo(_,g),e[i].lineTo(n,a),_=n-p,g=a-m,e[i].lineTo(_,g),e[i].moveTo(n,a),e[i].lineTo(o,r),1===t&&(_=o+x,g=r+f,e[i].moveTo(_,g),e[i].lineTo(o,r),_=o+p,g=r+m,e[i].lineTo(_,g)),e[i].strokeStyle=this.m_szDrawColor,e[i].lineWidth=d,e[i].stroke(),e[i].restore()}drawCrossLine(){this.drawNormalLine();let t=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,n=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,a=180*Math.atan2(n-this.m_aPoint[0][1],t-this.m_aPoint[0][0])/Math.PI,o=(a+90)*Math.PI/180,r=(a-90)*Math.PI/180,s=25*Math.cos(o),l=25*Math.sin(o),d=25*Math.cos(r),c=25*Math.sin(r),u=0,h=0;u=t-s,h=n-l;let x=0,f=0;0===this.m_iDirection?(x=-10,f=-15):1===this.m_iDirection?(x=10,f=10):(x=10,f=-15),0!==this.m_iDirection&&this.drawArrowLine(0,u,h,t,n),e[i].strokeStyle=this.m_szDrawColor,e[i].font="8px",e[i].strokeText("A",u+x,h+4),u=t-d,h=n-c,1!==this.m_iDirection&&this.drawArrowLine(0,u,h,t,n),e[i].strokeStyle=this.m_szDrawColor,e[i].font="8px",e[i].strokeText("B",u+f,h+4)}drawLineCount(){this.drawNormalLine();let e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,i=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,n=(i+90)*Math.PI/180,a=(i-90)*Math.PI/180,o=25*Math.cos(n),r=25*Math.sin(n),s=25*Math.cos(a),l=25*Math.sin(a),d=0,c=0;d=e-o,c=t-r,1===this.m_iArrowType?(d=e-s,c=t-l,this.drawArrowLine(0,d,c,e,t)):0===this.m_iArrowType&&this.drawArrowLine(0,d,c,e,t),this.m_aCrossArrowPoint=[[e,t],[d,c]]}inShape(e,t){let i=!1;for(let n=0,a=this.m_aPoint.length-1;n<a;n++){let a=Math.sqrt((this.m_aPoint[n+1][0]-this.m_aPoint[n][0])*(this.m_aPoint[n+1][0]-this.m_aPoint[n][0])+(this.m_aPoint[n+1][1]-this.m_aPoint[n][1])*(this.m_aPoint[n+1][1]-this.m_aPoint[n][1])),o=Math.sqrt((e-this.m_aPoint[n][0])*(e-this.m_aPoint[n][0])+(t-this.m_aPoint[n][1])*(t-this.m_aPoint[n][1])),r=Math.sqrt((e-this.m_aPoint[n+1][0])*(e-this.m_aPoint[n+1][0])+(t-this.m_aPoint[n+1][1])*(t-this.m_aPoint[n+1][1]));o+r-a<1&&(i=!0)}return i}}class y extends p{constructor(){super(),this.m_szType="Polygon",this.m_iPolygonType=1}setPointInfo(e){if(null!==e&&"undefined"!==typeof e){if(0===this.m_iPolygonType){let t=e[0][0],i=e[0][1],n=e[0][0],a=e[0][1];for(let o=0,r=e.length;o<r;o++)t>e[o][0]&&(t=e[o][0]),i>e[o][1]&&(i=e[o][1]),n<e[o][0]&&(n=e[o][0]),a<e[o][1]&&(a=e[o][1]);this.m_aPoint=[[t,i],[n,i],[n,a],[t,a]]}else this.m_iPolygonType,this.m_aPoint=e;this.setEdgePoints(e)}}draw(){if(this.m_aPoint.length>0){e[i].fillStyle=this.m_szFillColor,e[i].strokeStyle=this.m_szDrawColor,e[i].globalAlpha=1;let t=0,n=0;if(this.m_bChoosed)for(t=0,n=this.m_aPoint.length;t<n;t++)e[i].beginPath(),e[i].arc(this.m_aPoint[t][0],this.m_aPoint[t][1],3,0,360,!1),e[i].fillStyle=this.m_szDrawColor,e[i].closePath(),e[i].fill();for(e[i].beginPath(),e[i].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),t=0,n=this.m_aPoint.length;t<n;t++)0!==t&&e[i].lineTo(this.m_aPoint[t][0],this.m_aPoint[t][1]);e[i].stroke(),this.m_bClosed&&(e[i].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),e[i].closePath(),e[i].stroke(),e[i].globalAlpha=this.m_iTranslucent,e[i].fill())}}move(t,n,a,o){if(1===this.m_iPolygonType){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){e[i].fillStyle=this.m_szFillColor,e[i].strokeStyle=this.m_szDrawColor,e[i].globalAlpha=1;let a=0,o=0;for(a=0,o=this.m_aPoint.length;a<o;a++)e[i].beginPath(),e[i].arc(this.m_aPoint[a][0],this.m_aPoint[a][1],3,0,360,!1),e[i].fillStyle=this.m_szDrawColor,e[i].closePath(),e[i].fill();for(e[i].beginPath(),e[i].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),a=0,o=this.m_aPoint.length;a<o;a++)0!==a&&e[i].lineTo(this.m_aPoint[a][0],this.m_aPoint[a][1]);e[i].lineTo(t,n),e[i].closePath(),e[i].stroke()}}else if(0===this.m_iPolygonType){this.m_bChoosed=!0;let e=a,i=o,r=t,s=n;this.setPointInfo([[e,i],[r,i],[r,s],[e,s]]),this.draw()}}stretch(e,t){0===this.m_iEditType&&(1===this.m_iPolygonType?-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t):0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t):3===this.m_iIndexChoosePoint&&e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t),this.setPointInfo(this.m_aPoint),h())}}class b extends p{constructor(){super(),this.m_szType="Point",this.m_szId=""}draw(){e[i].beginPath(),e[i].fillStyle=this.m_szDrawColor,e[i].globalAlpha=1,e[i].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,2*Math.PI,!0),e[i].closePath(),e[i].fill()}drag(){}stretch(){}}class S{constructor(h){e=this,this[t]=ji("#"+h),this[i]=this[t][0].getContext("2d"),this[n]=[],this[a]=!1,this[o]="Rect",this[r]=10,this[c]=!0,this[d]={},this[u]=null,this[s]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[l]=!1,this.m_iCanvasWidth=this[t].width(),this.m_iCanvasHeight=this[t].height(),this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",f(),this[n].length=0}setDrawMutiShapeOneTime(e){this[c]=e}setMaxShapeSupport(e){this[r]=e}getMaxShapeSupport(){return this[r]}setDrawStatus(e,t){this[a]=e,t&&e&&(this[u]=t),e||(this[u]=null)}setShapeType(e){this[o]=e,h()}setCurrentShapeInfo(e){this[d]=e||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}}getShapeType(){return this[o]}getAllShapesInfo(){let e=[];for(let t=0,i=this[n].length;t<i;t++)"Grid"===this[n][t].m_szType?e.push({szType:this[n][t].m_szType,szGridMap:this[n][t].m_szGridMap,iGridColNum:this[n][t].m_iGridColNum,iGridRowNum:this[n][t].m_iGridRowNum}):"RectOSD"===this[n][t].m_szType?e.push({szType:this[n][t].m_szType,szText:this[n][t].m_szText,szEnabled:this[n][t].m_szEnabled,szOSDType:this[n][t].m_szOSDType,iPositionX:this[n][t].m_aPoint[0][0],iPositionY:this[n][t].m_aPoint[0][1],szDateStyle:this[n][t].m_szDateStyle,szClockType:this[n][t].m_szClockType,szDisplayWeek:this[n][t].m_szDisplayWeek,szId:this[n][t].m_szId,szAlignment:this[n][t].m_szAlignment}):e.push({szType:this[n][t].m_szType,aPoint:this[n][t].m_aPoint,szId:this[n][t].m_szId,bChoosed:this[n][t].m_bChoosed});return e}deleteRepeatPolyonById(e){let t=this.getAllShapesInfo(),i=t.length;if(i>0)for(let n=0;n<i;n++)"Polygon"===t[n].szType&&t[n].szId===e&&this.deleteShape(n)}getShapesInfoByType(e){let t=[];for(let i=0,a=this[n].length;i<a;i++)this[n][i].m_szType===e&&("Grid"===this[n][i].m_szType?t.push({szType:this[n][i].m_szType,szGridMap:this[n][i].m_szGridMap,iGridColNum:this[n][i].m_iGridColNum,iGridRowNum:this[n][i].m_iGridRowNum}):"RectOSD"===this[n][i].m_szType?t.push({szType:this[n][i].m_szType,szText:this[n][i].m_szText,szEnabled:this[n][i].m_szEnabled,szOSDType:this[n][i].m_szOSDType,iPositionX:this[n][i].m_aPoint[0][0],iPositionY:this[n][i].m_aPoint[0][1],szDateStyle:this[n][i].m_szDateStyle,szClockType:this[n][i].m_szClockType,szDisplayWeek:this[n][i].m_szDisplayWeek,szId:this[n][i].m_szId,szAlignment:this[n][i].m_szAlignment}):"Polygon"===e?t.push({szType:this[n][i].m_szType,szId:this[n][i].m_szId,iPolygonType:this[n][i].m_iPolygonType,iMinClosed:this[n][i].m_iMinClosed,iMaxPointNum:this[n][i].m_iMaxPointNum,iEditType:this[n][i].m_iEditType,aPoint:this[n][i].m_aPoint,bClosed:this[n][i].m_bClosed,szTips:this[n][i].m_szTips,szDrawColor:this[n][i].m_szDrawColor,szFillColor:this[n][i].m_szFillColor,iTranslucent:this[n][i].m_iTranslucent}):"Line"===e?t.push({szType:this[n][i].m_szType,szId:this[n][i].m_szId,aPoint:this[n][i].m_aPoint,szTips:this[n][i].m_szTips,iLineType:this[n][i].m_iLineType,iDirection:this[n][i].m_iDirection,iArrowType:this[n][i].m_iArrowType,szDrawColor:this[n][i].m_szDrawColor,aCrossArrowPoint:this[n][i].m_aCrossArrowPoint}):"Rect"===e?t.push({szType:this[n][i].m_szType,iEditType:this[n][i].m_iEditType,aPoint:this[n][i].m_aPoint,szTips:this[n][i].m_szTips,szDrawColor:this[n][i].m_szDrawColor,szFillColor:this[n][i].m_szFillColor,iTranslucent:this[n][i].m_iTranslucent}):t.push({szType:this[n][i].m_szType,aPoint:this[n][i].m_aPoint}));return t}setShapesInfoByType(e,t){t||(t=[]);let i=null;if("Rect"===e||"Polygon"===e||"Line"===e||"Point"===e)for(let n=0,a=t.length;n<a;n++)"Rect"===e?(i=new m,i.m_iEditType=t[n].iEditType,i.m_szTips=t[n].szTips||"",i.m_szDrawColor=t[n].szDrawColor,i.m_szFillColor=t[n].szFillColor,i.m_iTranslucent=t[n].iTranslucent,i.m_iRedrawMode=t[n].iRedrawMode):"Polygon"===e?(i=new y,0===t[n].iPolygonType?i.m_bClosed=!0:i.m_bClosed=t[n].bClosed,i.m_szTips=t[n].szTips||"",i.m_szId=t[n].szId||"",i.m_iPolygonType=t[n].iPolygonType,i.m_iMinClosed=t[n].iMinClosed||3,i.m_iMaxPointNum=t[n].iMaxPointNum||11,i.m_iEditType=t[n].iEditType,i.m_szDrawColor=t[n].szDrawColor,i.m_szFillColor=t[n].szFillColor,i.m_iTranslucent=t[n].iTranslucent,i.m_iRedrawMode=t[n].iRedrawMode):"Line"===e?(i=new v,i.m_iLineType=t[n].iLineType,i.m_szTips=t[n].szTips||"",i.m_szId=t[n].szId,i.m_iDirection=t[n].iDirection,i.m_iArrowType=t[n].iArrowType,i.m_szDrawColor=t[n].szDrawColor,i.setPointInfo(t[n].aPoint)):"Point"===e&&(i=new b,i.m_szId=t[n].szId,i.m_szDrawColor=t[n].szDrawColor,i.setPointInfo(t[n].aPoint)),i.setPointInfo(t[n].aPoint),0===n&&(i.m_bChoosed=!0),x(i);else"Grid"===e&&(i=new g,i.m_szGridMap=t[0].szGridMap||"",i.m_iGridColNum=t[0].iGridColNum||22,i.m_iGridRowNum=t[0].iGridRowNum||18,x(i));h()}addOSDShape(e,t,i,n,a){i||n||(i=0,n=0),a||(a={});let o=new _(e,t),r=10*e.replace(/[^x00-xff]/g,"rr").length;o.m_szOSDType=a.szOSDType||"",o.m_szDateStyle=a.szDateStyle||"",o.m_szClockType=a.szClockType||"",o.m_szDisplayWeek=a.szDisplayWeek||"",o.m_szId=a.szId||"",o.m_szAlignment=""+a.szAlignment||"0","0"===o.m_szAlignment?o.m_aPoint=[[i,n],[r+i,n],[r+i,n+20],[i,n+20]]:"1"===o.m_szAlignment?o.m_aPoint=[[0,n],[r,n],[r,n+20],[0,n+20]]:"2"===o.m_szAlignment?o.m_aPoint=[[this.m_iCanvasWidth-r,n],[this.m_iCanvasWidth,n],[this.m_iCanvasWidth,n+20],[this.m_iCanvasWidth-r,n+20]]:o.m_aPoint=[[i,n],[r+i,n],[r+i,n+20],[i,n+20]],x(o),h()}selectShapeById(t,i){for(let a=0,o=e[n].length;a<o;a++)t===e[n][a].m_szType&&(i===e[n][a].m_szId?e[n][a].m_bChoosed=!0:e[n][a].m_bChoosed=!1);h()}setCanvasSize(e,t){e>0&&t>0&&(this.m_iCanvasWidth=e,this.m_iCanvasHeight=t,h())}setDrawStyle(e,t,i){this[s]={szDrawColor:e,szFillColor:t,iTranslucent:i}}clearAllShape(){this[n].length=0,e[l]=!1,h()}clearShapeByType(t){let i=this[n].length;for(let e=i;e>0;e--)this[n][e-1].m_szType===t&&("Grid"===t?(this[n][e-1].m_szGridMap="",this[n][e-1].m_aAddGridMap=[]):this[n].splice(e-1,1));"Polygon"===t&&(e[l]=!1),h()}deleteShape(e){this[n].length>e&&this[n].splice(e,1),h()}updateCanvas(e){this[t]=ji("#"+e),this[i]=this[t][0].getContext("2d"),this.m_iCanvasWidth=this[t].width(),this.m_iCanvasHeight=this[t].height(),f()}resizeCanvas(){this.m_iCanvasWidth=this[t].width(),this.m_iCanvasHeight=this[t].height()}canvasRedraw(){h()}}return S}();var Oi={exports:{}};Oi.exports,function(e,t){function n(e,t){var i=a();return n=function(e,t){e-=309;var n=i[e];return n},n(e,t)}function a(){var e=["Too_Few_Arguments","CROP_BITMAP","message","CreateSemiSphere","__proto__","stFishParam","pPanoPTZPoints","streamOpenMode","displayCallBackFun","nFontBGNum","JSPlayM4_SetAudioDisplayBuf","JSPlayM4_SetSycGroup","ARRAY_BUFFER","Invalid_Library_Handle","pfuncCBIn","baseTimeStamp","renderCurStatus","_JSPlayM4_FEC_Enable","fTheta","FT_New_Memory_Face","_JSPlayM4_FEC_ResetCorrectType","hasOwnProperty","_JSPlayM4_PlaySound","%c 2D render not support FEC correct","nPTZRectNum",",bZoomEnable:","FEC_SetDisplayRegion","FECShowMode","SR_DE_NULL","bitmap_left","decoderObj","firstFrameCB","GetBMP","_invoke","_JSPlayM4_SetAntialias","4848423qxTZsW","FECSetViewParam","GetPanoPTZFloor","fPTZPositionY","decodeProcess","CompileProgram","FreeFECPort","UpdatePTZPosition","enableVertexAttribArray","getPrototypeOf","initTimer","regionSh","SR_DE_FISH_PANORAMA_FLOOR_180","downloadRTPData","Invalid_Slot_Handle","processData1","GetCanvasSize","channel","SR_SetPTZColor","AudioANR.data","_JSPlayM4_GetViewParam","FT_Init_FreeType","player","iterator result is not an object","type","SR_DE_FISH_PANORAMA_CEILING_360","hour","TRIANGLES",">>>>>yff>>>>> JSPlayM4_OpenStream 4:","depthMask","height","GetFECPort","tryEntries","0 is softDecode, 1 is hardDecoder,decodeEngine:","needReset","Hmtx_Table_Missing","Unlisted_Object","Generator is already running","isKeyFrame","MONOCHROME","pLineClrVertices","_GetSlowSpeed","FECSetBackCilling","174710DkIqze","nWndPort","JSPlayM4_OpenStream","SetNear","FT_Error_String","cloneNode","WebKitBlobBuilder","nSubPort","nPanoPTZPointNum","Too_Many_Caches","%c1>your browser is safari ,it does not support softV2.0 or hard decode","FreetypeWasmLoadedCB","JSPlayM4_FEC_GetViewParam","%c>>>>The Decoder.js path:%s","pUserOut","COMPOSITE","LIGHT","warn","object","decoderCurStatus","GetCropBMP","curTimeStamp","SR_DrawFontEx","_malloc","canvasHeight","right","7607872XSOPqC","displayFrameInfoCB","JSPlayM4_FEC_SetWnd","userAgent","opera","Too_Many_Function_Defs","cropBottom","Raw600.data","Set_Pixel_Size","JSPlayM4_InputData","canvasIDData","_sent","CMap_Table_Missing","GetPointPano2FishCeiling","round","concat","oVideoRenderHandle","iAudioAfDecOUTFrameNum","%c1>your browser is Firefox ,it only support soft decode","AudioBeforeRender.data","deleteBuffer","cropLeft","NO_AUTOHINT","_resetRenderTimer","curstatus","Invalid_Table","Invalid_Post_Table","createBuffer","iFECZoomNum","JSPlayM4_SetVolume","downloadAudioANRData","width","bWriteAudioANRData","iAudioBeRenOUTFrameNum","_ConvertDisplayEffect","stPTZParam","pRectPoints","Missing_Module","getValue","audioBefDecBuffer","curStatus","color: green","download ANR Decode AudioData FrameNum:","JSPlayM4_SetDisplayBuf","bWriteData","flush","iFECRatio_y","deleteTexture","Invalid_Composite","rval","FLOAT","pstFontColor","\nattribute vec3 xy;\nattribute vec2 uv;\nvarying highp vec2 v_uv;\nvoid main(void) {\n  gl_Position = vec4(xy, 1.0);\n  // Map vertex coordinates (-1 to +1) to UV coordinates (0 to 1).\n  // UV coordinates are Y-flipped relative to vertex coordinates.\n  //v_uv = vec2((1.0 + xy.x) / 2.0, (1.0 - xy.y) / 2.0);\n  v_uv = uv;\n}\n","stop","FECSetParam","break","_bind","InitDisplay","Invalid_Argument","finallyLoc","SR_Init","_JSPlayM4_SetDemuxModel","fAngle","SetPTZColor","BlobBuilder","fAspect","style_name","emCorrectType","nFECPort","transform","Raster_Overflow","_JSPlayM4_GetCropJPEG","Debug_OpCode","max_advance_width","chrome","displayBuf","_JSPlayM4_SetDecodeERC","underflow","displayWidth","abs","toString","GetPTZFragmentPoints","fFar","Too_Many_Instruction_Defs","default","JSPlayM4_SetStreamOpenMode","JSPlayM4_GetCanvasSize","avc1.","yuvData","pRender","Invalid_Stream_Seek","createTexture","method","resetTimer","bOrtho","num_faces","JSPlayM4_SetFrameInfoCallBack","sent","SR_DrawLinesEx","FreetypeLibHandle","writeArrayToMemory","pSemiSphereTex","suspendedYield","NO_SCALE","this.audioBeRenOUTBuffer","iterator","%c SR_AddSubPort error subport:%d","audioBeRenOUTBuffer","href","this.audioResampleBuffer","JSPlayM4_DownloadData","Raster_Corrupted","\n    varying highp vec2 v_uv;\n    uniform sampler2D texture;\n    void main(void) {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n","function","decodeQueueSize","SR_ERR_CALL_ORDER","glLineTexBuffer","sqrt","uniformMatrix4fv","nJpegDataSize","IGNORE_TRANSFORM","values","inputData","createElement","JSPlayM4_GetJPEG","resolve","webgl2","Invalid_Frame_Read","SR_SetPTZPort","cropRight","_JSPlayM4_SetVideoRawDataCallBack","iInputMaxBufSize","bitmap","executing","JSPlayM4_SetAdditionDataCallBack","toLowerCase","bWriteAudioBeforeRender","Table_Missing","FirstFrame","JSPlayM4_SetDecodeThreadNum","AudioAfterDecode.data","SetDecodeFrameType","oVideoPlayCtrl","nSemiSpherePosSize","pData","@@iterator","frameBuffers","nFontHeight","nSurfaceTexture",">>>JS JSPlayM4_FEC_SetParam 1 this.decodeEngine：","linkProgram","JSPlayM4_NeedReset","fLeft","JSPlayM4_FEC_GetPort","SR_Destroy","FEC_GetViewParam","clearDecoderObjBuffer","fZoom","vecUp","FEC_Disable","FT_Library_Version","frameDisplayWidth","MouseEvents","function a0_0x1593(_0x3ac32f,_0x2aab05){var _0xd9f682=a0_0xd9f6();return a0_0x1593=function(_0x1593c7,_0x596b7f){_0x1593c7=_0x1593c7-0x1cd;var _0x58f871=_0xd9f682[_0x1593c7];return _0x58f871;},a0_0x1593(_0x3ac32f,_0x2aab05);}(function(_0xff34d7,_0x5d32c1){var _0x135cc6=a0_0x1593,_0x177edd=_0xff34d7();while(!![]){try{var _0x399e07=parseInt(_0x135cc6(0x4be))/0x1*(parseInt(_0x135cc6(0x228))/0x2)+parseInt(_0x135cc6(0x3d3))/0x3+parseInt(_0x135cc6(0x2a8))/0x4*(-parseInt(_0x135cc6(0x517))/0x5)+parseInt(_0x135cc6(0x3f1))/0x6+-parseInt(_0x135cc6(0x2ed))/0x7+-parseInt(_0x135cc6(0x1ea))/0x8*(parseInt(_0x135cc6(0x45e))/0x9)+parseInt(_0x135cc6(0x48c))/0xa;if(_0x399e07===_0x5d32c1)break;else _0x177edd['push'](_0x177edd['shift']());}catch(_0x317d5a){_0x177edd['push'](_0x177edd['shift']());}}}(a0_0xd9f6,0xed8e4),((()=>{var _0x52413b=a0_0x1593,_0x38a18c={0x3d:(_0x26085d,_0xd23b54,_0x356d53)=>{var _0x211884=a0_0x1593,_0x40e387=_0x356d53(0x2ba)[_0x211884(0x54c)];function _0x538fb2(){'use strict';var _0x5c588c=_0x211884;_0x26085d[_0x5c588c(0x237)]=function(){return _0x1cf6ba;},_0x26085d[_0x5c588c(0x237)][_0x5c588c(0x4fb)]=!0x0,_0x26085d['exports']['default']=_0x26085d[_0x5c588c(0x237)];var _0x1cf6ba={},_0x3249e2=Object['prototype'],_0x435078=_0x3249e2[_0x5c588c(0x246)],_0x2c4240='function'==typeof Symbol?Symbol:{},_0x8f6e32=_0x2c4240['iterator']||_0x5c588c(0x438),_0x56c7d0=_0x2c4240['asyncIterator']||_0x5c588c(0x2a4),_0x51a062=_0x2c4240[_0x5c588c(0x40d)]||_0x5c588c(0x356);function _0x533e29(_0x247309,_0x33c917,_0x41f390){var _0x584901=_0x5c588c;return Object[_0x584901(0x256)](_0x247309,_0x33c917,{'value':_0x41f390,'enumerable':!0x0,'configurable':!0x0,'writable':!0x0}),_0x247309[_0x33c917];}try{_0x533e29({},'');}catch(_0x43fa3a){_0x533e29=function(_0x4b14f5,_0x1cab2a,_0x18eb3e){return _0x4b14f5[_0x1cab2a]=_0x18eb3e;};}function _0x291ae3(_0x45b4e,_0xdf225f,_0x1a71fe,_0x1f3a84){var _0x100d17=_0x5c588c,_0x5f70f1,_0x326a7d,_0x3bf0ec,_0x346ee7,_0xdf225f=_0xdf225f&&_0xdf225f['prototype']instanceof _0x20fb7f?_0xdf225f:_0x20fb7f,_0xdf225f=Object[_0x100d17(0x3e9)](_0xdf225f[_0x100d17(0x532)]),_0x1f3a84=new _0xe43bcf(_0x1f3a84||[]);return _0xdf225f[_0x100d17(0x226)]=(_0x5f70f1=_0x45b4e,_0x326a7d=_0x1a71fe,_0x3bf0ec=_0x1f3a84,_0x346ee7='suspendedStart',function(_0xb4f0a9,_0x3f6c2e){var _0x3d6bd7=_0x100d17;if(_0x3d6bd7(0x223)===_0x346ee7)throw new Error(_0x3d6bd7(0x3e8));if(_0x3d6bd7(0x240)===_0x346ee7){if(_0x3d6bd7(0x21d)===_0xb4f0a9)throw _0x3f6c2e;return _0x5245cd();}for(_0x3bf0ec[_0x3d6bd7(0x47e)]=_0xb4f0a9,_0x3bf0ec[_0x3d6bd7(0x42f)]=_0x3f6c2e;;){var _0x219670=_0x3bf0ec['delegate'];if(_0x219670){_0x219670=function _0x37b610(_0x415971,_0x4ef61a){var _0x2b5cf6=_0x3d6bd7,_0x4f4eec=_0x415971['iterator'][_0x4ef61a['method']];if(void 0x0===_0x4f4eec){if(_0x4ef61a['delegate']=null,_0x2b5cf6(0x21d)===_0x4ef61a[_0x2b5cf6(0x47e)]){if(_0x415971[_0x2b5cf6(0x29a)][_0x2b5cf6(0x26c)]&&(_0x4ef61a[_0x2b5cf6(0x47e)]=_0x2b5cf6(0x26c),_0x4ef61a['arg']=void 0x0,_0x37b610(_0x415971,_0x4ef61a),_0x2b5cf6(0x21d)===_0x4ef61a[_0x2b5cf6(0x47e)]))return _0x2e601f;_0x4ef61a[_0x2b5cf6(0x47e)]=_0x2b5cf6(0x21d),_0x4ef61a[_0x2b5cf6(0x42f)]=new TypeError(_0x2b5cf6(0x2db));}return _0x2e601f;}_0x4f4eec=_0x438e11(_0x4f4eec,_0x415971[_0x2b5cf6(0x29a)],_0x4ef61a[_0x2b5cf6(0x42f)]);if('throw'===_0x4f4eec[_0x2b5cf6(0x50c)])return _0x4ef61a['method']='throw',_0x4ef61a[_0x2b5cf6(0x42f)]=_0x4f4eec['arg'],_0x4ef61a['delegate']=null,_0x2e601f;return _0x4f4eec=_0x4f4eec['arg'],_0x4f4eec?_0x4f4eec[_0x2b5cf6(0x3e6)]?(_0x4ef61a[_0x415971[_0x2b5cf6(0x53b)]]=_0x4f4eec['value'],_0x4ef61a[_0x2b5cf6(0x500)]=_0x415971['nextLoc'],_0x2b5cf6(0x26c)!==_0x4ef61a['method']&&(_0x4ef61a[_0x2b5cf6(0x47e)]=_0x2b5cf6(0x500),_0x4ef61a['arg']=void 0x0),_0x4ef61a[_0x2b5cf6(0x290)]=null,_0x2e601f):_0x4f4eec:(_0x4ef61a['method']='throw',_0x4ef61a['arg']=new TypeError('iterator\\x20result\\x20is\\x20not\\x20an\\x20object'),_0x4ef61a[_0x2b5cf6(0x290)]=null,_0x2e601f);}(_0x219670,_0x3bf0ec);if(_0x219670){if(_0x219670===_0x2e601f)continue;return _0x219670;}}if(_0x3d6bd7(0x500)===_0x3bf0ec[_0x3d6bd7(0x47e)])_0x3bf0ec['sent']=_0x3bf0ec[_0x3d6bd7(0x2e5)]=_0x3bf0ec[_0x3d6bd7(0x42f)];else{if(_0x3d6bd7(0x21d)===_0x3bf0ec[_0x3d6bd7(0x47e)]){if('suspendedStart'===_0x346ee7)throw _0x346ee7=_0x3d6bd7(0x240),_0x3bf0ec['arg'];_0x3bf0ec[_0x3d6bd7(0x201)](_0x3bf0ec['arg']);}else _0x3d6bd7(0x26c)===_0x3bf0ec[_0x3d6bd7(0x47e)]&&_0x3bf0ec[_0x3d6bd7(0x413)]('return',_0x3bf0ec[_0x3d6bd7(0x42f)]);}_0x346ee7=_0x3d6bd7(0x223),_0x219670=_0x438e11(_0x5f70f1,_0x326a7d,_0x3bf0ec);if(_0x3d6bd7(0x2fe)===_0x219670[_0x3d6bd7(0x50c)]){if(_0x346ee7=_0x3bf0ec[_0x3d6bd7(0x3e6)]?'completed':_0x3d6bd7(0x499),_0x219670[_0x3d6bd7(0x42f)]===_0x2e601f)continue;return{'value':_0x219670[_0x3d6bd7(0x42f)],'done':_0x3bf0ec[_0x3d6bd7(0x3e6)]};}_0x3d6bd7(0x21d)===_0x219670['type']&&(_0x346ee7='completed',_0x3bf0ec[_0x3d6bd7(0x47e)]='throw',_0x3bf0ec['arg']=_0x219670[_0x3d6bd7(0x42f)]);}}),_0xdf225f;}function _0x438e11(_0xf71ceb,_0x2421fb,_0x119de7){var _0x186f7b=_0x5c588c;try{return{'type':_0x186f7b(0x2fe),'arg':_0xf71ceb[_0x186f7b(0x311)](_0x2421fb,_0x119de7)};}catch(_0x2c8b23){return{'type':_0x186f7b(0x21d),'arg':_0x2c8b23};}}_0x1cf6ba[_0x5c588c(0x398)]=_0x291ae3;var _0x2e601f={};function _0x20fb7f(){}function _0x556fec(){}function _0x156e85(){}var _0x2c4240={},_0x133298=(_0x533e29(_0x2c4240,_0x8f6e32,function(){return this;}),Object[_0x5c588c(0x24d)]),_0x133298=_0x133298&&_0x133298(_0x133298(_0x3a7058([]))),_0x3ab301=(_0x133298&&_0x133298!==_0x3249e2&&_0x435078[_0x5c588c(0x311)](_0x133298,_0x8f6e32)&&(_0x2c4240=_0x133298),_0x156e85[_0x5c588c(0x532)]=_0x20fb7f[_0x5c588c(0x532)]=Object[_0x5c588c(0x3e9)](_0x2c4240));function _0x5bbc10(_0x2aba93){var _0x5bff5e=_0x5c588c;[_0x5bff5e(0x500),_0x5bff5e(0x21d),_0x5bff5e(0x26c)][_0x5bff5e(0x247)](function(_0x5d214d){_0x533e29(_0x2aba93,_0x5d214d,function(_0x1c7ef4){return this['_invoke'](_0x5d214d,_0x1c7ef4);});});}function _0x15ae5d(_0x14f141,_0x563b13){var _0x355791=_0x5c588c,_0x4f1245;this[_0x355791(0x226)]=function(_0x3c097a,_0x1edb24){var _0x32218f=_0x355791;function _0x49214c(){return new _0x563b13(function(_0xdc74ce,_0x1322d2){!function _0x226bb5(_0x5d0dc3,_0x257a6a,_0x32a677,_0x30297a){var _0x3af315=a0_0x1593,_0x1d85fe,_0x5d0dc3=_0x438e11(_0x14f141[_0x5d0dc3],_0x14f141,_0x257a6a);if('throw'!==_0x5d0dc3['type'])return(_0x257a6a=(_0x1d85fe=_0x5d0dc3[_0x3af315(0x42f)])[_0x3af315(0x38a)])&&'object'==_0x40e387(_0x257a6a)&&_0x435078['call'](_0x257a6a,'__await')?_0x563b13[_0x3af315(0x51c)](_0x257a6a[_0x3af315(0x39f)])[_0x3af315(0x39e)](function(_0x3dd567){var _0x524ce3=_0x3af315;_0x226bb5(_0x524ce3(0x500),_0x3dd567,_0x32a677,_0x30297a);},function(_0x4eb35c){var _0x361cb4=_0x3af315;_0x226bb5(_0x361cb4(0x21d),_0x4eb35c,_0x32a677,_0x30297a);}):_0x563b13[_0x3af315(0x51c)](_0x257a6a)[_0x3af315(0x39e)](function(_0x321ee0){var _0x3c964e=_0x3af315;_0x1d85fe[_0x3c964e(0x38a)]=_0x321ee0,_0x32a677(_0x1d85fe);},function(_0x23c1ea){var _0x5498bf=_0x3af315;return _0x226bb5(_0x5498bf(0x21d),_0x23c1ea,_0x32a677,_0x30297a);});_0x30297a(_0x5d0dc3[_0x3af315(0x42f)]);}(_0x3c097a,_0x1edb24,_0xdc74ce,_0x1322d2);});}return _0x4f1245=_0x4f1245?_0x4f1245[_0x32218f(0x39e)](_0x49214c,_0x49214c):_0x49214c();};}function _0x7a42d7(_0x1f7a50){var _0x2ca759=_0x5c588c,_0x42011a={'tryLoc':_0x1f7a50[0x0]};0x1 in _0x1f7a50&&(_0x42011a['catchLoc']=_0x1f7a50[0x1]),0x2 in _0x1f7a50&&(_0x42011a['finallyLoc']=_0x1f7a50[0x2],_0x42011a[_0x2ca759(0x4a9)]=_0x1f7a50[0x3]),this[_0x2ca759(0x1e7)][_0x2ca759(0x51d)](_0x42011a);}function _0x148345(_0x2ca036){var _0x1131b6=_0x5c588c,_0x28960b=_0x2ca036[_0x1131b6(0x42e)]||{};_0x28960b['type']=_0x1131b6(0x2fe),delete _0x28960b[_0x1131b6(0x42f)],_0x2ca036[_0x1131b6(0x42e)]=_0x28960b;}function _0xe43bcf(_0x3726b4){var _0x479902=_0x5c588c;this[_0x479902(0x1e7)]=[{'tryLoc':_0x479902(0x4ac)}],_0x3726b4[_0x479902(0x247)](_0x7a42d7,this),this[_0x479902(0x33e)](!0x0);}function _0x3a7058(_0x3ae540){var _0x40d738=_0x5c588c;if(_0x3ae540){var _0x4900d4,_0x24da41=_0x3ae540[_0x8f6e32];if(_0x24da41)return _0x24da41['call'](_0x3ae540);if(_0x40d738(0x3d0)==typeof _0x3ae540[_0x40d738(0x500)])return _0x3ae540;if(!isNaN(_0x3ae540['length']))return _0x4900d4=-0x1,(_0x24da41=function _0x271e97(){var _0x6b212b=_0x40d738;for(;++_0x4900d4<_0x3ae540[_0x6b212b(0x4f1)];)if(_0x435078['call'](_0x3ae540,_0x4900d4))return _0x271e97[_0x6b212b(0x38a)]=_0x3ae540[_0x4900d4],_0x271e97[_0x6b212b(0x3e6)]=!0x1,_0x271e97;return _0x271e97[_0x6b212b(0x38a)]=void 0x0,_0x271e97[_0x6b212b(0x3e6)]=!0x0,_0x271e97;})[_0x40d738(0x500)]=_0x24da41;}return{'next':_0x5245cd};}function _0x5245cd(){return{'value':void 0x0,'done':!0x0};}return _0x533e29(_0x3ab301,_0x5c588c(0x2c2),_0x556fec[_0x5c588c(0x532)]=_0x156e85),_0x533e29(_0x156e85,_0x5c588c(0x2c2),_0x556fec),_0x556fec['displayName']=_0x533e29(_0x156e85,_0x51a062,_0x5c588c(0x1f1)),_0x1cf6ba[_0x5c588c(0x49f)]=function(_0x152c96){var _0x1889ed=_0x5c588c;return _0x152c96='function'==typeof _0x152c96&&_0x152c96[_0x1889ed(0x2c2)],!!_0x152c96&&(_0x152c96===_0x556fec||_0x1889ed(0x1f1)===(_0x152c96[_0x1889ed(0x3a3)]||_0x152c96[_0x1889ed(0x37c)]));},_0x1cf6ba[_0x5c588c(0x230)]=function(_0x18acf3){var _0x34a244=_0x5c588c;return Object[_0x34a244(0x437)]?Object[_0x34a244(0x437)](_0x18acf3,_0x156e85):(_0x18acf3[_0x34a244(0x515)]=_0x156e85,_0x533e29(_0x18acf3,_0x51a062,_0x34a244(0x1f1))),_0x18acf3[_0x34a244(0x532)]=Object['create'](_0x3ab301),_0x18acf3;},_0x1cf6ba['awrap']=function(_0xb9287a){return{'__await':_0xb9287a};},_0x5bbc10(_0x15ae5d[_0x5c588c(0x532)]),_0x533e29(_0x15ae5d[_0x5c588c(0x532)],_0x56c7d0,function(){return this;}),_0x1cf6ba['AsyncIterator']=_0x15ae5d,_0x1cf6ba[_0x5c588c(0x4fd)]=function(_0xa97d80,_0x103eec,_0x45af82,_0x312a80,_0x53f898){var _0x48ad8f=_0x5c588c;void 0x0===_0x53f898&&(_0x53f898=Promise);var _0x2d5244=new _0x15ae5d(_0x291ae3(_0xa97d80,_0x103eec,_0x45af82,_0x312a80),_0x53f898);return _0x1cf6ba[_0x48ad8f(0x49f)](_0x103eec)?_0x2d5244:_0x2d5244[_0x48ad8f(0x500)]()[_0x48ad8f(0x39e)](function(_0x1c8f28){var _0x3c8bc4=_0x48ad8f;return _0x1c8f28[_0x3c8bc4(0x3e6)]?_0x1c8f28['value']:_0x2d5244[_0x3c8bc4(0x500)]();});},_0x5bbc10(_0x3ab301),_0x533e29(_0x3ab301,_0x51a062,'Generator'),_0x533e29(_0x3ab301,_0x8f6e32,function(){return this;}),_0x533e29(_0x3ab301,_0x5c588c(0x258),function(){var _0xdaaddc=_0x5c588c;return _0xdaaddc(0x531);}),_0x1cf6ba[_0x5c588c(0x378)]=function(_0x3cbc03){var _0x58a5a9,_0x591a7f=[];for(_0x58a5a9 in _0x3cbc03)_0x591a7f['push'](_0x58a5a9);return _0x591a7f['reverse'](),function _0x435214(){var _0x6d544d=a0_0x1593;for(;_0x591a7f[_0x6d544d(0x4f1)];){var _0x9effb9=_0x591a7f[_0x6d544d(0x382)]();if(_0x9effb9 in _0x3cbc03)return _0x435214[_0x6d544d(0x38a)]=_0x9effb9,_0x435214['done']=!0x1,_0x435214;}return _0x435214[_0x6d544d(0x3e6)]=!0x0,_0x435214;};},_0x1cf6ba[_0x5c588c(0x225)]=_0x3a7058,_0xe43bcf[_0x5c588c(0x532)]={'constructor':_0xe43bcf,'reset':function(_0x4f715d){var _0x14334b=_0x5c588c;if(this[_0x14334b(0x4e1)]=0x0,this[_0x14334b(0x500)]=0x0,this[_0x14334b(0x20c)]=this[_0x14334b(0x2e5)]=void 0x0,this[_0x14334b(0x3e6)]=!0x1,this[_0x14334b(0x290)]=null,this[_0x14334b(0x47e)]='next',this['arg']=void 0x0,this['tryEntries'][_0x14334b(0x247)](_0x148345),!_0x4f715d){for(var _0xed6f80 in this)'t'===_0xed6f80['charAt'](0x0)&&_0x435078[_0x14334b(0x311)](this,_0xed6f80)&&!isNaN(+_0xed6f80[_0x14334b(0x28b)](0x1))&&(this[_0xed6f80]=void 0x0);}},'stop':function(){var _0x214cb4=_0x5c588c;this[_0x214cb4(0x3e6)]=!0x0;var _0x52d9e5=this[_0x214cb4(0x1e7)][0x0][_0x214cb4(0x42e)];if('throw'===_0x52d9e5[_0x214cb4(0x50c)])throw _0x52d9e5[_0x214cb4(0x42f)];return this[_0x214cb4(0x200)];},'dispatchException':function(_0x591ddf){var _0x5e4901=_0x5c588c;if(this[_0x5e4901(0x3e6)])throw _0x591ddf;var _0x4f45db=this;function _0x2fbb33(_0x10bfbb,_0x48391b){var _0x51472b=_0x5e4901;return _0x370176[_0x51472b(0x50c)]='throw',_0x370176[_0x51472b(0x42f)]=_0x591ddf,_0x4f45db[_0x51472b(0x500)]=_0x10bfbb,_0x48391b&&(_0x4f45db[_0x51472b(0x47e)]=_0x51472b(0x500),_0x4f45db[_0x51472b(0x42f)]=void 0x0),!!_0x48391b;}for(var _0x59331d=this[_0x5e4901(0x1e7)][_0x5e4901(0x4f1)]-0x1;0x0<=_0x59331d;--_0x59331d){var _0x56f9ca=this[_0x5e4901(0x1e7)][_0x59331d],_0x370176=_0x56f9ca[_0x5e4901(0x42e)];if('root'===_0x56f9ca[_0x5e4901(0x381)])return _0x2fbb33(_0x5e4901(0x30a));if(_0x56f9ca[_0x5e4901(0x381)]<=this['prev']){var _0x45a8d7=_0x435078[_0x5e4901(0x311)](_0x56f9ca,'catchLoc'),_0x3b24bf=_0x435078[_0x5e4901(0x311)](_0x56f9ca,'finallyLoc');if(_0x45a8d7&&_0x3b24bf){if(this[_0x5e4901(0x4e1)]<_0x56f9ca[_0x5e4901(0x325)])return _0x2fbb33(_0x56f9ca[_0x5e4901(0x325)],!0x0);if(this['prev']<_0x56f9ca['finallyLoc'])return _0x2fbb33(_0x56f9ca[_0x5e4901(0x24e)]);}else{if(_0x45a8d7){if(this[_0x5e4901(0x4e1)]<_0x56f9ca[_0x5e4901(0x325)])return _0x2fbb33(_0x56f9ca[_0x5e4901(0x325)],!0x0);}else{if(!_0x3b24bf)throw new Error('try\\x20statement\\x20without\\x20catch\\x20or\\x20finally');if(this[_0x5e4901(0x4e1)]<_0x56f9ca['finallyLoc'])return _0x2fbb33(_0x56f9ca['finallyLoc']);}}}}},'abrupt':function(_0x56ed36,_0x561db8){var _0x57d8b1=_0x5c588c;for(var _0x1b83ed=this['tryEntries'][_0x57d8b1(0x4f1)]-0x1;0x0<=_0x1b83ed;--_0x1b83ed){var _0x559693=this[_0x57d8b1(0x1e7)][_0x1b83ed];if(_0x559693[_0x57d8b1(0x381)]<=this[_0x57d8b1(0x4e1)]&&_0x435078['call'](_0x559693,_0x57d8b1(0x24e))&&this['prev']<_0x559693[_0x57d8b1(0x24e)]){var _0x323966=_0x559693;break;}}var _0x31dc02=(_0x323966=_0x323966&&(_0x57d8b1(0x335)===_0x56ed36||'continue'===_0x56ed36)&&_0x323966[_0x57d8b1(0x381)]<=_0x561db8&&_0x561db8<=_0x323966[_0x57d8b1(0x24e)]?null:_0x323966)?_0x323966[_0x57d8b1(0x42e)]:{};return _0x31dc02[_0x57d8b1(0x50c)]=_0x56ed36,_0x31dc02['arg']=_0x561db8,_0x323966?(this[_0x57d8b1(0x47e)]=_0x57d8b1(0x500),this[_0x57d8b1(0x500)]=_0x323966[_0x57d8b1(0x24e)],_0x2e601f):this[_0x57d8b1(0x4bd)](_0x31dc02);},'complete':function(_0x2f4825,_0x30f25f){var _0x5dad5f=_0x5c588c;if('throw'===_0x2f4825['type'])throw _0x2f4825[_0x5dad5f(0x42f)];return _0x5dad5f(0x335)===_0x2f4825[_0x5dad5f(0x50c)]||'continue'===_0x2f4825[_0x5dad5f(0x50c)]?this[_0x5dad5f(0x500)]=_0x2f4825[_0x5dad5f(0x42f)]:_0x5dad5f(0x26c)===_0x2f4825[_0x5dad5f(0x50c)]?(this[_0x5dad5f(0x200)]=this[_0x5dad5f(0x42f)]=_0x2f4825['arg'],this[_0x5dad5f(0x47e)]='return',this['next']=_0x5dad5f(0x30a)):_0x5dad5f(0x2fe)===_0x2f4825[_0x5dad5f(0x50c)]&&_0x30f25f&&(this[_0x5dad5f(0x500)]=_0x30f25f),_0x2e601f;},'finish':function(_0x2ba9b4){var _0x32fbaf=_0x5c588c;for(var _0x5e9c76=this[_0x32fbaf(0x1e7)][_0x32fbaf(0x4f1)]-0x1;0x0<=_0x5e9c76;--_0x5e9c76){var _0x5565a5=this[_0x32fbaf(0x1e7)][_0x5e9c76];if(_0x5565a5[_0x32fbaf(0x24e)]===_0x2ba9b4)return this[_0x32fbaf(0x4bd)](_0x5565a5[_0x32fbaf(0x42e)],_0x5565a5[_0x32fbaf(0x4a9)]),_0x148345(_0x5565a5),_0x2e601f;}},'catch':function(_0x215f9d){var _0x18ce69=_0x5c588c;for(var _0x37101f=this[_0x18ce69(0x1e7)][_0x18ce69(0x4f1)]-0x1;0x0<=_0x37101f;--_0x37101f){var _0x4418a7,_0x3a1b7e,_0x2ea67a=this[_0x18ce69(0x1e7)][_0x37101f];if(_0x2ea67a['tryLoc']===_0x215f9d)return _0x18ce69(0x21d)===(_0x4418a7=_0x2ea67a[_0x18ce69(0x42e)])[_0x18ce69(0x50c)]&&(_0x3a1b7e=_0x4418a7[_0x18ce69(0x42f)],_0x148345(_0x2ea67a)),_0x3a1b7e;}throw new Error('illegal\\x20catch\\x20attempt');},'delegateYield':function(_0x42863c,_0x5e73cc,_0x37ec2c){var _0x2755d1=_0x5c588c;return this[_0x2755d1(0x290)]={'iterator':_0x3a7058(_0x42863c),'resultName':_0x5e73cc,'nextLoc':_0x37ec2c},_0x2755d1(0x500)===this[_0x2755d1(0x47e)]&&(this[_0x2755d1(0x42f)]=void 0x0),_0x2e601f;}},_0x1cf6ba;}_0x26085d[_0x211884(0x237)]=_0x538fb2,_0x26085d[_0x211884(0x237)][_0x211884(0x4fb)]=!0x0,_0x26085d['exports'][_0x211884(0x54c)]=_0x26085d[_0x211884(0x237)];},0x2ba:_0xa7af5a=>{var _0x293180=a0_0x1593;function _0x4c4ea4(_0x1ea86b){var _0xe63ac7=a0_0x1593;return _0xa7af5a[_0xe63ac7(0x237)]=_0x4c4ea4=_0xe63ac7(0x3d0)==typeof Symbol&&'symbol'==typeof Symbol[_0xe63ac7(0x29a)]?function(_0x23fbef){return typeof _0x23fbef;}:function(_0x2d9276){var _0x399616=_0xe63ac7;return _0x2d9276&&_0x399616(0x3d0)==typeof Symbol&&_0x2d9276[_0x399616(0x2c2)]===Symbol&&_0x2d9276!==Symbol[_0x399616(0x532)]?_0x399616(0x44e):typeof _0x2d9276;},_0xa7af5a[_0xe63ac7(0x237)][_0xe63ac7(0x4fb)]=!0x0,_0xa7af5a[_0xe63ac7(0x237)][_0xe63ac7(0x54c)]=_0xa7af5a[_0xe63ac7(0x237)],_0x4c4ea4(_0x1ea86b);}_0xa7af5a['exports']=_0x4c4ea4,_0xa7af5a[_0x293180(0x237)][_0x293180(0x4fb)]=!0x0,_0xa7af5a[_0x293180(0x237)][_0x293180(0x54c)]=_0xa7af5a[_0x293180(0x237)];},0x2af:(_0x44ccaa,_0x169265,_0x2ebdd7)=>{var _0x50498b=a0_0x1593;_0x2ebdd7=_0x2ebdd7(0x3d)(),_0x44ccaa['exports']=_0x2ebdd7;try{regeneratorRuntime=_0x2ebdd7;}catch(_0x33d90f){'object'==typeof globalThis?globalThis[_0x50498b(0x4e9)]=_0x2ebdd7:Function('r',_0x50498b(0x212))(_0x2ebdd7);}}},_0x55ce50={};function _0x165a0a(_0x595555){var _0x69f8c4=a0_0x1593,_0x4d8375=_0x55ce50[_0x595555];if(void 0x0!==_0x4d8375)return _0x4d8375[_0x69f8c4(0x237)];return _0x4d8375=_0x55ce50[_0x595555]={'exports':{}},(_0x38a18c[_0x595555](_0x4d8375,_0x4d8375['exports'],_0x165a0a),_0x4d8375[_0x69f8c4(0x237)]);}_0x165a0a['n']=_0x43cacc=>{var _0x464277=a0_0x1593,_0x395b2d=_0x43cacc&&_0x43cacc[_0x464277(0x4fb)]?()=>_0x43cacc[_0x464277(0x54c)]:()=>_0x43cacc;return _0x165a0a['d'](_0x395b2d,{'a':_0x395b2d}),_0x395b2d;},_0x165a0a['d']=(_0x2cf797,_0xdffbaa)=>{var _0x13dbdc=a0_0x1593;for(var _0x392600 in _0xdffbaa)_0x165a0a['o'](_0xdffbaa,_0x392600)&&!_0x165a0a['o'](_0x2cf797,_0x392600)&&Object[_0x13dbdc(0x256)](_0x2cf797,_0x392600,{'enumerable':!0x0,'get':_0xdffbaa[_0x392600]});},_0x165a0a['o']=(_0x10deda,_0x4a6183)=>Object['prototype']['hasOwnProperty'][_0x52413b(0x311)](_0x10deda,_0x4a6183),((()=>{'use strict';var _0x99d5a2=_0x52413b;function _0x160316(_0x57d44c,_0x537f90){var _0x11fb93=a0_0x1593;if(!(_0x57d44c instanceof _0x537f90))throw new TypeError(_0x11fb93(0x3c9));}function _0x3a005f(_0x11ba05,_0x55594e){var _0x19292f=a0_0x1593;for(var _0x5cf8fa=0x0;_0x5cf8fa<_0x55594e[_0x19292f(0x4f1)];_0x5cf8fa++){var _0x1bd792=_0x55594e[_0x5cf8fa];_0x1bd792[_0x19292f(0x3ad)]=_0x1bd792['enumerable']||!0x1,_0x1bd792[_0x19292f(0x2f2)]=!0x0,_0x19292f(0x38a)in _0x1bd792&&(_0x1bd792['writable']=!0x0),Object[_0x19292f(0x256)](_0x11ba05,_0x1bd792[_0x19292f(0x543)],_0x1bd792);}}function _0x5a3b91(_0x333810,_0x4fca5d,_0x5c4de0){var _0x21a363=a0_0x1593;return _0x4fca5d&&_0x3a005f(_0x333810[_0x21a363(0x532)],_0x4fca5d),_0x5c4de0&&_0x3a005f(_0x333810,_0x5c4de0),Object[_0x21a363(0x256)](_0x333810,_0x21a363(0x532),{'writable':!0x1}),_0x333810;}var _0x5a306e=0x501,_0xa54871=0x502,_0x332ff6=0x505,_0x127bf2=0x507,_0x36832c=0x508,_0x566fd6=0x509,_0x14f925=0x516,_0x40926f=0x1,_0x3b95c4=0x2,_0xf574bd=0x3,_0x462c41=0x0,_0x4ebb4e=0x100,_0x4beee9=0x200,_0x316080=0x300,_0x1ae667=0x400,_0x17c71b=0x500,_0x3ccddf=0x600,_0x1a4011=0x700,_0x396f7c=0x800,_0x11da1d=0x900,_0x5357b0=0xa00,_0x367f2=0x1,_0x168627=0x2,_0x142076=0x4,_0x2802b6=0x8,_0x42215a=0x10,_0x3db8be=0x20,_0x4c7866=(function(){var _0x3be5b4=a0_0x1593;function _0x5cccce(_0x487370,_0x245cd9,_0x4b1046){var _0x3a56b5=a0_0x1593;_0x160316(this,_0x5cccce),this[_0x3a56b5(0x36f)]=0x0,this[_0x3a56b5(0x483)]=0x0,this[_0x3a56b5(0x48e)]=null,this[_0x3a56b5(0x36c)]=!0x0,this[_0x3a56b5(0x541)]=[],this['underflow']=!0x0,this[_0x3a56b5(0x4b5)]=_0x487370,this[_0x3a56b5(0x4d9)]=0x1e,this[_0x3a56b5(0x373)]=!0x1,this[_0x3a56b5(0x52b)]=0x2,this[_0x3a56b5(0x274)]=!0x1,this[_0x3a56b5(0x2e4)]=!0x1,this[_0x3a56b5(0x319)]=_0x245cd9,this['output']=this[_0x3a56b5(0x255)][_0x3a56b5(0x336)](this),this[_0x3a56b5(0x4c5)]=this[_0x3a56b5(0x4c5)][_0x3a56b5(0x336)](this),(this[_0x3a56b5(0x4c3)]=null)!=_0x4b1046&&(this['player']=_0x4b1046);}return _0x5a3b91(_0x5cccce,[{'key':_0x3be5b4(0x217),'value':function(){var _0x1bfaa8=_0x3be5b4,_0x315f09;null==this['decoderObj']&&(_0x315f09={'output':this[_0x1bfaa8(0x255)],'error':this[_0x1bfaa8(0x4c5)]},this[_0x1bfaa8(0x48e)]=new VideoDecoder(_0x315f09)),this[_0x1bfaa8(0x53c)]&&(this[_0x1bfaa8(0x53c)]=!0x1,setTimeout(this[_0x1bfaa8(0x319)][_0x1bfaa8(0x24f)](),0x0)),this[_0x1bfaa8(0x52b)]=0x2,this[_0x1bfaa8(0x36c)]=!0x0;}},{'key':_0x3be5b4(0x2cd),'value':function(_0x4898e1,_0x25c383){var _0x4009ca=_0x3be5b4;null==this[_0x4009ca(0x48e)]||_0x4009ca(0x468)!=this[_0x4009ca(0x48e)][_0x4009ca(0x234)]&&!this[_0x4009ca(0x36c)]||this[_0x4009ca(0x445)](_0x4898e1,_0x25c383),_0x25c383[_0x4009ca(0x209)]&&this[_0x4009ca(0x49c)]();}},{'key':_0x3be5b4(0x23a),'value':function(_0x3a042f){var _0x274cca=_0x3be5b4;for(var _0x94f198=0x0,_0x3516a7=arguments[_0x274cca(0x4f1)],_0x1054db=new Array(0x1<_0x3516a7?_0x3516a7-0x1:0x0),_0x2593b4=0x1;_0x2593b4<_0x3516a7;_0x2593b4++)_0x1054db[_0x2593b4-0x1]=arguments[_0x2593b4];for(var _0x17b83d=0x0,_0x444519=_0x1054db;_0x17b83d<_0x444519[_0x274cca(0x4f1)];_0x17b83d++)_0x94f198+=_0x444519[_0x17b83d][_0x274cca(0x4f1)];for(var _0x395dc0=new _0x3a042f(_0x94f198),_0x4b4718=0x0,_0x38c4b2=0x0,_0x2b40e5=_0x1054db;_0x38c4b2<_0x2b40e5[_0x274cca(0x4f1)];_0x38c4b2++){var _0x1a97d3=_0x2b40e5[_0x38c4b2];_0x395dc0[_0x274cca(0x2d5)](_0x1a97d3,_0x4b4718),_0x4b4718+=_0x1a97d3[_0x274cca(0x4f1)];}return _0x395dc0;}},{'key':_0x3be5b4(0x2cb),'value':function(_0x25fe69){var _0x16b581=_0x3be5b4;for(var _0x3796c9=null,_0xe3042f=null,_0x4339ac=null,_0x4d9965=!0x1,_0x2d93e5=!0x1,_0x3aa0b8=0x0,_0x43f3af=0x0;_0x43f3af<_0x25fe69[_0x16b581(0x4f1)]-0x4;_0x43f3af++){if(0x0!=_0x25fe69[_0x43f3af]||0x0!=_0x25fe69[_0x43f3af+0x1]||0x0!=_0x25fe69[_0x43f3af+0x2]||0x1!=_0x25fe69[_0x43f3af+0x3]||0x67!=_0x25fe69[_0x43f3af+0x4]&&0x27!=_0x25fe69[_0x43f3af+0x4]||(0x0!=_0x43f3af?(_0x2d93e5=!0x0,_0x3796c9=_0x25fe69[_0x16b581(0x28b)](_0x43f3af),_0x3aa0b8=_0x43f3af):_0x3796c9=_0x25fe69),0x0==_0x25fe69[_0x43f3af]&&0x0==_0x25fe69[_0x43f3af+0x1]&&0x0==_0x25fe69[_0x43f3af+0x2]&&0x1==_0x25fe69[_0x43f3af+0x3]&&(0x9==_0x25fe69[_0x43f3af+0x4]||0x6==_0x25fe69[_0x43f3af+0x4])){if(null==_0x3796c9)continue;null==_0xe3042f&&(_0xe3042f=_0x25fe69[_0x16b581(0x28b)](_0x3aa0b8,_0x43f3af),_0x4d9965=!0x0);}if(0x0==_0x25fe69[_0x43f3af]&&0x0==_0x25fe69[_0x43f3af+0x1]&&0x0==_0x25fe69[_0x43f3af+0x2]&&0x1==_0x25fe69[_0x43f3af+0x3]&&(0x65==_0x25fe69[_0x43f3af+0x4]||0x25==_0x25fe69[_0x43f3af+0x4])){_0x4d9965&&(_0x4339ac=_0x25fe69[_0x16b581(0x28b)](_0x43f3af));break;}}return _0x4d9965?this[_0x16b581(0x23a)](Uint8Array,_0xe3042f,_0x4339ac):_0x2d93e5?_0x3796c9:_0x25fe69;}},{'key':_0x3be5b4(0x4b3),'value':function(_0x54df6c){var _0x36d262=_0x3be5b4;return 0x0!=_0x54df6c[0x0]||0x0!=_0x54df6c[0x1]||0x0!=_0x54df6c[0x2]||0x1!=_0x54df6c[0x3]||0x9!=_0x54df6c[0x4]&&0x6!=_0x54df6c[0x4]?_0x54df6c:_0x54df6c[_0x36d262(0x28b)](0x5);}},{'key':_0x3be5b4(0x4d8),'value':function(_0x3ab890,_0x5eeb40,_0x12e401,_0x4d6ead){var _0x4260e0=_0x3be5b4,_0x5cb76c='';if(0x5==_0x5eeb40)_0x5cb76c=_0x4260e0(0x32b),console['log']('265\\x20hard\\x20decoder');else{if(0x100==_0x5eeb40){for(var _0x539fa4=0x0;_0x539fa4<_0x3ab890[_0x4260e0(0x4f1)];_0x539fa4++)if(0x67===_0x3ab890[_0x539fa4]||0x27===_0x3ab890[_0x539fa4]){for(var _0x14401e=_0x3ab890[_0x4260e0(0x54a)](_0x539fa4+0x1,_0x539fa4+0x4),_0x5cb76c=_0x4260e0(0x366),_0x4a51d5=0x0;_0x4a51d5<0x3;_0x4a51d5++){var _0x32d419=_0x14401e[_0x4a51d5][_0x4260e0(0x258)](0x10);_0x5cb76c+=_0x32d419=_0x32d419[_0x4260e0(0x4f1)]<0x2?'0'+_0x32d419:_0x32d419;}break;}console[_0x4260e0(0x514)](_0x4260e0(0x44d));}else console[_0x4260e0(0x514)](_0x4260e0(0x38e));}var _0x276311={'codec':_0x5cb76c,'hardwareAcceleration':'prefer-hardware','optimizeForLatency':0x1};return 0x5!=_0x5eeb40&&this[_0x4260e0(0x373)]&&(_0x276311[_0x4260e0(0x1ec)]=_0x4260e0(0x545)),_0x276311;}},{'key':_0x3be5b4(0x445),'value':function(_0x3072de,_0x4895a7){var _0x2ea637=_0x3be5b4;this[_0x2ea637(0x4d9)]!=_0x4895a7[_0x2ea637(0x4d9)]&&(this['frameRate']=_0x4895a7['frameRate']),this[_0x2ea637(0x36f)]!=_0x4895a7['width']&&(this[_0x2ea637(0x36f)]=_0x4895a7['width']),this[_0x2ea637(0x483)]!=_0x4895a7[_0x2ea637(0x483)]&&(this['height']=_0x4895a7['height']),_0x4895a7['needSetPreSoft']&&(this[_0x2ea637(0x373)]=_0x4895a7['needSetPreSoft']);var _0x926b73=_0x3072de;if(0x4!=this[_0x2ea637(0x52b)]&&null!=this[_0x2ea637(0x48e)]){if(_0x2ea637(0x468)==this[_0x2ea637(0x48e)][_0x2ea637(0x234)]){var _0x35a30d=new EncodedVideoChunk({'data':_0x926b73,'timestamp':_0x4895a7['timeStamp'],'type':_0x4895a7[_0x2ea637(0x243)]?_0x2ea637(0x543):_0x2ea637(0x369)});this[_0x2ea637(0x48e)][_0x2ea637(0x31f)](_0x35a30d),_0x3072de=_0x926b73=null,_0x4895a7[_0x2ea637(0x3fd)];}else{if(_0x4895a7[_0x2ea637(0x243)]&&_0x2ea637(0x30c)==this['decoderObj'][_0x2ea637(0x234)]){_0x35a30d=this[_0x2ea637(0x4d8)](_0x3072de,_0x4895a7[_0x2ea637(0x272)],_0x4895a7[_0x2ea637(0x36f)],_0x4895a7[_0x2ea637(0x483)]);if(''==_0x35a30d[_0x2ea637(0x2de)])return-0x1;this[_0x2ea637(0x48e)][_0x2ea637(0x4d2)](_0x35a30d),_0x926b73=this[_0x2ea637(0x2cb)](_0x3072de),this[_0x2ea637(0x36c)]=!0x1,_0x35a30d=new EncodedVideoChunk({'data':_0x926b73,'timestamp':_0x4895a7[_0x2ea637(0x37a)],'type':_0x4895a7[_0x2ea637(0x243)]?'key':_0x2ea637(0x369)}),(this['decoderObj'][_0x2ea637(0x31f)](_0x35a30d),_0x926b73=null);}}}}},{'key':_0x3be5b4(0x255),'value':function(_0x23558e){var _0x41bbab=_0x3be5b4;_0x41bbab(0x468)==this[_0x41bbab(0x48e)]['state']?(_0x23558e[_0x41bbab(0x32a)],_0x23558e[_0x41bbab(0x316)],_0x23558e[_0x41bbab(0x4cc)],_0x23558e[_0x41bbab(0x455)],_0x23558e[_0x41bbab(0x436)],_0x23558e['duration'],_0x23558e[_0x41bbab(0x264)],this['ready_frames'][_0x41bbab(0x51d)](_0x23558e),this[_0x41bbab(0x274)]||(this['decoderOutSuccess']=!0x0)):_0x23558e[_0x41bbab(0x493)]();}},{'key':'output2','value':function(_0x16cc73){var _0x1b8693=_0x3be5b4,_0x5d44c7=this;_0x16cc73[_0x1b8693(0x264)],createImageBitmap(_0x16cc73)[_0x1b8693(0x39e)](function(_0x1186b0){var _0x5d79e5=_0x1b8693;_0x16cc73[_0x5d79e5(0x493)](),_0x5d44c7[_0x5d79e5(0x541)]['push'](_0x1186b0);});}},{'key':_0x3be5b4(0x4c5),'value':function(_0x2f2450){var _0x2ffcdb=_0x3be5b4;console[_0x2ffcdb(0x514)](_0x2ffcdb(0x50e)+_0x2f2450[_0x2ffcdb(0x435)]+_0x2ffcdb(0x284)+this[_0x2ffcdb(0x48e)][_0x2ffcdb(0x234)]+_0x2ffcdb(0x277)+this[_0x2ffcdb(0x4d9)]),this[_0x2ffcdb(0x274)]?this['decoderObjNeedReset']=!0x0:(this[_0x2ffcdb(0x319)]['HardDecodeError'](),console[_0x2ffcdb(0x514)](_0x2ffcdb(0x27c),_0x2ffcdb(0x309)));}},{'key':'destroyDecoder','value':function(){var _0x11d226=this;return new Promise(function(_0x217ecd,_0x176e35){var _0x46bbfd=a0_0x1593;_0x11d226[_0x46bbfd(0x29f)]()[_0x46bbfd(0x39e)](function(){var _0x435a5a=_0x46bbfd;null!=_0x11d226[_0x435a5a(0x48e)]&&('closed'!=_0x11d226[_0x435a5a(0x48e)][_0x435a5a(0x234)]&&_0x11d226[_0x435a5a(0x48e)][_0x435a5a(0x493)](),console[_0x435a5a(0x514)](_0x435a5a(0x1db)),_0x11d226[_0x435a5a(0x48e)]=null),_0x11d226[_0x435a5a(0x52b)]=0x4,_0x11d226['decoderOutSuccess']=!0x1,_0x11d226[_0x435a5a(0x36c)]=!0x0,_0x11d226[_0x435a5a(0x53c)]=!0x0,_0x11d226[_0x435a5a(0x373)]=!0x1,_0x11d226[_0x435a5a(0x2e4)]=!0x1,_0x217ecd();},function(){_0x176e35();});});}},{'key':_0x3be5b4(0x3b7),'value':function(){var _0x255f34=this;return new Promise(function(_0x45c248,_0x1d1555){var _0x35310e=a0_0x1593;_0x255f34[_0x35310e(0x409)]()[_0x35310e(0x39e)](function(){var _0x4decee=_0x35310e;_0x255f34[_0x4decee(0x217)](),console[_0x4decee(0x514)](_0x4decee(0x221),_0x4decee(0x4cf)),_0x45c248();},function(){_0x1d1555();});});}},{'key':_0x3be5b4(0x29f),'value':function(){var _0x2c6a8d=this;return new Promise(function(_0x41fb33,_0x422247){var _0x359386=a0_0x1593;for(var _0x39d4ff=_0x2c6a8d[_0x359386(0x541)][_0x359386(0x4f1)],_0x325315=0x0;_0x325315<_0x39d4ff;_0x325315++)_0x2c6a8d[_0x359386(0x541)][_0x359386(0x21b)]()[_0x359386(0x493)]();_0x2c6a8d['ready_frames'][_0x359386(0x21a)](0x0,_0x2c6a8d[_0x359386(0x541)][_0x359386(0x4f1)]),null!=_0x2c6a8d[_0x359386(0x48e)]&&_0x359386(0x468)==_0x2c6a8d[_0x359386(0x48e)][_0x359386(0x234)]&&_0x2c6a8d[_0x359386(0x48e)]['reset'](),_0x41fb33();});}},{'key':'SetStreamEnd','value':function(){var _0x59b11a=_0x3be5b4;return 0x0==this[_0x59b11a(0x48e)][_0x59b11a(0x25c)]&&0x0==this[_0x59b11a(0x541)]['length']&&(this[_0x59b11a(0x48e)][_0x59b11a(0x3fc)](),console[_0x59b11a(0x514)](_0x59b11a(0x3fc))),0x1;}}]),_0x5cccce;}()),_0x13949e={'SR_OK':0x1,'SR_ERR_NOT_SUPPORT':0x80000001,'SR_ERR_SUBPORT':0x80000002,'SR_ERR_ALLOC_MEMORY':0x80000003,'SR_ERR_CALL_ORDER':0x80000004,'SR_ERR_PARAM':0x80000005,'SR_ERR_CAPTURE':0x80000006,'SR_ERR_SUBPORT_FULL':0x80000007,'SR_ERR_SHADER':0x80000008,'SR_ERR_3D_MODEL':0x80000009,'SR_ERR_FONT':0x8000000a,'SR_ERR_MEMORY_LIMIT':0x8000000b,'SR_ERR_WEBGPU_RESOURCE':0x8000000c,'SR_ERR_CANVAS':0x8000000d,'SR_ERR_FREETYPE_INIT':0x8000000e,'SR_ERR_FREETYPE_RESOURCE':0x8000000f},_0x3468da={'SR_DE_NULL':0x0,'SR_DE_FISH_ORIGINAL':0x1,'SR_DE_FISH_PTZ_CEILING':0x2,'SR_DE_FISH_PTZ_FLOOR':0x3,'SR_DE_FISH_PTZ_WALL':0x4,'SR_DE_FISH_PANORAMA_CEILING_360':0x5,'SR_DE_FISH_PANORAMA_CEILING_180':0x6,'SR_DE_FISH_PANORAMA_FLOOR_360':0x7,'SR_DE_FISH_PANORAMA_FLOOR_180':0x8,'SR_DE_FISH_PANORAMA_WALL':0x9,'SR_DE_FISH_SEMISPHERE':0xa,'SR_DE_EAGLEEYE_SEMISPHERE':0xb,'SR_DE_EAGLEEYE_PLANE':0xc,'SR_DE_FISH_CYLINDER_CEILING':0xd,'SR_DE_FISH_CYLINDER_FLOOR':0xe,'SR_DE_FISH_CYLINDER_SPLIT_CEILING':0xf,'SR_DE_FISH_CYLINDER_SPLIT_FLOOR':0x10,'SR_DE_FISH_PLANET':0x11,'SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL':0x12,'SR_DE_FISH_ARCSPHERE_VERTICAL_WALL':0x13,'SR_DE_FISH_ANIMATION_SWITCH_CEILING':0x14,'SR_DE_FISH_ANIMATION_SWITCH_FLOOR':0x15,'SR_DE_PANORAMA_SPHERE':0x16,'SR_DE_PANORAMA_PLANET':0x17},_0x3c8826=0x0,_0x3b5c80=0x1,_0x1e8e38=0x2,_0x2b1fa6=0x3,_0x1d678a=0x4,_0x366953=0x0,_0xba837=0x1,_0x46c232=0x2,_0x30de30=0x1,_0x4d39af=0x2,_0x1ab3fe=0x3,_0x158a35=0x0,_0x3b9975=0x1,_0x17dd0b=0x1,_0x45c70b=0x2;function _0x238f72(_0x1f94be,_0x4c2316,_0x55dd03,_0x41bf55,_0x442097,_0x32a2f9,_0x4bd14b){var _0x31a54b=a0_0x1593;try{var _0xfd0406=_0x1f94be[_0x32a2f9](_0x4bd14b),_0x4cdea7=_0xfd0406['value'];}catch(_0x5cbe4a){return void _0x55dd03(_0x5cbe4a);}_0xfd0406[_0x31a54b(0x3e6)]?_0x4c2316(_0x4cdea7):Promise[_0x31a54b(0x51c)](_0x4cdea7)[_0x31a54b(0x39e)](_0x41bf55,_0x442097);}function _0x30bbb2(_0x27f3d4){return function(){var _0x1d80d6=this,_0x13ed0f=arguments;return new Promise(function(_0xdd49e4,_0x195185){var _0x2a3af2=_0x27f3d4['apply'](_0x1d80d6,_0x13ed0f);function _0x2a8370(_0x1cf860){var _0x56d8ef=a0_0x1593;_0x238f72(_0x2a3af2,_0xdd49e4,_0x195185,_0x2a8370,_0xcdbf4,_0x56d8ef(0x500),_0x1cf860);}function _0xcdbf4(_0x372d44){_0x238f72(_0x2a3af2,_0xdd49e4,_0x195185,_0x2a8370,_0xcdbf4,'throw',_0x372d44);}_0x2a8370(void 0x0);});};}var _0x5342a5,_0x4f76fc,_0x1bf079,_0x125374,_0x151f60,_0x2afdcd,_0x27d008=_0x165a0a(0x2af),_0x148935=_0x165a0a['n'](_0x27d008);function _0x88c779(_0x375065,_0x5b1587,_0x47584d){var _0xec6465=a0_0x1593;_0x5b1587 in _0x375065?Object[_0xec6465(0x256)](_0x375065,_0x5b1587,{'value':_0x47584d,'enumerable':!0x0,'configurable':!0x0,'writable':!0x0}):_0x375065[_0x5b1587]=_0x47584d;}function _0x49c293(_0x3e9167,_0x4b688c,_0x289973,_0x35cee1){var _0x57eb45=a0_0x1593;return _0x3e9167[_0x57eb45(0x27a)](0x0)<<0x18|_0x4b688c['charCodeAt'](0x0)<<0x10|_0x289973['charCodeAt'](0x0)<<0x8|_0x35cee1[_0x57eb45(0x27a)](0x0);}var _0x5338d8=null,_0x30397f=_0x5a3b91(function _0x2cabee(){var _0x4a2d1a=a0_0x1593;_0x160316(this,_0x2cabee),_0x88c779(this,_0x4a2d1a(0x297),(function(){var _0x46f26a=_0x30bbb2(_0x148935()['mark'](function _0x7f8ef5(_0x28b098,_0x12ede3,_0x510526){var _0x199de3=a0_0x1593,_0x3fe32f;return _0x148935()[_0x199de3(0x398)](function(_0x8885bf){var _0x326aaf=_0x199de3;for(;;)switch(_0x8885bf['prev']=_0x8885bf[_0x326aaf(0x500)]){case 0x0:null==_0x5338d8&&((_0x3fe32f=document[_0x326aaf(0x2d1)](_0x326aaf(0x4e4)))[_0x326aaf(0x50c)]=_0x326aaf(0x51a),_0x3fe32f[_0x326aaf(0x269)]=_0x28b098,_0x3fe32f[_0x326aaf(0x48f)]=function(){var _0x5f423f=_0x326aaf;window[_0x5f423f(0x1cd)]()[_0x5f423f(0x39e)](function(_0x3332e5){_0x5338d8=_0x3332e5,_0x12ede3(_0x510526);});},document[_0x326aaf(0x1d8)][_0x326aaf(0x359)](_0x3fe32f));case 0x1:case'end':return _0x8885bf[_0x326aaf(0x43b)]();}},_0x7f8ef5);}));return function(_0x57b552,_0x96c00c,_0x420f8c){var _0x4557ee=a0_0x1593;return _0x46f26a[_0x4557ee(0x4f6)](this,arguments);};}())),_0x88c779(this,_0x4a2d1a(0x2d0),function(_0x245364){var _0x3ceb1c=_0x4a2d1a;return _0x5338d8[_0x3ceb1c(0x33b)](_0x245364);}),_0x88c779(this,_0x4a2d1a(0x250),function(_0xc8abd8){var _0x22228d=_0x4a2d1a,_0x2183bf=[0x0],_0x2156ed=[0x0],_0x4faa39=[0x0];return _0x5338d8[_0x22228d(0x245)](_0xc8abd8[_0x22228d(0x336)],_0x2183bf,_0x2156ed,_0x4faa39),{'major':_0x2183bf[0x0],'minor':_0x2156ed[0x0],'patch':_0x4faa39[0x0]};}),_0x88c779(this,_0x4a2d1a(0x2bd),function(_0x596592){var _0x451f77=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x451f77(0x444)](_0x596592[_0x451f77(0x336)]);}),_0x88c779(this,'Done_FreeType',function(_0x461db4){var _0x531b17=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x531b17(0x2b4)](_0x461db4[_0x531b17(0x336)]);}),_0x88c779(this,'New_Memory_Face',function(_0x1966f3,_0x309c80,_0x407a37,_0x5f5ca6){var _0x227efd=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8['FT_New_Memory_Face'](_0x1966f3[_0x227efd(0x336)],_0x309c80,_0x407a37,_0x5f5ca6['bind']);}),_0x88c779(this,_0x4a2d1a(0x278),function(_0x32d236){var _0xd0ed18=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0xd0ed18(0x34e)](_0x32d236['bind']);}),_0x88c779(this,_0x4a2d1a(0x3e2),function(_0x4be041,_0x50855c){var _0x3c5c5b=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x3c5c5b(0x4ec)](_0x4be041[_0x3c5c5b(0x336)],_0x50855c);}),_0x88c779(this,'Load_Char',function(_0x14a803,_0x5a9937){var _0x589e80=_0x4a2d1a,_0x2c062b=0x2<arguments['length']&&void 0x0!==arguments[0x2]?arguments[0x2]:_0x151f60[_0x589e80(0x401)];if(null!=_0x5338d8)return _0x5338d8[_0x589e80(0x537)](_0x14a803[_0x589e80(0x336)],_0x5a9937,_0x2c062b);}),_0x88c779(this,_0x4a2d1a(0x4b0),function(_0xfa7ad0,_0x40f563,_0x4bb0d8,_0x2492ab,_0x349dd2){var _0x2b4145=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8['FT_Set_Char_Size'](_0xfa7ad0[_0x2b4145(0x336)],_0x40f563,_0x4bb0d8,_0x2492ab,_0x349dd2);}),_0x88c779(this,'Set_Pixel_Size',function(_0x47a1cc,_0x197740,_0x29f552){var _0x20300e=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x20300e(0x397)](_0x47a1cc[_0x20300e(0x336)],_0x197740,_0x29f552);}),_0x88c779(this,_0x4a2d1a(0x4af),function(_0x57f635){var _0x50b595=_0x4a2d1a,_0x45887b=0x1<arguments[_0x50b595(0x4f1)]&&void 0x0!==arguments[0x1]?arguments[0x1]:_0x2afdcd[_0x50b595(0x4da)];if(null!=_0x5338d8)return _0x5338d8[_0x50b595(0x4cb)](_0x57f635,_0x45887b);}),_0x88c779(this,_0x4a2d1a(0x23c),function(_0x2be896,_0xe07356,_0x46fa75,_0x63996d){var _0x38d24a=_0x4a2d1a,_0x17e511=0x4<arguments[_0x38d24a(0x4f1)]&&void 0x0!==arguments[0x4]?arguments[0x4]:new _0x4f76fc();if(null!=_0x5338d8)return _0x5338d8[_0x38d24a(0x47d)](_0x2be896[_0x38d24a(0x336)],_0xe07356,_0x46fa75,_0x63996d,_0x17e511);}),_0x88c779(this,_0x4a2d1a(0x318),function(_0x5e1d6e,_0x2178f9,_0x252d9f){var _0xb220df=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0xb220df(0x387)](_0x5e1d6e,_0x2178f9,_0x252d9f);});}),_0xe651be=((_0x27d008=_0x5342a5=_0x5342a5||{})[_0x27d008['Ok']=0x0]='Ok',_0x27d008[_0x27d008[_0x99d5a2(0x35f)]=0x1]=_0x99d5a2(0x35f),_0x27d008[_0x27d008[_0x99d5a2(0x2eb)]=0x2]=_0x99d5a2(0x2eb),_0x27d008[_0x27d008[_0x99d5a2(0x2d9)]=0x3]='Invalid_File_Format',_0x27d008[_0x27d008[_0x99d5a2(0x291)]=0x4]='Invalid_Version',_0x27d008[_0x27d008[_0x99d5a2(0x244)]=0x5]='Lower_Module_Version',_0x27d008[_0x27d008['Invalid_Argument']=0x6]=_0x99d5a2(0x3f0),_0x27d008[_0x27d008['Unimplemented_Feature']=0x7]=_0x99d5a2(0x322),_0x27d008[_0x27d008[_0x99d5a2(0x4ae)]=0x8]='Invalid_Table',_0x27d008[_0x27d008[_0x99d5a2(0x328)]=0x9]=_0x99d5a2(0x328),_0x27d008[_0x27d008[_0x99d5a2(0x2ff)]=0xa]=_0x99d5a2(0x2ff),_0x27d008[_0x27d008[_0x99d5a2(0x3dc)]=0xb]=_0x99d5a2(0x3dc),_0x27d008[_0x27d008[_0x99d5a2(0x219)]=0xc]='Missing_Property',_0x27d008[_0x27d008[_0x99d5a2(0x48b)]=0x10]=_0x99d5a2(0x48b),_0x27d008[_0x27d008['Invalid_Character_Code']=0x11]=_0x99d5a2(0x2fa),_0x27d008[_0x27d008[_0x99d5a2(0x481)]=0x12]='Invalid_Glyph_Format',_0x27d008[_0x27d008['Cannot_Render_Glyph']=0x13]=_0x99d5a2(0x508),_0x27d008[_0x27d008['Invalid_Outline']=0x14]='Invalid_Outline',_0x27d008[_0x27d008['Invalid_Composite']=0x15]=_0x99d5a2(0x4c1),_0x27d008[_0x27d008[_0x99d5a2(0x4d0)]=0x16]=_0x99d5a2(0x4d0),_0x27d008[_0x27d008[_0x99d5a2(0x261)]=0x17]=_0x99d5a2(0x261),_0x27d008[_0x27d008[_0x99d5a2(0x2ef)]=0x20]=_0x99d5a2(0x2ef),_0x27d008[_0x27d008['Invalid_Library_Handle']=0x21]=_0x99d5a2(0x473),_0x27d008[_0x27d008['Invalid_Driver_Handle']=0x22]='Invalid_Driver_Handle',_0x27d008[_0x27d008[_0x99d5a2(0x463)]=0x23]=_0x99d5a2(0x463),_0x27d008[_0x27d008['Invalid_Size_Handle']=0x24]='Invalid_Size_Handle',_0x27d008[_0x27d008[_0x99d5a2(0x1ce)]=0x25]=_0x99d5a2(0x1ce),_0x27d008[_0x27d008[_0x99d5a2(0x47a)]=0x26]=_0x99d5a2(0x47a),_0x27d008[_0x27d008[_0x99d5a2(0x38c)]=0x27]=_0x99d5a2(0x38c),_0x27d008[_0x27d008[_0x99d5a2(0x421)]=0x28]='Invalid_Stream_Handle',_0x27d008[_0x27d008[_0x99d5a2(0x466)]=0x30]=_0x99d5a2(0x466),_0x27d008[_0x27d008[_0x99d5a2(0x204)]=0x31]=_0x99d5a2(0x204),_0x27d008[_0x27d008[_0x99d5a2(0x426)]=0x40]=_0x99d5a2(0x426),_0x27d008[_0x27d008[_0x99d5a2(0x46e)]=0x41]='Unlisted_Object',_0x27d008[_0x27d008[_0x99d5a2(0x474)]=0x51]='Cannot_Open_Stream',_0x27d008[_0x27d008[_0x99d5a2(0x4ea)]=0x52]=_0x99d5a2(0x4ea),_0x27d008[_0x27d008[_0x99d5a2(0x253)]=0x53]='Invalid_Stream_Skip',_0x27d008[_0x27d008[_0x99d5a2(0x467)]=0x54]='Invalid_Stream_Read',_0x27d008[_0x27d008[_0x99d5a2(0x3c7)]=0x55]=_0x99d5a2(0x3c7),_0x27d008[_0x27d008[_0x99d5a2(0x44f)]=0x56]='Invalid_Frame_Operation',_0x27d008[_0x27d008[_0x99d5a2(0x23e)]=0x57]=_0x99d5a2(0x23e),_0x27d008[_0x27d008[_0x99d5a2(0x1d1)]=0x58]=_0x99d5a2(0x1d1),_0x27d008[_0x27d008[_0x99d5a2(0x411)]=0x60]=_0x99d5a2(0x411),_0x27d008[_0x27d008[_0x99d5a2(0x424)]=0x61]=_0x99d5a2(0x424),_0x27d008[_0x27d008[_0x99d5a2(0x43f)]=0x62]=_0x99d5a2(0x43f),_0x27d008[_0x27d008[_0x99d5a2(0x472)]=0x63]=_0x99d5a2(0x472),_0x27d008[_0x27d008[_0x99d5a2(0x33f)]=0x70]='Too_Many_Caches',_0x27d008[_0x27d008[_0x99d5a2(0x3de)]=0x80]=_0x99d5a2(0x3de),_0x27d008[_0x27d008[_0x99d5a2(0x1e8)]=0x81]='Too_Few_Arguments',_0x27d008[_0x27d008[_0x99d5a2(0x298)]=0x82]=_0x99d5a2(0x298),_0x27d008[_0x27d008['Code_Overflow']=0x83]=_0x99d5a2(0x26e),_0x27d008[_0x27d008['Bad_Argument']=0x84]='Bad_Argument',_0x27d008[_0x27d008[_0x99d5a2(0x25d)]=0x85]='Divide_By_Zero',_0x27d008[_0x27d008['Invalid_Reference']=0x86]=_0x99d5a2(0x282),_0x27d008[_0x27d008['Debug_OpCode']=0x87]=_0x99d5a2(0x385),_0x27d008[_0x27d008[_0x99d5a2(0x27f)]=0x88]=_0x99d5a2(0x27f),_0x27d008[_0x27d008[_0x99d5a2(0x2b1)]=0x89]=_0x99d5a2(0x2b1),_0x27d008[_0x27d008[_0x99d5a2(0x37e)]=0x8a]=_0x99d5a2(0x37e),_0x27d008[_0x27d008[_0x99d5a2(0x2ca)]=0x8b]=_0x99d5a2(0x2ca),_0x27d008[_0x27d008[_0x99d5a2(0x452)]=0x8c]=_0x99d5a2(0x452),_0x27d008[_0x27d008[_0x99d5a2(0x43c)]=0x8d]=_0x99d5a2(0x43c),_0x27d008[_0x27d008['Table_Missing']=0x8e]=_0x99d5a2(0x295),_0x27d008[_0x27d008['Horiz_Header_Missing']=0x8f]=_0x99d5a2(0x346),_0x27d008[_0x27d008[_0x99d5a2(0x494)]=0x90]=_0x99d5a2(0x494),_0x27d008[_0x27d008[_0x99d5a2(0x20f)]=0x91]=_0x99d5a2(0x20f),_0x27d008[_0x27d008['CMap_Table_Missing']=0x92]=_0x99d5a2(0x2a0),_0x27d008[_0x27d008['Hmtx_Table_Missing']=0x93]=_0x99d5a2(0x374),_0x27d008[_0x27d008[_0x99d5a2(0x4f4)]=0x94]=_0x99d5a2(0x4f4),_0x27d008[_0x27d008[_0x99d5a2(0x384)]=0x95]=_0x99d5a2(0x384),_0x27d008[_0x27d008['Invalid_CharMap_Format']=0x96]=_0x99d5a2(0x44c),_0x27d008[_0x27d008[_0x99d5a2(0x35a)]=0x97]='Invalid_PPem',_0x27d008[_0x27d008[_0x99d5a2(0x2d6)]=0x98]=_0x99d5a2(0x2d6),_0x27d008[_0x27d008[_0x99d5a2(0x471)]=0x99]=_0x99d5a2(0x471),_0x27d008[_0x27d008[_0x99d5a2(0x3a2)]=0x9a]='Invalid_Post_Table_Format',_0x27d008[_0x27d008[_0x99d5a2(0x3cf)]=0x9b]=_0x99d5a2(0x3cf),_0x27d008[_0x27d008[_0x99d5a2(0x42a)]=0x9c]='DEF_In_Glyf_Bytecode',_0x27d008[_0x27d008['Missing_Bitmap']=0x9d]=_0x99d5a2(0x456),_0x27d008[_0x27d008['Syntax_Error']=0xa0]=_0x99d5a2(0x31c),_0x27d008[_0x27d008[_0x99d5a2(0x1d7)]=0xa1]=_0x99d5a2(0x1d7),_0x27d008[_0x27d008[_0x99d5a2(0x2f7)]=0xa2]=_0x99d5a2(0x2f7),_0x27d008[_0x27d008[_0x99d5a2(0x24c)]=0xa3]=_0x99d5a2(0x24c),_0x27d008[_0x27d008[_0x99d5a2(0x333)]=0xa4]=_0x99d5a2(0x333),_0x27d008[_0x27d008['Missing_Startfont_Field']=0xb0]=_0x99d5a2(0x239),_0x27d008[_0x27d008[_0x99d5a2(0x3b9)]=0xb1]=_0x99d5a2(0x3b9),_0x27d008[_0x27d008[_0x99d5a2(0x23b)]=0xb2]=_0x99d5a2(0x23b),_0x27d008[_0x27d008[_0x99d5a2(0x1f4)]=0xb3]=_0x99d5a2(0x1f4),_0x27d008[_0x27d008[_0x99d5a2(0x2a5)]=0xb4]=_0x99d5a2(0x2a5),_0x27d008[_0x27d008['Missing_Startchar_Field']=0xb5]=_0x99d5a2(0x2f8),_0x27d008[_0x27d008[_0x99d5a2(0x35d)]=0xb6]=_0x99d5a2(0x35d),_0x27d008[_0x27d008[_0x99d5a2(0x377)]=0xb7]=_0x99d5a2(0x377),_0x27d008[_0x27d008['Bbx_Too_Big']=0xb8]=_0x99d5a2(0x449),_0x27d008[_0x27d008['Corrupted_Font_Header']=0xb9]=_0x99d5a2(0x242),_0x27d008[_0x27d008[_0x99d5a2(0x4d3)]=0xba]=_0x99d5a2(0x4d3),(_0x27d008={'NONE':0x0,0x0:_0x99d5a2(0x1da)})[_0x27d008[_0x99d5a2(0x20b)]=_0x49c293('c','o','m','p')]=_0x99d5a2(0x20b),_0x27d008[_0x27d008['BITMAP']=_0x49c293('b','i','t','s')]=_0x99d5a2(0x293),_0x27d008[_0x27d008['OUTLINE']=_0x49c293('o','u','t','l')]='OUTLINE',_0x27d008[_0x27d008[_0x99d5a2(0x35c)]=_0x49c293('p','l','o','t')]=_0x99d5a2(0x35c),_0x4f76fc=_0x5a3b91(function _0x5bad77(){_0x160316(this,_0x5bad77),this['x']=0x0,this['y']=0x0;}),0x0,_0x1bf079=(function(){var _0x59149e=_0x99d5a2;function _0x357cc6(){var _0x4b32e4=a0_0x1593;_0x160316(this,_0x357cc6),this[_0x4b32e4(0x336)]=[null];}return _0x5a3b91(_0x357cc6,[{'key':'init','value':function(){var _0x2436b6=a0_0x1593,_0x2255c7=bind[_0x2436b6(0x444)](this['bind']);if(_0x2255c7!==_0x5342a5['Ok'])throw new Error(_0x2436b6(0x535)+_0x2255c7[_0x2436b6(0x258)]());}},{'key':_0x59149e(0x3e6),'value':function(){var _0x5ed2d1=_0x59149e,_0x4e4cf2=bind[_0x5ed2d1(0x2b4)](this[_0x5ed2d1(0x336)]);if(_0x4e4cf2!==_0x5342a5['Ok'])throw new Error(_0x5ed2d1(0x1f3)+_0x4e4cf2[_0x5ed2d1(0x258)]());}}]),_0x357cc6;}()),_0x125374=(function(){var _0x22397f=_0x99d5a2;function _0x4b0363(){var _0x2e1c61=a0_0x1593;_0x160316(this,_0x4b0363),this[_0x2e1c61(0x336)]=[null];}return _0x5a3b91(_0x4b0363,[{'key':_0x22397f(0x4a8),'get':function(){if(null===this['bind'][0x0])throw new Error();return this['bind'][0x0];}},{'key':_0x22397f(0x3e4),'get':function(){return this['_bind']['num_faces'];}},{'key':_0x22397f(0x3bf),'get':function(){var _0x297487=_0x22397f;return this['_bind'][_0x297487(0x3bf)];}},{'key':_0x22397f(0x2e2),'get':function(){var _0x504c21=_0x22397f;return this[_0x504c21(0x4a8)]['face_flags'];}},{'key':'style_flags','get':function(){var _0x596e14=_0x22397f;return this[_0x596e14(0x4a8)][_0x596e14(0x403)];}},{'key':_0x22397f(0x211),'get':function(){var _0x5955ba=_0x22397f;return this[_0x5955ba(0x4a8)]['num_glyphs'];}},{'key':_0x22397f(0x30d),'get':function(){var _0x50edb9=_0x22397f;return this[_0x50edb9(0x4a8)][_0x50edb9(0x30d)];}},{'key':_0x22397f(0x521),'get':function(){var _0x42d7f=_0x22397f;return this[_0x42d7f(0x4a8)][_0x42d7f(0x521)];}},{'key':_0x22397f(0x1e0),'get':function(){var _0x35e165=_0x22397f;return this[_0x35e165(0x4a8)][_0x35e165(0x1e0)];}},{'key':_0x22397f(0x2c5),'get':function(){var _0x555a50=_0x22397f;return this[_0x555a50(0x4a8)][_0x555a50(0x2c5)];}},{'key':_0x22397f(0x476),'get':function(){var _0x13fa38=_0x22397f;return this[_0x13fa38(0x4a8)][_0x13fa38(0x476)];}},{'key':_0x22397f(0x301),'get':function(){var _0x3799c9=_0x22397f;return this[_0x3799c9(0x4a8)]['descender'];}},{'key':_0x22397f(0x483),'get':function(){var _0x1d2220=_0x22397f;return this['_bind'][_0x1d2220(0x483)];}},{'key':'max_advance_width','get':function(){var _0x105daa=_0x22397f;return this['_bind'][_0x105daa(0x496)];}},{'key':_0x22397f(0x22c),'get':function(){var _0x4e74f1=_0x22397f;return this[_0x4e74f1(0x4a8)][_0x4e74f1(0x22c)];}},{'key':_0x22397f(0x549),'get':function(){var _0x181e20=_0x22397f;return this[_0x181e20(0x4a8)]['underline_position'];}},{'key':'underline_thickness','get':function(){var _0xa2b222=_0x22397f;return this['_bind'][_0xa2b222(0x28e)];}},{'key':_0x22397f(0x43e),'get':function(){var _0x531177=_0x22397f;return this[_0x531177(0x4a8)][_0x531177(0x43e)];}}]),_0x4b0363;}()),(_0x27d008=_0x151f60=_0x151f60||{})[_0x27d008[_0x99d5a2(0x401)]=0x0]=_0x99d5a2(0x401),_0x27d008[_0x27d008['NO_SCALE']=0x1]=_0x99d5a2(0x4f7),_0x27d008[_0x27d008[_0x99d5a2(0x32e)]=0x2]=_0x99d5a2(0x32e),_0x27d008[_0x27d008[_0x99d5a2(0x2ec)]=0x4]=_0x99d5a2(0x2ec),_0x27d008[_0x27d008[_0x99d5a2(0x3ac)]=0x8]='NO_BITMAP',_0x27d008[_0x27d008[_0x99d5a2(0x233)]=0x10]=_0x99d5a2(0x233),_0x27d008[_0x27d008[_0x99d5a2(0x1d5)]=0x20]=_0x99d5a2(0x1d5),_0x27d008[_0x27d008[_0x99d5a2(0x372)]=0x40]='CROP_BITMAP',_0x27d008[_0x27d008[_0x99d5a2(0x461)]=0x80]='PEDANTIC',_0x27d008[_0x27d008[_0x99d5a2(0x308)]=0x200]=_0x99d5a2(0x308),_0x27d008[_0x27d008[_0x99d5a2(0x25b)]=0x400]=_0x99d5a2(0x25b),_0x27d008[_0x27d008[_0x99d5a2(0x418)]=0x800]='IGNORE_TRANSFORM',_0x27d008[_0x27d008[_0x99d5a2(0x389)]=0x1000]='MONOCHROME',_0x27d008[_0x27d008[_0x99d5a2(0x518)]=0x2000]='LINEAR_DESIGN',_0x27d008[_0x27d008['NO_AUTOHINT']=0x8000]=_0x99d5a2(0x4ca),_0x27d008[_0x27d008[_0x99d5a2(0x30b)]=0x100000]=_0x99d5a2(0x30b),_0x27d008[_0x27d008[_0x99d5a2(0x428)]=0x200000]=_0x99d5a2(0x428),_0x27d008[_0x27d008[_0x99d5a2(0x1f9)]=0x400000]='BITMAP_METRICS_ONLY',_0x27d008[_0x27d008[_0x99d5a2(0x29d)]=0x100]=_0x99d5a2(0x29d),_0x27d008[_0x27d008[_0x99d5a2(0x365)]=0x4000]=_0x99d5a2(0x365),(_0x27d008=_0x2afdcd=_0x2afdcd||{})[_0x27d008['NORMAL']=0x0]=_0x99d5a2(0x4da),_0x27d008[_0x27d008[_0x99d5a2(0x49b)]=0x1]=_0x99d5a2(0x49b),_0x27d008[_0x27d008[_0x99d5a2(0x2b5)]=0x2]=_0x99d5a2(0x2b5),_0x27d008[_0x27d008[_0x99d5a2(0x1f0)]=0x3]='LCD',_0x27d008[_0x27d008[_0x99d5a2(0x315)]=0x4]=_0x99d5a2(0x315),_0x27d008[_0x27d008[_0x99d5a2(0x42c)]=0x5]=_0x99d5a2(0x42c),0x0,_0x99d5a2(0x512)),_0x5971cc=_0x99d5a2(0x443),_0x466d10='\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20mediump\\x20float\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20lowp\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20mediump\\x20float\\x20fx\\x20=\\x20abs(pp);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fx\\x20>\\x200.2)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x20colorOut.a*(1.25\\x20-\\x201.25*fx);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x473777=0.05,_0x3e9a49=0.000001,_0x48e6bf=3.1415926,_0x479a0f=0.78539815,_0x1ec236=0.000001,_0x1096f2=_0x99d5a2(0x294)!=typeof Float32Array?Float32Array:Array;Math['random'],Math['PI'],Math['hypot']||(Math['hypot']=function(){var _0x2f0633=_0x99d5a2;for(var _0x502a4a=0x0,_0x2dc010=arguments[_0x2f0633(0x4f1)];_0x2dc010--;)_0x502a4a+=arguments[_0x2dc010]*arguments[_0x2dc010];return Math[_0x2f0633(0x41c)](_0x502a4a);});function _0x1189d8(){var _0x1dc269=new _0x1096f2(0x10);return _0x1096f2!=Float32Array&&(_0x1dc269[0x1]=0x0,_0x1dc269[0x2]=0x0,_0x1dc269[0x3]=0x0,_0x1dc269[0x4]=0x0,_0x1dc269[0x6]=0x0,_0x1dc269[0x7]=0x0,_0x1dc269[0x8]=0x0,_0x1dc269[0x9]=0x0,_0x1dc269[0xb]=0x0,_0x1dc269[0xc]=0x0,_0x1dc269[0xd]=0x0,_0x1dc269[0xe]=0x0),_0x1dc269[0x0]=0x1,_0x1dc269[0x5]=0x1,_0x1dc269[0xa]=0x1,_0x1dc269[0xf]=0x1,_0x1dc269;}function _0x28ce33(_0x2d7c40,_0x56ab10,_0x209785){var _0x2bb9d0=_0x56ab10[0x0],_0x1439e6=_0x56ab10[0x1],_0x142a16=_0x56ab10[0x2],_0x1ab07e=_0x56ab10[0x3],_0x31345e=_0x56ab10[0x4],_0x39d9f0=_0x56ab10[0x5],_0x15d623=_0x56ab10[0x6],_0x27bf4a=_0x56ab10[0x7],_0x43d798=_0x56ab10[0x8],_0x2bbfd4=_0x56ab10[0x9],_0x9b149f=_0x56ab10[0xa],_0x3f48b3=_0x56ab10[0xb],_0x226daf=_0x56ab10[0xc],_0x54b94b=_0x56ab10[0xd],_0x5098e6=_0x56ab10[0xe],_0x56ab10=_0x56ab10[0xf],_0x490bfd=_0x209785[0x0],_0x1d5c1a=_0x209785[0x1],_0x251250=_0x209785[0x2],_0x17e8d9=_0x209785[0x3];return _0x2d7c40[0x0]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0x1]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0x2]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0x3]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x490bfd=_0x209785[0x4],_0x1d5c1a=_0x209785[0x5],_0x251250=_0x209785[0x6],_0x17e8d9=_0x209785[0x7],_0x2d7c40[0x4]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0x5]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0x6]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0x7]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x490bfd=_0x209785[0x8],_0x1d5c1a=_0x209785[0x9],_0x251250=_0x209785[0xa],_0x17e8d9=_0x209785[0xb],_0x2d7c40[0x8]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0x9]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0xa]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0xb]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x490bfd=_0x209785[0xc],_0x1d5c1a=_0x209785[0xd],_0x251250=_0x209785[0xe],_0x17e8d9=_0x209785[0xf],_0x2d7c40[0xc]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0xd]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0xe]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0xf]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x2d7c40;}function _0x4e0779(_0x4b7f1b,_0x3660fe,_0x16ba13,_0x269d9a){var _0x2834dd=_0x99d5a2,_0x52c017,_0x10b949,_0x5058ee,_0x2a7f13,_0x2b6f50,_0x1b5b36,_0x488897,_0x87dada,_0x5cae01,_0x11ff8d,_0x326684,_0x3f726e,_0x40cba0,_0x3a8a23,_0x4160d2,_0x55ef08,_0x5564ca,_0x5eb7ed,_0x575c15,_0x1df085,_0x3fc2c9=_0x269d9a[0x0],_0x2f5b6a=_0x269d9a[0x1],_0x269d9a=_0x269d9a[0x2],_0x17af05=Math[_0x2834dd(0x241)](_0x3fc2c9,_0x2f5b6a,_0x269d9a);_0x17af05<_0x1ec236||(_0x3fc2c9*=_0x17af05=0x1/_0x17af05,_0x2f5b6a*=_0x17af05,_0x269d9a*=_0x17af05,_0x17af05=Math['sin'](_0x16ba13),_0x16ba13=Math[_0x2834dd(0x34b)](_0x16ba13),_0x10b949=_0x3660fe[0x0],_0x5058ee=_0x3660fe[0x1],_0x2a7f13=_0x3660fe[0x2],_0x2b6f50=_0x3660fe[0x3],_0x1b5b36=_0x3660fe[0x4],_0x488897=_0x3660fe[0x5],_0x87dada=_0x3660fe[0x6],_0x5cae01=_0x3660fe[0x7],_0x11ff8d=_0x3660fe[0x8],_0x326684=_0x3660fe[0x9],_0x3f726e=_0x3660fe[0xa],_0x40cba0=_0x3660fe[0xb],_0x4160d2=_0x3fc2c9*_0x2f5b6a*(_0x52c017=0x1-_0x16ba13)-_0x269d9a*_0x17af05,_0x55ef08=_0x2f5b6a*_0x2f5b6a*_0x52c017+_0x16ba13,_0x5564ca=_0x269d9a*_0x2f5b6a*_0x52c017+_0x3fc2c9*_0x17af05,_0x5eb7ed=_0x3fc2c9*_0x269d9a*_0x52c017+_0x2f5b6a*_0x17af05,_0x575c15=_0x2f5b6a*_0x269d9a*_0x52c017-_0x3fc2c9*_0x17af05,_0x1df085=_0x269d9a*_0x269d9a*_0x52c017+_0x16ba13,_0x4b7f1b[0x0]=_0x10b949*(_0x16ba13=_0x3fc2c9*_0x3fc2c9*_0x52c017+_0x16ba13)+_0x1b5b36*(_0x3a8a23=_0x2f5b6a*_0x3fc2c9*_0x52c017+_0x269d9a*_0x17af05)+_0x11ff8d*(_0x269d9a=_0x269d9a*_0x3fc2c9*_0x52c017-_0x2f5b6a*_0x17af05),_0x4b7f1b[0x1]=_0x5058ee*_0x16ba13+_0x488897*_0x3a8a23+_0x326684*_0x269d9a,_0x4b7f1b[0x2]=_0x2a7f13*_0x16ba13+_0x87dada*_0x3a8a23+_0x3f726e*_0x269d9a,_0x4b7f1b[0x3]=_0x2b6f50*_0x16ba13+_0x5cae01*_0x3a8a23+_0x40cba0*_0x269d9a,_0x4b7f1b[0x4]=_0x10b949*_0x4160d2+_0x1b5b36*_0x55ef08+_0x11ff8d*_0x5564ca,_0x4b7f1b[0x5]=_0x5058ee*_0x4160d2+_0x488897*_0x55ef08+_0x326684*_0x5564ca,_0x4b7f1b[0x6]=_0x2a7f13*_0x4160d2+_0x87dada*_0x55ef08+_0x3f726e*_0x5564ca,_0x4b7f1b[0x7]=_0x2b6f50*_0x4160d2+_0x5cae01*_0x55ef08+_0x40cba0*_0x5564ca,_0x4b7f1b[0x8]=_0x10b949*_0x5eb7ed+_0x1b5b36*_0x575c15+_0x11ff8d*_0x1df085,_0x4b7f1b[0x9]=_0x5058ee*_0x5eb7ed+_0x488897*_0x575c15+_0x326684*_0x1df085,_0x4b7f1b[0xa]=_0x2a7f13*_0x5eb7ed+_0x87dada*_0x575c15+_0x3f726e*_0x1df085,_0x4b7f1b[0xb]=_0x2b6f50*_0x5eb7ed+_0x5cae01*_0x575c15+_0x40cba0*_0x1df085,_0x3660fe!==_0x4b7f1b&&(_0x4b7f1b[0xc]=_0x3660fe[0xc],_0x4b7f1b[0xd]=_0x3660fe[0xd],_0x4b7f1b[0xe]=_0x3660fe[0xe],_0x4b7f1b[0xf]=_0x3660fe[0xf]));}var _0x1b7aa6=function(_0x52d41e,_0x5c0ec5,_0x20391b,_0x42750a,_0x3b24cb){var _0x171452=_0x99d5a2;return _0x5c0ec5=0x1/Math[_0x171452(0x343)](_0x5c0ec5/0x2),_0x52d41e[0x0]=_0x5c0ec5/_0x20391b,_0x52d41e[0x1]=0x0,_0x52d41e[0x2]=0x0,_0x52d41e[0x3]=0x0,_0x52d41e[0x4]=0x0,_0x52d41e[0x5]=_0x5c0ec5,_0x52d41e[0x6]=0x0,_0x52d41e[0x7]=0x0,_0x52d41e[0x8]=0x0,_0x52d41e[0x9]=0x0,_0x52d41e[0xb]=-0x1,_0x52d41e[0xc]=0x0,_0x52d41e[0xd]=0x0,_0x52d41e[0xf]=0x0,null!=_0x3b24cb&&_0x3b24cb!==0x1/0x0?(_0x52d41e[0xa]=(_0x3b24cb+_0x42750a)*(_0x20391b=0x1/(_0x42750a-_0x3b24cb)),_0x52d41e[0xe]=0x2*_0x3b24cb*_0x42750a*_0x20391b):(_0x52d41e[0xa]=-0x1,_0x52d41e[0xe]=-0x2*_0x42750a),_0x52d41e;},_0x2500fe=function(_0xb3bf13,_0x448f76,_0x14bf99,_0x24a439,_0x455e24,_0x462b21,_0x41a8b5){var _0x5285d6=0x1/(_0x448f76-_0x14bf99),_0x1bf7d7=0x1/(_0x24a439-_0x455e24),_0x5ac5ef=0x1/(_0x462b21-_0x41a8b5);return _0xb3bf13[0x0]=-0x2*_0x5285d6,_0xb3bf13[0x1]=0x0,_0xb3bf13[0x2]=0x0,_0xb3bf13[0x3]=0x0,_0xb3bf13[0x4]=0x0,_0xb3bf13[0x5]=-0x2*_0x1bf7d7,_0xb3bf13[0x6]=0x0,_0xb3bf13[0x7]=0x0,_0xb3bf13[0x8]=0x0,_0xb3bf13[0x9]=0x0,_0xb3bf13[0xa]=0x2*_0x5ac5ef,_0xb3bf13[0xb]=0x0,_0xb3bf13[0xc]=(_0x448f76+_0x14bf99)*_0x5285d6,_0xb3bf13[0xd]=(_0x455e24+_0x24a439)*_0x1bf7d7,_0xb3bf13[0xe]=(_0x41a8b5+_0x462b21)*_0x5ac5ef,_0xb3bf13[0xf]=0x1,_0xb3bf13;};function _0x18c8c9(){var _0x26597c=new _0x1096f2(0x3);return _0x1096f2!=Float32Array&&(_0x26597c[0x0]=0x0,_0x26597c[0x1]=0x0,_0x26597c[0x2]=0x0),_0x26597c;}function _0x56305e(_0x5b84f7,_0x22e570,_0x20f9b9){var _0x573a0f=new _0x1096f2(0x3);return _0x573a0f[0x0]=_0x5b84f7,_0x573a0f[0x1]=_0x22e570,_0x573a0f[0x2]=_0x20f9b9,_0x573a0f;}_0x18c8c9(),(_0x27d008=new _0x1096f2(0x4),_0x1096f2!=Float32Array&&(_0x27d008[0x0]=0x0,_0x27d008[0x1]=0x0,_0x27d008[0x2]=0x0,_0x27d008[0x3]=0x0));function _0x4c98bb(){var _0x12b267=new _0x1096f2(0x4);return _0x1096f2!=Float32Array&&(_0x12b267[0x0]=0x0,_0x12b267[0x1]=0x0,_0x12b267[0x2]=0x0),_0x12b267[0x3]=0x1,_0x12b267;}_0x18c8c9(),_0x56305e(0x1,0x0,0x0),_0x56305e(0x0,0x1,0x0),_0x4c98bb(),_0x4c98bb(),_0x27d008=new _0x1096f2(0x9),_0x1096f2!=Float32Array&&(_0x27d008[0x1]=0x0,_0x27d008[0x2]=0x0,_0x27d008[0x3]=0x0,_0x27d008[0x5]=0x0,_0x27d008[0x6]=0x0,_0x27d008[0x7]=0x0),_0x27d008[0x0]=0x1,_0x27d008[0x4]=0x1,_0x27d008[0x8]=0x1,(_0x27d008=new _0x1096f2(0x2),_0x1096f2!=Float32Array&&(_0x27d008[0x0]=0x0,_0x27d008[0x1]=0x0));var _0x95cd63,_0x53ee33=(function(){var _0x2c4b4d=_0x99d5a2;function _0x415ef1(){var _0x3a66c1=a0_0x1593;_0x160316(this,_0x415ef1),this[_0x3a66c1(0x3ba)]=0.785,this[_0x3a66c1(0x227)]=0x1,this[_0x3a66c1(0x4ef)]=0.02,this['fFar']=0x3e8,this['fTheta']=0x0,this[_0x3a66c1(0x498)]=0x0,this['fBeta']=0x0,this[_0x3a66c1(0x44a)]=0x1,this[_0x3a66c1(0x3d8)]=!0x1,this['matView']=_0x1189d8(),this[_0x3a66c1(0x1d6)]=_0x1189d8(),this[_0x3a66c1(0x337)]=_0x56305e(0x0,0x0,0x0),this['vecCenter']=_0x56305e(0x0,0x0,0x64),this[_0x3a66c1(0x1ef)]=_0x56305e(0x0,0x1,0x0);}return _0x5a3b91(_0x415ef1,[{'key':_0x2c4b4d(0x210),'value':function(_0x660a1a){var _0x5e6f56=_0x2c4b4d;this[_0x5e6f56(0x39c)]=_0x660a1a;}},{'key':'GetYaw','value':function(){var _0x2ba25b=_0x2c4b4d;return this[_0x2ba25b(0x39c)];}},{'key':_0x2c4b4d(0x458),'value':function(_0x531ad9){var _0x37e999=_0x2c4b4d;this[_0x37e999(0x498)]=_0x531ad9;}},{'key':_0x2c4b4d(0x480),'value':function(){return this['fAlpha'];}},{'key':_0x2c4b4d(0x45c),'value':function(_0x3d657e){this['fBeta']=_0x3d657e;}},{'key':_0x2c4b4d(0x351),'value':function(){var _0x237606=_0x2c4b4d;return this[_0x237606(0x273)];}},{'key':_0x2c4b4d(0x26d),'value':function(_0x1df02d){var _0xdc8df5=_0x2c4b4d;this[_0xdc8df5(0x44a)]=_0x1df02d;}},{'key':_0x2c4b4d(0x484),'value':function(){var _0x5cf5ba=_0x2c4b4d;return this[_0x5cf5ba(0x44a)];}},{'key':_0x2c4b4d(0x3a6),'value':function(_0x43f759){var _0xa7cc7b=_0x2c4b4d;this[_0xa7cc7b(0x3ba)]=_0x43f759;}},{'key':'SetAspect','value':function(_0x52e423){var _0x267b63=_0x2c4b4d;this[_0x267b63(0x227)]=_0x52e423;}},{'key':_0x2c4b4d(0x420),'value':function(_0x4b3844){this['fNear']=_0x4b3844;}},{'key':_0x2c4b4d(0x3af),'value':function(_0x1c98cd){var _0xee9d33=_0x2c4b4d;this[_0xee9d33(0x345)]=_0x1c98cd;}},{'key':_0x2c4b4d(0x43a),'value':function(_0x5a92b4){var _0xed8cd3=_0x2c4b4d;this[_0xed8cd3(0x3d8)]=_0x5a92b4;}},{'key':_0x2c4b4d(0x34a),'value':function(_0x481a1c,_0x3d5dc9){var _0x2b5393=_0x2c4b4d,_0xaca978,_0xc4dc36,_0x5c603e,_0x47c201,_0x154893,_0x5c2d3b;_0x481a1c<=0x0||_0x3d5dc9<=0x0||(0x1==this['bOrtho']?_0x2500fe(this[_0x2b5393(0x1d6)],0x0,_0x481a1c,_0x3d5dc9,0x0,this[_0x2b5393(0x4ef)],this[_0x2b5393(0x345)]):(_0xaca978=this['fFov']/_0x48e6bf*0xb4,_0x1b7aa6(this[_0x2b5393(0x1d6)],_0xaca978,_0x481a1c/_0x3d5dc9,this[_0x2b5393(0x4ef)],this[_0x2b5393(0x345)])),this[_0x2b5393(0x337)]=_0x56305e(0x0,0x0,this[_0x2b5393(0x44a)]),this[_0x2b5393(0x32c)]=_0x56305e(0x0,0x0,0x0),this[_0x2b5393(0x1ef)]=_0x56305e(0x0,0x1,0x0),_0xaca978=_0x56305e(0x1,0x0,0x0),_0x481a1c=_0x56305e(0x0,0x1,0x0),_0x3d5dc9=_0x56305e(0x0,0x0,0x1),function(_0x111f03,_0xdc1831,_0x229b70,_0x21b0e4){var _0x463328=_0x2b5393,_0x4b8d6c,_0x257e6f,_0x41eaaf,_0x243a15,_0x1bcdd7=_0xdc1831[0x0],_0x29159f=_0xdc1831[0x1],_0xdc1831=_0xdc1831[0x2],_0xead032=_0x21b0e4[0x0],_0x974d6d=_0x21b0e4[0x1],_0x21b0e4=_0x21b0e4[0x2],_0x51af13=_0x229b70[0x0],_0x55dd27=_0x229b70[0x1],_0x229b70=_0x229b70[0x2];if(Math[_0x463328(0x1e6)](_0x1bcdd7-_0x51af13)<_0x1ec236&&Math[_0x463328(0x1e6)](_0x29159f-_0x55dd27)<_0x1ec236&&Math['abs'](_0xdc1831-_0x229b70)<_0x1ec236)return(_0x243a15=_0x111f03)[0x0]=0x1,_0x243a15[0x1]=0x0,_0x243a15[0x2]=0x0,_0x243a15[0x3]=0x0,_0x243a15[0x4]=0x0,_0x243a15[0x5]=0x1,_0x243a15[0x6]=0x0,_0x243a15[0x7]=0x0,_0x243a15[0x8]=0x0,_0x243a15[0x9]=0x0,_0x243a15[0xa]=0x1,_0x243a15[0xb]=0x0,_0x243a15[0xc]=0x0,_0x243a15[0xd]=0x0,_0x243a15[0xe]=0x0,_0x243a15[0xf]=0x1;_0x243a15=_0xdc1831-_0x229b70,_0x4b8d6c=_0x974d6d*(_0x243a15*=_0x55dd27=0x1/Math['hypot'](_0x229b70=_0x1bcdd7-_0x51af13,_0x51af13=_0x29159f-_0x55dd27,_0x243a15))-_0x21b0e4*(_0x51af13*=_0x55dd27),_0x21b0e4=_0x21b0e4*(_0x229b70*=_0x55dd27)-_0xead032*_0x243a15,_0xead032=_0xead032*_0x51af13-_0x974d6d*_0x229b70,(_0x55dd27=Math[_0x463328(0x241)](_0x4b8d6c,_0x21b0e4,_0xead032))?(_0x4b8d6c*=_0x55dd27=0x1/_0x55dd27,_0x21b0e4*=_0x55dd27,_0xead032*=_0x55dd27):_0xead032=_0x21b0e4=_0x4b8d6c=0x0,_0x974d6d=_0x51af13*_0xead032-_0x243a15*_0x21b0e4,_0x257e6f=_0x243a15*_0x4b8d6c-_0x229b70*_0xead032,_0x41eaaf=_0x229b70*_0x21b0e4-_0x51af13*_0x4b8d6c,(_0x55dd27=Math[_0x463328(0x241)](_0x974d6d,_0x257e6f,_0x41eaaf))?(_0x974d6d*=_0x55dd27=0x1/_0x55dd27,_0x257e6f*=_0x55dd27,_0x41eaaf*=_0x55dd27):_0x41eaaf=_0x257e6f=_0x974d6d=0x0,_0x111f03[0x0]=_0x4b8d6c,_0x111f03[0x1]=_0x974d6d,_0x111f03[0x2]=_0x229b70,_0x111f03[0x3]=0x0,_0x111f03[0x4]=_0x21b0e4,_0x111f03[0x5]=_0x257e6f,_0x111f03[0x6]=_0x51af13,_0x111f03[0x7]=0x0,_0x111f03[0x8]=_0xead032,_0x111f03[0x9]=_0x41eaaf,_0x111f03[0xa]=_0x243a15,_0x111f03[0xb]=0x0,_0x111f03[0xc]=-(_0x4b8d6c*_0x1bcdd7+_0x21b0e4*_0x29159f+_0xead032*_0xdc1831),_0x111f03[0xd]=-(_0x974d6d*_0x1bcdd7+_0x257e6f*_0x29159f+_0x41eaaf*_0xdc1831),_0x111f03[0xe]=-(_0x229b70*_0x1bcdd7+_0x51af13*_0x29159f+_0x243a15*_0xdc1831),_0x111f03[0xf]=0x1;}(_0xc4dc36=_0x1189d8(),this['vecEye'],this['vecCenter'],this[_0x2b5393(0x1ef)]),_0x5c603e=_0x1189d8(),_0x47c201=_0x1189d8(),_0x154893=_0x1189d8(),_0x5c2d3b=_0x1189d8(),_0x4e0779(_0x47c201,_0x5c603e,-this[_0x2b5393(0x498)],_0xaca978),_0x4e0779(_0x154893,_0x47c201,-this[_0x2b5393(0x39c)],_0x481a1c),_0x4e0779(_0x5c2d3b,_0x154893,-this[_0x2b5393(0x273)],_0x3d5dc9),_0x28ce33(this[_0x2b5393(0x1f7)],_0xc4dc36,_0x5c2d3b));}},{'key':_0x2c4b4d(0x522),'value':function(){return this['matView'];}},{'key':_0x2c4b4d(0x25a),'value':function(){var _0x482dca=_0x2c4b4d;return this[_0x482dca(0x1d6)];}}]),_0x415ef1;}()),_0x50f103=(function(){var _0x41470a=_0x99d5a2;function _0x27b1ac(){var _0x5253ad=a0_0x1593;_0x160316(this,_0x27b1ac),this[_0x5253ad(0x42d)]=null,this[_0x5253ad(0x51e)]=null,this[_0x5253ad(0x1e9)]=0x0,this[_0x5253ad(0x52e)]=0x0,this[_0x5253ad(0x53d)]=0x0,this[_0x5253ad(0x502)]=0x0,this[_0x5253ad(0x3b0)]=0x0,this[_0x5253ad(0x1f2)]=!0x1,this[_0x5253ad(0x4a5)]=!0x1,this[_0x5253ad(0x4c4)]=!0x0,this['nSurfaceTexture']=0x0,this[_0x5253ad(0x540)]=0x0,this[_0x5253ad(0x2a7)]=null,this[_0x5253ad(0x232)]=null,this['glLinePosBuffer']=0x0,this[_0x5253ad(0x4fc)]=0x0,this[_0x5253ad(0x350)]=0x0,this['nLineShaderProgram']=0x0,this[_0x5253ad(0x38b)]=null,this[_0x5253ad(0x23d)]=null,this['nMaxFillBlockTriNum']=0x0,this[_0x5253ad(0x383)]=0x0,this[_0x5253ad(0x50b)]=0x0,this[_0x5253ad(0x470)]=0x0,this[_0x5253ad(0x215)]=!0x1,this[_0x5253ad(0x2c3)]=null,this[_0x5253ad(0x53e)]=null,this['FTFace']=null,this[_0x5253ad(0x327)]=null,this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,this[_0x5253ad(0x2f6)]=0x0,this['pFontColorBuffer']=0x0,this[_0x5253ad(0x3c8)]=0x0,this['nFontBGNum']=0x0,this['pstFontBGLines']=[],this[_0x5253ad(0x2bc)]=!0x1,this[_0x5253ad(0x292)]=null,this[_0x5253ad(0x4d6)]=_0x3468da[_0x5253ad(0x3c1)],this[_0x5253ad(0x29e)]=-0x1,this[_0x5253ad(0x330)]=!0x1,this[_0x5253ad(0x2ea)]=null,this[_0x5253ad(0x2d7)]=null,this[_0x5253ad(0x340)]=0x0,this[_0x5253ad(0x53a)]=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this[_0x5253ad(0x4c0)]=null,this['nCylinderPosNum']=0x0,this[_0x5253ad(0x3ff)]=0x0,this[_0x5253ad(0x4f8)]=0x0,this[_0x5253ad(0x2c1)]=0x0,this['fCylinderRadius']=0x0,this[_0x5253ad(0x367)]=!0x1,this['pCamera']=null,this[_0x5253ad(0x3da)]=0x0,this[_0x5253ad(0x2a3)]=0x0,this[_0x5253ad(0x44a)]=0x0,this[_0x5253ad(0x229)]=null,this[_0x5253ad(0x46c)]=null,this[_0x5253ad(0x252)]=null,this[_0x5253ad(0x4d5)]=null,this[_0x5253ad(0x3dd)]=!0x0;}var _0xeda133;return _0x5a3b91(_0x27b1ac,[{'key':_0x41470a(0x2b3),'value':function(_0x463b67,_0x36ef02){var _0x102e79=_0x41470a,_0x183858=this['ctx'];if(null==_0x183858||null==_0x463b67||null==_0x36ef02)return-0x1;var _0x3b91c2=_0x183858[_0x102e79(0x4b9)](_0x183858[_0x102e79(0x45d)]);if(_0x183858[_0x102e79(0x2b9)](_0x3b91c2,_0x463b67),_0x183858[_0x102e79(0x305)](_0x3b91c2),!_0x183858[_0x102e79(0x218)](_0x3b91c2,_0x183858[_0x102e79(0x2aa)]))return console[_0x102e79(0x514)]('Vertex\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x183858[_0x102e79(0x475)](_0x3b91c2)),-0x1;_0x463b67=_0x183858[_0x102e79(0x4b9)](_0x183858[_0x102e79(0x368)]);if(_0x183858[_0x102e79(0x2b9)](_0x463b67,_0x36ef02),_0x183858['compileShader'](_0x463b67),!_0x183858['getShaderParameter'](_0x463b67,_0x183858['COMPILE_STATUS']))return console[_0x102e79(0x514)](_0x102e79(0x347)+_0x183858['getShaderInfoLog'](_0x463b67)),-0x1;return _0x36ef02=_0x183858[_0x102e79(0x527)](),(_0x183858[_0x102e79(0x2f9)](_0x36ef02,_0x3b91c2),_0x183858[_0x102e79(0x2f9)](_0x36ef02,_0x463b67),_0x183858[_0x102e79(0x28f)](_0x36ef02),_0x183858[_0x102e79(0x348)](_0x36ef02,_0x183858[_0x102e79(0x3b4)])?(_0x183858[_0x102e79(0x30f)](_0x3b91c2),_0x183858[_0x102e79(0x30f)](_0x463b67),_0x36ef02):(console['log']('Program\\x20failed\\x20to\\x20compile:\\x20'+_0x183858[_0x102e79(0x4df)](_0x36ef02)),-0x1));}},{'key':_0x41470a(0x3e5),'value':function(_0x505490){var _0x3f8e8b=_0x41470a;return null==_0x505490?_0x13949e['SR_ERR_PARAM']:(this[_0x3f8e8b(0x42d)]=_0x505490,this[_0x3f8e8b(0x51e)]=this[_0x3f8e8b(0x42d)]['getContext'](_0x3f8e8b(0x412)),this[_0x3f8e8b(0x51e)]||(this[_0x3f8e8b(0x51e)]=this['canvas'][_0x3f8e8b(0x2b2)]('webgl')||this[_0x3f8e8b(0x42d)][_0x3f8e8b(0x2b2)](_0x3f8e8b(0x1e4)),this[_0x3f8e8b(0x1f2)]=!0x0,console[_0x3f8e8b(0x514)](_0x3f8e8b(0x2ad))),this[_0x3f8e8b(0x51e)]?_0x13949e[_0x3f8e8b(0x4a6)]:(console['log'](_0x3f8e8b(0x3d2)),_0x13949e[_0x3f8e8b(0x4e3)]));}},{'key':_0x41470a(0x28d),'value':function(_0x4f5373){var _0x143117=_0x41470a;if(null==this['ctx'])return _0x13949e[_0x143117(0x2cf)];if(null==_0x4f5373)return _0x13949e[_0x143117(0x203)];if(0x0==this[_0x143117(0x1e9)]||0x0==this[_0x143117(0x52e)]||0x0==this['texturePosBuffer'])return _0x13949e['SR_ERR_CALL_ORDER'];if(this['frameDisplayWidth']==_0x4f5373[_0x143117(0x455)]&&this[_0x143117(0x3b0)]==_0x4f5373[_0x143117(0x436)]||(this[_0x143117(0x502)]=_0x4f5373['displayWidth'],this['frameDisplayHeight']=_0x4f5373[_0x143117(0x436)]),0x1==this['bRecreateTex']){0x0!=this[_0x143117(0x516)]&&(_0x47f13=this['nSurfaceTexture'],this[_0x143117(0x51e)][_0x143117(0x300)](_0x47f13),this['nSurfaceTexture']=0x0);var _0x47f13=this[_0x143117(0x51e)]['createTexture']();if(_0x47f13<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x310)](this[_0x143117(0x51e)][_0x143117(0x352)],_0x47f13),0x1==this['bAntialias']?this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx'][_0x143117(0x440)]):this[_0x143117(0x51e)][_0x143117(0x2af)](this['ctx'][_0x143117(0x352)],this[_0x143117(0x51e)][_0x143117(0x1d4)],this[_0x143117(0x51e)][_0x143117(0x20a)]),this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this['ctx'][_0x143117(0x4b4)],this[_0x143117(0x51e)][_0x143117(0x20a)]),this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this[_0x143117(0x51e)][_0x143117(0x4a0)],this['ctx'][_0x143117(0x3e7)]),this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this['ctx'][_0x143117(0x3b5)],this[_0x143117(0x51e)]['CLAMP_TO_EDGE']),this[_0x143117(0x516)]=_0x47f13,this['bRecreateTex']=!0x1;}this[_0x143117(0x51e)][_0x143117(0x288)](this['videoShaderProgram']),this[_0x143117(0x51e)][_0x143117(0x408)](this['ctx'][_0x143117(0x2f4)],this[_0x143117(0x52e)]),_0x47f13=this[_0x143117(0x51e)][_0x143117(0x1ff)](this[_0x143117(0x1e9)],'xy');if(_0x47f13<0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)]['vertexAttribPointer'](_0x47f13,0x3,this['ctx'][_0x143117(0x4f2)],!0x1,0x0,0x0),this['ctx'][_0x143117(0x2e6)](_0x47f13),this[_0x143117(0x51e)][_0x143117(0x408)](this[_0x143117(0x51e)][_0x143117(0x2f4)],this['texturePosBuffer']),_0x47f13=this[_0x143117(0x51e)][_0x143117(0x1ff)](this[_0x143117(0x1e9)],'uv');if(_0x47f13<0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x3c2)](_0x47f13,0x2,this[_0x143117(0x51e)][_0x143117(0x4f2)],!0x1,0x0,0x0),this[_0x143117(0x51e)]['enableVertexAttribArray'](_0x47f13),this[_0x143117(0x51e)]['bindBuffer'](this[_0x143117(0x51e)][_0x143117(0x2f4)],null);var _0x5c403e=this[_0x143117(0x4d6)];switch(_0x5c403e){case _0x3468da[_0x143117(0x3c1)]:break;case _0x3468da[_0x143117(0x224)]:case _0x3468da[_0x143117(0x2b7)]:case _0x3468da[_0x143117(0x4c2)]:case _0x3468da['SR_DE_FISH_PTZ_WALL']:case _0x3468da[_0x143117(0x208)]:case _0x3468da[_0x143117(0x4f5)]:case _0x3468da[_0x143117(0x2f5)]:case _0x3468da[_0x143117(0x3a8)]:case _0x3468da['SR_DE_FISH_PANORAMA_WALL']:if(null==this[_0x143117(0x292)])return _0x13949e['SR_ERR_CALL_ORDER'];var _0x3d2401=[],_0x3980fd=this[_0x143117(0x292)]['GetRenderParam'](this[_0x143117(0x29e)],_0x3d2401);if(_0x13949e[_0x143117(0x4a6)]!=_0x3980fd)return _0x3980fd;if(_0x3468da[_0x143117(0x224)]==_0x5c403e){_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this['videoShaderProgram'],_0x143117(0x40f));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x2cc)](_0x3980fd,_0x3d2401['bBlack']),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x324));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x2cc)](_0x3980fd,_0x3d2401[_0x143117(0x324)]);}if(_0x3468da['SR_DE_FISH_PTZ_CEILING']==_0x5c403e||_0x3468da[_0x143117(0x4c2)]==_0x5c403e||_0x3468da['SR_DE_FISH_PTZ_WALL']==_0x5c403e){_0x3980fd=this['ctx'][_0x143117(0x2b6)](this[_0x143117(0x1e9)],'fHAngleCos');if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401['fCosH']),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x1e2));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)]['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x2ee)]),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],'fVAngleCos');if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401['fCosV']),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x528));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this['ctx']['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x3e0)]),_0x3980fd=this['ctx'][_0x143117(0x2b6)](this['videoShaderProgram'],_0x143117(0x3f4));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)]['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x3f4)]);}if(_0x3468da[_0x143117(0x208)]==_0x5c403e||_0x3468da[_0x143117(0x4f5)]==_0x5c403e||_0x3468da[_0x143117(0x2f5)]==_0x5c403e||_0x3468da[_0x143117(0x3a8)]==_0x5c403e){_0x3980fd=this['ctx']['getUniformLocation'](this[_0x143117(0x1e9)],_0x143117(0x314));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x314)]);}_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x1f8));if(_0x3980fd<=0x0)return _0x13949e['SR_ERR_WEBGL_RESOURCE'];this[_0x143117(0x51e)]['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x27e)]),_0x3980fd=this['ctx']['getUniformLocation'](this[_0x143117(0x1e9)],_0x143117(0x3aa));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this['ctx'][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x469)]),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x34c));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x2bb)]),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x4ed));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x2e9)]);break;case _0x3468da[_0x143117(0x2e3)]:this[_0x143117(0x2e1)][_0x143117(0x26d)](this['fScale']),this[_0x143117(0x2e1)][_0x143117(0x458)](3.14-this['fRotateX']),this[_0x143117(0x2e1)][_0x143117(0x210)](-this[_0x143117(0x2a3)]),this[_0x143117(0x2e1)][_0x143117(0x34a)](this[_0x143117(0x42d)]['width'],this['canvas'][_0x143117(0x483)]);var _0x3980fd=this['pCamera'][_0x143117(0x522)](),_0x3d2401=this['pCamera'][_0x143117(0x25a)](),_0x44bf90=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],'matView');if(_0x44bf90<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x479)](_0x44bf90,!0x1,_0x3980fd),_0x44bf90=this['ctx']['getUniformLocation'](this[_0x143117(0x1e9)],_0x143117(0x1d6));if(_0x44bf90<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x479)](_0x44bf90,!0x1,_0x3d2401);break;case _0x3468da['SR_DE_FISH_CYLINDER_CEILING']:case _0x3468da[_0x143117(0x3a9)]:this[_0x143117(0x2e1)][_0x143117(0x26d)](this['fScale']),this[_0x143117(0x2e1)][_0x143117(0x458)](-this[_0x143117(0x3da)]),this[_0x143117(0x2e1)][_0x143117(0x210)](-this[_0x143117(0x2a3)]),this[_0x143117(0x2e1)][_0x143117(0x34a)](this['canvas'][_0x143117(0x36f)],this['canvas'][_0x143117(0x483)]),(_0x3980fd=this['pCamera'][_0x143117(0x522)](),_0x44bf90=this['pCamera'][_0x143117(0x25a)](),_0x3d2401=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x1f7)));if(_0x3d2401<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x479)](_0x3d2401,!0x1,_0x3980fd),_0x3d2401=this[_0x143117(0x51e)][_0x143117(0x2b6)](this['videoShaderProgram'],_0x143117(0x1d6));if(_0x3d2401<=0x0)return _0x13949e[_0x143117(0x392)];this['ctx']['uniformMatrix4fv'](_0x3d2401,!0x1,_0x44bf90);}if(this['canvas'][_0x143117(0x36f)]<=0x0||this[_0x143117(0x42d)][_0x143117(0x483)]<=0x0)return _0x13949e['SR_ERR_CANVAS'];if(this[_0x143117(0x51e)][_0x143117(0x2e8)](0x0,0x0,this['canvas'][_0x143117(0x36f)],this[_0x143117(0x42d)][_0x143117(0x483)]),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx'][_0x143117(0x3c3)](this[_0x143117(0x51e)][_0x143117(0x546)]|this['ctx'][_0x143117(0x2ce)]),this[_0x143117(0x367)]&&(this[_0x143117(0x51e)][_0x143117(0x3ce)](this[_0x143117(0x51e)][_0x143117(0x3cb)]),this[_0x143117(0x51e)][_0x143117(0x4ce)](this[_0x143117(0x51e)][_0x143117(0x36a)]),this[_0x143117(0x51e)]['depthMask'](!0x0),0x1==this[_0x143117(0x3dd)]?this[_0x143117(0x51e)][_0x143117(0x3ce)](this[_0x143117(0x51e)][_0x143117(0x238)]):this[_0x143117(0x51e)]['disable'](this[_0x143117(0x51e)]['CULL_FACE'])),this['ctx'][_0x143117(0x27d)](this[_0x143117(0x51e)][_0x143117(0x352)],0x0,this[_0x143117(0x51e)][_0x143117(0x45a)],this[_0x143117(0x51e)][_0x143117(0x45a)],this['ctx'][_0x143117(0x22b)],_0x4f5373),0x1==this[_0x143117(0x4a5)]&&this[_0x143117(0x51e)][_0x143117(0x22a)](this[_0x143117(0x51e)][_0x143117(0x352)]),this[_0x143117(0x1f2)]||this[_0x143117(0x51e)][_0x143117(0x446)](this[_0x143117(0x51e)][_0x143117(0x361)],0x0,0x1,0x0),0x0==this[_0x143117(0x367)])this[_0x143117(0x51e)][_0x143117(0x52a)](this[_0x143117(0x51e)]['TRIANGLE_FAN'],0x0,0x4);else{if(this[_0x143117(0x4d6)]==_0x3468da[_0x143117(0x2e3)]){if(this[_0x143117(0x340)]<=0x0)return _0x13949e[_0x143117(0x2cf)];this[_0x143117(0x51e)]['drawArrays'](this['ctx'][_0x143117(0x526)],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x3468da[_0x143117(0x4dc)]){if(this[_0x143117(0x312)]<=0x0)return _0x13949e[_0x143117(0x2cf)];this[_0x143117(0x51e)][_0x143117(0x52a)](this[_0x143117(0x51e)][_0x143117(0x526)],0x0,this[_0x143117(0x312)]);}}}return this[_0x143117(0x51e)][_0x143117(0x288)](null),0x0==this[_0x143117(0x330)]&&null!=this[_0x143117(0x292)]&&-0x1!=(_0x47f13=this[_0x143117(0x292)]['GetWndPort']())&&_0x47f13==this['nFECPort']&&this['DrawPTZLines'](),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this[_0x143117(0x252)]),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this[_0x143117(0x4d5)]),_0x13949e[_0x143117(0x4a6)];}},{'key':_0x41470a(0x22f),'value':function(){var _0x21e98b=_0x41470a;if(null==this[_0x21e98b(0x292)])return _0x13949e['SR_ERR_CALL_ORDER'];for(var _0x5c7f1e=this['pFishParamManager'][_0x21e98b(0x40b)](),_0x2db678=0x0,_0x40dedc=[],_0x418a7a=(_0x40dedc['fR']=0x0,_0x40dedc['fG']=0x0,_0x40dedc['fB']=0x0,_0x40dedc['fA']=0x0,_0x13949e[_0x21e98b(0x4a6)]),_0x11b4fb=0x0;_0x11b4fb<0x20;++_0x11b4fb)if(0x0!=this[_0x21e98b(0x292)][_0x21e98b(0x1dd)](_0x11b4fb)){if(_0x2db678=0x2,_0x418a7a=this[_0x21e98b(0x292)][_0x21e98b(0x1f6)](_0x11b4fb,_0x40dedc),_0x13949e[_0x21e98b(0x4a6)]!=_0x418a7a)return _0x418a7a;0x1==this[_0x21e98b(0x292)][_0x21e98b(0x303)](_0x11b4fb)&&(_0x2db678+=0x1);var _0x138fa4=this[_0x21e98b(0x292)][_0x21e98b(0x289)]();if(_0x11b4fb!=_0x138fa4&&_0x46c232==_0x5c7f1e){if(_0x3468da[_0x21e98b(0x224)]==this['pFishParamManager'][_0x21e98b(0x4ad)](_0x138fa4)){var _0x4ac4c6=[],_0x418a7a=this[_0x21e98b(0x292)][_0x21e98b(0x4a4)](_0x11b4fb,_0x4ac4c6,_0x46c232);if(_0x13949e['SR_OK']!=_0x418a7a)return _0x418a7a;if(null!=_0x4ac4c6[_0x21e98b(0x2f3)]&&0x0!=_0x4ac4c6[_0x21e98b(0x216)]&&(_0x418a7a=this[_0x21e98b(0x3ec)](_0x4ac4c6[_0x21e98b(0x2f3)],_0x4ac4c6[_0x21e98b(0x216)],!0x0,_0x40dedc,_0x2db678,!0x1),_0x13949e[_0x21e98b(0x4a6)]!=_0x418a7a))return _0x418a7a;}}else{if(_0x11b4fb!=_0x138fa4&&_0xba837==_0x5c7f1e){_0x4ac4c6=[];if(_0x418a7a=this['pFishParamManager'][_0x21e98b(0x4a4)](_0x11b4fb,_0x4ac4c6,_0xba837),_0x13949e[_0x21e98b(0x4a6)]!=_0x418a7a)return _0x418a7a;if(null!=_0x4ac4c6['pstPoints']&&0x0!=_0x4ac4c6[_0x21e98b(0x216)]&&(_0x418a7a=this[_0x21e98b(0x3ec)](_0x4ac4c6[_0x21e98b(0x2f3)],_0x4ac4c6['nPointNum'],!0x0,_0x40dedc,_0x2db678,!0x1),_0x13949e['SR_OK']!=_0x418a7a))return _0x418a7a;}}}return _0x13949e['SR_OK'];}},{'key':_0x41470a(0x259),'value':function(_0x4ffb5a,_0x516320,_0xdba9c2){var _0x5754c5=_0x41470a;if(null==this[_0x5754c5(0x51e)])return _0x13949e[_0x5754c5(0x2cf)];if(null==_0x4ffb5a||_0x516320<0x1||_0xdba9c2<0x2)return _0x13949e[_0x5754c5(0x203)];for(var _0x9b8d10=0x0,_0x2fc8f5=0x0;_0x2fc8f5<_0x516320;++_0x2fc8f5){if(null==_0x4ffb5a[_0x2fc8f5][_0x5754c5(0x2f3)]||_0x4ffb5a[_0x2fc8f5]['nPointNum']<0x3||!0x0!==_0x4ffb5a[_0x2fc8f5]['bLoop']||null==_0x4ffb5a[_0x2fc8f5][_0x5754c5(0x36d)])return _0x13949e[_0x5754c5(0x203)];_0x9b8d10+=_0x4ffb5a[_0x2fc8f5][_0x5754c5(0x216)];}if(_0x9b8d10!==_0xdba9c2)return _0x13949e['SR_ERR_PARAM'];_0xdba9c2-=0x2*_0x516320;if(_0xdba9c2>this[_0x5754c5(0x453)]&&(this[_0x5754c5(0x38b)]=null,this[_0x5754c5(0x23d)]=null,this['nMaxFillBlockTriNum']=_0xdba9c2),0x0==this[_0x5754c5(0x383)]&&(this[_0x5754c5(0x383)]=this[_0x5754c5(0x51e)]['createBuffer'](),0x0==this['glBlockPosBuffer']))return _0x13949e['SR_ERR_WEBGL_RESOURCE'];if(0x0==this['glBlockClrBuffer']&&(this[_0x5754c5(0x50b)]=this[_0x5754c5(0x51e)][_0x5754c5(0x33d)](),0x0==this['glBlockClrBuffer']))return _0x13949e[_0x5754c5(0x392)];if(null==this['pFillBlockPosVertices']){var _0x55889b=this[_0x5754c5(0x453)];if(this['pFillBlockPosVertices']=new Float32Array(0x3*_0x55889b*0x3),null==this['pFillBlockPosVertices'])return _0x13949e[_0x5754c5(0x37b)];}if(this[_0x5754c5(0x38b)][_0x5754c5(0x542)](0x0),null==this['pFillBlockClrVertices']){_0x55889b=this[_0x5754c5(0x453)];if(this[_0x5754c5(0x23d)]=new Float32Array(0x4*_0x55889b*0x3),null==this['pFillBlockClrVertices'])return _0x13949e['SR_ERR_ALLOC_MEMORY'];}this[_0x5754c5(0x23d)][_0x5754c5(0x542)](0x0);for(var _0x62c238,_0x556e0e,_0x3049d4,_0x40a2cd=0x0,_0x4a74bd=0x0,_0x432cca={},_0x54c665={},_0x127802={},_0x1d4117=0x0;_0x1d4117<_0x516320;++_0x1d4117){_0x62c238=_0x4ffb5a[_0x1d4117][_0x5754c5(0x216)],_0x556e0e=_0x4ffb5a[_0x1d4117]['pstPoints'],_0x3049d4=_0x4ffb5a[_0x1d4117]['pstColor'],_0x432cca['fX']=0x2*_0x556e0e[0x0]['fX']-0x1,_0x432cca['fY']=0x1-0x2*_0x556e0e[0x0]['fY'];for(var _0xf077f4=0x1;_0xf077f4<_0x62c238-0x1;_0xf077f4++)_0x54c665['fX']=0x2*_0x556e0e[_0xf077f4]['fX']-0x1,_0x54c665['fY']=0x1-0x2*_0x556e0e[_0xf077f4]['fY'],_0x127802['fX']=0x2*_0x556e0e[_0xf077f4+0x1]['fX']-0x1,_0x127802['fY']=0x1-0x2*_0x556e0e[_0xf077f4+0x1]['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x432cca['fX'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x432cca['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=0x0,this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fR'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fG'],this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fB'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fA'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x54c665['fX'],this['pFillBlockPosVertices'][_0x40a2cd++]=_0x54c665['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=0x0,this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fR'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fG'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fB'],this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fA'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x127802['fX'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x127802['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=0x0,this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fR'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fG'],this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fB'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fA'];}if(0x0==this[_0x5754c5(0x470)]&&(this[_0x5754c5(0x470)]=this['CompileProgram'](_0x5971cc,_0x466d10),0x0==this[_0x5754c5(0x470)]))return _0x13949e[_0x5754c5(0x392)];return this[_0x5754c5(0x51e)]['enable'](this[_0x5754c5(0x51e)]['BLEND']),this['ctx'][_0x5754c5(0x263)](this['ctx'][_0x5754c5(0x275)],this[_0x5754c5(0x51e)][_0x5754c5(0x231)]),this[_0x5754c5(0x51e)][_0x5754c5(0x408)](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],this[_0x5754c5(0x383)]),this['ctx'][_0x5754c5(0x416)](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],this['pFillBlockPosVertices'],this['ctx'][_0x5754c5(0x33a)]),this['ctx']['bindBuffer'](this['ctx'][_0x5754c5(0x2f4)],null),this[_0x5754c5(0x51e)][_0x5754c5(0x408)](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],this['glBlockClrBuffer']),this[_0x5754c5(0x51e)]['bufferData'](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],this[_0x5754c5(0x23d)],this[_0x5754c5(0x51e)][_0x5754c5(0x33a)]),this['ctx']['bindBuffer'](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],null),this['ctx'][_0x5754c5(0x288)](this[_0x5754c5(0x470)]),this['ctx']['bindBuffer'](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],this[_0x5754c5(0x383)]),(_0x55889b=this[_0x5754c5(0x51e)]['getAttribLocation'](this[_0x5754c5(0x470)],_0x5754c5(0x3ef)),this['ctx'][_0x5754c5(0x2e6)](_0x55889b),this['ctx'][_0x5754c5(0x3c2)](_0x55889b,0x3,this[_0x5754c5(0x51e)]['FLOAT'],!0x1,0x0,0x0),this[_0x5754c5(0x51e)]['bindBuffer'](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],null),this['ctx'][_0x5754c5(0x408)](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],this['glBlockClrBuffer']),_0x55889b=this['ctx'][_0x5754c5(0x1ff)](this['nBlockShaderProgram'],_0x5754c5(0x35e))),(this[_0x5754c5(0x51e)]['enableVertexAttribArray'](_0x55889b),this[_0x5754c5(0x51e)][_0x5754c5(0x3c2)](_0x55889b,0x4,this[_0x5754c5(0x51e)]['FLOAT'],!0x1,0x0,0x0),this['ctx'][_0x5754c5(0x408)](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],null),this['ctx'][_0x5754c5(0x52a)](this[_0x5754c5(0x51e)][_0x5754c5(0x526)],0x0,0x3*_0xdba9c2),this[_0x5754c5(0x51e)]['useProgram'](null),this[_0x5754c5(0x51e)][_0x5754c5(0x54d)](this[_0x5754c5(0x51e)]['BLEND']),_0x13949e[_0x5754c5(0x4a6)]);}},{'key':_0x41470a(0x34d),'value':function(_0x28db65,_0x57df95){var _0x2eb24d=_0x41470a;if(null==_0x28db65||_0x57df95<0x1)return _0x13949e['SR_ERR_PARAM'];if(null==this[_0x2eb24d(0x2a7)]||null==this[_0x2eb24d(0x232)])return _0x13949e['SR_ERR_CALL_ORDER'];for(var _0x5593d4,_0x4b76b4,_0x524d66=0x0,_0x407140=0x0,_0x45c10c=0x0,_0xed833=0x0,_0x4eace5=0x0,_0x5a4396=0x0,_0x59928b=0x0,_0x55d38a=0x0,_0x3c5f70=0x0;_0x3c5f70<_0x57df95;++_0x3c5f70){var _0x2a48b3=[],_0x3ab94b=_0x28db65[_0x3c5f70][_0x2eb24d(0x216)];if(!(_0x3ab94b<=0x0)){for(var _0x4ac18a=0x0;_0x4ac18a<_0x3ab94b;++_0x4ac18a){var _0x584e8d={};_0x584e8d['fX']=_0x28db65[_0x3c5f70]['pstPoints'][_0x4ac18a]['fX'],_0x584e8d['fX']=0x2*_0x584e8d['fX']-0x1,_0x584e8d['fY']=_0x28db65[_0x3c5f70]['pstPoints'][_0x4ac18a]['fY'],_0x584e8d['fY']=0x1-0x2*_0x584e8d['fY'],_0x2a48b3[_0x2eb24d(0x51d)](_0x584e8d);}if(this[_0x2eb24d(0x42d)][_0x2eb24d(0x36f)]<=0x0||this[_0x2eb24d(0x42d)][_0x2eb24d(0x483)]<=0x0)return _0x13949e[_0x2eb24d(0x4e3)];if(_0x5593d4=3.5*_0x28db65[_0x3c5f70][_0x2eb24d(0x205)]/this[_0x2eb24d(0x42d)][_0x2eb24d(0x36f)],_0x4b76b4=3.5*_0x28db65[_0x3c5f70][_0x2eb24d(0x205)]/this[_0x2eb24d(0x42d)]['height'],_0x5593d4<=0x0||_0x4b76b4<=0x0)return _0x13949e['SR_ERR_PARAM'];var _0x34199d=_0x28db65[_0x3c5f70][_0x2eb24d(0x36d)];if(null==_0x34199d)return _0x13949e[_0x2eb24d(0x203)];for(var _0x57e7a3=0x0;_0x57e7a3<_0x3ab94b-0x1;++_0x57e7a3)_0x407140=_0x2a48b3[_0x57e7a3+0x1]['fX']-_0x2a48b3[_0x57e7a3]['fX'],_0x45c10c=_0x2a48b3[_0x57e7a3+0x1]['fY']-_0x2a48b3[_0x57e7a3]['fY'],_0x524d66=Math[_0x2eb24d(0x41c)](_0x407140*_0x407140+_0x45c10c*_0x45c10c),Math['abs'](+_0x524d66)<0.000001||(_0x4eace5=_0x4b76b4*_0x407140/_0x524d66/0x2,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fX']+(_0xed833=-_0x5593d4*_0x45c10c/_0x524d66/0x2),this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fY']+_0x4eace5,this['pLinePosVertices'][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],_0x5a4396+=0x2);0x1==_0x28db65[_0x3c5f70][_0x2eb24d(0x431)]&&0x2<_0x3ab94b&&(_0x407140=_0x2a48b3[_0x3ab94b-0x1]['fX']-_0x2a48b3[0x0]['fX'],_0x45c10c=_0x2a48b3[_0x3ab94b-0x1]['fY']-_0x2a48b3[0x0]['fY'],_0x524d66=Math[_0x2eb24d(0x41c)](_0x407140*_0x407140+_0x45c10c*_0x45c10c),0.000001<Math[_0x2eb24d(0x1e6)](+_0x524d66)&&(_0x4eace5=_0x4b76b4*_0x407140/_0x524d66/0x2,this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[0x0]['fX']+(_0xed833=-_0x5593d4*_0x45c10c/_0x524d66/0x2),this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[0x0]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fX']-_0xed833,this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],_0x5a4396+=0x2));}}return 0x0==_0x5a4396?_0x13949e[_0x2eb24d(0x203)]:(this[_0x2eb24d(0x350)]=_0x5a4396,_0x13949e['SR_OK']);}},{'key':_0x41470a(0x3ec),'value':function(_0x4a4177,_0x34d8db,_0xccb171,_0x4fa834,_0x405218,_0x5c4f68){var _0xd97f84=_0x41470a,_0x222e90=[],_0x3a1a9f=[];return _0x3a1a9f[_0xd97f84(0x2f3)]=_0x4a4177,_0x3a1a9f[_0xd97f84(0x216)]=_0x34d8db,_0x3a1a9f['bLoop']=_0xccb171,_0x3a1a9f[_0xd97f84(0x36d)]=_0x4fa834,_0x3a1a9f[_0xd97f84(0x205)]=_0x405218,_0x222e90[_0xd97f84(0x51d)](_0x3a1a9f),this[_0xd97f84(0x267)](_0x222e90,0x1,_0x34d8db,_0x5c4f68);}},{'key':_0x41470a(0x267),'value':function(_0xaafb4d,_0x2e3bb7,_0x165451,_0x1094cc){var _0x20ab7d=_0x41470a;if(null==this[_0x20ab7d(0x51e)])return _0x13949e[_0x20ab7d(0x2cf)];if(null==_0xaafb4d||_0x2e3bb7<0x1||_0x165451<0x2)return _0x13949e[_0x20ab7d(0x203)];if(0x0==this[_0x20ab7d(0x37f)]){var _0x528a0a=this[_0x20ab7d(0x2b3)](_0x5971cc,_0x466d10);if(_0x528a0a<=0x0)return _0x13949e['SR_ERR_WEBGL_RESOURCE'];this[_0x20ab7d(0x37f)]=_0x528a0a;}if(0x1==_0x1094cc)return this['DrawFillBlock'](_0xaafb4d,_0x2e3bb7,_0x165451);for(var _0x22b4cb=0x0,_0x2bc3e4=0x0;_0x2bc3e4<_0x2e3bb7;++_0x2bc3e4){if(null==_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x2f3)]||_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x216)]<=0x1||0x400<=_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x216)]||_0xaafb4d[_0x2bc3e4]['nLineWidth']<=0x0||null==_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x36d)])return _0x13949e['SR_ERR_PARAM'];_0x22b4cb+=_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x216)];}if(_0x22b4cb!=_0x165451)return _0x13949e[_0x20ab7d(0x203)];if((_0x22b4cb+=_0x2e3bb7)>this[_0x20ab7d(0x540)]&&(this[_0x20ab7d(0x540)]=_0x22b4cb,this['pLinePosVertices']=null,this[_0x20ab7d(0x232)]=null),null==this['pLinePosVertices']&&(this[_0x20ab7d(0x2a7)]=new Float32Array(0x6*this[_0x20ab7d(0x540)]*0x3),null==this['pLinePosVertices']))return _0x13949e[_0x20ab7d(0x37b)];if(this[_0x20ab7d(0x2a7)][_0x20ab7d(0x542)](0x0),null==this['pLineClrVertices']&&(this[_0x20ab7d(0x232)]=new Float32Array(0x6*this[_0x20ab7d(0x540)]*0x4),null==this[_0x20ab7d(0x232)]))return _0x13949e[_0x20ab7d(0x37b)];if(this[_0x20ab7d(0x232)][_0x20ab7d(0x542)](0x0),0x0==this[_0x20ab7d(0x442)]&&(this[_0x20ab7d(0x442)]=this[_0x20ab7d(0x51e)][_0x20ab7d(0x33d)](),0x0==this['glLinePosBuffer']))return _0x13949e[_0x20ab7d(0x392)];if(0x0==this[_0x20ab7d(0x4fc)]&&(this[_0x20ab7d(0x4fc)]=this[_0x20ab7d(0x51e)]['createBuffer'](),0x0==this[_0x20ab7d(0x4fc)]))return _0x13949e[_0x20ab7d(0x392)];_0x528a0a=this[_0x20ab7d(0x34d)](_0xaafb4d,_0x2e3bb7);if(_0x13949e[_0x20ab7d(0x4a6)]!=_0x528a0a)return _0x528a0a;this[_0x20ab7d(0x51e)][_0x20ab7d(0x3ce)](this[_0x20ab7d(0x51e)]['BLEND']),this['ctx'][_0x20ab7d(0x263)](this[_0x20ab7d(0x51e)]['SRC_ALPHA'],this[_0x20ab7d(0x51e)][_0x20ab7d(0x231)]);var _0x1094cc=this[_0x20ab7d(0x37f)],_0x165451=(this['ctx']['useProgram'](_0x1094cc),this[_0x20ab7d(0x442)]),_0x528a0a=this[_0x20ab7d(0x4fc)],_0x3bbd21=this[_0x20ab7d(0x350)],_0x3023ba=this[_0x20ab7d(0x2a7)],_0x25978a=this[_0x20ab7d(0x232)],_0x165451=(this[_0x20ab7d(0x51e)]['bindBuffer'](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x165451),this[_0x20ab7d(0x51e)][_0x20ab7d(0x416)](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x3023ba,this[_0x20ab7d(0x51e)][_0x20ab7d(0x33a)]),this[_0x20ab7d(0x51e)]['getAttribLocation'](_0x1094cc,_0x20ab7d(0x3ef))),_0x3023ba=(this[_0x20ab7d(0x51e)][_0x20ab7d(0x2e6)](_0x165451),this[_0x20ab7d(0x51e)]['vertexAttribPointer'](_0x165451,0x3,this[_0x20ab7d(0x51e)][_0x20ab7d(0x4f2)],!0x1,0x0,0x0),this[_0x20ab7d(0x51e)]['bindBuffer'](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x528a0a),this[_0x20ab7d(0x51e)][_0x20ab7d(0x416)](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x25978a,this[_0x20ab7d(0x51e)][_0x20ab7d(0x33a)]),this[_0x20ab7d(0x51e)][_0x20ab7d(0x1ff)](_0x1094cc,_0x20ab7d(0x35e)));return this[_0x20ab7d(0x51e)][_0x20ab7d(0x2e6)](_0x3023ba),this[_0x20ab7d(0x51e)]['vertexAttribPointer'](_0x3023ba,0x4,this[_0x20ab7d(0x51e)][_0x20ab7d(0x4f2)],!0x1,0x0,0x0),this['ctx'][_0x20ab7d(0x408)](this[_0x20ab7d(0x51e)]['ARRAY_BUFFER'],null),this['ctx'][_0x20ab7d(0x2e8)](0x0,0x0,this['canvas'][_0x20ab7d(0x36f)],this['canvas']['height']),this['ctx'][_0x20ab7d(0x52a)](this[_0x20ab7d(0x51e)][_0x20ab7d(0x526)],0x0,0x3*_0x3bbd21),this[_0x20ab7d(0x51e)][_0x20ab7d(0x288)](null),this['ctx'][_0x20ab7d(0x54d)](this[_0x20ab7d(0x51e)]['BLEND']),_0x13949e['SR_OK'];}},{'key':'FreetypeWasmLoadedCB','value':(_0xeda133=_0x30bbb2(_0x148935()[_0x41470a(0x230)](function _0x2b5372(_0x47f994){var _0x375965=_0x41470a,_0x1f3bcb,_0x5ce856,_0x4d82c7,_0x510b2e,_0x23723e,_0x28c851,_0x532f41,_0x55abd6;return _0x148935()[_0x375965(0x398)](function(_0x30bfe0){var _0x56e15d=_0x375965;for(;;)switch(_0x30bfe0[_0x56e15d(0x4e1)]=_0x30bfe0[_0x56e15d(0x500)]){case 0x0:if(null==_0x47f994)return _0x30bfe0[_0x56e15d(0x413)]('return');_0x30bfe0[_0x56e15d(0x500)]=0x2;break;case 0x2:if(null==(_0x5ce856=(_0x1f3bcb=_0x47f994)[_0x56e15d(0x53e)]))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x203)]);_0x30bfe0['next']=0x6;break;case 0x6:if(null==(_0x4d82c7=new _0x1bf079()))return _0x30bfe0[_0x56e15d(0x413)]('return',_0x13949e['SR_ERR_ALLOC_MEMORY']);_0x30bfe0[_0x56e15d(0x500)]=0x9;break;case 0x9:if((_0x510b2e=_0x5ce856[_0x56e15d(0x2bd)](_0x4d82c7))!==_0x5342a5['Ok'])throw new Error(_0x5ce856[_0x56e15d(0x2d0)](_0x510b2e));_0x30bfe0['next']=0xc;break;case 0xc:if(null==_0x1f3bcb['pFontPath']||null==_0x1f3bcb[_0x56e15d(0x2c3)])return _0x30bfe0[_0x56e15d(0x413)]('return',_0x13949e['SR_ERR_CALL_ORDER']);_0x30bfe0[_0x56e15d(0x500)]=0xe;break;case 0xe:return _0x30bfe0['next']=0x10,fetch(_0x1f3bcb[_0x56e15d(0x2c3)]);case 0x10:if(null==(_0x23723e=_0x30bfe0['sent']))return _0x30bfe0['abrupt'](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x1fd)]);_0x30bfe0[_0x56e15d(0x500)]=0x13;break;case 0x13:return _0x30bfe0[_0x56e15d(0x500)]=0x15,_0x23723e[_0x56e15d(0x505)]();case 0x15:if(null==(_0x28c851=_0x30bfe0[_0x56e15d(0x20c)]))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e['SR_ERR_FREETYPE_INIT']);_0x30bfe0[_0x56e15d(0x500)]=0x18;break;case 0x18:if(null==(_0x532f41=new Uint8Array(_0x28c851)))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x1fd)]);_0x30bfe0[_0x56e15d(0x500)]=0x1b;break;case 0x1b:if(null==(_0x55abd6=new _0x125374()))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x1fd)]);_0x30bfe0[_0x56e15d(0x500)]=0x1e;break;case 0x1e:if((_0x510b2e=_0x5ce856['New_Memory_Face'](_0x4d82c7,_0x532f41,0x0,_0x55abd6))!==_0x5342a5['Ok'])throw _0x1f3bcb[_0x56e15d(0x53e)]=null,new Error(_0x5ce856['Error_String'](_0x510b2e));_0x30bfe0[_0x56e15d(0x500)]=0x22;break;case 0x22:_0x1f3bcb['FTLibrary']=_0x4d82c7,_0x1f3bcb[_0x56e15d(0x395)]=_0x55abd6;case 0x24:case _0x56e15d(0x30a):return _0x30bfe0[_0x56e15d(0x43b)]();}},_0x2b5372);})),function(_0x39716a){var _0x437f2d=_0x41470a;return _0xeda133[_0x437f2d(0x4f6)](this,arguments);})},{'key':'SR_SetFontPath','value':function(_0x46c401,_0x18051d){var _0x532d8c=_0x41470a;if(null==_0x18051d)return _0x13949e[_0x532d8c(0x203)];if(!this[_0x532d8c(0x215)]){var _0x1f5dff=new _0x30397f();if(null==_0x1f5dff)return _0x13949e[_0x532d8c(0x3ea)];this[_0x532d8c(0x2c3)]=_0x18051d,_0x18051d=this[_0x532d8c(0x488)],((this[_0x532d8c(0x53e)]=_0x1f5dff)[_0x532d8c(0x297)](_0x46c401,_0x18051d,this),this[_0x532d8c(0x215)]=!0x0);}return _0x13949e['SR_OK'];}},{'key':_0x41470a(0x379),'value':function(_0x3e4f00,_0x3689e6,_0x4c723c,_0x28420d,_0x146901,_0x204aaa,_0x1bd6b4){var _0x1071b4=_0x41470a;if(null==_0x3e4f00||null==_0x3689e6||null==_0x4c723c||_0x28420d<=0x1||_0x146901<=0x1)return _0x13949e[_0x1071b4(0x203)];if(0x1==_0x204aaa&&null==_0x1bd6b4)return _0x13949e['SR_ERR_PARAM'];var _0x512635=[],_0x34cf0f=[];return _0x34cf0f[_0x1071b4(0x4c6)]=_0x204aaa,_0x34cf0f[_0x1071b4(0x1de)]=_0x28420d,_0x34cf0f['nFontHeight']=_0x146901,_0x34cf0f[_0x1071b4(0x251)]=_0x1bd6b4,_0x34cf0f[_0x1071b4(0x50f)]=_0x4c723c,_0x34cf0f[_0x1071b4(0x26a)]=_0x3e4f00,_0x34cf0f[_0x1071b4(0x386)]=_0x3689e6,_0x512635[_0x1071b4(0x51d)](_0x34cf0f),this['SR_DrawFontEx'](_0x512635,0x1);}},{'key':'SR_DrawFontEx','value':function(_0x2b650a,_0x4dd772){var _0x884ebc=_0x41470a;if(null==this[_0x884ebc(0x51e)]||null==this[_0x884ebc(0x53e)])return _0x13949e['SR_ERR_CALL_ORDER'];if(_0x4dd772<0x0||null==_0x2b650a)return _0x13949e['SR_ERR_PARAM'];if(this[_0x884ebc(0x391)]==this[_0x884ebc(0x42d)][_0x884ebc(0x36f)]/0x4*0x4&&this['canvas'][_0x884ebc(0x483)]==this[_0x884ebc(0x2f1)]/0x4*0x4||(this[_0x884ebc(0x2a6)]=null,this[_0x884ebc(0x2f6)]=0x0,this[_0x884ebc(0x391)]=this[_0x884ebc(0x42d)]['width']/0x4*0x4,this[_0x884ebc(0x457)]=this[_0x884ebc(0x42d)][_0x884ebc(0x483)]/0x4*0x4),null==this[_0x884ebc(0x2a6)]||0x0==this[_0x884ebc(0x2f6)]){if(this[_0x884ebc(0x2a6)]=new Uint8Array(this[_0x884ebc(0x391)]*this['nDrawFontHeight']*0x4),null==this['pFontColorBuffer'])return _0x13949e[_0x884ebc(0x37b)];if(this[_0x884ebc(0x2a6)][_0x884ebc(0x542)](0x0),this['nFontColorTexture']=this[_0x884ebc(0x51e)][_0x884ebc(0x415)](),0x0==this[_0x884ebc(0x2f6)])return _0x13949e[_0x884ebc(0x392)];this[_0x884ebc(0x51e)][_0x884ebc(0x310)](this[_0x884ebc(0x51e)][_0x884ebc(0x352)],this[_0x884ebc(0x2f6)]),this['ctx'][_0x884ebc(0x2af)](this[_0x884ebc(0x51e)][_0x884ebc(0x352)],this[_0x884ebc(0x51e)][_0x884ebc(0x4b4)],this[_0x884ebc(0x51e)][_0x884ebc(0x20a)]),this[_0x884ebc(0x51e)]['texParameteri'](this['ctx'][_0x884ebc(0x352)],this[_0x884ebc(0x51e)][_0x884ebc(0x1d4)],this['ctx'][_0x884ebc(0x20a)]),this[_0x884ebc(0x51e)][_0x884ebc(0x2af)](this['ctx'][_0x884ebc(0x352)],this[_0x884ebc(0x51e)]['TEXTURE_WRAP_S'],this[_0x884ebc(0x51e)][_0x884ebc(0x3e7)]),this[_0x884ebc(0x51e)][_0x884ebc(0x2af)](this[_0x884ebc(0x51e)][_0x884ebc(0x352)],this[_0x884ebc(0x51e)][_0x884ebc(0x3b5)],this['ctx']['CLAMP_TO_EDGE']);}for(var _0x2c2a19=0x0,_0x2320a4=0x0;_0x2320a4<_0x4dd772;_0x2320a4++)_0x2b650a[_0x2320a4][_0x884ebc(0x513)]&&_0x2c2a19++;if(this['nFontBGNum']<_0x2c2a19){for(var _0xf285ee=0x0;_0xf285ee<this[_0x884ebc(0x31b)];++_0xf285ee)this[_0x884ebc(0x520)][_0xf285ee]['pstPoints']=null,this[_0x884ebc(0x520)][_0xf285ee][_0x884ebc(0x36d)]=null;this['pstFontBGLines']=null,this[_0x884ebc(0x520)]=[];for(var _0x239e34=0x0;_0x239e34<_0x2c2a19;++_0x239e34)this['pstFontBGLines'][_0x239e34]['pstPoints']=[],this['pstFontBGLines'][_0x239e34]['pstColor']=[];this[_0x884ebc(0x31b)]=_0x2c2a19;}for(var _0x2c2a19=0x0,_0x5ce3f0=0x0;_0x5ce3f0<_0x4dd772;++_0x5ce3f0){var _0x4aa3d8=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fX']*this[_0x884ebc(0x391)],_0x3255b2=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fY']*this[_0x884ebc(0x457)],_0x58129c=_0x2b650a[_0x5ce3f0]['pString'][_0x884ebc(0x4f1)],_0x19d542=(_0x2b650a[_0x5ce3f0][_0x884ebc(0x1de)]==_0x2b650a[_0x5ce3f0][_0x884ebc(0x2a2)]&&(_0x2b650a[_0x5ce3f0][_0x884ebc(0x2a2)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x2a2)]-0x1),this[_0x884ebc(0x457)]),_0x49db03=0x0,_0x544a59=0xff*_0x2b650a[_0x5ce3f0][_0x884ebc(0x50f)]['fA'],_0x1c4f2e=0xff*_0x2b650a[_0x5ce3f0][_0x884ebc(0x50f)]['fR'],_0x538032=0xff*_0x2b650a[_0x5ce3f0][_0x884ebc(0x50f)]['fG'],_0x774127=0xff*_0x2b650a[_0x5ce3f0]['pstFontColor']['fB'];if((_0x33fcec=this[_0x884ebc(0x53e)][_0x884ebc(0x4b0)](this[_0x884ebc(0x395)],0x40*this[_0x884ebc(0x391)],0x40*this[_0x884ebc(0x457)],0x12c,0x12c))!==_0x5342a5['Ok'])throw new Error(this['FreetypeLibHandle'][_0x884ebc(0x2d0)](_0x33fcec));for(var _0x54134a=0x0;_0x54134a<_0x58129c;++_0x54134a){var _0x33fcec,_0x8f414e=_0x2b650a[_0x5ce3f0][_0x884ebc(0x26a)]['charCodeAt'](_0x54134a);if((_0x33fcec=this[_0x884ebc(0x53e)][_0x884ebc(0x4cd)](this[_0x884ebc(0x395)],_0x8f414e,_0x151f60['NO_SCALE']))!=_0x5342a5['Ok'])throw new Error(this['FreetypeLibHandle'][_0x884ebc(0x2d0)](_0x33fcec));var _0x4b50f6=this['FTFace'][_0x884ebc(0x43e)];if((_0x33fcec=this[_0x884ebc(0x53e)][_0x884ebc(0x4af)](_0x4b50f6,_0x2afdcd[_0x884ebc(0x4da)]))!==_0x5342a5['Ok'])throw new Error(_0x30397f[_0x884ebc(0x2d0)](_0x33fcec));var _0x50aa40=_0x4b50f6[_0x884ebc(0x504)];_0x4aa3d8+=_0x4b50f6[_0x884ebc(0x2c6)],(_0x8f414e=this['nDrawFontHeight']-_0x4b50f6[_0x884ebc(0x27b)])<_0x19d542&&(_0x19d542=_0x8f414e),_0x49db03<(_0x8f414e=_0x50aa40[_0x884ebc(0x4a1)])&&(_0x49db03=_0x8f414e);for(var _0x3f98a1=0x0;_0x3f98a1<_0x50aa40[_0x884ebc(0x2dd)]*_0x50aa40[_0x884ebc(0x36f)];++_0x3f98a1){var _0x3391d9,_0x14a609=Math[_0x884ebc(0x3f7)](_0x2b650a[_0x5ce3f0]['nFontHeight']-_0x4b50f6[_0x884ebc(0x27b)]+_0x3255b2+_0x3f98a1/_0x50aa40[_0x884ebc(0x36f)]);_0x14a609>=this['nDrawFontHeight']||((_0x14a609=_0x4aa3d8+_0x14a609*this[_0x884ebc(0x391)]+_0x3f98a1%_0x50aa40['width'])<0x0||_0x14a609>=this[_0x884ebc(0x391)]*this['nDrawFontHeight']||0x0<_0x50aa40['buffer'][_0x3f98a1]&&((_0x3391d9=this[_0x884ebc(0x2a6)])[0x4*_0x14a609]=_0x774127,_0x3391d9[0x4*_0x14a609+0x1]=_0x538032,_0x3391d9[0x4*_0x14a609+0x2]=_0x1c4f2e,_0x3391d9[0x4*_0x14a609+0x3]=_0x544a59));}_0x4aa3d8+=_0x50aa40[_0x884ebc(0x36f)];}var _0x224ed7=[];_0x224ed7[_0x884ebc(0x478)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fX'],_0x224ed7[_0x884ebc(0x24a)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fY']+_0x19d542/this[_0x884ebc(0x457)],_0x224ed7['fRight']=_0x4aa3d8/this[_0x884ebc(0x391)],_0x224ed7['fBottom']=_0x49db03/this[_0x884ebc(0x457)]+_0x224ed7[_0x884ebc(0x24a)],_0x224ed7[_0x884ebc(0x478)]-=0.01,_0x224ed7['fTop']-=0.01,_0x224ed7[_0x884ebc(0x2d2)]+=0.01,_0x224ed7[_0x884ebc(0x339)]+=0.01,0x1==_0x2b650a[_0x5ce3f0]['bBackGround']&&(this[_0x884ebc(0x520)][_0x2c2a19][_0x884ebc(0x2f3)]=_0x224ed7,this[_0x884ebc(0x520)][_0x2c2a19][_0x884ebc(0x216)]=0x4,this[_0x884ebc(0x520)][_0x2c2a19][_0x884ebc(0x431)]=!0x0,this['pstFontBGLines'][_0x2c2a19][_0x884ebc(0x36d)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x251)],_0x2c2a19+=this[_0x884ebc(0x520)][_0x2c2a19]['nLineWidth']=0x1);}0x0!=_0x2c2a19&&this[_0x884ebc(0x267)](this[_0x884ebc(0x520)],_0x2c2a19,0x4*_0x2c2a19,!0x1),this['ctx']['bindTexture'](this[_0x884ebc(0x51e)]['TEXTURE_2D'],this['nFontColorTexture']),this[_0x884ebc(0x51e)][_0x884ebc(0x27d)](this[_0x884ebc(0x51e)]['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this[_0x884ebc(0x391)],this[_0x884ebc(0x457)],0x0,this[_0x884ebc(0x51e)]['RGBA'],this[_0x884ebc(0x51e)][_0x884ebc(0x22b)],this[_0x884ebc(0x2a6)]),0x0==this['nFontShaderProgram']&&(this['nFontShaderProgram']=this[_0x884ebc(0x2b3)](_0x884ebc(0x506),'\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a')),this[_0x884ebc(0x51e)]['viewport'](0x0,0x0,this[_0x884ebc(0x42d)]['width'],this[_0x884ebc(0x42d)][_0x884ebc(0x483)]),this[_0x884ebc(0x51e)][_0x884ebc(0x3ce)](this[_0x884ebc(0x51e)][_0x884ebc(0x487)]),this[_0x884ebc(0x51e)][_0x884ebc(0x263)](this[_0x884ebc(0x51e)][_0x884ebc(0x275)],this[_0x884ebc(0x51e)][_0x884ebc(0x231)]),this['ctx'][_0x884ebc(0x288)](this[_0x884ebc(0x3c8)]),this[_0x884ebc(0x51e)][_0x884ebc(0x425)](this[_0x884ebc(0x51e)][_0x884ebc(0x30e)]),this[_0x884ebc(0x51e)]['bindTexture'](this[_0x884ebc(0x51e)]['TEXTURE_2D'],this[_0x884ebc(0x2f6)]);var _0x2f820a=this[_0x884ebc(0x51e)]['getUniformLocation'](this[_0x884ebc(0x3c8)],_0x884ebc(0x4ee)),_0x2f820a=(this['ctx'][_0x884ebc(0x2cc)](_0x2f820a,0x0),this[_0x884ebc(0x51e)][_0x884ebc(0x408)](this['ctx']['ARRAY_BUFFER'],this[_0x884ebc(0x52e)]),this[_0x884ebc(0x51e)][_0x884ebc(0x1ff)](this[_0x884ebc(0x3c8)],'position')),_0x2f820a=(this[_0x884ebc(0x51e)][_0x884ebc(0x2e6)](_0x2f820a),this[_0x884ebc(0x51e)][_0x884ebc(0x3c2)](_0x2f820a,0x3,this[_0x884ebc(0x51e)][_0x884ebc(0x4f2)],!0x1,0x0,0x0),this[_0x884ebc(0x51e)][_0x884ebc(0x408)](this[_0x884ebc(0x51e)][_0x884ebc(0x2f4)],this[_0x884ebc(0x53d)]),this['ctx'][_0x884ebc(0x1ff)](this[_0x884ebc(0x3c8)],_0x884ebc(0x34f)));return this[_0x884ebc(0x51e)][_0x884ebc(0x2e6)](_0x2f820a),this[_0x884ebc(0x51e)][_0x884ebc(0x3c2)](_0x2f820a,0x2,this[_0x884ebc(0x51e)][_0x884ebc(0x4f2)],!0x1,0x0,0x0),this['ctx'][_0x884ebc(0x408)](this[_0x884ebc(0x51e)][_0x884ebc(0x2f4)],null),this[_0x884ebc(0x51e)][_0x884ebc(0x52a)](this[_0x884ebc(0x51e)]['TRIANGLES'],0x0,0x6),this[_0x884ebc(0x51e)][_0x884ebc(0x288)](null),this[_0x884ebc(0x51e)][_0x884ebc(0x54d)](this[_0x884ebc(0x51e)][_0x884ebc(0x487)]),_0x13949e[_0x884ebc(0x4a6)];}},{'key':_0x41470a(0x485),'value':function(_0x2ec840){var _0x1e3d1c=_0x41470a;if(null==this[_0x1e3d1c(0x51e)])return _0x13949e['SR_ERR_CALL_ORDER'];var _0x12592a,_0x5c2048,_0x2d3c80=-0x1;if(_0x2ec840==_0x3468da[_0x1e3d1c(0x3c1)])_0x2d3c80=0x0;else{if(-0x1==(_0x2d3c80=null!=this[_0x1e3d1c(0x292)]?this[_0x1e3d1c(0x292)][_0x1e3d1c(0x276)](_0x2ec840):_0x2d3c80))return _0x2d3c80;}switch(this[_0x1e3d1c(0x29e)]=_0x2d3c80,_0x2ec840){case _0x3468da['SR_DE_NULL']:_0x12592a=_0xe651be,this[_0x1e3d1c(0x367)]=!(_0x5c2048=_0x1e3d1c(0x4b8));break;case _0x3468da[_0x1e3d1c(0x224)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x2c9),this['bFECHandle']=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da['SR_DE_FISH_PTZ_CEILING']:_0x12592a=_0xe651be,_0x5c2048='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x0auniform\\x20float\\x20fVAngleCos;\\x0auniform\\x20float\\x20fVAngleSin;\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x200.5\\x20-\\x20v_uv.t;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(-(origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this[_0x1e3d1c(0x2bc)]=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da[_0x1e3d1c(0x4c2)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x21f),this[_0x1e3d1c(0x2bc)]=!0x0;break;case _0x3468da[_0x1e3d1c(0x4bf)]:_0x12592a=_0xe651be,_0x5c2048='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin3;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z3;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20origin3.s\\x20=\\x20origin2.s*fHAngleCos\\x20+\\x20z2*fHAngleSin\\x20;\\x0a\\x20\\x20\\x20\\x20origin3.t\\x20=\\x20origin2.y;\\x0a\\x20\\x20\\x20\\x20z3\\x20=\\x20z2*fHAngleCos\\x20-\\x20origin2.x*fHAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t\\x20+\\x20z3*z3);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20(tmp*origin3.s\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(tmp*origin3.t\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['bFECHandle']=!0x0,this['b3DPort']=!0x1;break;case _0x3468da[_0x1e3d1c(0x208)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x388),this[_0x1e3d1c(0x2bc)]=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da[_0x1e3d1c(0x4f5)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x364),this['bFECHandle']=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da[_0x1e3d1c(0x2f5)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x2be),this[_0x1e3d1c(0x2bc)]=!0x0,this['b3DPort']=!0x1;break;case _0x3468da[_0x1e3d1c(0x3a8)]:_0x12592a=_0xe651be,_0x5c2048='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20newpp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',this[_0x1e3d1c(0x2bc)]=!0x0,this['b3DPort']=!0x1;break;case _0x3468da[_0x1e3d1c(0x33c)]:_0x12592a=_0xe651be,_0x5c2048=SHADER_PS_RGBA_PANORAMA_WALL,this[_0x1e3d1c(0x2bc)]=!0x0,this['b3DPort']=!0x1;break;case _0x3468da['SR_DE_FISH_SEMISPHERE']:case _0x3468da[_0x1e3d1c(0x4dc)]:case _0x3468da[_0x1e3d1c(0x3a9)]:_0x12592a=_0x1e3d1c(0x332),_0x5c2048=_0x1e3d1c(0x423),this[_0x1e3d1c(0x2bc)]=!0x0,this[_0x1e3d1c(0x367)]=!0x0;}var _0x2d3c80=this[_0x1e3d1c(0x2b3)](_0x12592a,_0x5c2048),_0x2d3c80=(this[_0x1e3d1c(0x1e9)]=_0x2d3c80,null),_0x1a3228=null,_0x4fb145=(0x0==this[_0x1e3d1c(0x367)]?(_0x2d3c80=new Float32Array([-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,0x1,0x0,0x1,-0x1,0x0]),_0x1a3228=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1])):_0x2ec840==_0x3468da[_0x1e3d1c(0x2e3)]&&(this[_0x1e3d1c(0x354)](0x0,0x1,0x0,0x1),_0x2d3c80=this[_0x1e3d1c(0x2ea)],_0x1a3228=this[_0x1e3d1c(0x2d7)]),this[_0x1e3d1c(0x51e)]['createBuffer']()),_0x2d3c80=(this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x408)](this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x2f4)],_0x4fb145),this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x416)](this['ctx'][_0x1e3d1c(0x2f4)],_0x2d3c80,this[_0x1e3d1c(0x51e)]['STATIC_DRAW']),this[_0x1e3d1c(0x52e)]=_0x4fb145,this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x33d)]()),_0x4fb145=(this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x408)](this['ctx'][_0x1e3d1c(0x2f4)],_0x2d3c80),this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x416)](this[_0x1e3d1c(0x51e)]['ARRAY_BUFFER'],_0x1a3228,this['ctx'][_0x1e3d1c(0x33a)]),this[_0x1e3d1c(0x53d)]=_0x2d3c80,this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x408)](this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x2f4)],null),this['InitCamera'](_0x2ec840));return _0x13949e[_0x1e3d1c(0x4a6)]!=_0x4fb145?-0x1:(this[_0x1e3d1c(0x4d6)]=_0x2ec840,this['nFECPort']);}},{'key':_0x41470a(0x41e),'value':function(_0x2a4887){var _0x316efb=_0x41470a;return null==this['ctx']?_0x13949e[_0x316efb(0x2cf)]:(null!=this[_0x316efb(0x292)]&&this[_0x316efb(0x292)][_0x316efb(0x32d)](_0x2a4887),this['bFECHandle']=!0x1,this['enDisplayEffect']=_0x3468da[_0x316efb(0x3c1)],0x0!=this[_0x316efb(0x1e9)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x482)](this[_0x316efb(0x1e9)]),this['videoShaderProgram']=0x0),0x0!=this[_0x316efb(0x52e)]&&null!=this[_0x316efb(0x51e)]&&(this['ctx'][_0x316efb(0x459)](this['vertexPosBuffer']),this[_0x316efb(0x52e)]=0x0),0x0!=this[_0x316efb(0x53d)]&&null!=this['ctx']&&(this[_0x316efb(0x51e)][_0x316efb(0x459)](this[_0x316efb(0x53d)]),this[_0x316efb(0x53d)]=0x0),this[_0x316efb(0x540)]=0x0,this[_0x316efb(0x2a7)]=null,this[_0x316efb(0x232)]=null,0x0!=this['glLinePosBuffer']&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)]['deleteBuffer'](this[_0x316efb(0x442)]),this[_0x316efb(0x442)]=0x0),0x0!=this['glLineTexBuffer']&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)]['deleteBuffer'](this[_0x316efb(0x29c)]),this[_0x316efb(0x29c)]=0x0),(this[_0x316efb(0x350)]=0x0)!=this[_0x316efb(0x37f)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)]['deleteProgram'](this[_0x316efb(0x37f)]),this[_0x316efb(0x37f)]=0x0),this[_0x316efb(0x38b)]=null,this[_0x316efb(0x23d)]=null,(this[_0x316efb(0x453)]=0x0)!=this[_0x316efb(0x383)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x459)](this[_0x316efb(0x383)]),this['glBlockPosBuffer']=0x0),0x0!=this['glBlockClrBuffer']&&null!=this[_0x316efb(0x51e)]&&(this['ctx'][_0x316efb(0x459)](this[_0x316efb(0x50b)]),this[_0x316efb(0x50b)]=0x0),0x0!=this[_0x316efb(0x470)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x482)](this[_0x316efb(0x470)]),this[_0x316efb(0x470)]=0x0),null!=this['FreetypeLibHandle']&&null!=this[_0x316efb(0x395)]&&(this[_0x316efb(0x53e)]['Done_Face'](this[_0x316efb(0x395)]),this[_0x316efb(0x395)]=null),null!=this[_0x316efb(0x53e)]&&null!=this[_0x316efb(0x327)]&&(this[_0x316efb(0x53e)][_0x316efb(0x357)](this[_0x316efb(0x327)]),this[_0x316efb(0x327)]=null),this[_0x316efb(0x215)]=!0x1,this[_0x316efb(0x2c3)]=null,this[_0x316efb(0x53e)]=null,this[_0x316efb(0x391)]=0x0,(this['nDrawFontHeight']=0x0)!=this[_0x316efb(0x2f6)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x300)](this[_0x316efb(0x2f6)]),this[_0x316efb(0x2f6)]=0x0),(this[_0x316efb(0x2a6)]=0x0)!=this[_0x316efb(0x3c8)]&&null!=this['ctx']&&(this['ctx'][_0x316efb(0x482)](this[_0x316efb(0x3c8)]),this[_0x316efb(0x3c8)]=0x0),this['nFontBGNum']=0x0,this[_0x316efb(0x520)]=null,this[_0x316efb(0x2ea)]=null,this[_0x316efb(0x2d7)]=null,this[_0x316efb(0x340)]=0x0,this['nSemiSpherePosSize']=0x0,this[_0x316efb(0x406)]=0x0,this[_0x316efb(0x441)]=null,this[_0x316efb(0x4c0)]=null,this[_0x316efb(0x312)]=0x0,this[_0x316efb(0x3ff)]=0x0,this[_0x316efb(0x4f8)]=0x0,this[_0x316efb(0x2c1)]=0x0,this[_0x316efb(0x338)]=0x0,this[_0x316efb(0x367)]=!0x1,this[_0x316efb(0x2e1)]=null,this[_0x316efb(0x3da)]=0x0,this[_0x316efb(0x2a3)]=0x0,this[_0x316efb(0x44a)]=0x0,this[_0x316efb(0x229)]=null,this[_0x316efb(0x46c)]=null,this[_0x316efb(0x252)]=null,this[_0x316efb(0x4d5)]=null,this[_0x316efb(0x51e)][_0x316efb(0x54d)](this[_0x316efb(0x51e)]['CULL_FACE']),this[_0x316efb(0x51e)][_0x316efb(0x54d)](this[_0x316efb(0x51e)][_0x316efb(0x3cb)]),_0x13949e['SR_OK']);}},{'key':_0x41470a(0x511),'value':function(_0x30a173){var _0x52b312=_0x41470a;return null==_0x30a173?_0x13949e[_0x52b312(0x203)]:null==this[_0x52b312(0x292)]?_0x13949e[_0x52b312(0x2cf)]:this[_0x52b312(0x292)][_0x52b312(0x3e3)](this[_0x52b312(0x29e)],_0x30a173);}},{'key':_0x41470a(0x4f0),'value':function(_0x322778){var _0x1aa028=_0x41470a;return null==_0x322778?_0x13949e[_0x1aa028(0x203)]:null==this[_0x1aa028(0x292)]?_0x13949e[_0x1aa028(0x2cf)]:this['pFishParamManager']['SetFishParam'](this[_0x1aa028(0x29e)],_0x322778);}},{'key':'SR_SetDisplayRect','value':function(_0x2b0089,_0x6076ae,_0x183e35,_0x475f0e){var _0x307de6=_0x41470a;if(null==this[_0x307de6(0x51e)])return _0x13949e[_0x307de6(0x2cf)];var _0x58b1ac,_0x48adad,_0x3d05f0=null;return _0x3d05f0=0x0<this['frameDisplayWidth']&&0x0<this['frameDisplayHeight']?(_0x58b1ac=_0x2b0089/this[_0x307de6(0x502)],_0x48adad=_0x6076ae/this[_0x307de6(0x3b0)],_0x2b0089=(_0x2b0089+_0x183e35)/this[_0x307de6(0x502)],_0x183e35=(_0x6076ae+_0x475f0e)/this[_0x307de6(0x3b0)],new Float32Array([_0x58b1ac,_0x183e35,_0x58b1ac,_0x48adad,_0x2b0089,_0x48adad,_0x2b0089,_0x183e35])):new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]),this[_0x307de6(0x51e)][_0x307de6(0x408)](this[_0x307de6(0x51e)][_0x307de6(0x2f4)],this[_0x307de6(0x53d)]),this[_0x307de6(0x51e)][_0x307de6(0x306)](this[_0x307de6(0x51e)][_0x307de6(0x2f4)],0x0,_0x3d05f0),this['ctx'][_0x307de6(0x408)](this['ctx'][_0x307de6(0x2f4)],null),_0x13949e[_0x307de6(0x4a6)];}},{'key':_0x41470a(0x4b2),'value':function(){var _0x33b71d=_0x41470a;return null==this[_0x33b71d(0x51e)]?_0x13949e[_0x33b71d(0x2cf)]:(this['frameDisplayWidth']=0x0,(this[_0x33b71d(0x3b0)]=0x0)!=this[_0x33b71d(0x516)]&&null!=this[_0x33b71d(0x51e)]&&(this[_0x33b71d(0x51e)][_0x33b71d(0x300)](this['nSurfaceTexture']),this[_0x33b71d(0x516)]=0x0),0x0==this['bFECHandle']?this[_0x33b71d(0x41e)](0x0):-0x1!=this[_0x33b71d(0x29e)]&&this[_0x33b71d(0x41e)](this[_0x33b71d(0x29e)]),this[_0x33b71d(0x1f2)]=!0x1,this[_0x33b71d(0x4a5)]=!0x1,this['bRecreateTex']=!0x0,this[_0x33b71d(0x292)]=null,this[_0x33b71d(0x42d)]=null,this[_0x33b71d(0x51e)]=null,_0x13949e['SR_OK']);}},{'key':'SR_SetCanvasSize','value':function(_0x207390,_0x1713c2){var _0x24221c=_0x41470a;return this[_0x24221c(0x42d)][_0x24221c(0x36f)]=_0x207390,this[_0x24221c(0x42d)][_0x24221c(0x483)]=_0x1713c2,_0x13949e[_0x24221c(0x4a6)];}},{'key':_0x41470a(0x547),'value':function(){var _0x4eca94=_0x41470a;return console[_0x4eca94(0x514)]('canvas\\x20width:'+this[_0x4eca94(0x42d)][_0x4eca94(0x36f)]+_0x4eca94(0x254)+this['canvas'][_0x4eca94(0x483)]),_0x13949e[_0x4eca94(0x4a6)];}},{'key':'SR_SetAntialias','value':function(_0x1679a2){var _0x46f517=_0x41470a;return 0x1==this[_0x46f517(0x1f2)]?_0x13949e[_0x46f517(0x38d)]:(this['bAntialias']!=_0x1679a2&&(this['bRecreateTex']=!0x0,this[_0x46f517(0x4a5)]=_0x1679a2),_0x13949e[_0x46f517(0x4a6)]);}},{'key':_0x41470a(0x2e7),'value':function(_0x317974){var _0x445de9=_0x41470a;return null==this[_0x445de9(0x292)]?_0x13949e[_0x445de9(0x2cf)]:this[_0x445de9(0x292)][_0x445de9(0x524)](_0x317974);}},{'key':_0x41470a(0x32f),'value':function(_0x2131ed){var _0x49d7dd=_0x41470a;return null!=this[_0x49d7dd(0x292)]?_0x13949e['SR_ERR_NOT_SUPPORT']:(this[_0x49d7dd(0x292)]=_0x2131ed,_0x13949e[_0x49d7dd(0x4a6)]);}},{'key':'CreateSemiSphere','value':function(_0x588ab8,_0x1c765f,_0x5931b2,_0x3aff66){var _0x11a651=_0x41470a;if(null!=this[_0x11a651(0x2ea)]||null!=this[_0x11a651(0x2d7)])return _0x13949e['SR_ERR_CALL_ORDER'];this['pSemiSpherePos']=new Float32Array(0xa8c0),this[_0x11a651(0x2d7)]=new Float32Array(0x7080);for(var _0x89f603=(_0x1c765f-_0x588ab8)/(_0x3aff66-_0x5931b2),_0x2dc0d6=(_0x1c765f-_0x588ab8)/0x2*0x1,_0x29f8b8=0x2*_0x48e6bf/0x3c,_0x477a78=_0x48e6bf/0x2/0x28,_0x565c8b=0x0,_0x979fe=0x0,_0x2b59f3=0x0,_0x36fa65=0x0;_0x36fa65<0x3c;++_0x36fa65)for(var _0x1fea2a=0x0;_0x1fea2a<0x28;++_0x1fea2a){var _0x386255,_0x229ce8,_0x52e92e=_0x36fa65*_0x29f8b8,_0x493bfb=(0x0==_0x36fa65&&(_0x565c8b=_0x52e92e),0x3b==_0x36fa65?_0x565c8b:(_0x36fa65+0x1)*_0x29f8b8),_0x528b78=-_0x1fea2a*_0x477a78,_0x4246b9=-(_0x1fea2a+0x1)*_0x477a78;this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math['sin'](_0x528b78),this['pSemiSpherePos'][_0x979fe+0x2]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math['sin'](_0x52e92e),_0x229ce8=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x52e92e),_0x386255=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this['pSemiSpherePos'][_0x979fe]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math['sin'](_0x4246b9),this['pSemiSpherePos'][_0x979fe+0x2]=-0x1*Math[_0x11a651(0x34b)](_0x4246b9)*Math[_0x11a651(0x202)](_0x52e92e),_0x229ce8=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x52e92e),_0x386255=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math[_0x11a651(0x202)](_0x528b78),this[_0x11a651(0x2ea)][_0x979fe+0x2]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math['sin'](_0x493bfb),_0x229ce8=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x493bfb),_0x386255=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math[_0x11a651(0x202)](_0x528b78),this[_0x11a651(0x2ea)][_0x979fe+0x2]=-0x1*Math['cos'](_0x528b78)*Math[_0x11a651(0x202)](_0x493bfb),_0x229ce8=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math['sin'](_0x493bfb),_0x386255=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x4246b9)*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math[_0x11a651(0x202)](_0x4246b9),this['pSemiSpherePos'][_0x979fe+0x2]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x202)](_0x52e92e),_0x229ce8=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x52e92e),_0x386255=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math['sin'](_0x4246b9),this[_0x11a651(0x2ea)][_0x979fe+0x2]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x202)](_0x493bfb),_0x229ce8=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x493bfb),_0x386255=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3;}return this[_0x11a651(0x340)]=_0x979fe/0x3,this['nSemiSpherePosSize']=0x3,this[_0x11a651(0x406)]=0x2,_0x13949e[_0x11a651(0x4a6)];}},{'key':_0x41470a(0x41d),'value':function(_0x47413c){var _0x591aa0=_0x41470a;if(null!=this[_0x591aa0(0x2e1)])return SR_ERR_CALL_ORDER;switch(_0x47413c){case _0x3468da['SR_DE_NULL']:case _0x3468da[_0x591aa0(0x224)]:case _0x3468da[_0x591aa0(0x2b7)]:case _0x3468da['SR_DE_FISH_PTZ_FLOOR']:case _0x3468da['SR_DE_FISH_PTZ_WALL']:case _0x3468da[_0x591aa0(0x208)]:case _0x3468da[_0x591aa0(0x4f5)]:case _0x3468da['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x3468da['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x3468da[_0x591aa0(0x33c)]:return _0x13949e[_0x591aa0(0x4a6)];case _0x3468da['SR_DE_FISH_SEMISPHERE']:if(this['pCamera']=new _0x53ee33(),null==this[_0x591aa0(0x2e1)])return _0x13949e[_0x591aa0(0x37b)];this[_0x591aa0(0x2e1)]['SetFov'](_0x479a0f),this[_0x591aa0(0x2e1)][_0x591aa0(0x420)](0.02),this['pCamera'][_0x591aa0(0x3af)](0x3e8),this[_0x591aa0(0x3da)]=1.57,this[_0x591aa0(0x2e1)][_0x591aa0(0x458)](3.14-this[_0x591aa0(0x3da)]),this['fScale']=0x3,this[_0x591aa0(0x2e1)][_0x591aa0(0x26d)](this[_0x591aa0(0x44a)]);break;case _0x3468da[_0x591aa0(0x4dc)]:case _0x3468da[_0x591aa0(0x3a9)]:if(this[_0x591aa0(0x2e1)]=new _0x53ee33(),null==this['pCamera'])return _0x13949e[_0x591aa0(0x37b)];this[_0x591aa0(0x2e1)][_0x591aa0(0x3a6)](_0x479a0f),this[_0x591aa0(0x2e1)][_0x591aa0(0x420)](0.02),this[_0x591aa0(0x2e1)]['SetFar'](0x3e8),this[_0x591aa0(0x3da)]=-0.785,this['pCamera'][_0x591aa0(0x458)](-this[_0x591aa0(0x3da)]),this[_0x591aa0(0x44a)]=0x6,this['pCamera'][_0x591aa0(0x26d)](this[_0x591aa0(0x44a)]);break;case _0x3468da[_0x591aa0(0x3f3)]:case _0x3468da[_0x591aa0(0x4f9)]:if(this['pCamera']=new _0x53ee33(),null==this[_0x591aa0(0x2e1)])return _0x13949e[_0x591aa0(0x37b)];this[_0x591aa0(0x2e1)][_0x591aa0(0x43a)](!0x0),this['pCamera']['SetNear'](0.02),this['pCamera'][_0x591aa0(0x3af)](0x3e8),this[_0x591aa0(0x44a)]=0x3,this[_0x591aa0(0x2e1)][_0x591aa0(0x26d)](this[_0x591aa0(0x44a)]);break;default:return _0x13949e['SR_ERR_NOT_SUPPORT'];}return _0x13949e[_0x591aa0(0x4a6)];}},{'key':'SR_SetViewParam','value':function(_0x1fe8af,_0x595f9f){var _0x46cae3=_0x41470a;if(!this[_0x46cae3(0x367)])return _0x13949e[_0x46cae3(0x38d)];switch(_0x1fe8af){case _0x30de30:this[_0x46cae3(0x3da)]=_0x595f9f;break;case _0x4d39af:this['fRotateY']=_0x595f9f;break;case _0x1ab3fe:if(this['enDisplayEffect']==_0x3468da['SR_DE_FISH_SEMISPHERE']){if(_0x595f9f<-0.8||0x384<_0x595f9f)return _0x13949e['SR_ERR_PARAM'];}else{if((this['enDisplayEffect']==_0x3468da[_0x46cae3(0x3a9)]||this['enDisplayEffect']==_0x3468da[_0x46cae3(0x4dc)])&&(_0x595f9f<0x0||0x384<_0x595f9f))return _0x13949e[_0x46cae3(0x203)];}this[_0x46cae3(0x44a)]=_0x595f9f;break;default:return _0x13949e['SR_ERR_NOT_SUPPORT'];}return _0x13949e['SR_OK'];}},{'key':'SR_GetViewParam','value':function(_0x4441eb){var _0x5ea28a=_0x41470a;if(!this[_0x5ea28a(0x367)])return _0x13949e[_0x5ea28a(0x38d)];var _0x33a1bc=0x0;switch(_0x4441eb){case _0x30de30:_0x33a1bc=this[_0x5ea28a(0x3da)];break;case _0x4d39af:_0x33a1bc=this[_0x5ea28a(0x2a3)];break;case _0x1ab3fe:_0x33a1bc=this[_0x5ea28a(0x44a)];}return _0x33a1bc;}},{'key':_0x41470a(0x1cf),'value':function(_0x46c4c9,_0x3fd11a,_0x1dc6f8){var _0x5c215d=_0x41470a;switch(_0x1dc6f8){case _0x158a35:this[_0x5c215d(0x229)]=_0x46c4c9,this[_0x5c215d(0x252)]=_0x3fd11a;break;case _0x3b9975:this[_0x5c215d(0x46c)]=_0x46c4c9,this[_0x5c215d(0x4d5)]=_0x3fd11a;break;default:return _0x13949e[_0x5c215d(0x38d)];}return _0x13949e[_0x5c215d(0x4a6)];}},{'key':_0x41470a(0x3a7),'value':function(_0x602221,_0x550a34){var _0x2dac91=_0x41470a;switch(_0x602221){case _0x17dd0b:if(this['b3DPort'])return _0x13949e['SR_ERR_NOT_SUPPORT'];break;case _0x45c70b:if(!this[_0x2dac91(0x367)])return _0x13949e['SR_ERR_NOT_SUPPORT'];Math[_0x2dac91(0x1e6)](+_0x550a34)<_0x3e9a49?this[_0x2dac91(0x3dd)]=!0x1:this[_0x2dac91(0x3dd)]=!0x0;break;default:return _0x13949e['SR_ERR_NOT_SUPPORT'];}return _0x13949e['SR_OK'];}},{'key':_0x41470a(0x4a2),'value':function(_0xe205e6,_0x20791a){var _0x1c3566=_0x41470a;return null==this[_0x1c3566(0x292)]?_0x13949e['SR_ERR_CALL_ORDER']:this['pFishParamManager'][_0x1c3566(0x52c)](_0xe205e6,_0x20791a);}},{'key':_0x41470a(0x222),'value':function(_0x29e130,_0x2e3087){var _0x540248=_0x41470a;return null==this['pFishParamManager']?_0x13949e[_0x540248(0x2cf)]:this['pFishParamManager'][_0x540248(0x1f6)](_0x29e130,_0x2e3087);}},{'key':_0x41470a(0x235),'value':function(_0x5a6d67){var _0x55929a=_0x41470a;return null==this[_0x55929a(0x292)]?_0x13949e[_0x55929a(0x2cf)]:this[_0x55929a(0x292)][_0x55929a(0x3ca)](_0x5a6d67);}},{'key':_0x41470a(0x400),'value':function(_0x12abc9,_0x117dd9){var _0x5119f3=_0x41470a;return null==this[_0x5119f3(0x292)]?_0x13949e[_0x5119f3(0x2cf)]:this['pFishParamManager'][_0x5119f3(0x533)](_0x12abc9,_0x117dd9);}}]),_0x27b1ac;}()),_0x56d25f=(function(){var _0x194ca7=_0x99d5a2;function _0x396cfd(){var _0xc5ce7f=a0_0x1593;_0x160316(this,_0x396cfd),this[_0xc5ce7f(0x42d)]=null,this[_0xc5ce7f(0x51e)]=null,this[_0xc5ce7f(0x45f)]=0x0,this[_0xc5ce7f(0x3d7)]=0x0,this['regionSw']=0x0,this[_0xc5ce7f(0x206)]=0x0,this[_0xc5ce7f(0x1fc)]=!0x1,this['bAntialias']=!0x1,this[_0xc5ce7f(0x3fa)]=!0x1;}return _0x5a3b91(_0x396cfd,[{'key':'SR_Init','value':function(_0x4f15ab){var _0x143e71=a0_0x1593;this[_0x143e71(0x42d)]=_0x4f15ab,this['ctx']=this['canvas'][_0x143e71(0x2b2)]('2d'),this[_0x143e71(0x51e)]||console['log'](_0x143e71(0x236));}},{'key':_0x194ca7(0x28d),'value':function(_0x5f4a25){var _0x315fd6=_0x194ca7;this[_0x315fd6(0x1fc)]?this['ctx'][_0x315fd6(0x283)](_0x5f4a25,this['regionSx'],this[_0x315fd6(0x3d7)],this['regionSw'],this[_0x315fd6(0x206)],0x0,0x0,this[_0x315fd6(0x42d)][_0x315fd6(0x36f)],this['canvas'][_0x315fd6(0x483)]):this[_0x315fd6(0x51e)][_0x315fd6(0x283)](_0x5f4a25,0x0,0x0,_0x5f4a25['displayWidth'],_0x5f4a25['displayHeight'],0x0,0x0,this['canvas'][_0x315fd6(0x36f)],this[_0x315fd6(0x42d)][_0x315fd6(0x483)]);}},{'key':_0x194ca7(0x41e),'value':function(_0xfa3fbc){return 0x0;}},{'key':'SR_AddSubPort','value':function(_0x37b347){return 0x0;}},{'key':'SR_SetDisplayRect','value':function(_0x1b52b1,_0x25a882,_0x4089d7,_0x57c4c0){var _0x35e773=_0x194ca7;this['regionSx']=_0x1b52b1,this[_0x35e773(0x3d7)]=_0x25a882,this[_0x35e773(0x214)]=_0x4089d7,this[_0x35e773(0x206)]=_0x57c4c0,this[_0x35e773(0x1fc)]=!0x0;}},{'key':_0x194ca7(0x4b2),'value':function(){var _0x1354c2=_0x194ca7;this['canvas']=null,this[_0x1354c2(0x51e)]=null,this[_0x1354c2(0x45f)]=0x0,this[_0x1354c2(0x3d7)]=0x0,this[_0x1354c2(0x214)]=0x0,this[_0x1354c2(0x206)]=0x0,this[_0x1354c2(0x1fc)]=!0x1;}},{'key':_0x194ca7(0x375),'value':function(_0x2a45c5,_0x4547c6){var _0x457b41=_0x194ca7;this[_0x457b41(0x42d)][_0x457b41(0x36f)]=_0x2a45c5,this[_0x457b41(0x42d)]['height']=_0x4547c6;}},{'key':'SR_GetCanvasSize','value':function(){var _0x383cab=_0x194ca7;console[_0x383cab(0x514)](_0x383cab(0x4bb)+this[_0x383cab(0x42d)][_0x383cab(0x36f)]+_0x383cab(0x254)+this[_0x383cab(0x42d)][_0x383cab(0x483)]);}},{'key':_0x194ca7(0x49d),'value':function(_0x515c7b){var _0x3308cd=_0x194ca7;return _0x515c7b!=this[_0x3308cd(0x4a5)]?(this['bAntialias']=_0x515c7b,this['bRecreateAntia']=!0x0):this['bRecreateAntia']=!0x1,this[_0x3308cd(0x3fa)]&&(this['bAntialias']?(this[_0x3308cd(0x42d)]['width']=0x5*this[_0x3308cd(0x42d)]['width'],this[_0x3308cd(0x42d)][_0x3308cd(0x483)]=0x5*this[_0x3308cd(0x42d)][_0x3308cd(0x483)],this['canvas'][_0x3308cd(0x21e)]['transform']=_0x3308cd(0x262)):(this['canvas'][_0x3308cd(0x36f)]=this[_0x3308cd(0x42d)][_0x3308cd(0x36f)]/0x5,this[_0x3308cd(0x42d)][_0x3308cd(0x483)]=this[_0x3308cd(0x42d)][_0x3308cd(0x483)]/0x5,this[_0x3308cd(0x42d)][_0x3308cd(0x21e)]['transform']=_0x3308cd(0x51f)),this['canvas'][_0x3308cd(0x21e)]['transformOrigin']=_0x3308cd(0x2f0)),0x1;}}]),_0x396cfd;}()),_0x30e60b=(function(){var _0x22f0ab=_0x99d5a2;function _0x92cc8d(){var _0x4f934c=a0_0x1593;_0x160316(this,_0x92cc8d),this[_0x4f934c(0x3ee)]=[],this[_0x4f934c(0x45b)]=[],this[_0x4f934c(0x1ee)]=[],this[_0x4f934c(0x320)]=[],this['pPTZSetColor']=null,this[_0x4f934c(0x43d)]=[],this[_0x4f934c(0x21c)]=[],this[_0x4f934c(0x538)]=[],this[_0x4f934c(0x371)]=[],this['pBasePTZPoints']=[],this[_0x4f934c(0x3ab)]=[],this[_0x4f934c(0x47b)]=[],this[_0x4f934c(0x4bc)]=[],this[_0x4f934c(0x334)]=_0x366953,this[_0x4f934c(0x1f8)]=0x0,this[_0x4f934c(0x3aa)]=0x1,this[_0x4f934c(0x34c)]=0x0,this[_0x4f934c(0x4ed)]=0x1,this[_0x4f934c(0x40f)]=!0x1,this[_0x4f934c(0x22d)]=[],this[_0x4f934c(0x3bb)]=[],this[_0x4f934c(0x270)]=-0x1,this[_0x4f934c(0x344)]=0x0,this[_0x4f934c(0x3ae)]=[],this[_0x4f934c(0x447)]=[],this['nPTZDisplayMode']=_0x46c232;for(var _0xf4bb4d=0x0;_0xf4bb4d<0x20;++_0xf4bb4d){this[_0x4f934c(0x3ee)][_0xf4bb4d]=!0x1,this[_0x4f934c(0x447)][_0xf4bb4d]=!0x1,this['pRenderParam'][_0xf4bb4d]=[],this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x265)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d]['fSinH']=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x405)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d]['fSinV']=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x314)]=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x3f4)]=0x0,this['pRenderParam'][_0xf4bb4d]['fRX1']=0x0,this['pRenderParam'][_0xf4bb4d][_0x4f934c(0x3aa)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x34c)]=0x0,this['pRenderParam'][_0xf4bb4d][_0x4f934c(0x4ed)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d]['nDisplayEffect']=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d]['bBlack']=!0x1,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x324)]=!0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d]=[],this[_0x4f934c(0x1ee)][_0xf4bb4d]['nFishParamType']=0x0,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x27e)]=0x0,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x469)]=0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x2bb)]=0x0,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x2e9)]=0x1,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x40f)]=!0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d]['bCut']=!0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x314)]=0x0,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x3f4)]=0x0,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x3d6)]=0.5,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x40c)]=0.5,this[_0x4f934c(0x320)][_0xf4bb4d]=[],this[_0x4f934c(0x320)][_0xf4bb4d]['fR']=0x0,this[_0x4f934c(0x320)][_0xf4bb4d]['fG']=0x0,this['stPTZColor'][_0xf4bb4d]['fB']=0x0,this[_0x4f934c(0x320)][_0xf4bb4d]['fA']=0x0,this['nBasePTZPointNum'][_0xf4bb4d]=0x0,this[_0x4f934c(0x21c)][_0xf4bb4d]=0x0,this[_0x4f934c(0x538)][_0xf4bb4d]=0x0,this['nPTZRectNum'][_0xf4bb4d]=0x0,this[_0x4f934c(0x3ab)][_0xf4bb4d]=[],this[_0x4f934c(0x47b)][_0xf4bb4d]=[],this[_0x4f934c(0x3bb)][_0xf4bb4d]=[],this[_0x4f934c(0x22d)][_0xf4bb4d]=[];for(var _0x28d702=0x0;_0x28d702<0x4;++_0x28d702)this['pRectPoints'][_0xf4bb4d][_0x28d702]=[],this[_0x4f934c(0x47b)][_0xf4bb4d][_0x28d702]['fX']=0x0,this['pRectPoints'][_0xf4bb4d][_0x28d702]['fY']=0x0;for(var _0xbb769f=0x0;_0xbb769f<0x400;++_0xbb769f)this[_0x4f934c(0x3bb)][_0xf4bb4d][_0xbb769f]=[],this[_0x4f934c(0x3bb)][_0xf4bb4d][_0xbb769f]['fX']=0x0,this[_0x4f934c(0x3bb)][_0xf4bb4d][_0xbb769f]['fY']=0x0,this[_0x4f934c(0x22d)][_0xf4bb4d][_0xbb769f]=[],this[_0x4f934c(0x22d)][_0xf4bb4d][_0xbb769f]['fX']=0x0,this[_0x4f934c(0x22d)][_0xf4bb4d][_0xbb769f]['fY']=0x0,this[_0x4f934c(0x3ab)][_0xf4bb4d][_0xbb769f]=[],this[_0x4f934c(0x3ab)][_0xf4bb4d][_0xbb769f]['fX']=0x0,this[_0x4f934c(0x3ab)][_0xf4bb4d][_0xbb769f]['fY']=0x0;this[_0x4f934c(0x371)][_0xf4bb4d]=0x0,this[_0x4f934c(0x3ae)][_0xf4bb4d]=[];for(var _0x1897e7=0x0;_0x1897e7<0x64;++_0x1897e7)this[_0x4f934c(0x3ae)][_0xf4bb4d][_0x1897e7]=0x0;}this[_0x4f934c(0x331)]();}return _0x5a3b91(_0x92cc8d,[{'key':_0x22f0ab(0x276),'value':function(_0x56bf04){var _0x87e280=_0x22f0ab;for(var _0x2a3532=-0x1,_0x3e7f70=0x0;_0x3e7f70<0x20;++_0x3e7f70)if(0x0==this[_0x87e280(0x3ee)][_0x3e7f70]){_0x2a3532=_0x3e7f70;break;}if(-0x1!=_0x2a3532){var _0x4f8a2f=this['JudgeDisplayEffect'](_0x56bf04);if(_0x13949e[_0x87e280(0x4a6)]!=_0x4f8a2f)return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;if(_0x3468da['SR_DE_FISH_PANORAMA_CEILING_360']==_0x56bf04||_0x3468da[_0x87e280(0x4f5)]==_0x56bf04||_0x3468da[_0x87e280(0x2f5)]==_0x56bf04||_0x3468da[_0x87e280(0x3a8)]==_0x56bf04||_0x3468da['SR_DE_FISH_PANORAMA_WALL']==_0x56bf04||_0x3468da[_0x87e280(0x224)]==_0x56bf04){if(-0x1!=this[_0x87e280(0x270)])return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;this['nWndPort']=_0x2a3532;}if(!(_0x3468da[_0x87e280(0x2b7)]!=_0x56bf04&&_0x3468da[_0x87e280(0x4c2)]!=_0x56bf04&&_0x3468da['SR_DE_FISH_PTZ_WALL']!=_0x56bf04||-0x1==this[_0x87e280(0x270)]||null==this['pRenderParam'][this[_0x87e280(0x270)]]||_0x3468da[_0x87e280(0x4f5)]!=this['pRenderParam'][this[_0x87e280(0x270)]][_0x87e280(0x1fe)]&&_0x3468da[_0x87e280(0x3a8)]!=this[_0x87e280(0x45b)][this[_0x87e280(0x270)]][_0x87e280(0x1fe)]))return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;if(_0x3468da[_0x87e280(0x4f5)]==_0x56bf04||_0x3468da[_0x87e280(0x3a8)]==_0x56bf04){for(var _0x3cbb7b=0x0;_0x3cbb7b<0x20;++_0x3cbb7b)if(null!=this[_0x87e280(0x45b)][_0x3cbb7b]&&(_0x3468da[_0x87e280(0x2b7)]==this[_0x87e280(0x45b)][_0x3cbb7b][_0x87e280(0x1fe)]||_0x3468da[_0x87e280(0x4c2)]==this['pRenderParam'][_0x3cbb7b]['nDisplayEffect']||_0x3468da[_0x87e280(0x4bf)]==this[_0x87e280(0x45b)][_0x3cbb7b][_0x87e280(0x1fe)]))return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;}if(_0x3468da['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x56bf04){for(var _0x31b750=0x0;_0x31b750<0x20;++_0x31b750)if(null!=this['pRenderParam'][_0x31b750]&&_0x3468da[_0x87e280(0x26f)]==this['pRenderParam'][_0x31b750][_0x87e280(0x1fe)])return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;}if(_0x3468da[_0x87e280(0x26f)]==_0x56bf04){for(var _0x2938a6=0x0;_0x2938a6<0x20;++_0x2938a6)if(null!=this[_0x87e280(0x45b)][_0x2938a6]&&_0x3468da[_0x87e280(0x36e)]==this[_0x87e280(0x45b)][_0x2938a6][_0x87e280(0x1fe)])return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;}this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x265)]=0x1,this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x2ee)]=0x0,this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x405)]=0x1,this[_0x87e280(0x45b)][_0x2a3532]['fSinH']=0x0,this['pRenderParam'][_0x2a3532][_0x87e280(0x314)]=0x0,this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x1f8)]=this[_0x87e280(0x1f8)],this['pRenderParam'][_0x2a3532][_0x87e280(0x3aa)]=this[_0x87e280(0x3aa)],this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x34c)]=this[_0x87e280(0x34c)],this['pRenderParam'][_0x2a3532][_0x87e280(0x4ed)]=this['fRY2'],this[_0x87e280(0x45b)][_0x2a3532]['bBlack']=this[_0x87e280(0x40f)],this['pRenderParam'][_0x2a3532][_0x87e280(0x3f4)]=0.035+0.8,this[_0x87e280(0x45b)][_0x2a3532]['nDisplayEffect']=_0x56bf04,this['pFishParam'][_0x2a3532][_0x87e280(0x314)]=this['pRenderParam'][_0x2a3532][_0x87e280(0x314)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x3d6)]=0.5,this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x40c)]=0.5,this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x27e)]=this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x1f8)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x469)]=this['pRenderParam'][_0x2a3532][_0x87e280(0x3aa)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x2bb)]=this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x34c)],this['pFishParam'][_0x2a3532][_0x87e280(0x2e9)]=this['pRenderParam'][_0x2a3532]['fRY2'],this[_0x87e280(0x1ee)][_0x2a3532]['bBlack']=this['pRenderParam'][_0x2a3532][_0x87e280(0x40f)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x3f4)]=(this[_0x87e280(0x45b)][_0x2a3532]['fZoom']-0.8)/0x7,this['bPortAllocated'][_0x2a3532]=!0x0;}return _0x2a3532;}},{'key':_0x22f0ab(0x32d),'value':function(_0x19122a){var _0x44bf54=_0x22f0ab;if(_0x19122a<0x0||0x20<=_0x19122a)return _0x13949e[_0x44bf54(0x203)];this[_0x44bf54(0x270)]==_0x19122a&&(this['nWndPort']=-0x1),this['pRenderParam'][_0x19122a][_0x44bf54(0x265)]=0x1,this['pRenderParam'][_0x19122a][_0x44bf54(0x2ee)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x405)]=0x1,this['pRenderParam'][_0x19122a][_0x44bf54(0x3e0)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x314)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x3f4)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x1f8)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x3aa)]=0x1,this['pRenderParam'][_0x19122a][_0x44bf54(0x34c)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x4ed)]=0x1,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x1fe)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x40f)]=!0x1,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x324)]=!0x1,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x260)]=0x0,this[_0x44bf54(0x1ee)][_0x19122a]['fRXLeft']=0x0,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x469)]=0x1,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x2bb)]=0x0,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x2e9)]=0x1,this[_0x44bf54(0x1ee)][_0x19122a]['bBlack']=!0x1,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x324)]=!0x1,this['pFishParam'][_0x19122a]['fAngle']=0x0,this[_0x44bf54(0x1ee)][_0x19122a]['fZoom']=0x0,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x3d6)]=0.5,this['pFishParam'][_0x19122a][_0x44bf54(0x40c)]=0.5,this['nBasePTZPointNum'][_0x19122a]=0x0,this[_0x44bf54(0x21c)][_0x19122a]=0x0,this[_0x44bf54(0x538)][_0x19122a]=0x0;for(var _0x3f4ea3=this[_0x44bf54(0x4bc)][_0x19122a]=0x0;_0x3f4ea3<0x4;++_0x3f4ea3)this[_0x44bf54(0x47b)][_0x19122a][_0x3f4ea3]['fX']=0x0,this[_0x44bf54(0x47b)][_0x19122a][_0x3f4ea3]['fY']=0x0;for(var _0x3d5dd5=0x0;_0x3d5dd5<0x400;++_0x3d5dd5)this['pBasePTZPoints'][_0x19122a][_0x3d5dd5]['fX']=0x0,this[_0x44bf54(0x3bb)][_0x19122a][_0x3d5dd5]['fY']=0x0,this[_0x44bf54(0x22d)][_0x19122a][_0x3d5dd5]['fX']=0x0,this[_0x44bf54(0x22d)][_0x19122a][_0x3d5dd5]['fY']=0x0,this['pPanoPTZPoints'][_0x19122a][_0x3d5dd5]['fX']=0x0,this['pPanoPTZPoints'][_0x19122a][_0x3d5dd5]['fY']=0x0;if(null!=this[_0x44bf54(0x3eb)]&&(this[_0x44bf54(0x3eb)][_0x19122a]['fA']=0x0,this['pPTZSetColor'][_0x19122a]['fR']=0x0,this[_0x44bf54(0x3eb)][_0x19122a]['fG']=0x0,this[_0x44bf54(0x3eb)][_0x19122a]['fB']=0x0),this['bPTZSelected'][_0x19122a]=!0x1,0x0!=this['nPlaceType']){var _0x188ac5=!0x1;if(null!=this['pRenderParam'][i]){for(var _0x565c4d=0x0;_0x565c4d<0x20;++_0x565c4d)if(null!=this[_0x44bf54(0x45b)][_0x565c4d]&&(_0x3468da[_0x44bf54(0x2b7)]==this['pRenderParam'][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da['SR_DE_FISH_PTZ_FLOOR']==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x4bf)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x208)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da['SR_DE_FISH_PANORAMA_CEILING_180']==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x2f5)]==this[_0x44bf54(0x45b)][_0x565c4d]['nDisplayEffect']||_0x3468da[_0x44bf54(0x3a8)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x33c)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x4dc)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x3a9)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x3f3)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x4f9)]==this['pRenderParam'][_0x565c4d]['nDisplayEffect']||_0x3468da[_0x44bf54(0x36e)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)])){_0x188ac5=!0x0;break;}}_0x188ac5||(this['nPlaceType']=0x0);}for(var _0x6f6c24=!0x1,_0x2650a4=0x0;_0x2650a4<0x20;++_0x2650a4)if(null!=this['pRenderParam'][_0x2650a4]){_0x6f6c24=!0x0;break;}_0x6f6c24||(this[_0x44bf54(0x1f8)]=0x0,this[_0x44bf54(0x3aa)]=0x1,this[_0x44bf54(0x34c)]=0x0,this[_0x44bf54(0x4ed)]=0x1,this['bBlack']=!0x1);for(var _0x2d2ee9=this[_0x44bf54(0x371)][_0x19122a]=0x0;_0x2d2ee9<0x64;++_0x2d2ee9)this[_0x44bf54(0x3ae)][_0x19122a][_0x2d2ee9]=0x0;return this[_0x44bf54(0x3ee)][_0x19122a]=!0x1,_0x13949e[_0x44bf54(0x4a6)];}},{'key':'DeInit','value':function(){var _0x19548c=_0x22f0ab;for(var _0xcd4be7=0x0;_0xcd4be7<0x20;++_0xcd4be7){for(var _0x52fa88=0x0;_0x52fa88<0x4;++_0x52fa88)this[_0x19548c(0x47b)][_0xcd4be7][_0x52fa88]=null;for(var _0xcd362f=0x0;_0xcd362f<0x400;++_0xcd362f)this[_0x19548c(0x3bb)][_0xcd4be7][_0xcd362f]=null,this[_0x19548c(0x22d)][_0xcd4be7][_0xcd362f]=null,this[_0x19548c(0x3ab)][_0xcd4be7][_0xcd362f]=null;this[_0x19548c(0x371)][_0xcd4be7]=0x0,this[_0x19548c(0x3ae)][_0xcd4be7]=null,this[_0x19548c(0x3ee)][_0xcd4be7]=!0x1,this[_0x19548c(0x447)][_0xcd4be7]=!0x1,this[_0x19548c(0x45b)][_0xcd4be7]=null,this['pFishParam'][_0xcd4be7]=null,this[_0x19548c(0x320)][_0xcd4be7]=null,this[_0x19548c(0x43d)][_0xcd4be7]=0x0,this['nOriPTZPointNum'][_0xcd4be7]=0x0,this[_0x19548c(0x538)][_0xcd4be7]=0x0,this[_0x19548c(0x4bc)][_0xcd4be7]=0x0,this[_0x19548c(0x3ab)][_0xcd4be7]=null,this[_0x19548c(0x47b)][_0xcd4be7]=null,this[_0x19548c(0x3bb)][_0xcd4be7]=null,this['pOriPTZPoints'][_0xcd4be7]=null;}this[_0x19548c(0x3ee)]=null,this[_0x19548c(0x45b)]=null,this['pFishParam']=null,this[_0x19548c(0x320)]=null,this[_0x19548c(0x3eb)]=null,this['nBasePTZPointNum']=null,this['nOriPTZPointNum']=null,this[_0x19548c(0x538)]=null,this[_0x19548c(0x371)]=null,this[_0x19548c(0x3bb)]=null,this[_0x19548c(0x3ab)]=null,this[_0x19548c(0x47b)]=null,this['nPTZRectNum']=null,this['nPTZDisplayMode']=_0x366953,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this[_0x19548c(0x4ed)]=0x1,this[_0x19548c(0x40f)]=!0x1,this[_0x19548c(0x22d)]=null,this[_0x19548c(0x3bb)]=null,this[_0x19548c(0x270)]=-0x1,this[_0x19548c(0x344)]=0x0,this[_0x19548c(0x3ae)]=null,this[_0x19548c(0x447)]=null,this[_0x19548c(0x334)]=_0x46c232;}},{'key':'InitColorList','value':function(){var _0x32ea58=_0x22f0ab;this[_0x32ea58(0x320)][0x0]['fR']=0.5,this[_0x32ea58(0x320)][0x0]['fG']=0.5,this['stPTZColor'][0x0]['fB']=0x0,this[_0x32ea58(0x320)][0x0]['fA']=0x1,this[_0x32ea58(0x320)][0x1]['fR']=0x1,this[_0x32ea58(0x320)][0x1]['fG']=0x0,this['stPTZColor'][0x1]['fB']=0x0,this[_0x32ea58(0x320)][0x1]['fA']=0x1,this[_0x32ea58(0x320)][0x2]['fR']=0x0,this[_0x32ea58(0x320)][0x2]['fG']=0x1,this[_0x32ea58(0x320)][0x2]['fB']=0x0,this[_0x32ea58(0x320)][0x2]['fA']=0x1,this[_0x32ea58(0x320)][0x3]['fR']=0x0,this['stPTZColor'][0x3]['fG']=0x0,this[_0x32ea58(0x320)][0x3]['fB']=0x1,this['stPTZColor'][0x3]['fA']=0x1,this[_0x32ea58(0x320)][0x4]['fR']=0x1,this['stPTZColor'][0x4]['fG']=0x1,this[_0x32ea58(0x320)][0x4]['fB']=0x0,this[_0x32ea58(0x320)][0x4]['fA']=0x1,this[_0x32ea58(0x320)][0x5]['fR']=0.5,this['stPTZColor'][0x5]['fG']=0x0,this[_0x32ea58(0x320)][0x5]['fB']=0x1,this[_0x32ea58(0x320)][0x5]['fA']=0x1,this['stPTZColor'][0x6]['fR']=0x0,this[_0x32ea58(0x320)][0x6]['fG']=0x1,this[_0x32ea58(0x320)][0x6]['fB']=0x1,this[_0x32ea58(0x320)][0x6]['fA']=0x1,this[_0x32ea58(0x320)][0x7]['fR']=0x1,this['stPTZColor'][0x7]['fG']=0.5,this[_0x32ea58(0x320)][0x7]['fB']=0x0,this[_0x32ea58(0x320)][0x7]['fA']=0x1,this[_0x32ea58(0x320)][0x8]['fR']=0x0,this['stPTZColor'][0x8]['fG']=0.5,this[_0x32ea58(0x320)][0x8]['fB']=0.5,this[_0x32ea58(0x320)][0x8]['fA']=0x1;for(var _0x4bf059=0x9;_0x4bf059<0x20;_0x4bf059++)this['stPTZColor'][_0x4bf059]['fR']=+_0x4bf059/0x20,this[_0x32ea58(0x320)][_0x4bf059]['fG']=+_0x4bf059/0x20,this[_0x32ea58(0x320)][_0x4bf059]['fB']=+_0x4bf059/0x20,this[_0x32ea58(0x320)][_0x4bf059]['fA']=0x1;return _0x13949e['SR_OK'];}},{'key':'GetRangePoints','value':function(_0x300580){var _0x1c92d6=_0x22f0ab;if(_0x300580<0x0||0x20<=_0x300580)return _0x13949e['SR_ERR_PARAM'];if(null==this[_0x1c92d6(0x45b)][_0x300580])return _0x13949e[_0x1c92d6(0x2cf)];var _0x31586b=0x0,_0x5c2563=0x0;switch(this[_0x1c92d6(0x21c)][_0x300580]=0x0,this[_0x1c92d6(0x43d)][_0x300580]=0x0,this[_0x1c92d6(0x45b)][_0x300580][_0x1c92d6(0x1fe)]){case _0x3468da['SR_DE_FISH_PTZ_CEILING']:for(_0x5c2563=0x0;_0x5c2563<0x1;_0x5c2563+=0.01)this[_0x1c92d6(0x1eb)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0.9995,_0x31586b=0x0;_0x31586b<0x1;_0x31586b+=0.02)this[_0x1c92d6(0x1eb)](_0x31586b,_0x5c2563,_0x300580);for(_0x31586b=0.999,_0x5c2563=0.9995;0x0<=_0x5c2563;_0x5c2563-=0.01)this[_0x1c92d6(0x1eb)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0x0,_0x31586b=0.999;0x0<=_0x31586b;_0x31586b-=0.02)this['GetFishPTZCeiling'](_0x31586b,_0x5c2563,_0x300580);break;case _0x3468da[_0x1c92d6(0x4c2)]:for(_0x5c2563=0x0;_0x5c2563<0x1;_0x5c2563+=0.01)this[_0x1c92d6(0x486)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0.9995,_0x31586b=0x0;_0x31586b<0x1;_0x31586b+=0.02)this['GetFishPTZFloor'](_0x31586b,_0x5c2563,_0x300580);for(_0x31586b=0.999,_0x5c2563=0.9995;0x0<=_0x5c2563;_0x5c2563-=0.01)this['GetFishPTZFloor'](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0x0,_0x31586b=0.999;0x0<=_0x31586b;_0x31586b-=0.02)this['GetFishPTZFloor'](_0x31586b,_0x5c2563,_0x300580);break;case _0x3468da[_0x1c92d6(0x4bf)]:for(_0x5c2563=0x0;_0x5c2563<0x1;_0x5c2563+=0.01)this['GetFishPTZWALL'](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0.9995,_0x31586b=0x0;_0x31586b<0x1;_0x31586b+=0.02)this[_0x1c92d6(0x25e)](_0x31586b,_0x5c2563,_0x300580);for(_0x31586b=0.999,_0x5c2563=0.9995;0x0<=_0x5c2563;_0x5c2563-=0.01)this[_0x1c92d6(0x25e)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0x0,_0x31586b=0.999;0x0<=_0x31586b;_0x31586b-=0.02)this[_0x1c92d6(0x25e)](_0x31586b,_0x5c2563,_0x300580);}return _0x13949e[_0x1c92d6(0x4a6)];}},{'key':_0x22f0ab(0x38f),'value':function(_0x1509b5){var _0x4d100a=_0x22f0ab;if(-0x1==this[_0x4d100a(0x270)])return _0x13949e[_0x4d100a(0x2cf)];if(null==this[_0x4d100a(0x3bb)][_0x1509b5]||null==this['pRenderParam'][this[_0x4d100a(0x270)]])return _0x13949e['SR_ERR_CALL_ORDER'];this[_0x4d100a(0x538)][_0x1509b5]=0x0;var _0x6702aa=_0x13949e['SR_OK'],_0x38fa33=this['nWndPort'];switch(this[_0x4d100a(0x45b)][_0x38fa33][_0x4d100a(0x1fe)]){case _0x3468da['SR_DE_FISH_PANORAMA_WALL']:if(_0x6702aa=this[_0x4d100a(0x4e2)](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)]!=_0x6702aa)return _0x6702aa;break;case _0x3468da['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x6702aa=this[_0x4d100a(0x490)](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)]!=_0x6702aa)return _0x6702aa;break;case _0x3468da[_0x4d100a(0x208)]:if(_0x6702aa=this[_0x4d100a(0x220)](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)]!=_0x6702aa)return _0x6702aa;break;default:return _0x13949e[_0x4d100a(0x38d)];}return this['CalcPTZFragmentPoints'](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)];}},{'key':'GetRectPoints','value':function(_0x32f114){var _0x248c9f=_0x22f0ab;if(_0x32f114<0x0||0x20<=_0x32f114)return _0x13949e[_0x248c9f(0x203)];if(-0x1==this[_0x248c9f(0x270)])return _0x13949e[_0x248c9f(0x2cf)];if(null==this[_0x248c9f(0x45b)][this[_0x248c9f(0x270)]]||null==this['pFishParam'][_0x32f114])return _0x13949e[_0x248c9f(0x2cf)];var _0xefc3=this[_0x248c9f(0x45b)][this['nWndPort']]['nDisplayEffect'],_0x195b20=_0x13949e['SR_OK'],_0x3c0e67=[];switch(_0x3c0e67['fX']=0x0,_0x3c0e67['fY']=0x0,_0xefc3){case _0x3468da['SR_DE_FISH_PANORAMA_WALL']:if(_0x195b20=this[_0x248c9f(0x3bd)](_0x3c0e67,this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x3d6)],this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)]),_0x13949e[_0x248c9f(0x4a6)]!=_0x195b20)return _0x195b20;break;case _0x3468da[_0x248c9f(0x2f5)]:if(_0x195b20=this['GetPointFish2PanoFloor'](_0x3c0e67,this[_0x248c9f(0x1ee)][_0x32f114]['fPTZX'],this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)]),_0x13949e[_0x248c9f(0x4a6)]!=_0x195b20)return _0x13949e['SR_ERR_NOT_SUPPORT']==_0x195b20&&(this[_0x248c9f(0x47b)][_0x32f114]=null),_0x195b20;break;case _0x3468da['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x195b20=this[_0x248c9f(0x523)](_0x3c0e67,this[_0x248c9f(0x1ee)][_0x32f114]['fPTZX'],this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)]),_0x13949e['SR_OK']!=_0x195b20)return _0x13949e[_0x248c9f(0x38d)]==_0x195b20&&(this[_0x248c9f(0x47b)][_0x32f114]=null),_0x195b20;break;case _0x3468da[_0x248c9f(0x224)]:_0x3c0e67['fX']=this[_0x248c9f(0x1ee)][_0x32f114]['fPTZX'],_0x3c0e67['fY']=this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)];break;default:return _0x13949e[_0x248c9f(0x38d)];}if(null==this[_0x248c9f(0x47b)][_0x32f114]){this['pRectPoints'][_0x32f114]=[];for(var _0x1a8285=0x0;_0x1a8285<0x4;++_0x1a8285)this[_0x248c9f(0x47b)][_0x32f114][_0x1a8285]=[],this[_0x248c9f(0x47b)][_0x32f114][_0x1a8285]['fX']=0x0,this['pRectPoints'][_0x32f114][_0x1a8285]['fY']=0x0;}return this[_0x248c9f(0x47b)][_0x32f114][0x0]['fX']=_0x3c0e67['fX']-_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x0]['fY']=_0x3c0e67['fY']-_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x1]['fX']=_0x3c0e67['fX']+_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x1]['fY']=_0x3c0e67['fY']-_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x2]['fX']=_0x3c0e67['fX']+_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x2]['fY']=_0x3c0e67['fY']+_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x3]['fX']=_0x3c0e67['fX']-_0x473777,this['pRectPoints'][_0x32f114][0x3]['fY']=_0x3c0e67['fY']+_0x473777,this[_0x248c9f(0x4bc)][_0x32f114]=0x4,_0x13949e['SR_OK'];}},{'key':_0x22f0ab(0x1eb),'value':function(_0xc4cf39,_0x3e0af4,_0x5dd1d0){var _0x3866dc=_0x22f0ab,_0x449b7d=[],_0x25a237=(_0x449b7d['fX']=0x0,_0x449b7d['fY']=0x0,[]),_0x128fe1=(_0x25a237['fX']=0x0,_0x25a237['fY']=0x0,[]),_0x8e09c3=(_0x128fe1['fX']=0x0,_0x128fe1['fY']=0x0,[]),_0x124c1c=(this['fRX2']-this[_0x3866dc(0x1f8)])/(this['fRY2']-this['fRY1']),_0x42c2aa=(this[_0x3866dc(0x1f8)]+this[_0x3866dc(0x3aa)])/0x2*0x1,_0x5ab76b=(this[_0x3866dc(0x34c)]+this[_0x3866dc(0x4ed)])/0x2*_0x124c1c,_0x48241c=(this[_0x3866dc(0x3aa)]-this['fRX1'])/0x2*0x1,_0xc4cf39=(_0x449b7d['fX']=_0x3e0af4-0.5,_0x449b7d['fY']=0.5-_0xc4cf39,_0x3e0af4=this['pRenderParam'][_0x5dd1d0]['fZoom'],_0x25a237['fX']=_0x449b7d['fX'],_0x25a237['fY']=_0x449b7d['fY']*this['pRenderParam'][_0x5dd1d0][_0x3866dc(0x405)]+_0x3e0af4*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x3e0)],_0x3e0af4*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x405)]-_0x449b7d['fY']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x3e0)]),_0x3e0af4=Math[_0x3866dc(0x41c)](_0x25a237['fX']*_0x25a237['fX']+_0x25a237['fY']*_0x25a237['fY']),_0x449b7d=Math[_0x3866dc(0x41c)](_0x25a237['fX']*_0x25a237['fX']+_0x25a237['fY']*_0x25a237['fY']+_0xc4cf39*_0xc4cf39),_0xc4cf39=Math['asin'](_0x3e0af4/_0x449b7d)/1.5707963*0.5,_0x449b7d=(_0x25a237['fX']=_0xc4cf39*_0x25a237['fX']/_0x3e0af4,_0x25a237['fY']=_0xc4cf39*_0x25a237['fY']/_0x3e0af4,_0x128fe1['fX']=_0x25a237['fX']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x265)]-_0x25a237['fY']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x2ee)],_0x128fe1['fY']=_0x25a237['fX']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x2ee)]+_0x25a237['fY']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x265)],_0x8e09c3['fX']=0x2*_0x128fe1['fX']*_0x48241c+_0x42c2aa,_0x8e09c3['fY']=0x2*-_0x128fe1['fY']*_0x48241c+_0x5ab76b,this[_0x3866dc(0x43d)][_0x5dd1d0]),_0xc4cf39=(this[_0x3866dc(0x3bb)][_0x5dd1d0][_0x449b7d]['fX']=_0x128fe1['fX']+0.5,this[_0x3866dc(0x3bb)][_0x5dd1d0][_0x449b7d]['fY']=0.5-_0x128fe1['fY'],this[_0x3866dc(0x43d)][_0x5dd1d0]=this[_0x3866dc(0x43d)][_0x5dd1d0]+0x1,this[_0x3866dc(0x1f8)]<=0x0?0x0:+this[_0x3866dc(0x1f8)]),_0x3e0af4=this[_0x3866dc(0x34c)]<=0x0?0x0:this[_0x3866dc(0x34c)]*_0x124c1c,_0x25a237=0x1<=this[_0x3866dc(0x3aa)]?0x1-_0xc4cf39:+this['fRX2']-_0xc4cf39,_0x42c2aa=0x1<=this[_0x3866dc(0x4ed)]?_0x124c1c-_0x3e0af4:this[_0x3866dc(0x4ed)]*_0x124c1c-_0x3e0af4;return _0x8e09c3['fX']=(_0x8e09c3['fX']-_0xc4cf39)/_0x25a237,_0x8e09c3['fY']=(_0x8e09c3['fY']-_0x3e0af4)/_0x42c2aa,_0x8e09c3['fX']<=0x1&&_0x8e09c3['fY']<=0x1&&0x0<=_0x8e09c3['fX']&&0x0<=_0x8e09c3['fY']&&(_0x48241c=this['nOriPTZPointNum'][_0x5dd1d0],this[_0x3866dc(0x22d)][_0x5dd1d0][_0x48241c]['fX']=_0x8e09c3['fX'],this['pOriPTZPoints'][_0x5dd1d0][_0x48241c]['fY']=_0x8e09c3['fY'],this[_0x3866dc(0x21c)][_0x5dd1d0]=this[_0x3866dc(0x21c)][_0x5dd1d0]+0x1),_0x13949e[_0x3866dc(0x4a6)];}},{'key':_0x22f0ab(0x486),'value':function(_0x328e50,_0x36324b,_0x37f64a){var _0x182c99=_0x22f0ab,_0x69f57e=[],_0x874c3c=(_0x69f57e['fX']=0x0,_0x69f57e['fY']=0x0,[]),_0x52b303=(_0x874c3c['fX']=0x0,_0x874c3c['fY']=0x0,[]),_0x5e6c32=(_0x52b303['fX']=0x0,_0x52b303['fY']=0x0,[]),_0x2a6b73=(this[_0x182c99(0x3aa)]-this[_0x182c99(0x1f8)])/(this[_0x182c99(0x4ed)]-this[_0x182c99(0x34c)]),_0x569474=(this[_0x182c99(0x1f8)]+this[_0x182c99(0x3aa)])/0x2*0x1,_0x2ea78=(this[_0x182c99(0x34c)]+this['fRY2'])/0x2*_0x2a6b73,_0x3fe769=(this[_0x182c99(0x3aa)]-this['fRX1'])/0x2*0x1,_0x36324b=(_0x69f57e['fX']=_0x328e50-0.5,_0x69f57e['fY']=_0x36324b-0.5,_0x328e50=this[_0x182c99(0x45b)][_0x37f64a]['fZoom'],_0x874c3c['fX']=_0x69f57e['fX'],_0x874c3c['fY']=_0x69f57e['fY']*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x405)]+_0x328e50*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x3e0)],_0x328e50*this[_0x182c99(0x45b)][_0x37f64a]['fCosV']-_0x69f57e['fY']*this[_0x182c99(0x45b)][_0x37f64a]['fSinV']),_0x328e50=Math[_0x182c99(0x41c)](_0x874c3c['fX']*_0x874c3c['fX']+_0x874c3c['fY']*_0x874c3c['fY']),_0x69f57e=Math['sqrt'](_0x874c3c['fX']*_0x874c3c['fX']+_0x874c3c['fY']*_0x874c3c['fY']+_0x36324b*_0x36324b),_0x36324b=Math[_0x182c99(0x2c8)](_0x328e50/_0x69f57e)/1.5707963*0.5,_0x69f57e=(_0x874c3c['fX']=_0x36324b*_0x874c3c['fX']/_0x328e50,_0x874c3c['fY']=_0x36324b*_0x874c3c['fY']/_0x328e50,_0x52b303['fX']=_0x874c3c['fX']*this['pRenderParam'][_0x37f64a]['fCosH']-_0x874c3c['fY']*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x2ee)],_0x52b303['fY']=_0x874c3c['fX']*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x2ee)]+_0x874c3c['fY']*this['pRenderParam'][_0x37f64a][_0x182c99(0x265)],_0x5e6c32['fX']=0x2*_0x52b303['fX']*_0x3fe769+_0x569474,_0x5e6c32['fY']=0x2*_0x52b303['fY']*_0x3fe769+_0x2ea78,this[_0x182c99(0x43d)][_0x37f64a]),_0x36324b=(this['pBasePTZPoints'][_0x37f64a][_0x69f57e]['fX']=_0x52b303['fX']+0.5,this[_0x182c99(0x3bb)][_0x37f64a][_0x69f57e]['fY']=_0x52b303['fY']+0.5,this[_0x182c99(0x43d)][_0x37f64a]=this[_0x182c99(0x43d)][_0x37f64a]+0x1,this['fRX1']<=0x0?0x0:+this[_0x182c99(0x1f8)]),_0x328e50=this[_0x182c99(0x34c)]<=0x0?0x0:this['fRY1']*_0x2a6b73,_0x874c3c=0x1<=this['fRX2']?0x1-_0x36324b:+this[_0x182c99(0x3aa)]-_0x36324b,_0x569474=0x1<=this[_0x182c99(0x4ed)]?_0x2a6b73-_0x328e50:this[_0x182c99(0x4ed)]*_0x2a6b73-_0x328e50;return _0x5e6c32['fX']=(_0x5e6c32['fX']-_0x36324b)/_0x874c3c,_0x5e6c32['fY']=(_0x5e6c32['fY']-_0x328e50)/_0x569474,_0x5e6c32['fX']<=0x1&&_0x5e6c32['fY']<=0x1&&0x0<=_0x5e6c32['fX']&&0x0<=_0x5e6c32['fY']&&(_0x3fe769=this[_0x182c99(0x21c)][_0x37f64a],this[_0x182c99(0x22d)][_0x37f64a][_0x3fe769]['fX']=_0x5e6c32['fX'],this[_0x182c99(0x22d)][_0x37f64a][_0x3fe769]['fY']=_0x5e6c32['fY'],this[_0x182c99(0x21c)][_0x37f64a]=this[_0x182c99(0x21c)][_0x37f64a]+0x1),_0x13949e[_0x182c99(0x4a6)];}},{'key':_0x22f0ab(0x25e),'value':function(_0x22fa02,_0x2b3be5,_0x7bfbc8){var _0x45b53a=_0x22f0ab,_0x2022f3=[],_0xd1701f=(_0x2022f3['fX']=0x0,_0x2022f3['fY']=0x0,[]),_0x19ab1c=(_0xd1701f['fX']=0x0,_0xd1701f['fY']=0x0,[]),_0x4a0a53=(_0x19ab1c['fX']=0x0,_0x19ab1c['fY']=0x0,[]),_0x243f3a=(this[_0x45b53a(0x3aa)]-this[_0x45b53a(0x1f8)])/(this[_0x45b53a(0x4ed)]-this['fRY1']),_0x1233e0=(this[_0x45b53a(0x1f8)]+this[_0x45b53a(0x3aa)])/0x2*0x1,_0x2b29d7=(this['fRY1']+this[_0x45b53a(0x4ed)])/0x2*_0x243f3a,_0x3fe90d=(this[_0x45b53a(0x3aa)]-this[_0x45b53a(0x1f8)])/0x2*0x1,_0x2b3be5=(_0x2022f3['fX']=_0x2b3be5-0.5,_0x2022f3['fY']=_0x22fa02-0.5,_0x2b3be5=this[_0x45b53a(0x45b)][_0x7bfbc8]['fZoom'],_0xd1701f['fX']=_0x2022f3['fX'],_0xd1701f['fY']=_0x2022f3['fY']*this[_0x45b53a(0x45b)][_0x7bfbc8]['fCosV']+_0x2b3be5*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x3e0)],_0x22fa02=_0x2b3be5*this['pRenderParam'][_0x7bfbc8]['fCosV']-_0x2022f3['fY']*this['pRenderParam'][_0x7bfbc8][_0x45b53a(0x3e0)],_0x19ab1c['fX']=_0xd1701f['fX']*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x265)]+_0x22fa02*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x2ee)],_0x19ab1c['fY']=_0xd1701f['fY'],_0x22fa02*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x265)]-_0xd1701f['fX']*this['pRenderParam'][_0x7bfbc8]['fSinH']),_0x2022f3=Math[_0x45b53a(0x41c)](_0x19ab1c['fX']*_0x19ab1c['fX']+_0x19ab1c['fY']*_0x19ab1c['fY']),_0x22fa02=Math[_0x45b53a(0x41c)](_0x19ab1c['fX']*_0x19ab1c['fX']+_0x19ab1c['fY']*_0x19ab1c['fY']+_0x2b3be5*_0x2b3be5),_0xd1701f=Math[_0x45b53a(0x2c8)](_0x2022f3/_0x22fa02)/1.5707963*0.5,_0x2b3be5=(_0x4a0a53['fX']=_0xd1701f*_0x19ab1c['fX']/_0x2022f3*_0x3fe90d*0x2+_0x1233e0,_0x4a0a53['fY']=_0xd1701f*_0x19ab1c['fY']/_0x2022f3*_0x3fe90d*0x2+_0x2b29d7,this[_0x45b53a(0x43d)][_0x7bfbc8]),_0x22fa02=(this['pBasePTZPoints'][_0x7bfbc8][_0x2b3be5]['fX']=_0xd1701f*_0x19ab1c['fX']/_0x2022f3+0.5,this[_0x45b53a(0x3bb)][_0x7bfbc8][_0x2b3be5]['fY']=_0xd1701f*_0x19ab1c['fY']/_0x2022f3+0.5,this[_0x45b53a(0x43d)][_0x7bfbc8]=this['nBasePTZPointNum'][_0x7bfbc8]+0x1,this[_0x45b53a(0x1f8)]<=0x0?0x0:+this['fRX1']),_0x1233e0=this['fRY1']<=0x0?0x0:this[_0x45b53a(0x34c)]*_0x243f3a,_0x3fe90d=0x1<=this['fRX2']?0x1-_0x22fa02:+this[_0x45b53a(0x3aa)]-_0x22fa02,_0x2b29d7=0x1<=this[_0x45b53a(0x4ed)]?_0x243f3a-_0x1233e0:this[_0x45b53a(0x4ed)]*_0x243f3a-_0x1233e0;return _0x4a0a53['fX']=(_0x4a0a53['fX']-_0x22fa02)/_0x3fe90d,_0x4a0a53['fY']=(_0x4a0a53['fY']-_0x1233e0)/_0x2b29d7,_0x4a0a53['fX']<=0x1&&_0x4a0a53['fY']<=0x1&&0x0<=_0x4a0a53['fX']&&0x0<=_0x4a0a53['fY']&&(_0x2b3be5=this[_0x45b53a(0x21c)][_0x7bfbc8],this[_0x45b53a(0x22d)][_0x7bfbc8][_0x2b3be5]['fX']=_0x4a0a53['fX'],this[_0x45b53a(0x22d)][_0x7bfbc8][_0x2b3be5]['fY']=_0x4a0a53['fY'],this[_0x45b53a(0x21c)][_0x7bfbc8]=this[_0x45b53a(0x21c)][_0x7bfbc8]+0x1),_0x13949e['SR_OK'];}},{'key':'GetPanoPTZCeiling','value':function(_0x175dcd){var _0x4b76af=_0x22f0ab;if(null==this['pRenderParam'][_0x175dcd]||null==this[_0x4b76af(0x45b)][this[_0x4b76af(0x270)]])return _0x13949e['SR_ERR_CALL_ORDER'];if(null==this[_0x4b76af(0x3bb)][_0x175dcd])return _0x13949e[_0x4b76af(0x2cf)];var _0x2631e9,_0x4d8e0d=this[_0x4b76af(0x43d)][_0x175dcd],_0x330989=(this['fRX2']-this['fRX1'])/(this[_0x4b76af(0x4ed)]-this['fRY1']),_0x475f41=(this['fRX2']-this[_0x4b76af(0x1f8)])/0x2*0x1,_0x3fff26=0x0,_0x583088=((0x1<this[_0x4b76af(0x3aa)]||0x1<this[_0x4b76af(0x4ed)]||this[_0x4b76af(0x34c)]<0x0||this['fRX1']<0x0)&&(this[_0x4b76af(0x1f8)]<0x0&&_0x3fff26<(_0x2631e9=-this['fRX1'])&&(_0x3fff26=_0x2631e9),0x1<this['fRX2']&&_0x3fff26<(_0x2631e9=this[_0x4b76af(0x3aa)]-0x1)&&(_0x3fff26=_0x2631e9),this['fRY1']<0x0&&_0x3fff26<(_0x2631e9=-this[_0x4b76af(0x34c)]*_0x330989)&&(_0x3fff26=_0x2631e9),0x1<this['fRY2']&&_0x3fff26<(_0x2631e9=(this['fRY2']-0x1)*_0x330989)&&(_0x3fff26=_0x2631e9)),_0x3fff26/_0x475f41),_0x5bc94b=[],_0x305081=(_0x5bc94b['fX']=0x0,_0x5bc94b['fY']=0x0,[]);_0x305081['fX']=0x0;for(var _0x54c260,_0xa064c6,_0x57afb4,_0x1b589d,_0x2cfa31=_0x305081['fY']=0x0;_0x2cfa31<_0x4d8e0d;++_0x2cfa31)_0x305081['fX']=this[_0x4b76af(0x3bb)][_0x175dcd][_0x2cfa31]['fX'],_0x305081['fY']=this[_0x4b76af(0x3bb)][_0x175dcd][_0x2cfa31]['fY'],Math[_0x4b76af(0x1e6)](_0x305081['fX']-0.5)<_0x3e9a49&&Math[_0x4b76af(0x1e6)](_0x305081['fY']-0.5)<_0x3e9a49||((_0x57afb4=[])['fX']=0x0,_0x57afb4['fY']=0x0,(_0x54c260=[])['fX']=0x0,_0x54c260['fY']=0x0,_0x57afb4['fX']=_0x305081['fX']-0.5,_0x57afb4['fY']=_0x305081['fY']-0.5,_0x54c260['fX']=-0.5*Math[_0x4b76af(0x202)](this['pRenderParam'][this['nWndPort']][_0x4b76af(0x314)]),_0x54c260['fY']=0.5*Math['cos'](this[_0x4b76af(0x45b)][this[_0x4b76af(0x270)]][_0x4b76af(0x314)]),_0xa064c6=Math['sqrt'](_0x57afb4['fX']*_0x57afb4['fX']+_0x57afb4['fY']*_0x57afb4['fY']),_0x1b589d=Math['sqrt'](_0x54c260['fX']*_0x54c260['fX']+_0x54c260['fY']*_0x54c260['fY']),_0x1b589d=Math[_0x4b76af(0x432)]((_0x57afb4['fX']*_0x54c260['fX']+_0x57afb4['fY']*_0x54c260['fY'])/(_0xa064c6*_0x1b589d)),0x0<_0x57afb4['fX']*_0x54c260['fY']-_0x57afb4['fY']*_0x54c260['fX']&&(_0x1b589d=6.2831852-_0x1b589d),_0x5bc94b['fX']=_0x1b589d/6.2831853,_0x5bc94b['fY']=(0x2*(0.5-_0xa064c6)-_0x583088)/(0.8-_0x583088),0x0<=_0x5bc94b['fY']&&0x0<=_0x5bc94b['fX']&&_0x5bc94b['fY']<=0x1&&_0x5bc94b['fX']<=0x1&&(_0x57afb4=this[_0x4b76af(0x538)][_0x175dcd],this['pPanoPTZPoints'][_0x175dcd][_0x57afb4]['fX']=_0x5bc94b['fX'],this[_0x4b76af(0x3ab)][_0x175dcd][_0x57afb4]['fY']=_0x5bc94b['fY'],this[_0x4b76af(0x538)][_0x175dcd]=this[_0x4b76af(0x538)][_0x175dcd]+0x1));return _0x13949e[_0x4b76af(0x4a6)];}},{'key':'GetPanoPTZFloor','value':function(_0x8dcfbf){var _0x4f4c24=_0x22f0ab;if(null==this['pRenderParam'][_0x8dcfbf]||null==this[_0x4f4c24(0x45b)][this[_0x4f4c24(0x270)]])return _0x13949e['SR_ERR_CALL_ORDER'];if(null==this['pBasePTZPoints'][_0x8dcfbf])return _0x13949e[_0x4f4c24(0x2cf)];var _0x1f3af0,_0x41fad2=this[_0x4f4c24(0x43d)][_0x8dcfbf],_0x124557=(this[_0x4f4c24(0x3aa)]-this[_0x4f4c24(0x1f8)])/(this[_0x4f4c24(0x4ed)]-this[_0x4f4c24(0x34c)]),_0x54b645=(this['fRX2']-this[_0x4f4c24(0x1f8)])/0x2*0x1,_0x3c5ce1=0x0,_0x446175=((0x1<this[_0x4f4c24(0x3aa)]||0x1<this[_0x4f4c24(0x4ed)]||this[_0x4f4c24(0x34c)]<0x0||this[_0x4f4c24(0x1f8)]<0x0)&&(this[_0x4f4c24(0x1f8)]<0x0&&_0x3c5ce1<(_0x1f3af0=-this[_0x4f4c24(0x1f8)])&&(_0x3c5ce1=_0x1f3af0),0x1<this['fRX2']&&_0x3c5ce1<(_0x1f3af0=this['fRX2']-0x1)&&(_0x3c5ce1=_0x1f3af0),this[_0x4f4c24(0x34c)]<0x0&&_0x3c5ce1<(_0x1f3af0=-this[_0x4f4c24(0x34c)]*_0x124557)&&(_0x3c5ce1=_0x1f3af0),0x1<this[_0x4f4c24(0x4ed)]&&_0x3c5ce1<(_0x1f3af0=(this[_0x4f4c24(0x4ed)]-0x1)*_0x124557)&&(_0x3c5ce1=_0x1f3af0)),_0x3c5ce1/_0x54b645),_0xb401bf=[],_0x7470e2=(_0xb401bf['fX']=0x0,_0xb401bf['fY']=0x0,[]);_0x7470e2['fX']=0x0;for(var _0x95d1ca,_0x436efe,_0x452569,_0x56a612,_0x2b996d=_0x7470e2['fY']=0x0;_0x2b996d<_0x41fad2;++_0x2b996d)_0x7470e2['fX']=this['pBasePTZPoints'][_0x8dcfbf][_0x2b996d]['fX'],_0x7470e2['fY']=this['pBasePTZPoints'][_0x8dcfbf][_0x2b996d]['fY'],Math[_0x4f4c24(0x1e6)](_0x7470e2['fX']-0.5)<_0x3e9a49&&Math[_0x4f4c24(0x1e6)](_0x7470e2['fY']-0.5)<_0x3e9a49||((_0x452569=[])['fX']=0x0,_0x452569['fY']=0x0,(_0x95d1ca=[])['fX']=0x0,_0x95d1ca['fY']=0x0,_0x452569['fX']=_0x7470e2['fX']-0.5,_0x452569['fY']=_0x7470e2['fY']-0.5,_0x95d1ca['fX']=-0.5*Math[_0x4f4c24(0x202)](this['pRenderParam'][this['nWndPort']][_0x4f4c24(0x314)]),_0x95d1ca['fY']=0.5*Math[_0x4f4c24(0x34b)](this[_0x4f4c24(0x45b)][this[_0x4f4c24(0x270)]][_0x4f4c24(0x314)]),_0x436efe=Math[_0x4f4c24(0x41c)](_0x452569['fX']*_0x452569['fX']+_0x452569['fY']*_0x452569['fY']),_0x56a612=Math[_0x4f4c24(0x41c)](_0x95d1ca['fX']*_0x95d1ca['fX']+_0x95d1ca['fY']*_0x95d1ca['fY']),_0x56a612=Math['acos']((_0x452569['fX']*_0x95d1ca['fX']+_0x452569['fY']*_0x95d1ca['fY'])/(_0x436efe*_0x56a612)),0x0<_0x452569['fX']*_0x95d1ca['fY']-_0x452569['fY']*_0x95d1ca['fX']&&(_0x56a612=6.2831852-_0x56a612),_0xb401bf['fX']=0x1-_0x56a612/6.2831853,_0xb401bf['fY']=0x1-(0x2*(0.5-_0x436efe)-_0x446175)/(0.8-_0x446175),0x0<=_0xb401bf['fY']&&0x0<=_0xb401bf['fX']&&_0xb401bf['fY']<=0x1&&_0xb401bf['fX']<=0x1&&(_0x452569=this[_0x4f4c24(0x538)][_0x8dcfbf],this['pPanoPTZPoints'][_0x8dcfbf][_0x452569]['fX']=_0xb401bf['fX'],this['pPanoPTZPoints'][_0x8dcfbf][_0x452569]['fY']=_0xb401bf['fY'],this[_0x4f4c24(0x538)][_0x8dcfbf]=this[_0x4f4c24(0x538)][_0x8dcfbf]+0x1));return _0x13949e['SR_OK'];}},{'key':_0x22f0ab(0x4e2),'value':function(_0x40ad31){var _0x265690=_0x22f0ab;if(null==this[_0x265690(0x45b)][_0x40ad31]||null==this['pRenderParam'][this[_0x265690(0x270)]])return _0x13949e[_0x265690(0x2cf)];if(null==this[_0x265690(0x3bb)][_0x40ad31])return _0x13949e[_0x265690(0x2cf)];var _0x2319a0,_0x266be0=this[_0x265690(0x43d)][_0x40ad31],_0x501f9a=(this['fRX2']-this[_0x265690(0x1f8)])/(this[_0x265690(0x4ed)]-this[_0x265690(0x34c)]),_0x550125=(this['fRX2']-this[_0x265690(0x1f8)])/0x2*0x1,_0x4d5753=0x0,_0x1948bd=0x1,_0x579887=0.1,_0x1bd7c9=0.9,_0x1d1cca=(this[_0x265690(0x1f8)]<0x0&&(_0x2319a0=-this['fRX1'],_0x4d5753=_0x2319a0/=0x2*_0x550125),0x1<this[_0x265690(0x3aa)]&&(_0x2319a0=this[_0x265690(0x3aa)]-0x1,_0x1948bd=0x1-(_0x2319a0/=0x2*_0x550125)),this['fRY1']<0x0&&(_0x2319a0=-this[_0x265690(0x34c)]*_0x501f9a,_0x579887=0.1<(_0x2319a0/=0x2*_0x550125)?_0x2319a0:0.1),0x1<this[_0x265690(0x4ed)]&&(_0x2319a0=(this[_0x265690(0x4ed)]-0x1)*_0x501f9a,_0x1bd7c9=0x1-0.9<(_0x2319a0/=0x2*_0x550125)?0x1-_0x2319a0:0.9),[]),_0x90f489=(_0x1d1cca['fX']=0x0,_0x1d1cca['fY']=0x0,[]);_0x90f489['fX']=0x0;for(var _0x47c336=_0x90f489['fY']=0x0;_0x47c336<_0x266be0;++_0x47c336){_0x90f489['fX']=this[_0x265690(0x3bb)][_0x40ad31][_0x47c336]['fX'],_0x90f489['fY']=this[_0x265690(0x3bb)][_0x40ad31][_0x47c336]['fY'];var _0x17b290=0x2*_0x90f489['fX']*_0x550125,_0x14ab03=0x2*_0x90f489['fY']*_0x550125,_0x30823c=Math[_0x265690(0x41c)](_0x550125*_0x550125-(_0x14ab03-_0x550125)*(_0x14ab03-_0x550125));Math[_0x265690(0x1e6)](_0x30823c)<_0x3e9a49||(_0x90f489['fX']=_0x550125*(_0x17b290-_0x550125)/_0x30823c+_0x550125,_0x90f489['fY']=_0x14ab03,_0x1d1cca['fX']=(_0x90f489['fX']-0x2*_0x4d5753*_0x550125)/(0x2*(_0x1948bd-_0x4d5753)*_0x550125),_0x1d1cca['fY']=(_0x90f489['fY']-0x2*_0x579887*_0x550125)/(0x2*(_0x1bd7c9-_0x579887)*_0x550125),0x0<=_0x1d1cca['fY']&&0x0<=_0x1d1cca['fX']&&_0x1d1cca['fY']<=0x1&&_0x1d1cca['fX']<=0x1&&(_0x17b290=this['nPanoPTZPointNum'][_0x40ad31],this[_0x265690(0x3ab)][_0x40ad31][_0x17b290]['fX']=_0x1d1cca['fX'],this['pPanoPTZPoints'][_0x40ad31][_0x17b290]['fY']=_0x1d1cca['fY'],this['nPanoPTZPointNum'][_0x40ad31]=this[_0x265690(0x538)][_0x40ad31]+0x1));}return _0x13949e[_0x265690(0x4a6)];}},{'key':_0x22f0ab(0x1d9),'value':function(_0x70619e,_0x3be3a2,_0x11f844){var _0x48c64e=_0x22f0ab;if(null==_0x70619e||null==this[_0x48c64e(0x45b)][this[_0x48c64e(0x270)]])return _0x13949e[_0x48c64e(0x2cf)];var _0x15aba3=(this[_0x48c64e(0x3aa)]-this['fRX1'])/(this[_0x48c64e(0x4ed)]-this[_0x48c64e(0x34c)]),_0x51f570=(this[_0x48c64e(0x3aa)]-this['fRX1'])/0x2*0x1,_0x40a1ba=0x0,_0x15aba3=((0x1<this[_0x48c64e(0x3aa)]||0x1<this[_0x48c64e(0x4ed)]||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&_0x40a1ba<(_0x186799=-this[_0x48c64e(0x1f8)])&&(_0x40a1ba=_0x186799),0x1<this[_0x48c64e(0x3aa)]&&_0x40a1ba<(_0x186799=this[_0x48c64e(0x3aa)]-0x1)&&(_0x40a1ba=_0x186799),this[_0x48c64e(0x34c)]<0x0&&_0x40a1ba<(_0x186799=-this[_0x48c64e(0x34c)]*_0x15aba3)&&(_0x40a1ba=_0x186799),0x1<this[_0x48c64e(0x4ed)]&&_0x40a1ba<(_0x186799=(this[_0x48c64e(0x4ed)]-0x1)*_0x15aba3)&&(_0x40a1ba=_0x186799)),_0x40a1ba/_0x51f570),_0x186799=[];if(Math[_0x48c64e(0x1e6)](_0x3be3a2-0.5)<_0x3e9a49&&Math[_0x48c64e(0x1e6)](_0x11f844-0.5)<_0x3e9a49)return _0x13949e[_0x48c64e(0x38d)];return _0x40a1ba=[],_0x40a1ba['fX']=0x0,_0x40a1ba['fY']=0x0,_0x51f570=[],_0x51f570['fX']=0x0,_0x40a1ba['fX']=_0x3be3a2-0.5,_0x40a1ba['fY']=_0x11f844-0.5,_0x51f570['fX']=-0.5*Math['sin'](this['pRenderParam'][this[_0x48c64e(0x270)]][_0x48c64e(0x314)]),_0x51f570['fY']=0.5*Math[_0x48c64e(0x34b)](this[_0x48c64e(0x45b)][this[_0x48c64e(0x270)]][_0x48c64e(0x314)]),_0x3be3a2=Math[_0x48c64e(0x41c)](_0x40a1ba['fX']*_0x40a1ba['fX']+_0x40a1ba['fY']*_0x40a1ba['fY']),_0x11f844=Math['sqrt'](_0x51f570['fX']*_0x51f570['fX']+_0x51f570['fY']*_0x51f570['fY']),_0x11f844=Math[_0x48c64e(0x432)]((_0x40a1ba['fX']*_0x51f570['fX']+_0x40a1ba['fY']*_0x51f570['fY'])/(_0x3be3a2*_0x11f844)),(0x0<_0x40a1ba['fX']*_0x51f570['fY']-_0x40a1ba['fY']*_0x51f570['fX']&&(_0x11f844=6.2831852-_0x11f844),_0x186799['fX']=_0x11f844/6.2861853,_0x186799['fY']=(0x2*(0.5-_0x3be3a2)-_0x15aba3)/(0.8-_0x15aba3),0x0<=_0x186799['fY']&&0x0<=_0x186799['fX']&&_0x186799['fY']<=0x1&&_0x186799['fX']<=0x1?(_0x70619e['fX']=_0x186799['fX'],_0x70619e['fY']=_0x186799['fY'],_0x13949e[_0x48c64e(0x4a6)]):_0x13949e[_0x48c64e(0x203)]);}},{'key':_0x22f0ab(0x510),'value':function(_0x1260ad,_0x6e91ea,_0x412b2f){var _0x3b1220=_0x22f0ab;if(null==this[_0x3b1220(0x45b)][this[_0x3b1220(0x270)]])return _0x13949e[_0x3b1220(0x2cf)];if(null==_0x1260ad)return _0x13949e[_0x3b1220(0x203)];var _0x346002=(this['fRX2']-this[_0x3b1220(0x1f8)])/(this['fRY2']-this['fRY1']),_0x47c81f=(this[_0x3b1220(0x3aa)]-this['fRX1'])/0x2*0x1,_0x4dcf12=0x0,_0x5ef05d=0x1,_0x48221e=0x0,_0x29a943=0x1,_0x6c8a76=0x0,_0x346002=((0x1<this[_0x3b1220(0x3aa)]||0x1<this[_0x3b1220(0x4ed)]||this[_0x3b1220(0x1f8)]<0x0||this[_0x3b1220(0x34c)]<0x0)&&(this[_0x3b1220(0x1f8)]<0x0&&(_0x6c8a76<(_0x1e9f9f=-this[_0x3b1220(0x1f8)])&&(_0x6c8a76=_0x1e9f9f),_0x4dcf12=_0x1e9f9f/=0x2*_0x47c81f),0x1<this[_0x3b1220(0x3aa)]&&(_0x6c8a76<(_0x1e9f9f=this[_0x3b1220(0x3aa)]-0x1)&&(_0x6c8a76=_0x1e9f9f),_0x5ef05d=0x1-(_0x1e9f9f/=0x2*_0x47c81f)),this['fRY1']<0x0&&(_0x6c8a76<(_0x1e9f9f=-this[_0x3b1220(0x34c)]*_0x346002)&&(_0x6c8a76=_0x1e9f9f),_0x48221e=_0x1e9f9f/=0x2*_0x47c81f),0x1<this[_0x3b1220(0x4ed)]&&(_0x6c8a76<(_0x1e9f9f=(this[_0x3b1220(0x4ed)]-0x1)*_0x346002)&&(_0x6c8a76=_0x1e9f9f),_0x29a943=0x1-(_0x1e9f9f/=0x2*_0x47c81f))),_0x6c8a76/_0x47c81f),_0x1e9f9f=[],_0x6c8a76=[];return _0x1e9f9f['fX']=0x1-_0x6e91ea,_0x1e9f9f['fY']=(0.8-_0x346002)*(0x1-_0x412b2f)+_0x346002,_0x47c81f=6.2831853*_0x1e9f9f['fX']+this['pRenderParam'][this['nWndPort']][_0x3b1220(0x314)],_0x6e91ea=0.5*(0x1-_0x1e9f9f['fY']),_0x6c8a76['fX']=0.5-_0x6e91ea*Math['sin'](_0x47c81f),_0x6c8a76['fY']=0.5+_0x6e91ea*Math[_0x3b1220(0x34b)](_0x47c81f),_0x6c8a76['fX']=(_0x6c8a76['fX']-_0x4dcf12)/(_0x5ef05d-_0x4dcf12),_0x6c8a76['fY']=(_0x6c8a76['fY']-_0x48221e)/(_0x29a943-_0x48221e),_0x1260ad['fX']=_0x6c8a76['fX'],_0x1260ad['fY']=_0x6c8a76['fY'],_0x13949e[_0x3b1220(0x4a6)];}},{'key':_0x22f0ab(0x548),'value':function(_0x42c74f,_0x3186d2,_0x308acc){var _0x3017de=_0x22f0ab;if(null==this[_0x3017de(0x45b)][this[_0x3017de(0x270)]])return _0x13949e[_0x3017de(0x2cf)];if(null==_0x42c74f)return _0x13949e['SR_ERR_PARAM'];var _0x15a2de=(this[_0x3017de(0x3aa)]-this[_0x3017de(0x1f8)])/(this['fRY2']-this[_0x3017de(0x34c)]),_0x5c8031=(this['fRX2']-this[_0x3017de(0x1f8)])/0x2*0x1,_0xbfd907=0x0,_0x23a02c=0x1,_0x405ea8=0.1,_0xf4bbd3=0.9,_0x15a2de=(this['fRX1']<0x0&&(_0x37ddc3=-this['fRX1'],_0xbfd907=_0x37ddc3/=0x2*_0x5c8031),0x1<this[_0x3017de(0x3aa)]&&(_0x37ddc3=this['fRX2']-0x1,_0x23a02c=0x1-(_0x37ddc3/=0x2*_0x5c8031)),this[_0x3017de(0x34c)]<0x0&&(_0x37ddc3=-this[_0x3017de(0x34c)]*_0x15a2de,_0x405ea8=0.1<(_0x37ddc3/=0x2*_0x5c8031)?_0x37ddc3:0.1),0x1<this[_0x3017de(0x4ed)]&&(_0x37ddc3=(this[_0x3017de(0x4ed)]-0x1)*_0x15a2de,_0xf4bbd3=0x1-0.9<(_0x37ddc3/=0x2*_0x5c8031)?0x1-_0x37ddc3:0.9),[]),_0x37ddc3=0x2*_0x3186d2*_0x5c8031,_0x23c0bb=0x2*_0x308acc*_0x5c8031,_0x1fe403=Math[_0x3017de(0x41c)](_0x5c8031*_0x5c8031-(_0x23c0bb-_0x5c8031)*(_0x23c0bb-_0x5c8031));return Math[_0x3017de(0x1e6)](_0x1fe403)<_0x3e9a49?_0x13949e['SR_ERR_PARAM']:(_0x308acc=_0x23c0bb,_0x15a2de['fX']=((_0x3186d2=_0x5c8031*(_0x37ddc3-_0x5c8031)/_0x1fe403+_0x5c8031)-0x2*_0xbfd907*_0x5c8031)/(0x2*(_0x23a02c-_0xbfd907)*_0x5c8031),_0x15a2de['fY']=(_0x308acc-0x2*_0x405ea8*_0x5c8031)/(0x2*(_0xf4bbd3-_0x405ea8)*_0x5c8031),0x0<=_0x15a2de['fY']&&0x0<=_0x15a2de['fX']&&_0x15a2de['fY']<=0x1&&_0x15a2de['fX']<=0x1?(_0x42c74f['fX']=_0x15a2de['fX'],_0x42c74f['fY']=_0x15a2de['fY'],_0x13949e[_0x3017de(0x4a6)]):_0x13949e[_0x3017de(0x203)]);}},{'key':'UpdatePTZPosition','value':function(_0x3b30a6,_0x7f0329,_0x2cae23){var _0x147548=_0x22f0ab;if(null==this['pRenderParam'][_0x3b30a6])return _0x13949e[_0x147548(0x2cf)];var _0x265c03=[],_0x53303d=(_0x265c03[_0x147548(0x1e2)]=0x0,_0x265c03[_0x147548(0x25f)]=0x0,_0x265c03[_0x147548(0x528)]=0x0,_0x265c03[_0x147548(0x299)]=0x0,_0x13949e[_0x147548(0x4a6)]);if(_0x3468da['SR_DE_FISH_PTZ_FLOOR']==this[_0x147548(0x45b)][_0x3b30a6]['nDisplayEffect']||_0x3468da[_0x147548(0x2b7)]==this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)]){if((_0x53303d=this[_0x147548(0x207)](_0x7f0329,_0x2cae23,_0x265c03,this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)]))!=_0x13949e[_0x147548(0x4a6)])return _0x53303d;}else{if(_0x3468da[_0x147548(0x4bf)]!=this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)])return _0x13949e['SR_ERR_NOT_SUPPORT'];if((_0x53303d=this[_0x147548(0x525)](_0x7f0329,_0x2cae23,_0x265c03))!=_0x13949e[_0x147548(0x4a6)])return _0x53303d;}return 0x0==this[_0x147548(0x2ac)](this[_0x147548(0x1f8)],this[_0x147548(0x3aa)],this[_0x147548(0x34c)],this[_0x147548(0x4ed)],_0x265c03,this[_0x147548(0x45b)][_0x3b30a6]['fZoom'],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)])?_0x13949e[_0x147548(0x203)]:(this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x265)]=_0x265c03[_0x147548(0x25f)],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x2ee)]=_0x265c03[_0x147548(0x1e2)],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x405)]=_0x265c03[_0x147548(0x299)],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x3e0)]=_0x265c03[_0x147548(0x528)],_0x13949e['SR_OK']);}},{'key':'JudgeDisplayEffect','value':function(_0x10e182){var _0xae0cd8=_0x22f0ab,_0x4f9b01=0x0;switch(_0x4f9b01){case 0x0:return _0x4f9b01=this[_0xae0cd8(0x4f3)](_0x10e182),0x4==this['nPlaceType']&&(this['nPlaceType']=0x0),_0x13949e[_0xae0cd8(0x4a6)];case 0x3:return(_0x4f9b01=this[_0xae0cd8(0x4f3)](_0x10e182))==this[_0xae0cd8(0x344)]||0x4==this['nPlaceType']?_0x13949e[_0xae0cd8(0x4a6)]:_0x13949e[_0xae0cd8(0x38d)];case 0x2:case 0x1:return(_0x4f9b01=this['GetPlaceType'](_0x10e182))==this[_0xae0cd8(0x344)]||0x4==_0x4f9b01?_0x13949e['SR_OK']:_0x13949e[_0xae0cd8(0x38d)];default:return _0x13949e[_0xae0cd8(0x38d)];}return _0x13949e['SR_ERR_NOT_SUPPORT'];}},{'key':_0x22f0ab(0x4f3),'value':function(_0x1e0375){var _0x375394=_0x22f0ab;switch(_0x1e0375){case _0x3468da['SR_DE_FISH_PTZ_CEILING']:case _0x3468da[_0x375394(0x208)]:case _0x3468da[_0x375394(0x4f5)]:case _0x3468da['SR_DE_FISH_CYLINDER_CEILING']:case _0x3468da[_0x375394(0x3f3)]:return 0x3;case _0x3468da[_0x375394(0x4c2)]:case _0x3468da[_0x375394(0x2f5)]:case _0x3468da[_0x375394(0x2d3)]:case _0x3468da[_0x375394(0x3a9)]:case _0x3468da['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:return 0x2;case _0x3468da[_0x375394(0x4bf)]:case _0x3468da[_0x375394(0x33c)]:case _0x3468da['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x3468da[_0x375394(0x26f)]:return 0x1;case _0x3468da['SR_DE_FISH_SEMISPHERE']:case _0x3468da['SR_DE_FISH_ORIGINAL']:case _0x3468da['SR_DE_FISH_PLANET']:case _0x3468da[_0x375394(0x4c9)]:case _0x3468da[_0x375394(0x4dd)]:return 0x4;default:return 0x0;}return 0x0;}},{'key':_0x22f0ab(0x323),'value':function(_0x4e7581,_0x20c108){var _0x7b4ead=_0x22f0ab;if(_0x4e7581<0x0||0x20<=_0x4e7581)return _0x13949e['SR_ERR_PARAM'];if(null==_0x20c108)return _0x13949e[_0x7b4ead(0x203)];if(null==this[_0x7b4ead(0x45b)][_0x4e7581])return _0x13949e[_0x7b4ead(0x2cf)];var _0x516513=_0x13949e['SR_OK'];switch(_0x20c108[_0x7b4ead(0x260)]){case _0x3b5c80:if((_0x516513=this[_0x7b4ead(0x4e7)](_0x20c108[_0x7b4ead(0x27e)],_0x20c108[_0x7b4ead(0x469)],_0x20c108[_0x7b4ead(0x2bb)],_0x20c108['fRYBottom']))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this[_0x7b4ead(0x45b)][_0x4e7581]['bCut']=_0x20c108[_0x7b4ead(0x324)],this['bBlack']=_0x20c108[_0x7b4ead(0x40f)];break;case _0x1e8e38:if(_0x3468da[_0x7b4ead(0x208)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x4f5)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x2f5)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da['SR_DE_FISH_PANORAMA_FLOOR_180']!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)])return _0x13949e[_0x7b4ead(0x38d)];if((_0x516513=this[_0x7b4ead(0x2c0)](_0x4e7581,_0x20c108[_0x7b4ead(0x314)]))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this[_0x7b4ead(0x1ee)][_0x4e7581][_0x7b4ead(0x314)]=_0x20c108['fAngle'];break;case _0x2b1fa6:if(_0x3468da[_0x7b4ead(0x4bf)]!=this['pRenderParam'][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x2b7)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x4c2)]!=this['pRenderParam'][_0x4e7581]['nDisplayEffect'])return _0x13949e['SR_ERR_NOT_SUPPORT'];if((_0x516513=this[_0x7b4ead(0x28c)](_0x4e7581,_0x20c108[_0x7b4ead(0x3f4)]))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this['pFishParam'][_0x4e7581][_0x7b4ead(0x3f4)]=_0x20c108[_0x7b4ead(0x3f4)];break;case _0x1d678a:if(_0x3468da[_0x7b4ead(0x4bf)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x2b7)]!=this[_0x7b4ead(0x45b)][_0x4e7581]['nDisplayEffect']&&_0x3468da[_0x7b4ead(0x4c2)]!=this['pRenderParam'][_0x4e7581][_0x7b4ead(0x1fe)])return _0x13949e[_0x7b4ead(0x38d)];if((_0x516513=this[_0x7b4ead(0x1ed)](_0x4e7581,_0x20c108[_0x7b4ead(0x3d6)],_0x20c108[_0x7b4ead(0x40c)],this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x3f4)],!0x0))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this[_0x7b4ead(0x1ee)][_0x4e7581][_0x7b4ead(0x3d6)]=_0x20c108[_0x7b4ead(0x3d6)],this[_0x7b4ead(0x1ee)][_0x4e7581][_0x7b4ead(0x40c)]=_0x20c108[_0x7b4ead(0x40c)];break;case _0x3c8826:return _0x13949e[_0x7b4ead(0x38d)];}return _0x516513=this['ComputePTZPoints']();}},{'key':_0x22f0ab(0x3e3),'value':function(_0x143d41,_0x429ae0){var _0x5f2252=_0x22f0ab;return _0x143d41<0x0||0x20<=_0x143d41||null==_0x429ae0||null==this[_0x5f2252(0x1ee)][_0x143d41]?_0x13949e[_0x5f2252(0x203)]:(_0x429ae0[_0x5f2252(0x27e)]=this['fRX1'],_0x429ae0[_0x5f2252(0x469)]=this[_0x5f2252(0x3aa)],_0x429ae0[_0x5f2252(0x2bb)]=this['fRY1'],_0x429ae0[_0x5f2252(0x2e9)]=this[_0x5f2252(0x4ed)],_0x429ae0[_0x5f2252(0x40f)]=this['bBlack'],_0x429ae0['bCut']=this[_0x5f2252(0x45b)][_0x143d41][_0x5f2252(0x324)],_0x429ae0[_0x5f2252(0x260)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x260)],_0x429ae0[_0x5f2252(0x314)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x314)],_0x429ae0[_0x5f2252(0x3f4)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x3f4)],_0x429ae0[_0x5f2252(0x3d6)]=this['pFishParam'][_0x143d41][_0x5f2252(0x3d6)],_0x429ae0[_0x5f2252(0x40c)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x40c)],_0x13949e[_0x5f2252(0x4a6)]);}},{'key':_0x22f0ab(0x503),'value':function(_0x538050,_0x20a220){var _0x140b11=_0x22f0ab;return _0x538050<0x0||0x20<=_0x538050||null==_0x20a220||null==this['pRenderParam'][_0x538050]?_0x13949e['SR_ERR_PARAM']:(_0x20a220[_0x140b11(0x27e)]=this[_0x140b11(0x1f8)],_0x20a220['fRXRight']=this[_0x140b11(0x3aa)],_0x20a220[_0x140b11(0x2bb)]=this[_0x140b11(0x34c)],_0x20a220[_0x140b11(0x2e9)]=this['fRY2'],_0x20a220[_0x140b11(0x40f)]=this[_0x140b11(0x40f)],_0x20a220['fCosH']=this[_0x140b11(0x45b)][_0x538050][_0x140b11(0x265)],_0x20a220[_0x140b11(0x2ee)]=this[_0x140b11(0x45b)][_0x538050][_0x140b11(0x2ee)],_0x20a220[_0x140b11(0x405)]=this['pRenderParam'][_0x538050][_0x140b11(0x405)],_0x20a220[_0x140b11(0x3e0)]=this['pRenderParam'][_0x538050][_0x140b11(0x3e0)],_0x20a220['fAngle']=this[_0x140b11(0x45b)][_0x538050]['fAngle'],_0x20a220[_0x140b11(0x3f4)]=this['pRenderParam'][_0x538050][_0x140b11(0x3f4)],_0x20a220[_0x140b11(0x1fe)]=this[_0x140b11(0x45b)][_0x538050][_0x140b11(0x1fe)],_0x20a220[_0x140b11(0x324)]=this[_0x140b11(0x45b)][_0x538050]['bCut'],_0x13949e[_0x140b11(0x4a6)]);}},{'key':_0x22f0ab(0x4e7),'value':function(_0xc43460,_0x43a0e9,_0xe4dbc8,_0x34708e){var _0x449b89=_0x22f0ab;if(_0xc43460<=-0.5||0.4<=_0xc43460||_0x43a0e9<=0.6||1.5<=_0x43a0e9||_0xe4dbc8<=-0.5||0.4<=_0xe4dbc8||_0x34708e<=0.6||1.5<=_0x34708e||_0xc43460+_0x43a0e9<=0.8||1.2<=_0xc43460+_0x43a0e9||_0xe4dbc8+_0x34708e<=0.8||1.2<=_0xe4dbc8+_0x34708e)return _0x13949e[_0x449b89(0x203)];if(_0xc43460<0x0||0x1<_0x43a0e9||_0xe4dbc8<0x0||0x1<_0x34708e){for(var _0x41e2a6=0x0;_0x41e2a6<0x20;++_0x41e2a6)if(_0x3468da[_0x449b89(0x2b7)]==this['pRenderParam'][_0x41e2a6][_0x449b89(0x1fe)]||_0x3468da[_0x449b89(0x4c2)]==this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x1fe)]||_0x3468da[_0x449b89(0x4bf)]==this[_0x449b89(0x45b)][_0x41e2a6]['nDisplayEffect']){var _0x423ca2=[];if(_0x423ca2[_0x449b89(0x25f)]=this[_0x449b89(0x45b)][_0x41e2a6]['fCosH'],_0x423ca2[_0x449b89(0x1e2)]=this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x2ee)],_0x423ca2[_0x449b89(0x299)]=this[_0x449b89(0x45b)][_0x41e2a6]['fCosV'],_0x423ca2[_0x449b89(0x528)]=this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x3e0)],0x0==this[_0x449b89(0x2ac)](_0xc43460,_0x43a0e9,_0xe4dbc8,_0x34708e,_0x423ca2,this[_0x449b89(0x45b)][_0x41e2a6]['fZoom'],this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x1fe)]))return _0x13949e[_0x449b89(0x203)];}}return this[_0x449b89(0x1f8)]=_0xc43460,this[_0x449b89(0x3aa)]=_0x43a0e9,this[_0x449b89(0x34c)]=_0xe4dbc8,this[_0x449b89(0x4ed)]=_0x34708e,_0x13949e[_0x449b89(0x4a6)];}},{'key':'UpdateWideScanAngle','value':function(_0x3a6b5f,_0x5536f3){var _0x4429f8=_0x22f0ab;return null==this['pRenderParam'][_0x3a6b5f]?_0x13949e[_0x4429f8(0x2cf)]:(_0x3468da[_0x4429f8(0x2f5)]==this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]||_0x3468da['SR_DE_FISH_PANORAMA_FLOOR_180']==this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]?this['pRenderParam'][_0x3a6b5f]['fAngle']=_0x5536f3:_0x3468da['SR_DE_FISH_PANORAMA_CEILING_360']!=this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]&&_0x3468da[_0x4429f8(0x4f5)]!=this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]||(this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x314)]=-_0x5536f3),_0x13949e[_0x4429f8(0x4a6)]);}},{'key':_0x22f0ab(0x207),'value':function(_0x2cdf66,_0x2a4fbb,_0x3bfb0f,_0x2f451a){var _0x432c17=_0x22f0ab,_0x52c448=Math['sqrt']((_0x2a4fbb-0.5)*(_0x2a4fbb-0.5)+(_0x2cdf66-0.5)*(_0x2cdf66-0.5));if(0.5<_0x52c448)return _0x13949e['SR_ERR_PARAM'];if(_0x52c448<0.001)return _0x3bfb0f[_0x432c17(0x299)]=0x1,_0x3bfb0f['fVAngleSin']=0x0,_0x3bfb0f[_0x432c17(0x25f)]=0x1,_0x3bfb0f['fHAngleSin']=0x0,_0x13949e[_0x432c17(0x4a6)];if(_0x2f451a==_0x3468da[_0x432c17(0x2b7)]){_0x3bfb0f[_0x432c17(0x25f)]=(0.5-_0x2a4fbb)/_0x52c448,_0x3bfb0f['fHAngleSin']=(0.5-_0x2cdf66)/_0x52c448;var _0x203ee9=_0x52c448*_0x48e6bf;_0x3bfb0f['fVAngleCos']=Math[_0x432c17(0x34b)](_0x203ee9),_0x3bfb0f['fVAngleSin']=Math[_0x432c17(0x202)](_0x203ee9);}else{if(_0x2f451a!=_0x3468da[_0x432c17(0x4c2)])return _0x13949e['SR_ERR_PARAM'];_0x3bfb0f[_0x432c17(0x25f)]=(_0x2a4fbb-0.5)/_0x52c448,_0x3bfb0f[_0x432c17(0x1e2)]=(0.5-_0x2cdf66)/_0x52c448,_0x203ee9=_0x52c448*_0x48e6bf,(_0x3bfb0f[_0x432c17(0x299)]=Math[_0x432c17(0x34b)](_0x203ee9),_0x3bfb0f[_0x432c17(0x528)]=Math['sin'](_0x203ee9));}return _0x13949e[_0x432c17(0x4a6)];}},{'key':_0x22f0ab(0x525),'value':function(_0x298627,_0x1d1ea5,_0x3085db){var _0x3e6163=_0x22f0ab,_0x4c5cd2,_0x4ec552;return 0.25<(_0x1d1ea5-0.5)*(_0x1d1ea5-0.5)+(_0x298627-0.5)*(_0x298627-0.5)?_0x13949e[_0x3e6163(0x203)]:(_0x1d1ea5=(_0x1d1ea5-0.5)/0.5*_0x48e6bf/0x2,_0x4c5cd2=Math[_0x3e6163(0x34b)](_0x1d1ea5),_0x1d1ea5=Math[_0x3e6163(0x202)](_0x1d1ea5),0x1<(_0x298627-0.5)/0.5/_0x4c5cd2||(_0x298627-0.5)/0.5/_0x4c5cd2<-0x1?SR_ERR_PARAM:(_0x298627=(_0x298627-0.5)/0.5/_0x4c5cd2*_0x48e6bf/0x2,_0x4ec552=Math[_0x3e6163(0x34b)](_0x298627),_0x298627=Math['sin'](_0x298627),_0x3085db[_0x3e6163(0x299)]=_0x4c5cd2,_0x3085db[_0x3e6163(0x528)]=_0x1d1ea5,_0x3085db[_0x3e6163(0x25f)]=_0x4ec552,_0x3085db['fHAngleSin']=_0x298627,_0x13949e[_0x3e6163(0x4a6)]));}},{'key':_0x22f0ab(0x2ac),'value':function(_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf,_0x3a99ba,_0x1c89f7){var _0x34b12a=_0x22f0ab;return 0x1!=this['IsOutofImage'](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf['fHAngleCos'],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf['fVAngleCos'],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0x1,0.5,_0x1c89f7)&&(0x1!=this['IsOutofImage'](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x0,0.5,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf['fVAngleCos'],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0.5,0x1,_0x1c89f7)&&(0x1!=this['IsOutofImage'](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0.5,0x0,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x0,0x0,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf['fHAngleCos'],_0x5c6caf['fHAngleSin'],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x0,0x1,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0x1,0x1,_0x1c89f7)&&0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x1,0x0,_0x1c89f7)))))));}},{'key':_0x22f0ab(0x3f2),'value':function(_0x4cc7ca,_0x5c0d8d,_0x43c536,_0x2dfe4c,_0x4a902e,_0x364b79,_0x8c51ef,_0x122369,_0x336385,_0x35ea07,_0x5bed77,_0x59b13c){var _0x14a46d=_0x22f0ab,_0x1719e2,_0x5bb98f,_0x18125f,_0x4fcc36=(_0x5c0d8d-_0x4cc7ca)/(_0x2dfe4c-_0x43c536),_0x2645d3=(_0x4cc7ca+_0x5c0d8d)/0x2*0x1,_0x43c536=(_0x43c536+_0x2dfe4c)/0x2*_0x4fcc36,_0x2dfe4c=(_0x5c0d8d-_0x4cc7ca)/0x2*0x1;if(_0x59b13c==SR_DE_FISH_PTZ_CEILING){if(_0x27bb8a=_0x35ea07-0.5,_0x2cbbf2=(_0x1719e2=0.5-_0x5bed77)*_0x8c51ef+(_0x5bb98f=_0x336385)*_0x122369,(_0x18125f=_0x5bb98f*_0x8c51ef-_0x1719e2*_0x122369)<=0x0)return!0x0;var _0x27bb8a,_0x2cbbf2,_0x25edb6,_0x557a3c=Math[_0x14a46d(0x41c)](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2),_0x5c0d8d=Math['sqrt'](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2+_0x18125f*_0x18125f),_0x4cc7ca=Math[_0x14a46d(0x2c8)](_0x557a3c/_0x5c0d8d)/1.5707963*0.5,_0x3b5866=(-((_0x27bb8a=_0x4cc7ca*_0x27bb8a/_0x557a3c)*_0x364b79+(_0x2cbbf2=_0x4cc7ca*_0x2cbbf2/_0x557a3c)*_0x4a902e)*_0x2dfe4c*0x2+_0x43c536)/_0x4fcc36;if((_0x25edb6=(_0x27bb8a*_0x4a902e-_0x2cbbf2*_0x364b79)*_0x2dfe4c*0x2+_0x2645d3)<0x0||0x1<_0x25edb6||_0x3b5866<0x0||0x1<_0x3b5866)return!0x0;}if(_0x59b13c==SR_DE_FISH_PTZ_FLOOR){if(_0x27bb8a=_0x35ea07-0.5,_0x2cbbf2=(_0x1719e2=_0x5bed77-0.5)*_0x8c51ef+(_0x5bb98f=_0x336385)*_0x122369,(_0x18125f=_0x5bb98f*_0x8c51ef-_0x1719e2*_0x122369)<=0x0)return!0x0;_0x557a3c=Math[_0x14a46d(0x41c)](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2),(_0x5c0d8d=Math['sqrt'](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2+_0x18125f*_0x18125f),_0x4cc7ca=Math['asin'](_0x557a3c/_0x5c0d8d)/1.5707963*0.5);if(_0x3b5866=(((_0x27bb8a=_0x4cc7ca*_0x27bb8a/_0x557a3c)*_0x364b79+(_0x2cbbf2=_0x4cc7ca*_0x2cbbf2/_0x557a3c)*_0x4a902e)*_0x2dfe4c*0x2+_0x43c536)/_0x4fcc36,(_0x25edb6=(_0x27bb8a*_0x4a902e-_0x2cbbf2*_0x364b79)*_0x2dfe4c*0x2+_0x2645d3)<0x0||0x1<_0x25edb6||_0x3b5866<0x0||0x1<_0x3b5866)return!0x0;}if(_0x59b13c==SR_DE_FISH_PTZ_WALL){if(_0x25edb6=(_0x27bb8a=_0x35ea07-0.5)*_0x4a902e+(_0x18125f=(_0x5bb98f=_0x336385)*_0x8c51ef-(_0x1719e2=_0x5bed77-0.5)*_0x122369)*_0x364b79,_0x3b5866=_0x2cbbf2=_0x1719e2*_0x8c51ef+_0x5bb98f*_0x122369,(_0x5c0d8d=_0x18125f*_0x4a902e-_0x27bb8a*_0x364b79)<=0x0)return!0x0;_0x557a3c=Math[_0x14a46d(0x41c)](_0x25edb6*_0x25edb6+_0x3b5866*_0x3b5866),(_0x4cc7ca=Math[_0x14a46d(0x41c)](_0x25edb6*_0x25edb6+_0x3b5866*_0x3b5866+_0x5c0d8d*_0x5c0d8d),_0x59b13c=Math['asin'](_0x557a3c/_0x4cc7ca)/1.5707963*0.5);if(_0x3b5866=(_0x59b13c*_0x3b5866/_0x557a3c*_0x2dfe4c*0x2+_0x43c536)/_0x4fcc36,(_0x25edb6=_0x59b13c*_0x25edb6/_0x557a3c*_0x2dfe4c*0x2+_0x2645d3)<0x0||0x1<_0x25edb6||_0x3b5866<0x0||0x1<_0x3b5866)return!0x0;}return!0x1;}},{'key':_0x22f0ab(0x4d7),'value':function(){var _0x18aa5a=_0x22f0ab;if(-0x1==this['nWndPort'])return _0x13949e[_0x18aa5a(0x2cf)];for(var _0x255d41,_0x18cee9=0x0;_0x18cee9<0x20;++_0x18cee9)null==this['pRenderParam'][_0x18cee9]||_0x3468da['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x18cee9][_0x18aa5a(0x1fe)]&&_0x3468da[_0x18aa5a(0x4c2)]!=this['pRenderParam'][_0x18cee9]['nDisplayEffect']&&_0x3468da['SR_DE_FISH_PTZ_WALL']!=this[_0x18aa5a(0x45b)][_0x18cee9][_0x18aa5a(0x1fe)]||(_0x255d41=_0x13949e[_0x18aa5a(0x4a6)],this[_0x18aa5a(0x334)]==_0x46c232?(_0x255d41=this['GetRangePoints'](_0x18cee9),_0x13949e[_0x18aa5a(0x4a6)]==_0x255d41&&(_0x255d41=this[_0x18aa5a(0x38f)](_0x18cee9))):this[_0x18aa5a(0x334)]==_0xba837&&(_0x255d41=this['GetRectPoints'](_0x18cee9)));return _0x13949e[_0x18aa5a(0x4a6)];}},{'key':_0x22f0ab(0x289),'value':function(){var _0x50c128=_0x22f0ab;return this[_0x50c128(0x270)];}},{'key':_0x22f0ab(0x40b),'value':function(){var _0x8fd81f=_0x22f0ab;return this[_0x8fd81f(0x334)];}},{'key':'GetPTZColor','value':function(_0x547ab5,_0x4b15de){var _0x3cb11b=_0x22f0ab;return _0x547ab5<0x0||0x20<=_0x547ab5||null==_0x4b15de?_0x13949e[_0x3cb11b(0x203)]:(_0x4b15de['fA']=this[_0x3cb11b(0x320)][_0x547ab5]['fA'],_0x4b15de['fR']=this['stPTZColor'][_0x547ab5]['fR'],_0x4b15de['fG']=this[_0x3cb11b(0x320)][_0x547ab5]['fG'],_0x4b15de['fB']=this[_0x3cb11b(0x320)][_0x547ab5]['fB'],null!=this['pPTZSetColor']&&(Math[_0x3cb11b(0x1e6)](this[_0x3cb11b(0x3eb)][_0x547ab5]['fA'])<_0x3e9a49||Math[_0x3cb11b(0x1e6)](this[_0x3cb11b(0x3eb)][_0x547ab5]['fR'])<_0x3e9a49||Math['abs'](this[_0x3cb11b(0x3eb)][_0x547ab5]['fG'])<_0x3e9a49||Math[_0x3cb11b(0x1e6)](this[_0x3cb11b(0x3eb)][_0x547ab5]['fB'])<_0x3e9a49)&&(_0x4b15de['fA']=this[_0x3cb11b(0x3eb)][_0x547ab5]['fA'],_0x4b15de['fR']=this[_0x3cb11b(0x3eb)][_0x547ab5]['fR'],_0x4b15de['fG']=this[_0x3cb11b(0x3eb)][_0x547ab5]['fG'],_0x4b15de['fB']=this['pPTZSetColor'][_0x547ab5]['fB']),_0x13949e[_0x3cb11b(0x4a6)]);}},{'key':_0x22f0ab(0x52c),'value':function(_0x44c32e,_0x3b828d){var _0x16bb48=_0x22f0ab;if(_0x44c32e<0x0||0x20<=_0x44c32e)return _0x13949e[_0x16bb48(0x203)];if(null==_0x3b828d)return _0x13949e[_0x16bb48(0x203)];if(null==this[_0x16bb48(0x3eb)]){this[_0x16bb48(0x3eb)]=[];for(var _0x458351=0x0;_0x458351<0x20;++_0x458351)this['pPTZSetColor'][_0x458351]=[],this['pPTZSetColor'][_0x458351]['fR']=0x0,this['pPTZSetColor'][_0x458351]['fG']=0x0,this['pPTZSetColor'][_0x458351]['fB']=0x0,this[_0x16bb48(0x3eb)][_0x458351]['fA']=0x1;}return this[_0x16bb48(0x3eb)][_0x44c32e]['fR']=_0x3b828d['fR'],this[_0x16bb48(0x3eb)][_0x44c32e]['fG']=_0x3b828d['fG'],this[_0x16bb48(0x3eb)][_0x44c32e]['fB']=_0x3b828d['fB'],this[_0x16bb48(0x3eb)][_0x44c32e]['fA']=_0x3b828d['fA'],_0x13949e[_0x16bb48(0x4a6)];}},{'key':_0x22f0ab(0x303),'value':function(_0x206b44){return!(_0x206b44<0x0||0x20<=_0x206b44)&&this['bPTZSelected'][_0x206b44];}},{'key':_0x22f0ab(0x533),'value':function(_0x1ec40c,_0x501f73){var _0x26790e=_0x22f0ab;if(-0x1==this['nWndPort'])return-0x1;if(null==this[_0x26790e(0x45b)][this[_0x26790e(0x270)]])return-0x1;var _0x4c2285=0x20,_0x136752=[];_0x136752['fX']=_0x1ec40c,_0x136752['fY']=_0x501f73;for(var _0xd802d9=0x0;_0xd802d9<0x20;++_0xd802d9)this['bPTZSelected'][_0xd802d9]=!0x1;if(this[_0x26790e(0x334)]==_0x46c232){switch(this['pRenderParam'][this[_0x26790e(0x270)]][_0x26790e(0x1fe)]){case _0x3468da[_0x26790e(0x2f5)]:this[_0x26790e(0x510)](_0x136752,_0x1ec40c,_0x501f73);break;case _0x3468da[_0x26790e(0x208)]:this[_0x26790e(0x1d9)](_0x136752,_0x1ec40c,_0x501f73);break;case _0x3468da[_0x26790e(0x33c)]:this['GetPointPano2FishWall'](_0x136752,_0x1ec40c,_0x501f73);}for(var _0x386aa3=0x0;_0x386aa3<0x20;++_0x386aa3)if(0x0!=this['nOriPTZPointNum'][_0x386aa3]){var _0x31a50a=[],_0x46f960=(_0x31a50a['fX']=this['pOriPTZPoints'][_0x386aa3][0x0]['fX'],_0x31a50a['fY']=this[_0x26790e(0x22d)][_0x386aa3][0x0]['fY'],[]);_0x46f960['fX']=this['pOriPTZPoints'][_0x386aa3][0x0]['fX'],_0x46f960['fY']=this['pOriPTZPoints'][_0x386aa3][0x0]['fY'];for(var _0x494da2=0x1;_0x494da2<this[_0x26790e(0x21c)][_0x386aa3];++_0x494da2)this[_0x26790e(0x285)](_0x31a50a,_0x46f960,this[_0x26790e(0x22d)][_0x386aa3][_0x494da2]);if(_0x136752['fX']<=_0x31a50a['fX']&&_0x136752['fX']>=_0x46f960['fX']&&_0x136752['fY']>=_0x46f960['fY']&&_0x136752['fY']<=_0x31a50a['fY']){_0x4c2285=_0x386aa3;break;}}}else{if(this[_0x26790e(0x334)]!=_0xba837)return-0x1;for(var _0xa00358=0x0;_0xa00358<0x20;++_0xa00358)if(_0x136752['fX']<=this[_0x26790e(0x47b)][_0xa00358][0x2]['fX']&&_0x136752['fX']>=this['pRectPoints'][_0xa00358][0x0]['fX']&&_0x136752['fY']>=this[_0x26790e(0x47b)][_0xa00358][0x0]['fY']&&_0x136752['fY']<=this[_0x26790e(0x47b)][_0xa00358][0x2]['fY']){_0x4c2285=_0xa00358;break;}}return _0x4c2285<0x20?(this[_0x26790e(0x447)][_0x4c2285]=!0x0,_0x4c2285):-0x1;}},{'key':_0x22f0ab(0x3ca),'value':function(_0x8c11fc){var _0x554a23=_0x22f0ab;if(_0x8c11fc<0x0||0x20<=_0x8c11fc)return _0x13949e[_0x554a23(0x203)];for(var _0x548255=0x0;_0x548255<0x20;++_0x548255)this[_0x554a23(0x447)][_0x548255]=!0x1;if(this['nPTZDisplayMode']==_0x46c232){if(0x0==this[_0x554a23(0x21c)][_0x8c11fc])return _0x13949e[_0x554a23(0x203)];this[_0x554a23(0x447)][_0x8c11fc]=!0x0;}else{if(0x0==this[_0x554a23(0x4bc)][_0x8c11fc])return _0x13949e['SR_ERR_PARAM'];this[_0x554a23(0x447)][_0x8c11fc]=!0x0;}return _0x13949e[_0x554a23(0x4a6)];}},{'key':'GetPTZRectange','value':function(_0x56216f,_0x56d46d,_0x1de57b){var _0x20ac8f=_0x22f0ab;return _0x1de57b['fX']<_0x56d46d['fX']&&(_0x56d46d['fX']=_0x1de57b['fX']),_0x1de57b['fY']<_0x56d46d['fY']&&(_0x56d46d['fY']=_0x1de57b['fY']),_0x1de57b['fX']>_0x56216f['fX']&&(_0x56216f['fX']=_0x1de57b['fX']),_0x1de57b['fY']>_0x56216f['fY']&&(_0x56216f['fY']=_0x1de57b['fY']),_0x13949e[_0x20ac8f(0x4a6)];}},{'key':'GetPTZPoints','value':function(_0x42a0d4,_0x346ed6,_0x3f96c9){var _0x4ecd0d=_0x22f0ab;return _0x42a0d4<0x0||0x20<=_0x42a0d4?_0x13949e[_0x4ecd0d(0x203)]:null==this[_0x4ecd0d(0x45b)][this['nWndPort']]?_0x13949e[_0x4ecd0d(0x2cf)]:(_0x46c232==_0x3f96c9?null!=this['pOriPTZPoints'][_0x42a0d4]&&0x0!=this[_0x4ecd0d(0x21c)][_0x42a0d4]&&(_0x346ed6['pstPoints']=this[_0x4ecd0d(0x22d)][_0x42a0d4],_0x346ed6[_0x4ecd0d(0x216)]=this[_0x4ecd0d(0x21c)][_0x42a0d4]):_0xba837==_0x3f96c9&&null!=this['pRectPoints'][_0x42a0d4]&&(_0x346ed6[_0x4ecd0d(0x2f3)]=this[_0x4ecd0d(0x47b)][_0x42a0d4],_0x346ed6[_0x4ecd0d(0x216)]=0x4),_0x13949e[_0x4ecd0d(0x4a6)]);}},{'key':_0x22f0ab(0x524),'value':function(_0x105384){var _0x200023=_0x22f0ab;return this[_0x200023(0x334)]=_0x105384,this[_0x200023(0x4d7)]();}},{'key':_0x22f0ab(0x4ad),'value':function(_0x1e2546){var _0x36542a=_0x22f0ab;return _0x1e2546<0x0||0x20<=_0x1e2546?_0x13949e[_0x36542a(0x203)]:null==this[_0x36542a(0x45b)]?_0x13949e[_0x36542a(0x2cf)]:this['pRenderParam'][_0x1e2546]['nDisplayEffect'];}},{'key':_0x22f0ab(0x3b6),'value':function(_0x5d4b04,_0x4918e4,_0x18c305){var _0x586ca4=_0x22f0ab;if(_0x5d4b04<0x0||0x20<=_0x5d4b04)return _0x13949e[_0x586ca4(0x203)];if(null==this[_0x586ca4(0x3ab)][_0x5d4b04]||0x0==this[_0x586ca4(0x538)][_0x5d4b04])return _0x13949e[_0x586ca4(0x203)];var _0x215c72=this['nPTZFragmentNode'][_0x5d4b04][_0x18c305];if(_0x4918e4['nPointNum']=this[_0x586ca4(0x3ae)][_0x5d4b04][_0x18c305+0x1]-this[_0x586ca4(0x3ae)][_0x5d4b04][_0x18c305],_0x4918e4['nPointNum']<0x0)return _0x13949e[_0x586ca4(0x2cf)];_0x4918e4[_0x586ca4(0x2f3)]=[];for(var _0x1b99ff=0x0;_0x1b99ff<_0x4918e4['nPointNum'];++_0x1b99ff){var _0x24a3cd=[];_0x24a3cd['fX']=this[_0x586ca4(0x3ab)][_0x5d4b04][_0x215c72+_0x1b99ff]['fX'],_0x24a3cd['fY']=this['pPanoPTZPoints'][_0x5d4b04][_0x215c72+_0x1b99ff]['fY'],_0x4918e4['pstPoints'][_0x586ca4(0x51d)](_0x24a3cd);}return _0x13949e['SR_OK'];}},{'key':'GetPTZFragmentNum','value':function(_0x576f06){var _0x29db8c=_0x22f0ab;return _0x576f06<0x0||0x20<=_0x576f06?_0x13949e[_0x29db8c(0x203)]:0x0==this[_0x29db8c(0x371)][_0x576f06]?_0x13949e[_0x29db8c(0x2cf)]:this[_0x29db8c(0x371)][_0x576f06];}},{'key':'CalcPTZFragmentPoints','value':function(_0x51dc93){var _0x43d5bf=_0x22f0ab;if(_0x51dc93<0x0||0x20<=_0x51dc93)return _0x13949e[_0x43d5bf(0x203)];if(null==this['pPanoPTZPoints'][_0x51dc93]||0x0==this[_0x43d5bf(0x538)][_0x51dc93])return _0x13949e[_0x43d5bf(0x2cf)];this['nPTZFragmentNode'][_0x51dc93][0x0]=0x0,this[_0x43d5bf(0x371)][_0x51dc93]=0x1;for(var _0x566de4=0x0,_0x3f224a=0x0;_0x3f224a<this[_0x43d5bf(0x538)][_0x51dc93]-0x1;_0x3f224a++)0.5<Math[_0x43d5bf(0x1e6)](this[_0x43d5bf(0x3ab)][_0x51dc93][_0x3f224a+0x1]['fX']-this[_0x43d5bf(0x3ab)][_0x51dc93][_0x3f224a]['fX'])&&(_0x566de4=this['nPTZFragmentNum'][_0x51dc93],this['nPTZFragmentNode'][_0x51dc93][_0x566de4]=_0x3f224a+0x1,this['nPTZFragmentNum'][_0x51dc93]=this[_0x43d5bf(0x371)][_0x51dc93]+0x1);var _0x401f53=this[_0x43d5bf(0x538)][_0x51dc93];return Math['abs'](this[_0x43d5bf(0x3ab)][_0x51dc93][0x0]['fX']-this[_0x43d5bf(0x3ab)][_0x51dc93][_0x401f53-0x1]['fX'])<0.5&&(this[_0x43d5bf(0x3ab)][_0x51dc93][_0x401f53]['fX']=this['pPanoPTZPoints'][_0x51dc93][0x0]['fX'],this['pPanoPTZPoints'][_0x51dc93][_0x401f53]['fY']=this[_0x43d5bf(0x3ab)][_0x51dc93][0x0]['fY'],this[_0x43d5bf(0x538)][_0x51dc93]=this['nPanoPTZPointNum'][_0x51dc93]+0x1),_0x566de4=this[_0x43d5bf(0x371)][_0x51dc93],this[_0x43d5bf(0x3ae)][_0x51dc93][_0x566de4]=this[_0x43d5bf(0x538)][_0x51dc93],_0x13949e[_0x43d5bf(0x4a6)];}},{'key':_0x22f0ab(0x1dd),'value':function(_0x1bf892){var _0x14fccb=_0x22f0ab;return this[_0x14fccb(0x3ee)][_0x1bf892];}},{'key':_0x22f0ab(0x523),'value':function(_0x175f2a,_0x5d6bc9,_0x2ea935){var _0x4ec4f4=_0x22f0ab;if(null==this['pRenderParam'][this['nWndPort']])return _0x13949e[_0x4ec4f4(0x2cf)];if(null==_0x175f2a)return _0x13949e['SR_ERR_PARAM'];var _0x9d481c=(this['fRX2']-this[_0x4ec4f4(0x1f8)])/(this[_0x4ec4f4(0x4ed)]-this[_0x4ec4f4(0x34c)]),_0x490014=(this['fRX2']-this[_0x4ec4f4(0x1f8)])/0x2*0x1,_0x416e60=0x0,_0x9d481c=((0x1<this[_0x4ec4f4(0x3aa)]||0x1<this[_0x4ec4f4(0x4ed)]||this[_0x4ec4f4(0x1f8)]<0x0||this[_0x4ec4f4(0x34c)]<0x0)&&(this['fRX1']<0x0&&_0x416e60<(_0x877d52=-this[_0x4ec4f4(0x1f8)])&&(_0x416e60=_0x877d52),0x1<this['fRX2']&&_0x416e60<(_0x877d52=this[_0x4ec4f4(0x3aa)]-0x1)&&(_0x416e60=_0x877d52),this[_0x4ec4f4(0x34c)]<0x0&&_0x416e60<(_0x877d52=-this['fRY1']*_0x9d481c)&&(_0x416e60=_0x877d52),0x1<this[_0x4ec4f4(0x4ed)]&&_0x416e60<(_0x877d52=(this[_0x4ec4f4(0x4ed)]-0x1)*_0x9d481c)&&(_0x416e60=_0x877d52)),_0x416e60/_0x490014),_0x877d52=[];if(_0x877d52['fX']=0x0,_0x877d52['fY']=0x0,Math[_0x4ec4f4(0x1e6)](_0x5d6bc9-0.5)<_0x3e9a49&&Math[_0x4ec4f4(0x1e6)](_0x2ea935-0.5)<_0x3e9a49)return _0x13949e['SR_ERR_NOT_SUPPORT'];return _0x416e60=[],_0x490014=[],_0x416e60['fX']=_0x5d6bc9-0.5,_0x416e60['fY']=_0x2ea935-0.5,_0x490014['fX']=-0.5*Math[_0x4ec4f4(0x202)](this[_0x4ec4f4(0x45b)][this[_0x4ec4f4(0x270)]][_0x4ec4f4(0x314)]),_0x490014['fY']=0.5*Math[_0x4ec4f4(0x34b)](this[_0x4ec4f4(0x45b)][this[_0x4ec4f4(0x270)]][_0x4ec4f4(0x314)]),_0x5d6bc9=Math[_0x4ec4f4(0x41c)](_0x416e60['fX']*_0x416e60['fX']+_0x416e60['fY']*_0x416e60['fY']),_0x2ea935=Math[_0x4ec4f4(0x41c)](_0x490014['fX']*_0x490014['fX']+_0x490014['fY']*_0x490014['fY']),_0x2ea935=Math['acos']((_0x416e60['fX']*_0x490014['fX']+_0x416e60['fY']*_0x490014['fY'])/(_0x5d6bc9*_0x2ea935)),(0x0<_0x416e60['fX']*_0x490014['fY']-_0x416e60['fY']*_0x490014['fX']&&(_0x2ea935=6.2831852-_0x2ea935),_0x877d52['fX']=_0x2ea935/6.2831853,_0x877d52['fY']=(0x2*(0.5-_0x5d6bc9)-_0x9d481c)/(0.8-_0x9d481c),0x0<=_0x877d52['fY']&&0x0<=_0x877d52['fX']&&_0x877d52['fY']<=0x1&&_0x877d52['fX']<=0x1?(_0x175f2a['fX']=_0x877d52['fX'],_0x175f2a['fY']=_0x877d52['fY'],_0x13949e['SR_OK']):_0x13949e['SR_ERR_PARAM']);}},{'key':'GetPointFish2PanoFloor','value':function(_0x47c7ab,_0x7bc0a8,_0x2b85f4){var _0x227715=_0x22f0ab;if(null==this['pRenderParam'][this['nWndPort']])return _0x13949e[_0x227715(0x2cf)];if(null==_0x47c7ab)return _0x13949e[_0x227715(0x203)];var _0x451cd7=(this[_0x227715(0x3aa)]-this[_0x227715(0x1f8)])/(this['fRY2']-this[_0x227715(0x34c)]),_0x1b56bb=(this['fRX2']-this[_0x227715(0x1f8)])/0x2*0x1,_0x575d8b=0x0,_0x451cd7=((0x1<this[_0x227715(0x3aa)]||0x1<this[_0x227715(0x4ed)]||this[_0x227715(0x1f8)]<0x0||this[_0x227715(0x34c)]<0x0)&&(this[_0x227715(0x1f8)]<0x0&&_0x575d8b<(_0x1256ad=-this[_0x227715(0x1f8)])&&(_0x575d8b=_0x1256ad),0x1<this[_0x227715(0x3aa)]&&_0x575d8b<(_0x1256ad=this[_0x227715(0x3aa)]-0x1)&&(_0x575d8b=_0x1256ad),this[_0x227715(0x34c)]<0x0&&_0x575d8b<(_0x1256ad=-this[_0x227715(0x34c)]*_0x451cd7)&&(_0x575d8b=_0x1256ad),0x1<this['fRY2']&&_0x575d8b<(_0x1256ad=(this[_0x227715(0x4ed)]-0x1)*_0x451cd7)&&(_0x575d8b=_0x1256ad)),_0x575d8b/_0x1b56bb),_0x1256ad=[];if(_0x1256ad['fX']=0x0,_0x1256ad['fY']=0x0,Math[_0x227715(0x1e6)](_0x7bc0a8-0.5)<_0x3e9a49&&Math[_0x227715(0x1e6)](_0x2b85f4-0.5)<_0x3e9a49)return _0x13949e[_0x227715(0x38d)];return _0x575d8b=[],_0x1b56bb=[],_0x575d8b['fX']=_0x7bc0a8-0.5,_0x575d8b['fY']=_0x2b85f4-0.5,_0x1b56bb['fX']=-0.5*Math['sin'](this['pRenderParam'][this[_0x227715(0x270)]]['fAngle']),_0x1b56bb['fY']=0.5*Math[_0x227715(0x34b)](this['pRenderParam'][this[_0x227715(0x270)]][_0x227715(0x314)]),_0x7bc0a8=Math['sqrt'](_0x575d8b['fX']*_0x575d8b['fX']+_0x575d8b['fY']*_0x575d8b['fY']),_0x2b85f4=Math[_0x227715(0x41c)](_0x1b56bb['fX']*_0x1b56bb['fX']+_0x1b56bb['fY']*_0x1b56bb['fY']),_0x2b85f4=Math[_0x227715(0x432)]((_0x575d8b['fX']*_0x1b56bb['fX']+_0x575d8b['fY']*_0x1b56bb['fY'])/(_0x7bc0a8*_0x2b85f4)),(0x0<_0x575d8b['fX']*_0x1b56bb['fY']-_0x575d8b['fY']*_0x1b56bb['fX']&&(_0x2b85f4=6.2831852-_0x2b85f4),_0x1256ad['fX']=0x1-_0x2b85f4/6.2831853,_0x1256ad['fY']=0x1-(0x2*(0.5-_0x7bc0a8)-_0x451cd7)/(0.8-_0x451cd7),0x0<=_0x1256ad['fY']&&0x0<=_0x1256ad['fX']&&_0x1256ad['fY']<=0x1&&_0x1256ad['fX']<=0x1?(_0x47c7ab['fX']=_0x1256ad['fX'],_0x47c7ab['fY']=_0x1256ad['fY'],_0x13949e[_0x227715(0x4a6)]):_0x13949e[_0x227715(0x203)]);}},{'key':'GetPointFish2PanoWall','value':function(_0x5663f8,_0x1b4776,_0x255510){var _0x2fe0d9=_0x22f0ab;if(null==this['pRenderParam'][this[_0x2fe0d9(0x270)]])return _0x13949e[_0x2fe0d9(0x2cf)];if(null==_0x5663f8)return _0x13949e['SR_ERR_PARAM'];var _0x57e68a=(this['fRX2']-this[_0x2fe0d9(0x1f8)])/(this[_0x2fe0d9(0x4ed)]-this['fRY1']),_0xc2dd78=(this[_0x2fe0d9(0x3aa)]-this[_0x2fe0d9(0x1f8)])/0x2*0x1,_0x51bc6b=0x0,_0x85b815=0x1,_0x2945ea=0.1,_0x4f88ba=0.9,_0x57e68a=(this[_0x2fe0d9(0x1f8)]<0x0&&(_0x1fe26d=-this[_0x2fe0d9(0x1f8)],_0x51bc6b=_0x1fe26d/=0x2*_0xc2dd78),0x1<this[_0x2fe0d9(0x3aa)]&&(_0x1fe26d=this['fRX2']-0x1,_0x85b815=0x1-(_0x1fe26d/=0x2*_0xc2dd78)),this[_0x2fe0d9(0x34c)]<0x0&&(_0x1fe26d=-this[_0x2fe0d9(0x34c)]*_0x57e68a,_0x2945ea=0.1<(_0x1fe26d/=0x2*_0xc2dd78)?_0x1fe26d:0.1),0x1<this[_0x2fe0d9(0x4ed)]&&(_0x1fe26d=(this[_0x2fe0d9(0x4ed)]-0x1)*_0x57e68a,_0x4f88ba=0x1-0.9<(_0x1fe26d/=0x2*_0xc2dd78)?0x1-_0x1fe26d:0.9),[]),_0x1fe26d=(_0x57e68a['fX']=0x0,_0x57e68a['fY']=0x0,0x2*_0x1b4776*_0xc2dd78),_0x40967f=0x2*_0x255510*_0xc2dd78,_0x4dd0bb=Math[_0x2fe0d9(0x41c)](_0xc2dd78*_0xc2dd78-(_0x40967f-_0xc2dd78)*(_0x40967f-_0xc2dd78));return Math[_0x2fe0d9(0x1e6)](_0x4dd0bb)<_0x3e9a49?SR_ERR_PARAM:(_0x255510=_0x40967f,_0x57e68a['fX']=((_0x1b4776=_0xc2dd78*(_0x1fe26d-_0xc2dd78)/_0x4dd0bb+_0xc2dd78)-0x2*_0x51bc6b*_0xc2dd78)/(0x2*(_0x85b815-_0x51bc6b)*_0xc2dd78),_0x57e68a['fY']=(_0x255510-0x2*_0x2945ea*_0xc2dd78)/(0x2*(_0x4f88ba-_0x2945ea)*_0xc2dd78),0x0<=_0x57e68a['fY']&&0x0<=_0x57e68a['fX']&&_0x57e68a['fY']<=0x1&&_0x57e68a['fX']<=0x1?(_0x5663f8['fX']=_0x57e68a['fX'],_0x5663f8['fY']=_0x57e68a['fY'],_0x13949e[_0x2fe0d9(0x4a6)]):_0x13949e['SR_ERR_PARAM']);}}]),_0x92cc8d;}()),_0x174ce8=(function(){var _0x43f8ac=_0x99d5a2;function _0x5bd09b(){var _0x461f55=a0_0x1593;_0x160316(this,_0x5bd09b),this[_0x461f55(0x2c7)]='webgl',this[_0x461f55(0x47f)]=null,this[_0x461f55(0x448)]='',this[_0x461f55(0x422)]=0x0,this[_0x461f55(0x4a7)]=_0x3468da[_0x461f55(0x3c1)],this[_0x461f55(0x407)]=0x0,this[_0x461f55(0x376)]=0x0,this['FECShowMode']=0x0,this[_0x461f55(0x292)],this['InitFECParam']();}return _0x5a3b91(_0x5bd09b,[{'key':_0x43f8ac(0x4e8),'value':function(){var _0x3b847b=_0x43f8ac;this[_0x3b847b(0x4de)]=[];for(var _0xb399a4=0x0;_0xb399a4<0x20;_0xb399a4++)this[_0x3b847b(0x4de)][_0xb399a4]={},this['stFishEyeManager'][_0xb399a4]['pRender']=null,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x539)]=0x0,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x1e3)]='',this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x29b)]=0x0,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x4fe)]=0x0,this['stFishEyeManager'][_0xb399a4][_0x3b847b(0x477)]=0x0,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x26b)]=_0xf574bd,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x1e5)]=_0x462c41,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x46b)]=_0x3468da[_0x3b847b(0x224)];this[_0x3b847b(0x3c0)]=[];for(var _0x52886b=0x0;_0x52886b<0x20;_0x52886b++)this[_0x3b847b(0x3c0)][_0x52886b]={},this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x3c5)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x302)]={},this['stFishParam'][_0x52886b]['stPTZParam']['fPTZPositionX']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x302)][_0x3b847b(0x54b)]=0x0,this['stFishParam'][_0x52886b]['stCycleParam']={},this['stFishParam'][_0x52886b]['stCycleParam'][_0x3b847b(0x249)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x460)][_0x3b847b(0x326)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x460)][_0x3b847b(0x489)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x460)][_0x3b847b(0x394)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x3f4)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x1d0)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b]['stPTZColor']={},this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x320)]['nR']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x320)]['nG']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x320)]['nB']=0x0,this['stFishParam'][_0x52886b][_0x3b847b(0x320)]['nAlpha']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x39b)]={},this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x39b)]['fTop']=0x0,this['stFishParam'][_0x52886b]['stPTZSelect'][_0x3b847b(0x339)]=0x0,this['stFishParam'][_0x52886b]['stPTZSelect'][_0x3b847b(0x478)]=0x0,this['stFishParam'][_0x52886b][_0x3b847b(0x39b)][_0x3b847b(0x2d2)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x1f5)]=0x0;}},{'key':'FEC_SetCanvasID','value':function(_0x164b33){return 0x1;}},{'key':_0x43f8ac(0x213),'value':function(_0x398d95,_0x21daea){var _0x217218=_0x43f8ac;return this[_0x217218(0x2c7)]=_0x21daea,this[_0x217218(0x448)]=_0x398d95,null==this[_0x217218(0x292)]&&(this[_0x217218(0x292)]=new _0x30e60b()),'2d'===this['renderEngine']||'2D'===this['renderEngine']?(this[_0x217218(0x47f)]=new _0x56d25f(),console[_0x217218(0x514)](_0x217218(0x287))):(this[_0x217218(0x47f)]=new _0x50f103(),this[_0x217218(0x47f)]['SR_SetFishParamManager'](this[_0x217218(0x292)]),console['log'](_0x217218(0x4ff))),this[_0x217218(0x47f)]['SR_Init'](_0x398d95),this[_0x217218(0x422)]=this[_0x217218(0x47f)][_0x217218(0x485)](this['mainFECCorrect']),null==this['stFishEyeManager'][0x0][_0x217218(0x3c4)]&&this[_0x217218(0x4a7)]!==_0x3468da[_0x217218(0x3c1)]&&(this['stFishEyeManager'][0x0][_0x217218(0x3c4)]=this[_0x217218(0x47f)],this[_0x217218(0x4de)][0x0][_0x217218(0x539)]=0x0,this['stFishEyeManager'][0x0][_0x217218(0x1e3)]=this['mainCanvasID'],this[_0x217218(0x4de)][0x0][_0x217218(0x29b)]=0x1,this[_0x217218(0x4de)][0x0][_0x217218(0x4fe)]=0x1,this[_0x217218(0x4de)][0x0]['nValidSubPort']=0x0),-0x1==this['mainSubPort']?(console[_0x217218(0x434)]('%c\\x20SR_AddSubPort\\x20error\\x20subport:%d',_0x217218(0x309),this[_0x217218(0x422)]),0x0):0x1;}},{'key':_0x43f8ac(0x4c7),'value':function(){var _0x484c68=_0x43f8ac;null!=this[_0x484c68(0x47f)]&&(this[_0x484c68(0x47f)][_0x484c68(0x41e)](this[_0x484c68(0x422)]),this['oVideoHandle'][_0x484c68(0x4b2)](),this[_0x484c68(0x47f)]=null);for(var _0x51de8c=0x0;_0x51de8c<0x20;_0x51de8c++)this[_0x484c68(0x4de)][_0x51de8c]['pRender']=null;return this[_0x484c68(0x4de)][_0x484c68(0x21a)](0x0,this[_0x484c68(0x4de)][_0x484c68(0x4f1)]),this[_0x484c68(0x3c0)][_0x484c68(0x21a)](0x0,this[_0x484c68(0x3c0)][_0x484c68(0x4f1)]),this[_0x484c68(0x292)][_0x484c68(0x3db)](),this[_0x484c68(0x292)]=null,0x1;}},{'key':_0x43f8ac(0x46a),'value':function(_0x3f330e){var _0x3ded4f=_0x43f8ac;return null!=this['oVideoHandle']?this[_0x3ded4f(0x47f)][_0x3ded4f(0x28d)](_0x3f330e):0x0;}},{'key':_0x43f8ac(0x355),'value':function(_0x12724d,_0x2631fe,_0x336758,_0x19d2e1){var _0x279ec5=_0x43f8ac;return null!=this[_0x279ec5(0x47f)]?this[_0x279ec5(0x47f)][_0x279ec5(0x414)](_0x12724d,_0x2631fe,_0x336758,_0x19d2e1):0x0;}},{'key':_0x43f8ac(0x4b7),'value':function(_0x310450,_0x3c976b){var _0x577b82=_0x43f8ac;return null!=this[_0x577b82(0x47f)]?this['oVideoHandle'][_0x577b82(0x375)](_0x310450,_0x3c976b):0x0;}},{'key':_0x43f8ac(0x286),'value':function(){var _0x57d180=_0x43f8ac;return null!=this['oVideoHandle']?this[_0x57d180(0x47f)][_0x57d180(0x547)]():0x0;}},{'key':_0x43f8ac(0x41f),'value':function(_0x364b18){var _0x368b02=_0x43f8ac;return null!=this[_0x368b02(0x47f)]?this[_0x368b02(0x47f)][_0x368b02(0x49d)](_0x364b18):0x0;}},{'key':'FEC_ResetCorrectType','value':function(_0x1e2813,_0x35ffd0,_0xd8b532){var _0x207ca8=_0x43f8ac;if(_0xd8b532!=_0x462c41&&_0xd8b532!=_0x4beee9&&_0xd8b532!=_0x316080&&_0xd8b532!=_0x17c71b)return console[_0x207ca8(0x514)](_0x207ca8(0x4db),_0x207ca8(0x4cf),_0xd8b532),0x10;var _0x5cf78a=this[_0x207ca8(0x380)](_0x35ffd0,_0xd8b532);return 0x0==_0x1e2813?(null!=this[_0x207ca8(0x47f)]&&(this[_0x207ca8(0x47f)][_0x207ca8(0x41e)](this[_0x207ca8(0x422)]),this[_0x207ca8(0x422)]=this[_0x207ca8(0x47f)][_0x207ca8(0x485)](_0x5cf78a),null==this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x3c4)]&&(this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x3c4)]=this['oVideoHandle'],this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x539)]=0x0,this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x1e3)]=this['mainCanvasID'],this['stFishEyeManager'][_0x1e2813]['bUsed']=0x1,this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x4fe)]=0x1,this['stFishEyeManager'][_0x1e2813][_0x207ca8(0x477)]=this[_0x207ca8(0x422)])),this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x26b)]=_0x35ffd0,this[_0x207ca8(0x4de)][_0x1e2813]['emCorrectType']=_0xd8b532,this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x46b)]=_0x5cf78a,this['mainFECCorrect']=_0x5cf78a,_0x17c71b<=this[_0x207ca8(0x4de)][_0x1e2813]['emCorrectType']&&(_0x35ffd0=this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x3c4)][_0x207ca8(0x3a7)](_0x45c70b,0x0),_0x13949e[_0x207ca8(0x4a6)]!=_0x35ffd0&&console['log'](_0x207ca8(0x307),_0x35ffd0))):null!=this[_0x207ca8(0x4de)][_0x1e2813]['pRender']?(this[_0x207ca8(0x4de)][_0x1e2813]['pRender'][_0x207ca8(0x41e)](this[_0x207ca8(0x4de)][_0x1e2813]['nValidSubPort']),this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x477)]=this[_0x207ca8(0x4de)][_0x1e2813]['pRender'][_0x207ca8(0x485)](_0x5cf78a)):console['info']('%c\\x20FEC_ResetCorrectType\\x20error\\x20this\\x20canvas\\x20not\\x20play',_0x207ca8(0x4cf)),0x1;}},{'key':_0x43f8ac(0x20d),'value':function(_0x43ad98,_0x541ead){var _0x418bbf=_0x43f8ac;if((_0x3b95c4==_0x43ad98||_0xf574bd==_0x43ad98)&&_0x1ae667==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if(_0x40926f==_0x43ad98&&_0x3ccddf==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if(_0x40926f==_0x43ad98&&_0x1a4011==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if((_0x3b95c4==_0x43ad98||_0xf574bd==_0x43ad98)&&_0x11da1d==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if((_0x3b95c4==_0x43ad98||_0xf574bd==_0x43ad98)&&_0x5357b0==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if(_0x40926f!=_0x43ad98&&_0x3b95c4!=_0x43ad98&&_0xf574bd!=_0x43ad98)return this[_0x418bbf(0x407)]=MP_E_SUPPORT,-0x1;if(0x0!=_0x541ead&&_0x541ead!=_0x4ebb4e&&_0x541ead!=_0x4beee9&&_0x541ead!=_0x316080&&_0x541ead!=_0x1ae667&&_0x541ead!=_0x17c71b&&_0x541ead!=_0x3ccddf&&_0x541ead!=_0x1a4011&&_0x541ead!=_0x396f7c&&_0x541ead!=_0x11da1d&&_0x541ead!=_0x5357b0)return this[_0x418bbf(0x407)]=MP_E_SUPPORT,-0x1;for(var _0x22a23f=0x0,_0x123209=0x1;_0x123209<0x20;_0x123209++){if(this['stFishEyeManager'][_0x123209]['bUsed']&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x26b)]!=_0x43ad98)return this['FECErrorCode']=0x517,-0x1;if(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x29b)]&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x4ebb4e&&this['stFishEyeManager'][_0x123209][_0x418bbf(0x1e5)]!=_0x17c71b&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x3ccddf&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x1a4011&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x396f7c&&this['stFishEyeManager'][_0x123209]['emCorrectType']!=_0x11da1d&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x5357b0&&_0x541ead!=_0x4ebb4e&&_0x541ead!=_0x17c71b&&_0x541ead!=_0x3ccddf&&_0x541ead!=_0x1a4011&&_0x541ead!=_0x396f7c&&_0x541ead!=_0x11da1d&&_0x541ead!=_0x5357b0)return this[_0x418bbf(0x407)]=0x518,-0x1;if(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x29b)]&&(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]==_0x4ebb4e&&_0x541ead==_0x4beee9||this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]==_0x4beee9&&_0x541ead==_0x4ebb4e))return this[_0x418bbf(0x407)]=0x518,-0x1;if(_0x5357b0==_0x541ead&&(this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x249)]<=-0.5||0x0<this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x249)]||this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x326)]<0x1||1.5<=this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x326)]||this[_0x418bbf(0x3c0)][0x0]['stCycleParam'][_0x418bbf(0x489)]<=-0.5||0.4<=this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']||this['stFishParam'][0x0][_0x418bbf(0x460)][_0x418bbf(0x394)]<=0.6||1.5<=this[_0x418bbf(0x3c0)][0x0]['stCycleParam']['fRadiusBottom']||this[_0x418bbf(0x3c0)][0x0]['stCycleParam'][_0x418bbf(0x249)]+this['stFishParam'][0x0]['stCycleParam'][_0x418bbf(0x326)]<=0.8||1.2<=this['stFishParam'][0x0][_0x418bbf(0x460)][_0x418bbf(0x249)]+this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)]['fRadiusRight']||this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x489)]+this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x394)]<=0.8||1.2<=this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)]['fRadiusTop']+this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x394)]))return this[_0x418bbf(0x407)]=_0x36832c,-0x1;}for(_0x123209=0x1;_0x123209<0x20;_0x123209++)if(0x0==this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x539)]&&0x0==this['stFishEyeManager'][_0x123209]['bUsed']){this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x539)]=_0x123209,this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x477)]=-0x1,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x29b)]=0x1,this['stFishEyeManager'][_0x123209][_0x418bbf(0x26b)]=_0x43ad98,this['stFishEyeManager'][_0x123209][_0x418bbf(0x1e5)]=_0x541ead,_0x22a23f=_0x123209;break;}if(0x20==_0x123209)return this[_0x418bbf(0x407)]=0x504,-0x1;var _0x16209e=this['_ConvertDisplayEffect'](this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x26b)],this['stFishEyeManager'][_0x22a23f]['emCorrectType']);return _0x3468da[_0x418bbf(0x224)]!=_0x16209e?(0x0==this['stFishEyeManager'][_0x22a23f][_0x418bbf(0x454)]&&(this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x46b)]=_0x16209e,this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x454)]=0x0,this['stFishParam'][_0x22a23f][_0x418bbf(0x3f4)]=0.005,this['stFishParam'][_0x22a23f][_0x418bbf(0x302)][_0x418bbf(0x3d1)]=0.5,this[_0x418bbf(0x3c0)][_0x22a23f]['stPTZParam'][_0x418bbf(0x54b)]=0.5,this[_0x418bbf(0x3c0)][_0x22a23f][_0x418bbf(0x1d0)]=0x0),this['FECErrorCode']=0x0,this['subPortNum']++,_0x123209):_0x22a23f<0x20&&0x0==this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x454)]?(this['stFishEyeManager'][_0x22a23f][_0x418bbf(0x46b)]=_0x16209e,this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x454)]=0x0,this[_0x418bbf(0x3c0)][_0x22a23f][_0x418bbf(0x3f4)]=0x0,this[_0x418bbf(0x3c0)][_0x22a23f][_0x418bbf(0x302)][_0x418bbf(0x3d1)]=0x0,this[_0x418bbf(0x3c0)][_0x22a23f]['stPTZParam'][_0x418bbf(0x54b)]=0x0,this['stFishParam'][_0x22a23f]['fWideScanOffset']=0x0,this['FECErrorCode']=0x0,this[_0x418bbf(0x376)]++,_0x123209):(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x3c4)]=null,this['stFishEyeManager'][_0x123209]['nSubPort']=0x0,this[_0x418bbf(0x4de)][_0x123209]['sCanvasID']='',this[_0x418bbf(0x4de)][_0x123209]['bUsed']=0x0,this[_0x418bbf(0x4de)][_0x123209]['bInit']=0x0,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x477)]=0x0,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x26b)]=_0xf574bd,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]=_0x462c41,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x46b)]=_0x3468da[_0x418bbf(0x224)],this[_0x418bbf(0x407)]=_0x332ff6,-0x1);}},{'key':_0x43f8ac(0x4e0),'value':function(_0x18dba9){var _0x5df788=_0x43f8ac;return null!==this[_0x5df788(0x4de)][_0x18dba9][_0x5df788(0x3c4)]&&(this[_0x5df788(0x407)]=0x515,returnmpCtrlDefine[_0x5df788(0x519)]),null==this[_0x5df788(0x4de)][_0x18dba9][_0x5df788(0x3c4)]&&(this[_0x5df788(0x4de)][_0x18dba9]['pRender']=new _0x50f103(),this['stFishEyeManager'][_0x18dba9][_0x5df788(0x3c4)]['SR_SetFishParamManager'](this['pFishParamManager'])),1;}},{'key':_0x43f8ac(0x281),'value':function(_0x1ccc70,_0x1725b3){var _0x29e977=_0x43f8ac;if(null==this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x3c4)])return this[_0x29e977(0x407)]=_0x5a306e;if(_0x1ccc70<0x1||0x1f<_0x1ccc70)return this[_0x29e977(0x407)]=0x512;if(0x0==this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x29b)])return this[_0x29e977(0x407)]=_0xa54871;if(null==_0x1725b3)return this[_0x29e977(0x407)]=0x519;if(0x0==this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x539)]||0x0==this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x29b)])return this['FECErrorCode']=_0xa54871;if(0x0!=this[_0x29e977(0x4de)][_0x1ccc70]['bInited']&&null!=this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e3)])return _0x1725b3!=this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e3)]?this[_0x29e977(0x407)]=0x506:0x1;SR_DE_FISH_ORIGINAL;var _0xdeac49=this[_0x29e977(0x380)](this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x26b)],this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e5)]),_0x2db78=this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x3c4)][_0x29e977(0x3e5)](_0x1725b3);return this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x477)]=this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x3c4)][_0x29e977(0x485)](_0xdeac49),_0x13949e['SR_OK']!=_0x2db78||_0x13949e['SR_OK']!=retSASP?(this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x454)]=0x0,this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e3)]=null,this[_0x29e977(0x407)]=_0xa54871):(this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x454)]=0x1,this[_0x29e977(0x4de)][_0x1ccc70]['sCanvasID']=_0x1725b3,_0x17c71b<=this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x1e5)]&&(_0xdeac49=this[_0x29e977(0x4de)][_0x1ccc70]['pRender'][_0x29e977(0x3a7)](_0x45c70b,0x0),_0x13949e['SR_OK']!=_0xdeac49&&console[_0x29e977(0x514)](_0x29e977(0x307),_0xdeac49)),0x0<this[_0x29e977(0x501)]&&(this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x3c4)][_0x29e977(0x2e7)](this[_0x29e977(0x501)]),this[_0x29e977(0x501)]=0x0),0x1);}},{'key':_0x43f8ac(0x3ed),'value':function(_0x42bad4,_0x524b3c,_0x578b65){var _0x13d559=_0x43f8ac;return 0x0!=_0x42bad4&&(0x1==this['stFishEyeManager'][_0x42bad4][_0x13d559(0x454)]&&(_0x13949e[_0x13d559(0x4a6)]==this[_0x13d559(0x4de)][_0x42bad4]['pRender'][_0x13d559(0x41e)](this['stFishEyeManager'][_0x42bad4][_0x13d559(0x477)])&&(this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x454)]=0x0,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x477)]=-0x1),this['stFishEyeManager'][_0x42bad4][_0x13d559(0x3c4)][_0x13d559(0x4b2)]()),this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x3c4)]=null,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x539)]=0x0,this['stFishEyeManager'][_0x42bad4][_0x13d559(0x1e3)]='',this['stFishEyeManager'][_0x42bad4][_0x13d559(0x29b)]=0x0,this[_0x13d559(0x4de)][_0x42bad4]['bInit']=0x0,this[_0x13d559(0x4de)][_0x42bad4]['nValidSubPort']=0x0,this[_0x13d559(0x4de)][_0x42bad4]['emPlaceType']=_0xf574bd,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x1e5)]=_0x462c41,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x46b)]=_0x3468da['SR_DE_FISH_ORIGINAL']),0x1;}},{'key':_0x43f8ac(0x3fb),'value':function(_0x418f60){var _0x329f65=_0x43f8ac;if(0x0!=_0x418f60){if(_0x418f60<0x1||0x1f<_0x418f60)return this[_0x329f65(0x407)]=0x512;if(0x0==this['stFishEyeManager'][_0x418f60][_0x329f65(0x29b)])return this[_0x329f65(0x407)]=_0xa54871;this['stFishParam'][_0x418f60][_0x329f65(0x460)]['fRadiusLeft']=0x0,this[_0x329f65(0x3c0)][_0x418f60][_0x329f65(0x460)]['fRadiusRight']=0x1,this['stFishParam'][_0x418f60][_0x329f65(0x460)][_0x329f65(0x489)]=0x0,this[_0x329f65(0x3c0)][_0x418f60][_0x329f65(0x460)]['fRadiusBottom']=0x1,this['FECErrorCode']=0x0,(this['FECShowMode']=0x0)<this[_0x329f65(0x376)]&&this['subPortNum']--;}return 0x1;}},{'key':_0x43f8ac(0x362),'value':function(_0x4f21ba,_0xa5d4c0){var _0x110f49=_0x43f8ac;if(this['FECErrorCode']=0x0,null==this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)])return this[_0x110f49(0x407)]=_0x5a306e;if(0x0==this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x29b)])return this[_0x110f49(0x407)]=_0xa54871;if(this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]>=_0x17c71b&&this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]<=_0x5357b0&&0x1e&_0xa5d4c0[_0x110f49(0x49e)])return this[_0x110f49(0x407)]=_0x566fd6;if(_0x367f2&_0xa5d4c0[_0x110f49(0x49e)]){if(null==_0xa5d4c0[_0x110f49(0x460)])return _0x36832c;for(var _0x12d85b=0x1;_0x12d85b<0x20;_0x12d85b++){if(this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x539)]&&_0x11da1d==this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x1e5)]&&(_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)]<=-0.5||0.4<=_0xa5d4c0['stCycleParam'][_0x110f49(0x249)]||_0xa5d4c0['stCycleParam'][_0x110f49(0x326)]<=0.6||1.5<=_0xa5d4c0['stCycleParam'][_0x110f49(0x326)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop']<=-0.5||0x0<_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusBottom']<0x1||1.5<=_0xa5d4c0['stCycleParam'][_0x110f49(0x394)]||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]<=0.8||1.2<=_0xa5d4c0[_0x110f49(0x460)]['fRadiusLeft']+_0xa5d4c0['stCycleParam'][_0x110f49(0x326)]||_0xa5d4c0['stCycleParam'][_0x110f49(0x489)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x394)]<=0.8||1.2<=_0xa5d4c0['stCycleParam'][_0x110f49(0x489)]+_0xa5d4c0['stCycleParam'][_0x110f49(0x394)]))return this[_0x110f49(0x407)]=_0x36832c;if(this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x539)]&&_0x5357b0==this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x1e5)]&&(_0xa5d4c0[_0x110f49(0x460)]['fRadiusLeft']<=-0.5||0x0<_0xa5d4c0[_0x110f49(0x460)]['fRadiusLeft']||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]<0x1||1.5<=_0xa5d4c0[_0x110f49(0x460)]['fRadiusRight']||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)]<=-0.5||0.4<=_0xa5d4c0['stCycleParam'][_0x110f49(0x489)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusBottom']<=0.6||1.5<=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x394)]||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]<=0.8||1.2<=_0xa5d4c0['stCycleParam'][_0x110f49(0x249)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop']+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x394)]<=0.8||1.2<=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)]+_0xa5d4c0['stCycleParam'][_0x110f49(0x394)]))return this[_0x110f49(0x407)]=_0x36832c;}}if(0x0==this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x454)]){if(_0x142076&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4beee9!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]&&_0x316080!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)]||_0x40926f==this[_0x110f49(0x4de)][_0x4f21ba]['emPlaceType'])return this[_0x110f49(0x407)]=_0x566fd6;for(var _0x4272d5=0x1;_0x4272d5<0x20;_0x4272d5++)if(this[_0x110f49(0x4de)][_0x4272d5]['nSubPort']&&this[_0x110f49(0x4de)][_0x4272d5][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x4272d5]['emCorrectType']==_0x4ebb4e)return this[_0x110f49(0x407)]=_0x127bf2;this['stFishParam'][_0x4f21ba][_0x110f49(0x1d0)]=_0xa5d4c0[_0x110f49(0x47c)];}if(_0x42215a&_0xa5d4c0[_0x110f49(0x49e)]){if(null==_0xa5d4c0[_0x110f49(0x320)])return _0x36832c;if(0xff<_0xa5d4c0[_0x110f49(0x320)]['nR']||0xff<_0xa5d4c0['stPTZColor']['nG']||0xff<_0xa5d4c0[_0x110f49(0x320)]['nB']||0xff<_0xa5d4c0['stPTZColor'][_0x110f49(0x24b)])return this[_0x110f49(0x407)]=_0x566fd6;this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nR']=_0xa5d4c0[_0x110f49(0x320)]['nR'],this[_0x110f49(0x3c0)][_0x4f21ba]['stPTZColor']['nG']=_0xa5d4c0[_0x110f49(0x320)]['nG'],this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nB']=_0xa5d4c0['stPTZColor']['nB'],this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nAlpha']=_0xa5d4c0[_0x110f49(0x320)]['nAlpha'];}if(_0x2802b6&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4ebb4e!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)])return this[_0x110f49(0x407)]=_0x566fd6;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x302)][_0x110f49(0x3d1)]=_0xa5d4c0[_0x110f49(0x4a3)]['fPTZPositionX'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x302)]['fPTZPositionY']=_0xa5d4c0[_0x110f49(0x4a3)][_0x110f49(0x54b)];}if(_0x168627&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4ebb4e!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)])return this[_0x110f49(0x407)]=_0x566fd6;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x3f4)]=_0xa5d4c0['fPTZZoom'];}if(_0x3db8be&_0xa5d4c0[_0x110f49(0x49e)]){if(null==this[_0x110f49(0x3c0)]['stPTZSelect'])return _0x566fd6;if(_0x4ebb4e!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)])return this['FECErrorCode']=_0x566fd6;this['stFishParam']['stPTZSelect'][_0x110f49(0x24a)]=_0xa5d4c0[_0x110f49(0x39b)]['fTop'],this[_0x110f49(0x3c0)][_0x110f49(0x39b)][_0x110f49(0x339)]=_0xa5d4c0[_0x110f49(0x39b)]['fBottom'],this[_0x110f49(0x3c0)][_0x110f49(0x39b)]['fLeft']=_0xa5d4c0[_0x110f49(0x39b)][_0x110f49(0x478)],this[_0x110f49(0x3c0)][_0x110f49(0x39b)]['fRight']=_0xa5d4c0[_0x110f49(0x39b)][_0x110f49(0x2d2)];}if(_0x367f2&_0xa5d4c0['upDateType']){if(null==_0xa5d4c0[_0x110f49(0x460)])return _0x36832c;if(0x0==this[_0x110f49(0x3cc)](_0xa5d4c0[_0x110f49(0x460)]))return this[_0x110f49(0x407)]=_0x36832c;this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x249)]=_0xa5d4c0['stCycleParam'][_0x110f49(0x249)],this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x326)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)],this[_0x110f49(0x3c0)][0x0]['stCycleParam']['fRadiusTop']=_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop'],this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x394)]=_0xa5d4c0['stCycleParam']['fRadiusBottom'];}return 0x1;}if(_0x142076&_0xa5d4c0['upDateType']){if(_0x4beee9!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)]&&_0x316080!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]||_0x40926f==this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x26b)])return this[_0x110f49(0x407)]=_0x566fd6;for(var _0x130833=0x1;_0x130833<0x20;_0x130833++)if(this[_0x110f49(0x4de)][_0x130833][_0x110f49(0x539)]&&this[_0x110f49(0x4de)][_0x130833][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x130833][_0x110f49(0x1e5)]==_0x4ebb4e)return this[_0x110f49(0x407)]=_0x127bf2;var _0x20ce2b={};if(_0x20ce2b['nFishParamType']=_0x1e8e38,_0x20ce2b[_0x110f49(0x40f)]=0x0,_0x20ce2b['fAngle']=_0xa5d4c0[_0x110f49(0x47c)],_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](_0x20ce2b))return this[_0x110f49(0x407)]=_0x127bf2;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x1d0)]=_0xa5d4c0[_0x110f49(0x47c)];}if(_0x42215a&_0xa5d4c0[_0x110f49(0x49e)]){if(null==_0xa5d4c0[_0x110f49(0x320)])return _0x566fd6;if(0xff<_0xa5d4c0[_0x110f49(0x320)]['nR']||0xff<_0xa5d4c0['stPTZColor']['nG']||0xff<_0xa5d4c0['stPTZColor']['nB']||0xff<_0xa5d4c0[_0x110f49(0x320)]['nAlpha'])return this[_0x110f49(0x407)]=_0x566fd6;_0x20ce2b={},(_0x20ce2b['fR']=float(_0xa5d4c0[_0x110f49(0x320)]['nR']/0xff),_0x20ce2b['fG']=float(_0xa5d4c0[_0x110f49(0x320)]['nG']/0xff),_0x20ce2b['fB']=float(_0xa5d4c0[_0x110f49(0x320)]['nB']/0xff),_0x20ce2b['fA']=float(_0xa5d4c0['stPTZColor'][_0x110f49(0x24b)]/0xff),this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nR']=_0xa5d4c0['stPTZColor']['nR'],this['stFishParam'][_0x4f21ba]['stPTZColor']['nG']=_0xa5d4c0[_0x110f49(0x320)]['nG'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x320)]['nB']=_0xa5d4c0['stPTZColor']['nB'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x320)][_0x110f49(0x24b)]=_0xa5d4c0[_0x110f49(0x320)][_0x110f49(0x24b)]);}if(_0x2802b6&_0xa5d4c0['upDateType']){if(_0x4ebb4e!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)])return this[_0x110f49(0x407)]=_0x566fd6;_0x20ce2b={};if(_0x20ce2b['nFishParamType']=_0x1d678a,_0x20ce2b[_0x110f49(0x40f)]=0x0,_0x20ce2b[_0x110f49(0x3d6)]=_0xa5d4c0[_0x110f49(0x4a3)][_0x110f49(0x3d1)],_0x20ce2b[_0x110f49(0x40c)]=_0xa5d4c0[_0x110f49(0x4a3)]['fPTZPositionY'],_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](_0x20ce2b))return this[_0x110f49(0x407)]=_0x127bf2;this[_0x110f49(0x3c0)][_0x4f21ba]['stPTZParam'][_0x110f49(0x3d1)]=_0xa5d4c0[_0x110f49(0x4a3)]['fPTZPositionX'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x302)][_0x110f49(0x54b)]=_0xa5d4c0[_0x110f49(0x4a3)][_0x110f49(0x54b)];}if(_0x168627&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4ebb4e!=this['stFishEyeManager'][_0x4f21ba]['emCorrectType'])return this[_0x110f49(0x407)]=_0x566fd6;_0x20ce2b={};if(_0x20ce2b[_0x110f49(0x260)]=_0x2b1fa6,_0x20ce2b[_0x110f49(0x40f)]=0x0,_0x20ce2b[_0x110f49(0x3f4)]=_0xa5d4c0[_0x110f49(0x50d)],_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](_0x20ce2b))return this['FECErrorCode']=_0x127bf2;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x3f4)]=_0xa5d4c0[_0x110f49(0x50d)];}if(_0x367f2&_0xa5d4c0[_0x110f49(0x49e)]){if(0x0==this['IsValidRadiusParam'](_0xa5d4c0[_0x110f49(0x460)]))return this[_0x110f49(0x407)]=_0x36832c;_0x20ce2b={};if(_0x20ce2b[_0x110f49(0x260)]=_0x3b5c80,_0x20ce2b[_0x110f49(0x40f)]=0x1,_0x20ce2b[_0x110f49(0x27e)]=_0xa5d4c0['stCycleParam']['fRadiusLeft'],_0x20ce2b[_0x110f49(0x469)]=_0xa5d4c0['stCycleParam'][_0x110f49(0x326)],_0x20ce2b['fRYTop']=_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop'],_0x20ce2b[_0x110f49(0x2e9)]=_0xa5d4c0['stCycleParam'][_0x110f49(0x394)],_0x13949e[_0x110f49(0x4a6)]!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x477)],_0x20ce2b))return this[_0x110f49(0x407)]=_0x36832c;this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x249)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)],this['stFishParam'][0x0][_0x110f49(0x460)][_0x110f49(0x326)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)],this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x489)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)],this['stFishParam'][0x0][_0x110f49(0x460)]['fRadiusBottom']=_0xa5d4c0['stCycleParam']['fRadiusBottom'];}return _0x3db8be&_0xa5d4c0['upDateType']&&_0x4ebb4e==this[_0x110f49(0x4de)][_0x4f21ba]['emCorrectType']&&_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba]['pRender']['SR_SetFishParam'](this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x39b)])?this[_0x110f49(0x407)]=0x513:0x1;}},{'key':_0x43f8ac(0x3cc),'value':function(_0x58b8b4){var _0x399f36=_0x43f8ac;return _0x58b8b4[_0x399f36(0x394)]<=_0x58b8b4[_0x399f36(0x489)]||_0x58b8b4[_0x399f36(0x326)]<=_0x58b8b4['fRadiusLeft']?0x0:0x1;}},{'key':'FEC_SetViewParam','value':function(_0x14f9dd,_0x3fd041,_0x3c156d){var _0x417574=_0x43f8ac;return _0x3fd041<_0x30de30||_0x1ab3fe<_0x3fd041?this['FECErrorCode']=_0x14f925:(this[_0x417574(0x407)]=0x0,null==this['stFishEyeManager'][_0x14f9dd]['pRender']?this[_0x417574(0x407)]=_0x5a306e:0x0==this[_0x417574(0x4de)][_0x14f9dd]['bInited']?this[_0x417574(0x407)]=_0xa54871:_0x17c71b<=this['stFishEyeManager'][_0x14f9dd][_0x417574(0x1e5)]?_0x13949e['SR_OK']!=this[_0x417574(0x4de)][_0x14f9dd]['pRender'][_0x417574(0x4c8)](_0x3fd041,_0x3c156d)?this[_0x417574(0x407)]=_0x14f925:0x1:this['FECErrorCode']=_0x566fd6);}},{'key':_0x43f8ac(0x22e),'value':function(_0x29e239,_0x105bcf){var _0x1d32dd=_0x43f8ac;return!(_0x105bcf<0x1||0x3<_0x105bcf||0x0==this['stFishEyeManager'][_0x29e239][_0x1d32dd(0x454)])&&_0x17c71b<=this[_0x1d32dd(0x4de)][_0x29e239][_0x1d32dd(0x1e5)]?this[_0x1d32dd(0x4de)][_0x29e239][_0x1d32dd(0x3c4)][_0x1d32dd(0x2ab)](_0x105bcf):-0x1;}},{'key':_0x43f8ac(0x544),'value':function(_0x16c02c,_0xc338c3,_0x2b49af,_0x96543,_0x4da71b,_0x1c0388,_0x42667f){var _0x4d5b8c=_0x43f8ac;return null==this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x3c4)]?this['FECErrorCode']=_0x5a306e:0x0!=_0xc338c3||0x0!=_0x2b49af?_0x14f925:this['stFishEyeManager'][_0x16c02c]['emCorrectType']!=_0x462c41&&this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x1e5)]!=_0x4beee9&&this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x1e5)]!=_0x316080&&this[_0x4d5b8c(0x4de)][_0x16c02c]['emCorrectType']!=_0x1ae667?_0x332ff6:0x0==this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x454)]?this['FECErrorCode']=_0xa54871:_0x96543<0x0||_0x4da71b<0x0||_0x1c0388<0x0||_0x42667f<0x0?_0x14f925:_0x13949e[_0x4d5b8c(0x4a6)]!=this['stFishEyeManager'][_0x16c02c]['pRender']['SR_SetDisplayRect'](_0x96543,_0x4da71b,_0x1c0388,_0x42667f)?this['FECErrorCode']=0x511:0x1;}},{'key':_0x43f8ac(0x40e),'value':function(_0x523b63,_0x1cd530){var _0x5c3e70=_0x43f8ac;return null==this[_0x5c3e70(0x4de)][_0x523b63][_0x5c3e70(0x3c4)]?this[_0x5c3e70(0x407)]=_0x5a306e:0x0==this['stFishEyeManager'][_0x523b63]['bInited']?this[_0x5c3e70(0x407)]=_0xa54871:_0x13949e[_0x5c3e70(0x4a6)]!=this[_0x5c3e70(0x4de)][_0x523b63][_0x5c3e70(0x3c4)][_0x5c3e70(0x3a7)](_0x45c70b,_0x1cd530)?this['FECErrorCode']=0x511:0x1;}},{'key':_0x43f8ac(0x380),'value':function(_0x17f479,_0x25517d){var _0x19f2c6=_0x43f8ac;switch(_0x17f479){case _0x40926f:return _0x4ebb4e==_0x25517d?_0x3468da[_0x19f2c6(0x4bf)]:_0x316080==_0x25517d||_0x1ae667==_0x25517d?_0x3468da['SR_DE_FISH_PANORAMA_WALL']:_0x17c71b==_0x25517d?_0x3468da[_0x19f2c6(0x2e3)]:_0x396f7c==_0x25517d?_0x3468da[_0x19f2c6(0x4dd)]:_0x11da1d==_0x25517d?_0x3468da[_0x19f2c6(0x36e)]:_0x5357b0==_0x25517d?_0x3468da[_0x19f2c6(0x26f)]:_0x3468da[_0x19f2c6(0x224)];case _0x3b95c4:return _0x4ebb4e==_0x25517d?_0x3468da[_0x19f2c6(0x4c2)]:_0x316080==_0x25517d?_0x3468da[_0x19f2c6(0x2f5)]:_0x4beee9==_0x25517d?_0x3468da[_0x19f2c6(0x3a8)]:_0x1ae667==_0x25517d?_0x3468da[_0x19f2c6(0x33c)]:_0x17c71b==_0x25517d?_0x3468da['SR_DE_FISH_SEMISPHERE']:_0x3ccddf==_0x25517d?_0x3468da[_0x19f2c6(0x3a9)]:_0x1a4011==_0x25517d?_0x3468da[_0x19f2c6(0x4f9)]:_0x396f7c==_0x25517d?_0x3468da['SR_DE_FISH_PLANET']:_0x3468da[_0x19f2c6(0x224)];case _0xf574bd:return _0x4ebb4e==_0x25517d?_0x3468da[_0x19f2c6(0x2b7)]:_0x316080==_0x25517d?_0x3468da[_0x19f2c6(0x208)]:_0x4beee9==_0x25517d?_0x3468da['SR_DE_FISH_PANORAMA_CEILING_180']:_0x1ae667==_0x25517d?_0x3468da[_0x19f2c6(0x33c)]:_0x17c71b==_0x25517d?_0x3468da[_0x19f2c6(0x2e3)]:_0x3ccddf==_0x25517d?_0x3468da['SR_DE_FISH_CYLINDER_CEILING']:_0x1a4011==_0x25517d?_0x3468da[_0x19f2c6(0x3f3)]:_0x396f7c==_0x25517d?_0x3468da['SR_DE_FISH_PLANET']:_0x3468da[_0x19f2c6(0x224)];default:return _0x3468da[_0x19f2c6(0x224)];}return _0x3468da[_0x19f2c6(0x224)];}}]),_0x5bd09b;}()),_0x3b510c=(function(){var _0x19c763=_0x99d5a2;function _0x3bf9bf(){var _0x494c7e=a0_0x1593;_0x160316(this,_0x3bf9bf),this[_0x494c7e(0x1d3)]=0x0,this[_0x494c7e(0x2a1)]=0x0,this[_0x494c7e(0x2da)]=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}return _0x5a3b91(_0x3bf9bf,[{'key':_0x19c763(0x3a0),'value':function(){var _0x2e8656=_0x19c763;this[_0x2e8656(0x1d3)]=this[_0x2e8656(0x404)]();}},{'key':'GetCurTime','value':function(){var _0x27eaee=_0x19c763;return this[_0x27eaee(0x2a1)]=0x3c*new Date()[_0x27eaee(0x4e6)]()*0x3c*0x3e8+0x3c*new Date()[_0x27eaee(0x4d1)]()*0x3e8+0x3e8*new Date()[_0x27eaee(0x44b)]()+new Date()['getMilliseconds'](),this[_0x27eaee(0x1df)]=new Date()[_0x27eaee(0x31a)](),this[_0x27eaee(0x2a1)];}},{'key':_0x19c763(0x20e),'value':function(){var _0x1ada06=_0x19c763,_0x22054f=this[_0x1ada06(0x404)]()-this[_0x1ada06(0x1d3)];return this['lastDate']!==new Date()['getDate']()&&(_0x22054f+=0x18*(new Date()[_0x1ada06(0x31a)]()-this[_0x1ada06(0x1df)])*0x3c*0x3c*0x3e8),_0x22054f;}},{'key':_0x19c763(0x257),'value':function(){var _0x3f3041=_0x19c763;this[_0x3f3041(0x1d3)]=0x0,this[_0x3f3041(0x2a1)]=0x0,this[_0x3f3041(0x2da)]=0x0,this['lastDate']=0x0,this[_0x3f3041(0x1fa)]=0x0;}}]),_0x3bf9bf;}());_0x95cd63=new(function(){var _0xea9a0b=_0x99d5a2;function _0x24ab98(){var _0x85f1d5=a0_0x1593,_0x41dda4=0x0<arguments[_0x85f1d5(0x4f1)]&&void 0x0!==arguments[0x0]?arguments[0x0]:null;_0x160316(this,_0x24ab98),this[_0x85f1d5(0x42d)]=null,this[_0x85f1d5(0x2ae)]=0x0,this[_0x85f1d5(0x48d)]=null,this[_0x85f1d5(0x3d5)]=null,this[_0x85f1d5(0x1fb)]=[],this[_0x85f1d5(0x313)]=!0x1,this[_0x85f1d5(0x353)]=0x0,this[_0x85f1d5(0x3bc)]=0x0,this[_0x85f1d5(0x329)]=!0x0,this[_0x85f1d5(0x24f)]=this['RenderFrame'][_0x85f1d5(0x336)](this),this[_0x85f1d5(0x23f)]=0x2,this[_0x85f1d5(0x439)]=0x1,this[_0x85f1d5(0x36b)]=0x1,this[_0x85f1d5(0x3fe)]=0xe,this[_0x85f1d5(0x3b8)]=!0x1,this[_0x85f1d5(0x509)]=!0x0,this[_0x85f1d5(0x2b0)]='',this[_0x85f1d5(0x2fb)]=!0x1,this[_0x85f1d5(0x4fa)]=!0x1,this[_0x85f1d5(0x455)]=0x0,this[_0x85f1d5(0x436)]=0x0,this[_0x85f1d5(0x52d)]=null,this[_0x85f1d5(0x4b1)]=[],this['curFrameInfo']={},this[_0x85f1d5(0x360)][_0x85f1d5(0x37a)]=0x0,this['sx']=0x0,this['sy']=0x0,this['sw']=0x0,this['sh']=0x0,this[_0x85f1d5(0x279)]=!0x1,this[_0x85f1d5(0x1e1)]=!0x1,this['displayRunning']=!0x0,this[_0x85f1d5(0x37d)]=null,this[_0x85f1d5(0x3d4)]=0x0,this[_0x85f1d5(0x39a)]=this[_0x85f1d5(0x455)]*this[_0x85f1d5(0x436)]*0x3/0x2,this['curFrameIsDisplay']=!0x0,(this[_0x85f1d5(0x4c3)]=null)!=_0x41dda4&&(this[_0x85f1d5(0x4c3)]=_0x41dda4),this[_0x85f1d5(0x2c7)]=_0x85f1d5(0x4eb),this[_0x85f1d5(0x3df)]=null;}return _0x5a3b91(_0x24ab98,[{'key':_0xea9a0b(0x462),'value':function(_0x5c1eba,_0x3b6194,_0x3446a3,_0x5be7bc){var _0xeaa69=_0xea9a0b;this[_0xeaa69(0x42d)]=_0x5c1eba,this[_0xeaa69(0x2ae)]=_0x3b6194,this[_0xeaa69(0x2c7)]=_0x5be7bc,this[_0xeaa69(0x3df)]=new _0x174ce8(),this[_0xeaa69(0x3df)][_0xeaa69(0x213)](this[_0xeaa69(0x42d)],this[_0xeaa69(0x2c7)]),this[_0xeaa69(0x3b2)](0x2),null==this['oVideoDecoder']&&(this['oVideoDecoder']=new _0x4c7866(_0x3446a3,this,this[_0xeaa69(0x4c3)]),this['frameBuffers']=this['oVideoDecoder']['ready_frames'],null!==this[_0xeaa69(0x3d5)]&&this['oVideoDecoder']['initDecoder']()),null==this[_0xeaa69(0x37d)]&&(this[_0xeaa69(0x37d)]=new _0x3b510c());}},{'key':_0xea9a0b(0x46f),'value':function(){var _0x339af2=_0xea9a0b;this[_0x339af2(0x4c3)][_0x339af2(0x41b)](),this[_0x339af2(0x4c3)][_0x339af2(0x507)](0x0),this[_0x339af2(0x4c3)][_0x339af2(0x497)]();}},{'key':_0xea9a0b(0x2cd),'value':function(_0x9ae98,_0x302653){var _0x50b2e9=_0xea9a0b,_0x172b73={};_0x172b73['port']=_0x302653[_0x50b2e9(0x3c6)],_0x172b73[_0x50b2e9(0x272)]=_0x302653['codecType'],_0x172b73[_0x50b2e9(0x3fd)]=_0x302653[_0x50b2e9(0x3fd)],_0x172b73[_0x50b2e9(0x495)]=_0x302653[_0x50b2e9(0x495)],_0x172b73[_0x50b2e9(0x36f)]=_0x302653['width'],_0x172b73['height']=_0x302653[_0x50b2e9(0x483)],_0x172b73['timeStamp']=_0x302653[_0x50b2e9(0x37a)],_0x172b73[_0x50b2e9(0x4d9)]=_0x302653['frameRate'],_0x172b73[_0x50b2e9(0x1dc)]=_0x302653[_0x50b2e9(0x1dc)],_0x172b73[_0x50b2e9(0x50a)]=_0x302653['interlace'],_0x172b73[_0x50b2e9(0x2c4)]=_0x302653[_0x50b2e9(0x2c4)],_0x172b73[_0x50b2e9(0x46d)]=_0x302653[_0x50b2e9(0x46d)],_0x172b73['cropRight']=_0x302653[_0x50b2e9(0x2fd)],_0x172b73[_0x50b2e9(0x2ba)]=_0x302653[_0x50b2e9(0x2ba)],_0x172b73[_0x50b2e9(0x268)]=_0x302653['cropBottom'],_0x172b73[_0x50b2e9(0x321)]=_0x302653[_0x50b2e9(0x321)],_0x172b73[_0x50b2e9(0x3e1)]=_0x302653[_0x50b2e9(0x3e1)],_0x172b73['week']=_0x302653[_0x50b2e9(0x451)],_0x172b73[_0x50b2e9(0x3cd)]=_0x302653[_0x50b2e9(0x3cd)],_0x172b73[_0x50b2e9(0x2d4)]=_0x302653['hour'],_0x172b73[_0x50b2e9(0x3f9)]=_0x302653[_0x50b2e9(0x3f9)],_0x172b73[_0x50b2e9(0x430)]=_0x302653[_0x50b2e9(0x430)],_0x172b73[_0x50b2e9(0x465)]=_0x302653[_0x50b2e9(0x465)],this[_0x50b2e9(0x4b1)][_0x50b2e9(0x51d)](_0x172b73),this['oVideoDecoder']['inputData'](_0x9ae98,_0x302653);}},{'key':_0xea9a0b(0x31e),'value':function(){var _0x269949=this;return new Promise(function(_0x5871c6,_0x42657f){var _0x564e7=a0_0x1593;_0x269949[_0x564e7(0x3d5)][_0x564e7(0x3b7)]()[_0x564e7(0x39e)](function(){var _0xe37438=_0x564e7;_0x269949[_0xe37438(0x4b1)][_0xe37438(0x21a)](0x0,_0x269949[_0xe37438(0x4b1)][_0xe37438(0x4f1)]),_0x269949['curFrameInfo']={},_0x269949['renderCurStatus']=0x2,_0x269949[_0xe37438(0x4c3)]?_0x269949['player'][_0xe37438(0x450)]():postMessage({'function':'resetEnd'}),_0x5871c6();},function(){_0x42657f();});});}},{'key':_0xea9a0b(0x341),'value':function(){var _0x46697f=_0xea9a0b;this['initTimer']=!0x1,this[_0x46697f(0x353)]=0x0,this[_0x46697f(0x3bc)]=0x0,this[_0x46697f(0x329)]=!0x0,null!=this[_0x46697f(0x37d)]&&this[_0x46697f(0x37d)]['timerReset'](),this[_0x46697f(0x24f)]=this[_0x46697f(0x24f)]['bind'](this),this[_0x46697f(0x23f)]=0x2,this[_0x46697f(0x31d)]=0x0,this[_0x46697f(0x402)]=null,this[_0x46697f(0x2fb)]=!0x1,this[_0x46697f(0x4fa)]=!0x1,this[_0x46697f(0x279)]=!0x1,this['getCropImageBMP']=!0x1,this[_0x46697f(0x390)]=!0x0,this[_0x46697f(0x52d)]=null,this['displayFrameInfo']['splice'](0x0,this[_0x46697f(0x4b1)][_0x46697f(0x4f1)]),this[_0x46697f(0x360)]={};}},{'key':'_destroyPlayCtrl','value':function(){var _0x22b82e=_0xea9a0b,_0x20110c=this;this['oVideoDecoder'][_0x22b82e(0x409)]()[_0x22b82e(0x39e)](function(){var _0x54c9c9=_0x22b82e;(_0x20110c[_0x54c9c9(0x3d5)]=null)!=_0x20110c[_0x54c9c9(0x3df)]&&(_0x20110c['oVideoRender'][_0x54c9c9(0x4c7)](),_0x20110c[_0x54c9c9(0x3df)]=null),_0x20110c[_0x54c9c9(0x341)](),_0x20110c[_0x54c9c9(0x37d)]=null,console[_0x54c9c9(0x514)](_0x54c9c9(0x3b3)),_0x20110c[_0x54c9c9(0x248)]=!0x1;},function(){var _0x1fc14b=_0x22b82e;console[_0x1fc14b(0x514)](_0x1fc14b(0x296));});}},{'key':_0xea9a0b(0x24f),'value':function(){var _0xaa4da6=_0xea9a0b,_0x51240b,_0x52d931,_0x449d91,_0x475db2=this;switch(this[_0xaa4da6(0x23f)]){case 0x0:this[_0xaa4da6(0x341)](),this[_0xaa4da6(0x31e)]()['then'](function(){setTimeout(function(){var _0x163b8e=a0_0x1593;_0x475db2[_0x163b8e(0x24f)]();},0x1);},function(){});break;case 0x2:this[_0xaa4da6(0x248)]?(this[_0xaa4da6(0x402)]=this[_0xaa4da6(0x304)](),-0x1==this['displayBuf']||0x0==this[_0xaa4da6(0x2ae)]?(null!=this['chosenFrame']&&(this[_0xaa4da6(0x31d)]=this['chosenFrame'][_0xaa4da6(0x264)],this[_0xaa4da6(0x396)](this['chosenFrame'])),requestAnimationFrame(this[_0xaa4da6(0x24f)])):null!=this['chosenFrame']?(this[_0xaa4da6(0x313)]&&!this['resetTimer']||(this[_0xaa4da6(0x37d)][_0xaa4da6(0x3a0)](),this[_0xaa4da6(0x313)]=!0x0,this[_0xaa4da6(0x329)]=!0x1,this[_0xaa4da6(0x353)]=this[_0xaa4da6(0x402)][_0xaa4da6(0x264)],this[_0xaa4da6(0x3bc)]=this[_0xaa4da6(0x402)]['timestamp']),this[_0xaa4da6(0x31d)]=this[_0xaa4da6(0x402)][_0xaa4da6(0x264)],_0x51240b=this[_0xaa4da6(0x31d)]-this['preTimeStamp'],_0x449d91=this[_0xaa4da6(0x31d)]-this[_0xaa4da6(0x3bc)],(0x1388<_0x51240b||_0x51240b<0x0||_0x449d91<0x0)&&(this[_0xaa4da6(0x37d)][_0xaa4da6(0x3a0)](),this['preTimeStamp']=this[_0xaa4da6(0x402)]['timestamp'],this[_0xaa4da6(0x3bc)]=this[_0xaa4da6(0x31d)]),(_0x51240b=(this[_0xaa4da6(0x31d)]-this[_0xaa4da6(0x3bc)])/this[_0xaa4da6(0x439)]-this['oRenderTimer'][_0xaa4da6(0x20e)]())<0xf&&-0xf<_0x51240b?(this['paint'](this[_0xaa4da6(0x402)]),this[_0xaa4da6(0x353)]=this['curTimeStamp'],this[_0xaa4da6(0x24f)]()):_0x51240b<0x0?(setTimeout(this[_0xaa4da6(0x396)](this[_0xaa4da6(0x402)]),0x1),this[_0xaa4da6(0x353)]=this[_0xaa4da6(0x31d)],this[_0xaa4da6(0x24f)]()):_0x52d931=setTimeout(function(){var _0x3b4cff=_0xaa4da6;0x2==_0x475db2[_0x3b4cff(0x23f)]?(_0x475db2[_0x3b4cff(0x396)](_0x475db2[_0x3b4cff(0x402)]),_0x475db2['preTimeStamp']=_0x475db2['curTimeStamp']):_0x475db2[_0x3b4cff(0x390)]=!0x1,_0x475db2[_0x3b4cff(0x24f)](),clearTimeout(_0x52d931);},_0x51240b-0x5)):(_0x449d91=0x5,0x2<this[_0xaa4da6(0x439)]&&(_0x449d91=0x1),setTimeout(function(){var _0xe89497=_0xaa4da6;_0x475db2[_0xe89497(0x24f)]();},_0x449d91))):setTimeout(function(){var _0x4c3ab8=_0xaa4da6;_0x475db2[_0x4c3ab8(0x24f)]();},0x5);break;case 0x3:setTimeout(function(){var _0x13b3c5=_0xaa4da6;_0x475db2[_0x13b3c5(0x410)](),_0x475db2[_0x13b3c5(0x24f)]();},0x5);break;case 0x5:this[_0xaa4da6(0x3b8)]&&(this['chosenFrame']=this['chooseFrame'](),null!=this[_0xaa4da6(0x402)]&&setTimeout(function(){var _0x5c3099=_0xaa4da6;_0x475db2[_0x5c3099(0x396)](_0x475db2[_0x5c3099(0x402)]),_0x475db2[_0x5c3099(0x3b8)]=!0x1;},0x1)),setTimeout(function(){var _0x3e7f51=_0xaa4da6;_0x475db2[_0x3e7f51(0x410)](),_0x475db2['RenderFrame']();},0x5);break;case 0x4:return void this[_0xaa4da6(0x4d4)]();default:return;}}},{'key':_0xea9a0b(0x396),'value':function(_0x7dffa7){var _0x494d32=_0xea9a0b,_0x4baac6,_0x28620e,_0x33d7b9=this;0x4!=this[_0x494d32(0x3d9)]&&null!=_0x7dffa7&&(this[_0x494d32(0x3d4)]===_0x7dffa7['timestamp']&&(this[_0x494d32(0x329)]=!0x0),null!=this[_0x494d32(0x3df)]&&(this[_0x494d32(0x3df)][_0x494d32(0x46a)](_0x7dffa7),null!==this['displayFrameInfoCB']&&this[_0x494d32(0x4e5)](_0x7dffa7['timestamp']),(this[_0x494d32(0x2fb)]||this['getImageBMP']||this[_0x494d32(0x279)]||this[_0x494d32(0x1e1)])&&(this[_0x494d32(0x455)]===_0x7dffa7['displayWidth']&&this[_0x494d32(0x436)]==_0x7dffa7[_0x494d32(0x436)]||(this[_0x494d32(0x455)]=_0x7dffa7['displayWidth'],this['displayHeight']=_0x7dffa7['displayHeight'],this[_0x494d32(0x39a)]=this[_0x494d32(0x455)]*this[_0x494d32(0x436)]*0x3/0x2),_0x4baac6=new Uint8Array(this[_0x494d32(0x39a)]),_0x28620e=_0x7dffa7[_0x494d32(0x32a)],_0x7dffa7['copyTo'](_0x4baac6)[_0x494d32(0x39e)](function(){_0x33d7b9['postImageData'](_0x4baac6,_0x28620e);})),this['firstFrame']&&(null!=this[_0x494d32(0x4c3)]?null!=this['player'][_0x494d32(0x2dc)]&&this[_0x494d32(0x4c3)]['FFCallBackFun']():postMessage({'function':'firstFrameCB','value':!0x0}),this['firstFrame']=!0x1)));}},{'key':_0xea9a0b(0x4e5),'value':function(_0x445787){var _0x372813=_0xea9a0b;if(0x0!=this[_0x372813(0x4b1)]['length']&&this[_0x372813(0x360)][_0x372813(0x37a)]!==_0x445787){for(var _0x3ded74={},_0x34ce27=0x0;_0x34ce27<this[_0x372813(0x4b1)][_0x372813(0x4f1)]&&(_0x3ded74=this[_0x372813(0x4b1)][_0x372813(0x21b)]())['timeStamp']!=_0x445787;_0x34ce27++);this[_0x372813(0x360)][_0x372813(0x3c6)]=_0x3ded74[_0x372813(0x3c6)],this[_0x372813(0x360)]['codecType']=_0x3ded74[_0x372813(0x272)],this[_0x372813(0x360)]['frameType']=_0x3ded74[_0x372813(0x3fd)],this[_0x372813(0x360)][_0x372813(0x495)]=_0x3ded74['frameSize'],this[_0x372813(0x360)][_0x372813(0x36f)]=_0x3ded74[_0x372813(0x36f)],this['curFrameInfo']['height']=_0x3ded74[_0x372813(0x483)],this['curFrameInfo'][_0x372813(0x37a)]=_0x3ded74[_0x372813(0x37a)],this[_0x372813(0x360)]['frameRate']=_0x3ded74[_0x372813(0x4d9)],this[_0x372813(0x360)][_0x372813(0x1dc)]=_0x3ded74[_0x372813(0x1dc)],this['curFrameInfo'][_0x372813(0x50a)]=_0x3ded74[_0x372813(0x50a)],this[_0x372813(0x360)][_0x372813(0x2c4)]=_0x3ded74[_0x372813(0x2c4)],this['curFrameInfo'][_0x372813(0x46d)]=_0x3ded74[_0x372813(0x46d)],this['curFrameInfo'][_0x372813(0x2fd)]=_0x3ded74[_0x372813(0x2fd)],this[_0x372813(0x360)]['cropTop']=_0x3ded74[_0x372813(0x2ba)],this[_0x372813(0x360)][_0x372813(0x268)]=_0x3ded74[_0x372813(0x268)],this[_0x372813(0x360)][_0x372813(0x321)]=_0x3ded74[_0x372813(0x321)],this[_0x372813(0x360)]['month']=_0x3ded74[_0x372813(0x3e1)],this[_0x372813(0x360)][_0x372813(0x451)]=_0x3ded74[_0x372813(0x451)],this[_0x372813(0x360)][_0x372813(0x3cd)]=_0x3ded74[_0x372813(0x3cd)],this[_0x372813(0x360)][_0x372813(0x2d4)]=_0x3ded74[_0x372813(0x2d4)],this[_0x372813(0x360)][_0x372813(0x3f9)]=_0x3ded74[_0x372813(0x3f9)],this[_0x372813(0x360)][_0x372813(0x430)]=_0x3ded74[_0x372813(0x430)],this[_0x372813(0x360)][_0x372813(0x465)]=_0x3ded74[_0x372813(0x465)],this[_0x372813(0x52d)](this['curFrameInfo']);}}},{'key':_0xea9a0b(0x342),'value':function(_0x3b6eb6,_0x3d131d){var _0x262edd=_0xea9a0b;this[_0x262edd(0x4c3)]?(this[_0x262edd(0x2fb)]&&(this[_0x262edd(0x2fb)]=!0x1,this[_0x262edd(0x4c3)][_0x262edd(0x2df)](_0x3b6eb6,this[_0x262edd(0x39a)],this[_0x262edd(0x455)],this[_0x262edd(0x436)],_0x262edd(0x529),_0x3d131d,0x0,0x0,0x0,0x0)),this[_0x262edd(0x4fa)]&&(this['getImageBMP']=!0x1,this[_0x262edd(0x4c3)][_0x262edd(0x2df)](_0x3b6eb6,this['yuvLength'],this[_0x262edd(0x455)],this['displayHeight'],'bmp',_0x3d131d,0x0,0x0,0x0,0x0)),this[_0x262edd(0x279)]&&(this[_0x262edd(0x279)]=!0x1,this['player'][_0x262edd(0x2df)](_0x3b6eb6,this[_0x262edd(0x39a)],this[_0x262edd(0x455)],this['displayHeight'],_0x262edd(0x529),_0x3d131d,this['sx'],this['sy'],this['sw'],this['sh'])),this[_0x262edd(0x1e1)]&&(this[_0x262edd(0x1e1)]=!0x1,this['player']['_GetImage2'](_0x3b6eb6,this['yuvLength'],this[_0x262edd(0x455)],this['displayHeight'],_0x262edd(0x317),_0x3d131d,this['sx'],this['sy'],this['sw'],this['sh']))):(this[_0x262edd(0x2fb)]&&(this['getImageJPEG']=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6[_0x262edd(0x3b1)],'size':this[_0x262edd(0x39a)],'width':this[_0x262edd(0x455)],'height':this['displayHeight'],'type':'jpeg','yuvType':_0x3d131d,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x3b6eb6[_0x262edd(0x3b1)]])),this['getImageBMP']&&(this[_0x262edd(0x4fa)]=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6[_0x262edd(0x3b1)],'size':this['yuvLength'],'width':this['displayWidth'],'height':this[_0x262edd(0x436)],'type':_0x262edd(0x317),'yuvType':_0x3d131d,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x3b6eb6[_0x262edd(0x3b1)]])),this[_0x262edd(0x279)]&&(this[_0x262edd(0x279)]=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6['buffer'],'size':this[_0x262edd(0x39a)],'width':this[_0x262edd(0x455)],'height':this['displayHeight'],'type':_0x262edd(0x529),'yuvType':_0x3d131d,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x3b6eb6['buffer']])),this[_0x262edd(0x1e1)]&&(this['getCropImageBMP']=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6['buffer'],'size':this[_0x262edd(0x39a)],'width':this[_0x262edd(0x455)],'height':this[_0x262edd(0x436)],'type':_0x262edd(0x317),'yuvType':_0x3d131d,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x3b6eb6[_0x262edd(0x3b1)]])));}},{'key':_0xea9a0b(0x304),'value':function(){var _0x5b4c7a=_0xea9a0b,_0x3af6b5=this;if(0x1==this[_0x5b4c7a(0x2ae)]){if(this['frameBuffers']['length']<0x2)return null;}else{if(this[_0x5b4c7a(0x1fb)][_0x5b4c7a(0x4f1)]<0x1)return null;}if(!this['curFrameIsDisplay'])return this[_0x5b4c7a(0x390)]=!0x0,this[_0x5b4c7a(0x1fb)][0x0];{if(null!=this[_0x5b4c7a(0x402)]&&(this[_0x5b4c7a(0x1fb)][_0x5b4c7a(0x21b)]()[_0x5b4c7a(0x493)](),this[_0x5b4c7a(0x402)][_0x5b4c7a(0x493)](),this['chosenFrame']=null),!this[_0x5b4c7a(0x3d5)][_0x5b4c7a(0x2e4)])return this['frameBuffers']['length']<0x1?null:this[_0x5b4c7a(0x1fb)][0x0];this['oVideoDecoder'][_0x5b4c7a(0x3b7)]()['then'](function(){var _0x4256dc=_0x5b4c7a;return _0x3af6b5[_0x4256dc(0x3d5)][_0x4256dc(0x2e4)]=!0x1,null;},function(){return null;});}}},{'key':'SetDisplayRegion','value':function(_0x1e036b,_0x5536fe,_0x1ab49a,_0x16bcc0){var _0x2c9369=_0xea9a0b;return null==this['oVideoRender']?0x0:(this['sx']=_0x1e036b,this['sy']=_0x5536fe,this['sw']=_0x1ab49a,this['sh']=_0x16bcc0,this[_0x2c9369(0x3df)][_0x2c9369(0x355)](_0x1e036b,_0x5536fe,_0x1ab49a,_0x16bcc0));}},{'key':'SetCurStatus','value':function(_0x27b202){this['renderCurStatus']=_0x27b202;}},{'key':_0xea9a0b(0x3a4),'value':function(){var _0x4b8a4a=_0xea9a0b,_0x437f9f=this['_GetFastSpeed'](this['nplaySpeed']);return this[_0x4b8a4a(0x48a)](_0x437f9f);}},{'key':_0xea9a0b(0x536),'value':function(){var _0x3d5697=_0xea9a0b,_0xe47372=this[_0x3d5697(0x492)](this[_0x3d5697(0x36b)]);return this[_0x3d5697(0x48a)](_0xe47372);}},{'key':_0xea9a0b(0x1d2),'value':function(_0x118a98){var _0x1a08d4=_0xea9a0b;if(_0x118a98)this[_0x1a08d4(0x3b2)](0x3);else{if(0x3!==this[_0x1a08d4(0x23f)])return-0x1;this['SetCurStatus'](0x2),this[_0x1a08d4(0x329)]=!0x0;}return 0x1;}},{'key':'_refresh','value':function(){var _0x4e609d=_0xea9a0b;0x0!=this[_0x4e609d(0x1fb)][_0x4e609d(0x4f1)]&&this['paint'](this[_0x4e609d(0x1fb)][0x0]);}},{'key':_0xea9a0b(0x419),'value':function(_0x12dbd8){var _0x5884f6=_0xea9a0b;if(_0x12dbd8)this[_0x5884f6(0x3b2)](0x5),this[_0x5884f6(0x3b8)]=!0x0;else{if(0x5!==this[_0x5884f6(0x23f)])return-0x1;this[_0x5884f6(0x3b2)](0x2),this['resetTimer']=!0x0,this[_0x5884f6(0x3b8)]=!0x1,this[_0x5884f6(0x48a)](0x1);}return 0x1;}},{'key':_0xea9a0b(0x4b7),'value':function(_0x2dbc59,_0xce39a4){var _0x4402be=_0xea9a0b;return null!=this[_0x4402be(0x3df)]&&this['oVideoRender'][_0x4402be(0x4b7)](_0x2dbc59,_0xce39a4);}},{'key':_0xea9a0b(0x286),'value':function(){var _0x201fe7=_0xea9a0b;return null!=this[_0x201fe7(0x3df)]&&this[_0x201fe7(0x3df)][_0x201fe7(0x286)]();}},{'key':_0xea9a0b(0x417),'value':function(){var _0x5d0e83=_0xea9a0b;return this[_0x5d0e83(0x31d)];}},{'key':_0xea9a0b(0x48a),'value':function(_0x275baf){var _0x3287b8=_0xea9a0b;switch(_0x275baf){case-0x10:case-0x8:case-0x4:case-0x2:case 0x1:case 0x2:case 0x4:case 0x8:case 0x10:case 0x20:case 0x40:break;default:return-0x1;}return _0x275baf!==this[_0x3287b8(0x36b)]&&(this[_0x3287b8(0x36b)]=_0x275baf,this[_0x3287b8(0x439)]=0x0<_0x275baf?_0x275baf:-0x1/_0x275baf,console[_0x3287b8(0x514)](_0x3287b8(0x349)+this[_0x3287b8(0x439)]),this[_0x3287b8(0x329)]=!0x0,this[_0x3287b8(0x3b8)]=!0x1,0x2!=this[_0x3287b8(0x23f)]&&this[_0x3287b8(0x3b2)](0x2)),0x1;}},{'key':_0xea9a0b(0x3f8),'value':function(_0x145035){var _0x5d2d4d=0x0;switch(_0x145035){case-0x10:_0x5d2d4d=-0x8;break;case-0x8:_0x5d2d4d=-0x4;break;case-0x4:_0x5d2d4d=-0x2;break;case-0x2:_0x5d2d4d=0x1;break;case 0x1:_0x5d2d4d=0x2;break;case 0x2:_0x5d2d4d=0x4;break;case 0x4:_0x5d2d4d=0x8;break;case 0x8:_0x5d2d4d=0x10;break;case 0x10:_0x5d2d4d=0x20;break;case 0x20:_0x5d2d4d=0x40;break;default:_0x5d2d4d=0x0;}return _0x5d2d4d;}},{'key':_0xea9a0b(0x492),'value':function(_0x187aa1){var _0x2748d1=0x0;switch(_0x187aa1){case-0x8:_0x2748d1=-0x10;break;case-0x4:_0x2748d1=-0x8;break;case-0x2:_0x2748d1=-0x4;break;case 0x1:_0x2748d1=-0x2;break;case 0x2:_0x2748d1=0x1;break;case 0x4:_0x2748d1=0x2;break;case 0x8:_0x2748d1=0x4;break;case 0x10:_0x2748d1=0x8;break;case 0x20:_0x2748d1=0x10;break;case 0x40:_0x2748d1=0x20;break;default:_0x2748d1=0x0;}return _0x2748d1;}},{'key':_0xea9a0b(0x2b8),'value':function(_0x36ab92){var _0x5cdd52=_0xea9a0b;return this[_0x5cdd52(0x3fe)]=_0x36ab92,0x1;}},{'key':_0xea9a0b(0x3be),'value':function(){var _0x48423f=_0xea9a0b;return this[_0x48423f(0x2fb)]=!0x0,this['getImageType']=_0x48423f(0x529),0x1;}},{'key':_0xea9a0b(0x40a),'value':function(){var _0xdf5952=_0xea9a0b;return this['getImageBMP']=!0x0,this[_0xdf5952(0x2b0)]=_0xdf5952(0x317),0x1;}},{'key':'GetCropJPEG','value':function(){var _0x13bd51=_0xea9a0b;return this[_0x13bd51(0x279)]=!0x0,this['getImageType']='Cropjpeg',0x1;}},{'key':'GetCropBMP','value':function(){var _0x227fef=_0xea9a0b;return this[_0x227fef(0x1e1)]=!0x0,this[_0x227fef(0x2b0)]='Cropbmp',0x1;}},{'key':_0xea9a0b(0x534),'value':function(_0x28b7b1){var _0x59e2cf=_0xea9a0b;return this[_0x59e2cf(0x3d4)]=_0x28b7b1,0x1;}},{'key':_0xea9a0b(0x49c),'value':function(){var _0x29ca06=_0xea9a0b;return this[_0x29ca06(0x3d5)][_0x29ca06(0x49c)](),0x1;}},{'key':'SetAntialias','value':function(_0x1233e9){var _0x366f21=_0xea9a0b;return null!=this[_0x366f21(0x3df)]?this[_0x366f21(0x3df)][_0x366f21(0x41f)](_0x1233e9):0x0;}},{'key':_0xea9a0b(0x427),'value':function(_0x4999e8,_0x37b739){var _0x368bd9=_0xea9a0b;return this[_0x368bd9(0x52d)]=_0x37b739?_0x4999e8:null,0x1;}},{'key':'FEC_SetCanvasID','value':function(_0x384d1b){var _0x5bb786=_0xea9a0b;return'2d'===this[_0x5bb786(0x2c7)]||'2D'===this[_0x5bb786(0x2c7)]?(console[_0x5bb786(0x514)](_0x5bb786(0x2d8),'color:red'),0x0):null!=this[_0x5bb786(0x3df)]?this[_0x5bb786(0x3df)][_0x5bb786(0x2bf)](_0x384d1b):0x0;}},{'key':'FEC_ResetCorrectType','value':function(_0x536d6d,_0x5449e1,_0x29ecc8){var _0x4ac92b=_0xea9a0b;return'2d'===this[_0x4ac92b(0x2c7)]||'2D'===this[_0x4ac92b(0x2c7)]?(console[_0x4ac92b(0x514)](_0x4ac92b(0x2d8),_0x4ac92b(0x4cf)),0x0):null!=this['oVideoRender']?this['oVideoRender'][_0x4ac92b(0x49a)](_0x536d6d,_0x5449e1,_0x29ecc8):0x0;}},{'key':'FEC_GetPort','value':function(_0x2f4e33,_0x11e80b){var _0x21d93d=_0xea9a0b;return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log'](_0x21d93d(0x2d8),'color:red'),0x0):null!=this['oVideoRender']?this[_0x21d93d(0x3df)]['FEC_GetPort'](_0x2f4e33,_0x11e80b):0x0;}},{'key':_0xea9a0b(0x4e0),'value':function(_0x568f9b){var _0xcefcda=_0xea9a0b;return'2d'===this[_0xcefcda(0x2c7)]||'2D'===this[_0xcefcda(0x2c7)]?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct',_0xcefcda(0x4cf)),0x0):null!=this[_0xcefcda(0x3df)]?this[_0xcefcda(0x3df)][_0xcefcda(0x4e0)](_0x568f9b):0x0;}},{'key':_0xea9a0b(0x362),'value':function(_0x4ba09b,_0x283978){var _0x202c08=_0xea9a0b;return'2d'===this[_0x202c08(0x2c7)]||'2D'===this[_0x202c08(0x2c7)]?(console[_0x202c08(0x514)](_0x202c08(0x2d8),_0x202c08(0x4cf)),0x0):null!=this[_0x202c08(0x3df)]?this['oVideoRender'][_0x202c08(0x362)](_0x4ba09b,_0x283978):0x0;}},{'key':_0xea9a0b(0x4b6),'value':function(_0x34cd97,_0x373ca6,_0x18c2d3){var _0x529723=_0xea9a0b;return'2d'===this[_0x529723(0x2c7)]||'2D'===this[_0x529723(0x2c7)]?(console[_0x529723(0x514)](_0x529723(0x2d8),_0x529723(0x4cf)),0x0):null!=this[_0x529723(0x3df)]?this[_0x529723(0x3df)][_0x529723(0x4b6)](_0x34cd97,_0x373ca6,_0x18c2d3):0x0;}},{'key':_0xea9a0b(0x22e),'value':function(_0x196177,_0x2827e7){var _0x20c1df=_0xea9a0b;return'2d'===this[_0x20c1df(0x2c7)]||'2D'===this[_0x20c1df(0x2c7)]?(console[_0x20c1df(0x514)](_0x20c1df(0x2d8),_0x20c1df(0x4cf)),0x0):null!=this[_0x20c1df(0x3df)]?this[_0x20c1df(0x3df)][_0x20c1df(0x22e)](_0x196177,_0x2827e7):0x0;}},{'key':_0xea9a0b(0x281),'value':function(_0x47c68c,_0x68e551){var _0x595882=_0xea9a0b;return'2d'===this[_0x595882(0x2c7)]||'2D'===this[_0x595882(0x2c7)]?(console['log'](_0x595882(0x2d8),'color:red'),0x0):null!=this[_0x595882(0x3df)]?this[_0x595882(0x3df)]['FEC_SetWnd'](_0x47c68c,_0x68e551):0x0;}},{'key':'FEC_Disable','value':function(_0x16811c,_0xd2488b,_0x4f7c73){var _0x3d73e2=_0xea9a0b;return'2d'===this[_0x3d73e2(0x2c7)]||'2D'===this[_0x3d73e2(0x2c7)]?(console[_0x3d73e2(0x514)]('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct',_0x3d73e2(0x4cf)),0x0):null!=this['oVideoRender']?this[_0x3d73e2(0x3df)][_0x3d73e2(0x3ed)](_0x16811c,_0xd2488b,_0x4f7c73):0x0;}},{'key':'FEC_DelPort','value':function(_0xbdf370){var _0x2a2289=_0xea9a0b;return'2d'===this['renderEngine']||'2D'===this[_0x2a2289(0x2c7)]?(console[_0x2a2289(0x514)](_0x2a2289(0x2d8),'color:red'),0x0):null!=this[_0x2a2289(0x3df)]?this[_0x2a2289(0x3df)][_0x2a2289(0x3fb)](_0xbdf370):0x0;}},{'key':_0xea9a0b(0x544),'value':function(_0x30b6ba,_0x2ff878,_0x11104e,_0x4fd018,_0x85a955,_0x119c7d,_0x568b0b){var _0x5569dd=_0xea9a0b;return'2d'===this[_0x5569dd(0x2c7)]||'2D'===this['renderEngine']?(console[_0x5569dd(0x514)]('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct',_0x5569dd(0x4cf)),0x0):null!=this[_0x5569dd(0x3df)]?this[_0x5569dd(0x3df)][_0x5569dd(0x544)](_0x30b6ba,_0x2ff878,_0x11104e,_0x4fd018,_0x85a955,_0x119c7d,_0x568b0b):0x0;}},{'key':_0xea9a0b(0x40e),'value':function(_0xcbb05,_0x481dd8){var _0x5951c0=_0xea9a0b;return'2d'===this[_0x5951c0(0x2c7)]||'2D'===this['renderEngine']?(console['log'](_0x5951c0(0x2d8),_0x5951c0(0x4cf)),0x0):null!=this['oVideoRender']?this[_0x5951c0(0x3df)][_0x5951c0(0x40e)](_0xcbb05,_0x481dd8):0x0;}}]),_0x24ab98;}())(),self[_0x99d5a2(0x266)]=function(_0x4a7850){var _0x4e129c=_0x99d5a2,_0x7023b=_0x4a7850[_0x4e129c(0x39d)];switch(_0x7023b[_0x4e129c(0x429)]){case _0x4e129c(0x462):_0x95cd63[_0x4e129c(0x462)](_0x7023b[_0x4e129c(0x42d)],_0x7023b[_0x4e129c(0x2ae)],_0x7023b[_0x4e129c(0x4b5)],_0x7023b[_0x4e129c(0x2c7)]);break;case _0x4e129c(0x2cd):var _0x215010=new Uint8Array(_0x7023b[_0x4e129c(0x41a)]),_0x487c62=_0x7023b[_0x4e129c(0x2fc)];_0x95cd63[_0x4e129c(0x2cd)](_0x215010,_0x487c62),0x0;break;case _0x4e129c(0x433):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),_0x95cd63['SetDisplayRegion'](_0x7023b['sx'],_0x7023b['sy'],_0x7023b['sw'],_0x7023b['sh']);break;case'stop':null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),_0x95cd63[_0x4e129c(0x3b2)](0x4);let _0x546ac0=setInterval(()=>{var _0x4f30b8=_0x4e129c;_0x95cd63[_0x4f30b8(0x248)]||(_0x95cd63=null,self[_0x4f30b8(0x4ab)]({'function':'stop'}),clearInterval(_0x546ac0),_0x546ac0=null,self[_0x4f30b8(0x493)](),console['log']('>>>JS\\x2003\\x20destroy\\x20oVideoPlayCtrl\\x20and\\x20worker'));},0x2);break;case'fast':null===_0x95cd63&&self['postMessage']({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x3a4)]()&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x4ba)});break;case'slow':null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x536)]()&&self[_0x4e129c(0x4ab)]({'function':'paraError'});break;case _0x4e129c(0x2b8):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x2b8)](_0x7023b[_0x4e129c(0x38a)])&&self[_0x4e129c(0x4ab)]({'function':'paraError'});break;case'Pause':null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63['Pause'](_0x7023b[_0x4e129c(0x38a)])&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x4ba)});break;case _0x4e129c(0x419):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x419)](_0x7023b['value'])&&self['postMessage']({'function':'paraError'});break;case _0x4e129c(0x4b7):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x4b7)](_0x7023b[_0x4e129c(0x36f)],_0x7023b[_0x4e129c(0x483)])&&self['postMessage']({'function':_0x4e129c(0x4ba)});break;case _0x4e129c(0x286):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x286)]()&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x4ba)});break;case _0x4e129c(0x417):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':'OrderError'}),_0x215010=_0x95cd63[_0x4e129c(0x417)](),0x0!==_0x215010&&self[_0x4e129c(0x4ab)]({'function':'GetPlayedTime','value':_0x215010});break;case _0x4e129c(0x35b):_0x95cd63['SetCurStatus'](0x0);break;case _0x4e129c(0x3be):_0x95cd63['GetJPEG']();break;case _0x4e129c(0x40a):_0x95cd63[_0x4e129c(0x40a)]();break;case _0x4e129c(0x393):_0x95cd63[_0x4e129c(0x393)]();break;case _0x4e129c(0x464):_0x95cd63[_0x4e129c(0x464)]();break;case'SetDecodeFrameType':_0x95cd63[_0x4e129c(0x534)](_0x7023b[_0x4e129c(0x264)]);break;case _0x4e129c(0x2c4):_0x95cd63[_0x4e129c(0x49c)]();break;case _0x4e129c(0x41f):_0x95cd63[_0x4e129c(0x41f)](_0x7023b[_0x4e129c(0x38a)]);break;case _0x4e129c(0x427):_0x95cd63['SetFrameInfoCallBack'](_0x29c143=>{var _0x3a09fa=_0x4e129c;self[_0x3a09fa(0x4ab)]({'function':_0x3a09fa(0x427),'curFrameInfo':_0x29c143});},_0x7023b[_0x4e129c(0x38a)]);case'FEC_SetCanvasID':_0x95cd63['FEC_SetCanvasID'](_0x7023b[_0x4e129c(0x280)]);break;case _0x4e129c(0x3a5):_0x95cd63[_0x4e129c(0x49a)](_0x7023b[_0x4e129c(0x370)],_0x7023b['placeType'],_0x7023b[_0x4e129c(0x2e0)]);break;case _0x4e129c(0x363):_0x95cd63[_0x4e129c(0x20d)](_0x7023b[_0x4e129c(0x3a1)],_0x7023b[_0x4e129c(0x2e0)]);break;case _0x4e129c(0x53f):_0x95cd63[_0x4e129c(0x4e0)](_0x7023b['fishSubPort']);break;case _0x4e129c(0x3f6):_0x95cd63[_0x4e129c(0x362)](_0x7023b[_0x4e129c(0x370)],_0x7023b['param2d']);break;case _0x4e129c(0x2a9):_0x95cd63[_0x4e129c(0x4b6)](_0x7023b['fishSubPort'],_0x7023b[_0x4e129c(0x49e)],_0x7023b[_0x4e129c(0x47c)]);break;case _0x4e129c(0x358):_0x487c62=_0x95cd63[_0x4e129c(0x22e)](_0x7023b[_0x4e129c(0x370)],_0x7023b[_0x4e129c(0x49e)]),self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x358),'fValue':_0x487c62});break;case'FECSetWnd':_0x95cd63[_0x4e129c(0x281)](_0x7023b['fishSubPort'],_0x7023b['offscrrenCnv']);break;case _0x4e129c(0x530):_0x95cd63[_0x4e129c(0x3ed)](_0x7023b['fishSubPort'],_0x7023b[_0x4e129c(0x28a)],_0x7023b[_0x4e129c(0x4aa)]);break;case _0x4e129c(0x51b):_0x95cd63[_0x4e129c(0x3fb)](_0x7023b[_0x4e129c(0x370)]);break;case _0x4e129c(0x42b):_0x95cd63['FEC_SetDisplayRegion'](_0x7023b[_0x4e129c(0x370)],_0x7023b[_0x4e129c(0x50c)],_0x7023b[_0x4e129c(0x491)],_0x7023b['sx'],_0x7023b['sy'],_0x7023b['sw'],_0x7023b['sh']);break;case'FECSetBackCilling':_0x95cd63[_0x4e129c(0x40e)](_0x7023b['fishSubPort'],_0x7023b[_0x4e129c(0x52f)]);}};})());})()));function a0_0xd9f6(){var _0x382391=['fPTZX','regionSy','bOrtho','curstatus','fRotateX','DeInit','Missing_Module','bCullBack','Invalid_Opcode','oVideoRender','fSinV','month','Get_Char_Index','GetFishParam','num_faces','SR_Init','done','CLAMP_TO_EDGE','Generator\\x20is\\x20already\\x20running','create','SR_ERR_FREETYPE_RESOURCE','pPTZSetColor','SR_DrawLines','FEC_Disable','bPortAllocated','position','Invalid_Argument','9876336DDWcsr','IsOutofImage','SR_DE_FISH_CYLINDER_SPLIT_CEILING','fZoom','imageYUV','FECSetParam','trunc','_GetFastSpeed','minute','bRecreateAntia','FEC_DelPort','flush','frameType','displayBuf','nCylinderPosSize','SR_GetPTZPort','DEFAULT','chosenFrame','style_flags','GetCurTime','fCosV','nSemiSphereTexSize','FECErrorCode','bindBuffer','destroyDecoder','GetBMP','GetPTZDisplayMode','fPTZY','toStringTag','FEC_SetBackCilling','bBlack','_refresh','Raster_Uninitialized','webgl2','abrupt','SR_SetDisplayRect','createTexture','bufferData','GetPlayedTime','IGNORE_TRANSFORM','OneByOne','rawData','JSPlayM4_Stop','sqrt','InitCamera','SR_DelSubPort','SetAntialias','SetNear','Invalid_Stream_Handle','mainSubPort','\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a','Raster_Corrupted','activeTexture','Out_Of_Memory','SetFrameInfoCallBack','COMPUTE_METRICS','command','DEF_In_Glyf_Bytecode','FECSetDisplayRegion','MAX','canvas','completion','arg','second','bLoop','acos','SetDisplayRegion','info','message','displayHeight','setPrototypeOf','@@iterator','playSpeed','SetOrtho','stop','Too_Many_Instruction_Defs','nBasePTZPointNum','glyph','Raster_Overflow','LINEAR_MIPMAP_NEAREST','pCylinderPos','glLinePosBuffer','\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a','FT_Init_FreeType','decodeProcess','clearBufferfi','bPTZSelected','mainCanvasID','Bbx_Too_Big','fScale','getSeconds','Invalid_CharMap_Format','264\\x20hard\\x20decoder','symbol','Invalid_Frame_Operation','JSPlayM4_ResetEnd','week','Too_Many_Function_Defs','nMaxFillBlockTriNum','bInited','displayWidth','Missing_Bitmap','nDrawFontHeight','SetPitch','deleteBuffer','RGBA','pRenderParam','SetRoll','VERTEX_SHADER','288yOchCO','regionSx','stCycleParam','PEDANTIC','init','Invalid_Face_Handle','GetCropBMP','milliseconds','Too_Many_Drivers','Invalid_Stream_Read','configured','fRXRight','DisplayFrame','emEffect','pfuncCBOut','cropLeft','Unlisted_Object','HardDecodeError','nBlockShaderProgram','Could_Not_Find_Context','Raster_Negative_Height','Invalid_Library_Handle','Cannot_Open_Stream','getShaderInfoLog','ascender','nValidSubPort','fLeft','uniformMatrix4fv','Invalid_CharMap_Handle','pRectPoints','fValue','FT_Get_Kerning','method','oVideoHandle','GetPitch','Invalid_Glyph_Format','deleteProgram','height','GetScale','SR_AddSubPort','GetFishPTZFloor','BLEND','FreetypeWasmLoadedCB','fRadiusTop','_SetPlaySpeed','Invalid_Glyph_Index','23456990eUZFpy','context','decoderObj','onload','GetPanoPTZFloor','regionNum','_GetSlowSpeed','close','Locations_Missing','frameSize','max_advance_width','JSPlayM4_Play','fAlpha','suspendedYield','FEC_ResetCorrectType','LIGHT','SetStreamEnd','SR_SetAntialias','upDateType','isGeneratorFunction','TEXTURE_WRAP_S','row','SR_SetPTZColor','fPTZParam','GetPTZPoints','bAntialias','SR_OK','mainFECCorrect','_bind','afterLoc','clearContext','postMessage','root','GetDisplayEffect','Invalid_Table','Render_Glyph','Set_Char_Size','displayFrameInfo','SR_Destroy','processData1','TEXTURE_MAG_FILTER','sab','FEC_SetViewParam','SetCanvasSize','\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a}\\x0a','createShader','paraError','canvas\\x20width:','nPTZRectNum','complete','4516myHmdm','SR_DE_FISH_PTZ_WALL','pCylinderTex','Invalid_Composite','SR_DE_FISH_PTZ_FLOOR','player','bRecreateTex','reportError','bBackground','ReleaseDisplay','SR_SetViewParam','SR_DE_FISH_SPHERE','NO_AUTOHINT','FT_Render_Glyph','codedHeight','Load_Char','depthFunc','color:red','Too_Many_Hints','getMinutes','configure','Corrupted_Font_Glyphs','_destroyPlayCtrl','pUserOut','enDisplayEffect','ComputePTZPoints','formatVideoDecoderConfigure','frameRate','NORMAL','%c\\x2020230516\\x20hardDecoder\\x20not\\x20support\\x20correctType:%d','SR_DE_FISH_CYLINDER_CEILING','SR_DE_FISH_PLANET','stFishEyeManager','getProgramInfoLog','FEC_Enable','prev','GetPanoPTZWall','SR_ERR_CANVAS','script','respondFrameInfoCB','getHours','UpdateCircyeParam','InitFECParam','regeneratorRuntime','Invalid_Stream_Seek','webgl','FT_Get_Char_Index','fRY2','texture','fNear','SR_SetFishParam','length','FLOAT','GetPlaceType','Post_Table_Missing','SR_DE_FISH_PANORAMA_CEILING_180','apply','NO_SCALE','nCylinderTexSize','SR_DE_FISH_CYLINDER_SPLIT_FLOOR','getImageBMP','__esModule','glLineClrBuffer','async','bInit','webgl\\x20render','next','FECShowMode','frameDisplayWidth','GetRenderParam','bitmap','arrayBuffer','\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20pp;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.x\\x20\\x20=\\x20position.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20\\x20=\\x20position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.z\\x20\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.w\\x20\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a','JSPlayM4_SetDecodeEngine','Cannot_Render_Glyph','firstFrame','interlace','glBlockClrBuffer','type','fPTZZoom','hardDecode\\x20reportError:','pstFontColor','GetPointPano2FishFloor','SR_GetFishParam','\\x0aattribute\\x20vec3\\x20xy;\\x0aattribute\\x20vec2\\x20uv;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20gl_Position\\x20=\\x20vec4(xy,\\x201.0);\\x0a\\x20\\x20//\\x20Map\\x20vertex\\x20coordinates\\x20(-1\\x20to\\x20+1)\\x20to\\x20UV\\x20coordinates\\x20(0\\x20to\\x201).\\x0a\\x20\\x20//\\x20UV\\x20coordinates\\x20are\\x20Y-flipped\\x20relative\\x20to\\x20vertex\\x20coordinates.\\x0a\\x20\\x20//v_uv\\x20=\\x20vec2((1.0\\x20+\\x20xy.x)\\x20/\\x202.0,\\x20(1.0\\x20-\\x20xy.y)\\x20/\\x202.0);\\x0a\\x20\\x20v_uv\\x20=\\x20uv;\\x0a}\\x0a','bBackGround','log','__proto__','nSurfaceTexture','5769620COWrYT','LINEAR_DESIGN','FEC_ERR_ENABLED','text/javascript','FECDelPort','resolve','push','ctx','scale(1)','pstFontBGLines','style_name','GetView','GetPointFish2PanoCeiling','SetPTZDisplayMode','ComputeAngleHorizontal','TRIANGLES','createProgram','fVAngleSin','jpeg','drawArrays','decoderCurStatus','SetPTZColor','displayFrameInfoCB','vertexPosBuffer','bValue','FECDisable','[object\\x20Generator]','prototype','GetPTZPort','SetDecodeFrameType','Library:init\\x20','slow','FT_Load_Char','nPanoPTZPointNum','nSubPort','nSemiSpherePosSize','resultName','underflow','texturePosBuffer','FreetypeLibHandle','FECEnable','nMaxPointNum','ready_frames','fill','key','FEC_SetDisplayRegion','prefer-software','COLOR_BUFFER_BIT','SR_GetCanvasSize','GetPointPano2FishWall','underline_position','subarray','fPTZPositionY','default','disable','Module','Invalid_Slot_Handle','SR_SetCallBack','fWideScanOffset','Invalid_Frame_Read','Pause','startTime','TEXTURE_MIN_FILTER','FORCE_AUTOHINT','matProj','Stack_Underflow','body','GetPointPano2FishCeiling','NONE','>>>JS\\x2001\\x20destroy\\x20decoderObj','frameNum','IsPortAllocated','nFontWidth','lastDate','bbox','getCropImageBMP','fHAngleSin','sCanvasID','experimental-webgl','emCorrectType','abs','tryEntries','Too_Few_Arguments','videoShaderProgram','354880YIvBTM','GetFishPTZCeiling','hardwareAcceleration','UpdatePTZPosition','pFishParam','vecUp','LCD','GeneratorFunction','onlySupportedWebGL1','Library:done\\x20','Missing_Fontboundingbox_Field','nCut','GetPTZColor','matView','fRX1','BITMAP_METRICS_ONLY','preTimerStamp','frameBuffers','needRect','SR_ERR_FREETYPE_INIT','nDisplayEffect','getAttribLocation','rval','dispatchException','sin','SR_ERR_PARAM','Too_Many_Extensions','nLineWidth','regionSh','ComputeAngleVertical','SR_DE_FISH_PANORAMA_CEILING_360','nStreamEnd','LINEAR','COMPOSITE','sent','FEC_GetPort','GetTimerWalk','Name_Table_Missing','SetYaw','num_glyphs','regeneratorRuntime\\x20=\\x20r','InitDisplay','regionSw','bInitFreetype','nPointNum','initDecoder','getShaderParameter','Missing_Property','splice','shift','nOriPTZPointNum','throw','style','\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20((origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a','GetPanoPTZCeiling','%c\\x20reset\\x20hard\\x20decoder','SR_GetPTZColor','executing','SR_DE_FISH_ORIGINAL','values','_invoke','fAspect','188hshwen','pfuncCBIn','generateMipmap','UNSIGNED_BYTE','max_advance_height','pOriPTZPoints','FEC_GetViewParam','DrawPTZLines','mark','ONE_MINUS_SRC_ALPHA','pLineClrVertices','VERTICAL_LAYOUT','state','SR_SetPTZPort','your\\x20browser\\x20does\\x20not\\x20support\\x202d\\x20render','exports','CULL_FACE','Missing_Startfont_Field','concatenate','Missing_Size_Field','Get_Kerning','pFillBlockClrVertices','Nested_Frame_Access','renderCurStatus','completed','hypot','Corrupted_Font_Header','isKeyFrame','Lower_Module_Version','FT_Library_Version','hasOwnProperty','forEach','displayRunning','fRadiusLeft','fTop','nAlpha','No_Unicode_Glyph_Name','getPrototypeOf','finallyLoc','RenderFrame','Library_Version','pstBGColor','pUserIn','Invalid_Stream_Skip',',height:','output','defineProperty','timerReset','toString','DrawFillBlock','GetProj','NO_RECURSE','decodeQueueSize','Divide_By_Zero','GetFishPTZWALL','fHAngleCos','nFishParamType','Invalid_Pixel_Size','scale(0.2)','blendFunc','timestamp','fCosH','onmessage','SR_DrawLinesEx','cropBottom','src','pString','emPlaceType','return','SetScale','Code_Overflow','SR_DE_FISH_ARCSPHERE_VERTICAL_WALL','nWndPort','uniform1f','codecType','fBeta','decoderOutSuccess','SRC_ALPHA','GetFECPort',',frameRate:','Done_Face','getCropImageJPEG','charCodeAt','bitmap_top','%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','texImage2D','fRXLeft','ENDF_In_Exec_Stream','canvasID','FEC_SetWnd','Invalid_Reference','drawImage',',state:','GetPTZRectange','GetCanvasSize','2d\\x20render','useProgram','GetWndPort','clearFECCanvas','slice','UpdateRangeParam','SR_Draw','underline_thickness','linkProgram','delegate','Invalid_Version','pFishParamManager','BITMAP','undefined','Table_Missing','stop\\x20failed\\x20','loadWasm','Stack_Overflow','fVAngleCos','iterator','bUsed','glLineTexBuffer','ADVANCE_ONLY','nFECPort','clearDecoderObjBuffer','CMap_Table_Missing','curTime','nFontHeight','fRotateY','@@asyncIterator','Missing_Chars_Field','pFontColorBuffer','pLinePosVertices','4zRxQyx','FECSetViewParam','COMPILE_STATUS','SR_GetViewParam','IsInImage','only\\x20support\\x20webgl1','streamOpenMode','texParameteri','getImageType','Nested_DEFS','getContext','CompileProgram','FT_Done_FreeType','MONO','getUniformLocation','SR_DE_FISH_PTZ_CEILING','SetDisplayBuf','shaderSource','cropTop','fRYTop','bFECHandle','Init_FreeType','\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20v_uv.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a','FEC_SetCanvasID','UpdateWideScanAngle','fCylinderHeight','constructor','pFontPath','streamEnd','units_per_EM','bitmap_left','renderEngine','asin','\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fRX1;\\x0auniform\\x20float\\x20fRX2;\\x0auniform\\x20float\\x20fRY1;\\x0auniform\\x20float\\x20fRY2;\\x0auniform\\x20int\\x20bBlack;\\x20\\x0auniform\\x20int\\x20bCut;\\x0a\\x0avoid\\x20main()\\x0a{\\x20\\x0a\\x09float\\x20r,g,b;\\x0a\\x09vec4\\x20origin;\\x0a\\x0a\\x09float\\x20\\x20w;\\x0a\\x09float\\x20\\x20h;\\x0a\\x09float\\x20\\x20fCenterX;\\x0a\\x09float\\x20\\x20fCenterY;\\x0a\\x09float\\x20\\x20fRadius;\\x0a\\x09w\\x20=\\x201.0;\\x0a\\x09h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x09fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x09fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x09fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x09float\\x20\\x20leftCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x09float\\x20\\x20topCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20bottomCut\\x20=\\x201.0;\\x0a\\x09if(bCut\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09if(fRX1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09leftCut\\x20=\\x20fRX1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRX2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09rightCut\\x20=\\x20fRX2;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09topCut\\x20=\\x20fRY1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09bottomCut\\x20=\\x20fRY2;\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x09origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x09origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x0a\\x09r\\x20=\\x20texture2D(texture,\\x20origin.st).r;\\x20\\x0a\\x09g\\x20=\\x20texture2D(texture,\\x20origin.st).g;\\x20\\x0a\\x09b\\x20=\\x20texture2D(texture,\\x20origin.st).b;\\x20\\x0a\\x0a\\x09if(bBlack\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09float\\x20tmpX,\\x20tmpY;\\x0a\\x09\\x09tmpX\\x20=\\x20origin.s\\x20*\\x20w;\\x20\\x0a\\x09\\x09tmpY\\x20=\\x20origin.t\\x20*\\x20h;\\x20\\x0a\\x09\\x09float\\x20d2\\x20=\\x20(tmpX-fCenterX)*(tmpX-fCenterX)\\x20+\\x20(tmpY-fCenterY)*(tmpY-fCenterY);\\x0a\\x09\\x09if(d2\\x20>\\x20fRadius*fRadius)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09r\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09g\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09b\\x20=\\x200.0;\\x20\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x0a\\x09gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x0a','Execution_Too_Long','processData','uniform1i','inputData','DEPTH_BUFFER_BIT','SR_ERR_CALL_ORDER','Error_String','createElement','fRight','SR_DE_FISH_PANARAMA_FLOOR_180','hour','set','Invalid_Vert_Metrics','pSemiSphereTex','%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','Invalid_File_Format','timeWalk','The\\x20iterator\\x20does\\x20not\\x20provide\\x20a\\x20\\x27throw\\x27\\x20method','FFCallBackFun','rows','codec','_GetImage2','correctType','pCamera','face_flags','SR_DE_FISH_SEMISPHERE','decoderObjNeedReset','_sent','enableVertexAttribArray','SR_SetPTZDisplayMode','viewport','fRYBottom','pSemiSpherePos','Unknown_File_Format','RENDER','9465953NilOJJ','fSinH','Invalid_Handle','0\\x200','nWndHeight','configurable','pstPoints','ARRAY_BUFFER','SR_DE_FISH_PANORAMA_FLOOR_360','nFontColorTexture','Ignore','Missing_Startchar_Field','attachShader','Invalid_Character_Code','getImageJPEG','rawDataFrameInfo','cropRight','normal','Array_Too_Large','deleteTexture','descender','stPTZParam','IsPTZSelected','chooseFrame','compileShader','bufferSubData','>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a','IGNORE_GLOBAL_ADVANCE_WIDTH','color:\\x20red','end','COLOR','unconfigured','family_name','TEXTURE0','deleteShader','bindTexture','call','nCylinderPosNum','initTimer','fAngle','LCD_V','codedWidth','bmp','Outline_Decompose','oVideoRenderHandle','getDate','nFontBGNum','Syntax_Error','curTimeStamp','_resetDecoder','decode','stPTZColor','year','Unimplemented_Feature','SetFishParam','bCut','catchLoc','fRadiusRight','FTLibrary','Invalid_Offset','resetTimer','format','hvc1.1.6.L123.00','vecCenter','FreeFECPort','NO_HINTING','SR_SetFishParamManager','bIsCapturing','InitColorList','\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20xy;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec2\\x20uv;\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20xy;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv\\x20=\\x20uv;\\x0a\\x20\\x20\\x20\\x20}\\x0a','Glyph_Too_Big','nPTZDisplayMode','break','bind','vecEye','fCylinderRadius','fBottom','STATIC_DRAW','FT_Error_String','SR_DE_FISH_PANORAMA_WALL','createBuffer','reset','Too_Many_Caches','nSemiSpherePosNum','_resetRenderTimer','postImageData','tan','nPlaceType','fFar','Horiz_Header_Missing','Fragment\\x20shader\\x20failed\\x20to\\x20compile:\\x20','getProgramParameter','playSpeed:','UpdateCamera','cos','fRY1','ComputeLinePoint','FT_Done_Face','texCoord','nLineTriangleNum','GetRoll','TEXTURE_2D','preTimeStamp','CreateSemiSphere','SetDisplayRect','@@toStringTag','Done_FreeType','FECGetViewParam','appendChild','Invalid_PPem','needReset','PLOTTER','Missing_Encoding_Field','color','Cannot_Open_Resource','curFrameInfo','DEPTH_STENCIL','FEC_SetParam','FECGetPort','\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20newpp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a','SBITS_ONLY','avc1.','b3DPort','FRAGMENT_SHADER','delta','LESS','nplaySpeed','FirstFrame','pstColor','SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL','width','fishSubPort','nPTZFragmentNum','CROP_BITMAP','needSetPreSoft','Hmtx_Table_Missing','SR_SetCanvasSize','subPortNum','Missing_Bbx_Field','keys','SR_DrawFont','timeStamp','SR_ERR_ALLOC_MEMORY','name','oRenderTimer','Invalid_CodeRange','nLineShaderProgram','_ConvertDisplayEffect','tryLoc','pop','glBlockPosBuffer','Invalid_Horiz_Metrics','Debug_OpCode','pstStartPos','FT_Outline_Decompose','\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20v_uv.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a','MONOCHROME','value','pFillBlockPosVertices','Invalid_Cache_Handle','SR_ERR_NOT_SUPPORT','Support\\x20Error:\\x20hard\\x20decoder\\x20only\\x20support\\x20264\\x20and\\x20265\\x20!!!','TransformPTZRangePoints','curFrameIsDisplay','nDrawFontWidth','SR_ERR_WEBGL_RESOURCE','GetCropJPEG','fRadiusBottom','FTFace','paint','FT_Set_Pixel_Size','wrap','OrderError','yuvLength','stPTZSelect','fTheta','data','then','__await','Init','placeType','Invalid_Post_Table_Format','displayName','fast','FECResetCorrectType','SetFov','SR_SetRenderState','SR_DE_FISH_PANORAMA_FLOOR_180','SR_DE_FISH_CYLINDER_FLOOR','fRX2','pPanoPTZPoints','NO_BITMAP','enumerable','nPTZFragmentNode','SetFar','frameDisplayHeight','buffer','SetCurStatus','>>>JS\\x2002\\x20destroy\\x20oVideoDecoder/oVideoRender','LINK_STATUS','TEXTURE_WRAP_T','GetPTZFragmentPoints','resetDecoder','needForward','Missing_Font_Field','fFov','pBasePTZPoints','baseTimeStamp','GetPointFish2PanoWall','GetJPEG','face_index','stFishParam','SR_DE_NULL','vertexAttribPointer','clear','pRender','nUpDateType','port','Invalid_Stream_Operation','nFontShaderProgram','Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function','SetPTZPort','DEPTH_TEST','IsValidRadiusParam','day','enable','Invalid_Post_Table','function','fPTZPositionX','your\\x20browser\\x20does\\x20not\\x20support\\x20WebGL','1447476ftHFsH','waitIFrameTimestamp','oVideoDecoder'];a0_0xd9f6=function(){return _0x382391;};return a0_0xd9f6();}","LCD","rawDataFrameInfoBuffer","fast","log","nUser","additionDataBuffer","The iterator does not provide a 'throw' method","vertexPosBuffer","nDisplayEffect","UpdateCamera","reportError","fRadiusLeft","clearBufferfi",">>>>>yff>>> JSPlayM4_GetPort 1","JSPlayM4_SetDisplayCallBack","bindTexture","awrap","pstPoints","frameDisplayHeight","downloadAudioBeforeRenderData","fTop","JSPlayM4_SetFirstFrameCallBack","Invalid_CharMap_Format","getImageType","enable","close","SR_SetPTZDisplayMode","fill","JSPlayM4_GetVolume","ComputeAngleVertical","fRX2","_JSPlayM4_SyncToAudio","pCylinderPos","\n    attribute vec4 xy;\n    attribute vec2 uv;\n    varying highp vec2 v_uv;\n\n    uniform mat4 matProj;\n    uniform mat4 matView;\n    void main(void) {\n        gl_Position = matProj * matView * xy;\n        v_uv = uv;\n    }\n",">>>JS JSPlayM4_FEC_SetViewParam JSPlayM4_FEC_SetViewParam this.decodeEngine：","JSPlayM4_DisplayCallBack","SetYaw","BITMAP","PEDANTIC","abrupt","_JSPlayM4_GetFishEye2DParam","SetCanvasSize","JSPlayM4_SetRunTimeInfoCallBackEx","decoderOutSuccess","Divide_By_Zero","glyph","GetRoll","viewport","subarray","AudioBeforeDecode.data","sCanvasID","VERTEX_SHADER","Set_Char_Size","bAntialias","prefer-hardware","iFECCanvasIDLen","FECDelPort","mainFECCorrect","clonedCanvas","JSPlayM4_SyncToAudio","NoHIKHead","canvasWidth","SR_DE_FISH_CYLINDER_CEILING","inputdata malloc failed!!!","SR_ERR_FREETYPE_RESOURCE","addtionCallBackFun","bBlack","download","constructor","pCylinderTex","pJpegData","TEXTURE_MIN_FILTER","download 1 Before Decode AudioData FrameNum:","uniform1f","JSPlayM4_RunTimeInfoCallBack","SBITS_ONLY","hypot","regionSw","getElementById","resizedataURL","Invalid_Horiz_Metrics","iAudioResampleFrameNum","Module","Invalid_Stream_Read","nStreamEnd","splice","viii","interlace","transformOrigin","GetRangePoints","Invalid_Size_Handle","download 3 Before Render AudioData FrameNum:","day","JSPlayM4_IgnoreHeaderAudioDefine","style","iRatio_x","FECViewParamCB","SetDisplayRect","pString","_JSPlayM4_GetSDKVersion","fRY2","Nested_Frame_Access","JSPlayM4_GetSourceBufferRemain","SR_DE_FISH_CYLINDER_FLOOR","LINEAR","Vertex shader failed to compile: ","reverse","FFCallBackFun","3271NcoGeP","FTLibrary","SR_SetFishParam","safari","SR_DE_FISH_CYLINDER_SPLIT_CEILING","arrayBuffer","getAttribLocation","underline_position","SR_GetViewParam","rows","fRotateX","_JSPlayM4_StopSound","SR_SetCanvasSize","_JSPlayM4_SetResampleValue","TRIANGLE_FAN","IGNORE_GLOBAL_ADVANCE_WIDTH","_JSPlayM4_SetDecodeEngine","JSPlayM4_SetPrintLogFlag","JSPlayM4_GetPlayedTimeEx","pFishParamManager","SetPTZPort","fPTZZoom","timeStamp","IsPortAllocated","Stack_Overflow","iRatio_y","Init_FreeType","destroyDecoder","JSPlayM4_SetCanvasSize","ComputePTZPoints","bufferSubData","AsyncIterator","Missing_Startfont_Field","writable","GetFishParam","FECGetPort","_JSPlayM4_FEC_SetDisplayRegion","HEAPU8","runtimeCBFun","top","generateMipmap","fVAngleSin","bBackGround","hardwareAcceleration","postImageData","ADVANCE_ONLY","ComputeAngleHorizontal","upDateType","map","aInputDataBuffer","mark",">>>JS 02 destroy oVideoDecoder/oVideoRender","join","pBmpSizeData","Missing_Size_Field","_JSPlayM4_SetDisplayRegion","SampleRate","parentNode",",height:","decodeFrameType","descender","clonedCanvasParentNode","SR_DE_FISH_PANORAMA_FLOOR_360","fRXLeft","SR_DE_FISH_PTZ_FLOOR","units_per_EM","getPlayTimeCallBackFun","PLOTTER","afterLoc","JSPlayM4_FEC_SetParam",">>>>>yff>>>>> JSPlayM4_OpenStream 5:","needResetCanvasSize","pCamera","set","%c1>your browser is IE ,it does not support play without plugin","%cstart load Decoder.js time:","1018QPxUaK",">>>VideoRender.js SR_SetRenderState failed ret：%08x\n","jpegDataCallback","544210lIBlqT","inputDataBufferSize","startTime","%c FEC_ResetCorrectType error this canvas not play","fCylinderRadius","charCodeAt","Missing_Bitmap","setValue","bottom","_JSPlayM4_GetJPEG","_JSPlayM4_SetVolume","month","SetDisRegionRight","document","decoderObjNeedReset","SR_SetCallBack","DeInit","vecCenter",">>>JS OrderError","DrawFillBlock","exports","src","Invalid_Cache_Handle","startTimeStamp",",placeType:","sin","SetPitch","fishPort is 0 ,main canvas doesn't need call FEC_GetPort",",left:","fRight","displayName","init","regionSy","pLinePosVertices","processData","Invalid_Stream_Skip","length","displayHeight","_JSPlayM4_VideoDataToBMP","SR_ERR_WEBGL_RESOURCE","arg","Get_Char_Index","printfFlag","shaderSource","CULL_FACE","dispatchEvent","JSPlayM4_FEC_Disable","GetTimerWalk","switchDecodeFrame","Bad_Argument","FRAGMENT_SHADER","Blob","glLineClrBuffer","Invalid_Handle","_JSPlayM4_Fast","data:application/javascript,","fWideScanOffset","Invalid_Frame_Operation","bSupHardOrSoft","MSBlobBuilder","hasWebWorker","fRadiusBottom","nFontShaderProgram","SR_SetAntialias","Nested_DEFS","fRadiusTop","nplaySpeed","pstColor","Too_Many_Hints","SetAntialias","timestamp","nBlockShaderProgram","GetImage.","FECSetDisplayRegion","SR_DE_FISH_PANARAMA_FLOOR_180","resetDecoder","_JSPlayM4_FEC_SetWnd","Syntax_Error","texCoord","Name_Table_Missing","needWaitIFrame","GeneratorFunction","_JSPlayM4_SetDecCBStream","nFishParamType","_free",",canvasWidth:","iFECRatio_x","GetFishPTZFloor","Init","SR_SetFontPath","getSeconds","JSPlayM4_DecCallBack","key","bIsCapturing","JSPlayM4_SetPlayOrBackSwitchMode","FECEnable","_JSPlayM4_FEC_SetParam","fRadiusRight","curTime","TEXTURE_2D","bmpDownloadFlag","underline_thickness","value","JSPlayM4_ResetBuffer","SR_OK","GetBmp.bmp","getCropImageJPEG","dataLength","CLAMP_TO_EDGE","HardDecodeError","TEXTURE0","configured","aTotalBuffer","output","pFillBlockClrVertices",",inputSize:","firefox","preTimerStamp","nMaxPointNum","Invalid_CharMap_Handle","nLineWidth","depthFunc","completed","stCycleParam","GetPTZColor","SR_DE_FISH_ARCSPHERE_VERTICAL_WALL","FORCE_AUTOHINT","tan","DrawPTZLines","Missing_Font_Field","_stringToBytes","Invalid_PPem","iZoomNum","formatVideoDecoderConfigure","Get_Kerning","I420","_GetImage2","fPTZParam","Invalid_Glyph_Format","year","COMPILE_STATUS","GetPointPano2FishWall","GetWndPort",",top:","cropTop","JSPlayM4_AudioResampleCallBack","_JSPlayM4_GetFrameInfo","_JSPlayM4_SetDisplayCallBack","Execution_Too_Long","Cannot_Open_Stream","%c2>there will decode 265 by softDecoder","GetPTZRectange","\n    attribute vec3 position;\n    attribute vec4   color;\n    varying   float  pp;\n    varying   vec4  colorOut;\n    void main()\n    {\n        gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n        pp = position.z;\n        colorOut = color;\n    }\n","name","_refresh","pFontColorBuffer","defineProperty","bPTZSelected",",upDateType:","respondFrameInfoCB","fScale","SR_ERR_PARAM","_JSPlayM4_SetANRParam","nOriPTZPointNum","Unknown_File_Format","bitmap_top","normal","IsOutofImage","color:red","SR_Draw","SetFov","fPTZY","BLEND","Glyph_Too_Big","GetFrameData","bWriteAudioResampleData","nPointNum","frameNum","bLoop","bRecreateAntia","fRotateY","_JSPlayM4_GetPort","FEC_SetParam","NONE","bbox","_JSPlayM4_SetDecodeFrameType","pRenderParam","\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4  pp; \n\n    void main()\n    { \n        gl_Position.x  = position.x;\n        gl_Position.y  = position.y;\n        gl_Position.z  = 0.1;\n        gl_Position.w  = 1.0;\n        pp = texCoord; \n    }\n","SR_DE_FISH_ORIGINAL","return","Too_Many_Extensions","_JSPlayM4_GetSourceBufferRemain","param is not number","JSPlayM4_SetDecodeEngine","HEAPF32","edge","copyTo",">>>JS left:","GetCurTime","Unimplemented_Feature","forEach","GetPointPano2FishFloor","SR_DrawLines","color: red","_JSPlayM4_GetBMP","SR_ERR_ALLOC_MEMORY","errorcode:","currentFishSubPort","getHours","JSPlayM4_AudioBeforeRenderCallBack","isConfigSupported","DisplayFrame","MAX","Code_Overflow","curFrameIsDisplay","oRenderTimer","then","0 0","prev","decodeWorker create success!","face_index","_getExplore","JSPlayM4_PlaySound","startWorker","SR_ERR_FREETYPE_INIT","codecType","TEXTURE_MAG_FILTER","_SetPlaySpeed","_JSPlayM4_OpenStream","Stack_Underflow","_JSPlayM4_FEC_SetViewParam","canvas width:","getMinutes","_destroyPlayCtrl","subPortNum","bufferData","IsInImage","download600RawData","week","SetPTZDisplayMode","_JSPlayM4_FreePort","attachShader","regeneratorRuntime",">>>JS JSPlayM4_FEC_SetWnd this.decodeEngine：","nPTZFragmentNum","getDate","Corrupted_Font_Glyphs","Invalid_Pixel_Size","fRY1","_JSPlayM4_SetRunTimeInfoCallBackEx","pPTZSetColor","FT_Get_Kerning","SharedArrayBuffer","InitCamera","keys","COLOR_BUFFER_BIT","timeWalk",">>>>>yff>>>>> JSPlayM4_OpenStream 2:",",hWnd:","Cannot_Render_Glyph","nCylinderTexSize","stPTZSelect","_JSPlayM4_SetDecodeThread","FECErrorCode","_JSPlayM4_GetCanvasSize","Error_String","GetRectPoints","useProgram","getShaderParameter","dataStrVersion",">>>JS JSPlayM4_FEC_DelPort this.decodeEngine：","texParameteri","bInited","bCullBack","experimental-webgl","FT_Set_Pixel_Size","_JSPlayM4_FEC_SetCanvasID","\n    varying lowp vec4 pp;\n    uniform sampler2D texture;\n\n    void main(void)\n    {\n        gl_FragColor = texture2D(texture, pp.st);\n    }\n","setPrototypeOf","GetPlayedTime","_JSPlayM4_SetSecretKey","_JSPlayM4_GetMpOffset","_JSPlayM4_SetSycGroup","JSPlayM4_Play","JSPlayM4_Fast","oVideoRender","texturePosBuffer","emEffect","replaceChild","output2","CalcPTZFragmentPoints","fCosH",">>>JS JSPlayM4_FEC_GetPort this.decodeEngine：","pFontPath","toBlob","GetJPEG","ReleaseDisplay","info","_GetImage","Missing_Encoding_Field","_JSPlayM4_IgnoreHeaderAudioDefine","_JSPlayM4_RenderPrivateData","SetAspect","FT_Done_FreeType","JSPlayM4_SetIFrameDecInterval","nSemiSpherePosNum","regionSx","GetRenderParam","style_flags","port","_JSPlayM4_OneByOne","NORMAL","nCylinderPosNum","GetPTZPoints","Invalid_File_Format","JSPlayM4_GetPort","JSPlayM4_SetDecCBStream","JSPlayM4_Stop","Invalid_Version","LCD_V","slice","fSinV","next","pFishParam","getShaderInfoLog","FEC_SetCanvasID","configurable","oJSPlayerObj","JudgeDisplayEffect","bCut","JSPlayM4_SetDecodeFrameType","offscreen","Invalid_Stream_Operation","JSPlayM4_SetGlobalBaseTime","blendFunc","SetFar","fRYBottom","JSPlayM4_FEC_SetViewParam","Missing_Property","bFECHandle","SetDisRegionLeft","\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n    \n        float r,g,b; \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;  ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = v_uv.s;\n        origin.t = (bottomCut - topCut) * v_uv.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0;\n        }\n        gl_FragColor = vec4(r, g, b, 1.0);\n    }\n","mainCanvasID","FEC_DelPort",",bottom:","nCut","nFontColorTexture","JSPlayM4_FirstFrameCallBack","concatenate","TransformPTZRangePoints","JSPlayM4_GetMpOffset","yuvType","GetPlaceType","_JSPlayM4_Play","%cEnd load Decoder.js time:","loadWasm","Worker","SetDisRegionTop","stDisplayRect","hvc1.1.6.L123.00","ENDF_In_Exec_Stream","JSPlayM4_GetRawData","RENDER","fFov","FT_Done_Face","_resetDecoder","createShader","SR_AddSubPort","context","SRC_ALPHA","Invalid_Face_Handle","max_advance_height","NO_HINTING","_GetFastSpeed","canvas","data","Invalid_CodeRange","JSPlayM4_FEC_SetCanvasID","InitFECParam","inputDataBuffer","OneByOne",">>>>>yff>>>>> JSPlayM4_Play 2:","uniform1i","MONO","webgl render","stFECDisplayRect","fPTZX","Support Error: hard decoder only support 264 and 265 !!!","decodeWorker","JSPlayM4_GetAdditionData","chosenFrame","_JSPlayM4_SetAudioDisplayBuf","pSemiSpherePos","color","New_Memory_Face","pBasePTZPoints","isGeneratorFunction","GetPointFish2PanoCeiling","Invalid_Driver_Handle","Missing_Fontboundingbox_Field","Outline_Decompose","nDrawFontWidth","UpdateRangeParam","SetDisRegionBottom","getUniformLocation","wrap","Bbx_Too_Big","nextLoc","closed","Invalid_Stream_Handle","JSPlayM4_SetDemuxModel","Psdata","iDataType","stFishEyeManager","_JSPlayM4_Stop",">>>>>yff>>>>> JSPlayM4_Play 2 this.canvasID:",",right:","Fragment shader failed to compile: ",">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 1 mode:","drawArrays","JSPlayM4_GetFileTime","Locations_Missing","number","_JSPlayM4_GetVolume","NO_BITMAP","STATIC_DRAW","fRX1","63BKMzml","RGBA","SR_GetCanvasSize","fRXRight","_JSPlayM4_ResetEnd","ONE_MINUS_SRC_ALPHA","UpdateCircyeParam","_JSPlayM4_GetBufferValue","SR_SetRenderState","asin","ctx","fVAngleCos","bWriteAudioAfterDecode","completion","RTPRaw.data","@@asyncIterator","catchLoc",",canvasHeight:","imageYUV","Inline worker is not supported","Too_Many_Drivers","_JSPlayM4_SetResetCallBack","WasmPlayerV3.0 input over","second","pstBGColor","pstFontBGLines","firstFrame","SR_DelSubPort","your browser does not support 2d render","delta","try statement without catch or finally","nBmpDataSize","InitColorList","needForward","getProgramInfoLog","_JSPlayM4_GetCropBMP","frameType","text/javascript","IsPTZSelected","UpdateWideScanAngle","matView","transferControlToOffscreen","%c1>your chrome version %d does not support 264/265 hard Decoder,please update the latest version above chromeV107","format","bUsed","JSPlayM4 need reset","push","paint","frameRate","sab","JSPlayM4_Pause","JSPlayM4_SetDecCallBack","_JSPlayM4_SetFrameInfoCallBack","30306rqBNkZ","fBeta","DEFAULT","_JSPlayM4_GetLastError","JSPlayM4_GetBufferValue","end","Post_Table_Missing","TEXTURE_WRAP_S","%c1>your browser support 264/265 hard Decoder","onlySupportedWebGL1","bind","getCropImageBMP","Cropbmp","_JSPlayM4_FEC_Disable","b3DPort","szBasePath","emPlaceType","JSPlayM4_FEC_SetBackCilling","JSPlayM4_InputRawData","fHAngleCos","fPTZPositionX","pBmpData","nAlpha","FEC_SetViewParam","GetPTZPort","SR_DE_FISH_PTZ_WALL","SetScale","Cannot_Open_Resource","hasThread","GetView","Missing_Chars_Field","bSupHardDecHEVC","%c1>your chrome version %d does not support 265 hard Decoder,please update the latest version above chromeV107","bBackground","GetFishPTZCeiling","JSPlayM4_AudioBeforeDecodeCallBack","playSpeed:","HEAP16","FT_Outline_Decompose","Could_Not_Find_Context","needRect","SR_DE_FISH_SEMISPHERE","undefined","FEC_GetPort","Invalid_Character_Code","glLinePosBuffer","FEC_Enable","audioAfDecOUTBuffer","COMPUTE_METRICS","SR_DE_FISH_PANORAMA_WALL","fishPort is 0 ,main canvas doesn't need call FEC_DelPort","FEC_SetBackCilling","getContext","OUTLINE","bRecreateTex","GetPanoPTZWall","fCosV","removeChild","decode","_JSPlayM4_GetPlayedTimeEx",">>>JS JSPlayM4_FEC_SetWnd hwnd error this.decodeEngine：","curFrameInfo","Invalid_Offset","_JSPlayM4_FEC_GetPort","bInit","Invalid_Glyph_Index","\n    varying  mediump float pp;\n    varying  lowp vec4  colorOut;\n    void main()\n    {\n        gl_FragColor = colorOut;\n        mediump float fx = abs(pp);\n        if (fx > 0.2)\n        { \n            gl_FragColor.a = colorOut.a*(1.25 - 1.25*fx);\n        } \n    } \n","JSPlayM4_FEC_DelPort","state","nMaxFillBlockTriNum","HEAP32","pJPEGSizeData","hevcDecodeEngine","nBasePTZPointNum","FTFace","bindBuffer","GetCropJPEG.jpeg","SR_DE_FISH_SPHERE","SetDisplayBuf","waitIFrameTimestamp","isize","Raster_Negative_Height","body","position","SetDisplayRegion","downloadFlag","JSPlayM4_SetDecodeThread"," JSPlayM4_FEC_SetCanvasID canvasID is null :","SetFishParam","pcVideoManager","Lower_Module_Version","Cropjpeg","tryLoc","GetPTZDisplayMode","color: blue","_JSPlayM4_SetPrintLogFlag","pFillBlockPosVertices","onmessage","\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                   fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - v_uv.s;\n        origin.t = (bottomCut - topCut) * (1.0 - v_uv.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n","pFECTotalCanvasIDData","downloadAudioBeforeDecodeData","streamEnd","COLOR","hikHeadBuffer malloc failed","%c reset hard decoder","buffer","pfuncCBOut","disable","GetPointFish2PanoFloor","DEPTH_STENCIL","drawImage","Pause","decodeEngine","\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;\nuniform float fVAngleCos;\nuniform float fVAngleSin;\nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    \n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w; \n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = 0.5 - v_uv.t;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = (-(origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n","download 3 Resample Decode AudioData  FrameNum:","UNSIGNED_BYTE","glBlockClrBuffer","postMessage","\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;  \nuniform float fHAngleCos;  \nuniform float fHAngleSin; \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<�뾶ʵ�ʳ���\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = ((origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0;\n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n","minute","apply","GetFishPTZWALL","GetPanoPTZCeiling","bSupHardDecAVC","Missing_Bbx_Field","IsValidRadiusParam","fAlpha","bInitFreetype",",fValue:","call",",state:","resultName","\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n\n    void main()\n    {\n        float r,g,b;  \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5) \n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n             float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - newpp.s;\n        origin.t = (bottomCut - topCut) * (1.0 - newpp.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    } \n","Invalid_Outline","JSPlayM4_ResetEnd","668348lmxozK","bPortAllocated","avcDecodeEngine","bmpDataCallback","nLineShaderProgram","nCylinderPosSize","SetStreamEnd","toStringTag","SR_ERR_NOT_SUPPORT","ready_frames","JSPlayM4_GetBMP","_JSPlayM4_SetIFrameDecInterval","SR_GetFishParam","createEvent","FT_Render_Glyph","frameSize","nPTZDisplayMode","Out_Of_Memory","_JSPlayM4_GetAdditionData","resetEnd","deleteProgram","GetCropJPEG","%c3>SharedArrayBuffer Error , does not support Soft Decdoe!!!!!",">>>>>yff>>>>> JSPlayM4_SetDecodeEngine 1:","oVideoHandle","SR_ERR_CANVAS","glBlockPosBuffer","audioResampleBuffer","TEXTURE_WRAP_T","preTimeStamp","FECDisable","JSPlayM4_GetFrameInfo","SetOrtho","JSPlayM4_SetStreamEnd","nPTZFragmentNode","SR_DE_FISH_CYLINDER_SPLIT_FLOOR","stop failed ","RenderFrame","symbol","ascender","Missing_Startchar_Field","FEC_SetWnd","jpegDownloadFlag","playSpeed","dataTimeStamp","LINK_STATUS","_JSPlayM4_FEC_SetBackCilling","JSPlayM4_ReversePlay","initEvent","addEventListener","GetDisplayEffect","__await","_decoderLoaded","root","shift","canvasID","JSPlayM4_RenderPrivateData","left","pop","_downloadFile","decCallBackFun",">>>JS 01 destroy decoderObj","SR_SetDisplayRect","totalLength:","click","vecEye","%cThe final decodeEngine is %d (0 is soft,1 is hard),codecType:%d","fRYTop",",fishSubPort:","onload","SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL","appendChild","FECcanvasIDArray","GetPitch","prototype","callBackParameter","iAudioBefDecFrameNum","fSinH","iAudioANRFrameNum","pOriPTZPoints","FECSetWnd","configure","Load_Char","continue","bWriteAudioBefDecData","ComputeLinePoint","setHasThread","Invalid_Opcode","downloadAudioAfterDecodeData","vertexAttribPointer","_JSPlayM4_VideoDataToJpeg","blob:","complete",">>>JS JSPlayM4_FEC_Enable this.decodeEngine：","enDisplayEffect","scale(0.2)","acos","canvasCnv","LINEAR_DESIGN","SetFrameInfoCallBack","JSPlayM4_RTPRawDataCallBack","deleteShader","FEC_ResetCorrectType","slow","stPTZColor","fBottom","GetProj","fHAngleSin","SR_DE_FISH_PANORAMA_CEILING_180","Invalid_Post_Table_Format","JSPlayM4_SetD3DPostProcess","oVideoDecoder","getMilliseconds","fishPort is 0 ,main canvas doesn't need call FEC_Enable","delegate","_JSPlayM4_RenderPrivateDataEx","JSPlayM4_Slow","milliseconds","needSetPreSoft","VERTICAL_LAYOUT","%c1>your browser does not support play without plugin","Ignore","rawDataFrameInfo","texImage2D","this.audioANRBuffer","nSemiSphereTexSize","pUserIn","DEF_In_Glyf_Bytecode","JSPlayM4_RawDataCallBack","mainSubPort","No_Unicode_Glyph_Name","error","texture","script","GetPointFish2PanoWall","jpeg","fNear","JSPlayM4_FEC_Enable","size",">>>>>yff>>>>> JSPlayM4_InputData 2 res:","URL","createObjectURL","yuvLength","nJPEGDataSize","bitPerSample","__esModule","JSPlayM4_GetSDKVersion","done","nPlaceType","NO_RECURSE","displayFrameInfo","iFrameNum","nLineTriangleNum","videoShaderProgram","webgl","suspendedStart","audioANRBuffer","revokeObjectURL","SR_DE_FISH_PLANET","this.playSpeed:","renderEngine","trunc","getImageJPEG","pstStartPos","cos","1017FfAjnz","FT_Set_Char_Size","initDecoder","chooseFrame","Render_Glyph","lastDate","FEC_ERR_ENABLED","face_flags","nWndHeight","nUpDateType","illegal catch attempt","FECResetCorrectType","Invalid_Reference","SR_DE_FISH_PTZ_CEILING","unconfigured",",iZoomNum:","JSPlayM4_StopSound","FECGetViewParam","create","Corrupted_Font_Header","Array_Too_Large","dataType","JSPlayM4_DisplayLostFrames","bmp","num_glyphs","SR_SetViewParam","displayRunning","enumerable","Horiz_Header_Missing","i32","SR_SetFishParamManager","match","catch","getImageBMP","fValue","JSPlayM4_AdditionDataCBFun","nValidSubPort","JSPlayM4_FreePort","compileShader","matProj","OrderError","Done_Face","%c2>there will decode 264 by softDecoder","family_name","nDrawFontHeight","JSPlayM4_GetCropBMP","SetCurStatus","samplesPerSec","throw","webkitURL"];return a=function(){return e},a()}(function(e,t){var i=n,a=e();while(1)try{var o=parseInt(i(410))/1*(parseInt(i(486))/2)+-parseInt(i(1354))/3+-parseInt(i(1104))/4+-parseInt(i(489))/5+parseInt(i(969))/6*(parseInt(i(916))/7)+-parseInt(i(1423))/8+parseInt(i(1269))/9*(parseInt(i(1397))/10);if(o===t)break;a["push"](a["shift"]())}catch(r){a["push"](a["shift"]())}})(a,841567),function(i,a){var o=n;if("object"==o(1415)&&"object"==o(1415))e[o(509)]=a();else{var r,s=a();for(r in s)("object"==o(1415)?t:i)[r]=s[r]}}(self,(function(){var e,t,a,o=n;return e={477:e=>{e["exports"]=function(e,t,i,a){var o,r=n,s=self||window;try{try{try{o=new(s[r(540)])([e])}catch(u){(o=new(s[r(1487)]||s[r(1403)]||s["MozBlobBuilder"]||s[r(548)]))["append"](e),o=o["getBlob"]()}var l=s[r(1244)]||s[r(1318)],d=l["createObjectURL"](o),c=new s[t](d,i);return l[r(1261)](d),c}catch(h){return new s[t](r(544)[r(1438)](encodeURIComponent(e)),i)}}catch(x){if(a)return new s[t](a,i);throw Error(r(935))}}},61:(e,t,i)=>{var a=n,o=i(698)["default"];function r(){var t=n;e[t(509)]=function(){return i},e[t(509)][t(1249)]=!0,e[t(509)][t(1507)]=e[t(509)];var i={},a=Object[t(1178)],r=a[t(1340)],s=t(1536)==typeof Symbol?Symbol:{},l=s["iterator"]||t(1568),d=s["asyncIterator"]||t(931),c=s[t(1111)]||"@@toStringTag";function u(e,i,n){var a=t;return Object[a(645)](e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[i]}try{u({},"")}catch(E){u=function(e,t,i){return e[t]=i}}function h(e,i,n,a){var o,r,s,l,d=t;i=i&&i[d(1178)]instanceof p?i:p,i=Object[d(1287)](i[d(1178)]),a=new w(a||[]);return i["_invoke"]=(o=e,r=n,s=a,l=d(1259),function(e,t){var i=d;if(i(1556)===l)throw new Error(i(1391));if(i(611)===l){if(i(1317)===e)throw t;return P()}for(s[i(1515)]=e,s["arg"]=t;;){var n=s[i(1218)];if(n&&(n=function e(t,n){var a=i,o=t[a(1528)][n[a(1515)]];if(void 0===o){if(n[a(1218)]=null,a(1317)===n[a(1515)]){if(t[a(1528)][a(678)]&&(n[a(1515)]="return",n[a(529)]=void 0,e(t,n),a(1317)===n["method"]))return f;n[a(1515)]=a(1317),n[a(529)]=new TypeError(a(1593))}return f}return o=x(o,t[a(1528)],n[a(529)]),a(1317)===o[a(1378)]?(n[a(1515)]=a(1317),n[a(529)]=o[a(529)],n[a(1218)]=null,f):(o=o[a(529)],o?o["done"]?(n[t[a(1100)]]=o[a(591)],n[a(811)]=t[a(896)],a(678)!==n[a(1515)]&&(n[a(1515)]="next",n[a(529)]=void 0),n[a(1218)]=null,f):o:(n[a(1515)]=a(1317),n[a(529)]=new TypeError(a(1377)),n[a(1218)]=null,f))}(n,s),n)){if(n===f)continue;return n}if(i(811)===s[i(1515)])s[i(1520)]=s[i(1434)]=s["arg"];else if(i(1317)===s[i(1515)]){if(i(1259)===l)throw l="completed",s["arg"];s["dispatchException"](s[i(529)])}else"return"===s[i(1515)]&&s[i(341)]("return",s[i(529)]);if(l="executing",n=x(o,r,s),i(655)===n[i(1378)]){if(l=s["done"]?i(611):i(1525),n["arg"]===f)continue;return{value:n[i(529)],done:s[i(1251)]}}i(1317)===n[i(1378)]&&(l=i(611),s["method"]=i(1317),s[i(529)]=n[i(529)])}}),i}function x(e,i,n){var a=t;try{return{type:a(655),arg:e[a(1098)](i,n)}}catch(o){return{type:"throw",arg:o}}}i[t(894)]=h;var f={};function p(){}function m(){}function _(){}s={};var g=(u(s,l,(function(){return this})),Object[t(1363)]),v=(g=g&&g(g(T([]))),g&&g!==a&&r[t(1098)](g,l)&&(s=g),_[t(1178)]=p[t(1178)]=Object[t(1287)](s));function y(e){var i=t;[i(811),"throw",i(678)][i(689)]((function(t){u(e,t,(function(e){var i=n;return this[i(1352)](t,e)}))}))}function b(e,i){var a,s=t;this[s(1352)]=function(t,l){var d=s;function c(){return new i((function(a,s){!function t(a,s,l,d){var c,u=n;a=x(e[a],e,s);if("throw"!==a[u(1378)])return(s=(c=a[u(529)])[u(591)])&&"object"==o(s)&&r[u(1098)](s,"__await")?i[u(1548)](s[u(1155)])["then"]((function(e){t("next",e,l,d)}),(function(e){var i=u;t(i(1317),e,l,d)})):i[u(1548)](s)[u(705)]((function(e){c["value"]=e,l(c)}),(function(e){var i=u;return t(i(1317),e,l,d)}));d(a[u(529)])}(t,l,a,s)}))}return a=a?a[d(705)](c,c):c()}}function S(e){var i=t,n={tryLoc:e[0]};1 in e&&(n[i(932)]=e[1]),2 in e&&(n[i(1482)]=e[2],n["afterLoc"]=e[3]),this["tryEntries"][i(962)](n)}function C(e){var i=t,n=e[i(929)]||{};n[i(1378)]=i(655),delete n[i(529)],e[i(929)]=n}function w(e){var i=t;this[i(1386)]=[{tryLoc:i(1157)}],e[i(689)](S,this),this["reset"](!0)}function T(e){var i=t;if(e){var n,a=e[l];if(a)return a[i(1098)](e);if(i(1536)==typeof e[i(811)])return e;if(!isNaN(e[i(525)]))return n=-1,(a=function t(){for(var a=i;++n<e["length"];)if(r[a(1098)](e,n))return t[a(591)]=e[n],t[a(1251)]=!1,t;return t[a(591)]=void 0,t[a(1251)]=!0,t})["next"]=a}return{next:P}}function P(){return{value:void 0,done:!0}}return u(v,t(370),m[t(1178)]=_),u(_,t(370),m),m["displayName"]=u(_,c,t(570)),i[t(885)]=function(e){var i=t;return e=i(1536)==typeof e&&e[i(370)],!!e&&(e===m||"GeneratorFunction"===(e[i(519)]||e[i(642)]))},i["mark"]=function(e){var i=t;return Object[i(767)]?Object[i(767)](e,_):(e[i(1323)]=_,u(e,c,"GeneratorFunction")),e["prototype"]=Object[i(1287)](v),e},i[t(318)]=function(e){return{__await:e}},y(b[t(1178)]),u(b[t(1178)],d,(function(){return this})),i[t(441)]=b,i["async"]=function(e,n,a,o,r){var s=t;void 0===r&&(r=Promise);var l=new b(h(e,n,a,o),r);return i["isGeneratorFunction"](n)?l:l["next"]()[s(705)]((function(e){var t=s;return e[t(1251)]?e[t(591)]:l[t(811)]()}))},y(v),u(v,c,"Generator"),u(v,l,(function(){return this})),u(v,t(1503),(function(){return"[object Generator]"})),i[t(743)]=function(e){var i,n=t,a=[];for(i in e)a[n(962)](i);return a[n(408)](),function t(){for(var i=n;a[i(525)];){var o=a[i(1162)]();if(o in e)return t[i(591)]=o,t[i(1251)]=!1,t}return t[i(1251)]=!0,t}},i[t(1544)]=T,w[t(1178)]={constructor:w,reset:function(e){var i=t;if(this["prev"]=0,this[i(811)]=0,this[i(1520)]=this[i(1434)]=void 0,this[i(1251)]=!1,this["delegate"]=null,this[i(1515)]="next",this[i(529)]=void 0,this[i(1386)][i(689)](C),!e)for(var n in this)"t"===n["charAt"](0)&&r[i(1098)](this,n)&&!isNaN(+n["slice"](1))&&(this[n]=void 0)},stop:function(){var e=t;this[e(1251)]=!0;var i=this["tryEntries"][0][e(929)];if(e(1317)===i[e(1378)])throw i[e(529)];return this[e(1472)]},dispatchException:function(e){var i=t;if(this[i(1251)])throw e;var n=this;function a(t,a){var o=i;return l[o(1378)]=o(1317),l[o(529)]=e,n["next"]=t,a&&(n["method"]=o(811),n[o(529)]=void 0),!!a}for(var o=this["tryEntries"][i(525)]-1;0<=o;--o){var s=this[i(1386)][o],l=s[i(929)];if("root"===s[i(1061)])return a(i(974));if(s["tryLoc"]<=this[i(707)]){var d=r[i(1098)](s,i(932)),c=r[i(1098)](s,i(1482));if(d&&c){if(this[i(707)]<s[i(932)])return a(s["catchLoc"],!0);if(this[i(707)]<s["finallyLoc"])return a(s[i(1482)])}else if(d){if(this["prev"]<s[i(932)])return a(s[i(932)],!0)}else{if(!c)throw new Error(i(946));if(this["prev"]<s["finallyLoc"])return a(s[i(1482)])}}}},abrupt:function(e,i){for(var n=t,a=this[n(1386)]["length"]-1;0<=a;--a){var o=this[n(1386)][a];if(o["tryLoc"]<=this[n(707)]&&r[n(1098)](o,n(1482))&&this["prev"]<o[n(1482)]){var s=o;break}}var l=(s=s&&(n(1478)===e||"continue"===e)&&s[n(1061)]<=i&&i<=s[n(1482)]?null:s)?s[n(929)]:{};return l[n(1378)]=e,l[n(529)]=i,s?(this[n(1515)]="next",this[n(811)]=s[n(1482)],f):this[n(1196)](l)},complete:function(e,i){var n=t;if(n(1317)===e[n(1378)])throw e[n(529)];return"break"===e[n(1378)]||n(1187)===e[n(1378)]?this[n(811)]=e[n(529)]:n(678)===e[n(1378)]?(this[n(1472)]=this[n(529)]=e[n(529)],this[n(1515)]=n(678),this[n(811)]=n(974)):n(655)===e[n(1378)]&&i&&(this[n(811)]=i),f},finish:function(e){for(var i=t,n=this[i(1386)]["length"]-1;0<=n;--n){var a=this["tryEntries"][n];if(a[i(1482)]===e)return this[i(1196)](a["completion"],a[i(478)]),C(a),f}},catch:function(e){for(var i=t,n=this["tryEntries"]["length"]-1;0<=n;--n){var a,o,r=this[i(1386)][n];if(r[i(1061)]===e)return"throw"===(a=r["completion"])[i(1378)]&&(o=a["arg"],C(r)),o}throw new Error(i(1279))},delegateYield:function(e,i,n){var a=t;return this["delegate"]={iterator:T(e),resultName:i,nextLoc:n},a(811)===this[a(1515)]&&(this["arg"]=void 0),f}},i}e["exports"]=r,e["exports"][a(1249)]=!0,e[a(509)]["default"]=e[a(509)]},698:e=>{var t=n;function i(t){var a=n;return e[a(509)]=i=a(1536)==typeof Symbol&&a(1142)==typeof Symbol[a(1528)]?function(e){return typeof e}:function(e){var t=a;return e&&t(1536)==typeof Symbol&&e[t(370)]===Symbol&&e!==Symbol[t(1178)]?"symbol":typeof e},e["exports"][a(1249)]=!0,e[a(509)][a(1507)]=e[a(509)],i(t)}e[t(509)]=i,e[t(509)]["__esModule"]=!0,e[t(509)]["default"]=e[t(509)]},687:(e,t,i)=>{var a=n;i=i(61)(),e["exports"]=i;try{regeneratorRuntime=i}catch(o){a(1415)==typeof globalThis?globalThis[a(731)]=i:Function("r","regeneratorRuntime = r")(i)}}},t={},r["n"]=e=>{var t=n,i=e&&e["__esModule"]?()=>e[t(1507)]:()=>e;return r["d"](i,{a:i}),i},r["d"]=(e,t)=>{var i=n;for(var a in t)r["o"](t,a)&&!r["o"](e,a)&&Object[i(645)](e,a,{enumerable:!0,get:t[a]})},r["o"]=(e,t)=>Object[o(1178)][o(1340)][o(1098)](e,t),r["r"]=e=>{var t=o;"undefined"!=typeof Symbol&&Symbol[t(1111)]&&Object["defineProperty"](e,Symbol["toStringTag"],{value:t(384)}),Object["defineProperty"](e,"__esModule",{value:!0})},a={},(()=>{var e=o;function t(e,t,i,a,o,r,s){var l=n;try{var d=e[r](s),c=d[l(591)]}catch(u){return void i(u)}d[l(1251)]?t(c):Promise[l(1548)](c)[l(705)](a,o)}function s(e){return function(){var i=this,a=arguments;return new Promise((function(o,r){var s=n,l=e[s(1089)](i,a);function d(e){t(l,o,r,d,c,"next",e)}function c(e){t(l,o,r,d,c,"throw",e)}d(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=n,a=0;a<t["length"];a++){var o=t[a];o["enumerable"]=o[i(1296)]||!1,o[i(815)]=!0,i(591)in o&&(o[i(443)]=!0),Object[i(645)](e,o["key"],o)}}function c(e,t,i){var a=n;return t&&d(e[a(1178)],t),i&&d(e,i),Object[a(645)](e,a(1178),{writable:!1}),e}r["r"](a),r["d"](a,{JSPlayCtrl:()=>Ge});var u=r(687),h=r["n"](u),x=(u=r(477),r["n"](u));function f(){var e=n;return x()(e(1586),e(845),void 0,void 0)}var p,m,_,g,v,y,b=1281,S=1282,C=1285,w=1287,T=1288,P=1289,E=1302,k=1,R=2,I=3,D=0,M=256,A=512,B=768,L=1024,F=1280,j=1536,z=1792,O=2048,N=2304,U=2560,H=1,V=2,G=4,Y=8,W=16,Z=32,X=function(){var e=n;function t(e,i,a){var o=n;l(this,t),this[o(1454)]=0,this[o(1384)]=0,this[o(1349)]=null,this[o(1561)]=!0,this[o(1113)]=[],this[o(1500)]=!0,this["sab"]=e,this[o(964)]=30,this["needSetPreSoft"]=!1,this[o(1416)]=2,this["decoderOutSuccess"]=!1,this["decoderObjNeedReset"]=!1,this["oVideoRenderHandle"]=i,this[o(602)]=this[o(602)]["bind"](this),this[o(312)]=this[o(312)][o(979)](this),(this[o(1376)]=null)!=a&&(this[o(1376)]=a)}return c(t,[{key:e(1271),value:function(){var t,i=e;null==this["decoderObj"]&&(t={output:this[i(602)],error:this[i(312)]},this[i(1349)]=new VideoDecoder(t)),this[i(1500)]&&(this["underflow"]=!1,setTimeout(this[i(1439)][i(1141)](),0)),this["decoderCurStatus"]=2,this["FirstFrame"]=!0}},{key:e(1545),value:function(t,i){var n=e;null==this["decoderObj"]||n(600)!=this["decoderObj"][n(1037)]&&!this[n(1561)]||this["decodeProcess"](t,i),i[n(386)]&&this[n(1110)]()}},{key:e(837),value:function(t){for(var i=e,n=0,a=arguments[i(525)],o=new Array(1<a?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];for(var s=0,l=o;s<l[i(525)];s++)n+=l[s][i(525)];for(var d=new t(n),c=0,u=0,h=o;u<h[i(525)];u++){var x=h[u];d[i(483)](x,c),c+=x["length"]}return d}},{key:e(523),value:function(t){for(var i=e,n=null,a=null,o=null,r=!1,s=!1,l=0,d=0;d<t["length"]-4;d++){if(0!=t[d]||0!=t[d+1]||0!=t[d+2]||1!=t[d+3]||103!=t[d+4]&&39!=t[d+4]||(0!=d?(s=!0,n=t[i(809)](d),l=d):n=t),0==t[d]&&0==t[d+1]&&0==t[d+2]&&1==t[d+3]&&(9==t[d+4]||6==t[d+4])){if(null==n)continue;null==a&&(a=t["slice"](l,d),r=!0)}if(0==t[d]&&0==t[d+1]&&0==t[d+2]&&1==t[d+3]&&(101==t[d+4]||37==t[d+4])){r&&(o=t[i(809)](d));break}}return r?this["concatenate"](Uint8Array,a,o):s?n:t}},{key:e(1369),value:function(e){return 0!=e[0]||0!=e[1]||0!=e[2]||1!=e[3]||9!=e[4]&&6!=e[4]?e:e["slice"](5)}},{key:e(622),value:function(t,i,n,a){var o=e,r="";if(5==i)r=o(848),console[o(1590)]("265 hard decoder");else if(256==i){for(var s=0;s<t[o(525)];s++)if(103===t[s]||39===t[s]){for(var l=t["subarray"](s+1,s+4),d=(r=o(1510),0);d<3;d++){var c=l[d]["toString"](16);r+=c=c[o(525)]<2?"0"+c:c}break}console["log"]("264 hard decoder")}else console[o(1590)](o(876));var u={codec:r,hardwareAcceleration:"prefer-hardware",optimizeForLatency:1};return 5!=i&&this[o(1222)]&&(u[o(453)]="prefer-software"),u}},{key:e(1358),value:function(t,i){var n=e;this[n(964)]!=i[n(964)]&&(this[n(964)]=i["frameRate"]),this[n(1454)]!=i[n(1454)]&&(this[n(1454)]=i[n(1454)]),this[n(1384)]!=i["height"]&&(this[n(1384)]=i["height"]),i[n(1222)]&&(this[n(1222)]=i[n(1222)]);var a=t;if(4!=this[n(1416)]&&null!=this[n(1349)])if("configured"==this[n(1349)][n(1037)]){var o=new EncodedVideoChunk({data:a,timestamp:i[n(432)],type:i[n(1392)]?n(581):n(945)});this[n(1349)][n(1027)](o),t=a=null,i[n(952)]}else if(i[n(1392)]&&n(1283)==this[n(1349)][n(1037)]){if(o=this[n(622)](t,i[n(714)],i[n(1454)],i[n(1384)]),""==o["codec"])return-1;this[n(1349)][n(1185)](o),a=this[n(523)](t),this[n(1561)]=!1,o=new EncodedVideoChunk({data:a,timestamp:i["timeStamp"],type:i[n(1392)]?n(581):n(945)}),this[n(1349)][n(1027)](o),a=null}}},{key:e(602),value:function(t){var i=e;"configured"==this[i(1349)][i(1037)]?(t["format"],t["codedWidth"],t["codedHeight"],t["displayWidth"],t["displayHeight"],t["duration"],t["timestamp"],this[i(1113)][i(962)](t),this[i(345)]||(this[i(345)]=!0)):t["close"]()}},{key:e(778),value:function(t){var i=e,n=this;t[i(559)],createImageBitmap(t)[i(705)]((function(e){var a=i;t[a(327)](),n[a(1113)][a(962)](e)}))}},{key:e(312),value:function(t){var i=e;console[i(1590)]("hardDecode reportError:"+t[i(1321)]+i(1099)+this[i(1349)][i(1037)]+",frameRate:"+this["frameRate"]),this[i(345)]?this[i(503)]=!0:(this[i(1439)][i(598)](),console[i(1590)]("%cswitch hardVideoDecoder to softVideoDecoder",i(692)))}},{key:"destroyDecoder",value:function(){var e=this;return new Promise((function(t,i){var a=n;e["clearDecoderObjBuffer"]()[a(705)]((function(){var i=a;null!=e["decoderObj"]&&(i(897)!=e[i(1349)][i(1037)]&&e[i(1349)]["close"](),console[i(1590)](i(1165)),e[i(1349)]=null),e[i(1416)]=4,e["decoderOutSuccess"]=!1,e[i(1561)]=!0,e[i(1500)]=!0,e[i(1222)]=!1,e[i(503)]=!1,t()}),(function(){i()}))}))}},{key:"resetDecoder",value:function(){var e=this;return new Promise((function(t,i){var a=n;e[a(437)]()[a(705)]((function(){var i=a;e["initDecoder"](),console[i(1590)](i(1073),"color:red"),t()}),(function(){i()}))}))}},{key:e(1579),value:function(){var e=this;return new Promise((function(t,i){for(var a=n,o=e["ready_frames"][a(525)],r=0;r<o;r++)e[a(1113)]["shift"]()[a(327)]();e[a(1113)][a(387)](0,e[a(1113)][a(525)]),null!=e[a(1349)]&&a(600)==e[a(1349)][a(1037)]&&e[a(1349)]["reset"](),t()}))}},{key:e(1110),value:function(){var t=e;return 0==this[t(1349)][t(1537)]&&0==this[t(1113)]["length"]&&(this["decoderObj"][t(1468)](),console[t(1590)](t(1468))),1}}]),t}(),J={SR_OK:1,SR_ERR_NOT_SUPPORT:2147483649,SR_ERR_SUBPORT:2147483650,SR_ERR_ALLOC_MEMORY:2147483651,SR_ERR_CALL_ORDER:2147483652,SR_ERR_PARAM:2147483653,SR_ERR_CAPTURE:2147483654,SR_ERR_SUBPORT_FULL:2147483655,SR_ERR_SHADER:2147483656,SR_ERR_3D_MODEL:2147483657,SR_ERR_FONT:2147483658,SR_ERR_MEMORY_LIMIT:2147483659,SR_ERR_WEBGPU_RESOURCE:2147483660,SR_ERR_CANVAS:2147483661,SR_ERR_FREETYPE_INIT:2147483662,SR_ERR_FREETYPE_RESOURCE:2147483663},q={SR_DE_NULL:0,SR_DE_FISH_ORIGINAL:1,SR_DE_FISH_PTZ_CEILING:2,SR_DE_FISH_PTZ_FLOOR:3,SR_DE_FISH_PTZ_WALL:4,SR_DE_FISH_PANORAMA_CEILING_360:5,SR_DE_FISH_PANORAMA_CEILING_180:6,SR_DE_FISH_PANORAMA_FLOOR_360:7,SR_DE_FISH_PANORAMA_FLOOR_180:8,SR_DE_FISH_PANORAMA_WALL:9,SR_DE_FISH_SEMISPHERE:10,SR_DE_EAGLEEYE_SEMISPHERE:11,SR_DE_EAGLEEYE_PLANE:12,SR_DE_FISH_CYLINDER_CEILING:13,SR_DE_FISH_CYLINDER_FLOOR:14,SR_DE_FISH_CYLINDER_SPLIT_CEILING:15,SR_DE_FISH_CYLINDER_SPLIT_FLOOR:16,SR_DE_FISH_PLANET:17,SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:18,SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:19,SR_DE_FISH_ANIMATION_SWITCH_CEILING:20,SR_DE_FISH_ANIMATION_SWITCH_FLOOR:21,SR_DE_PANORAMA_SPHERE:22,SR_DE_PANORAMA_PLANET:23},K=0,$=1,Q=2,ee=3,te=4,ie=0,ne=1,ae=2,oe=1,re=2,se=3,le=0,de=1,ce=1,ue=2;function he(e,t,i){var a=n;t in e?Object[a(645)](e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}function xe(e,t,i,a){var o=n;return e[o(494)](0)<<24|t[o(494)](0)<<16|i[o(494)](0)<<8|a[o(494)](0)}var fe=null,pe=c((function e(){var t=n;l(this,e),he(this,t(844),function(){var e=t,i=s(h()[e(460)]((function t(i,n,a){var o,r=e;return h()[r(894)]((function(e){for(var t=r;;)switch(e["prev"]=e[t(811)]){case 0:null==fe&&((o=document[t(1546)](t(1237)))[t(1378)]=t(953),o["src"]=i,o[t(1173)]=function(){var e=t;window[e(384)]()[e(705)]((function(e){fe=e,n(a)}))},document[t(1051)][t(1175)](o));case 1:case t(974):return e[t(1476)]()}}),t)})));return function(t,n,a){var o=e;return i[o(1089)](this,arguments)}}()),he(this,"Error_String",(function(e){var i=t;return fe[i(1401)](e)})),he(this,"Library_Version",(function(e){var i=t,n=[0],a=[0],o=[0];return fe[i(1583)](e["bind"],n,a,o),{major:n[0],minor:a[0],patch:o[0]}})),he(this,"Init_FreeType",(function(e){var i=t;if(null!=fe)return fe[i(1375)](e[i(979)])})),he(this,"Done_FreeType",(function(e){var i=t;if(null!=fe)return fe[i(792)](e[i(979)])})),he(this,t(883),(function(e,i,n,a){var o=t;if(null!=fe)return fe[o(1338)](e[o(979)],i,n,a[o(979)])})),he(this,t(1310),(function(e){var i=t;if(null!=fe)return fe[i(853)](e[i(979)])})),he(this,t(530),(function(e,t){if(null!=fe)return fe["FT_Get_Char_Index"](e["bind"],t)})),he(this,t(1186),(function(e,i){var n=t,a=2<arguments[n(525)]&&void 0!==arguments[2]?arguments[2]:v[n(971)];if(null!=fe)return fe["FT_Load_Char"](e[n(979)],i,a)})),he(this,t(354),(function(e,i,n,a,o){var r=t;if(null!=fe)return fe[r(1270)](e[r(979)],i,n,a,o)})),he(this,t(1431),(function(e,i,n){var a=t;if(null!=fe)return fe[a(764)](e[a(979)],i,n)})),he(this,t(1273),(function(e){var i=t,n=1<arguments[i(525)]&&void 0!==arguments[1]?arguments[1]:y[i(800)];if(null!=fe)return fe[i(1118)](e,n)})),he(this,t(623),(function(e,i,n,a){var o=t,r=4<arguments[o(525)]&&void 0!==arguments[4]?arguments[4]:new m;if(null!=fe)return fe[o(740)](e["bind"],i,n,a,r)})),he(this,t(889),(function(e,i,n){var a=t;if(null!=fe)return fe[a(1007)](e,i,n)}))})),me=((u=p=p||{})[u["Ok"]=0]="Ok",u[u[e(996)]=1]=e(996),u[u[e(653)]=2]="Unknown_File_Format",u[u[e(803)]=3]=e(803),u[u[e(807)]=4]=e(807),u[u[e(1059)]=5]="Lower_Module_Version",u[u[e(1481)]=6]=e(1481),u[u[e(688)]=7]="Unimplemented_Feature",u[u["Invalid_Table"]=8]=e(1448),u[u[e(1031)]=9]=e(1031),u[u[e(1289)]=10]=e(1289),u[u[e(1460)]=11]=e(1460),u[u[e(827)]=12]=e(827),u[u[e(1034)]=16]=e(1034),u[u[e(1013)]=17]="Invalid_Character_Code",u[u[e(627)]=18]=e(627),u[u[e(748)]=19]=e(748),u[u[e(1102)]=20]=e(1102),u[u[e(1471)]=21]=e(1471),u[u[e(557)]=22]="Too_Many_Hints",u[u[e(736)]=23]=e(736),u[u["Invalid_Handle"]=32]=e(542),u[u[e(1332)]=33]="Invalid_Library_Handle",u[u[e(887)]=34]="Invalid_Driver_Handle",u[u[e(859)]=35]=e(859),u[u["Invalid_Size_Handle"]=36]=e(392),u[u[e(1368)]=37]=e(1368),u[u[e(608)]=38]="Invalid_CharMap_Handle",u[u[e(511)]=39]="Invalid_Cache_Handle",u[u[e(898)]=40]=e(898),u[u[e(936)]=48]=e(936),u[u["Too_Many_Extensions"]=49]=e(679),u[u[e(1121)]=64]=e(1121),u[u[e(1390)]=65]=e(1390),u[u[e(638)]=81]=e(638),u[u[e(1513)]=82]=e(1513),u[u[e(524)]=83]=e(524),u[u[e(385)]=84]=e(385),u[u[e(821)]=85]=e(821),u[u["Invalid_Frame_Operation"]=86]=e(546),u[u[e(403)]=87]=e(403),u[u[e(1550)]=88]=e(1550),u[u["Raster_Uninitialized"]=96]="Raster_Uninitialized",u[u[e(1534)]=97]=e(1534),u[u[e(1493)]=98]=e(1493),u[u[e(1050)]=99]=e(1050),u[u["Too_Many_Caches"]=112]=e(1406),u[u[e(1191)]=128]=e(1191),u[u[e(1319)]=129]="Too_Few_Arguments",u[u["Stack_Overflow"]=130]=e(434),u[u[e(702)]=131]=e(702),u[u[e(538)]=132]="Bad_Argument",u[u[e(346)]=133]="Divide_By_Zero",u[u[e(1281)]=134]=e(1281),u[u[e(1495)]=135]=e(1495),u[u["ENDF_In_Exec_Stream"]=136]=e(849),u[u[e(553)]=137]=e(553),u[u[e(865)]=138]=e(865),u[u[e(637)]=139]=e(637),u[u[e(1428)]=140]="Too_Many_Function_Defs",u[u[e(1506)]=141]=e(1506),u[u[e(1560)]=142]="Table_Missing",u[u[e(1297)]=143]="Horiz_Header_Missing",u[u[e(910)]=144]=e(910),u[u[e(568)]=145]="Name_Table_Missing",u[u[e(1435)]=146]=e(1435),u[u[e(1389)]=147]="Hmtx_Table_Missing",u[u[e(975)]=148]="Post_Table_Missing",u[u["Invalid_Horiz_Metrics"]=149]=e(382),u[u[e(324)]=150]="Invalid_CharMap_Format",u[u[e(620)]=151]=e(620),u[u["Invalid_Vert_Metrics"]=152]="Invalid_Vert_Metrics",u[u[e(1008)]=153]=e(1008),u[u[e(1213)]=154]=e(1213),u[u[e(1449)]=155]=e(1449),u[u["DEF_In_Glyf_Bytecode"]=156]=e(1231),u[u["Missing_Bitmap"]=157]=e(495),u[u[e(566)]=160]=e(566),u[u[e(718)]=161]=e(718),u[u[e(1225)]=162]=e(1225),u[u[e(1234)]=163]=e(1234),u[u[e(662)]=164]="Glyph_Too_Big",u[u[e(442)]=176]="Missing_Startfont_Field",u[u[e(618)]=177]=e(618),u[u[e(464)]=178]="Missing_Size_Field",u[u[e(888)]=179]=e(888),u[u["Missing_Chars_Field"]=180]=e(999),u[u[e(1144)]=181]="Missing_Startchar_Field",u[u[e(788)]=182]=e(788),u[u[e(1093)]=183]=e(1093),u[u["Bbx_Too_Big"]=184]=e(895),u[u[e(1288)]=185]="Corrupted_Font_Header",u[u[e(735)]=186]=e(735),(u={NONE:0,0:e(672)})[u[e(1412)]=xe("c","o","m","p")]=e(1412),u[u[e(339)]=xe("b","i","t","s")]="BITMAP",u[u[e(1022)]=xe("o","u","t","l")]="OUTLINE",u[u[e(477)]=xe("p","l","o","t")]=e(477),m=c((function e(){l(this,e),this["x"]=0,this["y"]=0})),_=function(){var t=e;function i(){l(this,i),this["bind"]=[null]}return c(i,[{key:t(520),value:function(){var e=t,i=bind["FT_Init_FreeType"](this[e(979)]);if(i!==p["Ok"])throw new Error("Library:init "+i[e(1503)]())}},{key:"done",value:function(){var e=t,i=bind[e(792)](this[e(979)]);if(i!==p["Ok"])throw new Error("Library:done "+i[e(1503)]())}}]),i}(),g=function(){var t=e;function i(){var e=n;l(this,i),this[e(979)]=[null]}return c(i,[{key:t(1479),get:function(){var e=t;if(null===this[e(979)][0])throw new Error;return this["bind"][0]}},{key:t(1518),get:function(){var e=t;return this[e(1479)][e(1518)]}},{key:t(709),get:function(){var e=t;return this["_bind"][e(709)]}},{key:t(1276),get:function(){var e=t;return this[e(1479)][e(1276)]}},{key:t(797),get:function(){var e=t;return this[e(1479)][e(797)]}},{key:t(1293),get:function(){var e=t;return this[e(1479)][e(1293)]}},{key:t(1312),get:function(){var e=t;return this[e(1479)][e(1312)]}},{key:t(1489),get:function(){var e=t;return this[e(1479)][e(1489)]}},{key:t(673),get:function(){var e=t;return this[e(1479)][e(673)]}},{key:t(475),get:function(){var e=t;return this[e(1479)]["units_per_EM"]}},{key:t(1143),get:function(){var e=t;return this[e(1479)][e(1143)]}},{key:t(470),get:function(){return this["_bind"]["descender"]}},{key:"height",get:function(){var e=t;return this[e(1479)]["height"]}},{key:"max_advance_width",get:function(){var e=t;return this[e(1479)][e(1496)]}},{key:t(860),get:function(){var e=t;return this[e(1479)][e(860)]}},{key:t(417),get:function(){var e=t;return this[e(1479)][e(417)]}},{key:t(590),get:function(){var e=t;return this[e(1479)][e(590)]}},{key:t(347),get:function(){var e=t;return this[e(1479)]["glyph"]}}]),i}(),(u=v=v||{})[u[e(971)]=0]=e(971),u[u[e(1526)]=1]=e(1526),u[u[e(861)]=2]=e(861),u[u[e(851)]=4]="RENDER",u[u[e(913)]=8]=e(913),u[u["VERTICAL_LAYOUT"]=16]=e(1223),u[u[e(615)]=32]="FORCE_AUTOHINT",u[u["CROP_BITMAP"]=64]=e(1320),u[u[e(340)]=128]=e(340),u[u[e(425)]=512]="IGNORE_GLOBAL_ADVANCE_WIDTH",u[u[e(1253)]=1024]="NO_RECURSE",u[u[e(1543)]=2048]="IGNORE_TRANSFORM",u[u["MONOCHROME"]=4096]=e(1393),u[u["LINEAR_DESIGN"]=8192]=e(1202),u[u[e(1445)]=32768]=e(1445),u[u[e(1071)]=1048576]=e(1071),u[u["COMPUTE_METRICS"]=2097152]=e(1017),u[u["BITMAP_METRICS_ONLY"]=4194304]="BITMAP_METRICS_ONLY",u[u[e(455)]=256]=e(455),u[u[e(377)]=16384]=e(377),(u=y=y||{})[u[e(800)]=0]=e(800),u[u[e(1413)]=1]=e(1413),u[u[e(872)]=2]=e(872),u[u["LCD"]=3]=e(1587),u[u[e(808)]=4]=e(808),u[u[e(701)]=5]=e(701),e(1475)),_e=e(641),ge=e(1035),ve=.05,ye=1e-6,be=3.1415926,Se=.78539815,Ce=1e-6,we=e(1011)!=typeof Float32Array?Float32Array:Array;function Te(){var e=new we(16);return we!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Pe(e,t,i){var n=t[0],a=t[1],o=t[2],r=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],h=t[9],x=t[10],f=t[11],p=t[12],m=t[13],_=t[14],g=(t=t[15],i[0]),v=i[1],y=i[2],b=i[3];return e[0]=g*n+v*s+y*u+b*p,e[1]=g*a+v*l+y*h+b*m,e[2]=g*o+v*d+y*x+b*_,e[3]=g*r+v*c+y*f+b*t,g=i[4],v=i[5],y=i[6],b=i[7],e[4]=g*n+v*s+y*u+b*p,e[5]=g*a+v*l+y*h+b*m,e[6]=g*o+v*d+y*x+b*_,e[7]=g*r+v*c+y*f+b*t,g=i[8],v=i[9],y=i[10],b=i[11],e[8]=g*n+v*s+y*u+b*p,e[9]=g*a+v*l+y*h+b*m,e[10]=g*o+v*d+y*x+b*_,e[11]=g*r+v*c+y*f+b*t,g=i[12],v=i[13],y=i[14],b=i[15],e[12]=g*n+v*s+y*u+b*p,e[13]=g*a+v*l+y*h+b*m,e[14]=g*o+v*d+y*x+b*_,e[15]=g*r+v*c+y*f+b*t,e}function Ee(t,i,n,a){var o,r,s,l,d,c,u,h,x,f,p,m,_,g,v,y,b,S,C,w,T=e,P=a[0],E=a[1],k=(a=a[2],Math["hypot"](P,E,a));k<Ce||(P*=k=1/k,E*=k,a*=k,k=Math[T(514)](n),n=Math[T(1268)](n),r=i[0],s=i[1],l=i[2],d=i[3],c=i[4],u=i[5],h=i[6],x=i[7],f=i[8],p=i[9],m=i[10],_=i[11],v=P*E*(o=1-n)-a*k,y=E*E*o+n,b=a*E*o+P*k,S=P*a*o+E*k,C=E*a*o-P*k,w=a*a*o+n,t[0]=r*(n=P*P*o+n)+c*(g=E*P*o+a*k)+f*(a=a*P*o-E*k),t[1]=s*n+u*g+p*a,t[2]=l*n+h*g+m*a,t[3]=d*n+x*g+_*a,t[4]=r*v+c*y+f*b,t[5]=s*v+u*y+p*b,t[6]=l*v+h*y+m*b,t[7]=d*v+x*y+_*b,t[8]=r*S+c*C+f*w,t[9]=s*S+u*C+p*w,t[10]=l*S+h*C+m*w,t[11]=d*S+x*C+_*w,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]))}Math["hypot"]||(Math[e(378)]=function(){for(var e=0,t=arguments["length"];t--;)e+=arguments[t]*arguments[t];return Math["sqrt"](e)});var ke=function(t,i,n,a,o){var r=e;return i=1/Math[r(616)](i/2),t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(t[10]=(o+a)*(n=1/(a-o)),t[14]=2*o*a*n):(t[10]=-1,t[14]=-2*a),t},Re=function(e,t,i,n,a,o,r){var s=1/(t-i),l=1/(n-a),d=1/(o-r);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+i)*s,e[13]=(a+n)*l,e[14]=(r+o)*d,e[15]=1,e};function Ie(){var e=new we(3);return we!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function De(e,t,i){var n=new we(3);return n[0]=e,n[1]=t,n[2]=i,n}function Me(){var e=new we(4);return we!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}Ie(),u=new we(4),we!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0),Ie(),De(1,0,0),De(0,1,0),Me(),Me(),u=new we(9),we!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u=new we(2),we!=Float32Array&&(u[0]=0,u[1]=0);var Ae=function(){var t=e;function i(){var e=n;l(this,i),this[e(852)]=.785,this[e(1488)]=1,this[e(1240)]=.02,this[e(1505)]=1e3,this[e(1337)]=0,this[e(1095)]=0,this[e(970)]=0,this[e(649)]=1,this["bOrtho"]=!1,this["matView"]=Te(),this[e(1308)]=Te(),this[e(1169)]=De(0,0,0),this["vecCenter"]=De(0,0,100),this[e(1581)]=De(0,1,0)}return c(i,[{key:t(338),value:function(e){this["fTheta"]=e}},{key:"GetYaw",value:function(){var e=t;return this[e(1337)]}},{key:"SetPitch",value:function(e){var i=t;this[i(1095)]=e}},{key:t(1177),value:function(){return this["fAlpha"]}},{key:"SetRoll",value:function(e){var i=t;this[i(970)]=e}},{key:t(348),value:function(){return this["fBeta"]}},{key:t(995),value:function(e){var i=t;this[i(649)]=e}},{key:"GetScale",value:function(){var e=t;return this[e(649)]}},{key:t(659),value:function(e){var i=t;this[i(852)]=e}},{key:t(791),value:function(e){this["fAspect"]=e}},{key:t(1400),value:function(e){var i=t;this[i(1240)]=e}},{key:"SetFar",value:function(e){var i=t;this[i(1505)]=e}},{key:t(1136),value:function(e){var i=t;this[i(1517)]=e}},{key:t(311),value:function(e,i){var n,a,o,r,s,l,d=t;e<=0||i<=0||(1==this[d(1517)]?Re(this["matProj"],0,e,i,0,this[d(1240)],this[d(1505)]):(n=this[d(852)]/be*180,ke(this["matProj"],n,e/i,this[d(1240)],this[d(1505)])),this[d(1169)]=De(0,0,this["fScale"]),this[d(506)]=De(0,0,0),this[d(1581)]=De(0,1,0),n=De(1,0,0),e=De(0,1,0),i=De(0,0,1),function(e,t,i,n){var a,o,r,s,l=d,c=t[0],u=t[1],h=(t=t[2],n[0]),x=n[1],f=(n=n[2],i[0]),p=i[1];i=i[2];if(Math[l(1502)](c-f)<Ce&&Math[l(1502)](u-p)<Ce&&Math["abs"](t-i)<Ce)return(s=e)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1;s=t-i,a=x*(s*=p=1/Math[l(378)](i=c-f,f=u-p,s))-n*(f*=p),n=n*(i*=p)-h*s,h=h*f-x*i,(p=Math[l(378)](a,n,h))?(a*=p=1/p,n*=p,h*=p):h=n=a=0,x=f*h-s*n,o=s*a-i*h,r=i*n-f*a,(p=Math[l(378)](x,o,r))?(x*=p=1/p,o*=p,r*=p):r=o=x=0,e[0]=a,e[1]=x,e[2]=i,e[3]=0,e[4]=n,e[5]=o,e[6]=f,e[7]=0,e[8]=h,e[9]=r,e[10]=s,e[11]=0,e[12]=-(a*c+n*u+h*t),e[13]=-(x*c+o*u+r*t),e[14]=-(i*c+f*u+s*t),e[15]=1}(a=Te(),this[d(1169)],this["vecCenter"],this[d(1581)]),o=Te(),r=Te(),s=Te(),l=Te(),Ee(r,o,-this[d(1095)],n),Ee(s,r,-this[d(1337)],e),Ee(l,s,-this[d(970)],i),Pe(this[d(956)],a,l))}},{key:t(998),value:function(){var e=t;return this[e(956)]}},{key:t(1210),value:function(){var e=t;return this[e(1308)]}}]),i}(),Be=function(){var t,i=e;function a(){var e=n;l(this,a),this[e(863)]=null,this["ctx"]=null,this["videoShaderProgram"]=0,this[e(309)]=0,this[e(775)]=0,this["frameDisplayWidth"]=0,this[e(320)]=0,this[e(978)]=!1,this[e(355)]=!1,this[e(1023)]=!0,this[e(1571)]=0,this["nMaxPointNum"]=0,this[e(522)]=null,this[e(1394)]=null,this[e(1014)]=0,this["glLineClrBuffer"]=0,this[e(1256)]=0,this[e(1108)]=0,this[e(1065)]=null,this[e(603)]=null,this["nMaxFillBlockTriNum"]=0,this[e(1130)]=0,this[e(1085)]=0,this[e(560)]=0,this[e(1096)]=!1,this[e(782)]=null,this["FreetypeLibHandle"]=null,this["FTFace"]=null,this[e(411)]=null,this[e(890)]=0,this[e(1313)]=0,this["nFontColorTexture"]=0,this[e(644)]=0,this[e(551)]=0,this[e(1328)]=0,this[e(941)]=[],this[e(828)]=!1,this[e(429)]=null,this["enDisplayEffect"]=q["SR_DE_NULL"],this[e(1491)]=-1,this[e(582)]=!1,this["pSemiSpherePos"]=null,this["pSemiSphereTex"]=null,this["nSemiSpherePosNum"]=0,this[e(1566)]=0,this["nSemiSphereTexSize"]=0,this[e(334)]=null,this[e(371)]=null,this[e(801)]=0,this[e(1109)]=0,this[e(749)]=0,this["fCylinderHeight"]=0,this[e(493)]=0,this[e(983)]=!1,this[e(482)]=null,this["fRotateX"]=0,this[e(669)]=0,this["fScale"]=0,this[e(1333)]=null,this[e(1075)]=null,this[e(1230)]=null,this[e(1411)]=null,this[e(762)]=!0}return c(a,[{key:i(1359),value:function(e,t){var n=i,a=this[n(926)];if(null==a||null==e||null==t)return-1;var o=a[n(855)](a[n(353)]);return a["shaderSource"](o,e),a[n(1307)](o),a["getShaderParameter"](o,a[n(629)])?(e=a["createShader"](a[n(539)]),a[n(532)](e,t),a[n(1307)](e),a[n(757)](e,a[n(629)])?(t=a["createProgram"](),a[n(730)](t,o),a[n(730)](t,e),a[n(1573)](t),a["getProgramParameter"](t,a[n(1149)])?(a[n(1205)](o),a[n(1205)](e),t):(console[n(1590)]("Program failed to compile: "+a[n(950)](t)),-1)):(console[n(1590)](n(906)+a[n(813)](e)),-1)):(console[n(1590)](n(407)+a[n(813)](o)),-1)}},{key:i(1483),value:function(e){var t=i;return null==e?J[t(650)]:(this[t(863)]=e,this[t(926)]=this[t(863)]["getContext"](t(1549)),this[t(926)]||(this[t(926)]=this[t(863)][t(1021)]("webgl")||this[t(863)]["getContext"](t(763)),this[t(978)]=!0,console[t(1590)]("only support webgl1")),this[t(926)]?J["SR_OK"]:(console[t(1590)]("your browser does not support WebGL"),J[t(1129)]))}},{key:"SR_Draw",value:function(e){var t=i;if(null==this[t(926)])return J["SR_ERR_CALL_ORDER"];if(null==e)return J["SR_ERR_PARAM"];if(0==this["videoShaderProgram"]||0==this[t(309)]||0==this[t(775)])return J[t(1538)];if(this[t(1584)]==e[t(1501)]&&this[t(320)]==e[t(526)]||(this[t(1584)]=e[t(1501)],this[t(320)]=e[t(526)]),1==this["bRecreateTex"]){0!=this[t(1571)]&&(n=this[t(1571)],this["ctx"]["deleteTexture"](n),this[t(1571)]=0);var n=this[t(926)][t(1514)]();if(n<=0)return J[t(528)];this[t(926)]["bindTexture"](this[t(926)]["TEXTURE_2D"],n),1==this["bAntialias"]?this[t(926)][t(760)](this[t(926)][t(588)],this["ctx"][t(373)],this[t(926)]["LINEAR_MIPMAP_NEAREST"]):this[t(926)][t(760)](this[t(926)][t(588)],this["ctx"][t(373)],this[t(926)]["LINEAR"]),this[t(926)][t(760)](this[t(926)]["TEXTURE_2D"],this[t(926)][t(715)],this[t(926)][t(406)]),this[t(926)][t(760)](this[t(926)][t(588)],this[t(926)][t(976)],this[t(926)]["CLAMP_TO_EDGE"]),this[t(926)]["texParameteri"](this[t(926)][t(588)],this[t(926)]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"]),this[t(1571)]=n,this[t(1023)]=!1}if(this[t(926)][t(756)](this[t(1257)]),this["ctx"][t(1044)](this["ctx"][t(1331)],this[t(309)]),n=this[t(926)][t(416)](this[t(1257)],"xy"),n<0)return J[t(528)];if(this[t(926)]["vertexAttribPointer"](n,3,this[t(926)][t(1473)],!1,0,0),this[t(926)][t(1362)](n),this["ctx"][t(1044)](this[t(926)][t(1331)],this[t(775)]),n=this[t(926)][t(416)](this["videoShaderProgram"],"uv"),n<0)return J["SR_ERR_WEBGL_RESOURCE"];this[t(926)][t(1193)](n,2,this["ctx"][t(1473)],!1,0,0),this[t(926)][t(1362)](n),this[t(926)][t(1044)](this[t(926)][t(1331)],null);var a=this["enDisplayEffect"];switch(a){case q[t(1347)]:break;case q["SR_DE_FISH_ORIGINAL"]:case q[t(1282)]:case q[t(474)]:case q[t(994)]:case q[t(1379)]:case q[t(1212)]:case q[t(472)]:case q["SR_DE_FISH_PANORAMA_FLOOR_180"]:case q["SR_DE_FISH_PANORAMA_WALL"]:if(null==this[t(429)])return J[t(1538)];var o=[],r=this["pFishParamManager"][t(796)](this[t(1491)],o);if(J[t(593)]!=r)return r;if(q[t(677)]==a){if(r=this["ctx"][t(893)](this["videoShaderProgram"],t(368)),r<=0)return J[t(528)];if(this[t(926)][t(871)](r,o["bBlack"]),r=this[t(926)]["getUniformLocation"](this[t(1257)],t(818)),r<=0)return J[t(528)];this["ctx"][t(871)](r,o[t(818)])}if(q["SR_DE_FISH_PTZ_CEILING"]==a||q[t(474)]==a||q["SR_DE_FISH_PTZ_WALL"]==a){if(r=this[t(926)][t(893)](this[t(1257)],t(988)),r<=0)return J[t(528)];if(this["ctx"]["uniform1f"](r,o[t(780)]),r=this[t(926)]["getUniformLocation"](this["videoShaderProgram"],t(1211)),r<=0)return J[t(528)];if(this[t(926)]["uniform1f"](r,o["fSinH"]),r=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],t(927)),r<=0)return J[t(528)];if(this[t(926)]["uniform1f"](r,o[t(1025)]),r=this[t(926)][t(893)](this["videoShaderProgram"],t(451)),r<=0)return J[t(528)];if(this[t(926)]["uniform1f"](r,o["fSinV"]),r=this[t(926)][t(893)](this[t(1257)],t(1580)),r<=0)return J[t(528)];this[t(926)][t(375)](r,o[t(1580)])}if(q[t(1379)]==a||q[t(1212)]==a||q[t(472)]==a||q["SR_DE_FISH_PANORAMA_FLOOR_180"]==a){if(r=this[t(926)]["getUniformLocation"](this["videoShaderProgram"],"fAngle"),r<=0)return J["SR_ERR_WEBGL_RESOURCE"];this[t(926)][t(375)](r,o[t(1485)])}if(r=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRX1"),r<=0)return J[t(528)];if(this["ctx"][t(375)](r,o[t(473)]),r=this[t(926)][t(893)](this["videoShaderProgram"],t(332)),r<=0)return J["SR_ERR_WEBGL_RESOURCE"];if(this["ctx"][t(375)](r,o[t(919)]),r=this[t(926)][t(893)](this[t(1257)],t(737)),r<=0)return J[t(528)];if(this[t(926)]["uniform1f"](r,o[t(1171)]),r=this["ctx"][t(893)](this[t(1257)],"fRY2"),r<=0)return J[t(528)];this[t(926)][t(375)](r,o[t(825)]);break;case q[t(1010)]:this[t(482)][t(995)](this[t(649)]),this[t(482)]["SetPitch"](3.14-this[t(420)]),this[t(482)]["SetYaw"](-this[t(669)]),this["pCamera"][t(311)](this[t(863)][t(1454)],this[t(863)][t(1384)]);r=this[t(482)][t(998)](),o=this[t(482)][t(1210)]();var s=this["ctx"][t(893)](this[t(1257)],t(956));if(s<=0)return J[t(528)];if(this[t(926)][t(1541)](s,!1,r),s=this[t(926)][t(893)](this["videoShaderProgram"],t(1308)),s<=0)return J[t(528)];this["ctx"]["uniformMatrix4fv"](s,!1,o);break;case q["SR_DE_FISH_CYLINDER_CEILING"]:case q[t(405)]:if(this["pCamera"][t(995)](this["fScale"]),this[t(482)][t(515)](-this["fRotateX"]),this[t(482)][t(338)](-this[t(669)]),this["pCamera"][t(311)](this[t(863)][t(1454)],this[t(863)][t(1384)]),r=this[t(482)][t(998)](),s=this[t(482)][t(1210)](),o=this["ctx"]["getUniformLocation"](this[t(1257)],t(956)),o<=0)return J[t(528)];if(this[t(926)]["uniformMatrix4fv"](o,!1,r),o=this[t(926)][t(893)](this[t(1257)],t(1308)),o<=0)return J[t(528)];this[t(926)]["uniformMatrix4fv"](o,!1,s)}if(this["canvas"]["width"]<=0||this["canvas"][t(1384)]<=0)return J[t(1129)];if(this[t(926)][t(349)](0,0,this[t(863)][t(1454)],this[t(863)][t(1384)]),this["ctx"]["clearColor"](0,0,0,1),this[t(926)]["clear"](this[t(926)][t(744)]|this[t(926)]["DEPTH_BUFFER_BIT"]),this[t(983)]&&(this[t(926)][t(326)](this[t(926)]["DEPTH_TEST"]),this[t(926)][t(610)](this["ctx"]["LESS"]),this["ctx"][t(1383)](!0),1==this[t(762)]?this["ctx"][t(326)](this[t(926)][t(533)]):this[t(926)]["disable"](this["ctx"][t(533)])),this["ctx"][t(1227)](this[t(926)]["TEXTURE_2D"],0,this[t(926)]["RGBA"],this["ctx"][t(917)],this["ctx"][t(1084)],e),1==this[t(355)]&&this[t(926)][t(450)](this["ctx"][t(588)]),this["onlySupportedWebGL1"]||this[t(926)][t(314)](this[t(926)][t(1078)],0,1,0),0==this[t(983)])this["ctx"][t(908)](this["ctx"][t(424)],0,4);else if(this[t(1198)]==q[t(1010)]){if(this[t(794)]<=0)return J["SR_ERR_CALL_ORDER"];this["ctx"][t(908)](this[t(926)][t(1381)],0,this["nSemiSpherePosNum"])}else if(this[t(1198)]==q[t(364)]){if(this[t(801)]<=0)return J["SR_ERR_CALL_ORDER"];this[t(926)]["drawArrays"](this[t(926)]["TRIANGLES"],0,this[t(801)])}return this[t(926)][t(756)](null),0==this[t(582)]&&null!=this[t(429)]&&-1!=(n=this["pFishParamManager"][t(631)]())&&n==this[t(1491)]&&this[t(617)](),null!=this[t(1333)]&&this[t(1333)](this[t(1230)]),null!=this[t(1075)]&&this[t(1075)](this[t(1411)]),J[t(593)]}},{key:i(617),value:function(){var e=i;if(null==this[e(429)])return J["SR_ERR_CALL_ORDER"];for(var t=this[e(429)][e(1062)](),n=0,a=[],o=(a["fR"]=0,a["fG"]=0,a["fB"]=0,a["fA"]=0,J[e(593)]),r=0;r<32;++r)if(0!=this[e(429)]["IsPortAllocated"](r)){if(n=2,o=this[e(429)][e(613)](r,a),J[e(593)]!=o)return o;1==this[e(429)][e(954)](r)&&(n+=1);var s=this[e(429)][e(631)]();if(r!=s&&ae==t){if(q[e(677)]==this["pFishParamManager"]["GetDisplayEffect"](s)){var l=[];o=this[e(429)][e(802)](r,l,ae);if(J["SR_OK"]!=o)return o;if(null!=l[e(319)]&&0!=l["nPointNum"]&&(o=this["SR_DrawLines"](l[e(319)],l[e(665)],!0,a,n,!1),J[e(593)]!=o))return o}}else if(r!=s&&ne==t){if(l=[],o=this[e(429)][e(802)](r,l,ne),J[e(593)]!=o)return o;if(null!=l[e(319)]&&0!=l["nPointNum"]&&(o=this[e(691)](l["pstPoints"],l[e(665)],!0,a,n,!1),J[e(593)]!=o))return o}}return J["SR_OK"]}},{key:i(508),value:function(e,t,n){var a=i;if(null==this["ctx"])return J[a(1538)];if(null==e||t<1||n<2)return J[a(650)];for(var o=0,r=0;r<t;++r){if(null==e[r][a(319)]||e[r]["nPointNum"]<3||!0!==e[r][a(667)]||null==e[r][a(556)])return J[a(650)];o+=e[r][a(665)]}if(o!==n)return J[a(650)];if(n-=2*t,n>this[a(1038)]&&(this["pFillBlockPosVertices"]=null,this[a(603)]=null,this[a(1038)]=n),0==this[a(1130)]&&(this[a(1130)]=this[a(926)]["createBuffer"](),0==this["glBlockPosBuffer"]))return J[a(528)];if(0==this[a(1085)]&&(this["glBlockClrBuffer"]=this[a(926)][a(1450)](),0==this[a(1085)]))return J[a(528)];if(null==this[a(1065)]){var s=this["nMaxFillBlockTriNum"];if(this[a(1065)]=new Float32Array(3*s*3),null==this[a(1065)])return J[a(694)]}if(this["pFillBlockPosVertices"][a(329)](0),null==this[a(603)]&&(s=this["nMaxFillBlockTriNum"],this[a(603)]=new Float32Array(4*s*3),null==this[a(603)]))return J[a(694)];this[a(603)][a(329)](0);for(var l,d,c,u=0,h=0,x={},f={},p={},m=0;m<t;++m){l=e[m]["nPointNum"],d=e[m]["pstPoints"],c=e[m][a(556)],x["fX"]=2*d[0]["fX"]-1,x["fY"]=1-2*d[0]["fY"];for(var _=1;_<l-1;_++)f["fX"]=2*d[_]["fX"]-1,f["fY"]=1-2*d[_]["fY"],p["fX"]=2*d[_+1]["fX"]-1,p["fY"]=1-2*d[_+1]["fY"],this[a(1065)][u++]=x["fX"],this[a(1065)][u++]=x["fY"],this[a(1065)][u++]=0,this[a(603)][h++]=c["fR"],this[a(603)][h++]=c["fG"],this[a(603)][h++]=c["fB"],this[a(603)][h++]=c["fA"],this["pFillBlockPosVertices"][u++]=f["fX"],this["pFillBlockPosVertices"][u++]=f["fY"],this[a(1065)][u++]=0,this[a(603)][h++]=c["fR"],this[a(603)][h++]=c["fG"],this["pFillBlockClrVertices"][h++]=c["fB"],this["pFillBlockClrVertices"][h++]=c["fA"],this["pFillBlockPosVertices"][u++]=p["fX"],this["pFillBlockPosVertices"][u++]=p["fY"],this[a(1065)][u++]=0,this[a(603)][h++]=c["fR"],this[a(603)][h++]=c["fG"],this["pFillBlockClrVertices"][h++]=c["fB"],this[a(603)][h++]=c["fA"]}return 0==this["nBlockShaderProgram"]&&(this["nBlockShaderProgram"]=this["CompileProgram"](_e,ge),0==this[a(560)])?J["SR_ERR_WEBGL_RESOURCE"]:(this[a(926)][a(326)](this["ctx"]["BLEND"]),this[a(926)]["blendFunc"](this[a(926)][a(858)],this[a(926)][a(921)]),this["ctx"]["bindBuffer"](this[a(926)][a(1331)],this[a(1130)]),this[a(926)]["bufferData"](this[a(926)][a(1331)],this[a(1065)],this[a(926)][a(914)]),this["ctx"][a(1044)](this[a(926)]["ARRAY_BUFFER"],null),this[a(926)][a(1044)](this[a(926)]["ARRAY_BUFFER"],this[a(1085)]),this[a(926)][a(724)](this["ctx"][a(1331)],this[a(603)],this[a(926)][a(914)]),this[a(926)][a(1044)](this["ctx"][a(1331)],null),this[a(926)]["useProgram"](this["nBlockShaderProgram"]),this[a(926)]["bindBuffer"](this["ctx"][a(1331)],this[a(1130)]),s=this[a(926)][a(416)](this[a(560)],a(1052)),this[a(926)][a(1362)](s),this[a(926)][a(1193)](s,3,this[a(926)][a(1473)],!1,0,0),this[a(926)][a(1044)](this[a(926)][a(1331)],null),this[a(926)][a(1044)](this[a(926)][a(1331)],this[a(1085)]),s=this["ctx"]["getAttribLocation"](this[a(560)],a(882)),this["ctx"][a(1362)](s),this[a(926)][a(1193)](s,4,this[a(926)][a(1473)],!1,0,0),this["ctx"][a(1044)](this["ctx"][a(1331)],null),this[a(926)]["drawArrays"](this[a(926)]["TRIANGLES"],0,3*n),this[a(926)]["useProgram"](null),this[a(926)][a(1076)](this[a(926)][a(661)]),J[a(593)])}},{key:"ComputeLinePoint",value:function(e,t){var n=i;if(null==e||t<1)return J[n(650)];if(null==this[n(522)]||null==this[n(1394)])return J[n(1538)];for(var a,o,r=0,s=0,l=0,d=0,c=0,u=0,h=0,x=0,f=0;f<t;++f){var p=[],m=e[f][n(665)];if(!(m<=0)){for(var _=0;_<m;++_){var g={};g["fX"]=e[f][n(319)][_]["fX"],g["fX"]=2*g["fX"]-1,g["fY"]=e[f]["pstPoints"][_]["fY"],g["fY"]=1-2*g["fY"],p["push"](g)}if(this["canvas"][n(1454)]<=0||this[n(863)][n(1384)]<=0)return J["SR_ERR_CANVAS"];if(a=3.5*e[f][n(609)]/this["canvas"][n(1454)],o=3.5*e[f][n(609)]/this[n(863)]["height"],a<=0||o<=0)return J[n(650)];var v=e[f][n(556)];if(null==v)return J["SR_ERR_PARAM"];for(var y=0;y<m-1;++y)s=p[y+1]["fX"]-p[y]["fX"],l=p[y+1]["fY"]-p[y]["fY"],r=Math[n(1540)](s*s+l*l),Math[n(1502)](+r)<1e-6||(c=o*s/r/2,this[n(522)][h++]=p[y]["fX"]+(d=-a*l/r/2),this[n(522)][h++]=p[y]["fY"]+c,this["pLinePosVertices"][h++]=-1,this[n(1394)][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[y+1]["fX"]-d,this[n(522)][h++]=p[y+1]["fY"]-c,this[n(522)][h++]=1,this[n(1394)][x++]=v["fR"],this["pLineClrVertices"][x++]=v["fG"],this["pLineClrVertices"][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[y]["fX"]-d,this[n(522)][h++]=p[y]["fY"]-c,this["pLinePosVertices"][h++]=1,this[n(1394)][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this["pLineClrVertices"][x++]=v["fA"],this[n(522)][h++]=p[y]["fX"]+d,this["pLinePosVertices"][h++]=p[y]["fY"]+c,this[n(522)][h++]=-1,this[n(1394)][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[y+1]["fX"]+d,this[n(522)][h++]=p[y+1]["fY"]+c,this["pLinePosVertices"][h++]=-1,this["pLineClrVertices"][x++]=v["fR"],this["pLineClrVertices"][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[y+1]["fX"]-d,this["pLinePosVertices"][h++]=p[y+1]["fY"]-c,this["pLinePosVertices"][h++]=1,this["pLineClrVertices"][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this["pLineClrVertices"][x++]=v["fB"],this[n(1394)][x++]=v["fA"],u+=2);1==e[f][n(667)]&&2<m&&(s=p[m-1]["fX"]-p[0]["fX"],l=p[m-1]["fY"]-p[0]["fY"],r=Math[n(1540)](s*s+l*l),1e-6<Math[n(1502)](+r)&&(c=o*s/r/2,this[n(522)][h++]=p[0]["fX"]+(d=-a*l/r/2),this[n(522)][h++]=p[0]["fY"]+c,this[n(522)][h++]=-1,this["pLineClrVertices"][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[m-1]["fX"]-d,this[n(522)][h++]=p[m-1]["fY"]-c,this[n(522)][h++]=1,this[n(1394)][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[0]["fX"]-d,this[n(522)][h++]=p[0]["fY"]-c,this[n(522)][h++]=1,this[n(1394)][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this["pLineClrVertices"][x++]=v["fB"],this["pLineClrVertices"][x++]=v["fA"],this[n(522)][h++]=p[0]["fX"]+d,this["pLinePosVertices"][h++]=p[0]["fY"]+c,this["pLinePosVertices"][h++]=-1,this[n(1394)][x++]=v["fR"],this["pLineClrVertices"][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[m-1]["fX"]+d,this["pLinePosVertices"][h++]=p[m-1]["fY"]+c,this[n(522)][h++]=-1,this[n(1394)][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],this[n(522)][h++]=p[m-1]["fX"]-d,this[n(522)][h++]=p[m-1]["fY"]-c,this[n(522)][h++]=1,this[n(1394)][x++]=v["fR"],this[n(1394)][x++]=v["fG"],this[n(1394)][x++]=v["fB"],this[n(1394)][x++]=v["fA"],u+=2))}}return 0==u?J[n(650)]:(this[n(1256)]=u,J[n(593)])}},{key:"SR_DrawLines",value:function(e,t,n,a,o,r){var s=i,l=[],d=[];return d[s(319)]=e,d[s(665)]=t,d[s(667)]=n,d["pstColor"]=a,d[s(609)]=o,l[s(962)](d),this["SR_DrawLinesEx"](l,1,t,r)}},{key:i(1521),value:function(e,t,n,a){var o=i;if(null==this[o(926)])return J[o(1538)];if(null==e||t<1||n<2)return J[o(650)];if(0==this[o(1108)]){var r=this[o(1359)](_e,ge);if(r<=0)return J["SR_ERR_WEBGL_RESOURCE"];this[o(1108)]=r}if(1==a)return this[o(508)](e,t,n);for(var s=0,l=0;l<t;++l){if(null==e[l][o(319)]||e[l]["nPointNum"]<=1||1024<=e[l][o(665)]||e[l][o(609)]<=0||null==e[l][o(556)])return J[o(650)];s+=e[l][o(665)]}if(s!=n)return J[o(650)];if((s+=t)>this[o(607)]&&(this[o(607)]=s,this[o(522)]=null,this["pLineClrVertices"]=null),null==this[o(522)]&&(this[o(522)]=new Float32Array(6*this["nMaxPointNum"]*3),null==this["pLinePosVertices"]))return J[o(694)];if(this[o(522)][o(329)](0),null==this[o(1394)]&&(this[o(1394)]=new Float32Array(6*this[o(607)]*4),null==this["pLineClrVertices"]))return J[o(694)];if(this[o(1394)][o(329)](0),0==this[o(1014)]&&(this["glLinePosBuffer"]=this[o(926)][o(1450)](),0==this[o(1014)]))return J[o(528)];if(0==this[o(541)]&&(this[o(541)]=this[o(926)]["createBuffer"](),0==this[o(541)]))return J[o(528)];if(r=this[o(1189)](e,t),J["SR_OK"]!=r)return r;this["ctx"][o(326)](this["ctx"]["BLEND"]),this[o(926)]["blendFunc"](this[o(926)][o(858)],this[o(926)][o(921)]);a=this[o(1108)],this["ctx"]["useProgram"](a),n=this[o(1014)],r=this["glLineClrBuffer"];var d=this[o(1256)],c=this[o(522)],u=this["pLineClrVertices"];this[o(926)]["bindBuffer"](this[o(926)][o(1331)],n),this[o(926)][o(724)](this[o(926)][o(1331)],c,this["ctx"][o(914)]),n=this[o(926)][o(416)](a,"position"),this[o(926)][o(1362)](n),this[o(926)]["vertexAttribPointer"](n,3,this[o(926)]["FLOAT"],!1,0,0),this[o(926)][o(1044)](this["ctx"][o(1331)],r),this["ctx"][o(724)](this[o(926)]["ARRAY_BUFFER"],u,this["ctx"][o(914)]),c=this[o(926)][o(416)](a,o(882));return this["ctx"]["enableVertexAttribArray"](c),this["ctx"]["vertexAttribPointer"](c,4,this[o(926)][o(1473)],!1,0,0),this[o(926)][o(1044)](this[o(926)][o(1331)],null),this[o(926)][o(349)](0,0,this[o(863)][o(1454)],this[o(863)][o(1384)]),this[o(926)]["drawArrays"](this[o(926)][o(1381)],0,3*d),this["ctx"][o(756)](null),this[o(926)]["disable"](this["ctx"][o(661)]),J["SR_OK"]}},{key:i(1408),value:(t=s(h()[i(460)]((function e(t){var n,a,o,r,s,l,d,c,u=i;return h()[u(894)]((function(e){for(var i=u;;)switch(e[i(707)]=e[i(811)]){case 0:if(null==t)return e[i(341)]("return");e[i(811)]=2;break;case 2:if(null==(a=(n=t)["FreetypeLibHandle"]))return e["abrupt"](i(678),J["SR_ERR_PARAM"]);e["next"]=6;break;case 6:if(null==(o=new _))return e[i(341)](i(678),J[i(694)]);e["next"]=9;break;case 9:if((r=a[i(436)](o))!==p["Ok"])throw new Error(a[i(754)](r));e[i(811)]=12;break;case 12:if(null==n[i(782)]||null==n[i(782)])return e["abrupt"](i(678),J["SR_ERR_CALL_ORDER"]);e["next"]=14;break;case 14:return e[i(811)]=16,fetch(n[i(782)]);case 16:if(null==(s=e[i(1520)]))return e[i(341)](i(678),J[i(713)]);e["next"]=19;break;case 19:return e[i(811)]=21,s[i(415)]();case 21:if(null==(l=e[i(1520)]))return e["abrupt"](i(678),J[i(713)]);e["next"]=24;break;case 24:if(null==(d=new Uint8Array(l)))return e[i(341)](i(678),J["SR_ERR_FREETYPE_INIT"]);e[i(811)]=27;break;case 27:if(null==(c=new g))return e[i(341)]("return",J[i(713)]);e["next"]=30;break;case 30:if((r=a[i(883)](o,d,0,c))!==p["Ok"])throw n["FreetypeLibHandle"]=null,new Error(a[i(754)](r));e[i(811)]=34;break;case 34:n[i(411)]=o,n[i(1043)]=c;case 36:case"end":return e[i(1476)]()}}),e)}))),function(e){var n=i;return t[n(1089)](this,arguments)})},{key:i(578),value:function(e,t){var n=i;if(null==t)return J[n(650)];if(!this[n(1096)]){var a=new pe;if(null==a)return J[n(366)];this["pFontPath"]=t,t=this[n(1408)],(this[n(1522)]=a)["loadWasm"](e,t,this),this[n(1096)]=!0}return J["SR_OK"]}},{key:"SR_DrawFont",value:function(e,t,n,a,o,r,s){var l=i;if(null==e||null==t||null==n||a<=1||o<=1)return J[l(650)];if(1==r&&null==s)return J[l(650)];var d=[],c=[];return c[l(1002)]=r,c["nFontWidth"]=a,c["nFontHeight"]=o,c["pstBGColor"]=s,c[l(1474)]=n,c[l(400)]=e,c[l(1267)]=t,d[l(962)](c),this[l(1419)](d,1)}},{key:i(1419),value:function(e,t){var n=i;if(null==this[n(926)]||null==this["FreetypeLibHandle"])return J[n(1538)];if(t<0||null==e)return J[n(650)];if(this["nDrawFontWidth"]==this[n(863)][n(1454)]/4*4&&this[n(863)][n(1384)]==this[n(1277)]/4*4||(this[n(644)]=null,this[n(835)]=0,this["nDrawFontWidth"]=this[n(863)]["width"]/4*4,this[n(1313)]=this["canvas"][n(1384)]/4*4),null==this[n(644)]||0==this[n(835)]){if(this[n(644)]=new Uint8Array(this[n(890)]*this[n(1313)]*4),null==this["pFontColorBuffer"])return J["SR_ERR_ALLOC_MEMORY"];if(this["pFontColorBuffer"][n(329)](0),this[n(835)]=this["ctx"][n(1514)](),0==this[n(835)])return J[n(528)];this[n(926)]["bindTexture"](this["ctx"]["TEXTURE_2D"],this[n(835)]),this["ctx"]["texParameteri"](this[n(926)][n(588)],this[n(926)][n(715)],this["ctx"]["LINEAR"]),this[n(926)]["texParameteri"](this[n(926)][n(588)],this[n(926)][n(373)],this[n(926)][n(406)]),this[n(926)]["texParameteri"](this[n(926)][n(588)],this[n(926)][n(976)],this[n(926)][n(597)]),this[n(926)]["texParameteri"](this[n(926)]["TEXTURE_2D"],this["ctx"][n(1132)],this[n(926)]["CLAMP_TO_EDGE"])}for(var a=0,o=0;o<t;o++)e[o][n(452)]&&a++;if(this[n(1328)]<a){for(var r=0;r<this["nFontBGNum"];++r)this[n(941)][r][n(319)]=null,this[n(941)][r][n(556)]=null;this["pstFontBGLines"]=null,this[n(941)]=[];for(var s=0;s<a;++s)this[n(941)][s][n(319)]=[],this[n(941)][s][n(556)]=[];this[n(1328)]=a}a=0;for(var l=0;l<t;++l){var d=e[l]["pstStartPos"]["fX"]*this["nDrawFontWidth"],c=e[l][n(1267)]["fY"]*this[n(1313)],u=e[l][n(400)][n(525)],h=(e[l]["nFontWidth"]==e[l]["nFontHeight"]&&(e[l][n(1570)]=e[l]["nFontHeight"]-1),this[n(1313)]),x=0,f=255*e[l][n(1474)]["fA"],m=255*e[l][n(1474)]["fR"],_=255*e[l][n(1474)]["fG"],g=255*e[l]["pstFontColor"]["fB"];if((S=this["FreetypeLibHandle"][n(354)](this[n(1043)],64*this["nDrawFontWidth"],64*this[n(1313)],300,300))!==p["Ok"])throw new Error(this["FreetypeLibHandle"]["Error_String"](S));for(var b=0;b<u;++b){var S,C=e[l][n(400)][n(494)](b);if((S=this[n(1522)][n(1186)](this["FTFace"],C,v[n(1526)]))!=p["Ok"])throw new Error(this[n(1522)][n(754)](S));var w=this[n(1043)][n(347)];if((S=this[n(1522)][n(1273)](w,y[n(800)]))!==p["Ok"])throw new Error(pe[n(754)](S));var T=w[n(1555)];d+=w[n(1348)],(C=this[n(1313)]-w[n(654)])<h&&(h=C),x<(C=T["row"])&&(x=C);for(var P=0;P<T[n(419)]*T["width"];++P){var E,k=Math[n(1265)](e[l][n(1570)]-w[n(654)]+c+P/T[n(1454)]);k>=this[n(1313)]||(k=d+k*this[n(890)]+P%T["width"])<0||k>=this[n(890)]*this[n(1313)]||0<T["buffer"][P]&&((E=this["pFontColorBuffer"])[4*k]=g,E[4*k+1]=_,E[4*k+2]=m,E[4*k+3]=f)}d+=T[n(1454)]}var R=[];R[n(1575)]=e[l][n(1267)]["fX"],R[n(322)]=e[l]["pstStartPos"]["fY"]+h/this["nDrawFontHeight"],R[n(518)]=d/this[n(890)],R[n(1209)]=x/this[n(1313)]+R[n(322)],R[n(1575)]-=.01,R[n(322)]-=.01,R["fRight"]+=.01,R[n(1209)]+=.01,1==e[l][n(452)]&&(this["pstFontBGLines"][a][n(319)]=R,this[n(941)][a][n(665)]=4,this["pstFontBGLines"][a][n(667)]=!0,this["pstFontBGLines"][a][n(556)]=e[l][n(940)],a+=this[n(941)][a]["nLineWidth"]=1)}0!=a&&this[n(1521)](this[n(941)],a,4*a,!1),this[n(926)][n(317)](this["ctx"][n(588)],this[n(835)]),this[n(926)]["texImage2D"](this[n(926)][n(588)],0,this["ctx"][n(917)],this[n(890)],this["nDrawFontHeight"],0,this[n(926)][n(917)],this[n(926)][n(1084)],this[n(644)]),0==this[n(551)]&&(this["nFontShaderProgram"]=this[n(1359)](n(676),n(766))),this["ctx"][n(349)](0,0,this[n(863)][n(1454)],this[n(863)][n(1384)]),this[n(926)][n(326)](this[n(926)][n(661)]),this[n(926)][n(823)](this[n(926)][n(858)],this[n(926)]["ONE_MINUS_SRC_ALPHA"]),this[n(926)]["useProgram"](this[n(551)]),this[n(926)]["activeTexture"](this["ctx"][n(599)]),this[n(926)]["bindTexture"](this[n(926)]["TEXTURE_2D"],this[n(835)]);var I=this[n(926)][n(893)](this[n(551)],n(1236));this[n(926)][n(871)](I,0),this["ctx"][n(1044)](this[n(926)][n(1331)],this["vertexPosBuffer"]),I=this[n(926)]["getAttribLocation"](this[n(551)],n(1052)),this[n(926)][n(1362)](I),this[n(926)][n(1193)](I,3,this[n(926)][n(1473)],!1,0,0),this[n(926)][n(1044)](this[n(926)][n(1331)],this[n(775)]),I=this[n(926)][n(416)](this[n(551)],n(567));return this["ctx"][n(1362)](I),this[n(926)][n(1193)](I,2,this[n(926)][n(1473)],!1,0,0),this[n(926)]["bindBuffer"](this[n(926)][n(1331)],null),this[n(926)][n(908)](this[n(926)][n(1381)],0,6),this[n(926)][n(756)](null),this[n(926)][n(1076)](this[n(926)]["BLEND"]),J[n(593)]}},{key:"SR_AddSubPort",value:function(e){var t=i;if(null==this["ctx"])return J[t(1538)];var n,a,o=-1;if(e==q["SR_DE_NULL"])o=0;else if(-1==(o=null!=this[t(429)]?this[t(429)]["GetFECPort"](e):o))return o;switch(this[t(1491)]=o,e){case q[t(1347)]:n=me,this[t(983)]=!(a="\nvarying highp vec2 v_uv;\nuniform sampler2D texture;\nvoid main(void) {\n  gl_FragColor = texture2D(texture, v_uv);\n}\n");break;case q[t(677)]:n=me,a="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fRX1;\nuniform float fRX2;\nuniform float fRY1;\nuniform float fRY2;\nuniform int bBlack; \nuniform int bCut;\n\nvoid main()\n{ \n\tfloat r,g,b;\n\tvec4 origin;\n\n\tfloat  w;\n\tfloat  h;\n\tfloat  fCenterX;\n\tfloat  fCenterY;\n\tfloat  fRadius;\n\tw = 1.0;\n\th = (fRX2 - fRX1) / (fRY2 - fRY1);\n\tfCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n\tfCenterY = (fRY1 + fRY2) / 2.0 * h;\n\tfRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n\tfloat  leftCut = 0.0;\n\tfloat  rightCut = 1.0;\n\tfloat  topCut = 0.0;\n\tfloat  bottomCut = 1.0;\n\tif(bCut == 1)\n\t{\n\t\tif(fRX1 > 0.0)\n\t\t{\n\t\t\tleftCut = fRX1;\n\t\t}\n\t\tif(fRX2 < 1.0)\n\t\t{\n\t\t\trightCut = fRX2;\n\t\t}\n\t\tif(fRY1 > 0.0)\n\t\t{\n\t\t\ttopCut = fRY1;\n\t\t}\n\t\tif(fRY2 < 1.0)\n\t\t{\n\t\t\tbottomCut = fRY2;\n\t\t}\n\t}\n\torigin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n\torigin.t = v_uv.t * (bottomCut-topCut) + topCut;\n\n\tr = texture2D(texture, origin.st).r; \n\tg = texture2D(texture, origin.st).g; \n\tb = texture2D(texture, origin.st).b; \n\n\tif(bBlack == 1)\n\t{\n\t\tfloat tmpX, tmpY;\n\t\ttmpX = origin.s * w; \n\t\ttmpY = origin.t * h; \n\t\tfloat d2 = (tmpX-fCenterX)*(tmpX-fCenterX) + (tmpY-fCenterY)*(tmpY-fCenterY);\n\t\tif(d2 > fRadius*fRadius)\n\t\t{\n\t\t\tr = 0.0; \n\t\t\tg = 0.0; \n\t\t\tb = 0.0; \n\t\t}\n\t}\n\n\tgl_FragColor = vec4(r ,g ,b , 1.0);\n}\n",this[t(828)]=!0,this[t(983)]=!1;break;case q[t(1282)]:n=me,a=t(1082),this[t(828)]=!0,this[t(983)]=!1;break;case q[t(474)]:n=me,a=t(1087),this[t(828)]=!0;break;case q[t(994)]:n=me,a="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;  \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 origin3;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  z3;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<�뾶ʵ�ʳ���\n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    origin3.s = origin2.s*fHAngleCos + z2*fHAngleSin ;\n    origin3.t = origin2.y;\n    z3 = z2*fHAngleCos - origin2.x*fHAngleSin;\n\n    dnew = sqrt(origin3.s*origin3.s + origin3.t*origin3.t) ;\n    float d = sqrt(origin3.s*origin3.s + origin3.t*origin3.t + z3*z3);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    result.s = (tmp*origin3.s / dnew * fRadius * 2.0 + fCenterX)/w;\n    result.t = (tmp*origin3.t / dnew * fRadius * 2.0 + fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this[t(828)]=!0,this["b3DPort"]=!1;break;case q[t(1379)]:n=me,a=t(830),this[t(828)]=!0,this[t(983)]=!1;break;case q[t(1212)]:n=me,a="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1; \n    uniform float fRX2; \n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5)\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = newpp.s;\n        origin.t = (bottomCut - topCut) * newpp.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0;\n            g = 0.0;\n            b = 0.0;\n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this["bFECHandle"]=!0,this[t(983)]=!1;break;case q[t(472)]:n=me,a=t(1067),this[t(828)]=!0,this[t(983)]=!1;break;case q[t(1366)]:n=me,a=t(1101),this[t(828)]=!0,this[t(983)]=!1;break;case q[t(1018)]:n=me,a=SHADER_PS_RGBA_PANORAMA_WALL,this[t(828)]=!0,this["b3DPort"]=!1;break;case q[t(1010)]:case q["SR_DE_FISH_CYLINDER_CEILING"]:case q[t(405)]:n=t(335),a=t(1535),this[t(828)]=!0,this[t(983)]=!0}o=this[t(1359)](n,a),this["videoShaderProgram"]=o,o=null;var r=null,s=(0==this["b3DPort"]?(o=new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),r=new Float32Array([0,1,0,0,1,0,1,1])):e==q[t(1010)]&&(this["CreateSemiSphere"](0,1,0,1),o=this[t(881)],r=this[t(1524)]),this["ctx"]["createBuffer"]());this[t(926)]["bindBuffer"](this[t(926)][t(1331)],s),this[t(926)][t(724)](this[t(926)]["ARRAY_BUFFER"],o,this[t(926)][t(914)]),this["vertexPosBuffer"]=s,o=this[t(926)]["createBuffer"](),this[t(926)]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],o),this[t(926)][t(724)](this["ctx"][t(1331)],r,this[t(926)][t(914)]),this[t(775)]=o,this["ctx"]["bindBuffer"](this["ctx"][t(1331)],null),s=this["InitCamera"](e);return J["SR_OK"]!=s?-1:(this[t(1198)]=e,this[t(1491)])}},{key:i(943),value:function(e){var t=i;return null==this[t(926)]?J["SR_ERR_CALL_ORDER"]:(null!=this["pFishParamManager"]&&this[t(429)][t(1360)](e),this["bFECHandle"]=!1,this[t(1198)]=q[t(1347)],0!=this[t(1257)]&&null!=this[t(926)]&&(this[t(926)][t(1124)](this[t(1257)]),this["videoShaderProgram"]=0),0!=this[t(309)]&&null!=this[t(926)]&&(this["ctx"]["deleteBuffer"](this[t(309)]),this[t(309)]=0),0!=this[t(775)]&&null!=this[t(926)]&&(this[t(926)]["deleteBuffer"](this["texturePosBuffer"]),this[t(775)]=0),this[t(607)]=0,this[t(522)]=null,this["pLineClrVertices"]=null,0!=this[t(1014)]&&null!=this[t(926)]&&(this["ctx"][t(1443)](this[t(1014)]),this[t(1014)]=0),0!=this[t(1539)]&&null!=this[t(926)]&&(this["ctx"][t(1443)](this[t(1539)]),this[t(1539)]=0),(this["nLineTriangleNum"]=0)!=this[t(1108)]&&null!=this["ctx"]&&(this[t(926)][t(1124)](this["nLineShaderProgram"]),this[t(1108)]=0),this["pFillBlockPosVertices"]=null,this[t(603)]=null,(this[t(1038)]=0)!=this[t(1130)]&&null!=this[t(926)]&&(this[t(926)]["deleteBuffer"](this[t(1130)]),this[t(1130)]=0),0!=this["glBlockClrBuffer"]&&null!=this[t(926)]&&(this[t(926)]["deleteBuffer"](this[t(1085)]),this[t(1085)]=0),0!=this[t(560)]&&null!=this[t(926)]&&(this[t(926)][t(1124)](this[t(560)]),this[t(560)]=0),null!=this[t(1522)]&&null!=this[t(1043)]&&(this[t(1522)][t(1310)](this[t(1043)]),this[t(1043)]=null),null!=this["FreetypeLibHandle"]&&null!=this[t(411)]&&(this[t(1522)]["Done_FreeType"](this[t(411)]),this[t(411)]=null),this[t(1096)]=!1,this["pFontPath"]=null,this["FreetypeLibHandle"]=null,this[t(890)]=0,(this[t(1313)]=0)!=this[t(835)]&&null!=this[t(926)]&&(this[t(926)][t(1470)](this["nFontColorTexture"]),this["nFontColorTexture"]=0),(this[t(644)]=0)!=this[t(551)]&&null!=this[t(926)]&&(this[t(926)]["deleteProgram"](this[t(551)]),this[t(551)]=0),this["nFontBGNum"]=0,this[t(941)]=null,this["pSemiSpherePos"]=null,this[t(1524)]=null,this[t(794)]=0,this[t(1566)]=0,this[t(1229)]=0,this[t(334)]=null,this[t(371)]=null,this[t(801)]=0,this[t(1109)]=0,this[t(749)]=0,this["fCylinderHeight"]=0,this["fCylinderRadius"]=0,this[t(983)]=!1,this["pCamera"]=null,this["fRotateX"]=0,this["fRotateY"]=0,this["fScale"]=0,this[t(1333)]=null,this[t(1075)]=null,this[t(1230)]=null,this["pUserOut"]=null,this[t(926)][t(1076)](this["ctx"][t(533)]),this[t(926)]["disable"](this[t(926)]["DEPTH_TEST"]),J[t(593)])}},{key:i(1116),value:function(e){var t=i;return null==e?J[t(650)]:null==this[t(429)]?J[t(1538)]:this[t(429)][t(444)](this["nFECPort"],e)}},{key:i(412),value:function(e){var t=i;return null==e?J[t(650)]:null==this[t(429)]?J["SR_ERR_CALL_ORDER"]:this[t(429)][t(1057)](this[t(1491)],e)}},{key:"SR_SetDisplayRect",value:function(e,t,n,a){var o=i;if(null==this[o(926)])return J[o(1538)];var r,s,l=null;return l=0<this[o(1584)]&&0<this[o(320)]?(r=e/this[o(1584)],s=t/this[o(320)],e=(e+n)/this[o(1584)],n=(t+a)/this[o(320)],new Float32Array([r,n,r,s,e,s,e,n])):new Float32Array([0,1,0,0,1,0,1,1]),this[o(926)][o(1044)](this[o(926)]["ARRAY_BUFFER"],this[o(775)]),this[o(926)][o(440)](this[o(926)][o(1331)],0,l),this[o(926)][o(1044)](this[o(926)][o(1331)],null),J["SR_OK"]}},{key:i(1577),value:function(){var e=i;return null==this[e(926)]?J[e(1538)]:(this[e(1584)]=0,(this["frameDisplayHeight"]=0)!=this["nSurfaceTexture"]&&null!=this[e(926)]&&(this[e(926)][e(1470)](this[e(1571)]),this[e(1571)]=0),0==this[e(828)]?this[e(943)](0):-1!=this[e(1491)]&&this[e(943)](this[e(1491)]),this[e(978)]=!1,this[e(355)]=!1,this[e(1023)]=!0,this["pFishParamManager"]=null,this["canvas"]=null,this["ctx"]=null,J[e(593)])}},{key:i(422),value:function(e,t){var n=i;return this["canvas"]["width"]=e,this[n(863)][n(1384)]=t,J[n(593)]}},{key:i(918),value:function(){var e=i;return console[e(1590)](e(720)+this[e(863)]["width"]+e(468)+this[e(863)][e(1384)]),J[e(593)]}},{key:i(552),value:function(e){var t=i;return 1==this[t(978)]?J[t(1112)]:(this[t(355)]!=e&&(this[t(1023)]=!0,this[t(355)]=e),J[t(593)])}},{key:i(328),value:function(e){var t=i;return null==this[t(429)]?J[t(1538)]:this["pFishParamManager"][t(728)](e)}},{key:i(1299),value:function(e){var t=i;return null!=this["pFishParamManager"]?J[t(1112)]:(this[t(429)]=e,J[t(593)])}},{key:i(1322),value:function(e,t,n,a){var o=i;if(null!=this["pSemiSpherePos"]||null!=this[o(1524)])return J[o(1538)];this[o(881)]=new Float32Array(43200),this[o(1524)]=new Float32Array(28800);for(var r=(t-e)/(a-n),s=(t-e)/2*1,l=2*be/60,d=be/2/40,c=0,u=0,h=0,x=0;x<60;++x)for(var f=0;f<40;++f){var p,m,_=x*l,g=(0==x&&(c=_),59==x?c:(x+1)*l),v=-f*d,y=-(f+1)*d;this[o(881)][u]=-1*Math[o(1268)](v)*Math[o(1268)](_),this[o(881)][u+1]=+Math[o(514)](v),this[o(881)][u+2]=-1*Math["cos"](v)*Math[o(514)](_),m=.5-.5*(1+v/(be/2))*Math[o(514)](_),p=.5-.5*(1+v/(be/2))*Math[o(1268)](_),this[o(1524)][h++]=2*p*s+ +e,this[o(1524)][h++]=(2*m*s+n*r)/r,u+=3,this[o(881)][u]=-1*Math[o(1268)](y)*Math["cos"](_),this["pSemiSpherePos"][u+1]=+Math[o(514)](y),this[o(881)][u+2]=-1*Math[o(1268)](y)*Math[o(514)](_),m=.5-.5*(1+y/(be/2))*Math[o(514)](_),p=.5-.5*(1+y/(be/2))*Math[o(1268)](_),this[o(1524)][h++]=2*p*s+ +e,this[o(1524)][h++]=(2*m*s+n*r)/r,u+=3,this[o(881)][u]=-1*Math["cos"](v)*Math[o(1268)](g),this[o(881)][u+1]=+Math[o(514)](v),this["pSemiSpherePos"][u+2]=-1*Math[o(1268)](v)*Math[o(514)](g),m=.5-.5*(1+v/(be/2))*Math["sin"](g),p=.5-.5*(1+v/(be/2))*Math[o(1268)](g),this[o(1524)][h++]=2*p*s+ +e,this["pSemiSphereTex"][h++]=(2*m*s+n*r)/r,u+=3,this[o(881)][u]=-1*Math[o(1268)](v)*Math[o(1268)](g),this[o(881)][u+1]=+Math[o(514)](v),this[o(881)][u+2]=-1*Math[o(1268)](v)*Math[o(514)](g),m=.5-.5*(1+v/(be/2))*Math[o(514)](g),p=.5-.5*(1+v/(be/2))*Math[o(1268)](g),this["pSemiSphereTex"][h++]=2*p*s+ +e,this[o(1524)][h++]=(2*m*s+n*r)/r,u+=3,this[o(881)][u]=-1*Math[o(1268)](y)*Math[o(1268)](_),this[o(881)][u+1]=+Math[o(514)](y),this["pSemiSpherePos"][u+2]=-1*Math["cos"](y)*Math[o(514)](_),m=.5-.5*(1+y/(be/2))*Math[o(514)](_),p=.5-.5*(1+y/(be/2))*Math[o(1268)](_),this["pSemiSphereTex"][h++]=2*p*s+ +e,this["pSemiSphereTex"][h++]=(2*m*s+n*r)/r,u+=3,this[o(881)][u]=-1*Math[o(1268)](y)*Math[o(1268)](g),this[o(881)][u+1]=+Math[o(514)](y),this[o(881)][u+2]=-1*Math[o(1268)](y)*Math[o(514)](g),m=.5-.5*(1+y/(be/2))*Math[o(514)](g),p=.5-.5*(1+y/(be/2))*Math[o(1268)](g),this["pSemiSphereTex"][h++]=2*p*s+ +e,this[o(1524)][h++]=(2*m*s+n*r)/r,u+=3}return this[o(794)]=u/3,this[o(1566)]=3,this[o(1229)]=2,J[o(593)]}},{key:i(742),value:function(e){var t=i;if(null!=this["pCamera"])return SR_ERR_CALL_ORDER;switch(e){case q[t(1347)]:case q[t(677)]:case q[t(1282)]:case q["SR_DE_FISH_PTZ_FLOOR"]:case q["SR_DE_FISH_PTZ_WALL"]:case q[t(1379)]:case q[t(1212)]:case q["SR_DE_FISH_PANORAMA_FLOOR_360"]:case q[t(1366)]:case q[t(1018)]:return J["SR_OK"];case q[t(1010)]:if(this[t(482)]=new Ae,null==this[t(482)])return J[t(694)];this[t(482)]["SetFov"](Se),this["pCamera"]["SetNear"](.02),this[t(482)][t(824)](1e3),this[t(420)]=1.57,this[t(482)][t(515)](3.14-this["fRotateX"]),this[t(649)]=3,this[t(482)][t(995)](this[t(649)]);break;case q[t(364)]:case q["SR_DE_FISH_CYLINDER_FLOOR"]:if(this[t(482)]=new Ae,null==this[t(482)])return J[t(694)];this[t(482)][t(659)](Se),this[t(482)][t(1400)](.02),this[t(482)][t(824)](1e3),this["fRotateX"]=-.785,this[t(482)][t(515)](-this["fRotateX"]),this[t(649)]=6,this[t(482)][t(995)](this[t(649)]);break;case q[t(414)]:case q[t(1139)]:if(this[t(482)]=new Ae,null==this[t(482)])return J[t(694)];this[t(482)][t(1136)](!0),this[t(482)][t(1400)](.02),this["pCamera"]["SetFar"](1e3),this[t(649)]=3,this[t(482)][t(995)](this[t(649)]);break;default:return J[t(1112)]}return J[t(593)]}},{key:i(1294),value:function(e,t){var n=i;if(!this[n(983)])return J["SR_ERR_NOT_SUPPORT"];switch(e){case oe:this[n(420)]=t;break;case re:this[n(669)]=t;break;case se:if(this[n(1198)]==q[n(1010)]){if(t<-.8||900<t)return J[n(650)]}else if((this[n(1198)]==q[n(405)]||this["enDisplayEffect"]==q[n(364)])&&(t<0||900<t))return J[n(650)];this[n(649)]=t;break;default:return J[n(1112)]}return J[n(593)]}},{key:i(418),value:function(e){var t=i;if(!this[t(983)])return J[t(1112)];var n=0;switch(e){case oe:n=this[t(420)];break;case re:n=this[t(669)];break;case se:n=this[t(649)]}return n}},{key:i(504),value:function(e,t,n){var a=i;switch(n){case le:this[a(1333)]=e,this["pUserIn"]=t;break;case de:this[a(1075)]=e,this[a(1411)]=t;break;default:return J[a(1112)]}return J[a(593)]}},{key:"SR_SetRenderState",value:function(e,t){var n=i;switch(e){case ce:if(this[n(983)])return J[n(1112)];break;case ue:if(!this[n(983)])return J[n(1112)];Math[n(1502)](+t)<ye?this[n(762)]=!1:this[n(762)]=!0;break;default:return J[n(1112)]}return J["SR_OK"]}},{key:i(1372),value:function(e,t){var n=i;return null==this["pFishParamManager"]?J["SR_ERR_CALL_ORDER"]:this[n(429)][n(1486)](e,t)}},{key:"SR_GetPTZColor",value:function(e,t){var n=i;return null==this[n(429)]?J[n(1538)]:this[n(429)][n(613)](e,t)}},{key:i(1551),value:function(e){var t=i;return null==this["pFishParamManager"]?J[t(1538)]:this[t(429)][t(430)](e)}},{key:"SR_GetPTZPort",value:function(e,t){var n=i;return null==this[n(429)]?J["SR_ERR_CALL_ORDER"]:this[n(429)][n(993)](e,t)}}]),a}(),Le=function(){var t=e;function i(){var e=n;l(this,i),this[e(863)]=null,this[e(926)]=null,this[e(795)]=0,this[e(521)]=0,this[e(379)]=0,this["regionSh"]=0,this[e(1009)]=!1,this[e(355)]=!1,this[e(668)]=!1}return c(i,[{key:"SR_Init",value:function(e){var t=n;this[t(863)]=e,this[t(926)]=this[t(863)][t(1021)]("2d"),this[t(926)]||console[t(1590)](t(944))}},{key:"SR_Draw",value:function(e){var t=n;this[t(1009)]?this[t(926)][t(1079)](e,this[t(795)],this[t(521)],this[t(379)],this[t(1365)],0,0,this[t(863)][t(1454)],this[t(863)][t(1384)]):this[t(926)][t(1079)](e,0,0,e[t(1501)],e[t(526)],0,0,this[t(863)][t(1454)],this["canvas"][t(1384)])}},{key:t(943),value:function(e){return 0}},{key:t(856),value:function(e){return 0}},{key:t(1166),value:function(e,i,n,a){var o=t;this[o(795)]=e,this[o(521)]=i,this[o(379)]=n,this["regionSh"]=a,this[o(1009)]=!0}},{key:t(1577),value:function(){var e=t;this["canvas"]=null,this[e(926)]=null,this[e(795)]=0,this["regionSy"]=0,this[e(379)]=0,this["regionSh"]=0,this[e(1009)]=!1}},{key:t(422),value:function(e,i){var n=t;this[n(863)][n(1454)]=e,this[n(863)]["height"]=i}},{key:t(918),value:function(){var e=t;console[e(1590)](e(720)+this["canvas"][e(1454)]+",height:"+this[e(863)][e(1384)])}},{key:t(552),value:function(e){var i=t;return e!=this[i(355)]?(this["bAntialias"]=e,this[i(668)]=!0):this[i(668)]=!1,this[i(668)]&&(this[i(355)]?(this["canvas"][i(1454)]=5*this[i(863)][i(1454)],this[i(863)][i(1384)]=5*this[i(863)]["height"],this[i(863)][i(396)]["transform"]=i(1199)):(this["canvas"][i(1454)]=this["canvas"][i(1454)]/5,this[i(863)][i(1384)]=this[i(863)]["height"]/5,this["canvas"][i(396)][i(1492)]="scale(1)"),this["canvas"]["style"][i(390)]=i(706)),1}}]),i}(),Fe=function(){var t=e;function a(){var e=n;l(this,a),this[e(1105)]=[],this["pRenderParam"]=[],this[e(812)]=[],this[e(1208)]=[],this[e(739)]=null,this[e(1042)]=[],this[e(652)]=[],this[e(1405)]=[],this["nPTZFragmentNum"]=[],this[e(884)]=[],this[e(1325)]=[],this[e(1459)]=[],this[e(1343)]=[],this[e(1120)]=ie,this[e(915)]=0,this[e(332)]=1,this[e(737)]=0,this[e(402)]=1,this[e(368)]=!1,this["pOriPTZPoints"]=[],this[e(884)]=[],this[e(1398)]=-1,this[e(1252)]=0,this[e(1138)]=[],this[e(646)]=[],this["nPTZDisplayMode"]=ae;for(var t=0;t<32;++t){this[e(1105)][t]=!1,this["bPTZSelected"][t]=!1,this[e(675)][t]=[],this["pRenderParam"][t][e(780)]=1,this[e(675)][t][e(1181)]=0,this[e(675)][t][e(1025)]=1,this["pRenderParam"][t][e(810)]=0,this[e(675)][t]["fAngle"]=0,this[e(675)][t][e(1580)]=0,this["pRenderParam"][t][e(915)]=0,this[e(675)][t][e(332)]=1,this[e(675)][t]["fRY1"]=0,this[e(675)][t][e(402)]=1,this["pRenderParam"][t]["nDisplayEffect"]=0,this[e(675)][t][e(368)]=!1,this[e(675)][t]["bCut"]=!1,this[e(812)][t]=[],this[e(812)][t]["nFishParamType"]=0,this[e(812)][t]["fRXLeft"]=0,this[e(812)][t][e(919)]=1,this[e(812)][t]["fRYTop"]=0,this[e(812)][t][e(825)]=1,this[e(812)][t]["bBlack"]=!1,this["pFishParam"][t][e(818)]=!1,this[e(812)][t][e(1485)]=0,this[e(812)][t][e(1580)]=0,this["pFishParam"][t]["fPTZX"]=.5,this[e(812)][t][e(660)]=.5,this["stPTZColor"][t]=[],this["stPTZColor"][t]["fR"]=0,this[e(1208)][t]["fG"]=0,this[e(1208)][t]["fB"]=0,this[e(1208)][t]["fA"]=0,this[e(1042)][t]=0,this["nOriPTZPointNum"][t]=0,this[e(1405)][t]=0,this[e(1343)][t]=0,this[e(1325)][t]=[],this[e(1459)][t]=[],this[e(884)][t]=[],this[e(1183)][t]=[];for(var i=0;i<4;++i)this[e(1459)][t][i]=[],this[e(1459)][t][i]["fX"]=0,this[e(1459)][t][i]["fY"]=0;for(var o=0;o<1024;++o)this[e(884)][t][o]=[],this[e(884)][t][o]["fX"]=0,this[e(884)][t][o]["fY"]=0,this[e(1183)][t][o]=[],this[e(1183)][t][o]["fX"]=0,this[e(1183)][t][o]["fY"]=0,this[e(1325)][t][o]=[],this[e(1325)][t][o]["fX"]=0,this[e(1325)][t][o]["fY"]=0;this[e(733)][t]=0,this["nPTZFragmentNode"][t]=[];for(var r=0;r<100;++r)this[e(1138)][t][r]=0}this[e(948)]()}return c(a,[{key:t(1385),value:function(e){for(var i=t,n=-1,a=0;a<32;++a)if(0==this[i(1105)][a]){n=a;break}if(-1!=n){var o=this[i(817)](e);if(J[i(593)]!=o)return this[i(1360)](n),-1;if(q[i(1379)]==e||q[i(1212)]==e||q[i(472)]==e||q[i(1366)]==e||q[i(1018)]==e||q[i(677)]==e){if(-1!=this[i(1398)])return this["FreeFECPort"](n),-1;this[i(1398)]=n}if(!(q[i(1282)]!=e&&q[i(474)]!=e&&q[i(994)]!=e||-1==this[i(1398)]||null==this[i(675)][this[i(1398)]]||q["SR_DE_FISH_PANORAMA_CEILING_180"]!=this["pRenderParam"][this[i(1398)]][i(310)]&&q["SR_DE_FISH_PANORAMA_FLOOR_180"]!=this[i(675)][this[i(1398)]]["nDisplayEffect"]))return this[i(1360)](n),-1;if(q[i(1212)]==e||q[i(1366)]==e)for(var r=0;r<32;++r)if(null!=this[i(675)][r]&&(q[i(1282)]==this[i(675)][r][i(310)]||q["SR_DE_FISH_PTZ_FLOOR"]==this[i(675)][r]["nDisplayEffect"]||q[i(994)]==this[i(675)][r]["nDisplayEffect"]))return this[i(1360)](n),-1;if(q["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==e)for(var s=0;s<32;++s)if(null!=this[i(675)][s]&&q[i(614)]==this[i(675)][s]["nDisplayEffect"])return this[i(1360)](n),-1;if(q[i(614)]==e)for(var l=0;l<32;++l)if(null!=this["pRenderParam"][l]&&q["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==this[i(675)][l]["nDisplayEffect"])return this[i(1360)](n),-1;this["pRenderParam"][n][i(780)]=1,this[i(675)][n][i(1181)]=0,this["pRenderParam"][n][i(1025)]=1,this[i(675)][n][i(1181)]=0,this[i(675)][n]["fAngle"]=0,this[i(675)][n][i(915)]=this["fRX1"],this[i(675)][n][i(332)]=this[i(332)],this["pRenderParam"][n][i(737)]=this["fRY1"],this[i(675)][n][i(402)]=this["fRY2"],this["pRenderParam"][n][i(368)]=this[i(368)],this[i(675)][n][i(1580)]=.035+.8,this[i(675)][n][i(310)]=e,this[i(812)][n][i(1485)]=this["pRenderParam"][n]["fAngle"],this[i(812)][n][i(875)]=.5,this[i(812)][n][i(660)]=.5,this[i(812)][n][i(473)]=this[i(675)][n][i(915)],this["pFishParam"][n][i(919)]=this[i(675)][n]["fRX2"],this[i(812)][n][i(1171)]=this[i(675)][n][i(737)],this["pFishParam"][n]["fRYBottom"]=this["pRenderParam"][n]["fRY2"],this[i(812)][n][i(368)]=this[i(675)][n][i(368)],this[i(812)][n][i(1580)]=(this[i(675)][n][i(1580)]-.8)/7,this[i(1105)][n]=!0}return n}},{key:t(1360),value:function(e){var n=t;if(e<0||32<=e)return J[n(650)];this[n(1398)]==e&&(this[n(1398)]=-1),this[n(675)][e][n(780)]=1,this[n(675)][e]["fSinH"]=0,this[n(675)][e][n(1025)]=1,this[n(675)][e][n(810)]=0,this[n(675)][e]["fAngle"]=0,this[n(675)][e][n(1580)]=0,this[n(675)][e][n(915)]=0,this["pRenderParam"][e][n(332)]=1,this[n(675)][e][n(737)]=0,this[n(675)][e]["fRY2"]=1,this[n(675)][e][n(310)]=0,this[n(675)][e]["bBlack"]=!1,this["pRenderParam"][e][n(818)]=!1,this[n(812)][e][n(572)]=0,this["pFishParam"][e][n(473)]=0,this[n(812)][e][n(919)]=1,this[n(812)][e][n(1171)]=0,this[n(812)][e][n(825)]=1,this[n(812)][e]["bBlack"]=!1,this[n(812)][e]["bCut"]=!1,this["pFishParam"][e][n(1485)]=0,this[n(812)][e][n(1580)]=0,this["pFishParam"][e][n(875)]=.5,this[n(812)][e][n(660)]=.5,this[n(1042)][e]=0,this[n(652)][e]=0,this[n(1405)][e]=0;for(var a=this[n(1343)][e]=0;a<4;++a)this[n(1459)][e][a]["fX"]=0,this["pRectPoints"][e][a]["fY"]=0;for(var o=0;o<1024;++o)this[n(884)][e][o]["fX"]=0,this["pBasePTZPoints"][e][o]["fY"]=0,this[n(1183)][e][o]["fX"]=0,this[n(1183)][e][o]["fY"]=0,this["pPanoPTZPoints"][e][o]["fX"]=0,this[n(1325)][e][o]["fY"]=0;if(null!=this[n(739)]&&(this[n(739)][e]["fA"]=0,this["pPTZSetColor"][e]["fR"]=0,this["pPTZSetColor"][e]["fG"]=0,this["pPTZSetColor"][e]["fB"]=0),this[n(646)][e]=!1,0!=this[n(1252)]){var r=!1;if(null!=this[n(675)][i])for(var s=0;s<32;++s)if(null!=this[n(675)][s]&&(q["SR_DE_FISH_PTZ_CEILING"]==this[n(675)][s]["nDisplayEffect"]||q[n(474)]==this["pRenderParam"][s][n(310)]||q[n(994)]==this[n(675)][s][n(310)]||q["SR_DE_FISH_PANORAMA_CEILING_360"]==this[n(675)][s][n(310)]||q["SR_DE_FISH_PANORAMA_CEILING_180"]==this[n(675)][s]["nDisplayEffect"]||q[n(472)]==this["pRenderParam"][s]["nDisplayEffect"]||q[n(1366)]==this["pRenderParam"][s][n(310)]||q[n(1018)]==this["pRenderParam"][s]["nDisplayEffect"]||q[n(364)]==this["pRenderParam"][s][n(310)]||q[n(405)]==this[n(675)][s][n(310)]||q[n(414)]==this[n(675)][s][n(310)]||q[n(1139)]==this["pRenderParam"][s][n(310)]||q["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==this["pRenderParam"][s]["nDisplayEffect"]||q[n(614)]==this[n(675)][s][n(310)])){r=!0;break}r||(this["nPlaceType"]=0)}for(var l=!1,d=0;d<32;++d)if(null!=this[n(675)][d]){l=!0;break}l||(this[n(915)]=0,this[n(332)]=1,this[n(737)]=0,this[n(402)]=1,this[n(368)]=!1);for(var c=this["nPTZFragmentNum"][e]=0;c<100;++c)this[n(1138)][e][c]=0;return this[n(1105)][e]=!1,J[n(593)]}},{key:t(505),value:function(){for(var e=t,i=0;i<32;++i){for(var n=0;n<4;++n)this[e(1459)][i][n]=null;for(var a=0;a<1024;++a)this["pBasePTZPoints"][i][a]=null,this[e(1183)][i][a]=null,this["pPanoPTZPoints"][i][a]=null;this[e(733)][i]=0,this["nPTZFragmentNode"][i]=null,this["bPortAllocated"][i]=!1,this[e(646)][i]=!1,this["pRenderParam"][i]=null,this[e(812)][i]=null,this[e(1208)][i]=null,this[e(1042)][i]=0,this[e(652)][i]=0,this["nPanoPTZPointNum"][i]=0,this[e(1343)][i]=0,this["pPanoPTZPoints"][i]=null,this["pRectPoints"][i]=null,this[e(884)][i]=null,this[e(1183)][i]=null}this[e(1105)]=null,this["pRenderParam"]=null,this[e(812)]=null,this[e(1208)]=null,this[e(739)]=null,this["nBasePTZPointNum"]=null,this[e(652)]=null,this[e(1405)]=null,this["nPTZFragmentNum"]=null,this["pBasePTZPoints"]=null,this["pPanoPTZPoints"]=null,this[e(1459)]=null,this["nPTZRectNum"]=null,this[e(1120)]=ie,this[e(915)]=0,this[e(332)]=1,this["fRY1"]=0,this[e(402)]=1,this[e(368)]=!1,this["pOriPTZPoints"]=null,this["pBasePTZPoints"]=null,this[e(1398)]=-1,this["nPlaceType"]=0,this[e(1138)]=null,this[e(646)]=null,this[e(1120)]=ae}},{key:"InitColorList",value:function(){var e=t;this["stPTZColor"][0]["fR"]=.5,this[e(1208)][0]["fG"]=.5,this[e(1208)][0]["fB"]=0,this["stPTZColor"][0]["fA"]=1,this[e(1208)][1]["fR"]=1,this[e(1208)][1]["fG"]=0,this[e(1208)][1]["fB"]=0,this[e(1208)][1]["fA"]=1,this[e(1208)][2]["fR"]=0,this["stPTZColor"][2]["fG"]=1,this[e(1208)][2]["fB"]=0,this["stPTZColor"][2]["fA"]=1,this[e(1208)][3]["fR"]=0,this[e(1208)][3]["fG"]=0,this["stPTZColor"][3]["fB"]=1,this[e(1208)][3]["fA"]=1,this["stPTZColor"][4]["fR"]=1,this["stPTZColor"][4]["fG"]=1,this[e(1208)][4]["fB"]=0,this[e(1208)][4]["fA"]=1,this[e(1208)][5]["fR"]=.5,this["stPTZColor"][5]["fG"]=0,this[e(1208)][5]["fB"]=1,this[e(1208)][5]["fA"]=1,this[e(1208)][6]["fR"]=0,this["stPTZColor"][6]["fG"]=1,this[e(1208)][6]["fB"]=1,this[e(1208)][6]["fA"]=1,this[e(1208)][7]["fR"]=1,this[e(1208)][7]["fG"]=.5,this["stPTZColor"][7]["fB"]=0,this[e(1208)][7]["fA"]=1,this[e(1208)][8]["fR"]=0,this[e(1208)][8]["fG"]=.5,this[e(1208)][8]["fB"]=.5,this[e(1208)][8]["fA"]=1;for(var i=9;i<32;i++)this[e(1208)][i]["fR"]=+i/32,this[e(1208)][i]["fG"]=+i/32,this[e(1208)][i]["fB"]=+i/32,this[e(1208)][i]["fA"]=1;return J[e(593)]}},{key:t(391),value:function(e){var i=t;if(e<0||32<=e)return J["SR_ERR_PARAM"];if(null==this[i(675)][e])return J["SR_ERR_CALL_ORDER"];var n=0,a=0;switch(this[i(652)][e]=0,this[i(1042)][e]=0,this["pRenderParam"][e][i(310)]){case q[i(1282)]:for(a=0;a<1;a+=.01)this[i(1003)](n,a,e);for(a=.9995,n=0;n<1;n+=.02)this["GetFishPTZCeiling"](n,a,e);for(n=.999,a=.9995;0<=a;a-=.01)this[i(1003)](n,a,e);for(a=0,n=.999;0<=n;n-=.02)this["GetFishPTZCeiling"](n,a,e);break;case q[i(474)]:for(a=0;a<1;a+=.01)this[i(576)](n,a,e);for(a=.9995,n=0;n<1;n+=.02)this[i(576)](n,a,e);for(n=.999,a=.9995;0<=a;a-=.01)this["GetFishPTZFloor"](n,a,e);for(a=0,n=.999;0<=n;n-=.02)this[i(576)](n,a,e);break;case q[i(994)]:for(a=0;a<1;a+=.01)this[i(1090)](n,a,e);for(a=.9995,n=0;n<1;n+=.02)this[i(1090)](n,a,e);for(n=.999,a=.9995;0<=a;a-=.01)this["GetFishPTZWALL"](n,a,e);for(a=0,n=.999;0<=n;n-=.02)this["GetFishPTZWALL"](n,a,e)}return J[i(593)]}},{key:t(838),value:function(e){var i=t;if(-1==this["nWndPort"])return J[i(1538)];if(null==this[i(884)][e]||null==this[i(675)][this[i(1398)]])return J[i(1538)];this[i(1405)][e]=0;var n=J[i(593)],a=this[i(1398)];switch(this[i(675)][a][i(310)]){case q[i(1018)]:if(n=this[i(1024)](e),J[i(593)]!=n)return n;break;case q[i(472)]:if(n=this[i(1356)](e),J[i(593)]!=n)return n;break;case q[i(1379)]:if(n=this[i(1091)](e),J["SR_OK"]!=n)return n;break;default:return J[i(1112)]}return this[i(779)](e),J[i(593)]}},{key:"GetRectPoints",value:function(e){var i=t;if(e<0||32<=e)return J[i(650)];if(-1==this[i(1398)])return J["SR_ERR_CALL_ORDER"];if(null==this[i(675)][this[i(1398)]]||null==this[i(812)][e])return J["SR_ERR_CALL_ORDER"];var n=this[i(675)][this[i(1398)]][i(310)],a=J[i(593)],o=[];switch(o["fX"]=0,o["fY"]=0,n){case q["SR_DE_FISH_PANORAMA_WALL"]:if(a=this[i(1238)](o,this[i(812)][e][i(875)],this["pFishParam"][e][i(660)]),J[i(593)]!=a)return a;break;case q[i(472)]:if(a=this[i(1077)](o,this[i(812)][e][i(875)],this[i(812)][e][i(660)]),J[i(593)]!=a)return J[i(1112)]==a&&(this["pRectPoints"][e]=null),a;break;case q[i(1379)]:if(a=this["GetPointFish2PanoCeiling"](o,this[i(812)][e][i(875)],this[i(812)][e]["fPTZY"]),J[i(593)]!=a)return J[i(1112)]==a&&(this["pRectPoints"][e]=null),a;break;case q["SR_DE_FISH_ORIGINAL"]:o["fX"]=this["pFishParam"][e]["fPTZX"],o["fY"]=this[i(812)][e][i(660)];break;default:return J["SR_ERR_NOT_SUPPORT"]}if(null==this[i(1459)][e]){this[i(1459)][e]=[];for(var r=0;r<4;++r)this[i(1459)][e][r]=[],this["pRectPoints"][e][r]["fX"]=0,this["pRectPoints"][e][r]["fY"]=0}return this[i(1459)][e][0]["fX"]=o["fX"]-ve,this[i(1459)][e][0]["fY"]=o["fY"]-ve,this[i(1459)][e][1]["fX"]=o["fX"]+ve,this[i(1459)][e][1]["fY"]=o["fY"]-ve,this[i(1459)][e][2]["fX"]=o["fX"]+ve,this[i(1459)][e][2]["fY"]=o["fY"]+ve,this["pRectPoints"][e][3]["fX"]=o["fX"]-ve,this["pRectPoints"][e][3]["fY"]=o["fY"]+ve,this[i(1343)][e]=4,J[i(593)]}},{key:t(1003),value:function(e,i,n){var a=t,o=[],r=(o["fX"]=0,o["fY"]=0,[]),s=(r["fX"]=0,r["fY"]=0,[]),l=(s["fX"]=0,s["fY"]=0,[]),d=(this["fRX2"]-this[a(915)])/(this[a(402)]-this[a(737)]),c=(this["fRX1"]+this[a(332)])/2*1,u=(this[a(737)]+this[a(402)])/2*d,h=(this["fRX2"]-this[a(915)])/2*1;o["fX"]=i-.5,o["fY"]=.5-e,i=this[a(675)][n][a(1580)],r["fX"]=o["fX"],r["fY"]=o["fY"]*this[a(675)][n][a(1025)]+i*this[a(675)][n]["fSinV"],e=i*this[a(675)][n][a(1025)]-o["fY"]*this[a(675)][n]["fSinV"],i=Math[a(1540)](r["fX"]*r["fX"]+r["fY"]*r["fY"]),o=Math[a(1540)](r["fX"]*r["fX"]+r["fY"]*r["fY"]+e*e),e=Math[a(925)](i/o)/1.5707963*.5,r["fX"]=e*r["fX"]/i,r["fY"]=e*r["fY"]/i,s["fX"]=r["fX"]*this["pRenderParam"][n][a(780)]-r["fY"]*this[a(675)][n][a(1181)],s["fY"]=r["fX"]*this["pRenderParam"][n][a(1181)]+r["fY"]*this["pRenderParam"][n][a(780)],l["fX"]=2*s["fX"]*h+c,l["fY"]=2*-s["fY"]*h+u,o=this[a(1042)][n],this["pBasePTZPoints"][n][o]["fX"]=s["fX"]+.5,this[a(884)][n][o]["fY"]=.5-s["fY"],this["nBasePTZPointNum"][n]=this[a(1042)][n]+1,e=this[a(915)]<=0?0:+this["fRX1"],i=this[a(737)]<=0?0:this["fRY1"]*d,r=1<=this[a(332)]?1-e:+this[a(332)]-e,c=1<=this[a(402)]?d-i:this[a(402)]*d-i;return l["fX"]=(l["fX"]-e)/r,l["fY"]=(l["fY"]-i)/c,l["fX"]<=1&&l["fY"]<=1&&0<=l["fX"]&&0<=l["fY"]&&(h=this[a(652)][n],this[a(1183)][n][h]["fX"]=l["fX"],this["pOriPTZPoints"][n][h]["fY"]=l["fY"],this[a(652)][n]=this[a(652)][n]+1),J[a(593)]}},{key:t(576),value:function(e,i,n){var a=t,o=[],r=(o["fX"]=0,o["fY"]=0,[]),s=(r["fX"]=0,r["fY"]=0,[]),l=(s["fX"]=0,s["fY"]=0,[]),d=(this[a(332)]-this[a(915)])/(this["fRY2"]-this[a(737)]),c=(this[a(915)]+this["fRX2"])/2*1,u=(this["fRY1"]+this[a(402)])/2*d,h=(this[a(332)]-this["fRX1"])/2*1;o["fX"]=e-.5,o["fY"]=i-.5,e=this[a(675)][n][a(1580)],r["fX"]=o["fX"],r["fY"]=o["fY"]*this["pRenderParam"][n][a(1025)]+e*this["pRenderParam"][n]["fSinV"],i=e*this["pRenderParam"][n][a(1025)]-o["fY"]*this[a(675)][n][a(810)],e=Math[a(1540)](r["fX"]*r["fX"]+r["fY"]*r["fY"]),o=Math[a(1540)](r["fX"]*r["fX"]+r["fY"]*r["fY"]+i*i),i=Math["asin"](e/o)/1.5707963*.5,r["fX"]=i*r["fX"]/e,r["fY"]=i*r["fY"]/e,s["fX"]=r["fX"]*this[a(675)][n]["fCosH"]-r["fY"]*this[a(675)][n][a(1181)],s["fY"]=r["fX"]*this[a(675)][n][a(1181)]+r["fY"]*this["pRenderParam"][n][a(780)],l["fX"]=2*s["fX"]*h+c,l["fY"]=2*s["fY"]*h+u,o=this[a(1042)][n],this[a(884)][n][o]["fX"]=s["fX"]+.5,this["pBasePTZPoints"][n][o]["fY"]=s["fY"]+.5,this[a(1042)][n]=this["nBasePTZPointNum"][n]+1,i=this[a(915)]<=0?0:+this[a(915)],e=this[a(737)]<=0?0:this[a(737)]*d,r=1<=this[a(332)]?1-i:+this[a(332)]-i,c=1<=this[a(402)]?d-e:this[a(402)]*d-e;return l["fX"]=(l["fX"]-i)/r,l["fY"]=(l["fY"]-e)/c,l["fX"]<=1&&l["fY"]<=1&&0<=l["fX"]&&0<=l["fY"]&&(h=this[a(652)][n],this[a(1183)][n][h]["fX"]=l["fX"],this["pOriPTZPoints"][n][h]["fY"]=l["fY"],this[a(652)][n]=this[a(652)][n]+1),J[a(593)]}},{key:t(1090),value:function(e,i,n){var a=t,o=[],r=(o["fX"]=0,o["fY"]=0,[]),s=(r["fX"]=0,r["fY"]=0,[]),l=(s["fX"]=0,s["fY"]=0,[]),d=(this[a(332)]-this["fRX1"])/(this[a(402)]-this[a(737)]),c=(this["fRX1"]+this[a(332)])/2*1,u=(this[a(737)]+this["fRY2"])/2*d,h=(this[a(332)]-this["fRX1"])/2*1;o["fX"]=i-.5,o["fY"]=e-.5,i=this[a(675)][n]["fZoom"],r["fX"]=o["fX"],r["fY"]=o["fY"]*this[a(675)][n][a(1025)]+i*this[a(675)][n][a(810)],e=i*this[a(675)][n][a(1025)]-o["fY"]*this[a(675)][n][a(810)],s["fX"]=r["fX"]*this[a(675)][n][a(780)]+e*this[a(675)][n][a(1181)],s["fY"]=r["fY"],i=e*this[a(675)][n][a(780)]-r["fX"]*this[a(675)][n][a(1181)],o=Math["sqrt"](s["fX"]*s["fX"]+s["fY"]*s["fY"]),e=Math["sqrt"](s["fX"]*s["fX"]+s["fY"]*s["fY"]+i*i),r=Math["asin"](o/e)/1.5707963*.5,l["fX"]=r*s["fX"]/o*h*2+c,l["fY"]=r*s["fY"]/o*h*2+u,i=this["nBasePTZPointNum"][n],this[a(884)][n][i]["fX"]=r*s["fX"]/o+.5,this["pBasePTZPoints"][n][i]["fY"]=r*s["fY"]/o+.5,this[a(1042)][n]=this["nBasePTZPointNum"][n]+1,e=this[a(915)]<=0?0:+this[a(915)],c=this["fRY1"]<=0?0:this[a(737)]*d,h=1<=this[a(332)]?1-e:+this["fRX2"]-e,u=1<=this[a(402)]?d-c:this[a(402)]*d-c;return l["fX"]=(l["fX"]-e)/h,l["fY"]=(l["fY"]-c)/u,l["fX"]<=1&&l["fY"]<=1&&0<=l["fX"]&&0<=l["fY"]&&(i=this[a(652)][n],this[a(1183)][n][i]["fX"]=l["fX"],this[a(1183)][n][i]["fY"]=l["fY"],this[a(652)][n]=this[a(652)][n]+1),J[a(593)]}},{key:t(1091),value:function(e){var i=t;if(null==this["pRenderParam"][e]||null==this["pRenderParam"][this[i(1398)]])return J["SR_ERR_CALL_ORDER"];if(null==this[i(884)][e])return J[i(1538)];var n,a=this[i(1042)][e],o=(this[i(332)]-this[i(915)])/(this[i(402)]-this[i(737)]),r=(this["fRX2"]-this[i(915)])/2*1,s=0,l=((1<this["fRX2"]||1<this[i(402)]||this[i(737)]<0||this[i(915)]<0)&&(this[i(915)]<0&&s<(n=-this[i(915)])&&(s=n),1<this[i(332)]&&s<(n=this["fRX2"]-1)&&(s=n),this["fRY1"]<0&&s<(n=-this[i(737)]*o)&&(s=n),1<this[i(402)]&&s<(n=(this[i(402)]-1)*o)&&(s=n)),s/r),d=[],c=(d["fX"]=0,d["fY"]=0,[]);c["fX"]=0;for(var u,h,x,f,p=c["fY"]=0;p<a;++p)c["fX"]=this[i(884)][e][p]["fX"],c["fY"]=this[i(884)][e][p]["fY"],Math[i(1502)](c["fX"]-.5)<ye&&Math[i(1502)](c["fY"]-.5)<ye||((x=[])["fX"]=0,x["fY"]=0,(u=[])["fX"]=0,u["fY"]=0,x["fX"]=c["fX"]-.5,x["fY"]=c["fY"]-.5,u["fX"]=-.5*Math["sin"](this[i(675)][this[i(1398)]]["fAngle"]),u["fY"]=.5*Math[i(1268)](this[i(675)][this["nWndPort"]]["fAngle"]),h=Math[i(1540)](x["fX"]*x["fX"]+x["fY"]*x["fY"]),f=Math[i(1540)](u["fX"]*u["fX"]+u["fY"]*u["fY"]),f=Math[i(1200)]((x["fX"]*u["fX"]+x["fY"]*u["fY"])/(h*f)),0<x["fX"]*u["fY"]-x["fY"]*u["fX"]&&(f=6.2831852-f),d["fX"]=f/6.2831853,d["fY"]=(2*(.5-h)-l)/(.8-l),0<=d["fY"]&&0<=d["fX"]&&d["fY"]<=1&&d["fX"]<=1&&(x=this["nPanoPTZPointNum"][e],this[i(1325)][e][x]["fX"]=d["fX"],this["pPanoPTZPoints"][e][x]["fY"]=d["fY"],this[i(1405)][e]=this[i(1405)][e]+1));return J["SR_OK"]}},{key:"GetPanoPTZFloor",value:function(e){var i=t;if(null==this[i(675)][e]||null==this["pRenderParam"][this["nWndPort"]])return J[i(1538)];if(null==this[i(884)][e])return J[i(1538)];var n,a=this[i(1042)][e],o=(this[i(332)]-this[i(915)])/(this[i(402)]-this[i(737)]),r=(this["fRX2"]-this["fRX1"])/2*1,s=0,l=((1<this[i(332)]||1<this[i(402)]||this[i(737)]<0||this[i(915)]<0)&&(this[i(915)]<0&&s<(n=-this["fRX1"])&&(s=n),1<this["fRX2"]&&s<(n=this["fRX2"]-1)&&(s=n),this[i(737)]<0&&s<(n=-this["fRY1"]*o)&&(s=n),1<this["fRY2"]&&s<(n=(this[i(402)]-1)*o)&&(s=n)),s/r),d=[],c=(d["fX"]=0,d["fY"]=0,[]);c["fX"]=0;for(var u,h,x,f,p=c["fY"]=0;p<a;++p)c["fX"]=this["pBasePTZPoints"][e][p]["fX"],c["fY"]=this[i(884)][e][p]["fY"],Math[i(1502)](c["fX"]-.5)<ye&&Math["abs"](c["fY"]-.5)<ye||((x=[])["fX"]=0,x["fY"]=0,(u=[])["fX"]=0,u["fY"]=0,x["fX"]=c["fX"]-.5,x["fY"]=c["fY"]-.5,u["fX"]=-.5*Math[i(514)](this[i(675)][this[i(1398)]][i(1485)]),u["fY"]=.5*Math[i(1268)](this[i(675)][this[i(1398)]][i(1485)]),h=Math["sqrt"](x["fX"]*x["fX"]+x["fY"]*x["fY"]),f=Math[i(1540)](u["fX"]*u["fX"]+u["fY"]*u["fY"]),f=Math["acos"]((x["fX"]*u["fX"]+x["fY"]*u["fY"])/(h*f)),0<x["fX"]*u["fY"]-x["fY"]*u["fX"]&&(f=6.2831852-f),d["fX"]=1-f/6.2831853,d["fY"]=1-(2*(.5-h)-l)/(.8-l),0<=d["fY"]&&0<=d["fX"]&&d["fY"]<=1&&d["fX"]<=1&&(x=this[i(1405)][e],this[i(1325)][e][x]["fX"]=d["fX"],this[i(1325)][e][x]["fY"]=d["fY"],this[i(1405)][e]=this[i(1405)][e]+1));return J[i(593)]}},{key:t(1024),value:function(e){var i=t;if(null==this[i(675)][e]||null==this[i(675)][this["nWndPort"]])return J[i(1538)];if(null==this[i(884)][e])return J[i(1538)];var n,a=this[i(1042)][e],o=(this[i(332)]-this[i(915)])/(this[i(402)]-this["fRY1"]),r=(this[i(332)]-this["fRX1"])/2*1,s=0,l=1,d=.1,c=.9,u=(this[i(915)]<0&&(n=-this[i(915)],s=n/=2*r),1<this[i(332)]&&(n=this["fRX2"]-1,l=1-(n/=2*r)),this[i(737)]<0&&(n=-this["fRY1"]*o,d=.1<(n/=2*r)?n:.1),1<this["fRY2"]&&(n=(this[i(402)]-1)*o,c=1-.9<(n/=2*r)?1-n:.9),[]),h=(u["fX"]=0,u["fY"]=0,[]);h["fX"]=0;for(var x=h["fY"]=0;x<a;++x){h["fX"]=this[i(884)][e][x]["fX"],h["fY"]=this[i(884)][e][x]["fY"];var f=2*h["fX"]*r,p=2*h["fY"]*r,m=Math["sqrt"](r*r-(p-r)*(p-r));Math[i(1502)](m)<ye||(h["fX"]=r*(f-r)/m+r,h["fY"]=p,u["fX"]=(h["fX"]-2*s*r)/(2*(l-s)*r),u["fY"]=(h["fY"]-2*d*r)/(2*(c-d)*r),0<=u["fY"]&&0<=u["fX"]&&u["fY"]<=1&&u["fX"]<=1&&(f=this[i(1405)][e],this[i(1325)][e][f]["fX"]=u["fX"],this[i(1325)][e][f]["fY"]=u["fY"],this[i(1405)][e]=this[i(1405)][e]+1))}return J["SR_OK"]}},{key:t(1436),value:function(e,i,n){var a=t;if(null==e||null==this[a(675)][this["nWndPort"]])return J[a(1538)];var o=(this[a(332)]-this[a(915)])/(this[a(402)]-this["fRY1"]),r=(this[a(332)]-this[a(915)])/2*1,s=0,l=(o=((1<this["fRX2"]||1<this[a(402)]||this["fRX1"]<0||this["fRY1"]<0)&&(this[a(915)]<0&&s<(l=-this[a(915)])&&(s=l),1<this[a(332)]&&s<(l=this["fRX2"]-1)&&(s=l),this[a(737)]<0&&s<(l=-this[a(737)]*o)&&(s=l),1<this["fRY2"]&&s<(l=(this["fRY2"]-1)*o)&&(s=l)),s/r),[]);return Math[a(1502)](i-.5)<ye&&Math[a(1502)](n-.5)<ye?J["SR_ERR_NOT_SUPPORT"]:(s=[],s["fX"]=0,s["fY"]=0,r=[],r["fX"]=0,s["fX"]=i-.5,s["fY"]=n-.5,r["fX"]=-.5*Math[a(514)](this[a(675)][this[a(1398)]][a(1485)]),r["fY"]=.5*Math[a(1268)](this[a(675)][this[a(1398)]][a(1485)]),i=Math[a(1540)](s["fX"]*s["fX"]+s["fY"]*s["fY"]),n=Math[a(1540)](r["fX"]*r["fX"]+r["fY"]*r["fY"]),n=Math["acos"]((s["fX"]*r["fX"]+s["fY"]*r["fY"])/(i*n)),0<s["fX"]*r["fY"]-s["fY"]*r["fX"]&&(n=6.2831852-n),l["fX"]=n/6.2861853,l["fY"]=(2*(.5-i)-o)/(.8-o),0<=l["fY"]&&0<=l["fX"]&&l["fY"]<=1&&l["fX"]<=1?(e["fX"]=l["fX"],e["fY"]=l["fY"],J[a(593)]):J[a(650)])}},{key:t(690),value:function(e,i,n){var a=t;if(null==this[a(675)][this["nWndPort"]])return J[a(1538)];if(null==e)return J[a(650)];var o=(this[a(332)]-this[a(915)])/(this[a(402)]-this[a(737)]),r=(this[a(332)]-this["fRX1"])/2*1,s=0,l=1,d=0,c=1,u=0,h=(o=((1<this[a(332)]||1<this[a(402)]||this[a(915)]<0||this[a(737)]<0)&&(this[a(915)]<0&&(u<(h=-this[a(915)])&&(u=h),s=h/=2*r),1<this[a(332)]&&(u<(h=this[a(332)]-1)&&(u=h),l=1-(h/=2*r)),this[a(737)]<0&&(u<(h=-this[a(737)]*o)&&(u=h),d=h/=2*r),1<this[a(402)]&&(u<(h=(this[a(402)]-1)*o)&&(u=h),c=1-(h/=2*r))),u/r),[]);u=[];return h["fX"]=1-i,h["fY"]=(.8-o)*(1-n)+o,r=6.2831853*h["fX"]+this[a(675)][this["nWndPort"]][a(1485)],i=.5*(1-h["fY"]),u["fX"]=.5-i*Math["sin"](r),u["fY"]=.5+i*Math[a(1268)](r),u["fX"]=(u["fX"]-s)/(l-s),u["fY"]=(u["fY"]-d)/(c-d),e["fX"]=u["fX"],e["fY"]=u["fY"],J[a(593)]}},{key:t(630),value:function(e,i,n){var a=t;if(null==this["pRenderParam"][this["nWndPort"]])return J[a(1538)];if(null==e)return J[a(650)];var o=(this["fRX2"]-this[a(915)])/(this[a(402)]-this[a(737)]),r=(this["fRX2"]-this[a(915)])/2*1,s=0,l=1,d=.1,c=.9,u=(o=(this[a(915)]<0&&(u=-this[a(915)],s=u/=2*r),1<this["fRX2"]&&(u=this[a(332)]-1,l=1-(u/=2*r)),this[a(737)]<0&&(u=-this[a(737)]*o,d=.1<(u/=2*r)?u:.1),1<this[a(402)]&&(u=(this[a(402)]-1)*o,c=1-.9<(u/=2*r)?1-u:.9),[]),2*i*r),h=2*n*r,x=Math[a(1540)](r*r-(h-r)*(h-r));return Math[a(1502)](x)<ye?J[a(650)]:(n=h,o["fX"]=((i=r*(u-r)/x+r)-2*s*r)/(2*(l-s)*r),o["fY"]=(n-2*d*r)/(2*(c-d)*r),0<=o["fY"]&&0<=o["fX"]&&o["fY"]<=1&&o["fX"]<=1?(e["fX"]=o["fX"],e["fY"]=o["fY"],J[a(593)]):J[a(650)])}},{key:t(1361),value:function(e,i,n){var a=t;if(null==this[a(675)][e])return J[a(1538)];var o=[],r=(o["fHAngleSin"]=0,o[a(988)]=0,o[a(451)]=0,o[a(927)]=0,J["SR_OK"]);if(q["SR_DE_FISH_PTZ_FLOOR"]==this[a(675)][e][a(310)]||q[a(1282)]==this[a(675)][e]["nDisplayEffect"]){if((r=this[a(331)](i,n,o,this[a(675)][e][a(310)]))!=J["SR_OK"])return r}else{if(q[a(994)]!=this[a(675)][e]["nDisplayEffect"])return J[a(1112)];if((r=this["ComputeAngleHorizontal"](i,n,o))!=J[a(593)])return r}return 0==this[a(725)](this[a(915)],this[a(332)],this[a(737)],this[a(402)],o,this[a(675)][e][a(1580)],this[a(675)][e]["nDisplayEffect"])?J[a(650)]:(this["pRenderParam"][e][a(780)]=o[a(988)],this["pRenderParam"][e][a(1181)]=o[a(1211)],this[a(675)][e][a(1025)]=o[a(927)],this[a(675)][e][a(810)]=o["fVAngleSin"],J[a(593)])}},{key:t(817),value:function(e){var i=t,n=0;switch(n){case 0:return n=this[i(841)](e),4==this[i(1252)]&&(this[i(1252)]=0),J["SR_OK"];case 3:return(n=this[i(841)](e))==this[i(1252)]||4==this[i(1252)]?J[i(593)]:J[i(1112)];case 2:case 1:return(n=this["GetPlaceType"](e))==this[i(1252)]||4==n?J[i(593)]:J[i(1112)];default:return J["SR_ERR_NOT_SUPPORT"]}return J["SR_ERR_NOT_SUPPORT"]}},{key:t(841),value:function(e){var i=t;switch(e){case q[i(1282)]:case q["SR_DE_FISH_PANORAMA_CEILING_360"]:case q[i(1212)]:case q["SR_DE_FISH_CYLINDER_CEILING"]:case q[i(414)]:return 3;case q[i(474)]:case q[i(472)]:case q[i(563)]:case q[i(405)]:case q[i(1139)]:return 2;case q["SR_DE_FISH_PTZ_WALL"]:case q[i(1018)]:case q["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:case q["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:return 1;case q["SR_DE_FISH_SEMISPHERE"]:case q[i(677)]:case q[i(1262)]:case q[i(1046)]:case q[i(1262)]:return 4;default:return 0}return 0}},{key:t(1057),value:function(e,i){var n=t;if(e<0||32<=e)return J[n(650)];if(null==i)return J[n(650)];if(null==this[n(675)][e])return J[n(1538)];var a=J[n(593)];switch(i[n(572)]){case $:if((a=this[n(922)](i[n(473)],i[n(919)],i[n(1171)],i[n(825)]))!=J[n(593)])return a;this[n(675)][e][n(818)]=i[n(818)],this[n(368)]=i[n(368)];break;case Q:if(q[n(1379)]!=this[n(675)][e][n(310)]&&q[n(1212)]!=this["pRenderParam"][e][n(310)]&&q[n(472)]!=this[n(675)][e][n(310)]&&q[n(1366)]!=this["pRenderParam"][e][n(310)])return J["SR_ERR_NOT_SUPPORT"];if((a=this[n(955)](e,i[n(1485)]))!=J[n(593)])return a;this[n(812)][e][n(1485)]=i[n(1485)];break;case ee:if(q[n(994)]!=this[n(675)][e][n(310)]&&q["SR_DE_FISH_PTZ_CEILING"]!=this[n(675)][e][n(310)]&&q[n(474)]!=this[n(675)][e][n(310)])return J[n(1112)];if((a=this[n(891)](e,i[n(1580)]))!=J[n(593)])return a;this[n(812)][e][n(1580)]=i["fZoom"];break;case te:if(q[n(994)]!=this[n(675)][e]["nDisplayEffect"]&&q["SR_DE_FISH_PTZ_CEILING"]!=this[n(675)][e][n(310)]&&q["SR_DE_FISH_PTZ_FLOOR"]!=this[n(675)][e][n(310)])return J[n(1112)];if((a=this["UpdatePTZPosition"](e,i[n(875)],i[n(660)],this[n(675)][e][n(1580)],!0))!=J[n(593)])return a;this[n(812)][e]["fPTZX"]=i[n(875)],this[n(812)][e][n(660)]=i[n(660)];break;case K:return J[n(1112)]}return this[n(439)]()}},{key:t(444),value:function(e,i){var n=t;return e<0||32<=e||null==i||null==this[n(812)][e]?J[n(650)]:(i["fRXLeft"]=this[n(915)],i[n(919)]=this[n(332)],i[n(1171)]=this["fRY1"],i[n(825)]=this[n(402)],i[n(368)]=this[n(368)],i[n(818)]=this[n(675)][e][n(818)],i["nFishParamType"]=this[n(812)][e][n(572)],i["fAngle"]=this[n(812)][e][n(1485)],i[n(1580)]=this["pFishParam"][e]["fZoom"],i["fPTZX"]=this["pFishParam"][e][n(875)],i[n(660)]=this[n(812)][e]["fPTZY"],J[n(593)])}},{key:t(796),value:function(e,i){var n=t;return e<0||32<=e||null==i||null==this[n(675)][e]?J[n(650)]:(i[n(473)]=this[n(915)],i[n(919)]=this["fRX2"],i["fRYTop"]=this["fRY1"],i[n(825)]=this[n(402)],i[n(368)]=this[n(368)],i["fCosH"]=this[n(675)][e][n(780)],i[n(1181)]=this[n(675)][e][n(1181)],i[n(1025)]=this[n(675)][e][n(1025)],i[n(810)]=this[n(675)][e][n(810)],i["fAngle"]=this[n(675)][e]["fAngle"],i[n(1580)]=this[n(675)][e][n(1580)],i["nDisplayEffect"]=this["pRenderParam"][e][n(310)],i[n(818)]=this[n(675)][e][n(818)],J[n(593)])}},{key:t(922),value:function(e,i,n,a){var o=t;if(e<=-.5||.4<=e||i<=.6||1.5<=i||n<=-.5||.4<=n||a<=.6||1.5<=a||e+i<=.8||1.2<=e+i||n+a<=.8||1.2<=n+a)return J[o(650)];if(e<0||1<i||n<0||1<a)for(var r=0;r<32;++r)if(q[o(1282)]==this[o(675)][r][o(310)]||q["SR_DE_FISH_PTZ_FLOOR"]==this[o(675)][r]["nDisplayEffect"]||q[o(994)]==this[o(675)][r]["nDisplayEffect"]){var s=[];if(s["fHAngleCos"]=this["pRenderParam"][r]["fCosH"],s["fHAngleSin"]=this[o(675)][r]["fSinH"],s[o(927)]=this[o(675)][r][o(1025)],s[o(451)]=this["pRenderParam"][r][o(810)],0==this[o(725)](e,i,n,a,s,this[o(675)][r][o(1580)],this[o(675)][r]["nDisplayEffect"]))return J[o(650)]}return this[o(915)]=e,this[o(332)]=i,this["fRY1"]=n,this[o(402)]=a,J[o(593)]}},{key:t(955),value:function(e,i){var n=t;return null==this[n(675)][e]?J[n(1538)]:(q[n(472)]==this[n(675)][e][n(310)]||q[n(1366)]==this[n(675)][e][n(310)]?this["pRenderParam"][e][n(1485)]=i:q[n(1379)]!=this["pRenderParam"][e][n(310)]&&q["SR_DE_FISH_PANORAMA_CEILING_180"]!=this[n(675)][e][n(310)]||(this[n(675)][e][n(1485)]=-i),J["SR_OK"])}},{key:"ComputeAngleVertical",value:function(e,i,n,a){var o=t,r=Math[o(1540)]((i-.5)*(i-.5)+(e-.5)*(e-.5));if(.5<r)return J[o(650)];if(r<.001)return n[o(927)]=1,n[o(451)]=0,n[o(988)]=1,n["fHAngleSin"]=0,J[o(593)];if(a==q[o(1282)]){n[o(988)]=(.5-i)/r,n[o(1211)]=(.5-e)/r;var s=r*be;n[o(927)]=Math[o(1268)](s),n[o(451)]=Math[o(514)](s)}else{if(a!=q[o(474)])return J[o(650)];n[o(988)]=(i-.5)/r,n[o(1211)]=(.5-e)/r,s=r*be,n[o(927)]=Math[o(1268)](s),n[o(451)]=Math["sin"](s)}return J[o(593)]}},{key:t(456),value:function(e,i,n){var a,o,r=t;return.25<(i-.5)*(i-.5)+(e-.5)*(e-.5)?J[r(650)]:(i=(i-.5)/.5*be/2,a=Math["cos"](i),i=Math["sin"](i),1<(e-.5)/.5/a||(e-.5)/.5/a<-1?SR_ERR_PARAM:(e=(e-.5)/.5/a*be/2,o=Math[r(1268)](e),e=Math[r(514)](e),n[r(927)]=a,n[r(451)]=i,n[r(988)]=o,n[r(1211)]=e,J[r(593)]))}},{key:t(725),value:function(e,i,n,a,o,r,s){var l=t;return 1!=this[l(656)](e,i,n,a,o[l(988)],o[l(1211)],o[l(927)],o["fVAngleSin"],r,1,.5,s)&&1!=this[l(656)](e,i,n,a,o["fHAngleCos"],o[l(1211)],o["fVAngleCos"],o[l(451)],r,0,.5,s)&&1!=this[l(656)](e,i,n,a,o["fHAngleCos"],o[l(1211)],o[l(927)],o["fVAngleSin"],r,.5,1,s)&&1!=this["IsOutofImage"](e,i,n,a,o[l(988)],o[l(1211)],o[l(927)],o[l(451)],r,.5,0,s)&&1!=this[l(656)](e,i,n,a,o[l(988)],o["fHAngleSin"],o[l(927)],o[l(451)],r,0,0,s)&&1!=this[l(656)](e,i,n,a,o[l(988)],o["fHAngleSin"],o[l(927)],o[l(451)],r,0,1,s)&&1!=this[l(656)](e,i,n,a,o["fHAngleCos"],o[l(1211)],o[l(927)],o[l(451)],r,1,1,s)&&1!=this[l(656)](e,i,n,a,o[l(988)],o[l(1211)],o[l(927)],o["fVAngleSin"],r,1,0,s)}},{key:t(656),value:function(e,i,n,a,o,r,s,l,d,c,u,h){var x,f,p,m=t,_=(i-e)/(a-n),g=(e+i)/2*1;n=(n+a)/2*_,a=(i-e)/2*1;if(h==SR_DE_FISH_PTZ_CEILING){if(v=c-.5,y=(x=.5-u)*s+(f=d)*l,(p=f*s-x*l)<=0)return!0;var v,y,b,S=Math[m(1540)](v*v+y*y),C=(i=Math["sqrt"](v*v+y*y+p*p),e=Math[m(925)](S/i)/1.5707963*.5,(-((v=e*v/S)*r+(y=e*y/S)*o)*a*2+n)/_);if((b=(v*o-y*r)*a*2+g)<0||1<b||C<0||1<C)return!0}if(h==SR_DE_FISH_PTZ_FLOOR){if(v=c-.5,y=(x=u-.5)*s+(f=d)*l,(p=f*s-x*l)<=0)return!0;if(S=Math[m(1540)](v*v+y*y),i=Math[m(1540)](v*v+y*y+p*p),e=Math["asin"](S/i)/1.5707963*.5,C=(((v=e*v/S)*r+(y=e*y/S)*o)*a*2+n)/_,(b=(v*o-y*r)*a*2+g)<0||1<b||C<0||1<C)return!0}if(h==SR_DE_FISH_PTZ_WALL){if(b=(v=c-.5)*o+(p=(f=d)*s-(x=u-.5)*l)*r,C=y=x*s+f*l,(i=p*o-v*r)<=0)return!0;if(S=Math[m(1540)](b*b+C*C),e=Math[m(1540)](b*b+C*C+i*i),h=Math[m(925)](S/e)/1.5707963*.5,C=(h*C/S*a*2+n)/_,(b=h*b/S*a*2+g)<0||1<b||C<0||1<C)return!0}return!1}},{key:t(439),value:function(){var e=t;if(-1==this["nWndPort"])return J[e(1538)];for(var i,n=0;n<32;++n)null==this[e(675)][n]||q[e(1282)]!=this[e(675)][n]["nDisplayEffect"]&&q[e(474)]!=this[e(675)][n][e(310)]&&q[e(994)]!=this["pRenderParam"][n]["nDisplayEffect"]||(i=J[e(593)],this[e(1120)]==ae?(i=this[e(391)](n),J[e(593)]==i&&(i=this[e(838)](n))):this["nPTZDisplayMode"]==ne&&(i=this[e(755)](n)));return J[e(593)]}},{key:t(631),value:function(){var e=t;return this[e(1398)]}},{key:t(1062),value:function(){var e=t;return this[e(1120)]}},{key:"GetPTZColor",value:function(e,i){var n=t;return e<0||32<=e||null==i?J["SR_ERR_PARAM"]:(i["fA"]=this[n(1208)][e]["fA"],i["fR"]=this[n(1208)][e]["fR"],i["fG"]=this["stPTZColor"][e]["fG"],i["fB"]=this[n(1208)][e]["fB"],null!=this[n(739)]&&(Math["abs"](this["pPTZSetColor"][e]["fA"])<ye||Math[n(1502)](this[n(739)][e]["fR"])<ye||Math[n(1502)](this[n(739)][e]["fG"])<ye||Math["abs"](this[n(739)][e]["fB"])<ye)&&(i["fA"]=this["pPTZSetColor"][e]["fA"],i["fR"]=this[n(739)][e]["fR"],i["fG"]=this[n(739)][e]["fG"],i["fB"]=this[n(739)][e]["fB"]),J["SR_OK"])}},{key:t(1486),value:function(e,i){var n=t;if(e<0||32<=e)return J[n(650)];if(null==i)return J[n(650)];if(null==this[n(739)]){this["pPTZSetColor"]=[];for(var a=0;a<32;++a)this[n(739)][a]=[],this[n(739)][a]["fR"]=0,this[n(739)][a]["fG"]=0,this["pPTZSetColor"][a]["fB"]=0,this[n(739)][a]["fA"]=1}return this[n(739)][e]["fR"]=i["fR"],this["pPTZSetColor"][e]["fG"]=i["fG"],this["pPTZSetColor"][e]["fB"]=i["fB"],this["pPTZSetColor"][e]["fA"]=i["fA"],J["SR_OK"]}},{key:"IsPTZSelected",value:function(e){return!(e<0||32<=e)&&this["bPTZSelected"][e]}},{key:t(993),value:function(e,i){var n=t;if(-1==this[n(1398)])return-1;if(null==this[n(675)][this["nWndPort"]])return-1;var a=32,o=[];o["fX"]=e,o["fY"]=i;for(var r=0;r<32;++r)this[n(646)][r]=!1;if(this[n(1120)]==ae){switch(this["pRenderParam"][this["nWndPort"]][n(310)]){case q[n(472)]:this[n(690)](o,e,i);break;case q["SR_DE_FISH_PANORAMA_CEILING_360"]:this[n(1436)](o,e,i);break;case q[n(1018)]:this[n(630)](o,e,i)}for(var s=0;s<32;++s)if(0!=this[n(652)][s]){var l=[],d=(l["fX"]=this[n(1183)][s][0]["fX"],l["fY"]=this[n(1183)][s][0]["fY"],[]);d["fX"]=this[n(1183)][s][0]["fX"],d["fY"]=this[n(1183)][s][0]["fY"];for(var c=1;c<this[n(652)][s];++c)this[n(640)](l,d,this[n(1183)][s][c]);if(o["fX"]<=l["fX"]&&o["fX"]>=d["fX"]&&o["fY"]>=d["fY"]&&o["fY"]<=l["fY"]){a=s;break}}}else{if(this["nPTZDisplayMode"]!=ne)return-1;for(var u=0;u<32;++u)if(o["fX"]<=this[n(1459)][u][2]["fX"]&&o["fX"]>=this[n(1459)][u][0]["fX"]&&o["fY"]>=this["pRectPoints"][u][0]["fY"]&&o["fY"]<=this[n(1459)][u][2]["fY"]){a=u;break}}return a<32?(this["bPTZSelected"][a]=!0,a):-1}},{key:t(430),value:function(e){var i=t;if(e<0||32<=e)return J["SR_ERR_PARAM"];for(var n=0;n<32;++n)this[i(646)][n]=!1;if(this["nPTZDisplayMode"]==ae){if(0==this[i(652)][e])return J[i(650)];this["bPTZSelected"][e]=!0}else{if(0==this[i(1343)][e])return J["SR_ERR_PARAM"];this["bPTZSelected"][e]=!0}return J["SR_OK"]}},{key:t(640),value:function(e,i,n){var a=t;return n["fX"]<i["fX"]&&(i["fX"]=n["fX"]),n["fY"]<i["fY"]&&(i["fY"]=n["fY"]),n["fX"]>e["fX"]&&(e["fX"]=n["fX"]),n["fY"]>e["fY"]&&(e["fY"]=n["fY"]),J[a(593)]}},{key:t(802),value:function(e,i,n){var a=t;return e<0||32<=e?J[a(650)]:null==this[a(675)][this[a(1398)]]?J[a(1538)]:(ae==n?null!=this[a(1183)][e]&&0!=this["nOriPTZPointNum"][e]&&(i["pstPoints"]=this[a(1183)][e],i["nPointNum"]=this[a(652)][e]):ne==n&&null!=this[a(1459)][e]&&(i[a(319)]=this[a(1459)][e],i[a(665)]=4),J[a(593)])}},{key:t(728),value:function(e){var i=t;return this[i(1120)]=e,this[i(439)]()}},{key:t(1154),value:function(e){var i=t;return e<0||32<=e?J[i(650)]:null==this[i(675)]?J[i(1538)]:this["pRenderParam"][e][i(310)]}},{key:t(1504),value:function(e,i,n){var a=t;if(e<0||32<=e)return J["SR_ERR_PARAM"];if(null==this[a(1325)][e]||0==this[a(1405)][e])return J[a(650)];var o=this[a(1138)][e][n];if(i["nPointNum"]=this[a(1138)][e][n+1]-this[a(1138)][e][n],i["nPointNum"]<0)return J[a(1538)];i[a(319)]=[];for(var r=0;r<i[a(665)];++r){var s=[];s["fX"]=this[a(1325)][e][o+r]["fX"],s["fY"]=this[a(1325)][e][o+r]["fY"],i[a(319)][a(962)](s)}return J[a(593)]}},{key:"GetPTZFragmentNum",value:function(e){var i=t;return e<0||32<=e?J[i(650)]:0==this[i(733)][e]?J[i(1538)]:this[i(733)][e]}},{key:t(779),value:function(e){var i=t;if(e<0||32<=e)return J["SR_ERR_PARAM"];if(null==this[i(1325)][e]||0==this[i(1405)][e])return J["SR_ERR_CALL_ORDER"];this[i(1138)][e][0]=0,this[i(733)][e]=1;for(var n=0,a=0;a<this[i(1405)][e]-1;a++).5<Math[i(1502)](this[i(1325)][e][a+1]["fX"]-this[i(1325)][e][a]["fX"])&&(n=this[i(733)][e],this["nPTZFragmentNode"][e][n]=a+1,this["nPTZFragmentNum"][e]=this[i(733)][e]+1);var o=this[i(1405)][e];return Math[i(1502)](this["pPanoPTZPoints"][e][0]["fX"]-this[i(1325)][e][o-1]["fX"])<.5&&(this[i(1325)][e][o]["fX"]=this[i(1325)][e][0]["fX"],this[i(1325)][e][o]["fY"]=this[i(1325)][e][0]["fY"],this["nPanoPTZPointNum"][e]=this[i(1405)][e]+1),n=this[i(733)][e],this[i(1138)][e][n]=this["nPanoPTZPointNum"][e],J[i(593)]}},{key:t(433),value:function(e){var i=t;return this[i(1105)][e]}},{key:t(886),value:function(e,i,n){var a=t;if(null==this["pRenderParam"][this[a(1398)]])return J[a(1538)];if(null==e)return J["SR_ERR_PARAM"];var o=(this["fRX2"]-this[a(915)])/(this[a(402)]-this[a(737)]),r=(this["fRX2"]-this["fRX1"])/2*1,s=0,l=(o=((1<this[a(332)]||1<this["fRY2"]||this["fRX1"]<0||this[a(737)]<0)&&(this[a(915)]<0&&s<(l=-this[a(915)])&&(s=l),1<this[a(332)]&&s<(l=this[a(332)]-1)&&(s=l),this[a(737)]<0&&s<(l=-this[a(737)]*o)&&(s=l),1<this[a(402)]&&s<(l=(this["fRY2"]-1)*o)&&(s=l)),s/r),[]);return l["fX"]=0,l["fY"]=0,Math[a(1502)](i-.5)<ye&&Math[a(1502)](n-.5)<ye?J[a(1112)]:(s=[],r=[],s["fX"]=i-.5,s["fY"]=n-.5,r["fX"]=-.5*Math[a(514)](this[a(675)][this[a(1398)]][a(1485)]),r["fY"]=.5*Math[a(1268)](this[a(675)][this[a(1398)]]["fAngle"]),i=Math["sqrt"](s["fX"]*s["fX"]+s["fY"]*s["fY"]),n=Math[a(1540)](r["fX"]*r["fX"]+r["fY"]*r["fY"]),n=Math[a(1200)]((s["fX"]*r["fX"]+s["fY"]*r["fY"])/(i*n)),0<s["fX"]*r["fY"]-s["fY"]*r["fX"]&&(n=6.2831852-n),l["fX"]=n/6.2831853,l["fY"]=(2*(.5-i)-o)/(.8-o),0<=l["fY"]&&0<=l["fX"]&&l["fY"]<=1&&l["fX"]<=1?(e["fX"]=l["fX"],e["fY"]=l["fY"],J[a(593)]):J[a(650)])}},{key:t(1077),value:function(e,i,n){var a=t;if(null==this[a(675)][this[a(1398)]])return J[a(1538)];if(null==e)return J[a(650)];var o=(this["fRX2"]-this["fRX1"])/(this[a(402)]-this[a(737)]),r=(this[a(332)]-this["fRX1"])/2*1,s=0,l=(o=((1<this[a(332)]||1<this["fRY2"]||this["fRX1"]<0||this[a(737)]<0)&&(this["fRX1"]<0&&s<(l=-this[a(915)])&&(s=l),1<this[a(332)]&&s<(l=this[a(332)]-1)&&(s=l),this[a(737)]<0&&s<(l=-this[a(737)]*o)&&(s=l),1<this[a(402)]&&s<(l=(this["fRY2"]-1)*o)&&(s=l)),s/r),[]);return l["fX"]=0,l["fY"]=0,Math["abs"](i-.5)<ye&&Math[a(1502)](n-.5)<ye?J[a(1112)]:(s=[],r=[],s["fX"]=i-.5,s["fY"]=n-.5,r["fX"]=-.5*Math[a(514)](this["pRenderParam"][this[a(1398)]][a(1485)]),r["fY"]=.5*Math[a(1268)](this["pRenderParam"][this[a(1398)]][a(1485)]),i=Math[a(1540)](s["fX"]*s["fX"]+s["fY"]*s["fY"]),n=Math[a(1540)](r["fX"]*r["fX"]+r["fY"]*r["fY"]),n=Math[a(1200)]((s["fX"]*r["fX"]+s["fY"]*r["fY"])/(i*n)),0<s["fX"]*r["fY"]-s["fY"]*r["fX"]&&(n=6.2831852-n),l["fX"]=1-n/6.2831853,l["fY"]=1-(2*(.5-i)-o)/(.8-o),0<=l["fY"]&&0<=l["fX"]&&l["fY"]<=1&&l["fX"]<=1?(e["fX"]=l["fX"],e["fY"]=l["fY"],J[a(593)]):J[a(650)])}},{key:"GetPointFish2PanoWall",value:function(e,i,n){var a=t;if(null==this[a(675)][this[a(1398)]])return J[a(1538)];if(null==e)return J[a(650)];var o=(this[a(332)]-this["fRX1"])/(this["fRY2"]-this[a(737)]),r=(this[a(332)]-this[a(915)])/2*1,s=0,l=1,d=.1,c=.9,u=(o=(this[a(915)]<0&&(u=-this[a(915)],s=u/=2*r),1<this["fRX2"]&&(u=this["fRX2"]-1,l=1-(u/=2*r)),this["fRY1"]<0&&(u=-this["fRY1"]*o,d=.1<(u/=2*r)?u:.1),1<this[a(402)]&&(u=(this[a(402)]-1)*o,c=1-.9<(u/=2*r)?1-u:.9),[]),o["fX"]=0,o["fY"]=0,2*i*r),h=2*n*r,x=Math["sqrt"](r*r-(h-r)*(h-r));return Math[a(1502)](x)<ye?SR_ERR_PARAM:(n=h,o["fX"]=((i=r*(u-r)/x+r)-2*s*r)/(2*(l-s)*r),o["fY"]=(n-2*d*r)/(2*(c-d)*r),0<=o["fY"]&&0<=o["fX"]&&o["fY"]<=1&&o["fX"]<=1?(e["fX"]=o["fX"],e["fY"]=o["fY"],J[a(593)]):J["SR_ERR_PARAM"])}}]),a}(),je=function(){var t=e;function i(){var e=n;l(this,i),this[e(1264)]=e(1258),this[e(1128)]=null,this["mainCanvasID"]="",this[e(1233)]=0,this[e(359)]=q[e(1347)],this[e(752)]=0,this[e(723)]=0,this[e(1346)]=0,this[e(429)],this[e(867)]()}return c(i,[{key:t(867),value:function(){var e=t;this[e(902)]=[];for(var i=0;i<32;i++)this[e(902)][i]={},this["stFishEyeManager"][i][e(1512)]=null,this[e(902)][i][e(1404)]=0,this[e(902)][i][e(352)]="",this["stFishEyeManager"][i][e(960)]=0,this[e(902)][i]["bInit"]=0,this[e(902)][i][e(1305)]=0,this[e(902)][i][e(985)]=I,this[e(902)][i][e(1490)]=D,this[e(902)][i][e(776)]=q["SR_DE_FISH_ORIGINAL"];this["stFishParam"]=[];for(var n=0;n<32;n++)this["stFishParam"][n]={},this[e(1324)][n][e(1278)]=0,this[e(1324)][n]["stPTZParam"]={},this[e(1324)][n]["stPTZParam"]["fPTZPositionX"]=0,this["stFishParam"][n][e(1458)][e(1357)]=0,this["stFishParam"][n][e(612)]={},this["stFishParam"][n]["stCycleParam"][e(313)]=0,this[e(1324)][n]["stCycleParam"][e(586)]=0,this[e(1324)][n][e(612)][e(554)]=0,this[e(1324)][n][e(612)][e(550)]=0,this["stFishParam"][n][e(1580)]=0,this[e(1324)][n][e(545)]=0,this[e(1324)][n]["stPTZColor"]={},this["stFishParam"][n][e(1208)]["nR"]=0,this[e(1324)][n]["stPTZColor"]["nG"]=0,this[e(1324)][n][e(1208)]["nB"]=0,this[e(1324)][n]["stPTZColor"][e(991)]=0,this[e(1324)][n][e(750)]={},this[e(1324)][n][e(750)][e(322)]=0,this[e(1324)][n][e(750)][e(1209)]=0,this[e(1324)][n][e(750)][e(1575)]=0,this[e(1324)][n][e(750)][e(518)]=0,this[e(1324)][n][e(834)]=0}},{key:t(814),value:function(e){return 1}},{key:t(1480),value:function(e,i){var n=t;return this[n(1264)]=i,this[n(831)]=e,null==this[n(429)]&&(this["pFishParamManager"]=new Fe),"2d"===this[n(1264)]||"2D"===this[n(1264)]?(this[n(1128)]=new Le,console[n(1590)]("2d render")):(this[n(1128)]=new Be,this[n(1128)][n(1299)](this[n(429)]),console["log"](n(873))),this["oVideoHandle"]["SR_Init"](e),this[n(1233)]=this[n(1128)][n(856)](this[n(359)]),null==this[n(902)][0]["pRender"]&&this["mainFECCorrect"]!==q[n(1347)]&&(this[n(902)][0][n(1512)]=this["oVideoHandle"],this["stFishEyeManager"][0][n(1404)]=0,this[n(902)][0][n(352)]=this[n(831)],this[n(902)][0][n(960)]=1,this[n(902)][0][n(1033)]=1,this[n(902)][0]["nValidSubPort"]=0),-1==this["mainSubPort"]?(console[n(786)](n(1529),n(692),this[n(1233)]),0):1}},{key:t(785),value:function(){var e=t;null!=this[e(1128)]&&(this[e(1128)][e(943)](this[e(1233)]),this["oVideoHandle"]["SR_Destroy"](),this[e(1128)]=null);for(var i=0;i<32;i++)this[e(902)][i][e(1512)]=null;return this[e(902)][e(387)](0,this[e(902)][e(525)]),this[e(1324)][e(387)](0,this["stFishParam"][e(525)]),this[e(429)][e(505)](),this[e(429)]=null,1}},{key:t(700),value:function(e){var i=t;return null!=this[i(1128)]?this[i(1128)][i(658)](e):0}},{key:t(399),value:function(e,i,n,a){var o=t;return null!=this[o(1128)]?this[o(1128)]["SR_SetDisplayRect"](e,i,n,a):0}},{key:t(343),value:function(e,i){var n=t;return null!=this[n(1128)]?this[n(1128)][n(422)](e,i):0}},{key:"GetCanvasSize",value:function(){var e=t;return null!=this["oVideoHandle"]?this[e(1128)][e(918)]():0}},{key:"SetAntialias",value:function(e){var i=t;return null!=this[i(1128)]?this[i(1128)][i(552)](e):0}},{key:t(1206),value:function(e,i,n){var a=t;if(n!=D&&n!=A&&n!=B&&n!=F)return console["log"]("%c 20230516 hardDecoder not support correctType:%d",a(657),n),16;var o=this[a(1457)](i,n);return 0==e?(null!=this[a(1128)]&&(this["oVideoHandle"][a(943)](this[a(1233)]),this[a(1233)]=this[a(1128)][a(856)](o),null==this[a(902)][e][a(1512)]&&(this["stFishEyeManager"][e]["pRender"]=this[a(1128)],this["stFishEyeManager"][e][a(1404)]=0,this[a(902)][e][a(352)]=this[a(831)],this[a(902)][e][a(960)]=1,this[a(902)][e][a(1033)]=1,this[a(902)][e]["nValidSubPort"]=this[a(1233)])),this[a(902)][e][a(985)]=i,this[a(902)][e][a(1490)]=n,this[a(902)][e][a(776)]=o,this["mainFECCorrect"]=o,F<=this[a(902)][e][a(1490)]&&(i=this[a(902)][e][a(1512)]["SR_SetRenderState"](ue,0),J["SR_OK"]!=i&&console["log"](a(487),i))):null!=this[a(902)][e][a(1512)]?(this[a(902)][e][a(1512)]["SR_DelSubPort"](this[a(902)][e][a(1305)]),this[a(902)][e][a(1305)]=this[a(902)][e]["pRender"][a(856)](o)):console[a(786)](a(492),a(657)),1}},{key:"FEC_GetPort",value:function(e,i){var n=t;if((R==e||I==e)&&L==i)return this[n(752)]=C,-1;if(k==e&&j==i)return this[n(752)]=C,-1;if(k==e&&z==i)return this[n(752)]=C,-1;if((R==e||I==e)&&N==i)return this[n(752)]=C,-1;if((R==e||I==e)&&U==i)return this[n(752)]=C,-1;if(k!=e&&R!=e&&I!=e)return this["FECErrorCode"]=MP_E_SUPPORT,-1;if(0!=i&&i!=M&&i!=A&&i!=B&&i!=L&&i!=F&&i!=j&&i!=z&&i!=O&&i!=N&&i!=U)return this[n(752)]=MP_E_SUPPORT,-1;for(var a=0,o=1;o<32;o++){if(this[n(902)][o][n(960)]&&this[n(902)][o][n(985)]!=e)return this["FECErrorCode"]=1303,-1;if(this[n(902)][o][n(960)]&&this["stFishEyeManager"][o][n(1490)]!=M&&this[n(902)][o][n(1490)]!=F&&this[n(902)][o][n(1490)]!=j&&this[n(902)][o][n(1490)]!=z&&this[n(902)][o][n(1490)]!=O&&this[n(902)][o]["emCorrectType"]!=N&&this[n(902)][o][n(1490)]!=U&&i!=M&&i!=F&&i!=j&&i!=z&&i!=O&&i!=N&&i!=U)return this[n(752)]=1304,-1;if(this[n(902)][o][n(960)]&&(this["stFishEyeManager"][o][n(1490)]==M&&i==A||this[n(902)][o]["emCorrectType"]==A&&i==M))return this[n(752)]=1304,-1;if(U==i&&(this[n(1324)][0][n(612)]["fRadiusLeft"]<=-.5||0<this[n(1324)][0]["stCycleParam"][n(313)]||this["stFishParam"][0][n(612)][n(586)]<1||1.5<=this[n(1324)][0][n(612)][n(586)]||this["stFishParam"][0][n(612)]["fRadiusTop"]<=-.5||.4<=this["stFishParam"][0][n(612)][n(554)]||this["stFishParam"][0][n(612)]["fRadiusBottom"]<=.6||1.5<=this["stFishParam"][0][n(612)][n(550)]||this[n(1324)][0][n(612)][n(313)]+this[n(1324)][0][n(612)][n(586)]<=.8||1.2<=this["stFishParam"][0][n(612)][n(313)]+this["stFishParam"][0][n(612)][n(586)]||this[n(1324)][0][n(612)][n(554)]+this[n(1324)][0][n(612)][n(550)]<=.8||1.2<=this[n(1324)][0]["stCycleParam"]["fRadiusTop"]+this["stFishParam"][0]["stCycleParam"][n(550)]))return this[n(752)]=T,-1}for(o=1;o<32;o++)if(0==this["stFishEyeManager"][o][n(1404)]&&0==this[n(902)][o]["bUsed"]){this["stFishEyeManager"][o][n(1404)]=o,this[n(902)][a][n(1305)]=-1,this[n(902)][o][n(960)]=1,this[n(902)][o][n(985)]=e,this[n(902)][o][n(1490)]=i,a=o;break}if(32==o)return this[n(752)]=1284,-1;var r=this[n(1457)](this[n(902)][a][n(985)],this[n(902)][a][n(1490)]);return q[n(677)]!=r?(0==this[n(902)][a][n(761)]&&(this["stFishEyeManager"][a][n(776)]=r,this[n(902)][a][n(761)]=0,this["stFishParam"][a]["fZoom"]=.005,this[n(1324)][a][n(1458)][n(989)]=.5,this[n(1324)][a][n(1458)][n(1357)]=.5,this[n(1324)][a]["fWideScanOffset"]=0),this["FECErrorCode"]=0,this["subPortNum"]++,o):a<32&&0==this[n(902)][a][n(761)]?(this[n(902)][a]["emEffect"]=r,this[n(902)][a][n(761)]=0,this[n(1324)][a][n(1580)]=0,this[n(1324)][a][n(1458)][n(989)]=0,this[n(1324)][a][n(1458)][n(1357)]=0,this[n(1324)][a][n(545)]=0,this[n(752)]=0,this[n(723)]++,o):(this[n(902)][o][n(1512)]=null,this[n(902)][o][n(1404)]=0,this[n(902)][o][n(352)]="",this[n(902)][o][n(960)]=0,this[n(902)][o]["bInit"]=0,this["stFishEyeManager"][o][n(1305)]=0,this[n(902)][o][n(985)]=I,this[n(902)][o]["emCorrectType"]=D,this[n(902)][o]["emEffect"]=q[n(677)],this["FECErrorCode"]=C,-1)}},{key:t(1015),value:function(e){var i=t;return null!==this["stFishEyeManager"][e][i(1512)]&&(this[i(752)]=1301,returnmpCtrlDefine[i(1275)]),null==this[i(902)][e][i(1512)]&&(this[i(902)][e][i(1512)]=new Be,this[i(902)][e][i(1512)]["SR_SetFishParamManager"](this[i(429)])),1}},{key:t(1145),value:function(e,i){var n=t;if(null==this[n(902)][e][n(1512)])return this[n(752)]=b;if(e<1||31<e)return this[n(752)]=1298;if(0==this[n(902)][e][n(960)])return this[n(752)]=S;if(null==i)return this["FECErrorCode"]=1305;if(0==this[n(902)][e][n(1404)]||0==this[n(902)][e][n(960)])return this[n(752)]=S;if(0!=this[n(902)][e][n(761)]&&null!=this[n(902)][e][n(352)])return i!=this[n(902)][e][n(352)]?this[n(752)]=1286:1;SR_DE_FISH_ORIGINAL;var a=this[n(1457)](this[n(902)][e][n(985)],this[n(902)][e][n(1490)]),o=this[n(902)][e][n(1512)][n(1483)](i);return this[n(902)][e]["nValidSubPort"]=this[n(902)][e][n(1512)]["SR_AddSubPort"](a),J[n(593)]!=o||J[n(593)]!=retSASP?(this[n(902)][e]["bInited"]=0,this["stFishEyeManager"][e]["sCanvasID"]=null,this[n(752)]=S):(this[n(902)][e][n(761)]=1,this["stFishEyeManager"][e][n(352)]=i,F<=this["stFishEyeManager"][e]["emCorrectType"]&&(a=this[n(902)][e][n(1512)][n(924)](ue,0),J[n(593)]!=a&&console[n(1590)](n(487),a)),0<this[n(1346)]&&(this[n(902)][e][n(1512)][n(328)](this[n(1346)]),this["FECShowMode"]=0),1)}},{key:t(1582),value:function(e,i,n){var a=t;return 0!=e&&(1==this["stFishEyeManager"][e][a(761)]&&(J[a(593)]==this[a(902)][e][a(1512)]["SR_DelSubPort"](this[a(902)][e][a(1305)])&&(this[a(902)][e]["bInited"]=0,this[a(902)][e][a(1305)]=-1),this[a(902)][e][a(1512)][a(1577)]()),this["stFishEyeManager"][e][a(1512)]=null,this[a(902)][e]["nSubPort"]=0,this[a(902)][e][a(352)]="",this["stFishEyeManager"][e][a(960)]=0,this[a(902)][e][a(1033)]=0,this[a(902)][e][a(1305)]=0,this[a(902)][e][a(985)]=I,this[a(902)][e][a(1490)]=D,this["stFishEyeManager"][e]["emEffect"]=q["SR_DE_FISH_ORIGINAL"]),1}},{key:"FEC_DelPort",value:function(e){var i=t;if(0!=e){if(e<1||31<e)return this[i(752)]=1298;if(0==this["stFishEyeManager"][e][i(960)])return this["FECErrorCode"]=S;this["stFishParam"][e][i(612)][i(313)]=0,this[i(1324)][e][i(612)][i(586)]=1,this[i(1324)][e][i(612)]["fRadiusTop"]=0,this[i(1324)][e][i(612)]["fRadiusBottom"]=1,this[i(752)]=0,(this[i(1346)]=0)<this[i(723)]&&this["subPortNum"]--}return 1}},{key:t(671),value:function(e,i){var n=t;if(this["FECErrorCode"]=0,null==this[n(902)][e][n(1512)])return this["FECErrorCode"]=b;if(0==this["stFishEyeManager"][e][n(960)])return this[n(752)]=S;if(this[n(902)][e]["emCorrectType"]>=F&&this["stFishEyeManager"][e]["emCorrectType"]<=U&&30&i["upDateType"])return this[n(752)]=P;if(H&i[n(457)]){if(null==i[n(612)])return T;for(var a=1;a<32;a++){if(this[n(902)][a]["bUsed"]&&this["stFishEyeManager"][a][n(1404)]&&N==this[n(902)][a][n(1490)]&&(i[n(612)][n(313)]<=-.5||.4<=i[n(612)][n(313)]||i[n(612)][n(586)]<=.6||1.5<=i[n(612)][n(586)]||i[n(612)][n(554)]<=-.5||0<i["stCycleParam"][n(554)]||i[n(612)][n(550)]<1||1.5<=i[n(612)][n(550)]||i[n(612)][n(313)]+i[n(612)][n(586)]<=.8||1.2<=i[n(612)][n(313)]+i[n(612)][n(586)]||i[n(612)][n(554)]+i[n(612)][n(550)]<=.8||1.2<=i["stCycleParam"]["fRadiusTop"]+i[n(612)]["fRadiusBottom"]))return this[n(752)]=T;if(this[n(902)][a][n(960)]&&this[n(902)][a][n(1404)]&&U==this["stFishEyeManager"][a][n(1490)]&&(i[n(612)][n(313)]<=-.5||0<i["stCycleParam"][n(313)]||i[n(612)]["fRadiusRight"]<1||1.5<=i[n(612)][n(586)]||i[n(612)]["fRadiusTop"]<=-.5||.4<=i[n(612)][n(554)]||i[n(612)][n(550)]<=.6||1.5<=i[n(612)][n(550)]||i["stCycleParam"]["fRadiusLeft"]+i[n(612)][n(586)]<=.8||1.2<=i["stCycleParam"]["fRadiusLeft"]+i[n(612)][n(586)]||i[n(612)]["fRadiusTop"]+i[n(612)][n(550)]<=.8||1.2<=i["stCycleParam"]["fRadiusTop"]+i["stCycleParam"][n(550)]))return this[n(752)]=T}}if(0==this["stFishEyeManager"][e][n(761)]){if(G&i[n(457)]){if(A!=this[n(902)][e][n(1490)]&&B!=this[n(902)][e][n(1490)]||k==this[n(902)][e][n(985)])return this["FECErrorCode"]=P;for(var o=1;o<32;o++)if(this["stFishEyeManager"][o][n(1404)]&&this[n(902)][o][n(960)]&&this[n(902)][o][n(1490)]==M)return this[n(752)]=w;this[n(1324)][e][n(545)]=i[n(1303)]}if(W&i[n(457)]){if(null==i[n(1208)])return T;if(255<i[n(1208)]["nR"]||255<i["stPTZColor"]["nG"]||255<i["stPTZColor"]["nB"]||255<i[n(1208)][n(991)])return this[n(752)]=P;this[n(1324)][e][n(1208)]["nR"]=i[n(1208)]["nR"],this[n(1324)][e][n(1208)]["nG"]=i[n(1208)]["nG"],this["stFishParam"][e][n(1208)]["nB"]=i[n(1208)]["nB"],this[n(1324)][e]["stPTZColor"]["nAlpha"]=i["stPTZColor"][n(991)]}if(Y&i[n(457)]){if(M!=this[n(902)][e][n(1490)])return this[n(752)]=P;this["stFishParam"][e][n(1458)]["fPTZPositionX"]=i["fPTZParam"][n(989)],this[n(1324)][e][n(1458)][n(1357)]=i[n(626)][n(1357)]}if(V&i["upDateType"]){if(M!=this["stFishEyeManager"][e][n(1490)])return this[n(752)]=P;this[n(1324)][e]["fZoom"]=i[n(431)]}if(Z&i["upDateType"]){if(null==this["stFishParam"][n(750)])return P;if(M!=this[n(902)][e][n(1490)])return this[n(752)]=P;this["stFishParam"][n(750)][n(322)]=i[n(750)]["fTop"],this["stFishParam"][n(750)][n(1209)]=i["stPTZSelect"][n(1209)],this["stFishParam"][n(750)][n(1575)]=i["stPTZSelect"][n(1575)],this["stFishParam"][n(750)][n(518)]=i["stPTZSelect"][n(518)]}if(H&i[n(457)]){if(null==i[n(612)])return T;if(0==this[n(1094)](i[n(612)]))return this[n(752)]=T;this[n(1324)][0][n(612)][n(313)]=i[n(612)][n(313)],this[n(1324)][0][n(612)][n(586)]=i[n(612)]["fRadiusRight"],this["stFishParam"][0]["stCycleParam"][n(554)]=i[n(612)]["fRadiusTop"],this["stFishParam"][0][n(612)][n(550)]=i[n(612)][n(550)]}return 1}if(G&i["upDateType"]){if(A!=this[n(902)][e]["emCorrectType"]&&B!=this[n(902)][e][n(1490)]||k==this[n(902)][e][n(985)])return this[n(752)]=P;for(var r=1;r<32;r++)if(this[n(902)][r][n(1404)]&&this["stFishEyeManager"][r][n(960)]&&this[n(902)][r][n(1490)]==M)return this[n(752)]=w;var s={};if(s[n(572)]=Q,s["bBlack"]=0,s[n(1485)]=i[n(1303)],J["SR_OK"]!=this[n(902)][e][n(1512)][n(412)](s))return this["FECErrorCode"]=w;this[n(1324)][e][n(545)]=i[n(1303)]}if(W&i[n(457)]){if(null==i[n(1208)])return P;if(255<i[n(1208)]["nR"]||255<i[n(1208)]["nG"]||255<i[n(1208)]["nB"]||255<i[n(1208)][n(991)])return this[n(752)]=P;s={},s["fR"]=float(i["stPTZColor"]["nR"]/255),s["fG"]=float(i[n(1208)]["nG"]/255),s["fB"]=float(i[n(1208)]["nB"]/255),s["fA"]=float(i[n(1208)][n(991)]/255),this[n(1324)][e][n(1208)]["nR"]=i["stPTZColor"]["nR"],this["stFishParam"][e]["stPTZColor"]["nG"]=i["stPTZColor"]["nG"],this[n(1324)][e][n(1208)]["nB"]=i[n(1208)]["nB"],this[n(1324)][e]["stPTZColor"][n(991)]=i["stPTZColor"][n(991)]}if(Y&i[n(457)]){if(M!=this[n(902)][e]["emCorrectType"])return this["FECErrorCode"]=P;if(s={},s[n(572)]=te,s[n(368)]=0,s["fPTZX"]=i[n(626)][n(989)],s[n(660)]=i[n(626)][n(1357)],J[n(593)]!=this["stFishEyeManager"][e]["pRender"][n(412)](s))return this["FECErrorCode"]=w;this[n(1324)][e][n(1458)]["fPTZPositionX"]=i["fPTZParam"]["fPTZPositionX"],this[n(1324)][e][n(1458)][n(1357)]=i[n(626)][n(1357)]}if(V&i[n(457)]){if(M!=this["stFishEyeManager"][e]["emCorrectType"])return this[n(752)]=P;if(s={},s[n(572)]=ee,s[n(368)]=0,s[n(1580)]=i[n(431)],J["SR_OK"]!=this[n(902)][e]["pRender"][n(412)](s))return this["FECErrorCode"]=w;this[n(1324)][e][n(1580)]=i[n(431)]}if(H&i["upDateType"]){if(0==this[n(1094)](i[n(612)]))return this["FECErrorCode"]=T;if(s={},s["nFishParamType"]=$,s[n(368)]=1,s[n(473)]=i[n(612)][n(313)],s[n(919)]=i[n(612)][n(586)],s[n(1171)]=i[n(612)][n(554)],s["fRYBottom"]=i["stCycleParam"][n(550)],J[n(593)]!=this[n(902)][e][n(1512)]["SR_SetFishParam"](this[n(902)][e]["nValidSubPort"],s))return this["FECErrorCode"]=T;this[n(1324)][0][n(612)]["fRadiusLeft"]=i[n(612)][n(313)],this[n(1324)][0][n(612)][n(586)]=i[n(612)][n(586)],this[n(1324)][0][n(612)]["fRadiusTop"]=i["stCycleParam"][n(554)],this[n(1324)][0][n(612)][n(550)]=i["stCycleParam"][n(550)]}return Z&i[n(457)]&&M==this[n(902)][e][n(1490)]&&J[n(593)]!=this[n(902)][e][n(1512)][n(412)](this[n(902)][e][n(750)])?this["FECErrorCode"]=1299:1}},{key:"IsValidRadiusParam",value:function(e){var i=t;return e["fRadiusBottom"]<=e[i(554)]||e[i(586)]<=e[i(313)]?0:1}},{key:"FEC_SetViewParam",value:function(e,i,n){var a=t;return i<oe||se<i?this[a(752)]=E:(this[a(752)]=0,null==this["stFishEyeManager"][e]["pRender"]?this[a(752)]=b:0==this[a(902)][e][a(761)]?this[a(752)]=S:F<=this[a(902)][e][a(1490)]?J[a(593)]!=this[a(902)][e][a(1512)][a(1294)](i,n)?this["FECErrorCode"]=E:1:this[a(752)]=P)}},{key:t(1578),value:function(e,i){var n=t;return!(i<1||3<i||0==this[n(902)][e][n(761)])&&F<=this["stFishEyeManager"][e][n(1490)]?this[n(902)][e][n(1512)][n(418)](i):-1}},{key:t(1345),value:function(e,i,n,a,o,r,s){var l=t;return null==this[l(902)][e][l(1512)]?this[l(752)]=b:0!=i||0!=n?E:this[l(902)][e]["emCorrectType"]!=D&&this[l(902)][e][l(1490)]!=A&&this[l(902)][e][l(1490)]!=B&&this["stFishEyeManager"][e]["emCorrectType"]!=L?C:0==this["stFishEyeManager"][e]["bInited"]?this[l(752)]=S:a<0||o<0||r<0||s<0?E:J[l(593)]!=this[l(902)][e][l(1512)][l(1166)](a,o,r,s)?this["FECErrorCode"]=1297:1}},{key:t(1020),value:function(e,i){var n=t;return null==this[n(902)][e][n(1512)]?this[n(752)]=b:0==this["stFishEyeManager"][e][n(761)]?this[n(752)]=S:J[n(593)]!=this[n(902)][e][n(1512)][n(924)](ue,i)?this[n(752)]=1297:1}},{key:"_ConvertDisplayEffect",value:function(e,i){var n=t;switch(e){case k:return M==i?q["SR_DE_FISH_PTZ_WALL"]:B==i||L==i?q[n(1018)]:F==i?q[n(1010)]:O==i?q["SR_DE_FISH_PLANET"]:N==i?q[n(1174)]:U==i?q[n(614)]:q[n(677)];case R:return M==i?q[n(474)]:B==i?q[n(472)]:A==i?q[n(1366)]:L==i?q["SR_DE_FISH_PANORAMA_WALL"]:F==i?q[n(1010)]:j==i?q[n(405)]:z==i?q[n(1139)]:O==i?q[n(1262)]:q[n(677)];case I:return M==i?q[n(1282)]:B==i?q[n(1379)]:A==i?q["SR_DE_FISH_PANORAMA_CEILING_180"]:L==i?q[n(1018)]:F==i?q["SR_DE_FISH_SEMISPHERE"]:j==i?q[n(364)]:z==i?q[n(414)]:O==i?q[n(1262)]:q[n(677)];default:return q["SR_DE_FISH_ORIGINAL"]}}}]),i}(),ze=function(){var t=e;function i(){var e=n;l(this,i),this[e(491)]=0,this[e(587)]=0,this[e(745)]=0,this[e(1274)]=0,this[e(606)]=0}return c(i,[{key:t(577),value:function(){var e=t;this["startTime"]=this[e(687)]()}},{key:t(687),value:function(){var e=t;return this[e(587)]=60*(new Date)[e(697)]()*60*1e3+60*(new Date)[e(721)]()*1e3+1e3*(new Date)["getSeconds"]()+(new Date)[e(1216)](),this[e(1274)]=(new Date)[e(734)](),this[e(587)]}},{key:t(536),value:function(){var e=t,i=this[e(687)]()-this[e(491)];return this[e(1274)]!==(new Date)[e(734)]()&&(i+=24*((new Date)["getDate"]()-this["lastDate"])*60*60*1e3),i}},{key:"timerReset",value:function(){var e=t;this["startTime"]=0,this[e(587)]=0,this[e(745)]=0,this[e(1274)]=0,this["preTimerStamp"]=0}}]),i}(),Oe=function(){var t=e;function i(){var e=n,t=0<arguments[e(525)]&&void 0!==arguments[0]?arguments[0]:null;l(this,i),this[e(863)]=null,this[e(1326)]=0,this[e(857)]=null,this[e(1215)]=null,this[e(1569)]=[],this["initTimer"]=!1,this[e(1133)]=0,this["baseTimeStamp"]=0,this["resetTimer"]=!0,this["RenderFrame"]=this[e(1141)][e(979)](this),this["renderCurStatus"]=2,this[e(1147)]=1,this[e(555)]=1,this[e(1498)]=14,this[e(949)]=!1,this[e(942)]=!0,this["getImageType"]="",this["getImageJPEG"]=!1,this[e(1302)]=!1,this[e(1501)]=0,this[e(526)]=0,this[e(1424)]=null,this[e(1254)]=[],this["curFrameInfo"]={},this[e(1030)][e(432)]=0,this["sx"]=0,this["sy"]=0,this["sw"]=0,this["sh"]=0,this[e(595)]=!1,this[e(980)]=!1,this[e(1295)]=!0,this[e(704)]=null,this[e(1048)]=0,this[e(1246)]=this[e(1501)]*this[e(526)]*3/2,this[e(703)]=!0,(this[e(1376)]=null)!=t&&(this[e(1376)]=t),this[e(1264)]=e(1258),this[e(774)]=null}return c(i,[{key:t(520),value:function(e,i,n,a){var o=t;this[o(863)]=e,this["streamOpenMode"]=i,this["renderEngine"]=a,this[o(774)]=new je,this["oVideoRender"][o(1480)](this[o(863)],this[o(1264)]),this["SetCurStatus"](2),null==this[o(1215)]&&(this[o(1215)]=new X(n,this,this[o(1376)]),this[o(1569)]=this["oVideoDecoder"][o(1113)],null!==this[o(1215)]&&this[o(1215)][o(1271)]()),null==this[o(704)]&&(this[o(704)]=new ze)}},{key:"HardDecodeError",value:function(){var e=t;this[e(1376)][e(806)](),this["player"][e(682)](0),this[e(1376)][e(772)]()}},{key:t(1545),value:function(e,i){var n=t,a={};a[n(798)]=i["port"],a["codecType"]=i[n(714)],a["frameType"]=i[n(952)],a[n(1119)]=i["frameSize"],a["width"]=i["width"],a["height"]=i[n(1384)],a["timeStamp"]=i[n(432)],a[n(964)]=i[n(964)],a[n(666)]=i["frameNum"],a[n(389)]=i["interlace"],a[n(1070)]=i["streamEnd"],a["cropLeft"]=i[n(1444)],a[n(1552)]=i[n(1552)],a["cropTop"]=i["cropTop"],a[n(1429)]=i["cropBottom"],a[n(628)]=i[n(628)],a[n(500)]=i[n(500)],a[n(727)]=i[n(727)],a[n(394)]=i[n(394)],a[n(1380)]=i["hour"],a[n(1088)]=i["minute"],a[n(939)]=i["second"],a[n(1221)]=i["milliseconds"],this[n(1254)][n(962)](a),this[n(1215)][n(1545)](e,i)}},{key:t(854),value:function(){var e=this;return new Promise((function(t,i){var a=n;e[a(1215)][a(564)]()[a(705)]((function(){var i=a;e[i(1254)][i(387)](0,e[i(1254)][i(525)]),e["curFrameInfo"]={},e["renderCurStatus"]=2,e[i(1376)]?e["player"][i(1103)]():postMessage({function:i(1123)}),t()}),(function(){i()}))}))}},{key:t(1446),value:function(){var e=t;this["initTimer"]=!1,this[e(1133)]=0,this["baseTimeStamp"]=0,this["resetTimer"]=!0,null!=this[e(704)]&&this[e(704)]["timerReset"](),this[e(1141)]=this[e(1141)][e(979)](this),this[e(1335)]=2,this[e(1418)]=0,this[e(879)]=null,this[e(1266)]=!1,this[e(1302)]=!1,this[e(595)]=!1,this["getCropImageBMP"]=!1,this["curFrameIsDisplay"]=!0,this[e(1424)]=null,this["displayFrameInfo"][e(387)](0,this[e(1254)]["length"]),this["curFrameInfo"]={}}},{key:t(722),value:function(){var e=t,i=this;this[e(1215)][e(437)]()[e(705)]((function(){var t=e;(i[t(1215)]=null)!=i[t(774)]&&(i[t(774)][t(785)](),i["oVideoRender"]=null),i[t(1446)](),i[t(704)]=null,console["log"](t(461)),i[t(1295)]=!1}),(function(){var t=e;console[t(1590)](t(1140))}))}},{key:t(1141),value:function(){var e,i,a,o=t,r=this;switch(this[o(1335)]){case 0:this["_resetRenderTimer"](),this["_resetDecoder"]()[o(705)]((function(){setTimeout((function(){var e=n;r[e(1141)]()}),1)}),(function(){}));break;case 2:this["displayRunning"]?(this[o(879)]=this[o(1272)](),-1==this[o(1498)]||0==this[o(1326)]?(null!=this["chosenFrame"]&&(this["curTimeStamp"]=this[o(879)][o(559)],this[o(963)](this[o(879)])),requestAnimationFrame(this[o(1141)])):null!=this[o(879)]?(this[o(1364)]&&!this["resetTimer"]||(this[o(704)][o(577)](),this[o(1364)]=!0,this["resetTimer"]=!1,this[o(1133)]=this[o(879)]["timestamp"],this[o(1334)]=this[o(879)]["timestamp"]),this[o(1418)]=this["chosenFrame"][o(559)],e=this[o(1418)]-this[o(1133)],a=this["curTimeStamp"]-this[o(1334)],(5e3<e||e<0||a<0)&&(this[o(704)][o(577)](),this["preTimeStamp"]=this[o(879)][o(559)],this[o(1334)]=this[o(1418)]),(e=(this["curTimeStamp"]-this["baseTimeStamp"])/this["playSpeed"]-this[o(704)][o(536)]())<15&&-15<e?(this[o(963)](this["chosenFrame"]),this[o(1133)]=this[o(1418)],this[o(1141)]()):e<0?(setTimeout(this[o(963)](this[o(879)]),1),this["preTimeStamp"]=this[o(1418)],this["RenderFrame"]()):i=setTimeout((function(){var e=o;2==r["renderCurStatus"]?(r[e(963)](r["chosenFrame"]),r["preTimeStamp"]=r[e(1418)]):r[e(703)]=!1,r[e(1141)](),clearTimeout(i)}),e-5)):(a=5,2<this["playSpeed"]&&(a=1),setTimeout((function(){var e=o;r[e(1141)]()}),a))):setTimeout((function(){var e=o;r[e(1141)]()}),5);break;case 3:setTimeout((function(){var e=o;r[e(643)](),r[e(1141)]()}),5);break;case 5:this["needForward"]&&(this[o(879)]=this["chooseFrame"](),null!=this[o(879)]&&setTimeout((function(){var e=o;r[e(963)](r[e(879)]),r[e(949)]=!1}),1)),setTimeout((function(){var e=o;r[e(643)](),r["RenderFrame"]()}),5);break;case 4:return void this[o(722)]();default:return}}},{key:"paint",value:function(e){var i,n,a=t,o=this;4!=this[a(1447)]&&null!=e&&(this[a(1048)]===e[a(559)]&&(this["resetTimer"]=!0),null!=this[a(774)]&&(this[a(774)][a(700)](e),null!==this[a(1424)]&&this[a(648)](e["timestamp"]),(this[a(1266)]||this[a(1302)]||this[a(595)]||this[a(980)])&&(this[a(1501)]===e[a(1501)]&&this[a(526)]==e[a(526)]||(this["displayWidth"]=e[a(1501)],this[a(526)]=e[a(526)],this[a(1246)]=this[a(1501)]*this[a(526)]*3/2),i=new Uint8Array(this[a(1246)]),n=e[a(959)],e[a(685)](i)["then"]((function(){var e=a;o[e(454)](i,n)}))),this[a(942)]&&(null!=this[a(1376)]?null!=this["player"][a(409)]&&this[a(1376)][a(409)]():postMessage({function:"firstFrameCB",value:!0}),this["firstFrame"]=!1)))}},{key:t(648),value:function(e){var i=t;if(0!=this[i(1254)][i(525)]&&this[i(1030)][i(432)]!==e){for(var n={},a=0;a<this["displayFrameInfo"]["length"]&&(n=this[i(1254)]["shift"]())["timeStamp"]!=e;a++);this[i(1030)][i(798)]=n["port"],this[i(1030)]["codecType"]=n["codecType"],this["curFrameInfo"][i(952)]=n[i(952)],this[i(1030)][i(1119)]=n[i(1119)],this[i(1030)][i(1454)]=n[i(1454)],this[i(1030)][i(1384)]=n[i(1384)],this["curFrameInfo"][i(432)]=n[i(432)],this["curFrameInfo"]["frameRate"]=n["frameRate"],this["curFrameInfo"][i(666)]=n[i(666)],this["curFrameInfo"][i(389)]=n[i(389)],this["curFrameInfo"][i(1070)]=n[i(1070)],this[i(1030)][i(1444)]=n[i(1444)],this[i(1030)][i(1552)]=n[i(1552)],this[i(1030)][i(633)]=n[i(633)],this[i(1030)][i(1429)]=n[i(1429)],this[i(1030)][i(628)]=n[i(628)],this[i(1030)][i(500)]=n[i(500)],this[i(1030)][i(727)]=n[i(727)],this["curFrameInfo"][i(394)]=n[i(394)],this[i(1030)][i(1380)]=n["hour"],this["curFrameInfo"]["minute"]=n[i(1088)],this[i(1030)]["second"]=n[i(939)],this[i(1030)][i(1221)]=n[i(1221)],this["displayFrameInfoCB"](this["curFrameInfo"])}}},{key:t(454),value:function(e,i){var n=t;this[n(1376)]?(this[n(1266)]&&(this["getImageJPEG"]=!1,this[n(1376)][n(625)](e,this[n(1246)],this[n(1501)],this[n(526)],"jpeg",i,0,0,0,0)),this[n(1302)]&&(this[n(1302)]=!1,this[n(1376)]["_GetImage2"](e,this[n(1246)],this[n(1501)],this[n(526)],n(1292),i,0,0,0,0)),this[n(595)]&&(this[n(595)]=!1,this[n(1376)][n(625)](e,this[n(1246)],this[n(1501)],this[n(526)],n(1239),i,this["sx"],this["sy"],this["sw"],this["sh"])),this[n(980)]&&(this[n(980)]=!1,this[n(1376)]["_GetImage2"](e,this[n(1246)],this["displayWidth"],this[n(526)],"bmp",i,this["sx"],this["sy"],this["sw"],this["sh"]))):(this["getImageJPEG"]&&(this[n(1266)]=!1,postMessage({function:n(934),value:e[n(1074)],size:this[n(1246)],width:this[n(1501)],height:this["displayHeight"],type:"jpeg",yuvType:i,sx:0,sy:0,sw:0,sh:0},[e[n(1074)]])),this[n(1302)]&&(this[n(1302)]=!1,postMessage({function:n(934),value:e[n(1074)],size:this["yuvLength"],width:this[n(1501)],height:this[n(526)],type:n(1292),yuvType:i,sx:0,sy:0,sw:0,sh:0},[e["buffer"]])),this["getCropImageJPEG"]&&(this[n(595)]=!1,postMessage({function:n(934),value:e[n(1074)],size:this[n(1246)],width:this["displayWidth"],height:this[n(526)],type:n(1239),yuvType:i,sx:this["sx"],sy:this["sy"],sw:this["sw"],sh:this["sh"]},[e["buffer"]])),this[n(980)]&&(this[n(980)]=!1,postMessage({function:n(934),value:e[n(1074)],size:this[n(1246)],width:this["displayWidth"],height:this["displayHeight"],type:"bmp",yuvType:i,sx:this["sx"],sy:this["sy"],sw:this["sw"],sh:this["sh"]},[e[n(1074)]])))}},{key:t(1272),value:function(){var e=t,i=this;if(1==this[e(1326)]){if(this[e(1569)][e(525)]<2)return null}else if(this["frameBuffers"][e(525)]<1)return null;return this[e(703)]?(null!=this["chosenFrame"]&&(this["frameBuffers"][e(1158)]()[e(327)](),this[e(879)][e(327)](),this["chosenFrame"]=null),this[e(1215)]["decoderObjNeedReset"]?void this["oVideoDecoder"]["resetDecoder"]()["then"]((function(){var t=e;return i["oVideoDecoder"][t(503)]=!1,null}),(function(){return null})):this[e(1569)][e(525)]<1?null:this[e(1569)][0]):(this[e(703)]=!0,this[e(1569)][0])}},{key:t(1053),value:function(e,i,n,a){var o=t;return null==this[o(774)]?0:(this["sx"]=e,this["sy"]=i,this["sw"]=n,this["sh"]=a,this["oVideoRender"][o(399)](e,i,n,a))}},{key:"SetCurStatus",value:function(e){this["renderCurStatus"]=e}},{key:"fast",value:function(){var e=t,i=this[e(862)](this[e(555)]);return this["_SetPlaySpeed"](i)}},{key:t(1207),value:function(){var e=t,i=this[e(1395)](this[e(555)]);return this["_SetPlaySpeed"](i)}},{key:t(1080),value:function(e){var i=t;if(e)this[i(1315)](3);else{if(3!==this[i(1335)])return-1;this[i(1315)](2),this[i(1516)]=!0}return 1}},{key:t(643),value:function(){var e=t;0!=this[e(1569)][e(525)]&&this[e(963)](this[e(1569)][0])}},{key:t(869),value:function(e){var i=t;if(e)this[i(1315)](5),this["needForward"]=!0;else{if(5!==this[i(1335)])return-1;this[i(1315)](2),this["resetTimer"]=!0,this[i(949)]=!1,this[i(716)](1)}return 1}},{key:t(343),value:function(e,i){var n=t;return null!=this[n(774)]&&this[n(774)][n(343)](e,i)}},{key:"GetCanvasSize",value:function(){var e=t;return null!=this["oVideoRender"]&&this[e(774)][e(1370)]()}},{key:"GetPlayedTime",value:function(){var e=t;return this[e(1418)]}},{key:t(716),value:function(e){var i=t;switch(e){case-16:case-8:case-4:case-2:case 1:case 2:case 4:case 8:case 16:case 32:case 64:break;default:return-1}return e!==this[i(555)]&&(this[i(555)]=e,this[i(1147)]=0<e?e:-1/e,console[i(1590)](i(1005)+this[i(1147)]),this["resetTimer"]=!0,this["needForward"]=!1,2!=this[i(1335)]&&this[i(1315)](2)),1}},{key:"_GetFastSpeed",value:function(e){var t=0;switch(e){case-16:t=-8;break;case-8:t=-4;break;case-4:t=-2;break;case-2:t=1;break;case 1:t=2;break;case 2:t=4;break;case 4:t=8;break;case 8:t=16;break;case 16:t=32;break;case 32:t=64;break;default:t=0}return t}},{key:t(1395),value:function(e){var t=0;switch(e){case-8:t=-16;break;case-4:t=-8;break;case-2:t=-4;break;case 1:t=-2;break;case 2:t=1;break;case 4:t=2;break;case 8:t=4;break;case 16:t=8;break;case 32:t=16;break;case 64:t=32;break;default:t=0}return t}},{key:"SetDisplayBuf",value:function(e){var i=t;return this[i(1498)]=e,1}},{key:t(784),value:function(){var e=t;return this[e(1266)]=!0,this[e(325)]=e(1239),1}},{key:"GetBMP",value:function(){var e=t;return this[e(1302)]=!0,this[e(325)]=e(1292),1}},{key:t(1125),value:function(){var e=t;return this[e(595)]=!0,this[e(325)]=e(1060),1}},{key:t(1417),value:function(){var e=t;return this["getCropImageBMP"]=!0,this["getImageType"]=e(981),1}},{key:"SetDecodeFrameType",value:function(e){var i=t;return this[i(1048)]=e,1}},{key:"SetStreamEnd",value:function(){var e=t;return this["oVideoDecoder"][e(1110)](),1}},{key:t(558),value:function(e){var i=t;return null!=this[i(774)]?this[i(774)][i(558)](e):0}},{key:t(1203),value:function(e,i){var n=t;return this[n(1424)]=i?e:null,1}},{key:t(814),value:function(e){var i=t;return"2d"===this["renderEngine"]||"2D"===this[i(1264)]?(console[i(1590)](i(1342),i(657)),0):null!=this[i(774)]?this[i(774)]["FEC_SetCanvasID"](e):0}},{key:t(1206),value:function(e,i,n){var a=t;return"2d"===this[a(1264)]||"2D"===this[a(1264)]?(console["log"](a(1342),a(657)),0):null!=this[a(774)]?this["oVideoRender"][a(1206)](e,i,n):0}},{key:"FEC_GetPort",value:function(e,i){var n=t;return"2d"===this[n(1264)]||"2D"===this[n(1264)]?(console["log"](n(1342),"color:red"),0):null!=this["oVideoRender"]?this[n(774)][n(1012)](e,i):0}},{key:t(1015),value:function(e){var i=t;return"2d"===this[i(1264)]||"2D"===this[i(1264)]?(console[i(1590)]("%c 2D render not support FEC correct",i(657)),0):null!=this[i(774)]?this[i(774)][i(1015)](e):0}},{key:t(671),value:function(e,i){var n=t;return"2d"===this[n(1264)]||"2D"===this[n(1264)]?(console[n(1590)](n(1342),n(657)),0):null!=this[n(774)]?this[n(774)][n(671)](e,i):0}},{key:t(992),value:function(e,i,n){var a=t;return"2d"===this[a(1264)]||"2D"===this[a(1264)]?(console["log"](a(1342),a(657)),0):null!=this["oVideoRender"]?this[a(774)][a(992)](e,i,n):0}},{key:"FEC_GetViewParam",value:function(e,i){var n=t;return"2d"===this[n(1264)]||"2D"===this["renderEngine"]?(console[n(1590)](n(1342),n(657)),0):null!=this[n(774)]?this[n(774)][n(1578)](e,i):0}},{key:t(1145),value:function(e,i){var n=t;return"2d"===this[n(1264)]||"2D"===this[n(1264)]?(console["log"](n(1342),n(657)),0):null!=this[n(774)]?this[n(774)]["FEC_SetWnd"](e,i):0}},{key:t(1582),value:function(e,i,n){var a=t;return"2d"===this[a(1264)]||"2D"===this[a(1264)]?(console["log"](a(1342),a(657)),0):null!=this["oVideoRender"]?this[a(774)][a(1582)](e,i,n):0}},{key:t(832),value:function(e){var i=t;return"2d"===this[i(1264)]||"2D"===this[i(1264)]?(console[i(1590)](i(1342),i(657)),0):null!=this["oVideoRender"]?this[i(774)][i(832)](e):0}},{key:t(1345),value:function(e,i,n,a,o,r,s){var l=t;return"2d"===this[l(1264)]||"2D"===this[l(1264)]?(console[l(1590)](l(1342),l(657)),0):null!=this[l(774)]?this[l(774)][l(1345)](e,i,n,a,o,r,s):0}},{key:t(1020),value:function(e,i){var n=t;return"2d"===this[n(1264)]||"2D"===this["renderEngine"]?(console[n(1590)]("%c 2D render not support FEC correct",n(657)),0):null!=this["oVideoRender"]?this[n(774)]["FEC_SetBackCilling"](e,i):0}}]),i}(),Ne=function(){var t=e;function i(e){var t=n;l(this,i),this[t(1376)]=e,this[t(1565)]=new Oe(e)}return c(i,[{key:t(520),value:function(e,i,n,a){var o=t;if(null===this[o(1565)])return 0;this[o(1565)][o(520)](e,i,n,a)}},{key:t(1545),value:function(e,i){var n=t;this["oVideoPlayCtrl"][n(1545)](e,i)}},{key:"SetDisplayRegion",value:function(e,i,n,a){var o=t;if(null===this[o(1565)])return 0;this["oVideoPlayCtrl"][o(1053)](e,i,n,a)}},{key:t(1476),value:function(){var e=t,i=this;if(null===this[e(1565)])return 0;this[e(1565)][e(1315)](4);var n=setInterval((function(){var t=e;i[t(1565)]["displayRunning"]||(i[t(1565)]=null,clearInterval(n),n=null,console[t(1590)](">>>JS 03 destroy oVideoPlayCtrl"))}),2)}},{key:"fast",value:function(){var e=t;return null===this[e(1565)]||1!==this[e(1565)][e(1589)]()?0:void 0}},{key:t(1207),value:function(){var e=t;return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"][e(1207)]()?0:void 0}},{key:t(1047),value:function(e){var i=t;return null===this[i(1565)]||1!==this["oVideoPlayCtrl"]["SetDisplayBuf"](e)?0:void 0}},{key:"Pause",value:function(e){var i=t;return null===this["oVideoPlayCtrl"]||1!==this[i(1565)][i(1080)](e)?0:void 0}},{key:t(869),value:function(e){var i=t;return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"][i(869)](e)?0:void 0}},{key:t(343),value:function(e,i){var n=t;return null===this[n(1565)]||1!==this["oVideoPlayCtrl"][n(343)](e,i)?0:void 0}},{key:"GetCanvasSize",value:function(){var e=t;return null===this[e(1565)]||1!==this[e(1565)]["GetCanvasSize"]()?0:void 0}},{key:t(768),value:function(){var e=t;return null===this["oVideoPlayCtrl"]?0:this["oVideoPlayCtrl"][e(768)]()}},{key:t(1388),value:function(){var e=t;this[e(1565)][e(1315)](0)}},{key:t(784),value:function(){var e=t;this[e(1565)][e(784)]()}},{key:t(1351),value:function(){var e=t;this["oVideoPlayCtrl"][e(1351)]()}},{key:"GetCropJPEG",value:function(){var e=t;this[e(1565)]["GetCropJPEG"]()}},{key:"GetCropBMP",value:function(){var e=t;this[e(1565)][e(1417)]()}},{key:t(1564),value:function(e){var i=t;this[i(1565)][i(1564)](e)}},{key:t(1070),value:function(){this["oVideoPlayCtrl"]["SetStreamEnd"]()}},{key:t(558),value:function(e){var i=t;return this[i(1565)][i(558)](e)}},{key:t(1203),value:function(e,i){var n=t;return this[n(1565)][n(1203)](e,i)}},{key:t(814),value:function(e){var i=t;return this[i(1565)][i(814)](e)}},{key:"FEC_ResetCorrectType",value:function(e,i,n){var a=t;return this[a(1565)][a(1206)](e,i,n)}},{key:t(1012),value:function(e,i){var n=t;return this[n(1565)][n(1012)](e,i)}},{key:t(1015),value:function(e){var i=t;return this[i(1565)][i(1015)](e)}},{key:t(671),value:function(e,i){var n=t;return this["oVideoPlayCtrl"][n(671)](e,i)}},{key:t(992),value:function(e,i,n){var a=t;return this[a(1565)]["FEC_SetViewParam"](e,i,n)}},{key:"FEC_GetViewParam",value:function(e,i){var n=t;return this[n(1565)][n(1578)](e,i)}},{key:t(1145),value:function(e,i){var n=t;return this[n(1565)][n(1145)](e,i)}},{key:t(1582),value:function(e,i,n){var a=t;return this[a(1565)]["FEC_Disable"](e,i,n)}},{key:t(832),value:function(e){var i=t;return this["oVideoPlayCtrl"][i(832)](e)}},{key:"FEC_SetDisplayRegion",value:function(e,i,n,a,o,r,s){var l=t;return this[l(1565)][l(1345)](e,i,n,a,o,r,s)}},{key:t(1020),value:function(e,t){return this["oVideoPlayCtrl"]["FEC_SetBackCilling"](e,t)}}]),i}(),Ue=new Array(8)[e(329)](0)[e(458)]((function(e){return new Array(128)})),He=null,Ve={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0},Ge=(window[e(1232)]=function(e,t,i,n){Ue[n][e]["JSPlayM4_InputRawData"](e,t,i)},function(){var t,i=e;function a(e,t){var i=n,o=this,r=2<arguments[i(525)]&&void 0!==arguments[2]?arguments[2]:0,s=3<arguments["length"]&&void 0!==arguments[3]?arguments[3]:i(1258),d=4<arguments[i(525)]&&void 0!==arguments[4]?arguments[4]:0,c=5<arguments[i(525)]&&void 0!==arguments[5]?arguments[5]:-1,u=(l(this,a),this["szBasePath"]=e,(this[i(816)]=this)[i(798)]=-1,this[i(549)]=d,this[i(1591)]=r,this[i(1264)]=s,this[i(1058)]=null,this["decodeWorker"]=null,this["offscreen"]=null,this[i(1159)]="",this[i(1201)]=null,this[i(1081)]=1,this["hevcDecodeEngine"]=1,this[i(1106)]=1,this[i(868)]=null,this[i(490)]=204800,this["canvasIDData"]=null,this[i(1156)]=!1,this[i(1326)]=0,this[i(1454)]=0,this[i(1384)]=0,this["rawDataFrameInfoBuffer"]=null,this[i(1226)]={},this[i(1254)]={},this[i(512)]=0,this["decodeFrameType"]=0,this[i(537)]=!1,this[i(1498)]=0,this[i(1561)]=!0,this[i(714)]=0,this[i(1463)]=0,this[i(1147)]=1,this[i(569)]=!1,this[i(531)]=!1,this[i(892)]=0,this[i(829)]=0,this[i(501)]=0,this[i(846)]=0,this[i(1429)]=0,this["cropLeft"]=0,this[i(1552)]=0,this[i(633)]=0,this[i(363)]=960,this[i(1421)]=480,this["NoHIKHead"]=1,this[i(481)]=0,this["setHasThread"]=c,this[i(997)]=0,this["aTotalBuffer"]=[],this[i(1255)]=0,this[i(1467)]=!0,this["downloadFlag"]=!1,this[i(664)]=!0,this[i(1260)]=[],this["iAudioANRFrameNum"]=0,this["bWriteAudioBefDecData"]=!0,this[i(1462)]=[],this[i(1180)]=0,this[i(928)]=!0,this["audioAfDecOUTBuffer"]=[],this[i(1440)]=0,this[i(1559)]=!0,this[i(1530)]=[],this["iAudioBeRenOUTFrameNum"]=0,this[i(664)]=!0,this[i(1131)]=[],this[i(383)]=0,this[i(990)]=null,this[i(947)]=0,this[i(463)]=null,this[i(1107)]=null,this[i(589)]=!1,this[i(372)]=null,this[i(1542)]=0,this[i(1040)]=null,this[i(488)]=null,this[i(1146)]=!1,this[i(459)]=[],this[i(1554)]=2097152,this["stDisplayRect"]={top:0,left:0,right:0,bottom:0},this[i(621)]=0,this[i(397)]=1,this[i(435)]=1,this[i(1068)]=null,this[i(357)]=0,this[i(1451)]=0,this[i(575)]=1,this[i(1469)]=1,this[i(874)]={top:0,left:0,right:0,bottom:0},this["currentFishSubPort"]=-1,this[i(1176)]=[],this[i(398)]=null,this[i(409)]=null,this[i(367)]=null,this[i(1327)]=null,this["decCallBackFun"]=null,this[i(476)]=null,this[i(448)]=null,this["fn"]=t,this[i(965)]=!!window[i(741)],this[i(1179)]=Ve,this[i(710)]());-1==u?(console[i(786)]("%c1>your browser does not support hard Decoder,please install chrome",i(692)),this[i(1106)]=0,this[i(1041)]=0,this[i(1179)][i(1092)]=!1,this[i(1179)][i(1e3)]=!1,this[i(965)]?this[i(1179)][i(547)]=!0:this["callBackParameter"][i(547)]=!1):u<94?(console[i(786)](i(958),i(692),u),this[i(1106)]=0,this[i(1041)]=0,this[i(1179)][i(1092)]=!1,this[i(1179)][i(1e3)]=!1,this[i(965)]?this["callBackParameter"][i(547)]=!0:this[i(1179)][i(547)]=!1):(u<107&&(console["info"](i(1001),i(692),u),this[i(1041)]=0),this[i(1179)]["bSupHardDecAVC"]=!0,this[i(1179)][i(1e3)]=!1,this[i(1179)][i(547)]=!0),console["log"](i(485)+(new Date)[i(721)]()+":"+(new Date)[i(579)]()+"."+(new Date)["getMilliseconds"](),i(1063)),null==He&&this["callBackParameter"]["bSupHardOrSoft"]?(e=this[i(984)],(d=document[i(1546)](i(1237)))[i(1378)]=i(953),d[i(510)]=e,console[i(786)](i(1410),"color: green",e),d[i(1173)]=function(){var e=i;window["JSPlayerModule"]()[e(705)]((function(t){var i=e;He=t,o["_decoderLoaded"]=!0,console["log"](i(843)+(new Date)[i(721)]()+":"+(new Date)[i(579)]()+"."+(new Date)["getMilliseconds"](),"color: blue"),94<=u?VideoDecoder[i(699)]({codec:i(848),hardwareAcceleration:i(356)})["then"]((function(e){var t=i;e["supported"]?(o[t(1179)]["bSupHardDecHEVC"]=!0,console[t(786)](t(977),"color: green")):(console[t(1414)]("%c1>your PC does not support 265 hard Decoder, if you want to hard decode 265 ,try to update the GPU driver","color: red"),o[t(1041)]=0),o["fn"](o["callBackParameter"])}))[i(1301)]((function(){var e=i;o["fn"](o[e(1179)]),console[e(1590)]("%c hevc supported error",e(692))})):o["fn"](o[i(1179)])}))},document[i(1051)]["appendChild"](d)):new Promise((function(e,t){e()}))[i(705)]((function(){var e=i;o["fn"](o[e(1179)])}))}function o(e,i){return t["apply"](this,arguments)}return c(a,[{key:i(712),value:(t=function(e,t){var n=i;if(window[n(845)]){if(null==t[n(877)]){if(t["decodeWorker"]=new f,null==t[n(877)])return 0;console[n(1590)](n(708))}t[n(1201)]=document[n(380)](e),t[n(820)]=t[n(1201)][n(957)](),t[n(877)]["postMessage"]({command:n(520),streamOpenMode:t[n(1326)],canvas:t[n(820)],sab:t[n(965)],renderEngine:t[n(1264)]},[t[n(820)]]),0!=t[n(1498)]&&t[n(877)][n(1086)]({command:n(1047),value:t[n(1498)]}),t[n(877)][n(1066)]=function(e){var i=n,a=e[i(864)];switch(a[i(1536)]){case i(1235):startWorker(t[i(1159)],t);break;case i(663):var o=new Uint8Array(a["data"]);t[i(1367)](o);break;case"GetRawData":t[i(850)]();break;case i(1309):console[i(1590)](i(507));break;case i(768):o=a[i(591)],t[i(476)]&&t[i(476)](o-t[i(512)]);break;case i(1123):t[i(1103)]();break;case i(1555):o=a["value"];var r=a[i(1378)];t[i(787)](o,r);break;case"imageYUV":o=new Uint8Array(a["value"]),r=a[i(1242)],o=new Uint8Array(o);var s=a["type"],l=a[i(1454)],d=a[i(1384)],c=a[i(840)],u=a["sx"],h=a["sy"],x=a["sw"],f=a["sh"];t[i(625)](o,r,l,d,s,c,u,h,x,f),a[i(591)]=null;break;case i(1476):t["decodeWorker"]=null,console["log"]("HardWorker is null");break;case i(1350):null!=t[i(409)]&&t[i(409)]();break;case i(1203):t[i(1254)][i(798)]=a["curFrameInfo"]["port"],t[i(1254)][i(714)]=a["curFrameInfo"][i(714)],t[i(1254)]["frameType"]=a[i(1030)]["frameType"],t[i(1254)]["frameSize"]=a[i(1030)]["frameSize"],t[i(1254)][i(1454)]=a[i(1030)]["width"],t["displayFrameInfo"]["height"]=a[i(1030)][i(1384)],t[i(1254)][i(432)]=a[i(1030)][i(432)],t[i(1254)][i(964)]=a["curFrameInfo"][i(964)],t[i(1254)][i(666)]=a[i(1030)][i(666)],t["displayFrameInfo"]["interlace"]=a[i(1030)]["interlace"],t[i(1254)]["streamEnd"]=a[i(1030)][i(1070)],t[i(1254)][i(1444)]=a["curFrameInfo"][i(1444)],t["displayFrameInfo"][i(1552)]=a[i(1030)][i(1552)],t[i(1254)]["cropTop"]=a[i(1030)]["cropTop"],t[i(1254)][i(1429)]=a[i(1030)][i(1429)],t[i(1254)][i(628)]=a["curFrameInfo"]["year"],t[i(1254)]["month"]=a["curFrameInfo"][i(500)],t[i(1254)][i(727)]=a[i(1030)][i(727)],t["displayFrameInfo"][i(394)]=a[i(1030)][i(394)],t[i(1254)][i(1380)]=a["curFrameInfo"][i(1380)],t[i(1254)][i(1088)]=a["curFrameInfo"]["minute"],t[i(1254)][i(939)]=a[i(1030)][i(939)],t["displayFrameInfo"]["milliseconds"]=a[i(1030)][i(1221)];break;case"FECGetViewParam":o=a[i(1303)],null!=t["FECViewParamCB"]&&t[i(398)](o)}},t[n(877)][n(1153)]("error",(function(e){var t=n;console[t(1235)](e)}))}},o[i(1503)]=function(){var e=i;return t[e(1503)]()},o)},{key:i(1137),value:function(){return 0}},{key:i(804),value:function(){var e=i;return this[e(531)]&&console["log"](e(315)),null===He?0:(this[e(798)]=He[e(670)](),Ue[this[e(1591)]][this[e(798)]]=this[e(816)],this[e(531)]&&console[e(1590)](">>>>>yff>>> JSPlayM4_GetPort 2"),0==this[e(549)]&&(this[e(1058)]=new Ne(this)),1)}},{key:i(1508),value:function(e){var t=i;return this[t(531)]&&console[t(1590)](t(907)+e),null===He?0:(this[t(1326)]=e,this[t(531)]&&console[t(1590)](">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 2  mode:"+e),He["_JSPlayM4_SetStreamOpenMode"](this[t(798)],e))}},{key:i(1399),value:function(e,t,n){var a=i;if(this[a(531)]&&console[a(1590)](">>>>>yff>>>>> JSPlayM4_OpenStream 1 :"+e),null===He)return 0;var o=He["_malloc"](t);if(null===o)return console["log"](a(1072)),0;this[a(531)]&&console[a(1590)](a(746)+e);var r=new Uint8Array(e[a(1074)]);if(73==e[0]&&77==e[1]&&75==e[2]&&72==e[3]&&(this[a(362)]=0),5==e[10]&&0==e[11]){if(this[a(714)]=5,!this["callBackParameter"][a(1e3)]&&!this[a(965)])return 16;this["printfFlag"]&&console[a(1590)](">>>>>yff>>>>> JSPlayM4_OpenStream 3:"+e)}else 1==e[10]&&0==e[11]?(this[a(714)]=1,this[a(531)]&&console["log"](a(1382)+e)):0==e[10]&&1==e[11]?(this["codecType"]=256,this["printfFlag"]&&console[a(1590)](a(480)+e)):this[a(714)]=0;return He[a(1523)](r,o),e=He[a(717)](this[a(798)],o,t,n),null!==o&&He[a(573)](o),e}},{key:i(682),value:function(e){var t=i;return this[t(531)]&&console["log"](t(1127)+e),0!=e&&1!=e?(console[t(1590)](t(1387)+e),0):(this[t(1081)]=e,1)}},{key:i(1533),value:function(){var e=i;return this[e(1054)]=!0,1}},{key:i(987),value:function(e,t,n){var a=i;if(this[a(1588)]=n,this["rawDataFrameInfo"][a(798)]=e,this[a(1226)][a(714)]=He["HEAP32"][this[a(1588)]+4>>2],this[a(1226)][a(952)]=He[a(1039)][this["rawDataFrameInfoBuffer"]+12>>2],this[a(1226)][a(1119)]=He[a(1039)][this[a(1588)]+16>>2],this["rawDataFrameInfo"][a(1454)]=He[a(1039)][this["rawDataFrameInfoBuffer"]+20>>2],this[a(1226)][a(1384)]=He[a(1039)][this[a(1588)]+24>>2],this[a(1226)]["timeStamp"]=He["HEAP32"][this[a(1588)]+28>>2],this["rawDataFrameInfo"][a(964)]=He["HEAP32"][this[a(1588)]+32>>2],this[a(1226)]["frameNum"]=He[a(1039)][this[a(1588)]+36>>2],this[a(1226)][a(1392)]=He[a(1039)][this[a(1588)]+40>>2],this["rawDataFrameInfo"][a(389)]=He[a(1039)][this[a(1588)]+44>>2],this[a(1226)][a(1070)]=He[a(1039)][this[a(1588)]+48>>2],this[a(1226)][a(1444)]=He[a(1039)][this[a(1588)]+52>>2],this[a(1226)][a(1552)]=He[a(1039)][this[a(1588)]+56>>2],this[a(1226)][a(633)]=He[a(1039)][this[a(1588)]+60>>2],this[a(1226)][a(1429)]=He[a(1039)][this["rawDataFrameInfoBuffer"]+64>>2],this[a(1226)]["year"]=He[a(1006)][this[a(1588)]+68>>1],this["rawDataFrameInfo"]["month"]=He["HEAP16"][this[a(1588)]+70>>1],this[a(1226)][a(727)]=He["HEAP16"][this[a(1588)]+72>>1],this[a(1226)]["day"]=He[a(1006)][this[a(1588)]+74>>1],this["rawDataFrameInfo"][a(1380)]=He[a(1006)][this[a(1588)]+76>>1],this[a(1226)][a(1088)]=He[a(1006)][this[a(1588)]+78>>1],this[a(1226)][a(939)]=He[a(1006)][this[a(1588)]+80>>1],this["rawDataFrameInfo"][a(1221)]=He[a(1006)][this[a(1588)]+82>>1],this[a(1226)]["needSetPreSoft"]=!1,(this["rawDataFrameInfo"][a(964)]<1||1==this["rawDataFrameInfo"][a(389)])&&(this["rawDataFrameInfo"][a(1222)]=!0),0!=this[a(1454)]&&0!=this[a(1384)]||(this["width"]=this[a(1226)]["width"],this["height"]=this[a(1226)][a(1384)],this[a(512)]=this[a(1226)][a(432)],this[a(1561)]=!1),0==this[a(1226)][a(1444)]&&0==this[a(1226)]["cropRight"]&&0==this[a(1226)]["cropTop"]&&0==this[a(1226)]["cropBottom"]||(this[a(1429)]=this[a(1226)][a(1429)],this[a(1444)]=this[a(1226)]["cropLeft"],this[a(1552)]=this[a(1226)][a(1552)],this[a(633)]=this[a(1226)][a(633)]),1==this[a(469)]){if(1!==this[a(1226)][a(1392)])return 1;this[a(569)]&&(this["hasWebWorker"]?this[a(877)][a(1086)]({command:a(1564),timestamp:this["rawDataFrameInfo"][a(432)]}):this[a(1058)][a(1564)](this[a(1226)][a(432)]),this[a(569)]=!1)}if(0==this[a(469)]&&1==this["switchDecodeFrame"]){if(1!==this[a(1226)][a(1392)])return 1;this[a(537)]=!1}if(this[a(1054)]&&this["downloadRTPData"](t),this[a(549)]){if(null===this[a(877)])return t=null,0;this[a(877)]["postMessage"]({command:"inputData",rawData:t[a(1074)],rawDataFrameInfo:this["rawDataFrameInfo"]},[t[a(1074)]])}else this[a(1058)][a(1545)](t,this[a(1226)])}},{key:i(850),value:function(){He["_JSPlayM4_GetRawData"](this["port"])}},{key:i(1103),value:function(){var e=i;return He[e(920)](this[e(798)])}},{key:i(1574),value:function(e,t,n){var a=i;return console["log"](a(961)),this["hasWebWorker"]?null!=Ue[n][e]["decodeWorker"]&&Ue[n][e]["decodeWorker"][a(1086)]({command:"needReset"}):this[a(1058)][a(1388)](),1}},{key:i(1329),value:function(e){var t=i;return null===He?0:He[t(880)](this["port"],e)}},{key:i(772),value:function(){var e=i,t=0<arguments[e(525)]&&void 0!==arguments[0]?arguments[0]:null;if(this[e(531)]&&console["log"](">>>>>yff>>>>> JSPlayM4_Play 1 this.canvasID:"+this["canvasID"]+",this.sab:"+this["sab"]),null===He)return 0;if(this[e(531)]&&console["log"](e(870)+decodeEngine),0===this[e(1041)]&&5===this[e(714)]?(this[e(1081)]=0,console[e(786)](e(639),"color: green")):0!==this[e(1106)]||256!==this[e(714)]&&1!==this[e(714)]||(this[e(1081)]=0,console[e(786)](e(1311),e(1464))),!this["sab"]&&0===this[e(1081)])return console[e(786)](e(1126),"color: red"),0;if(-1!=this[e(1190)]&&(this[e(997)]=this["setHasThread"]),He[e(426)](this[e(798)],this["decodeEngine"],this[e(997)]),console["log"](e(1170),e(1464),this["decodeEngine"],this[e(714)]),null!=t&&(this[e(1159)]=t,this[e(363)]=document["getElementById"](this[e(1159)])[e(1454)],this[e(1421)]=document[e(380)](this["canvasID"])["height"]),null!=this[e(1159)]&&(t=document[e(380)](this[e(1159)]))&&(this[e(360)]=t[e(1402)](!0),this["clonedCanvasParentNode"]=t[e(467)],this[e(471)][e(777)](this["clonedCanvas"],t)),this["printfFlag"]&&console["log"](e(904)+this[e(1159)]+",this.sab:"+this[e(965)]+",this.decodeEngine:"+this[e(1081)]),t=1,1===this[e(1081)]){this["hasWebWorker"]?this["startWorker"](this["canvasID"],this):(this[e(1201)]=document[e(380)](this[e(1159)]),this[e(1058)][e(520)](this[e(1201)],this[e(1326)],this[e(965)],this[e(1264)]),0!=this[e(1498)]&&this[e(1058)][e(1047)](this[e(1498)])),He[e(1553)](this[e(798)],this[e(1591)]);var n=He["addFunction"](this[e(1574)],e(388));He[e(937)](this[e(798)],n,this[e(1591)]),1==(t=He[e(842)](this[e(798)],null))&&(this[e(1463)]=2)}else if(0===this[e(1081)]){if(""!=this[e(1159)]&&null!=this[e(1159)]){n=this["_stringToBytes"]("#"+this[e(1159)]);var a=2*(this[e(1159)][e(525)]+1);if(this["canvasIDData"]=He["_malloc"](a),null===this[e(1433)])return 0;var o=He[e(447)][e(350)](this["canvasIDData"],this["canvasIDData"]+a);a=new Uint8Array(a);o[e(483)](a,0),o[e(483)](new Uint8Array(n)),o=null}1==(t=He[e(842)](this[e(798)],this["canvasIDData"]))&&(this[e(1463)]=2)}return 0!=this[e(459)]["length"]&&(this[e(1432)](new Uint8Array(this[e(459)]),this[e(459)][e(525)]),this[e(459)][e(387)](0,this[e(459)]["length"])),this[e(1519)](1),t}},{key:i(1432),value:function(e,t){var n=i;if(this["printfFlag"]&&console[n(1590)](">>>>>yff>>>>> JSPlayM4_InputData 1 res:"+l+",inputSize:"+t),null===He){var a=this[n(459)]["length"];if(a+t>this["iInputMaxBufSize"])return console["log"](n(938)),0;for(var o=0;o<t;o++)this[n(459)][a+o]=e[o];return 0}if(this[n(490)]<t&&(null!==this[n(868)]&&(He[n(573)](this["inputDataBuffer"]),this["inputDataBuffer"]=null),this["inputDataBufferSize"]=t),null===this["inputDataBuffer"]&&(this[n(868)]=He[n(1420)](this[n(490)])),null===this[n(868)])return console[n(1590)](n(365)),0;1==this[n(481)]&&(this["JSPlayM4_SetCanvasSize"](this[n(363)],this[n(1421)]),this[n(481)]=0),this["NoHIKHead"]&&(s=(r=this["JSPlayM4_GetFrameInfo"]())[n(1454)],r=r[n(1384)],s&&r&&(this["JSPlayM4_SetCanvasSize"](this[n(363)],this[n(1421)]-1),this[n(362)]=0,this[n(481)]=1));var r,s=new Uint8Array(e[n(1074)]),l=(He[n(1523)](s,this[n(868)]),He["_JSPlayM4_InputData"](this[n(798)],this[n(868)],t));return this[n(531)]&&console[n(1590)](n(1243)+l+n(604)+t),l}},{key:i(806),value:function(){var e=i,t=!(0<arguments[e(525)]&&void 0!==arguments[0])||arguments[0];if(null===He)return 0;if(this["hasWebWorker"]?null!=this["decodeWorker"]&&this["decodeWorker"]["postMessage"]({command:e(1476)}):null!=this[e(1058)]&&this["pcVideoManager"][e(1476)](),this[e(1467)]&&0<this[e(1255)]&&(console["log"](e(369)+this[e(1255)]+e(900)),n=new Uint8Array(this[e(601)]),this[e(1163)](n,e(930)),this[e(601)][e(387)](0,this[e(601)][e(525)]),this[e(1467)]=!1,this[e(1255)]=0,n=null),2!=this[e(1463)]&&5!=this[e(1463)])return 1;var n=He[e(903)](this["port"]);if(1==n&&(this[e(1463)]=4),1==n&&t&&(t=document[e(380)](this[e(1159)]),t&&(this["clonedCanvas"]=t["cloneNode"](!0),this["clonedCanvasParentNode"]=t[e(467)],this[e(471)][e(777)](this[e(360)],t)),0!=this[e(1176)][e(525)]))for(var a=0;a<this["FECcanvasIDArray"]["length"];a++){var o=document["getElementById"](this[e(1176)][a]);o&&(this["clonedCanvas"]=o[e(1402)](!0),this[e(471)]=o["parentNode"],this[e(471)]["replaceChild"](this[e(360)],o))}return n}},{key:"JSPlayM4_CloseStream",value:function(){var e=i;return null===He?0:He["_JSPlayM4_CloseStream"](this[e(798)])}},{key:i(1306),value:function(){var e=i;return null===He?0:(null!==this[e(868)]&&(He[e(573)](this[e(868)]),this[e(868)]=null),null!==this["canvasIDData"]&&(He["_free"](this[e(1433)]),this[e(1433)]=null,this[e(1561)]=!0),null!=this[e(1068)]&&(He["_free"](this[e(1068)]),this[e(1068)]=null),null!=this[e(990)]&&(He[e(573)](this[e(990)]),this[e(990)]=null),null!=this[e(463)]&&(He[e(573)](this["pBmpSizeData"]),this[e(463)]=null),null!=this[e(372)]&&(He[e(573)](this[e(372)]),this[e(372)]=null),null!=this["pJPEGSizeData"]&&(He[e(573)](this[e(1040)]),this[e(1040)]=null),this[e(1107)]=null,this[e(488)]=null,this[e(601)]["splice"](0,this[e(601)][e(525)]),this[e(1260)]["splice"](0,this[e(1260)]["length"]),this["audioBefDecBuffer"][e(387)](0,this["audioBefDecBuffer"][e(525)]),this[e(1016)]["splice"](0,this[e(1016)]["length"]),this[e(1530)]["splice"](0,this[e(1530)]["length"]),this[e(1131)]["splice"](0,this[e(1131)][e(525)]),this[e(459)]["splice"](0,this[e(459)][e(525)]),this[e(1454)]=0,this[e(1384)]=0,this[e(1463)]=1,this[e(1058)]=null,this[e(621)]=0,this[e(1588)]=null,this[e(1254)]={},this[e(1226)]={},He[e(729)](this[e(798)]))}},{key:i(819),value:function(e){var t=i;return null===He?0:1===this[t(1081)]?(0==e&&1==this[t(469)]&&(this["switchDecodeFrame"]=!0),1==(this[t(469)]=e)&&(this["needWaitIFrame"]=!0),1):He[t(674)](this[t(798)],e)}},{key:i(711),value:function(){var e=i;return null===He?0:He[e(1341)](this["port"])}},{key:i(381),value:function(e,t,i){return new Promise(function(){var a=n,o=s(h()[a(460)]((function n(o,r){var s,l=a;return h()[l(894)]((function(n){for(var a=l;;)switch(n[a(707)]=n[a(811)]){case 0:(s=document[a(1546)]("img"))[a(1173)]=function(){var e=a,n=document[e(1546)](e(863)),r=n[e(1021)]("2d");n[e(1454)]=t,n[e(1384)]=i,r[e(1079)](this,0,0,t,i),r=n["toDataURL"]();o(r)},s["src"]=e;case 3:case a(974):return n[a(1476)]()}}),n)})));return function(e,t){var i=a;return o[i(1089)](this,arguments)}}())}},{key:i(787),value:function(e,t){var n,a,o,r=i;1===this["decodeEngine"]&&e[r(1454)]&&e[r(1384)]&&(n="image/"+t,a=document[r(1546)](r(863)),o=a[r(1021)]("2d"),a[r(1454)]=e["width"],a[r(1384)]=e[r(1384)],o[r(1079)](e,0,0,e[r(1454)],e[r(1384)]),a[r(783)]((function(i){var a=r;console[a(1590)](a(1195)+i);i=window[a(1244)]["createObjectURL"](i);var s=document[a(1546)]("a");s[a(369)]=(new Date)["getTime"]()+"."+t,s[a(1531)]=i,s["dataset"]["downloadurl"]=[n,s[a(369)],s[a(1531)]][a(462)](":"),document[a(1051)]["appendChild"](s),s[a(1168)](),document[a(1051)][a(1026)](s),e[a(327)](),o=null}),n))}},{key:"_GetImage2",value:function(e,t,i,a,o,r,s,l,d,c){var u=this;setTimeout((function(){var h=n;if(0!=i&&0!=a){var x=He[h(1420)](t);if(null!==x){He["writeArrayToMemory"](new Uint8Array(e,0,t),x);var f=0,p=(f=704!=i||288!=a&&240!=a?i*a*4+60:i*a*8+60,He[h(1420)](f)),m=He[h(1420)](4);if(null===p||null===m)return He[h(573)](x),(x=null)!=p&&(He[h(573)](p),p=null),void(null!=m&&(He[h(573)](m),m=null));He[h(496)](m,f,h(1298)),f=2,"nv12"===r?f=2:h(624)===r&&(f=3),"jpeg"==o?He[h(1194)](u[h(798)],x,t,p,m,i,a,f,s,l,d,c):h(1292)==o&&He[h(527)](u[h(798)],x,t,p,m,i,a,f,s,l,d,c),x=He[h(1461)](m,h(1298)),f=new Uint8Array(x),f[h(483)](He["HEAPU8"][h(350)](p,p+x)),0==s&&0==l&&0==d&&0==c?h(1239)==o?(null!=u["jpegDataCallback"]&&u["jpegDataCallback"](f,x),u["jpegDownloadFlag"]&&u[h(1163)](f,h(561)+o),u["jpegDataCallback"]=null,u[h(1146)]=!1):h(1292)==o&&(null!=u[h(1107)]&&u[h(1107)](f,x),u[h(589)]&&u[h(1163)](f,h(561)+o),u[h(1107)]=null,u["bmpDownloadFlag"]=!1):u[h(1163)](f,"GetCropImage."+o),(f=null)!=p&&(He["_free"](p),p=null),null!=m&&He[h(573)](m)}}}),0)}},{key:i(1547),value:function(){var e=i,t=0<arguments[e(525)]&&void 0!==arguments[0]?arguments[0]:null,n=!(1<arguments[e(525)]&&void 0!==arguments[1])||arguments[1];if(this["jpegDataCallback"]=t,this[e(1146)]=n,1===this[e(1081)])return this[e(549)]?this[e(877)][e(1086)]({command:e(784)}):null!=this[e(1058)]&&this[e(1058)]["GetJPEG"](),1;var a=He["_JSPlayM4_GetFrameInfo"](this["port"]);if(this["width"]=He[e(1039)][a+12>>2],this[e(1384)]=He[e(1039)][a+16>>2],0==this[e(1454)]||0==this["height"])return 0;var o,r;a=this["width"]*this["height"]*4+60;return(null==this["pJpegData"]||this[e(1247)]<a)&&(null!=this[e(372)]&&(He[e(573)](this[e(372)]),this[e(372)]=null),this["nJPEGDataSize"]=a,this[e(372)]=He[e(1420)](this["nJPEGDataSize"]),null===this[e(372)])?void 0:(null==this["pJPEGSizeData"]&&(this["pJPEGSizeData"]=He[e(1420)](4)),a=He[e(498)](this[e(798)],this[e(372)],this[e(1247)],this["pJPEGSizeData"]),1!=a&&(o=He[e(972)](this["port"]),console[e(1590)](e(695)+o)),1==a&&(o=He[e(1461)](this[e(1040)],e(1298)),(r=new Uint8Array(o))[e(483)](He[e(447)][e(350)](this[e(372)],this["pJpegData"]+o)),null!=t&&t(r,o),n&&this["_downloadFile"](r,"GetJPEG.jpeg"),this["jpegDataCallback"]=r=null,this[e(1146)]=!1),a)}},{key:i(1114),value:function(){var e=i,t=0<arguments[e(525)]&&void 0!==arguments[0]?arguments[0]:null,n=!(1<arguments[e(525)]&&void 0!==arguments[1])||arguments[1];if(this["bmpDataCallback"]=t,this[e(589)]=n,1===this[e(1081)])return this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:e(1351)}):null!=this[e(1058)]&&this[e(1058)][e(1351)](),1;var a=He[e(635)](this["port"]);if(this[e(1454)]=He[e(1039)][a+12>>2],this[e(1384)]=He[e(1039)][a+16>>2],0==this[e(1454)]||0==this[e(1384)])return 0;var o;a=0,a=704!=this[e(1454)]||288!=this[e(1384)]&&240!=this[e(1384)]?this[e(1454)]*this[e(1384)]*4+60:this["width"]*this[e(1384)]*8+60;return(null==this[e(990)]||this["nBmpDataSize"]<a)&&(null!=this["pBmpData"]&&(He[e(573)](this[e(990)]),this[e(990)]=null),this[e(947)]=a,this[e(990)]=He[e(1420)](this[e(947)]),null===this["pBmpData"])?void 0:(null==this[e(463)]&&(this[e(463)]=He["_malloc"](4)),a=He[e(693)](this["port"],this[e(990)],this["nBmpDataSize"],this["pBmpSizeData"]),1!=a&&(o=He[e(972)](this[e(798)]),console[e(1590)](e(695)+o)),1==a&&(o=He["getValue"](this[e(463)],e(1298)),(a=new Uint8Array(o))[e(483)](He[e(447)][e(350)](this[e(990)],this[e(990)]+o)),null!=t&&t(a,o),n&&this[e(1163)](a,e(594)),this[e(1107)]=a=null,this[e(589)]=!1),1)}},{key:"JSPlayM4_GetCropJPEG",value:function(){var e=i;if(1===this[e(1081)])return this[e(549)]?this["decodeWorker"]["postMessage"]({command:e(1125)}):null!=this[e(1058)]&&this[e(1058)][e(1125)](),1;var t=He[e(635)](this[e(798)]);if(this[e(1454)]=He[e(1039)][t+12>>2],this[e(1384)]=He["HEAP32"][t+16>>2],0==this["width"]||0==this[e(1384)])return 0;t=this[e(1454)]*this[e(1384)]*4+60;var n=He["_malloc"](t),a=He[e(1420)](4),o=this[e(892)],r=this["SetDisRegionLeft"],s=this[e(501)],l=this["SetDisRegionTop"];return null!==n?(t=He[e(1494)](this["port"],n,t,a,0,0,r,l,s,o),1!=t&&(r=He[e(972)](this[e(798)]),console["log"](e(695)+r)),1==t&&(l=He[e(1461)](a,e(1298)),(s=new Uint8Array(l))["set"](He[e(447)][e(350)](n,n+l)),this[e(1163)](s,e(1045)),s=null),null!=n&&(He[e(573)](n),n=null),null!=a&&(He["_free"](a),a=null),t):void 0}},{key:i(1314),value:function(){var e=i;if(1===this[e(1081)])return this[e(549)]?this["decodeWorker"][e(1086)]({command:e(1417)}):null!=this["pcVideoManager"]&&this[e(1058)][e(1417)](),1;var t=He[e(635)](this["port"]);if(this[e(1454)]=He["HEAP32"][t+12>>2],this[e(1384)]=He["HEAP32"][t+16>>2],0==this[e(1454)]||0==this[e(1384)])return 0;t=this[e(1454)]*this[e(1384)]*4+60;var n=He[e(1420)](t),a=He["_malloc"](4),o=this[e(892)],r=this["SetDisRegionLeft"],s=this[e(501)],l=this[e(846)];return null!==n?(t=He[e(951)](this[e(798)],n,t,a,0,0,r,l,s,o),1!=t&&(r=He[e(972)](this[e(798)]),console[e(1590)](e(695)+r)),1==t&&(l=He[e(1461)](a,"i32"),(s=new Uint8Array(l))[e(483)](He[e(447)][e(350)](n,n+l)),this[e(1163)](s,"GetCropBmp.bmp"),s=null),null!=n&&(He["_free"](n),n=null),null!=a&&(He[e(573)](a),a=null),1):void 0}},{key:i(1285),value:function(){var e=i;return null===He?0:He[e(421)]()}},{key:i(1250),value:function(){var e=i;return null===He?0:He[e(401)]()}},{key:"JSPlayM4_GetBuildDate",value:function(){return null===He?0:He["_JSPlayM4_GetBuildDate"]()}},{key:"JSPlayM4_GetLastError",value:function(){var e=i;return null===He?0:He[e(972)](this[e(798)])}},{key:i(773),value:function(){var e=i;if(null===He)return 0;if(0===this[e(1326)])return 1;if(1===this[e(1081)])if(this[e(549)]){if(null===this[e(877)])return 0;this[e(877)][e(1086)]({command:e(1589)})}else null!=this["pcVideoManager"]&&this[e(1058)]["fast"]();var t=He[e(543)](this[e(798)]);return 1==t&&(this[e(1147)]=2*this[e(1147)]),t}},{key:i(1220),value:function(){var e=i;if(null===He)return 0;if(0===this[e(1326)])return 1;if(1===this[e(1081)])if(this[e(549)]){if(null===this[e(877)])return 0;this[e(877)]["postMessage"]({command:"slow"})}else null!=this["pcVideoManager"]&&this[e(1058)]["slow"]();var t=He["_JSPlayM4_Slow"](this["port"]);return 1==t&&(this[e(1147)]=this[e(1147)]/2),console[e(1590)](e(1263)+this["playSpeed"]),t}},{key:i(793),value:function(e){var t=i;return null===He?0:1===this["decodeEngine"]?1:He[t(1115)](this[t(798)],e)}},{key:i(1055),value:function(e){var t=i;return null===He?0:He[t(751)](this[t(798)],e)}},{key:i(966),value:function(e){var t=i;return null===He?0:0===this[t(1326)]?1:(1===this[t(1081)]&&(this["hasWebWorker"]?this["decodeWorker"][t(1086)]({command:t(1080),value:e}):null!=this["pcVideoManager"]&&this[t(1058)]["Pause"](e)),He["_JSPlayM4_Pause"](this[t(798)],e))}},{key:"JSPlayM4_OneByOne",value:function(){var e=i;return null===He?0:0===this["streamOpenMode"]?1:(this[e(1463)]=5,1===this[e(1081)]&&(this["hasWebWorker"]?this[e(877)][e(1086)]({command:e(869),value:1}):null!=this[e(1058)]&&this["pcVideoManager"][e(869)](1)),He[e(799)](this[e(798)]))}},{key:"JSPlayM4_OneByOneResume",value:function(){var e=i;return null===He?0:0===this[e(1326)]?1:(this[e(1463)]=2,1===this[e(1081)]&&(this["hasWebWorker"]?this["decodeWorker"][e(1086)]({command:"OneByOne",value:0}):null!=this[e(1058)]&&this[e(1058)][e(869)](0)),He["_JSPlayM4_Play"](this[e(798)],this[e(1433)]))}},{key:i(1452),value:function(e){var t=i;return null===He?0:He[t(499)](this[t(798)],e)}},{key:i(330),value:function(){var e=i;return null===He?0:He[e(912)](this["port"])}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,n,a,o){var r=i,s=5<arguments[r(525)]&&void 0!==arguments[5]&&arguments[5],l=!(6<arguments["length"]&&void 0!==arguments[6])||arguments[6];if(null===He)return 0;var d=1,c=t,u=a,h=n,x=o;if("number"!=typeof t||r(911)!=typeof a||r(911)!=typeof n||"number"!=typeof o)return console["log"](r(681)),0;if(s)h=this[r(363)],x=this[r(1421)],this["iZoomNum"]=u=c=0,this[r(397)]=1,this[r(435)]=1;else if(l){if(c<0||h<0||u<0||x<0)return 0;0!==this[r(621)]&&(c=Math[r(1437)](c/this["iRatio_x"])+this[r(847)][r(1161)],u=Math[r(1437)](u/this[r(435)])+this[r(847)][r(449)],h=Math[r(1437)](h/this[r(397)])+this[r(847)][r(1161)],x=Math[r(1437)](x/this[r(435)])+this[r(847)][r(449)])}if(this[r(847)]={top:u,left:c,right:h,bottom:x},h-c<16||x-u<16||h-c>this[r(363)]||x-u>this[r(1421)])return console["log"](r(686)+t+r(905)+n+r(632)+a+r(833)+o+",bClose:"+s+r(1344)+l+r(1284)+this[r(621)]+r(574)+this["canvasWidth"]+r(933)+this["canvasHeight"]),0;if(1===this[r(1081)])if(this[r(892)]=x/this[r(1421)]*this[r(1384)],this["SetDisRegionLeft"]=c/this["canvasWidth"]*this[r(1454)],this[r(501)]=h/this["canvasWidth"]*this["width"],this[r(846)]=u/this[r(1421)]*this[r(1384)],this["hasWebWorker"]){if(null===this[r(877)])return 0;this[r(877)]["postMessage"]({command:r(1053),sx:this[r(829)],sy:this[r(846)],sw:this["SetDisRegionRight"]-this[r(829)],sh:this["SetDisRegionBottom"]-this[r(846)]})}else null!=this[r(1058)]&&this[r(1058)][r(1053)](this["SetDisRegionLeft"],this[r(846)],this["SetDisRegionRight"]-this[r(829)],this[r(892)]-this[r(846)]);else t=He[r(635)](this[r(798)]),this["width"]=He[r(1039)][t+12>>2],this[r(1384)]=He[r(1039)][t+16>>2],this[r(892)]=x/this[r(1421)]*this["height"],this[r(829)]=c/this["canvasWidth"]*this[r(1454)],this[r(501)]=h/this[r(363)]*this["width"],this["SetDisRegionTop"]=u/this[r(1421)]*this[r(1384)],d=He[r(465)](this["port"],this[r(1159)],this[r(829)],this[r(501)],this[r(846)],this["SetDisRegionBottom"]);return l&&(this[r(397)]=this[r(363)]/(h-c),this[r(435)]=this[r(1421)]/(x-u),this["iZoomNum"]++),d}},{key:i(427),value:function(e){var t=i;return null===He?0:(this[t(531)]=Number(e),He[t(1064)](this[t(798)],e))}},{key:i(1160),value:function(e,t){var n=i;return null===He?0:He[n(790)](this[n(798)],e,t)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,n){var a=i;return null===He?0:He[a(1219)](this[a(798)],e,t,n)}},{key:i(438),value:function(e,t){var n=i,a=2<arguments[n(525)]&&void 0!==arguments[2]?arguments[2]:0;if(e<16||t<16||null===this[n(1159)])return 0;if(this[n(363)]=e,this[n(1421)]=t,1!==this[n(1081)])return null===He?0:He["_JSPlayM4_SetCanvasSize"](this[n(798)],e,t,a);if(this[n(549)]){if(null==this["decodeWorker"])return 0;this["decodeWorker"][n(1086)]({command:"SetCanvasSize",width:e,height:t})}else null!=this[n(1058)]&&this[n(1058)]["SetCanvasSize"](e,t);return 1}},{key:i(1466),value:function(e){var t=i;return null===He?0:(1===this[t(1081)]&&(this[t(549)]?null===this[t(877)]?this[t(1498)]=e:this[t(877)][t(1086)]({command:t(1047),value:e}):null!=this["pcVideoManager"]&&this[t(1058)]["SetDisplayBuf"](e)),He["_JSPlayM4_SetDisplayBuf"](this[t(798)],e))}},{key:i(404),value:function(){var e=i;return null===He?0:He[e(680)](this[e(798)])}},{key:i(973),value:function(e){var t=i;return null===He?0:He[t(923)](this["port"],e)}},{key:i(1151),value:function(){var e=i;return null===He?0:0===this[e(1326)]?1:He["_JSPlayM4_ReversePlay"](this[e(798)])}},{key:i(1562),value:function(e){return null===He?0:He["_JSPlayM4_SetDecodeThreadNum"](this["port"],e)}},{key:i(1509),value:function(){var e=i,t=0<arguments[e(525)]&&void 0!==arguments[0]?arguments[0]:0;return null===He?0:1===this[e(1081)]?(this[e(549)]?this["decodeWorker"][e(1086)]({command:e(1370)}):null!=this["pcVideoManager"]&&this["pcVideoManager"][e(1370)](),1):He[e(753)](this[e(798)],t)}},{key:i(1291),value:function(e,t,n){var a=i;return null===He?0:He["_JSPlayM4_DisplayLostFrames"](this[a(798)],e,t,n)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){var n=i;return null===He?0:He[n(651)](this[n(798)],e,t)}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){var n=i;return null===He?0:He[n(423)](this["port"],e,t)}},{key:"JSPlayM4_SetAntialias",value:function(e){var t=i,n=1;if(1===this[t(1081)])this[t(549)]?null!=this[t(877)]&&this[t(877)][t(1086)]({command:t(558),value:e}):null!=this[t(1058)]&&(n=this["pcVideoManager"][t(558)](e));else{if(null===He)return 0;n=He[t(1353)](this[t(798)],e)}return n}},{key:i(361),value:function(e){var t=i;return null===He?0:He[t(333)](this[t(798)],e)}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){return null===He?0:He["_JSPlayM4_SetAudioThreadModel"](this["port"],e)}},{key:"JSPlayM4_SetDecodeERC",value:function(e){var t=i;return null===He?0:He[t(1499)](this[t(798)],e)}},{key:"JSPlayM4_SkipErrorData",value:function(e){var t=i;return null===He?0:He["_JSPlayM4_SkipErrorData"](this[t(798)],e)}},{key:i(899),value:function(e,t){var n=i;return null===He?0:He[n(1484)](this[n(798)],e,t)}},{key:i(1214),value:function(e,t){var n=i;return null===He?0:He["_JSPlayM4_SetD3DPostProcess"](this[n(798)],e,t)}},{key:i(323),value:function(e,t){var n=i;return t&&"function"==typeof t||null===t?(this[n(409)]=t,null===He?0:(t=1,0===this[n(1081)]?He["_JSPlayM4_SetFirstFrameCallBack"](this[n(798)],e,this[n(1591)]):t)):0}},{key:i(967),value:function(e,t){var n=i;return t&&n(1536)==typeof t||null===t?(this[n(1164)]=t,null===He?0:He["_JSPlayM4_SetDecCallBack"](this["port"],e,this[n(1591)])):0}},{key:i(316),value:function(e,t){var n=i;return t&&n(1536)==typeof t||null===t?(this[n(1327)]=t,null===He?0:He[n(636)](this[n(798)],e,this[n(1591)])):0}},{key:i(1519),value:function(e){var t=i,n=this,a=1;return 1===this[t(1081)]?this["hasWebWorker"]?null!=this[t(877)]&&this[t(877)][t(1086)]({command:t(1203),value:e}):null!=this[t(1058)]&&(a=this[t(1058)][t(1203)]((function(e){var i=t;n[i(1254)]["port"]=e[i(798)],n[i(1254)][i(714)]=e["codecType"],n[i(1254)][i(952)]=e["frameType"],n[i(1254)][i(1119)]=e[i(1119)],n[i(1254)][i(1454)]=e[i(1454)],n[i(1254)][i(1384)]=e[i(1384)],n[i(1254)][i(432)]=e[i(432)],n[i(1254)]["frameRate"]=e["frameRate"],n[i(1254)][i(666)]=e["frameNum"],n[i(1254)][i(389)]=e[i(389)],n[i(1254)][i(1070)]=e[i(1070)],n[i(1254)]["cropLeft"]=e[i(1444)],n[i(1254)][i(1552)]=e[i(1552)],n[i(1254)][i(633)]=e[i(633)],n[i(1254)][i(1429)]=e[i(1429)],n["displayFrameInfo"][i(628)]=e[i(628)],n[i(1254)][i(500)]=e[i(500)],n[i(1254)]["week"]=e[i(727)],n["displayFrameInfo"][i(394)]=e["day"],n[i(1254)][i(1380)]=e["hour"],n[i(1254)][i(1088)]=e[i(1088)],n[i(1254)][i(939)]=e["second"],n["displayFrameInfo"][i(1221)]=e[i(1221)]}),e)):a=He[t(968)](this[t(798)],e),a}},{key:i(805),value:function(e){var t=i;return null===He?0:He[t(571)](this[t(798)],e)}},{key:i(1135),value:function(){var e=i;if(null===He)return 0;var t,n={};return 0==this[e(1081)]?(t=He[e(635)](this["port"]),n[e(798)]=He[e(1039)][t>>2],n["frameType"]=He[e(1039)][t+4>>2],n[e(1119)]=He[e(1039)][t+8>>2],n[e(1454)]=He[e(1039)][t+12>>2],n["height"]=He["HEAP32"][t+16>>2],n[e(432)]=He[e(1039)][t+20>>2],n[e(964)]=He["HEAP32"][t+24>>2],n[e(1248)]=He["HEAP32"][t+28>>2],n[e(1316)]=He[e(1039)][t+32>>2],n[e(1371)]=He["HEAP32"][t+36>>2],n["frameNum"]=He[e(1039)][t+40>>2],n[e(1444)]=He[e(1039)][t+44>>2],n[e(1552)]=He[e(1039)][t+48>>2],n[e(633)]=He[e(1039)][t+52>>2],n["cropBottom"]=He[e(1039)][t+56>>2],n[e(628)]=He["HEAP16"][t+60>>1],n["month"]=He[e(1006)][t+62>>1],n["week"]=He[e(1006)][t+64>>1],n[e(394)]=He[e(1006)][t+66>>1],n["hour"]=He[e(1006)][t+68>>1],n["minute"]=He["HEAP16"][t+70>>1],n["second"]=He[e(1006)][t+72>>1],n["milliseconds"]=He[e(1006)][t+74>>1],this[e(1454)]=n["width"],this[e(1384)]=n[e(1384)]):n=this[e(1254)],n}},{key:i(878),value:function(){var e=i;if(null===He)return 0;var t=He[e(1122)](this[e(798)]);return null[e(1290)]=He[e(1039)][t>>2],null[e(758)]=He[e(1039)][t+4>>2],null[e(1148)]=He[e(1039)][t+8>>2],null[e(596)]=He[e(1039)][t+12>>2],null[e(1567)]=He[e(1039)][t+16>>2],null[e(1592)]=new Uint8Array(dataLength),additionDataBuffer["set"](He[e(447)][e(350)](pData,pData+dataLength)),null}},{key:i(1557),value:function(e,t,n){var a=i;return null!==He&&(n&&a(1536)==typeof n||null===n)?(this[a(367)]=n,He["_JSPlayM4_SetAdditionDataCallBack"](this[a(798)],e,t,this[a(1591)])):0}},{key:i(428),value:function(e){var t=i;return null!==He&&(e&&t(1536)==typeof e||null===e)?(this["getPlayTimeCallBackFun"]=e,void(1===this[t(1081)]?this[t(549)]?this[t(877)][t(1086)]({command:t(768)}):null!=this[t(1058)]&&(e=this["pcVideoManager"][t(768)](),this["getPlayTimeCallBackFun"]&&this[t(476)](e-this["startTimeStamp"])):(e=He[t(1028)](this[t(798)]),this["getPlayTimeCallBackFun"](e)))):0}},{key:i(909),value:function(){var e=i;return null===He?0:He["_JSPlayM4_GetFileTime"](this[e(798)])}},{key:i(839),value:function(e){var t=i;return null===He?0:this[t(909)]()<e?-1:(1===this["decodeEngine"]&&(this["hasWebWorker"]?this[t(877)][t(1086)]({command:t(1388)}):null!=this[t(1058)]&&this[t(1058)][t(1388)]()),He[t(770)](this[t(798)],e))}},{key:i(592),value:function(e){return null===He?0:He["_JSPlayM4_ResetBuffer"](this["port"],e)}},{key:i(822),value:function(e,t,n,a,o,r,s){var l=i;return null===He?0:He["_JSPlayM4_SetGlobalBaseTime"](this[l(798)],e,t,n,a,o,r,s)}},{key:"JSPlayM4_SetSecretKey",value:function(e){var t,n,a=i,o=(e=this[a(619)](e),He[a(1420)](128));if(null!==o)return t=He[a(447)]["subarray"](o,o+128),n=new Uint8Array(128),t["set"](n,0),t[a(483)](new Uint8Array(e)),n=t=null,e=He[a(769)](this["port"],1,o,128),null!==o&&He[a(573)](o),e}},{key:i(344),value:function(e,t){var n=i;return this[n(448)]=t,He[n(738)](this[n(798)],e,this[n(1591)])}},{key:i(583),value:function(e){var t=i;return 0==this[t(1081)]?He["_JSPlayM4_SetPlayOrBackSwitchMode"](this["port"],e):0}},{key:i(395),value:function(e){var t=i;return He[t(789)](this[t(798)],e)}},{key:i(1330),value:function(e){var t=i;return He[t(771)](this[t(798)],e)}},{key:i(866),value:function(){var e=i,t=0<arguments[e(525)]&&void 0!==arguments[0]?arguments[0]:null,n=1;if(null!=t&&""!=t){if(this[e(1176)]=t["split"](","),1!==this[e(1081)]){for(var a="",o=0;o<this[e(1176)][e(525)];o++)o==this[e(1176)]["length"]-1?a+="#"+this[e(1176)][o]:a+="#"+this["FECcanvasIDArray"][o]+",";if(0!=this[e(1176)][e(525)])for(var r=0;r<this[e(1176)]["length"];r++){var s,l=document[e(380)](this[e(1176)][r]);l&&(s=l[e(1402)](!0),l["parentNode"]["replaceChild"](s,l))}var d=this[e(619)](a),c=2*a[e(525)];if(this["pFECTotalCanvasIDData"]=He[e(1420)](c),null===this[e(1068)])return 0;var u=He[e(447)][e(350)](this["pFECTotalCanvasIDData"],this[e(1068)]+c);c=new Uint8Array(c);u[e(483)](c,0),u[e(483)](new Uint8Array(d)),u=null,n=He[e(765)](this[e(798)],this[e(1068)])}}else console[e(1590)](e(1056)+t),n=0;return n}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,n){var a=i,o=1;return 1===this["decodeEngine"]?this["hasWebWorker"]?null!=this[a(877)]?this[a(877)][a(1086)]({command:a(1280),fishSubPort:e,placeType:t,correctType:n}):o=0:o=null!=this[a(1058)]?this[a(1058)][a(1206)](e,t,n):0:o=He[a(1339)](this[a(798)],e,t,n),o}},{key:i(1576),value:function(e,t){var n=i;this[n(531)]&&console[n(1590)](n(781)+this[n(1081)]+n(513)+e+",correctType:"+t);var a=1;return 0==this[n(696)]?(console["log"](n(516)),a=He[n(1339)](this[n(798)],0,e,t)):1===this[n(1081)]?this[n(549)]?null!=this[n(877)]?this["decodeWorker"][n(1086)]({command:n(445),placeType:e,correctType:t}):a=0:a=null!=this[n(1058)]?this[n(1058)][n(1012)](e,t):0:a=He[n(1032)](this["port"],e,t),a}},{key:i(1241),value:function(e){var t=i;this[t(696)]=e,this["printfFlag"]&&console[t(1590)](t(1197)+this[t(1081)]+t(1172)+e);var n=1;return 0==e?console[t(1590)](t(1217)):1===this["decodeEngine"]?this[t(549)]?null!=this[t(877)]?this[t(877)][t(1086)]({command:t(584),fishSubPort:e}):n=0:n=null!=this["pcVideoManager"]?this[t(1058)]["FEC_Enable"](e):0:n=He[t(1336)](this["port"],e),n}},{key:i(479),value:function(e,t){var n=i;this[n(531)]&&console["log"](n(1572)+this[n(1081)]+n(1172)+e+n(647)+t[n(457)]+n(1097)+t[n(1303)]);var a,o=1;return 1===this[n(1081)]?this["hasWebWorker"]?null!=this[n(877)]?this["decodeWorker"]["postMessage"]({command:n(1477),fishSubPort:e,param2d:t}):o=0:o=null!=this["pcVideoManager"]?this["pcVideoManager"][n(671)](e,t):0:(a=He[n(342)](),null!=t[n(457)]&&(He[n(1039)][a>>2]=t[n(457)]),null!=t["fPTZParam"]&&null!=t[n(626)][n(989)]&&null!=t[n(626)]["fPTZPositionY"]&&(He[n(683)][a+8>>2]=t["fPTZParam"][n(989)],He["HEAPF32"][a+12>>2]=t[n(626)][n(1357)]),null!=t[n(626)]&&(He["HEAPF32"][a+32>>2]=t[n(431)]),null!=t[n(1303)]&&(He["HEAPF32"][a+36>>2]=t[n(1303)]),o=He[n(585)](this[n(798)],e)),o}},{key:i(826),value:function(e,t,n){var a=i;this[a(531)]&&console[a(1590)](a(336)+this[a(1081)]+a(1172)+e+a(647)+t+a(1097)+n);var o=1;return 1===this[a(1081)]?this[a(549)]?null!=this[a(877)]?this[a(877)]["postMessage"]({command:a(1355),fishSubPort:e,upDateType:t,fValue:n}):o=0:o=null!=this[a(1058)]?this[a(1058)][a(992)](e,t,n):0:o=He[a(719)](this[a(798)],e,t,n),o}},{key:i(1409),value:function(e,t,n){var a=i,o=1;return this[a(398)]=n,1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"][a(1086)]({command:a(1286),fishSubPort:e,upDateType:t}):o=0:(o=null!=this["pcVideoManager"]?this[a(1058)][a(1578)](e,t):0,null!=this[a(398)]&&this["FECViewParamCB"](o)):(o=He[a(1374)](this[a(798)],e,t),null!=this["FECViewParamCB"]&&this["FECViewParamCB"](o)),o}},{key:i(1425),value:function(e,t){var n=i;this[n(531)]&&console[n(1590)](n(732)+this[n(1081)]+n(1172)+e+n(747)+t);var a,o,r,s,l=1;return 0==e?console[n(1590)]("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd"):null!=t?1===this[n(1081)]?(a=document[n(380)](t),this[n(549)]?(o=a[n(957)](),null!=this["decodeWorker"]?this[n(877)][n(1086)]({command:n(1184),fishSubPort:e,offscrrenCnv:o},[o]):l=0):l=null!=this["pcVideoManager"]?this[n(1058)]["FEC_SetWnd"](e,a):0):((o=null)!=t&&(a=this[n(619)]("#"+t),s=2*(t[n(525)]+1),o=He["_malloc"](s),r=He[n(447)][n(350)](o,o+s),s=new Uint8Array(s),r[n(483)](s,0),r[n(483)](new Uint8Array(a)),s=r=null),l=He[n(565)](this[n(798)],e,o),null!=o&&(He[n(573)](o),o=null)):(console[n(1590)](n(1029)+this[n(1081)]+n(1172)+e+",hWnd:"+t),l=0),l}},{key:i(535),value:function(){var e=i,t=0<arguments[e(525)]&&void 0!==arguments[0]?arguments[0]:0,n=!(1<arguments[e(525)]&&void 0!==arguments[1])||arguments[1],a=2<arguments[e(525)]&&void 0!==arguments[2]&&arguments[2],o=1;return 0==t?console[e(1590)]("fishPort is 0 ,main canvas doesn't need call FEC_Disable"):1===this[e(1081)]?this[e(549)]?null!=this[e(877)]?this[e(877)][e(1086)]({command:e(1134),fishSubPort:t,clearFECCanvas:n,clearContext:a}):o=0:o=null!=this[e(1058)]?this[e(1058)][e(1582)](t,n,a):0:o=He[e(982)](this["port"],t,n,a),o}},{key:i(1036),value:function(e){var t=i;this[t(531)]&&console[t(1590)](t(759)+this["decodeEngine"]+t(1172)+e);var n=1;return 0==e?(this[t(696)]=e,console["log"](t(1019)),1):(1===this["decodeEngine"]?this[t(549)]?null!=this[t(877)]?this["decodeWorker"][t(1086)]({command:t(358),fishSubPort:e}):n=0:n=null!=this[t(1058)]?this["pcVideoManager"][t(832)](e):0:n=He["_JSPlayM4_FEC_DelPort"](this[t(798)],e),n)}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t,n,a,o,r=i,s=1<arguments[r(525)]&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments[r(525)]&&void 0!==arguments[2]?arguments[2]:0,d=3<arguments[r(525)]?arguments[3]:void 0,c=4<arguments[r(525)]&&void 0!==arguments[4]?arguments[4]:null,u=5<arguments["length"]?arguments[5]:void 0,h=6<arguments[r(525)]?arguments[6]:void 0,x=(this[r(531)]&&console[r(1590)](">>>JS JSPlayM4_FEC_SetDisplayRegion this.decodeEngine："+this[r(1081)]+r(1172)+e+r(517)+d[r(1161)]+",right:"+d[r(1422)]+",top:"+d[r(449)]+r(833)+d[r(497)]),1),f=d["left"],p=d["right"],m=d[r(449)];d=d["bottom"];if("number"!=typeof f||r(911)!=typeof p||"number"!=typeof d||r(911)!=typeof m)return console["log"](r(681)),0;if(u){if(h){if(f<0||p<0||m<0||d<0)return 0;0!==this[r(1451)]&&(f=Math[r(1437)](f/this[r(575)])+this[r(874)][r(1161)],m=Math[r(1437)](m/this[r(1469)])+this[r(874)][r(449)],p=Math["round"](p/this[r(575)])+this["stFECDisplayRect"][r(1161)],d=Math[r(1437)](d/this[r(1469)])+this[r(874)][r(449)])}}else p=this[r(363)],d=this[r(1421)],this[r(1451)]=m=f=0,this[r(575)]=1,this[r(1469)]=1;return this[r(874)]={top:m,left:f,right:p,bottom:d},p-f<16||d-m<16||p-f>this[r(363)]||d-m>this["canvasHeight"]?0:(1===this[r(1081)]?(n=f/this[r(363)]*this[r(1454)],t=p/this["canvasWidth"]*this[r(1454)],o=m/this[r(1421)]*this[r(1384)],a=d/this[r(1421)]*this[r(1384)],this[r(549)]?null!=this[r(877)]?this[r(877)][r(1086)]({command:r(562),fishSubPort:e,type:s,regionNum:l,sx:n,sy:o,sw:t-n,sh:a-o}):x=0:x=null!=this["pcVideoManager"]?this[r(1058)][r(1345)](e,s,l,n,o,t-n,a-o):0):x=null!==He?(t=f/this[r(363)]*1e3,n=p/this[r(363)]*1e3,a=m/this["canvasHeight"]*1e3,o=d/this[r(1421)]*1e3,u?He[r(446)](this[r(798)],e,s,l,t,n,a,o,c,u):He[r(446)](this[r(798)],e,0,0,0,0,0,0,null,u)):0,h&&(this[r(575)]=this["canvasWidth"]/(p-f),this["iFECRatio_y"]=this[r(1421)]/(d-m),this[r(1451)]++),x)}},{key:i(986),value:function(e,t){var n=i,a=1;return 1===this[n(1081)]?this[n(549)]?null!=this[n(877)]?this[n(877)]["postMessage"]({command:n(1396),fishSubPort:e,bValue:t}):a=0:a=null!=this[n(1058)]?this["pcVideoManager"][n(1020)](e,t):0:a=He[n(1150)](this[n(798)],e,t),a}},{key:i(710),value:function(){var e,t=i,n={},a=navigator[t(1426)][t(1558)]();return(e=a[t(1300)](/rv:([\d.]+)\) like gecko/))||(e=a["match"](/msie ([\d\.]+)/))?n["ie"]=e[1]:(e=a[t(1300)](/edge\/([\d\.]+)/))?n[t(684)]=e[1]:(e=a[t(1300)](/firefox\/([\d\.]+)/))?n[t(605)]=e[1]:(e=a[t(1300)](/(?:opera|opr).([\d\.]+)/))?n[t(1427)]=e[1]:(e=a[t(1300)](/chrome\/([\d\.]+)/))?n[t(1497)]=e[1]:(e=a["match"](/version\/([\d\.]+).*safari/))&&(n[t(413)]=e[1]),n[t(1497)]?(e=(a=n[t(1497)])["indexOf"]("."),Number(a["substring"](0,e))):(n["ie"]?console[t(786)](t(484),t(692)):n[t(413)]?console[t(786)](t(1407),t(692)):n["firefox"]?console[t(786)](t(1441),"color: red"):console["info"](t(1224),t(692)),-1)}},{key:i(619),value:function(e){for(var t,n,a=i,o=[],r=0;r<e[a(525)];r++){for(t=e[a(494)](r),n=[];n[a(962)](255&t),t>>=8;);o=o[a(1438)](n[a(408)]())}return o}},{key:i(1163),value:function(e,t){var n=i,a=e;e instanceof Blob||e instanceof File||(a=new Blob([e])),e=window[n(1244)][n(1245)](a),a=window[n(502)][n(1546)]("a"),a[n(1531)]=e,a["download"]=t,e=document[n(1117)](n(1585));e[n(1152)](n(1168),!0,!0),a[n(534)](e)}},{key:"downloadRTPData",value:function(e){var t=i;if(this["bWriteData"]){var n=e,a=this[t(601)][t(525)];console[t(1590)](t(1167)+a);for(var o=0,r=n[t(525)];o<r;o++)this["aTotalBuffer"][a+o]=n[o];this["iFrameNum"]++,n=null,console["log"]("downloadRTPdata iFrameNum:"+this[t(1255)])}this[t(1467)]&&600<=this[t(1255)]&&(console[t(1590)](t(726)),e=new Uint8Array(this[t(601)]),this["_downloadFile"](e,t(1430)),this["aTotalBuffer"][t(387)](0,this["aTotalBuffer"][t(525)]),this[t(1467)]=!1,this[t(1255)]=0)}},{key:i(1453),value:function(e){var t=i;if(this[t(1455)]){for(var n=e,a=this["audioANRBuffer"][t(525)],o=0,r=n[t(525)];o<r;o++)this["audioANRBuffer"][a+o]=n[o];this["iAudioANRFrameNum"]++,n=null,console["log"](t(1465)+this[t(1182)])}this[t(1455)]&&this["iAudioANRFrameNum"]>=WRITE_PCM_NUM&&(console[t(1590)](t(369)+WRITE_PCM_NUM+t(1228)),e=new Uint8Array(this[t(1260)]),this[t(1163)](e,t(1373)),this[t(1260)][t(387)](0,this[t(1260)][t(525)]),this["bWriteAudioANRData"]=!1,this[t(1182)]=0)}},{key:i(1069),value:function(e){var t=i;if(this[t(1188)]){for(var n=e,a=this["audioBefDecBuffer"][t(525)],o=0,r=n["length"];o<r;o++)this["audioBefDecBuffer"][a+o]=n[o];this["iAudioBefDecFrameNum"]++,n=null,console["log"](t(374)+this[t(1180)])}this[t(1188)]&&this[t(1180)]>=WRITE_PCM_NUM&&(console["log"]("download"+WRITE_PCM_NUM+"this.audioBefDecBuffer"),e=new Uint8Array(this[t(1462)]),this[t(1163)](e,t(351)),this["audioBefDecBuffer"]["splice"](0,this[t(1462)][t(525)]),this[t(1188)]=!1,this[t(1180)]=0)}},{key:i(1192),value:function(e){var t=i;if(this[t(928)]){for(var n=e,a=this[t(1016)]["length"],o=0,r=n[t(525)];o<r;o++)this["audioAfDecOUTBuffer"][a+o]=n[o];this[t(1440)]++,n=null,console[t(1590)]("download 2 After Decode AudioData FrameNum:"+this["iAudioAfDecOUTFrameNum"])}this[t(928)]&&this[t(1440)]>=WRITE_PCM_NUM&&(console[t(1590)](t(369)+WRITE_PCM_NUM+"this.audioAfDecOUTBuffer"),e=new Uint8Array(this[t(1016)]),this[t(1163)](e,t(1563)),this[t(1016)][t(387)](0,this[t(1016)][t(525)]),this[t(928)]=!1,this[t(1440)]=0)}},{key:i(321),value:function(e){var t=i;if(this[t(1559)]){for(var n=e,a=this[t(1530)][t(525)],o=0,r=n["length"];o<r;o++)this[t(1530)][a+o]=n[o];this[t(1456)]++,n=null,console[t(1590)](t(393)+this["iAudioBeRenOUTFrameNum"])}this[t(1559)]&&this[t(1456)]>=WRITE_PCM_NUM&&(console[t(1590)](t(369)+WRITE_PCM_NUM+t(1527)),e=new Uint8Array(this["audioBeRenOUTBuffer"]),this["_downloadFile"](e,t(1442)),this[t(1530)][t(387)](0,this[t(1530)][t(525)]),this["bWriteAudioBeforeRender"]=!1,this[t(1456)]=0)}},{key:"downloadAudioResampleData",value:function(e){var t=i;if(this[t(664)]){for(var n=e,a=this[t(1131)][t(525)],o=0,r=n[t(525)];o<r;o++)this[t(1131)][a+o]=n[o];this[t(383)]++,n=null,console[t(1590)](t(1083)+this[t(383)])}this[t(664)]&&this[t(383)]>=WRITE_PCM_NUM&&(console["log"]("download"+WRITE_PCM_NUM+t(1532)),e=new Uint8Array(this[t(1131)]),this[t(1163)](e,"AudioResampleData.data"),this[t(1131)][t(387)](0,this[t(1131)][t(525)]),this["bWriteAudioResampleData"]=!1,this[t(383)]=0)}}]),a}());window[e(1304)]=function(t,i,n){var a=e,o={};o[a(1290)]=He["HEAP32"][i>>2],o[a(758)]=He["HEAP32"][i+4>>2],o[a(1148)]=He["HEAP32"][i+8>>2],o["dataLength"]=He[a(1039)][i+12>>2],o[a(1567)]=He[a(1039)][i+16>>2],o[a(1592)]=new Uint8Array(o[a(596)]),o["additionDataBuffer"][a(483)](He[a(447)][a(350)](o[a(1567)],o[a(1567)]+o[a(596)])),null!=Ue[n][t]["addtionCallBackFun"]&&Ue[n][t][a(367)](o)},window[e(337)]=function(t,i,n,a,o){var r=e,s={};s[r(1511)]=i,s[r(1049)]=n,s["timeStamp"]=a,null!=Ue[o][t]["displayCallBackFun"]&&Ue[o][t][r(1327)](s)},window[e(580)]=function(t,i,n,a,o,r){var s=e,l={};l[s(798)]=t,l["Data"]=i,l["isize"]=n,l[s(901)]=a,l[s(466)]=o,null!=Ue[r][t]["decCallBackFun"]&&Ue[r][t][s(1164)](l)},window[e(376)]=function(t,i,n){var a,o,r,s,l=e;null!=Ue[n][t][l(448)]&&(a=He[l(1039)][i>>2],o=He[l(1039)][i+4>>2],r=He[l(1039)][i+8>>2],s=He[l(1039)][i+12>>2],i=He[l(1039)][i+16>>2],Ue[n][t]["runtimeCBFun"](a,o,r,s,i))},window[e(836)]=function(t,i){var n=e;null!=Ue[i][t][n(409)]&&Ue[i][t][n(409)]()},window["JSPlayM4_AudioANRCallBack"]=function(t,i,n,a){var o=e;Ue[a][t][o(1453)](i)},window[e(1004)]=function(t,i,n,a){var o=e;Ue[a][t][o(1069)](i)},window["JSPlayM4_AudioAfterDecodeCallBack"]=function(t,i,n,a){var o=e;Ue[a][t][o(1192)](i)},window[e(698)]=function(e,t,i,n){Ue[n][e]["downloadAudioBeforeRenderData"](t)},window[e(634)]=function(e,t,i,n){Ue[n][e]["downloadAudioResampleData"](t)},window[e(1204)]=function(e,t,i){Ue[i][port]["downloadRTPData"](e)}})(),a;function r(i){var n=o,a=t[i];return void 0!==a||(a=t[i]={exports:{}},e[i](a,a[n(509)],r)),a[n(509)]}}))}(Oi,Oi.exports);var Ni=Oi.exports;const Ui=256,Hi=512,Vi=768,Gi=1536,Yi={port:0,start:{x:0,y:0},total:{x:0,y:0},diff:{x:0,y:0},startPTZPosition:{x:0,y:0},lastCorrdsY:0,param2d:{upDateType:4,fValue:0,fPTZParam:{fPTZPositionX:0,fPTZPositionY:0},fPTZZoom:0}};class Wi{constructor(e){this.nWidth=0,this.nHeight=0,this.useHardDev="undefined"!==typeof e.useHardDev&&e.useHardDev,this.isHardH264=e.isHardH264||!0,this.isHardH265=e.isHardH265||!0,this.isSharedArrayBuffer=e.isSharedArrayBuffer||!1,this.bGpuSupHardDecHEVC=!1,this.oStreamClient=new pi.StreamClient,this.oStorageManager=new Bi("./transform",{staticPath:"https://open.ys7.com/assets/ezuikit_v4.0"}),this.aHead=[],this.pCanvasData=null,this.bPlaySound=-1,this.szStorageUUID="",this.szStreamUUID="",this.g_port=0,this.szId=e.szId,this.iWidth=e.iWidth,this.iHeight=e.iHeight,this.iRate=1,this.decoderVersion="2.0",this.staticPath=e.staticPath||"https://open.ys7.com/assets/ezuikit_v5.0",this.bPause=!1,this.bPlay=!1,this.bInit=!1,this.portAvailable=!0,this.esCanvas=null,this.b3DZoom=!1,this.oJSPlugin=null,this.bPauseDate=null,this.FECSplitIds="",this.canvasFECSubPort=new Map,this.correctType=null,document.getElementById(e.szId).style=`display:inline-block;width:${e.iWidth}px;height:${e.iHeight}px;background:#000000;background-size:100% 100%;vertical-align:top;`,this.JS_Init(),this.oStyle=Object.assign({border:"#000000",borderSelect:"#FFCC00",background:"#4C4B4B"},e.oStyle),"string"===typeof e.szId?this.oJSPlugin=ji("#"+e.szId):this.oJSPlugin=e.szId,this.createWindows(),this.esCanvas=new zi(this.szId+"canvas_draw0");const t=this;this.oJSPlugin.find("."+e.szId+"parent-wnd").eq(0).children().each((function(i){let n=this;ji(n).bind("mouseenter",(function(i){ji("#"+e.szId+"canvas_draw0").css("pointer-events","all"),t.b3DZoom?(console.log("e",i),console.log("id:",e.szId),t.esCanvas=null,ji("."+e.szId+"draw-window").unbind(),t.esCanvas=new zi(e.szId+"canvas_draw0"),t.esCanvas.setShapeType("Rect"),t.esCanvas.setDrawStyle("#ff0000","",0),t.esCanvas.setDrawStatus(!0,(function(e){t.fCallback&&t.fCallback(e)}))):ji("#"+e.szId+"canvas_draw0").css("pointer-events","none")})),ji(n).bind("mouseleave",(function(t){ji("#"+e.szId+"canvas_draw0").css("pointer-events","none")}))}))}createWindows(e,t){var i=this;e&&t&&(i.iWidth=e,i.iHeight=t);let n=i.iWidth,a=i.iHeight,o=i.iWidth-n-4,r=i.iHeight-a-4,s=i.iWidth-n,l=i.iHeight-a,d=1;"string"===typeof this.szId?i.oJSPlugin=ji("#"+this.szId):i.oJSPlugin=this.szId;let c='<div class="'+this.szId+'parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">',u=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(u)for(let h=0;h<1;h++){e=o+(h%d===d-1?n:0),t=r+(h+d>=Math.pow(d,2)?a:0);let i=s+(h%d===d-1?n:0),u=l+(h+d>=Math.pow(d,2)?a:0);i*=2,u*=2,c+='<div style="transform: scale(0.5);-webkit-transform: scale(0.5);-webkit-transform-origin:0 0;text-align:left;transform-origin:0 0; width:'+i+"px;height:"+u+'px;"><div style="float:left; background-color: '+this.oStyle.background+'; position: relative; width:100%; height:100%;"><canvas id="'+this.szId+"canvas"+h+'" class="'+this.szId+'play-window" wid="'+h+'" width="'+i+'" height="'+u+'"></canvas>'+(0===h?'<img style="display:none;" id="playImg'+h+'" src="">':"")+'<canvas id="'+this.szId+"canvas_draw"+h+'"  class="'+this.szId+'draw-window" style="position:absolute; top:0; left:0;" wid="'+h+'" width='+e+" height="+t+"></canvas></div></div>"}else for(let h=0;h<1;h++){e=o+(h%d===d-1?n:0),t=r+(h+d>=Math.pow(d,2)?a:0);let i=s+(h%d===d-1?n:0),u=l+(h+d>=Math.pow(d,2)?a:0);c+='<div id="'+this.szId+"-container-"+h+'" style="float:left; background-color: '+this.oStyle.background+"; position: relative; width: "+i+"px; height: "+u+'px;"><canvas id="'+this.szId+'-player" class="'+this.szId+'play-window" wid="'+h+'" width="'+i+'" height="'+u+'"></canvas>'+(0===h?'<img style="display:none;" id="playImg'+h+'" src="">':"")+'<canvas id="'+this.szId+"canvas_draw"+h+'"  class="'+this.szId+'draw-window" style="position:absolute; top:0; left:0;" wid="'+h+'" width='+e+" height="+t+"></canvas></div>"}c+="</div>",i.oJSPlugin.html(c)}JS_Init(){var e=this;if(e.initIng)return;e.initIng=!0;e=this;if(this.bPlay)return!1;const t=new Promise((t,i)=>{window["wasmplayer-"+this.szId]&&(e.bInit=!0,t());const n=new Ni.JSPlayCtrl(`${e.staticPath}/js/PlayCtrlWasm/${this.isSharedArrayBuffer?"hasWorker":"noWorker"}/Decoder.js`,({bGpuSupHardDecHEVC:t})=>{e.bInit=!0,window.JSPlayerModuleLoaded=!0,e.initIng=!1,0==t?console.log("当前GPU不支持H265硬解"):console.log("当前GPU支持H265硬解")},0,"webgl");window["wasmplayer-"+this.szId]=n,t()});return t}PlayM4_openStream(e){const t=window["wasmplayer-"+this.szId],i=this;new Uint8Array(e.buffer);let n=t.JSPlayM4_OpenStream(e,40,4194304),a=t.JSPlayM4_SetDecodeEngine((this.isHardH264||this.isHardH265)&&this.useHardDev?1:0);console.log("JSPlayM4_SetDecodeEngine:::",(this.isHardH264||this.isHardH265)&&this.useHardDev?1:0,a),t.JSPlayM4_SetFirstFrameCallBack(1,()=>{console.log("%cfirst frame display end:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color:blue")}),t.JSPlayM4_SetRunTimeInfoCallBackEx(1,(e,t,n,a,o)=>{i.EventCallback&&i.EventCallback.setRunTimeInfoCallBack&&i.EventCallback.setRunTimeInfoCallBack(e,t,n,a,o)}),console.log("3.打开流 resO:"+n)}_doPlay(e,t,i,n,a){const o=window["wasmplayer-"+this.szId];this.bPlayIng=!0;const r=this;if(r.playURL=t.playURL,r.szUrl=e,document.getElementById(r.szId+"-player")){let e=document.getElementById(r.szId+"-container-0"),t=document.getElementById(this.szId+"-player");console.log(t),t.style="position: absolute;",e.removeChild(t);let i=document.createElement("canvas");document.getElementById(r.szId)?(i.width=document.getElementById(r.szId).offsetWidth,i.height=document.getElementById(r.szId).offsetHeight):(i.width=r.iWidth,i.height=r.iHeight),i.id=r.szId+"-player",e.appendChild(i)}else{let e=document.getElementById(r.szId+"-container-0"),t=document.createElement("canvas");e.appendChild(t),document.getElementById(r.szId)?(t.width=document.getElementById(r.szId).offsetWidth,t.height=document.getElementById(r.szId).offsetHeight):(t.width=r.iWidth,t.height=r.iHeight),t.id=r.szId+"-player"}let s=new Promise((n,a)=>{this.oStreamClient.stopAll(),r.g_port=o.JSPlayM4_GetPort(),console.log("1.获取播放库端口号 g_port:"+r.g_port),this.portAvailable=!1,r.EventCallback&&r.EventCallback.openStreamCallback&&(console.log("开始取流-----v2"),r.EventCallback.openStreamCallback()),r.oStreamClient.openStream(e,t,e=>{if(this.oParams=t,e.errorCode&&"1"!=e.errorCode&&r.EventCallback&&r.EventCallback.pluginErrorHandler&&r.EventCallback.pluginErrorHandler(i,e.errorCode,e),e.bHead){r.EventCallback&&r.EventCallback.getStreamHeaderCallback&&(console.log("完成取流返回流头"),r.EventCallback.getStreamHeaderCallback()),r.PlayM4_openStream(e.buf),r.aHead=new Uint8Array(e.buf),r.secretKey&&o.JSPlayM4_SetSecretKey(r.secretKey);try{const e=(e,t)=>{const i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=t.match(i);return null!=n?unescape(n[2]):null},i=e("begin",t.playURL),n=parseInt(i.slice(0,4)),a=parseInt(i.slice(4,6)),r=parseInt(i.slice(6,8)),s=parseInt(i.slice(9,11)),l=parseInt(i.slice(11,13)),d=parseInt(i.slice(13,15))+3,c=o.JSPlayM4_SetGlobalBaseTime(n,a,r,s,l,d,0);console.log("设置OSD时间: ",n+":"+a+":"+r+":"+s+":"+l+":"+d+":0"),console.log("设置OSD时间res:",c)}catch(a){console.log("JSPlayM4_SetGlobalBaseTime:",a)}r.bPlay=!0,r.bPlayIng=!1;let i=o.JSPlayM4_SetFrameInfoCallBack(1);if(1!=i){let e=o.JSPlayM4_GetLastError();console.log("resFrameInfoError:"+e)}o.JSPlayM4_RenderPrivateData(4,1),this.firstFlag=!0,this.firstGetData=!0,o.JSPlayM4_FEC_SetCanvasID(this.FECSplitIds);let s=o.JSPlayM4_Play(r.szId+"-player");this.canvasFECSubPort.set(r.szId+"-player",{...Yi}),console.log("4.开始播放 resP:"+s,r.szId+"-player"),n(s)}else{if(this.firstGetData&&(this.firstGetData=!1,r.EventCallback&&r.EventCallback.getVideoStreamCallback&&r.EventCallback.getVideoStreamCallback()),this.firstFlag){let e=o.JSPlayM4_GetFrameInfo(),t=e.width,i=e.height;this.nWidth=t,this.nHeight=i,t&&(r.EventCallback&&r.EventCallback.appearFirstFrameCallback&&(console.log("出现首帧画面（播放成功）------多线程"),r.EventCallback.appearFirstFrameCallback()),r.EventCallback&&r.EventCallback.averageStreamSuccessCallback&&r.EventCallback.averageStreamSuccessCallback(),console.log("首帧展示",t,i),this.firstFlag=!1)}let t=new Uint8Array(e.buf);e.statusString?r.EventCallback&&r.EventCallback.pluginErrorHandler&&r.EventCallback.pluginErrorHandler(0,1001,e):e.type&&"exception"===e.type&&r.EventCallback&&r.EventCallback.pluginErrorHandler&&r.EventCallback.pluginErrorHandler(0,1002,e),o.JSPlayM4_InputData(t,t.length),t=null}r.szStorageUUID&&r.oStorageManager.inputData(r.szStorageUUID,e.buf)},(function(){r.bPlay&&r.EventCallback&&r.EventCallback.pluginErrorHandler&&r.EventCallback.pluginErrorHandler(i,1003),r.bPlayIng=!1,a()})).then(e=>{r.szStreamUUID=e,r.oStreamClient.startPlay(e).then(()=>{let e=o.JSPlayM4_SetStreamOpenMode(1);console.log("2.设置流模式 resSSOM:"+e)}).catch(e=>{console.log("err",e),r.bPlayIng=!1,a(e.oError)})},(function(e){r.bPlayIng=!1,r._doRelease(),a(e)}))});return s}JSPlayM4_SetDecodeEngine(e){this.useHard=e}JS_Play(e="",t={playURL:""},i,n,a){return new Promise((o,r)=>{let s=setInterval(()=>{window.JSPlayerModuleLoaded&&(clearInterval(s),this._doPlay(e,t,i,n,a).then(e=>{o(e)}).catch(e=>{r(e)}))},50)})}JS_SetSecretKey(e,t){const i=window["wasmplayer-"+this.szId];console.log("secretKey:::",t),this.secretKey=t;let n=i.JSPlayM4_SetSecretKey(t);console.log("resSetSecretKey："+n)}JS_OpenSound(){const e=window["wasmplayer-"+this.szId];let t=e.JSPlayM4_PlaySound();return 1===t&&(this.bPlaySound=1),t}JS_CloseSound(){const e=window["wasmplayer-"+this.szId];let t=e.JSPlayM4_StopSound();return 1===t&&(this.bPlaySound=-1),t}JS_Enable3DZoom(e,t){if(!this.bPlay)return-1;const i=window["wasmplayer-"+this.szId],n=i.JSPlayM4_GetFrameInfo();return this.JSPlayM4_SetDisplayRegion(0,n.width,0,n.height),ji("."+this.szId+"draw-window").unbind(),this.fCallback=t,this.esCanvas=new zi(this.szId+"canvas_draw0"),this.esCanvas.setShapeType("Rect"),this.esCanvas.setDrawStyle("#ff0000","",0),this.esCanvas.setDrawStatus(!0,(function(e){t(e)})),this.b3DZoom=!0,0}JS_Disable3DZoom(){return this.bPlay?(this.esCanvas.setDrawStatus(!1),this.b3DZoom=!1,0):-1}JS_StartSave(e,t=""+(new Date).getTime()){this.oStorageManager.startRecord(t+".mp4",this.aHead,2,0,{cbEventHandler:function(e){console.log("录制错误",e)},iPackage:0}).then(e=>{this.szStorageUUID=e},(function(){}))}JS_StopSave(){this.oStorageManager.stopRecord(this.szStorageUUID).then(()=>{this.szStorageUUID=""},(function(e){console.log("iError",e)}))}_JSPlayM4_GetFrameInfo(){const e=window["wasmplayer-"+this.szId];let t=e.JSPlayM4_GetFrameInfo(),i=t.width,n=t.height;console.log("width:"+i+",height:"+n);let a=t.year,o=t.month,r=t.day,s=t.hour,l=t.minute,d=t.second,c=t.milliseconds;return console.log("OSD时间："+a+"-"+o+"-"+r+"-"+s+"-"+l+"-"+d+"-"+c),{width:i,height:n,year:a,month:o,day:r,hour:s,minute:l,second:d}}_JSPlayM4_SetDisplayRegion(e,t,i,n,a=!0){const o=this;new Promise((r,s)=>{const l=window["wasmplayer-"+this.szId],d=l.JSPlayM4_SetDisplayRegion(this.szId+"-player",o.iWidth*e/o.nWidth,o.iWidth*t/o.nWidth,o.iHeight*i/o.nHeight,o.iHeight*n/o.nHeight,!a,!1);console.log("oFrameInfo:",o.nWidth,o.nHeight),console.log("canvasInfo:",o.iWidth,o.iHeight),console.log("SetDisplayRegionRes:",d,this.szId+"-player",o.iWidth*e/o.nWidth,o.iWidth*t/o.nWidth,o.iHeight*i/o.nHeight,o.iHeight*n/o.nHeight),r({code:0,data:d})})}JS_SetFrameInfoCallBack(e){const t=window["wasmplayer-"+this.szId];let i=t.JSPlayM4_SetFrameInfoCallBack(this.g_port,e);if(1!=i){let e=t.JSPlayM4_GetLastError(this.g_port);console.log("resFrameInfoError:"+e)}console.log("resFCB:"+i)}JS_CapturePicture(e,t,i,n,a){const o=window["wasmplayer-"+this.szId],r=e=>{const t=new Uint8Array(e);let i="";for(let n=0;n<t.length;n++)i+=String.fromCharCode(t[n]);return"data:image/jpeg;base64,"+window.btoa(i)};function s(e){-1===t.indexOf(".jpeg")&&(t+=".jpeg"),n&&n({fileName:t,fileUint8Array:e,base64:r(e)})}!this.bPlay&&this.bPause&&this.tmpCapturePictureData&&reject({code:-1,msg:"暂停状态下无法截图"});let l,d=o.JSPlayM4_GetFrameInfo();this.nWidth=d.width,this.nHeight=d.height;const c=o.JSPlayM4_GetJPEG((e,i)=>{l=new Promise(e?(a,l)=>{let d=new Uint8Array(i);d.set(e.subarray(0,i)),s(e),n||o._downloadFile(d,""+(t||"capturePicture.jpeg")),a({code:1,data:{fileName:t,fileUint8Array:e,base64:r(e)}})}:(e,t)=>{t({code:-1,msg:"截图失败"})})},0);return 0===c&&(l=new Promise((e,t)=>{t({code:-1,msg:"截图失败"})})),l}JS_GetOSDTime(){const e=window["wasmplayer-"+this.szId],t=new Promise((t,i)=>{let n=e.JSPlayM4_GetFrameInfo(),a=n.year,o=n.month,r=n.day,s=n.hour,l=n.minute,d=n.second;var c=new Date(`${a}-${o}-${r} ${s}:${l}:${d}`).getTime()/1e3;t(c)});return t}JS_Resize(e,t){const i=window["wasmplayer-"+this.szId];console.log("width:"+e+",height:"+t);let n=i.JSPlayM4_SetCanvasSize(e,t);this.iWidth=e,this.iHeight=t,document.getElementById(this.szId).style.height=t+"px",document.getElementById(this.szId).style.width=e+"px";let a=document.getElementById(this.szId+"-player");a&&(a.style.height=t+"px",a.style.width=e+"px");let o=document.getElementById(this.szId+"-container-0");o&&(o.style.height=t+"px",o.style.width=e+"px");let r=document.getElementById(this.szId+"-drawer0");r&&(r.style.height=t+"px",r.style.width=e+"px"),console.log("resSet:"+n)}JS_GetSDKVersion(){const e=window["wasmplayer-"+this.szId];let t=e.JSPlayM4_GetSDKVersion();return t.toString(16)}_doRelease(){const e=window["wasmplayer-"+this.szId];let t=e.JSPlayM4_CloseStream(),i=e.JSPlayM4_FreePort();1===i&&(this.portAvailable=!0),console.log("doRelease",t,i),console.log("stop end"),this.bPlay=!1,this.bPlayIng=!1}JS_Stop(){const{szStreamUUID:e}=this,t=window["wasmplayer-"+this.szId];this.szStorageUUID&&this.JS_StopSave();const i=e=>{const t=new Uint8Array(e);var i="";for(let n=0;n<t.length;n++)i+=String.fromCharCode(t[n]);return"data:image/jpeg;base64,"+window.btoa(i)},n=new Promise((n,a)=>{t.JSPlayM4_GetJPEG((e,t)=>{let n=document.getElementById(this.szId+"-container-0"),a=document.getElementById(this.szId+"-player");a&&n.removeChild(a);let o=new Uint8Array(t);o.set(e.subarray(0,t)),this.tmpCapturePictureData=e,null===this.correctType?n.style.backgroundImage=`url(${i(e)})`:n.style.backgroundImage="",n.style.backgroundSize="100% 100%"},0),setTimeout(()=>{var i=this.oStreamClient.stopAll(e);i.then(e=>{console.log("防抖 停止取流成功"),this._colseFECAllSubWnd();let i=t.JSPlayM4_Stop(!1);if(1==i)this._doRelease(),n({resS:i});else{var a=t.JSPlayM4_GetLastError();if(35==a){let e=setInterval(()=>{i?clearInterval(e):(i=t.JSPlayM4_Stop(!1),1==i?(this._doRelease(),n({resS:i})):(a=t.JSPlayM4_GetLastError(),console.log("stop error ",a)))},50)}else console.log("stop - other error, still resolve",a,i),this._doRelease(),n({resS:i,jsPluginErrorCode:a})}}).catch(e=>{console.log("停止取流失败_jsPluginErrorCode",e),this._doRelease();var i=t.JSPlayM4_GetLastError();console.log("停止取流失败_jsPluginErrorCode",i),n({jsPluginErrorCode:i})}),n()},300)});return n}JS_DestroyWorker(){const e=window["wasmplayer-"+this.szId];this._colseFECAllSubWnd();let t=document.getElementById(this.szId+"-container-0"),i=document.getElementById(this.szId+"-player");i&&t.removeChild(i),null!==this.pCanvasData&&(e._free(this.pCanvasData),this.pCanvasData=null),this.pCanvasString=null,console.log("stop end")}JS_Fast(e,t){var i=this.iRate;const n=window["wasmplayer-"+this.szId];if(t)switch(t){case 1:case 2:case 4:i=t;break;case 3:i=.5;break;default:i=this.iRate;break}else switch(this.iRate){case 1:i=2;break;case 2:i=4;break;default:i=this.iRate;break}if(this.oStreamClient.setPlayRate(this.szStreamUUID,i),this.iRate=i,console.log("开启倍速播放,多线程倍速，全解",i),4==i){let e=n.JSPlayM4_SetDecodeThreadNum(8);console.log("SetDecodeThreadNumRes",e)}let a=n.JSPlayM4_Fast();console.log("res",a)}JS_Slow(){var e=this.iRate;switch(this.iRate){case 2:e=1;break;case 4:e=2;break;default:e=this.iRate;break}this.oStreamClient.setPlayRate(this.szStreamUUID,e),this.iRate=e,console.log("开启倍速播放",e)}JS_Speed(e){const t=window["wasmplayer-"+this.szId];this.oStreamClient.setPlayRate(this.szStreamUUID,3!==e?e:.5),3===this.iRate&&(1===e&&t.JSPlayM4_Fast(),2===e&&(t.JSPlayM4_Fast(),t.JSPlayM4_Fast()),4===e&&(t.JSPlayM4_Fast(),t.JSPlayM4_Fast(),t.JSPlayM4_Fast())),1===this.iRate&&(3===e&&t.JSPlayM4_Slow(),2===e&&t.JSPlayM4_Fast(),4===e&&(t.JSPlayM4_Fast(),t.JSPlayM4_Fast())),2===this.iRate&&(1===e&&t.JSPlayM4_Slow(),3===e&&(t.JSPlayM4_Slow(),t.JSPlayM4_Slow()),4===e&&t.JSPlayM4_Fast()),4===this.iRate&&(1===e&&(t.JSPlayM4_Slow(),t.JSPlayM4_Slow()),2===e&&t.JSPlayM4_Slow(),3===e&&(t.JSPlayM4_Slow(),t.JSPlayM4_Slow(),t.JSPlayM4_Slow())),4==e&&t.JSPlayM4_SetDecodeThreadNum(8),this.iRate=e,console.log("开启倍速播放",e)}JS_Seek(e,t,i){let n=new Promise((e,n)=>{const a=window["wasmplayer-"+this.szId];var o=a.JSPlayM4_ResetBuffer(1);console.log("seek 清理缓存",o),this.oStreamClient.seek(this.szStreamUUID,t,i),e()});return n}JSPlayM4_SetPrintLogFlag(){const e=window["wasmplayer-"+this.szId];let t=e.JSPlayM4_SetPrintLogFlag(2);console.log("LogValue:2,resDR:"+t)}JSPlayM4_SetDisplayRegion(e,t,i,n){new Promise((a,o)=>{const r=window["wasmplayer-"+this.szId];let s=r.JSPlayM4_SetDisplayRegion(this.szId+"-player",e,t,i,n,!1,!0);a({code:0,data:s})})}JS_Pause(e,t){if(!this.bPlay)return console.log("当前不是播放状态，无法暂停"),new Promise((e,t)=>{t({code:0,msg:"当前不是播放状态，不需要暂停"})});const i=this,n=window["wasmplayer-"+i.szId];let a=n.JSPlayM4_GetFrameInfo(),o=a.year,r=a.month,s=a.day,l=a.hour,d=a.minute,c=a.second;const u=new Date(`${o}-${r}-${s} ${l}:${d}:${c}`).getTime()/1e3,h=new Date(1e3*u);i.bPauseDate=h.valueOf(),i.bPauseTime=""+o+(r>9?r:"0"+r)+(s>9?s:"0"+s)+(l>9?l:"0"+l)+(d>9?d:"0"+d)+(c>9?c:"0"+c),console.log("this.bPauseDate:::",i.bPauseDate),console.log("this.bPauseTime:::",i.bPauseTime);const x=new Promise((e,a)=>{if(t)i.JS_Stop().then(()=>{i.bPlay=!1,i.bPause=!0,i.bPauseDate=t.valueOf(),e({code:1,msg:"暂停成功",pauseDate:h})}).catch(e=>{a({code:0,msg:"暂停失败"}),console.log("err",e)});else{i.oStreamClient.stopAll();let t=n.JSPlayM4_Pause(1);t?(i.bPlay=!1,i.bPlayIng=!1,i.bPause=!0,i.szStorageUUID&&this.JS_StopSave(),e({pauseDate:h})):a()}});return x}JS_Resume(e){const t=this,i=window["wasmplayer-"+t.szId],n=new Promise((n,a)=>{if(e&&(this.bPauseTime?this.bPauseTime=this.bPauseTime.slice(0,14-e.length)+e:this.bPauseTime=e),-1!==t.playURL.indexOf("playback")&&(t.playURL=t.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,`begin=${t.bPauseTime.slice(0,8)}T${t.bPauseTime.slice(8,14)}Z`)),-1!==t.playURL.indexOf("cloudplayback")&&(t.playURL=t.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+t.bPauseDate)),e)t.JS_Play(t.szUrl,{playURL:t.playURL}).then(e=>{n(e)}).catch(e=>{a(e)});else{let e=t.szUrl;-1!==e.indexOf("playback")&&(e=e.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,`begin=${t.bPauseTime.slice(0,8)}T${t.bPauseTime.slice(8,14)}Z`)),-1!==e.indexOf("cloudplayback")&&(e=e.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+t.bPauseDate)),t.oStreamClient.openStream(e,{playURL:t.playURL},e=>{if(e.errorCode&&"1"!=e.errorCode&&(t.EventCallback&&t.EventCallback.pluginErrorHandler&&t.EventCallback.pluginErrorHandler(t.g_port,e.errorCode,e),a()),e.bHead){t.EventCallback&&t.EventCallback.getStreamHeaderCallback&&t.EventCallback.getStreamHeaderCallback(),t.aHead=new Uint8Array(e.buf),t.secretKey&&i.JSPlayM4_SetSecretKey(t.secretKey);try{const e=(e,t)=>{const i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=t.match(i);return null!=n?unescape(n[2]):null},t=e("begin",oParams.playURL),n=parseInt(t.slice(0,4)),a=parseInt(t.slice(4,6)),o=parseInt(t.slice(6,8)),r=parseInt(t.slice(9,11)),s=parseInt(t.slice(11,13)),l=parseInt(t.slice(13,15))+3;i.JSPlayM4_SetGlobalBaseTime(n,a,o,r,s,l,0)}catch(n){console.log("JSPlayM4_SetGlobalBaseTime:",n)}t.bPlay=!0,t.bPlayIng=!1;let a=i.JSPlayM4_SetFrameInfoCallBack(1);1!=a&&i.JSPlayM4_GetLastError(),i.JSPlayM4_RenderPrivateData(4,1),t.firstFlag=!0,t.firstGetData=!0}else{if(t.firstGetData&&(t.firstGetData=!1,t.EventCallback&&t.EventCallback.getVideoStreamCallback&&t.EventCallback.getVideoStreamCallback()),t.firstFlag){let e=i.JSPlayM4_GetFrameInfo(),n=e.width,a=e.height;t.nWidth=n,t.nHeight=a,n&&(t.EventCallback&&t.EventCallback.appearFirstFrameCallback&&t.EventCallback.appearFirstFrameCallback(),t.EventCallback&&t.EventCallback.averageStreamSuccessCallback&&t.EventCallback.averageStreamSuccessCallback(),t.firstFlag=!1)}let n=new Uint8Array(e.buf);e.statusString?t.EventCallback&&t.EventCallback.pluginErrorHandler&&t.EventCallback.pluginErrorHandler(0,1001,e):e.type&&"exception"===e.type&&t.EventCallback&&t.EventCallback.pluginErrorHandler&&t.EventCallback.pluginErrorHandler(0,1002,e),i.JSPlayM4_InputData(n,n.length),n=null}t.szStorageUUID&&t.oStorageManager.inputData(t.szStorageUUID,e.buf)},(function(){t.bPlay&&t.EventCallback&&t.EventCallback.pluginErrorHandler&&t.EventCallback.pluginErrorHandler(iWndNum,1003),t.bPlayIng=!1,a()})).then(e=>{t.szStreamUUID=e,t.oStreamClient.startPlay(e).then(()=>{let e=i.JSPlayM4_Pause(0);e?(t.bPlay=!0,t.bPlayIng=!0,t.bPause=!1,t.bPauseDate=null,n(e)):a()}).catch(e=>{t.bPlayIng=!1,a(e.oError)})},(function(e){t.bPlayIng=!1,t._doRelease(),a(e)}))}});return n}JS_FECCorrectType(e,t){return this.FECSplitIds=t,this.correctType=e,new Promise((i,n)=>{const a=this._createSplitVideos(e,t),o=a.find(e=>-1===e.code);o||0===a.length?n(a):i(a)})}JS_FECSetParam2D(e,t){const i=window["wasmplayer-"+this.szId];return i.JSPlayM4_FEC_SetParam(e,t)}_createSplitVideos(e,t){const i=this,n=i.szId+"-player";t=n+","+t;const a=t?t.split(","):[],o=window["wasmplayer-"+i.szId],r=[];if(e.correctList&&e.correctList.length>0)for(let l=0;l<e.correctList.length;l++){if(0===l&&e.correctList[l].hidden)continue;if(0===l){s(e.correctList[0]);continue}if(!a[l]||!document.getElementById(a[l])||"CANVAS"!==document.getElementById(a[l]).nodeName)return[];let t=o.JSPlayM4_FEC_GetPort(e.place,e.correctList[l].correctType),n=o.JSPlayM4_FEC_Enable(t),d=o.JSPlayM4_FEC_SetWnd(t,a[l]);const c={upDateType:i._matchUpDateType(e.correctList[l].correctType),fValue:0,fPTZParam:{fPTZPositionX:e.correctList[l].x||0,fPTZPositionY:e.correctList[l].y||0},fPTZZoom:1e-5},u=i.JS_FECSetParam2D(t,c);0===n||0===d||0===u?r.push({code:-1,msg:"失败",port:t,id:a[l]}):(r.push({code:0,msg:"成功",port:t,id:a[l]}),i.canvasFECSubPort.set(a[l],{...Yi,port:t,param2d:c,startPTZPosition:{x:c.fPTZParam.fPTZPositionX,y:c.fPTZParam.fPTZPositionY}}),document.getElementById(a[l]).setAttribute("data-port",t),i._spliceCanvasMouseEvents(a[l],e.correctList[l]))}else s(e);function s(t){const a={upDateType:i._matchUpDateType(t.correctType),fValue:0,fPTZParam:{fPTZPositionX:t.x||0,fPTZPositionY:t.y||0},fPTZZoom:1e-5},{port:s}=i.canvasFECSubPort.get(n);if(void 0===s)return console.log("this canvas not display"),r;const l=o.JSPlayM4_FEC_ResetCorrectType(s,e.place,t.correctType);1===l?(r.push({code:0,msg:"成功",port:s,id:n}),t.correctType<=Vi?i.JS_FECSetParam2D(s,a):t.viewParam&&setTimeout(()=>{"number"===typeof t.viewParam.x&&"number"===typeof t.viewParam.y&&(o.JSPlayM4_FEC_SetViewParam(s,2,t.viewParam.x),o.JSPlayM4_FEC_SetViewParam(s,1,t.viewParam.y)),"number"===typeof t.viewParam.zoom&&o.JSPlayM4_FEC_SetViewParam(s,3,t.viewParam.zoom)},200),i.canvasFECSubPort.set(n,{...Yi,port:s,param2d:a,startPTZPosition:{x:a.fPTZParam.fPTZPositionX,y:a.fPTZParam.fPTZPositionY}}),i._spliceCanvasMouseEvents(n,t)):r.push({code:-1,msg:"失败",port:s,id:n})}return r}_matchUpDateType(e){switch(e){case Vi:return 4;case Ui:return 8}return 2}_spliceCanvasMouseEvents(e,t){if(void 0===e)return;const i=document.getElementById(e);if(null===i)return;const n=this,a=window["wasmplayer-"+n.szId],o=i.getAttribute("id");let r=n.canvasFECSubPort.get(o);if(void 0===r.port)return;const s=i.width,l=i.height;function d(e){const i=[e.clientX,e.clientY];r.diff.y=i[1]-r.start.y;let n=(r.total.y+r.diff.y)/l*2*Math.PI,o=(i[1]-r.lastCorrdsY)/(2*l),d=Math.atan2(r.startPTZPosition.y-.5,r.startPTZPosition.x-.5),c=r.startPTZPosition.x+o*Math.cos(d),u=r.startPTZPosition.y+o*Math.sin(d);r.diff.x=i[0]-r.start.x;let h=(r.total.x+r.diff.x)/s*2*Math.PI,x=Math.sqrt(Math.pow(c-.5,2)+Math.pow(u-.5,2)),f=-h,p=.5+x*Math.cos(f),m=.5+x*Math.sin(f);if(t.correctType<=Vi){switch(t.correctType){case Vi:r.param2d.upDateType=4;break;case Hi:r.param2d.upDateType=4;break;case Ui:r.param2d.upDateType=8;let e=Math.sqrt(Math.pow(p-.5,2)+Math.pow(m-.5,2));if(e>.4)return;break}r.param2d.fValue=h,r.param2d.fPTZParam.fPTZPositionX=p,r.param2d.fPTZParam.fPTZPositionY=m,a.JSPlayM4_FEC_SetParam(r.port,r.param2d)}else t.correctType===Gi&&(a.JSPlayM4_FEC_SetViewParam(r.port,2,h),a.JSPlayM4_FEC_SetViewParam(r.port,1,n))}let c=()=>{};function u(e){r.start.x=e.pageX,r.start.y=e.pageY,r.lastCorrdsY=e.pageY,c=e=>{d(e)},i.addEventListener("mousemove",c)}i.addEventListener("mousedown",u);const h=()=>{null!==c&&(i.removeEventListener("mousemove",c),c=null,r.total.x+=r.diff.x,r.total.y+=r.diff.y)};i.addEventListener("mouseup",h),i.addEventListener("mouseleave",h),i.addEventListener("mouseout",h)}_colseFECAllSubWnd(){if(this.FECSplitIds&&this.canvasFECSubPort){const e=this.FECSplitIds.split(",");for(let t of e)if(t){const e=this.canvasFECSubPort.get(t);if(void 0===e||void 0===e.port)continue;this.canvasFECSubPort.delete(t);const i=window["wasmplayer-"+this.szId];i.JSPlayM4_FEC_Disable(e.port,!0),i.JSPlayM4_FEC_DelPort(e.port)}}}FEC_Set3DViewParam(e){const t=window["wasmplayer-"+this.szId];if(this.FECSplitIds&&this.canvasFECSubPort&&this.correctType){let i=t.JSPlayM4_FEC_SetViewParam(e.port,e.upDateType,e.fValue);return 1===i?Promise.resolve(!0):Promise.reject(!1)}return Promise.reject(void 0)}FEC_Get3DViewParam(e){const t=window["wasmplayer-"+this.szId];return new Promise((i,n)=>{const a=e=>{i(e)};if(this.FECSplitIds&&this.canvasFECSubPort&&this.correctType){let i=t.JSPlayM4_FEC_GetViewParam(e.port,e.upDateType,a);if(1!==i)return n(!1)}return n(void 0)})}}window.JSPluginV3=Wi;var Zi=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function Xi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ji=function(){var e=void 0;return function(t){return t&&(e=t),e}}();(function(){function e(){if(Xi(this,e),Ji())return Ji();if(void 0!==e.unique)return e.unique;e.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var t=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new t,this.writeString=function(e,t,i){for(var n=0;n<i.length;n++)e.setUint8(t+n,i.charCodeAt(n))},this.setBufferToDataview=function(e,t,i){for(var n=0;n<i.length;n++,t++)e.setUint8(t,i[n])},Ji(this)}Zi(e,[{key:"Play",value:function(e,t,i){var n=new ArrayBuffer(44+t),a=new DataView(n),o=i.samplesPerSec,r=i.channels,s=i.bitsPerSample;this.writeString(a,0,"RIFF"),a.setUint32(4,32+2*t,!0),this.writeString(a,8,"WAVE"),this.writeString(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,r,!0),a.setUint32(24,o,!0),a.setUint32(28,2*o,!0),a.setUint16(32,r*s/8,!0),a.setUint16(34,s,!0),this.writeString(a,36,"data"),a.setUint32(40,t,!0),this.setBufferToDataview(a,44,e);var l=this;return this.oAudioContext.decodeAudioData(a.buffer,(function(e){var t=l.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==l.gainNode||l.bSetVolume)&&(l.gainNode=l.oAudioContext.createGain(),l.bSetVolume=!1),l.gainNode.gain.value=l.currentVolume/100,l.gainNode.connect(l.oAudioContext.destination),t.connect(l.gainNode)}),(function(e){return console.log("decode error"),-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return void 0==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return void 0==e&&(e=80),e}}]),window.AudioRenderer=e})();var qi=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join("\n"),Ki=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n");(function(e,t){window.SuperRender=t()})(0,(function(){function e(e){this.canvasElement=document.getElementById(e),this.initContextGL(),this.contextGL&&(this.YUVProgram=this.initProgram(qi,Ki),this.initBuffers(),this.initTextures())}return e.prototype.initContextGL=function(){var e=this.canvasElement,t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(ia){t=null}t&&"function"===typeof t.getParameter||(t=null),this.contextGL=t,console.log("WebGL1.0")},e.prototype.initProgram=function(e,t){var i=this.contextGL,n=i.createShader(i.VERTEX_SHADER);i.shaderSource(n,e),i.compileShader(n),i.getShaderParameter(n,i.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+i.getShaderInfoLog(n));var a=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(a,t),i.compileShader(a),i.getShaderParameter(a,i.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+i.getShaderInfoLog(a));var o=i.createProgram();return i.attachShader(o,n),i.attachShader(o,a),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)||console.log("Program failed to compile: "+i.getProgramInfoLog(o)),i.deleteShader(n),i.deleteShader(a),o},e.prototype.initBuffers=function(){var e=this.contextGL,t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.vertexPosBuffer=t,this.texturePosBuffer=i},e.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e.prototype.initTextures=function(){var e=this.contextGL,t=this.YUVProgram;e.useProgram(t);var i=this.initTexture(),n=e.getUniformLocation(t,"ySampler");e.uniform1i(n,0),this.yTextureRef=i;var a=this.initTexture(),o=e.getUniformLocation(t,"uSampler");e.uniform1i(o,1),this.uTextureRef=a;var r=this.initTexture(),s=e.getUniformLocation(t,"vSampler");e.uniform1i(s,2),this.vTextureRef=r,e.useProgram(null)},e.prototype.SR_DisplayFrameData=function(e,t,i,n,a){if(!(e<=0||t<=0)){var o=this.contextGL;if(null==i)return o.clearColor(0,0,0,0),void o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);var r=this.canvasElement;this.nWindowWidth=r.width,this.nWindowHeight=r.height;var s=this.nWindowWidth,l=this.nWindowHeight;o.clearColor(.8,.8,1,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,s,l),this.updateFrameData(e,t,i,n,a);var d=this.YUVProgram;o.useProgram(d);var c=this.vertexPosBuffer;o.bindBuffer(o.ARRAY_BUFFER,c);var u=o.getAttribLocation(d,"vertexPos");o.enableVertexAttribArray(u),o.vertexAttribPointer(u,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null);var h=this.texturePosBuffer;o.bindBuffer(o.ARRAY_BUFFER,h);var x=o.getAttribLocation(d,"texturePos");o.enableVertexAttribArray(x),o.vertexAttribPointer(x,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.disableVertexAttribArray(u),o.disableVertexAttribArray(x),o.useProgram(null)}},e.prototype.updateFrameData=function(e,t,i,n,a){var o=this.contextGL,r=this.yTextureRef,s=this.uTextureRef,l=this.vTextureRef,d=i;if(e==n&&t==a){var c=e*t,u=d.subarray(0,c);o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,e,t,0,o.LUMINANCE,o.UNSIGNED_BYTE,u);var h=e/2*t/2,x=d.subarray(e*t,e*t+h);o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,l),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,e/2,t/2,0,o.LUMINANCE,o.UNSIGNED_BYTE,x);var f=h,p=d.subarray(e*t+e*t/4,e*t+e*t/4+f);o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,s),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,e/2,t/2,0,o.LUMINANCE,o.UNSIGNED_BYTE,p)}else{c=n*a,u=new Uint8Array(c);for(var m=0;m<a;m++)for(var _=d.subarray(m*e,m*e+n),g=0;g<n;g++)u[m*n+g]=_[g];o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,n,a,0,o.LUMINANCE,o.UNSIGNED_BYTE,u),u=null,_=null;for(h=n/2*a/2,x=new Uint8Array(h),m=0;m<a/2;m++){var v=d.subarray(e*t+m*e/2,e*t+m*e/2+n/2);for(g=0;g<n/2;g++)x[m*n/2+g]=v[g]}o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,l),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,n/2,a/2,0,o.LUMINANCE,o.UNSIGNED_BYTE,x),x=null,v=null;for(f=h,p=new Uint8Array(f),m=0;m<a/2;m++){var y=d.subarray(e*t*5/4+m*e/2,e*t*5/4+m*e/2+n/2);for(g=0;g<n/2;g++)p[m*n/2+g]=y[g]}o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,s),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,n/2,a/2,0,o.LUMINANCE,o.UNSIGNED_BYTE,p),p=null,y=null}},e.prototype.SR_SetDisplayRect=function(e){var t=this.contextGL,i=this.nWindowWidth,n=this.nWindowHeight,a=null;if(e&&i>0&&n>0){var o=e.left/i,r=e.top/n,s=e.right/i,l=e.bottom/n;a=new Float32Array([s,r,o,r,s,l,o,l])}else a=new Float32Array([1,0,0,0,1,1,0,1]);var d=this.texturePosBuffer;t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferSubData(t.ARRAY_BUFFER,0,a),t.bindBuffer(t.ARRAY_BUFFER,null)},e.prototype.SR_Destroy=function(){var e=this.contextGL,t=this.YUVProgram;e.deleteProgram(t);var i=this.vertexPosBuffer,n=this.texturePosBuffer;e.deleteBuffer(i),e.deleteBuffer(n);var a=this.yTextureRef,o=this.uTextureRef,r=this.vTextureRef;e.deleteTexture(a),e.deleteTexture(o),e.deleteTexture(r)},e}));var $i="https://openstatic.ys7.com",Qi="".concat($i,"/ezuikit_js/ezuikit_static/v65/v3"),en="".concat($i,"/ezuikit_js/ezuikit_static/v65/v1"),tn=function(e,t){var i=["theme","standard"],n=["pcLive","pcRec","mobileLive","mobileRec","noData","security","voice","simple","mobileCall","miniRec"];if("undefined"===typeof e)return t.themeData?{templateType:"themeData",templateId:"themeData"}:{templateType:"local",templateId:""};if("string"===typeof e){if(32===e.length)return{templateType:"remote",templateId:e};if(-1!==i.indexOf(e))return"simple"===e&&"undefined"===typeof t.header&&"undefined"===typeof t.footer?{templateType:"local",templateId:""}:{templateType:"iframe",templateId:e};if(-1!==n.indexOf(e))return-1!=t.url.indexOf("rec")&&"simple"!=t.template&&"miniRec"!=t.id?{templateType:"local",templateId:F()?"mobileRec":"pcRec"}:{templateType:"local",templateId:e};if(t&&t.isCall)return{templateType:"invalid",templateId:e}}},nn=function(){var e=window.navigator.userAgent.toLowerCase(),t={sa:/version.*safari/.test(e),ch:/chrome/.test(e),ff:/gecko/.test(e)&&!/webkit/.test(e)};if(F())return!1;if(t.ch){var i=function(){for(var e=window.navigator.userAgent.split(" "),t="",i=0;i<e.length;i++)/chrome/i.test(e[i])&&(t=e[i]);return!!t&&Number(t.split("/")[1].split(".")[0])};return i()>91&&!!window.SharedArrayBuffer}return!1},an=function(){function e(t){var i=this;r(this,e),this.isStoping=!1;var n=t.autoplay,a=void 0===n||n;if((t.template||t.themeData)&&(a=!1),this.params=t,this.autoplay=a,window.EZUIKit[t.id]={state:{EZUIKitPlayer:{init:window.EZUIKit[t.id]&&window.EZUIKit[t.id].state&&window.EZUIKit[t.id].state.EZUIKitPlayer.init||!1,themeInit:window.EZUIKit[t.id]&&window.EZUIKit[t.id].state&&window.EZUIKit[t.id].state.EZUIKitPlayer.themeInit||!1,talkInit:window.EZUIKit[t.id]&&window.EZUIKit[t.id].state&&window.EZUIKit[t.id].state.EZUIKitPlayer.talkInit||!1}}},"iframe"===tn(this.params.template,t).templateType)return new $t.EZUIKitPlayer(t);this.id=t.id,this.width=t.width,this.height=t.height,this.fullScreenWidth=0,this.fullScreenHeight=0,this.isCall=t.isCall||!1,this.isWebConsole=t.isWebConsole||!1,this.callTime=t.callTime||null,this.hangUpCallback=t.hangUpCallback||null,this.isNeedBellRing=!1!==t.isNeedBellRing,this.url=t.url,this.accessToken=t.accessToken,this.deviceSerial=M(t.url).deviceSerial,this.channelNo=M(t.url).channelNo,this.themeId=tn(t.template,t).templateId,this.sourceThemeId=tn(t.template,t).templateId,this.id=t.id,this.audio=!0,this.poster=t.poster,this.speed=1,this.disabledTimeLine=!1,this.disabledPTZ=!1,this.enableSharedArrayBufferGuide=!1,this.capacity=null,this.playTimer=null,this.env={domain:"https://open.ys7.com"},this.isMobile=F(),this.support3DZoom=!1,this.use3DZoom=!1,this.is3DZooming=!1,this.useHardDev="undefined"!==typeof t.useHardDev&&t.useHardDev,this.isInspect=t.isInspect||!1,this.inspectRecordingDuration=t.inspectRecordingDuration||144e5,this.inspectVideoWidth=t.inspectVideoWidth||290,this.inspectVideoHeight=t.inspectVideoHeight||170,this._FECCorrectType=null,this._FECSplitIds="",document.getElementById("".concat(this.id,"-wrap"))&&(document.getElementById("".concat(this.id,"-wrap")).innerHTML="",document.getElementById("".concat(this.id,"-wrap")).id=this.id),this.staticPath=en;var o=!this.useHardDev&&nn()||this.useHardDev&&!this._IsSupHardDecAVC()&&!this._IsSupHardDecHEVC()&&nn()||this.useHardDev&&(this._IsSupHardDecAVC()||this._IsSupHardDecHEVC()||nn());this.isV3=o,o&&(this.staticPath=Qi),"string"===typeof t.staticPath&&(t.staticPath.startsWith("http")?this.staticPath=t.staticPath:this.staticPath=window.location.protocol+"//"+window.location.host+t.staticPath,this.staticPath+=o?"/v3":"/v1"),"undefined"!==typeof t.audio&&(this.audio=t.audio),"undefined"!==typeof t.env&&(this.env=Object.assign(this.env,t.env)),"undefined"!==typeof t.isMobile&&(this.isMobile=t.isMobile),"undefined"!==typeof t.disabledTimeLine&&(this.disabledTimeLine=t.disabledTimeLine),"undefined"!==typeof t.disabledPTZ&&(this.disabledPTZ=t.disabledPTZ),"undefined"!==typeof t.enableSharedArrayBufferGuide&&(this.enableSharedArrayBufferGuide=t.enableSharedArrayBufferGuide);var s=function(){if(nn())console.log("启用多线程解析视频");else{var e=function(){for(var e=navigator.userAgent.split(" "),t="",i=0;i<e.length;i++)/chrome/i.test(e[i])&&(t=e[i]);return!!t&&Number(t.split("/")[1].split(".")[0])};if(!F&&91<e&&i.enableSharedArrayBufferGuide){console.log("提示用户开启谷歌实验室特性");var n="".concat(i.id,"-wrap"),a=document.createElement("div"),r=document.createElement("span");r.innerHTML="您当前浏览器可以开启谷歌实验室多线程特性，获取更好播放体验，避免浏览器卡顿及崩溃,详见",a.appendChild(r);var s=document.createElement("a");s.href="https://open.ys7.com/help/384",s.setAttribute("target","_blank"),a.appendChild(s),s.innerHTML="开启说明",a.id="".concat(i.id,"-guide"),a.style="font-size:12px;color:red;",setTimeout((function(){document.getElementById(n)&&document.getElementById(n).insertBefore(a,document.getElementById(i.id))}),5e3)}}if(i.pluginStatus=new Y(i,i.id),i.videoInitTime=Date.now(),i.videoPlayState=1,window.monitorExtendsInfo={protocol:"ezopen",url:i.url,serial:i.deviceSerial,no:i.channelNo,env:i.env.domain,type:M(i.url).type},window.ezuikitMonitor.report({action:1,logInfo:{pluginVersion:o?"v3":"v1",params:t}}),i.initTime=(new Date).getTime(),i.autoplay){var l=i.initEZUIKitPlayer(t),d=i._getRealUrlPromise(t.accessToken,t.url);Promise.all([l,d]).then((function(e){e[1]?(i.playStartTime=(new Date).getTime(),i._pluginPlay(e[1],(function(){if(1===i.videoPlayState||4===i.videoPlayState){i.videoPlayState=2;var e=Date.now();window.ezuikitMonitor.report({action:2,logInfo:{pluginVersion:i.isV3?"v3":"v1",loadTime:e-i.videoInitTime,loadTimeDesc:{initTime:i.playStartTime-i.videoInitTime,stopTime:0,getWsTime:i.doCreateWsTime-i.playStartTime,createWsTime:e-i.doCreateWsTime}}})}console.log("自动播放成功")}),(function(){console.log("自动播放失败")}))):console.log("promise of one",e),window.EZUIKit[t.id].state.EZUIKitPlayer.init=!0,document.getElementById("".concat(t.id,"canvas_draw0"))&&(document.getElementById("".concat(t.id,"canvas_draw0")).style.border="none")}))["catch"]((function(e){if(console.log("err",e),1===i.videoPlayState||4===i.videoPlayState){i.videoPlayState=3;var t=Date.now();window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:i.isV3?"v3":"v1",loadTime:t-i.videoInitTime,err:e}})}i.Theme&&i.Theme.setDisabled(!0),i.pluginStatus.loadingClear(),i.isInspect?(i.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(i.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:e&&e.msg,btnName:"重试",type:1}),i.Theme.jSPlugin.Zoom&&i.Theme.jSPlugin.Zoom.stopZoom(),i.Theme&&i.Theme.inspect&&i.Theme.inspect.InspectEvent&&i.Theme.inspect.InspectEvent.disableEvidenceBtn()):i.pluginStatus.loadingSetText({text:e&&e.msg||"获取播放地址失败",color:"red"})}))}else{l=i.initEZUIKitPlayer(t);l.then((function(e){console.log("初始化成功",e),window.EZUIKit[t.id].state.EZUIKitPlayer.init=!0,document.getElementById("".concat(t.id,"canvas_draw0"))&&(document.getElementById("".concat(t.id,"canvas_draw0")).style.border="none"),i.initSuccessTime=(new Date).getTime()}))}t.plugin&&-1!==t.plugin.indexOf("talk")&&(i.Talk=new we(i),window.EZUIKit[t.id].state.EZUIKitPlayer.talkInit=!0),i.getDeviceCapacity()};s(),this.play=ii((function(e){return i._play(e)}),500,!0),this.resume=ii((function(e){return i._resume(e)}),500,!0),this.changePlayUrl=ii((function(e,t,n){return i._changePlayUrl(e,t,n)}),500),window.addEventListener("beforeunload",(function(){console.log("退出页面，停止视频流"),i.stop()}))}return l(e,[{key:"_getExplore",value:function(){var e,t={},i=navigator.userAgent.toLowerCase();if((e=i.match(/rv:([\d.]+)\) like gecko/))||(e=i.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=i.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=i.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=i.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=i.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=i.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var n=t.chrome,a=n.indexOf("."),o=Number(n.substring(0,a));return o}return t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari ,it does not support softV2.0 or hard decode","color: red"):t.firefox?console.info("%c1>your browser is Firefox ,it only support soft decode","color: red"):console.info("%c1>your browser does not support play without plugin","color: red"),-1}},{key:"_IsSupHardDecAVC",value:function(e){var t=this._getExplore();return t>=94?(e&&e(!0),!0):(e&&e(!1),!1)}},{key:"_IsSupHardDecHEVC",value:function(e){var t=!1,i=this._getExplore();if(i>=107){var n={codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"};VideoDecoder.isConfigSupported(n).then((function(i){i.supported?(t=!0,e&&e({bSupHardDecHEVC:t})):e&&e({bSupHardDecHEVC:t})}))}else e&&e({bSupHardDecHEVC:t})}},{key:"initEZUIKitPlayer",value:function(e){var t=this,i=e.id,n=e.width,a=void 0===n?600:n,o=e.height,r=void 0===o?400:o;if(!e.width||!e.height){var s=document.getElementById(i).getBoundingClientRect();!e.width&&s.width>0&&(a=s.width),!e.height&&s.height>0&&(r=s.height)}if(this.isInspect&&(this.width-=this.inspectVideoWidth,this.height-=this.inspectVideoHeight,a=this.width,r=this.height),!document.getElementById("".concat(i,"-wrap"))){var l=document.createElement("div");l.id="".concat(i,"-wrap"),l.style="display:inline-block;width:".concat(a,"px;position:relative;vertical-align: bottom;"),document.getElementById(i).parentNode.insertBefore(l,document.getElementById(i)),document.getElementById(i).parentNode.removeChild(document.getElementById(i)),l.innerHTML="<div id=".concat(i,"></div>"),document.getElementById(i).style="display:inline-block;width:".concat(a,"px;height:").concat(r,"px;"),document.getElementById(i).style.verticalAlign="top"}this.themeId&&(console.log(this.themeId),1==e.isCall?this.Theme=new St(this,e.id):1==e.isInspect?this.Theme=new Kt(this):this.Theme=new at(this,e.id),window.EZUIKit[e.id].state.EZUIKitPlayer.themeInit=!0,"function"===typeof this.params.handleThemeChange&&(this.handleThemeChange=this.params.handleThemeChange));var d=new W(this,i);this.Message=d;var c=function(n,o){console.log("开始初始化decoder：",(new Date).getTime());var s,l=t;s=!t.useHardDev&&nn()||t.useHardDev&&!t._IsSupHardDecAVC()&&!t._IsSupHardDecHEVC()&&nn()||t.useHardDev&&(t._IsSupHardDecAVC()||t._IsSupHardDecHEVC()||nn())?new Wi({szId:i,iType:2,iWidth:a,iHeight:r,iMaxSplit:1,iCurrentSplit:1,szBasePath:"",useHardDev:t.useHardDev,isHardH264:t._IsSupHardDecAVC(),isHardH265:t._IsSupHardDecHEVC(),isSharedArrayBuffer:nn(),staticPath:t.staticPath,oStyle:{border:"none",background:"#000000"}}):new window.JSPluginV1({szId:i,iType:2,iWidth:a,iHeight:r,iMaxSplit:1,iCurrentSplit:1,szBasePath:"",staticPath:t.staticPath,oStyle:{border:"none",background:"#000000"}}),t.pluginStatus.loadingStart(i),t.isCall||t.isInspect?t.pluginStatus.loadingSetText({text:"视频加载中"}):"miniRec"==t.themeId?t.pluginStatus.loadingSetText({text:""}):t.pluginStatus.loadingSetText({text:"初始化播放器完成"});var d=!1;s.EventCallback={openStreamCallback:function(){console.log("开启取流---v1"),t.openStreamTime=(new Date).getTime(),d=!1},getStreamHeaderCallback:function(){console.log("完成取流返回流头"),t.getStreamHeaderTime=(new Date).getTime(),d=!1},getVideoStreamCallback:function(){console.log("返回视频流(首次)"),t.getVideoStreamTime=(new Date).getTime(),t.isCall&&t.Theme&&t.Theme.decoderState&&t.Theme.decoderState.state.rejection&&(console.log("挂断/拒绝状态------------stop"),t.stop((function(){t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:t.isMobile,type:2})}))),t.isInspect&&t.Theme.decoderState.state.play&&("map"!==t.Theme.inspectMode&&t.Theme.jSPlugin.Zoom&&setTimeout((function(){t.Theme.jSPlugin.Zoom.startZoom()}),1e3),t.Theme&&t.Theme.inspect&&t.Theme.inspect.InspectEvent&&t.Theme.inspect.InspectEvent.enableEvidenceBtn())},appearFirstFrameCallback:function(){console.log("出现首帧画面（播放成功）"),t.appearFirstFrameTime=(new Date).getTime()},averageStreamSuccessCallback:function(){t.averageStreamSuccessTime=t.initSuccessTime-t.initTime+(t.gotWsUrlTime-t.startGetWsUrlTime)+(t.appearFirstFrameTime-t.openStreamTime),console.log("平均成功取流的出流耗时:",t.averageStreamSuccessTime)},loadEventHandler:function(){},zoomEventResponse:function(){},windowEventSelect:function(e){},pluginErrorHandler:function(e,i,n){if(!(t.isCall&&t.Theme&&t.Theme.decoderState&&t.Theme.decoderState.state.rejection))if(1003===i)console.log("断流"),t.Theme&&t.Theme.setDecoderState({play:!1}),t.pluginStatus.setPlayStatus({play:!1}),s.bPlay||(t.pluginStatus.loadingClear(),t.isCall?t.pluginStatus.loadingSetTextWithBtn({text:"连接断开，请重试",color:"white",btnName:t.isMobile?"重试":"重新加载",isMobile:t.isMobile,type:t.isCall?1:2}):t.isInspect?(t.pluginStatus.loadingSetTextWithBtn({mask:!0,text:"连接断开，请重试",btnName:"重试",type:1}),t.Theme.jSPlugin.Zoom&&t.Theme.jSPlugin.Zoom.stopZoom(),t.Theme&&t.Theme.inspect&&t.Theme.inspect.InspectEvent&&t.Theme.inspect.InspectEvent.disableEvidenceBtn()):t.pluginStatus.loadingSetText({text:"连接断开，请重试",color:"red"})),"function"===typeof t.params.handleError&&t.params.handleError({msg:"连接断开，请重试",retcode:1003,id:t.params.id,type:"handleError"});else if(1!=n.errorCode){var a=Date.now();1===t.videoPlayState||4===t.videoPlayState?(t.videoPlayState=3,window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:t.isV3?"v3":"v1",err:n,loadTime:a-t.videoInitTime}})):2===t.videoPlayState&&(t.videoPlayState=5,window.ezuikitMonitor.report({action:5,logInfo:{pluginVersion:t.isV3?"v3":"v1",err:n,loadTime:a-t.videoInitTime}})),console.log("errorCode----------",n.errorCode);var o=t.errorHander.matchErrorInfo(n.errorCode),r="连接断开，请重试";o&&o.msg?r=o.msg:o&&o.description&&(r=o.description),t.Theme&&t.Theme.setDecoderState({play:!1}),t.pluginStatus.setPlayStatus({play:!1}),t.pluginStatus.loadingClear(),t.isCall?t.pluginStatus.loadingSetTextWithBtn({text:r,color:"white",btnName:t.isMobile?"重试":"重新加载",isMobile:t.isMobile}):t.isInspect?(t.Theme.jSPlugin.Zoom&&t.Theme.jSPlugin.Zoom.stopZoom(),t.pluginStatus.loadingSetTextWithBtn({mask:!0,text:r,btnName:"重试",type:1}),t.Theme&&t.Theme.inspect&&t.Theme.inspect.InspectEvent&&t.Theme.inspect.InspectEvent.disableEvidenceBtn()):t.pluginStatus.loadingSetText({text:r,color:"red"}),"function"===typeof t.params.handleError&&t.params.handleError({msg:r,retcode:n.errorCode,id:t.params.id,type:"handleError"})}else t.pluginStatus.loadingClear(),t.Theme&&t.Theme.setDisabled(!1)},windowEventOver:function(e){},windowEventOut:function(e){},windowEventUp:function(e){},windowFullCcreenChange:function(e){},firstFrameDisplay:function(e,t,i){console.log(t,i),s.JS_SetCanFullScreen(!1)},performanceLack:function(){},mouseEvent:function(e,t,i){},setRunTimeInfoCallBack:function(i,n,a,o,r){5===r&&(l.pluginStatus.loadingClear(),l.isInspect?(l.Theme.jSPlugin.Zoom&&l.Theme.jSPlugin.Zoom.stopZoom(),l.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(t.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:"设备已加密",color:"white",btnName:"重试",type:1})):l.pluginStatus.loadingSetText({text:"设备已加密",color:"red"})),"function"!==typeof t.params.handleError||d||e.handleError({retcode:-1,data:{nRunTimeModule:i,nStrVersion:n,nFrameTimeStamp:a,nFrameNum:o,nErrorCode:r},id:t.params.id,type:"handleRunTimeInfoError"}),d=!0}},t.env={domain:"https://open.ys7.com"},"undefined"!==typeof e.env&&(t.env=Object.assign(t.env,e.env)),"undefined"!==typeof e.handleTalkSuccess&&(t.handleTalkSuccess=e.handleTalkSuccess),"undefined"!==typeof e.handleTalkError&&(t.handleTalkError=e.handleTalkError),t.errorHander=new K,t.jSPlugin=s;var c=setInterval((function(){window.JSPlayerModuleLoaded&&(clearInterval(c),"function"===typeof t.params.handleInitSuccess&&t.params.handleInitSuccess({retcode:0,id:t.params.id,type:"handleInitSuccess"}),n({meta:{retcode:200,msg:"初始化成功"}}))}),50)},u=new Promise(c);return u}},{key:"_getRealUrlPromise",value:function(e,t){var i=this;console.log("开始获取ws播放地址： url => ".concat(t," ").concat(this.accessToken)),this.startGetWsTime=Date.now(),this.startGetWsUrlTime=(new Date).getTime();var n=this.env.domain;this.env&&(n=this.env.domain);var a=function(a,s){var l="",d=n+"/api/lapp/live/url/ezopen",c=new FormData;c.append("ezopen",t),c.append("isFlv","false"),c.append("userAgent",window.navigator.userAgent),c.append("isHttp","false"),c.append("accessToken",e),fetch(d,{method:"POST",body:c}).then((function(e){return e.json()})).then((function(e){if(200==e.code||0==e.retcode){var d="",c="";e.ext&&e.ext.token?(l+=e.data,c=e.ext.token,d=e.data):e.data&&e.data.token&&(l+=e.data.url,c=e.data.token,d=e.data.url);var u=-1!==t.indexOf("live")?"live":"playback";l="live"===u?l+"&ssn="+c+"&auth=1&biz=4&cln=100":l+"&ssn="+c+"&auth=1&cln=100",console.log(l);var h=w("checkCode",l);if(h&&("undefined"!==typeof i.jSPlugin.decoderVersion&&"2.0"===i.jSPlugin.decoderVersion?i.validateCode=h:(console.log("设置密钥",h),i.validateCode=h,i.jSPlugin.JS_SetSecretKey(0,h))),-1!==l.indexOf("playback")){var x=w("begin",d)||w("begin",t),f=w("end",d)||w("end",t);if(x)l=l.replace("&begin="+w("begin",d),"&begin="+o(x,"000000")),w("begin",l)||(l+="&begin="+o(x,"000000"));else{var p=new Date;l=l+"&begin="+p.Format("yyyyMMdd")+"T000000Z"}if(f?(l=l.replace("&end="+w("end",d),"&end="+o(f,"235959")),w("end",l)||(l+="&end="+o(f,"235959"))):l=l+"&end="+o(w("begin",l).substr(0,8),"235959"),w("stream",d)||(l=l.replace("stream","&stream")),-1!==t.indexOf(".cloud")){var m=function(e){if(200==e.code){var t=[];if(e.data&&e.data.files&&e.data.files.length>0){var i=e.data.files,n=(new Date).getTime(),o=e.data.isAll;if(o){t=c(i);var r=JSON.stringify(t).replace("\\","");l+="&recSlice="+r.replace("\\","")+"&r="+Math.random(),a(l)}else{var d=function e(){function o(o){if(o.data&&o.data.files&&o.data.files.length>0)if(0==o.data.isAll)o.data.files&&(i=i.concat(o.data.files)),n=o.data.nextFileTime>0?o.data.nextFileTime:(new Date).getTime(),e();else{t=c(i);var r=JSON.stringify(t).replace("\\","");l+="&recSlice="+r.replace("\\","")+"&r="+Math.random(),a(l)}else{t=c(i);r=JSON.stringify(t).replace("\\","");l+="&recSlice="+r.replace("\\","")+"&r="+Math.random(),a(l)}}S.startTime=n,L(b,"POST",S,"",o)};d()}}else s({retcode:-1,msg:"未找到录像片段"})}else s({retcode:-1,msg:"未找到录像片段"});function c(e){var t=[];return e.forEach((function(e,i){0==t.length||e.downloadPath!==t[t.length-1].downloadPath?t.push({downloadPath:e.downloadPath,ownerId:e.ownerId,iStorageVersion:e.iStorageVersion,videoType:e.videoType,iPlaySpeed:0,startTime:e.startTime,endTime:e.endTime}):t[t.length-1].endTime=e.endTime})),t}},_=r(w("begin",l)),g=r(w("end",l)),v=w("serial",l),y=w("chn",l),b=n+"/api/lapp/video/by/time",S={accessToken:i.accessToken,recType:1,deviceSerial:v,channelNo:y,startTime:_,endTime:g,version:"2.0"};L(b,"POST",S,"",m)}else if(-1!==t.indexOf("alarmId")){var C=function(e){if(200==e.code){var t=[];if(e.data){t=n([e.data]);var i=JSON.stringify(t).replace("\\","");l+="&recSlice="+i.replace("\\",""),console.log("realUrl",l,e.data.recType),l=1==e.data.recType?l.replace("/playback","/cloudplayback"):l.replace("/cloudplayback","/playback"),a(l)}}function n(e){var t=[];return e.forEach((function(e,i){0==t.length||e.downloadPath!==t[t.length-1].downloadPath?t.push({downloadPath:e.downloadPath,ownerId:e.ownerId,iStorageVersion:e.iStorageVersion,videoType:e.videoType,iPlaySpeed:0,startTime:e.startTime,endTime:e.endTime}):t[t.length-1].endTime=e.endTime})),console.log("downloadPathArr",t),t}};console.log("进入alarmId回放");var T=w("alarmId",l);_=r(w("begin",l)),g=r(w("end",l)),v=w("serial",l),y=w("chn",l),b=n+"/api/lapp/video/by/id",S={accessToken:i.accessToken,deviceSerial:v,channelNo:y,alarmId:T};L(b,"POST",S,"",C)}else a(l)}else a(l)}else i.Theme&&(i.Theme.setDisabled(!0),i.Theme.setDecoderState({play:!1})),i.pluginStatus.setPlayStatus({play:!1}),i.pluginStatus.loadingClear(),i.isInspect?(i.Theme.jSPlugin.Zoom&&i.Theme.jSPlugin.Zoom.stopZoom(),i.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(i.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:e.msg,color:"white",btnName:"重试",type:1}),i.Theme&&i.Theme.inspect&&i.Theme.inspect.InspectEvent&&i.Theme.inspect.InspectEvent.disableEvidenceBtn()):i.pluginStatus.loadingSetText({text:e.msg,color:"red"}),"function"===typeof i.params.handleError&&i.params.handleError({retcode:e.code,msg:e.msg,id:i.params.id,type:"handleError"}),s(e)}))};return new Promise((function(e,t){return a(e,t)}));function o(e,t){var i=/^[0-9]{8}T[0-9]{6}Z$/;if(i.test(e))return e;if(/[0-9]{8,14}/.test(e)){var n=6-(14-e.length),a=t.length,o=e+t.substring(n,a);return o.slice(0,8)+"T"+o.slice(8)+"Z"}throw new Error("回放时间格式有误，请确认")}function r(e){var t=e.slice(0,4),i=e.slice(4,6),n=e.slice(6,8),a=e.slice(9,11),o=e.slice(11,13),r=e.slice(13,15),s=t+"-"+i+"-"+n+" "+a+":"+o+":"+r;return new Date(s.replace(/-/g,"/")).getTime()}}},{key:"_pluginPlay",value:function(e,t,i){var n=this;if(console.log("执行播放 _pluginPlay",e),!e)return!1;function a(e){var t=e.split("?")[0].replace("/live","").replace("/playback",""),i=(-1===e.indexOf("/live")?-1!==e.indexOf("cloudplayback")?"/cloudplayback?":"/playback?":"/live?")+e.split("?")[1];return-1!==i.indexOf("/playback")&&(i=i.replace("stream=2","stream=1")),{websocketConnectUrl:t,websocketStreamingParam:i}}var o=a(e).websocketConnectUrl;this.env&&this.env.wsUrl&&(o=this.env.wsUrl),this.doCreateWsTime=Date.now(),this.gotWsUrlTime=(new Date).getTime();var r={playURL:a(e).websocketStreamingParam};console.log("播放前 stop 阶段 结束"),this.isStoping=!1;var s=Date.now();console.log("执行播放 ... this.jSPlugin.JS_Play at ",s),this.jSPlugin.JS_Play(o,r,0).then((function(){if(console.log("执行播放 ... this.jSPlugin.JS_Play 播放成功",o,r),console.log("执行播放耗时 ",Date.now()-s),n.isStoping)console.log("现在在播放前 stop 阶段，此次应为无效播放成功触发。不执行后续回调， 此次耗时无效");else{if(n.validateCode&&"undefined"!==typeof n.jSPlugin.decoderVersion&&"2.0"===n.jSPlugin.decoderVersion&&n.jSPlugin.JS_SetSecretKey(0,n.validateCode),n.pluginStatus.loadingClear(),n.pluginStatus.setPlayStatus({play:!0,loading:!1}),n.Theme){if(n.Theme.setDecoderState({play:!0}),!n.isCall&&Object.keys(n.Theme.themeData).length>0)var e=G.findIndex(n.Theme.themeData.footer.btnList,(function(e){return"sound"===e.iconId&&1===e.isrender&&1===e.defaultActive}))>-1;n.audio=e}n.audio&&setTimeout((function(){n.openSound()}),100),"function"===typeof n.params.handleSuccess&&n.params.handleSuccess({retcode:0,id:n.params.id,type:"handleSuccess"}),t(r)}}),(function(e){console.log("err",e);var t="播放失败，请检查设备及客户端网络",a=-1;if(n.jSPlugin.bPlay)return!1;if(e&&e.errorCode){var o=n.errorHander.matchErrorInfo(e.errorCode);n.Theme&&n.Theme.setDisabled(!0),t=o&&o.msg?o.msg:o&&o.description?o.description:"播放失败，请检查设备及客户端网络",a=e.errorCode}n.isCall?n.Theme&&n.Theme.decoderState&&n.Theme.decoderState.state.rejection||(n.pluginStatus.loadingClear(),n.pluginStatus.loadingSetTextWithBtn({text:t,color:"white",btnName:n.isMobile?"重试":"重新加载",isMobile:n.isMobile})):(n.pluginStatus.loadingClear(),n.isInspect?(n.Theme.jSPlugin.Zoom&&n.Theme.jSPlugin.Zoom.stopZoom(),5404===a?document.getElementById("".concat(n.id,"-no-inspect-box"))||n.Theme&&n.Theme.inspectEnding():n.pluginStatus.loadingSetTextWithBtn({mask:!0,text:t,color:"white",btnName:"重试",type:1}),n.Theme&&n.Theme.inspect&&n.Theme.inspect.InspectEvent&&n.Theme.inspect.InspectEvent.disableEvidenceBtn()):n.pluginStatus.loadingSetText({text:t,color:"red"})),"function"===typeof n.params.handleError&&n.params.handleError({retcode:a,msg:t,id:n.params.id,type:"handleError"}),i()}))}},{key:"_play",value:function(e){var t=this;console.log("执行播放 play options.url =>",e),this.pluginStatus.setPlayStatus({play:!1,loading:!0}),this.playStartTime=(new Date).getTime(),e&&("string"===typeof e&&(this.url=e),"string"===typeof e.url&&(this.url=e.url),"string"===typeof e.accessToken&&(this.accessToken=e.accessToken),"string"===typeof M(this.url).deviceSerial&&(this.deviceSerial=M(this.url).deviceSerial),"string"===typeof M(this.url).channelNo&&(this.channelNo=M(this.url).channelNo),!this.Theme||"string"!==typeof e.url&&"string"!==typeof e.accessToken||this.Theme.getDeviceInfo((function(e){})));var i=new Promise((function(e,i){console.log("执行 播放前 stop"),t.isStoping=!0,t.jSPlugin.JS_Stop(0).then((function(){t.stopTime=Date.now(),console.log("播放前 stop 执行成功 this.url => ".concat(t.url," ").concat(t.accessToken)),t._getRealUrlPromise(t.accessToken,t.url).then((function(n){t._pluginPlay(n,(function(i){if(console.log("---------------------播放成功回调"),console.log("this.videoPlayState",t.videoPlayState),1===t.videoPlayState||4===t.videoPlayState){t.videoPlayState=2;var n=Date.now();window.ezuikitMonitor.report({action:2,logInfo:{pluginVersion:t.isV3?"v3":"v1",loadTime:n-t.videoInitTime,loadTimeDesc:{initTime:t.playStartTime-t.videoInitTime,stopTime:t.stopTime-t.playStartTime,getWsTime:t.doCreateWsTime-t.stopTime,createWsTime:n-t.doCreateWsTime}}})}setTimeout((function(){t.pluginStatus.loadingClear(),t.isCall&&t.Theme&&t.Theme.decoderState&&t.Theme.decoderState.state.rejection&&(console.log("挂断/拒绝状态------------stop"),t.stop((function(){t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:t.isMobile,type:2})})))}),500),t.jSPlugin&&t._FECSplitIds&&t._FECCorrectType&&t.jSPlugin.JS_FECCorrectType(t._FECCorrectType,t._FECSplitIds),e(!0)}),(function(){return i(!1)}))}))["catch"]((function(e){var n=Date.now();1===t.videoPlayState||4===t.videoPlayState?(t.videoPlayState=3,window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:t.isV3?"v3":"v1",err:e,loadTime:n-t.videoInitTime}})):2===t.videoPlayState&&(t.videoPlayState=5,window.ezuikitMonitor.report({action:5,logInfo:{pluginVersion:t.isV3?"v3":"v1",err:e,loadTime:n-t.videoInitTime}}));var a=e.msg?e.msg:"播放失败，请检查设备及客户端网络";t.Theme&&t.Theme.setDisabled(!0),t.isCall?t.Theme&&t.Theme.decoderState&&t.Theme.decoderState.state.rejection?e&&20018==e.code?t.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:t.isMobile,type:2}):t.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:t.isMobile,type:2}):e&&20018==e.code?(t.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:t.isMobile,type:2}),!t.isWebConsole&&t.Theme&&t.Theme.call&&t.Theme.call.userNoDevice()):t.pluginStatus.loadingSetTextWithBtn({text:a,color:"white",btnName:t.isMobile?"重试":"重新加载",isMobile:t.isMobile}):t.isInspect?(t.Theme.jSPlugin.Zoom&&t.Theme.jSPlugin.Zoom.stopZoom(),t.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(t.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:a,color:"white",btnName:"重试",type:1}),t.Theme&&t.Theme.inspect&&t.Theme.inspect.InspectEvent&&t.Theme.inspect.InspectEvent.disableEvidenceBtn()):t.pluginStatus.loadingSetText({text:a,color:"red"}),"function"===typeof t.params.handleError&&t.params.handleError({retcode:e.oError?e.oError.errorCode:-1,msg:a,id:t.params.id,type:"handleError"}),i({retcode:e.oError?e.oError.errorCode:-1,msg:a,id:t.params.id,type:"handleError"})}))}))}));return i}},{key:"stop",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.pluginStatus.setPlayStatus({loading:!0}),this.reSetTheme(),this.jSPlugin.JS_Stop(0).then((function(){console.log("停止成功"),e.pluginStatus.setPlayStatus({play:!1,loading:!1}),e.Theme&&e.Theme.setDecoderState({play:!1}),t()}))}},{key:"changeVideoLevel",value:function(e){var t=this.url,i=t;"number"===typeof e&&(i=1===e?t.replace(".live",".hd.live"):t.replace(".hd.live",".live"),this.jSPlugin.playURL=e?this.jSPlugin.playURL.replace("stream=2","stream=1"):this.jSPlugin.playURL.replace("stream=1","stream=2"),console.warn("changeVideoLevel","该方法将不在支持传入number类型的参数，建议使用对象类型的参数")),"object"===o(e)&&("number"===typeof e.streamType&&["sd","hd"].includes(e.level)&&(i="hd"===e.level?t.replace(".live",".hd.live"):t.replace(".hd.live",".live")),this.jSPlugin.playURL=1===e.streamType?this.jSPlugin.playURL.replace("stream=2","stream=1"):this.jSPlugin.playURL.replace("stream=1","stream=2")),this.url=i;var n=this.changePlayUrl({url:i},(function(){}),!1);return C(n)?n:new Promise((function(e){e(n)}))}},{key:"reSetTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.Theme&&this.Theme.Ptz&&(this.Theme.setDecoderState({pantile:!1}),this.Theme.Ptz.hide()),this.Theme&&this.Theme.decoderState.state.recordvideo&&this.Theme.setDecoderState({recordvideo:!1}),e.indexOf("zoom")>-1&&(this.use3DZoom?(this.is3DZooming=!1,this.close3DZoom()):this.Zoom&&this.Zoom.currentScale>1&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1})),this.Theme&&this.Theme.decoderState.state.talk&&(this.stopTalk(),this.Theme.setDecoderState({talk:!1})),this.Theme&&this.Theme.Rec&&!this.Theme.isMobile&&this.Theme.Rec.datepickerHide(),this.Theme&&this.Theme.Rec&&(this.Theme.changeRecSpeed(1),this.Theme.nextRate=1,this.speed=1,this.Theme.setDecoderState({speed:!1}))}},{key:"_changePlayUrl",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.reSetTheme(["zoom"]),this.getDeviceCapacity({accessToken:e.accessToken||this.accessToken,deviceSerial:e.deviceSerial||this.deviceSerial});var a=this.url,o=s(a,e);e.accessToken&&(this.accessToken=e.accessToken,this.deviceSerial=e.deviceSerial,this.channelNo=e.channelNo),this.url=o,this.videoInitTime=Date.now(),this.videoPlayState=1,window.monitorExtendsInfo={protocol:"ezopen",url:this.url,serial:this.deviceSerial,no:this.channelNo,env:this.env.domain,type:M(this.url).type},window.ezuikitMonitor.report({action:4,logInfo:{pluginVersion:this.isV3?"v3":"v1",type:M(this.url).type,params:e}}),i(),this.pluginStatus.loadingStart(this.id),this.pluginStatus.loadingSetText({text:"加载中，请稍后"});var r=new Promise((function(i,a){var r={url:o};return e.accessToken&&(r["accessToken"]=e.accessToken),console.log("切换播放地址 参数 ",r),t.play(r).then((function(){console.log("切换播放地址 play 执行成功 ",t.url,t.accessToken),n&&(e.type?t.Theme&&("rec"==e.type||"cloud.rec"==e.type?t.Theme.changeTheme(t.isMobile?"mobileRec":"pcRec"):"miniRec"==e.type?t.Theme.changeTheme("miniRec"):(t.Theme.changeTheme(t.isMobile?"mobileLive":"pcLive"),t.Theme.Rec.unSyncTimeLine())):t.Theme&&(t.url.indexOf(".rec")>-1?t.Theme.changeTheme(t.isMobile?"mobileRec":"pcRec"):(t.isCall?t.Theme.changeTheme(t.isMobile?"mobileCall":"webCall"):t.Theme.changeTheme(t.themeId),t.Theme.Rec.unSyncTimeLine()))),e&&e.begin&&e.deviceSerial&&t.Theme&&t.Theme.Rec.setDatepickerDate(e.begin),t.Theme&&t.Theme.setDisabled(!1),i(o)}))["catch"]((function(e){a(o),e&&e.msg&&(t.Theme&&t.Theme.setDisabled(!0),t.pluginStatus.loadingClear(),t.isInspect?(t.Theme.jSPlugin.Zoom&&t.Theme.jSPlugin.Zoom.stopZoom(),t.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(t.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:e.msg,color:"white",btnName:"重试",type:1}),t.Theme&&t.Theme.inspect&&t.Theme.inspect.InspectEvent&&t.Theme.inspect.InspectEvent.disableEvidenceBtn()):t.pluginStatus.loadingSetText({text:e.msg,color:"red"}))}))}));function s(e,t){if(t.url)return t.url;console.log("--------------matchInitUrl",e);var i=e.split("/")[4].split(".")[e.split("/")[4].split(".").length-1].split("?")[0];"rec"===i&&-1!==e.indexOf(".cloud.rec")&&(i="cloud.rec"),t.type&&(i="miniRec"==t.type?"rec":t.type);var n=e.split("/")[3];t.deviceSerial&&(n=t.deviceSerial);var a=e.split("/")[4].split(".")[0];t.channelNo&&(a=t.channelNo);var o=2===e.split("/")[2].split("@").length?e.split("/")[2].split("@")[0]:"";"undefined"!==typeof t.validCode&&(o=t.validCode);var r="undefined"===typeof t.hd?-1!==e.indexOf(".hd"):t.hd,s="ezopen://".concat(o?"".concat(o,"@"):"","open.ys7.com/").concat(n,"/").concat(a).concat(r?".hd":"",".").concat(i);return"live"===i||(s="ezopen://".concat(o?"".concat(o,"@"):"","open.ys7.com/").concat(n,"/").concat(a,".").concat(i),t.begin&&t.end?s+="?begin=".concat(t.begin,"&end=").concat(t.end):t.begin?s+="?begin=".concat(t.begin):w("begin",e)&&w("end",e)?s+="?begin=".concat(w("begin",e),"&end=").concat(w("end",e)):w("begin",e)&&(s+="?begin=".concat(w("begin",e)))),s}return r}},{key:"getOSDTime",value:function(){var e=this,t=new Promise((function(t,i){e.jSPlugin.JS_GetOSDTime(0).then((function(i){t({code:0,retcode:0,data:i}),"function"===typeof e.params.getOSDTimeCallBack&&e.params.getOSDTimeCallBack({id:e.id,type:"getOSDTime",code:0,data:i})}))["catch"]((function(t){i({code:-1,retcode:-1,data:t}),"function"===typeof e.params.getOSDTimeCallBack&&e.params.getOSDTimeCallBack({id:e.id,type:"getOSDTime",code:-1,data:-1})}))}));return t}},{key:"capturePicture",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.jSPlugin.JS_CapturePicture(0,e||(new Date).getTime(),"JPEG",i,!!i);if(C(n))return new Promise((function(e,i){n.then((function(i){"function"===typeof t.params.capturePictureCallBack&&t.params.capturePictureCallBack({id:t.id,type:"capturePicture",code:0});var n={id:t.id,code:0,data:i.data,type:"handleCapturePicture"};"function"===typeof t.params.handleCapturePicture&&t.params.handleCapturePicture(n),e(n)}),(function(e){"function"===typeof t.params.capturePictureCallBack&&t.params.capturePictureCallBack({id:t.id,type:"capturePicture",code:-1});var n=Object.assign({id:t.id,type:"handleCapturePicture",code:-1},e);"function"===typeof t.params.handleCapturePicture&&t.params.handleCapturePicture(n),i(n)}))}))}},{key:"startSave",value:function(e){var t=this,i=this.jSPlugin.JS_StartSave(0,e);return C(i)?("function"===typeof this.params.startSaveCallBack&&i.then((function(){t.params.startSaveCallBack({id:t.id,type:"startSave",code:0})}))["catch"]((function(){t.params.startSaveCallBack({id:t.id,type:"startSave",code:-1})})),i):(this.Theme&&this.Theme.setDecoderState({recordvideo:!0}),new Promise((function(e){e(i)})))}},{key:"stopSave",value:function(){var e=this,t=this.jSPlugin.JS_StopSave(0);return C(t)?("function"===typeof this.params.startSaveCallBack&&t.then((function(){e.params.stopSaveCallBack({id:e.id,type:"stopSave",code:0})}))["catch"]((function(){e.params.stopSaveCallBack({id:e.id,type:"stopSave",code:-1})})),t):(this.Theme&&this.Theme.setDecoderState({recordvideo:!1}),new Promise((function(e){e(t)})))}},{key:"openSound",value:function(){var e=this.jSPlugin.JS_OpenSound(0);return console.log("打开声音",e),C(e)?e:(this.Theme&&this.Theme.setDecoderState({sound:!0}),"function"===typeof this.params.openSoundCallBack&&this.params.openSoundCallBack({id:this.id,type:"openSound",code:e}),new Promise((function(t){t(e)})))}},{key:"closeSound",value:function(){var e=this.jSPlugin.JS_CloseSound(0);return C(e)?e:(this.Theme&&this.Theme.setDecoderState({sound:!1}),"function"===typeof this.params.closeSoundCallBack&&this.params.closeSoundCallBack({id:this.id,type:"closeSound",code:e}),new Promise((function(t){t(e)})))}},{key:"enableZoom",value:function(){var e=this.jSPlugin.JS_EnableZoom(0);return C(e)?e:new Promise((function(t){t(e)}))}},{key:"closeZoom",value:function(){var e=this.jSPlugin.JS_DisableZoom(0);return C(e)?e:new Promise((function(t){t(e)}))}},{key:"enable3DZoom",value:function(){var e=this;if(!this.use3DZoom)return new Promise((function(e,t){t({code:-1,msg:"未启用3D定位功能"})}));function t(e,t){if(!e||!e.startPos||!e.endPos)return-1;var i=e.startPos[0],n=e.startPos[1],a=e.endPos[0],o=e.endPos[1];return t?a>i&&o<n?1:a<i&&o>n?0:-1:a>i&&o>n?1:a<i&&o<n?0:-1}function i(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(!e||!t||!i||!i.startPos||!i.endPos)return-1;var a=i.startPos[0],o=i.startPos[1],r=i.endPos[0],s=i.endPos[1],l=Math.abs(r-a),d=Math.abs(s-o),c=parseInt((a+r)/2),u=parseInt((o+s)/2),h=Math.round(e*t/(l*d));return console.log("最大缩放倍数：",n),console.log("计算缩放倍数：",e*t/(l*d)),console.log("下发缩放倍数：",h>n?n:h),{startPointX:parseInt(a/e*256),startPointY:parseInt(o/t*256),endPointX:parseInt(r/e*256),endPointY:parseInt(s/t*256),zoomRate:h>n?n:h,targetCenterX:c,targetCenterY:u,targetWidth:l,targetHeight:d}}if(this.is3DZooming)return new Promise((function(e,t){t({code:-1,msg:"3D定位已处于开启状态"})}));if(this.isMobile||(this.Zoom&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1})),this.support3DZoom){this.is3DZooming=!0,this.Theme&&this.Theme.setDecoderState({zoom:!0}),document.getElementById("".concat(this.id,"-zoom-content"))&&(document.getElementById("".concat(this.id,"-zoom-content")).title="3D定位");var n=this.jSPlugin.JS_Enable3DZoom(0,(function(n){var a=e.Theme&&e.Theme.decoderState.state.expend&&e.isMobile?e.fullScreenWidth:e.width,o=e.Theme&&e.Theme.decoderState.state.expend&&e.isMobile?e.fullScreenHeight:e.height,r=t(n,e.Theme&&e.Theme.decoderState.state.expend);if(r>-1)try{var s=i(a,o,n,e.capacity&&e.capacity.support_zoomOut_maxTime?e.capacity.support_zoomOut_maxTime:5),l=e.env.domain+"/api/v3/das/device/3d/zoom?accessToken=".concat(e.accessToken,"&deviceSerial=").concat(M(e.url).deviceSerial,"&channelNo=").concat(M(e.url).channelNo,"&command=").concat(0==r?9:8,"&zoomTimes=").concat(s.zoomRate,"&startPointX=").concat(s.startPointX,"&startPointY=").concat(s.startPointY,"&endPointX=").concat(s.endPointX,"&endPointY=").concat(s.endPointY,"&length=").concat(parseInt(o),"&width=").concat(parseInt(a),"&midPointX=").concat(s.targetCenterX,"&midPointY=").concat(s.targetCenterY,"&lengthX=").concat(s.targetWidth,"&lengthY=").concat(s.targetHeight);fetch(l,{method:"POST"}).then((function(e){return e.json()})).then((function(t){200!=t.code&&e.pluginStatus.loadingSetText({text:t.msg,color:"red",delayClear:2e3})}))["catch"]((function(t){e.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})}))}catch(d){e.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})}}));return this.Zoom=new Ze(this),C(n)?n:new Promise((function(e){e(n)}))}return this.is3DZooming=!1,document.getElementById("".concat(this.id,"-zoom-content"))&&(document.getElementById("".concat(this.id,"-zoom-content")).title="电子放大"),new Promise((function(e,t){t({code:-1,msg:"当前设备不支持3D定位功能"})}))}},{key:"close3DZoom",value:function(){if(!this.use3DZoom)return new Promise((function(e,t){t({code:-1,msg:"未启用3D定位功能"})}));if(this.is3DZooming){this.Theme&&this.Theme.setDecoderState({zoom:!1});var e=this.jSPlugin.JS_Disable3DZoom(0);return this.Zoom=new Ze(this),this.is3DZooming=!1,C(e)?e:new Promise((function(t){t(e)}))}return new Promise((function(e,t){t({code:-1,msg:"3D定位已处于关闭状态"})}))}},{key:"changeZoomType",value:function(e){var t=this;if(e&&this.capacity&&!this.support3DZoom)return{code:-1,msg:"当前设备不支持开启3D定位功能"};this.is3DZooming?this.close3DZoom():this.Theme&&this.Theme.decoderState.state.zoom&&this.Zoom&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1}),this.use3DZoom=e,this.Zoom=new Ze(this),setTimeout((function(){e?document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="3D定位"):document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="电子放大"),t.isMobile&&e&&t.enable3DZoom()}),500)}},{key:"setPoster",value:function(e){nn()?document.getElementById("".concat(this.id))&&(document.getElementById("".concat(this.id)).style.backgroundImage="url(".concat(e,")"),document.getElementById("".concat(this.id)).style.backgroundSize="100% 100%"):document.getElementById("".concat(this.id,"canvas0"))&&(document.getElementById("".concat(this.id,"canvas0")).style.backgroundImage="url(".concat(e,")"),document.getElementById("".concat(this.id,"canvas0")).style.backgroundSize="cover")}},{key:"reSize",value:function(e,t){var i=0,n=0;if(this.params.height=t,this.params.width=e,this.Theme&&this.Theme.isNeedRenderHeader&&document.getElementById("".concat(this.id,"-headControl"))&&(i=parseInt(document.getElementById("".concat(this.id,"-headControl")).style.height,10)),this.Theme&&this.Theme.isNeedRenderTimeLine&&!this.isMobile&&(n=48),t=t-i-n,this.width=e,this.height=t,document.getElementById("".concat(this.id,"-wrap")).style="width:".concat(e,"px;position:relative;display:inline-block;vertical-align: bottom;"),document.getElementById("".concat(this.id)).style.width=e+"px",document.getElementById("".concat(this.id)).style.height=t+"px",this.jSPlugin&&this.jSPlugin.bPlay)this.jSPlugin&&(this.jSPlugin.iHeight=t,this.jSPlugin.iWidth=e),this.jSPlugin.JS_Resize(e,t);else{document.getElementById("".concat(this.id,"-player"))&&(document.getElementById("".concat(this.id,"-player")).width=e,document.getElementById("".concat(this.id,"-player")).height=t,document.getElementById("".concat(this.id,"-player")).style.width=e+"px",document.getElementById("".concat(this.id,"-player")).style.height=t+"px",document.getElementById("".concat(this.id,"-container-0")).style.height=t+"px");var a=1;if(document.getElementById("".concat(this.id,"canvas0"))){var o=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);o&&(a=2),document.getElementById("".concat(this.id,"canvas0")).style.width=e*a+"px",document.getElementById("".concat(this.id,"canvas0")).style.height=t*a+"px",document.getElementById("".concat(this.id,"canvas0")).width=e*a,document.getElementById("".concat(this.id,"canvas0")).height=t*a,document.getElementById("".concat(this.id,"canvas0")).parentNode.style.width=e*a+"px",document.getElementById("".concat(this.id,"canvas0")).parentNode.style.height=t*a+"px",document.getElementById("".concat(this.id,"canvas_draw0")).height=t*a}this.jSPlugin&&(this.jSPlugin.iHeight=t*a,this.jSPlugin.iWidth=e*a)}}},{key:"fast",value:function(e){var t=this,i=this.speed;if(e){var n=this.jSPlugin.JS_Speed(e);this.Theme&&(this.Theme.changeRecSpeed(e),this.Theme.nextRate=e)}else{if(1===i)i=2;else{if(2!==i)return console.log("当前已经是最大播放倍数"),"function"===typeof this.params.handleError&&this.params.handleError({msg:"播放速度最大为4倍速度",retcode:1003,id:this.id,type:"handleError"}),new Promise((function(e,n){t.speed=i,n({code:-1,data:{speed:i,result:"播放速度最大为4倍速度"}})}));i=4}n=this.jSPlugin.JS_Speed(i);this.Theme&&(this.Theme.changeRecSpeed(i),this.Theme.nextRate=i)}return new Promise((function(e){t.speed=i,e({code:0,data:{speed:i,result:n}})}))}},{key:"slow",value:function(){var e=this,t=this.speed;if(4===t)t=2;else{if(2!==t)return console.log("当前已经是最小播放倍数"),"function"===typeof this.params.handleError&&this.params.handleError({msg:"播放速度最小为1倍速度",retcode:1003,id:this.id,type:"handleError"}),new Promise((function(i,n){e.speed=t,n({code:-1,data:{speed:t,result:"播放速度最小为1倍速度"}})}));t=1}var i=this.jSPlugin.JS_Speed(t);return new Promise((function(n){e.speed=t,n({code:0,data:{speed:t,result:i}})}))}},{key:"seek",value:function(e,t){var i=this.url,n=(w("begin",i)||(new Date).Format("yyyyMMdd")).substr(0,8);if(t=a(n,"235959"),6===e.length)e=a(n,e);else{if(16!==e.length)return"function"===typeof this.params.handleError&&this.params.handleError({msg:"seek时间格式错误",retcode:-1,id:this.id,type:"handleError"}),!1;if(e.substr(0,8)!==n)return"function"===typeof this.params.handleError&&this.params.handleError({msg:"seek时间不能跨日期",retcode:-1,id:this.id,type:"handleError"}),!1}function a(e,t){var i=/^[0-9]{8}T[0-9]{6}Z$/;if(i.test(e))return e;if(/[0-9]{8,14}/.test(e)){var n=6-(14-e.length),a=t.length,o=e+t.substring(n,a);return o.slice(0,8)+"T"+o.slice(8)+"Z"}throw new Error("回放时间格式有误，请确认")}var o=this.jSPlugin.JS_Seek(0,e,t);return console.log("seekRT",o),C(o)?o:new Promise((function(e){e(o)}))}},{key:"fullScreen",value:function(){var e=this,t=k(document.getElementById("".concat(this.id)));t.then((function(t){console.log("全屏promise",window.screen.availWidth),e.jSPlugin.JS_Resize(window.screen.availWidth,window.screen.availHeight),"function"===typeof e.params.fullScreenCallBack&&e.params.fullScreenCallBack({id:e.id,type:"fullScreen",code:0})}));var i=function(){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;t||e.jSPlugin.JS_Resize(e.width,e.height),"function"===typeof e.params.fullScreenChangeCallBack&&e.params.fullScreenChangeCallBack({id:e.id,type:"fullScreen",code:t})};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach((function(e){window.addEventListener(e,(function(e){return i()}))}))}},{key:"cancelFullScreen",value:function(){var e=this,t=D();t.then((function(t){console.log("取消全屏",t,e.jSPlugin),e.jSPlugin.JS_Resize(e.width,e.height)}))}},{key:"startTalk",value:function(){this.Talk.startTalk()}},{key:"stopTalk",value:function(){this.Talk.stopTalk()}},{key:"destroy",value:function(){this.Theme&&(this.Theme.decoderState.state.play&&this.stop(),this.Theme=null,window.EZUIKit[this.params.id].state.EZUIKitPlayer.themeInit=!1);var e=this.jSPlugin.JS_DestroyWorker(0);return C(e)?e:new Promise((function(t){t(e)}))}},{key:"getDeviceCapacity",value:function(e){var t=this,i=this.env.domain;this.capacity={},this.env&&(i=this.env.domain);var n=i+"/api/lapp/device/capacity",a=function(e){if(t.support3DZoom=!1,document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="电子放大"),200==e.code&&e.data){if(t.capacity=e.data,t.isMobile&&t.isCall&&(!t.capacity["support_doorcall_playback"]||1!=t.capacity["support_doorcall_playback"])){if(console.log("小窗口initMiniRec-------------设备能力集失败"),t.isWebConsole)return;setTimeout((function(){document.getElementById("".concat(t.jSPlugin.id,"-wrap"))&&document.getElementById("miniRecbox")&&(document.getElementById("".concat(t.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose")),document.getElementById("".concat(t.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox")))}),1500)}t.capacity&&"1"==t.capacity.support_3d_position&&t.url.indexOf(".live")>-1&&(t.support3DZoom=!0,t.params.use3DZoom&&(t.use3DZoom=!0,document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="3D定位")))}},o=e||{accessToken:this.accessToken,deviceSerial:M(this.url).deviceSerial};L(n,"POST",o,"",a)}},{key:"pause",value:function(e){var t=this;return new Promise((function(i,n){t.jSPlugin.JS_CloseSound(0),t.jSPlugin.JS_Pause(0,e).then((function(e){t.Theme&&t.Theme.setDecoderState({play:!1,pauseDate:e.pauseDate}),i()}))["catch"]((function(e){console.log(e),n(e)}))}))}},{key:"_resume",value:function(e){var t=this;return new Promise((function(i,n){t.pluginStatus.setPlayStatus({play:!1,loading:!0}),t.validateCode&&""!=t.validateCode&&t.jSPlugin.JS_SetSecretKey(0,t.validateCode),t.jSPlugin.JS_Resume(e).then((function(e){if(setTimeout((function(){-1!==t.url.indexOf(".rec")&&1!=t.speed&&t.jSPlugin.JS_Speed(t.speed)}),500),t.Theme){t.Theme.setDecoderState({play:!0}),t.fast(t.speed);var n=t.Theme.decoderState.state.sound;n&&setTimeout((function(){t.openSound()}),500)}i(e)}))["catch"]((function(e){console.log("resume err",e),n(e)}))}))}},{key:"getDefinitionList",value:function(){return this.Theme?this.Theme.decoderState.state.hdList:[]}},{key:"getDefinition",value:function(){return!!this.Theme&&this.Theme.decoderState.state.hd}},{key:"setDefinition",value:function(e){var t=this.getDefinitionList().find((function(t){return"string"===typeof e?t.level===e:"object"===o(e)?t.level===e.level:void 0}));t?(this.changeVideoLevel(t),this.Theme&&(this.Theme.setDecoderState({hd:t}),this.Theme.resetMobileZoomStatus()),this.Theme&&this.Theme.decoderState.state.recordvideo&&this.Theme.setDecoderState({recordvideo:!1})):console.log("请输入正确的清晰度")}},{key:"getPtzStatus",value:function(){if(this.Theme)return console.log("当前是否开启云台：",this.Theme.Ptz.showPtz),this.Theme.Ptz.showPtz}},{key:"openPtz",value:function(){return this.Theme?this.isMobile&&this.Theme&&!this.Theme.decoderState.state.expend?(console.log("移动端，非全屏状态不展示云台"),!1):(console.log("显示云台"),this.Theme.setDecoderState({pantile:!0}),void this.Theme.Ptz.show()):{code:-1,msg:"未加载Theme模块，无法操作云台"}}},{key:"closePtz",value:function(){if(!this.Theme)return{code:-1,msg:"未加载Theme模块，无法操作云台"};console.log("隐藏云台"),this.Theme.setDecoderState({pantile:!1}),this.Theme.Ptz.hide()}},{key:"isBrowserFullscreen",value:function(){if(this.Theme)return console.log("当前是否为浏览器全屏状态：",this.Theme.decoderState.state.webExpend),this.Theme.decoderState.state.webExpend}},{key:"browserFullscreen",value:function(){this.Theme&&(this.Theme.webExpend(),this.Theme.setDecoderState({webExpend:!0}))}},{key:"exitBrowserFullscreen",value:function(e,t){var i=this,n=D();n.then((function(n){i.jSPlugin.JS_Resize(e||i.width,t||i.height),i.Theme&&(i.Theme.Rec&&i.Theme.Rec.recAutoSize(),i.Theme.setDecoderState({webExpend:!1}))}))}},{key:"getPlayRate",value:function(){return console.log("当前播放速度：",this.speed),this.speed}},{key:"setMiooroFlip",value:function(e){return"number"!==typeof e?Promise.reject({code:-1,msg:"翻转参数类型错误"}):et(this.env.domain,this.accessToken,this.deviceSerial,this.channelNo,e)}},{key:"setFECCorrectType",value:function(e,t){var i=this;if(!this.capacity||this.capacity&&"1"!==this.capacity.support_fisheye_mode)return Promise.reject({code:-1,msg:"设备不支持鱼眼模式"});if(!this.jSPlugin.JS_FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev)return Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正"});var n=1===e.place?ui:3===e.place?ci:[],a=n.find((function(t){return t.type===e.type&&t.place===e.place}));return a?a.split>0&&void 0===o(t)?Promise.reject({code:-1,msg:"鱼眼矫正类型需要分屏，但是没有传".concat(a.split-1,"个分屏的canvas id")}):(this.jSPlugin.FECSplitIds=t,this.jSPlugin.correctType=a,this._FECCorrectType=a,this._FECSplitIds=t,this.stop().then((function(){return i.play().then((function(e){return 1===a.place&&0===a.correctType||3===a.place&&0===a.correctType?i.Theme.resumeFECBtn():i.Theme.disabledFECBtn(),e}))}))):Promise.reject({code:-1,msg:"鱼眼矫正类型暂时不支持"})}},{key:"setFEC3DViewParam",value:function(e){return!this._FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev?Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正"}):this.jSPlugin.FEC_Set3DViewParam&&this._FECCorrectType&&(3===this._FECCorrectType.place&&this._FECCorrectType.correctType===li||1===this._FECCorrectType.place&&this._FECCorrectType.correctType===di)?this.jSPlugin.FEC_Set3DViewParam(e):Promise.reject({code:-1,msg:"该矫正类型不能设置3D矫正视角参数"})}},{key:"getFEC3DViewParam",value:function(e){return!this._FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev?Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正获取3D矫正视角参数"}):this.jSPlugin.FEC_Set3DViewParam&&this._FECCorrectType&&(3===this._FECCorrectType.place&&this._FECCorrectType.correctType===li||1===this._FECCorrectType.place&&this._FECCorrectType.correctType===di)?this.jSPlugin.FEC_Get3DViewParam(e):Promise.reject({code:-1,msg:"该矫正类型不能获取3D矫正视角参数"})}}]),e}(),on=null;function rn(e,t,i,n){return new WebControl({szPluginContainer:e,iServicePortStart:14510,iServicePortEnd:14519,cbConnectSuccess:t,cbConnectError:i,cbConnectClose:n})}function sn(){null!=on&&(on.JS_DestroyWnd().then((function(){console.log("JS_DestroyWnd")}),(function(){})),on.JS_StopService("window").then((function(){on.JS_Disconnect().then((function(){console.log("JS_Disconnect")}),(function(){}))})))}function ln(e){e.responseMsg.eventName,console.log(e.responseMsg)}function dn(){on.JS_SetWindowControlCallback({cbIntegrationCallBack:ln}),on.JS_StartService("window",{dllPath:"./chain/cloudTransform.dll"}).then((function(){on.JS_CreateWnd("playWnd",900,500).then((function(){console.log("JS_CreateWnd success")}))}))}function cn(){console.log("cbConnectError"),on=null,console.error("确认本地进程是否已安装并开启成功！")}function un(e){console.log("cbConnectClose"),on=null}window.onscroll=function(){null!=on&&on.JS_Resize(900,500)},window.onresize=function(){null!=on&&on.JS_Resize(900,500)},window.onunload=function(){try{on.JS_HideWnd(),sn()}catch(e){console.error(e)}},window.onpagehide=function(){try{on.JS_HideWnd()}catch(e){console.error(e)}};var hn=function(){function e(t){var i=this;r(this,e),d(this,"changeModel",(function(e,t){var n=i;i.switchVideo=parseInt(e),on&&on.JS_RequestInterface({funcName:"ChangeModel",arguments:encodeURI(JSON.stringify({model:e}))}).then((function(i){0==e?n.play({deviceSerial:t.deviceSerial,channelNo:t.channelNo,validateCode:t.validateCode}):n.play({deviceSerial:t.deviceSerial,channelNo:t.channelNo,validateCode:t.validateCode,startTime:t.startTime,endTime:t.endTime})}))})),d(this,"init",(function(e){var t,n=i;if(e.appKey&&e.accessToken){"undefined"!==typeof e.appKey&&(i.appKey=e.appKey),"undefined"!==typeof e.accessToken&&(i.accessToken=e.accessToken),"undefined"!==typeof e.platformId&&(i.platformId=e.platformId);var a=(t={layout:+n.layout,userName:"",waterMark:""},d(t,"waterMark","1"),d(t,"iWndType",0),d(t,"intelligenceEnable",1),d(t,"isRecord",1),d(t,"isSetPos",1),d(t,"motionDetectEnable",0),d(t,"playBackAlarmOverlyingEnable",0),d(t,"response",{code:0,message:null,data:{appKey:e.appKey,ezvizToken:e.accessToken,videoLevel:0,logLevel:3,showMainTool:1,showSubTool:1,waterMark:"1",userName:"openteam",platformId:e.platformId}}),t);console.log("初始化入参",a),window.ezuikitMonitor.report({protocol:"hd",appKey:e.appKey,action:1,logInfo:{argumentsPram:a}}),on.JS_RequestInterface({funcName:"Init",arguments:encodeURI(JSON.stringify(a))}).then((function(e){console.log(e.responseMsg),n.showTips(!0,"视频初始化成功！")}))}else n.showTips(!1,"请输入appkey和token")})),d(this,"play",(function(e){var t=i;if(e.deviceSerial&&e.channelNo){"undefined"!==typeof e.deviceSerial&&(i.deviceSerial=e.deviceSerial),"undefined"!==typeof e.channelNo&&(i.channelNo=e.channelNo),"undefined"!==typeof e.startTime&&e.startTime&&(i.startTime=e.startTime+" 00:00:00"),"undefined"!==typeof e.endTime&&e.endTime&&(i.endTime=e.endTime+" 23:59:59"),"undefined"!==typeof e.validateCode&&e.validateCode&&(i.validateCode=e.validateCode);var n={response:{code:0,message:null,data:{deviceSerial:e.deviceSerial,channelCode:e.channelNo,channelNo:+e.channelNo,codeIsEncrypt:0,validateCode:e.validateCode,deviceClass:t.deviceClass,deviceType:"10222",channelId:"2222222222",channelName:"channelNameTest",storeName:"storeName",storeId:"storeid",startTime:i.startTime,endTime:i.endTime}}};"1"===t.deviceClass?(n.response.data.channelCode=t.channelNo,n.response.data.platformId=t.platformId):n.response.data.channelNo=+t.channelNo,1===i.switchVideo&&(i.startTime&&(n.response.data.startTime=i.startTime),i.endTime&&(n.response.data.endTime=i.endTime)),console.log("预览/回放入参",n),on.JS_RequestInterface({funcName:0===i.switchVideo?"StartPreview":"StartPlayback",arguments:encodeURI(JSON.stringify(n))}).then((function(e){console.log(e.responseMsg),t.showTips(!0,"预览/回放成功！")}))["catch"]((function(e){console.log("开始播放：",e)}))}})),d(this,"showCBInfo",(function(e){i.callbackMessage=i.callbackMessage+JSON.stringify(e)+"\n\n",console.log(i.callbackMessage)})),d(this,"showTips",(function(e,t){})),d(this,"hideVideo",(function(){on.JS_HideWnd()})),d(this,"showVideo",(function(){on.JS_ShowWnd()})),d(this,"GetLayout",(function(){var e=null;on.JS_RequestInterface({funcName:"GetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:e}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"capturePicture",(function(e){var t=null;on.JS_RequestInterface({funcName:"CaptureJPGEx",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:t}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"stop",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;on.JS_RequestInterface({funcName:"StopPlay",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"setLayout",(function(e){var t=parseInt(e);isNaN(t)||0==t||t>=13?console.log("不支持实际布局大于16的窗口数"):(i.layout=t,on.JS_RequestInterface({funcName:"SetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{layout:t}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)})))})),d(this,"setSoundVolumn",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;on.JS_RequestInterface({funcName:"SoundVolumn",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e),volumn:parseInt(t)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"testMute",(function(){var e=parseInt(prompt("请输入窗口ID"));on.JS_RequestInterface({funcName:"MuteOnOff",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:e}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"testSelectWnd",(function(){var e=parseInt(prompt("请输入窗口ID"));on.JS_RequestInterface({funcName:"SelectPlayWnd",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:e}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"setVideoLevel",(function(e,t){on.JS_RequestInterface({funcName:"SetVideoLevel",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:1==i.switchVideo?0:parseInt(e),level:parseInt(t,10)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"startTalk",(function(e){on.JS_RequestInterface({funcName:"StartTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"stopTalk",(function(e){on.JS_RequestInterface({funcName:"StopTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"startSave",(function(e){on.JS_RequestInterface({funcName:"StartRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),d(this,"stopSave",(function(e){on.JS_RequestInterface({funcName:"StopRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),this.appKey="b9a3ad6e8026410095d8252169fa430a",this.accessToken="at.2vtum8873rrcwbrv431qb6pn94dkbv23-8dw2twn355-1u3x014-wrthellzk",this.deviceSerial="C33368372",this.channelNo="1",this.validateCode="",this.deviceClass="0",this.platformId="",this.startTime="",this.endTime="",this.layout=2,this.switchVideo=0,this.tips="调用成功",this.successTip=!1,this.tipsShow=!1,on=rn("playWnd",dn,cn,un)}return l(e,[{key:"alarmMsg",value:function(){var e={request:{body:{alarmTypes:[10800,0,0,0,0],channelId:"066dde0465dd4abaab6afe355baf9d0b",endTime:"1621007999000",startTime:"1620921600000"},callBack:"GetAlarmMsgOrders",majorKey:"",method:"POST",storeId:"",url:"/videoplugin/message/getMessageByTypes"},response:{code:0,message:null,data:[{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620921217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920678e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919513e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919483e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919333e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918913e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918305e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917858e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917658e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917244e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917064e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916668e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916529e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916343e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916081e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915825e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915394e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915197e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914971e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914644e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914533e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914457e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914376e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914284e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913431e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912354e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912275e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912093e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091189e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911839e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091176e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911682e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091127e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911184e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910982e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910781e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910727e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910677e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910647e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910588e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910544e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091041e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091035e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910278e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910124e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909939e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909847e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909817e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909664e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909605e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909575e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090912e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909028e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908999e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908969e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908909e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090888e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908835e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090875e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090872e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908652e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908582e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908552e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908456e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090805e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907918e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907758e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907625e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907386e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907292e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907127e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906828e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906797e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906747e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906717e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906632e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906368e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906013e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905946e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905823e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905622e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905511e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905382e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905352e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905322e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905262e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905196e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090515e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904813e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090473e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209047e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904618e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904286e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904173e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904053e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904023e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903854e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903723e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903643e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903573e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903505e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209032e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090312e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902977e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090286e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090277e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902639e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902517e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902373e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090232e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902253e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902198e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902132e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090194e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090185e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901685e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901638e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090152e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901489e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901424e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901271e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901233e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900915e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900774e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900744e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090065e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090044e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900409e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900175e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900134e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900069e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900016e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899908e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899826e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899756e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899467e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899406e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899265e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899211e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089914e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089911e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089905e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898785e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898666e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898507e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898248e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898218e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898088e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089802e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089796e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089785e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089769e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089763e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16208976e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089757e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089754e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897475e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897369e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897339e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897279e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897237e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897207e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897172e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896985e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896874e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896814e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896783e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896621e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896447e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896358e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896307e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896277e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896214e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089604e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895953e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895921e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895868e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089577e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895704e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089559e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089548e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895377e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895347e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895171e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895136e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895017e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894896e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894738e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894539e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894359e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894213e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894183e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893964e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893934e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893754e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893606e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089353e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893452e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893423e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893357e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892904e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892824e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892764e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892479e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892311e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892281e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892209e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892063e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089187e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089181e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891708e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891655e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891585e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891401e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891257e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891178e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891128e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891033e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089094e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890794e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890714e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890469e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890179e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890108e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890041e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889937e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889635e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889451e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889317e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889227e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889139e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888902e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888837e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888767e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888737e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888706e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888633e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888413e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888353e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888323e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888249e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888162e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888e6},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887859e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887776e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887734e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887692e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887619e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887355e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088732e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887289e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887126e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887066e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088697e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886884e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886804e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886728e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886538e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886396e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886334e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886246e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886111e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885956e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885894e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885696e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885514e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885341e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885306e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885276e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885186e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885114e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885037e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884975e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884945e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884911e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088478e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884696e3}],success:!0}};console.log(e),on.JS_RequestInterface({funcName:"TransFunctionResult",arguments:encodeURI(JSON.stringify(e))})}}]),e}();fn.sessions={},fn.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||fn.extension.isInstalled()}return!0};var xn={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var i=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var n=new Error("NavigatorUserMediaError");n.name="You cancelled the request for permission, giving up...",i(n)}else i(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function fn(e,t){if(void 0===fn.initDone)return e.error("Library not initialized"),{};if(!fn.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(fn.log("Library initialized: "+fn.initDone),e=e||{},e.success="function"==typeof e.success?e.success:fn.noop,e.error="function"==typeof e.error?e.error:fn.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:fn.noop,null===e.server||void 0===e.server)return e.error("Invalid server url"),{};var i=!1,n=null,a={},r=null,s=null,l=0,d=e.server;fn.isArray(d)?(fn.log("Multiple servers provided ("+d.length+"), will use the first that works"),d=null,s=e.server,fn.debug(s)):0===d.indexOf("ws")?(i=!0,fn.log("Using WebSockets to contact Janus: "+d)):(i=!1,fn.log("Using REST API to contact Janus: "+d));var c=e.iceServers;void 0!==c&&null!==c||(c=[{urls:"stun:stun.l.google.com:19302"}]);var u=e.iceTransportPolicy,h=e.bundlePolicy,x=e.ipv6;void 0!==x&&null!==x||(x=!1);var f=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(f=!0===e.withCredentials);var p=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(p=e.max_poll_events),p<1&&(p=1);var m=null;void 0!==e.token&&null!==e.token&&(m=e.token);var _=null;void 0!==e.apisecret&&null!==e.apisecret&&(_=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var g=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(g=e.keepAlivePeriod),isNaN(g)&&(g=25e3);var v=6e4;function y(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(v=e.longPollTimeout),isNaN(v)&&(v=6e4);var b=!1,S=null,C={},w=this,T=0,P={};function E(){if(null!=S)if(fn.debug("Long poll..."),b){var t=d+"/"+S+"?rid="+(new Date).getTime();void 0!==p&&null!==p&&(t=t+"&maxev="+p),null!==m&&void 0!==m&&(t=t+"&token="+encodeURIComponent(m)),null!==_&&void 0!==_&&(t=t+"&apisecret="+encodeURIComponent(_)),fn.httpAPICall(t,{verb:"GET",withCredentials:f,success:k,timeout:v,error:function(t,i){if(fn.error(t+":",i),T++,T>3)return b=!1,void e.error("Lost connection to the server (is it down?)");E()}})}else fn.warn("Is the server down? (connected=false)")}function k(e,t){if(T=0,i||void 0===S||null===S||!0===t||E(),i||!fn.isArray(e))if("keepalive"!==e["rtcgw"])if("ack"!==e["rtcgw"])if("success"!==e["rtcgw"])if("trickle"===e["rtcgw"]){var a=e["sender"];if(void 0===a||null===a)return void fn.warn("Missing sender...");var o=C[a];if(void 0===o||null===o)return void fn.debug("This handle is not attached to this session");var r=e["candidate"];fn.debug("Got a trickled candidate on session "+S),fn.debug(r);var s=o.webrtcStuff;s.pc&&s.remoteSdp?(fn.debug("Adding remote candidate:",r),r&&!0!==r.completed?s.pc.addIceCandidate(r):s.pc.addIceCandidate(fn.endOfCandidates)):(fn.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),s.candidates||(s.candidates=[]),s.candidates.push(r),fn.debug(s.candidates))}else{if("webrtcup"===e["rtcgw"]){fn.debug("Got a webrtcup event on session "+S),fn.debug(e);a=e["sender"];if(void 0===a||null===a)return void fn.warn("Missing sender...");o=C[a];return void 0===o||null===o?void fn.debug("This handle is not attached to this session"):void o.webrtcState(!0)}if("hangup"===e["rtcgw"]){fn.debug("Got a hangup event on session "+S),fn.debug(e);a=e["sender"];if(void 0===a||null===a)return void fn.warn("Missing sender...");o=C[a];if(void 0===o||null===o)return void fn.debug("This handle is not attached to this session");o.webrtcState(!1,e["reason"]),o.hangup()}else if("detached"===e["rtcgw"]){fn.debug("Got a detached event on session "+S),fn.debug(e);a=e["sender"];if(void 0===a||null===a)return void fn.warn("Missing sender...");o=C[a];if(void 0===o||null===o)return;o.detached=!0,o.ondetached(),o.detach()}else if("media"===e["rtcgw"]){fn.debug("Got a media event on session "+S),fn.debug(e);a=e["sender"];if(void 0===a||null===a)return void fn.warn("Missing sender...");o=C[a];if(void 0===o||null===o)return void fn.debug("This handle is not attached to this session");o.mediaState(e["type"],e["receiving"])}else if("slowlink"===e["rtcgw"]){fn.debug("Got a slowlink event on session "+S),fn.debug(e),console.log("json的所有信息打印-----------------------------------------------",e);a=e["sender"];if(void 0===a||null===a)return void fn.warn("Missing sender...");o=C[a];if(void 0===o||null===o)return void fn.debug("This handle is not attached to this session");o.slowLink(e["uplink"],e["lost"])}else{if("error"===e["rtcgw"]){fn.error("Ooops: "+e["error"].code+" "+e["error"].reason),fn.debug(e);h=e["transaction"];if(null!==h&&void 0!==h){x=P[h];null!==x&&void 0!==x&&x(e),delete P[h]}return}if("event"===e["rtcgw"]){fn.debug("Got a plugin event on session "+S),fn.debug(e);a=e["sender"];if(void 0===a||null===a)return void fn.warn("Missing sender...");var l=e["plugindata"];if(void 0===l||null===l)return void fn.warn("Missing plugindata...");fn.debug("  -- Event is coming from "+a+" ("+l["plugin"]+")");var d=l["data"];fn.debug(d);o=C[a];if(void 0===o||null===o)return void fn.warn("This handle is not attached to this session");var c=e["jsep"];void 0!==c&&null!==c&&(fn.debug("Handling SDP as well..."),fn.debug(c));var u=o.onmessage;null!==u&&void 0!==u?(fn.debug("Notifying application..."),u(d,c)):fn.debug("No provided notification callback")}else{if("timeout"===e["rtcgw"])return fn.error("Timeout on session "+S),fn.debug(e),void(i&&n.close(3504,"Gateway timeout"));fn.warn("Unknown message/event  '"+e["rtcgw"]+"' on session "+S),fn.debug(e)}}}else{fn.debug("Got a success on session "+S),fn.debug(e);var h=e["transaction"];if(null!==h&&void 0!==h){var x=P[h];null!==x&&void 0!==x&&x(e),delete P[h]}}else{fn.debug("Got an ack on session "+S),fn.debug(e);var h=e["transaction"];if(null!==h&&void 0!==h){var x=P[h];null!==x&&void 0!==x&&x(e),delete P[h]}}else fn.vdebug("Got a keepalive on session "+S);else for(var f=0;f<e.length;f++)k(e[f],!0)}function R(){if(null!==d&&i&&b){r=setTimeout(R,g);var e={rtcgw:"keepalive",session_id:S,transaction:fn.randomString(12)};null!==m&&void 0!==m&&(e["token"]=m),null!==_&&void 0!==_&&(e["apisecret"]=_),n.send(JSON.stringify(e))}}function I(e){var o=fn.randomString(12),c={rtcgw:"create",transaction:o,token:"testtoken"};if(c=Object.assign({},c,t),e["reconnect"]&&(b=!1,c["rtcgw"]="claim",c["session_id"]=S,n&&(n.onopen=null,n.onerror=null,n.onclose=null,r&&(clearTimeout(r),r=null))),null!==m&&void 0!==m&&(c["token"]=m),null!==_&&void 0!==_&&(c["apisecret"]=_),null===d&&fn.isArray(s)&&(d=s[l],0===d.indexOf("ws")?(i=!0,fn.log("Server #"+(l+1)+": trying WebSockets to contact Janus ("+d+")")):(i=!1,fn.log("Server #"+(l+1)+": trying REST API to contact Janus ("+d+")"))),i)for(var u in n=fn.newWebSocket(d,"rtcgw-protocol"),a={error:function(){if(fn.error("Error connecting to the Janus WebSockets server... "+d),fn.isArray(s)&&!e["reconnect"])return l++,l==s.length?void e.error("Error connecting to any of the provided Janus servers: Is the server down?"):(d=null,void setTimeout((function(){I(e)}),200));e.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){P[o]=function(t){if(fn.debug(t),"success"!==t["rtcgw"])return fn.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error(t["error"].reason);r=setTimeout(R,g),b=!0,S=t["session_id"]?t["session_id"]:t.data["id"],e["reconnect"]?fn.log("Claimed session: "+S):fn.log("Created session: "+S),fn.sessions[S]=w,e.success(S)},n.send(JSON.stringify(c))},message:function(e){k(JSON.parse(e.data))}},a)n.addEventListener(u,a[u]);else fn.httpAPICall(d,{verb:"POST",withCredentials:f,body:c,success:function(t){if(fn.debug(t),"success"!==t["rtcgw"])return fn.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error(t["error"].reason);b=!0,S=t["session_id"]?t["session_id"]:t.data["id"],e["reconnect"]?fn.log("Claimed session: "+S):fn.log("Created session: "+S),fn.sessions[S]=w,E(),e.success()},error:function(t,i){if(fn.error(t+":",i),fn.isArray(s)&&!e["reconnect"])return l++,l==s.length?void e.error("Error connecting to any of the provided Janus servers: Is the server down?"):(d=null,void setTimeout((function(){I(e)}),200));""===i?e.error(t+": Is the server down?"):e.error(t+": "+i)}})}function D(t){t=t||{},t.success="function"==typeof t.success?t.success:fn.noop;var o=!0;void 0!==t.asyncRequest&&null!==t.asyncRequest&&(o=!0===t.asyncRequest);var s=!0;void 0!==t.notifyDestroyed&&null!==t.notifyDestroyed&&(s=!0===t.notifyDestroyed);var l=!1;if(void 0!==t.cleanupHandles&&null!==t.cleanupHandles&&(l=!0===t.cleanupHandles),fn.log("Destroying session "+S+" (async="+o+")"),!b)return fn.warn("Is the server down? (connected=false)"),void t.success();if(void 0===S||null===S)return fn.warn("No session to destroy"),t.success(),void(s&&e.destroyed());if(l)for(var c in C)z(c,{noRequest:!0});var u={rtcgw:"destroy",transaction:fn.randomString(12)};if(null!==m&&void 0!==m&&(u["token"]=m),null!==_&&void 0!==_&&(u["apisecret"]=_),i){u["session_id"]=S;var h=function(){for(var e in a)n.removeEventListener(e,a[e]);n.removeEventListener("message",x),n.removeEventListener("error",p),r&&clearTimeout(r),n.close()},x=function(i){var n=JSON.parse(i.data);n.session_id==u.session_id&&n.transaction==u.transaction&&(h(),t.success(),s&&e.destroyed())},p=function(i){h(),t.error("Failed to destroy the server: Is the server down?"),s&&e.destroyed()};return n.addEventListener("message",x),n.addEventListener("error",p),void n.send(JSON.stringify(u))}fn.httpAPICall(d+"/"+S,{verb:"POST",async:o,withCredentials:f,body:u,success:function(i){fn.log("Destroyed session:"),fn.debug(i),S=null,b=!1,"success"!==i["rtcgw"]&&fn.error("Ooops: "+i["error"].code+" "+i["error"].reason),t.success(),s&&e.destroyed()},error:function(i,n){fn.error(i+":",n),S=null,b=!1,t.success(),s&&e.destroyed(),pluginHandlesp}})}function M(e){if(e=e||{},e.success="function"==typeof e.success?e.success:fn.noop,e.error="function"==typeof e.error?e.error:fn.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:fn.noop,e.iceState="function"==typeof e.iceState?e.iceState:fn.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:fn.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:fn.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:fn.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:fn.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:fn.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:fn.noop,e.ondata="function"==typeof e.ondata?e.ondata:fn.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:fn.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:fn.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:fn.noop,!b)return fn.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var t=e.plugin;if(void 0===t||null===t)return fn.error("Invalid plugin"),void e.error("Invalid plugin");var a=e.opaqueId,o=e.token?e.token:m,r=fn.randomString(12),s={rtcgw:"attach",plugin:t,opaque_id:a,transaction:r};if(null!==o&&void 0!==o&&(s["token"]=o),null!==_&&void 0!==_&&(s["apisecret"]=_),i)return P[r]=function(i){if(fn.debug(i),"success"!==i["rtcgw"])return fn.error("Ooops: "+i["error"].code+" "+i["error"].reason),void e.error("Ooops: "+i["error"].code+" "+i["error"].reason);var n=i.data["id"];fn.log("Created handle: "+n);var a={session:w,plugin:t,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return t},getVolume:function(){return Y(n,!0)},getRemoteVolume:function(){return Y(n,!0)},getLocalVolume:function(){return Y(n,!1)},isAudioMuted:function(){return W(n,!1)},muteAudio:function(){return Z(n,!1,!0)},unmuteAudio:function(){return Z(n,!1,!1)},isVideoMuted:function(){return W(n,!0)},muteVideo:function(){return Z(n,!0,!0)},unmuteVideo:function(){return Z(n,!0,!1)},getBitrate:function(){return J(n)},getNetworkQuality:function(e){X(n,e)},send:function(e){A(n,e)},data:function(e){F(n,e)},dtmf:function(e){j(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){N(n,!0,e)},createAnswer:function(e){N(n,!1,e)},handleRemoteJsep:function(e){U(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){K(n,!0===e)},detach:function(e){z(n,e)}};C[n]=a,e.success(a)},s["session_id"]=S,void n.send(JSON.stringify(s));fn.httpAPICall(d+"/"+S,{verb:"POST",withCredentials:f,body:s,success:function(i){if(fn.debug(i),"success"!==i["rtcgw"])return fn.error("Ooops: "+i["error"].code+" "+i["error"].reason),void e.error("Ooops: "+i["error"].code+" "+i["error"].reason);var n=i.data["id"];fn.log("Created handle: "+n);var a={session:w,plugin:t,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return t},getVolume:function(){return Y(n,!0)},getRemoteVolume:function(){return Y(n,!0)},getLocalVolume:function(){return Y(n,!1)},isAudioMuted:function(){return W(n,!1)},muteAudio:function(){return Z(n,!1,!0)},unmuteAudio:function(){return Z(n,!1,!1)},isVideoMuted:function(){return W(n,!0)},muteVideo:function(){return Z(n,!0,!0)},unmuteVideo:function(){return Z(n,!0,!1)},getBitrate:function(){return J(n)},getNetworkQuality:function(e){X(n,e)},send:function(e){A(n,e)},data:function(e){F(n,e)},dtmf:function(e){j(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){N(n,!0,e)},createAnswer:function(e){N(n,!1,e)},handleRemoteJsep:function(e){U(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){K(n,!0===e)},detach:function(e){z(n,e)}};C[n]=a,e.success(a)},error:function(e,t){fn.error(e+":",t)}})}function A(e,t){if(t=t||{},t.success="function"==typeof t.success?t.success:fn.noop,t.error="function"==typeof t.error?t.error:fn.noop,!b)return fn.warn("Is the server down? (connected=false)"),void t.error("Is the server down? (connected=false)");var a=C[e];if(null===a||void 0===a||null===a.webrtcStuff||void 0===a.webrtcStuff)return fn.warn("Invalid handle"),void t.error("Invalid handle");var o=t.message,r=t.jsep,s=fn.randomString(12),l={rtcgw:"message",body:o,transaction:s};if(null!==a.token&&void 0!==a.token&&(l["token"]=a.token),null!==_&&void 0!==_&&(l["apisecret"]=_),null!==r&&void 0!==r&&(l.jsep=r),fn.debug("Sending message to plugin (handle="+e+"):"),fn.debug(l),i)return l["session_id"]=S,l["handle_id"]=e,P[s]=function(e){if(fn.debug("Message sent!"),fn.debug(e),"success"===e["rtcgw"]){var i=e["plugindata"];if(void 0===i||null===i)return fn.warn("Request succeeded, but missing plugindata..."),void t.success();fn.log("Synchronous transaction successful ("+i["plugin"]+")");var n=i["data"];return fn.debug(n),void t.success(n)}"ack"===e["rtcgw"]?t.success():void 0!==e["error"]&&null!==e["error"]?(fn.error("Ooops: "+e["error"].code+" "+e["error"].reason),t.error(e["error"].code+" "+e["error"].reason)):(fn.error("Unknown error"),t.error("Unknown error"))},void n.send(JSON.stringify(l));fn.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",withCredentials:f,body:l,success:function(e){if(fn.debug("Message sent!"),fn.debug(e),"success"===e["rtcgw"]){var i=e["plugindata"];if(void 0===i||null===i)return fn.warn("Request succeeded, but missing plugindata..."),void t.success();fn.log("Synchronous transaction successful ("+i["plugin"]+")");var n=i["data"];return fn.debug(n),void t.success(n)}"ack"===e["rtcgw"]?t.success():void 0!==e["error"]&&null!==e["error"]?(fn.error("Ooops: "+e["error"].code+" "+e["error"].reason),t.error(e["error"].code+" "+e["error"].reason)):(fn.error("Unknown error"),t.error("Unknown error"))},error:function(e,i){fn.error(e+":",i),t.error(e+": "+i)}})}function B(e,t){if(b){var a=C[e];if(null!==a&&void 0!==a&&null!==a.webrtcStuff&&void 0!==a.webrtcStuff){var o={rtcgw:"trickle",candidate:t,transaction:fn.randomString(12)};if(null!==a.token&&void 0!==a.token&&(o["token"]=a.token),null!==_&&void 0!==_&&(o["apisecret"]=_),fn.vdebug("Sending trickle candidate (handle="+e+"):"),fn.vdebug(o),i)return o["session_id"]=S,o["handle_id"]=e,void n.send(JSON.stringify(o));fn.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",withCredentials:f,body:o,success:function(e){fn.vdebug("Candidate sent!"),fn.vdebug(e),"ack"===e["rtcgw"]||fn.error("Ooops: "+e["error"].code+" "+e["error"].reason)},error:function(e,t){fn.error(e+":",t)}})}else fn.warn("Invalid handle")}else fn.warn("Is the server down? (connected=false)")}function L(e,t,i,n){var a=C[e];if(null!==a&&void 0!==a&&null!==a.webrtcStuff&&void 0!==a.webrtcStuff){var o=a.webrtcStuff,r=function(e){fn.log("Received message on data channel:",e);var t=e.target.label;a.ondata(e.data,t)},s=function(e){fn.log("Received state change on data channel:",e);var t=e.target.label,i=o.dataChannel[t]?o.dataChannel[t].readyState:"null";if(fn.log("State change on <"+t+"> data channel: "+i),"open"===i){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){for(var n in fn.log("Sending pending messages on <"+t+">:",o.dataChannel[t].pending.length),o.dataChannel[t].pending){var r=o.dataChannel[t].pending[n];fn.log("Sending string on data channel <"+t+">: "+r),o.dataChannel[t].send(r)}o.dataChannel[t].pending=[]}a.ondataopen(t)}},l=function(e){fn.error("Got error on data channel:",e)};o.dataChannel[t]=i||o.pc.createDataChannel(t,{ordered:!1}),o.dataChannel[t].onmessage=r,o.dataChannel[t].onopen=s,o.dataChannel[t].onclose=s,o.dataChannel[t].onerror=l,o.dataChannel[t].pending=[],n&&o.dataChannel[t].pending.push(n)}else fn.warn("Invalid handle")}function F(e,t){t=t||{},t.success="function"==typeof t.success?t.success:fn.noop,t.error="function"==typeof t.error?t.error:fn.noop;var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fn.warn("Invalid handle"),void t.error("Invalid handle");var n=i.webrtcStuff,a=t.text;if(null===a||void 0===a)return fn.warn("Invalid text"),void t.error("Invalid text");var o=t.label?t.label:fn.dataChanDefaultLabel;return n.dataChannel[o]?"open"!==n.dataChannel[o].readyState?(n.dataChannel[o].pending.push(a),void t.success()):(fn.log("Sending string on data channel <"+o+">: "+a),n.dataChannel[o].send(a),void t.success()):(L(e,o,!1,a),void t.success())}function j(e,t){t=t||{},t.success="function"==typeof t.success?t.success:fn.noop,t.error="function"==typeof t.error?t.error:fn.noop;var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fn.warn("Invalid handle"),void t.error("Invalid handle");var n=i.webrtcStuff;if(null===n.dtmfSender||void 0===n.dtmfSender){if(void 0!==n.pc&&null!==n.pc){var a=n.pc.getSenders(),o=a.find((function(e){return e.track&&"audio"===e.track.kind}));if(!o)return fn.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");n.dtmfSender=o.dtmf,n.dtmfSender&&(fn.log("Created DTMF Sender"),n.dtmfSender.ontonechange=function(e){fn.debug("Sent DTMF tone: "+e.tone)})}if(null===n.dtmfSender||void 0===n.dtmfSender)return fn.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var r=t.dtmf;if(null===r||void 0===r)return fn.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var s=r.tones;if(null===s||void 0===s)return fn.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var l=r.duration;null!==l&&void 0!==l||(l=500);var d=r.gap;null!==d&&void 0!==d||(d=50),fn.debug("Sending DTMF string "+s+" (duration "+l+"ms, gap "+d+"ms)"),n.dtmfSender.insertDTMF(s,l,d),t.success()}function z(e,t){t=t||{},t.success="function"==typeof t.success?t.success:fn.noop,t.error="function"==typeof t.error?t.error:fn.noop;var a=!0;void 0!==t.asyncRequest&&null!==t.asyncRequest&&(a=!0===t.asyncRequest);var o=!0;void 0!==t.noRequest&&null!==t.noRequest&&(o=!0===t.noRequest),fn.log("Destroying handle "+e+" (async="+a+")"),K(e);var r=C[e];if(null===r||void 0===r||r.detached)return delete C[e],void t.success();if(o)return delete C[e],void t.success();if(!b)return fn.warn("Is the server down? (connected=false)"),void t.error("Is the server down? (connected=false)");var s={rtcgw:"detach",transaction:fn.randomString(12)};if(null!==r.token&&void 0!==r.token&&(s["token"]=r.token),null!==_&&void 0!==_&&(s["apisecret"]=_),i)return s["session_id"]=S,s["handle_id"]=e,n.send(JSON.stringify(s)),delete C[e],void t.success();fn.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",async:a,withCredentials:f,body:s,success:function(i){fn.log("Destroyed handle:"),fn.debug(i),"success"!==i["rtcgw"]&&fn.error("Ooops: "+i["error"].code+" "+i["error"].reason),delete C[e],t.success()},error:function(i,n){fn.error(i+":",n),delete C[e],t.success()}})}function O(e,t,i,n,a){var r=C[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return fn.warn("Invalid handle"),void n.error("Invalid handle");var s=r.webrtcStuff;fn.debug("streamsDone:",a),a&&(fn.debug("  -- Audio tracks:",a.getAudioTracks()),fn.debug("  -- Video tracks:",a.getVideoTracks()));var l=!1;if(s.myStream&&i.update&&!s.streamExternal){if((!i.update&&Q(i)||i.update&&(i.addAudio||i.replaceAudio))&&a.getAudioTracks()&&a.getAudioTracks().length)if(s.myStream.addTrack(a.getAudioTracks()[0]),fn.unifiedPlan){fn.log((i.replaceAudio?"Replacing":"Adding")+" audio track:",a.getAudioTracks()[0]);var d=null,f=s.pc.getTransceivers();if(f&&f.length>0)for(var p in f){var m=f[p];if(m.sender&&m.sender.track&&"audio"===m.sender.track.kind||m.receiver&&m.receiver.track&&"audio"===m.receiver.track.kind){d=m;break}}d&&d.sender?d.sender.replaceTrack(a.getAudioTracks()[0]):s.pc.addTrack(a.getAudioTracks()[0],a)}else fn.log((i.replaceAudio?"Replacing":"Adding")+" audio track:",a.getAudioTracks()[0]),s.pc.addTrack(a.getAudioTracks()[0],a);if((!i.update&&ie(i)||i.update&&(i.addVideo||i.replaceVideo))&&a.getVideoTracks()&&a.getVideoTracks().length)if(s.myStream.addTrack(a.getVideoTracks()[0]),fn.unifiedPlan){fn.log((i.replaceVideo?"Replacing":"Adding")+" video track:",a.getVideoTracks()[0]);var _=null;f=s.pc.getTransceivers();if(f&&f.length>0)for(var p in f){m=f[p];if(m.sender&&m.sender.track&&"video"===m.sender.track.kind||m.receiver&&m.receiver.track&&"video"===m.receiver.track.kind){_=m;break}}_&&_.sender?_.sender.replaceTrack(a.getVideoTracks()[0]):s.pc.addTrack(a.getVideoTracks()[0],a)}else fn.log((i.replaceVideo?"Replacing":"Adding")+" video track:",a.getVideoTracks()[0]),s.pc.addTrack(a.getVideoTracks()[0],a)}else s.myStream=a,l=!0;if(!s.pc){var g={iceServers:c,iceTransportPolicy:u,bundlePolicy:h};"chrome"===fn.webRTCAdapter.browserDetails.browser&&(g["sdpSemantics"]=fn.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var v={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===x&&v.optional.push({googIPv6:!0}),n.rtcConstraints&&"object"===o(n.rtcConstraints))for(var p in fn.debug("Adding custom PeerConnection constraints:",n.rtcConstraints),n.rtcConstraints)v.optional.push(n.rtcConstraints[p]);"edge"===fn.webRTCAdapter.browserDetails.browser&&(g.bundlePolicy="max-bundle"),fn.log("Creating PeerConnection"),fn.debug(v),s.pc=new RTCPeerConnection(g,v),fn.debug(s.pc),s.pc.getStats&&(s.volume={},s.bitrate.value="0 kbits/sec"),fn.log("Preparing local SDP and gathering candidates (trickle="+s.trickle+")"),s.pc.oniceconnectionstatechange=function(e){s.pc&&r.iceState(s.pc.iceConnectionState)},s.pc.onicecandidate=function(t){if(null==t.candidate||"edge"===fn.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)fn.log("End of candidates."),s.iceDone=!0,!0===s.trickle?B(e,{completed:!0}):G(e,n);else{var i={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===s.trickle&&B(e,i)}},s.pc.ontrack=function(e){fn.log("Handling Remote Track"),fn.debug(e),e.streams&&(s.remoteStream=e.streams[0],r.onremotestream(s.remoteStream),e.track.onended||(fn.log("Adding onended callback to track:",e.track),e.track.onended=function(e){fn.log("Remote track muted/removed:",e),s.remoteStream&&(s.remoteStream.removeTrack(e.target),r.onremotestream(s.remoteStream))},e.track.onmute=e.track.onended,e.track.onunmute=function(e){fn.log("Remote track flowing again:",e);try{s.remoteStream.addTrack(e.target),r.onremotestream(s.remoteStream)}catch(ia){fn.error(ia)}}))}}if(l&&null!==a&&void 0!==a)if(fn.log("Adding local stream"),console.log("callbacks",n),"screen"==n.media.video){var b=!0===n.simulcast2;a.getTracks().forEach((function(e){if(fn.log("Adding local track:",e),e.applyConstraints({frameRate:5}),b)if("audio"===e.kind)s.pc.addTrack(e,a);else{fn.log("Enabling rid-based simulcasting:",e);var t=y(n.simulcastMaxBitrates);s.pc.addTransceiver(e,{direction:"sendrecv",streams:[a],sendEncodings:[{rid:"h",active:!0,maxBitrate:t.high},{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:t.low,scaleResolutionDownBy:4}]})}else s.pc.addTrack(e,a)}))}else{b=!0===n.simulcast2;var S=a.getTracks(),w=S[0];if(w){var T=w.getSettings();console.log("videoTrack",w),console.log("videosettings",T)}var P=a.getAudioTracks(),E=P[0];if(E){var k=E.getSettings();console.log("audiosettings",k)}S.forEach((function(e){if(e.applyConstraints({frameRate:{max:n.frameRate}}),fn.log("Adding local track:",e),b){s.pc.addTrack(e,a);var t=null,i=s.pc.getSenders();for(var o in i){var r=i[o];r&&r.track&&"video"===r.track.kind&&(t=r)}var l=null;t&&(l=t.getParameters()),l&&l.encodings&&(l.encodings[0].maxBitrate=1e5,t.setParameters(l).then((function(e){console.log("Successed to set parameters!",l)}))["catch"]((function(e){console.log("err",e),console.error(e)})))}else if("audio"===e.kind)s.pc.addTrack(e,a);else{fn.log("Enabling rid-based simulcasting:",e);var d=n.bitrate||1e5;s.pc.addTransceiver(e,{direction:"sendrecv",streams:[a],sendEncodings:[{rid:"h",active:!0,maxBitrate:d}]})}}))}re(i)&&!s.dataChannel[fn.dataChanDefaultLabel]&&(fn.log("Creating data channel"),L(e,fn.dataChanDefaultLabel,!1),s.pc.ondatachannel=function(t){fn.log("Data channel created by Janus:",t),L(e,t.channel.label,t.channel)}),s.myStream&&r.onlocalstream(s.myStream),null===t||void 0===t?H(e,i,n):s.pc.setRemoteDescription(t).then((function(){if(fn.log("Remote description accepted!"),s.remoteSdp=t.sdp,s.candidates&&s.candidates.length>0){for(var a=0;a<s.candidates.length;a++){var o=s.candidates[a];fn.debug("Adding remote candidate:",o),o&&!0!==o.completed?s.pc.addIceCandidate(o):s.pc.addIceCandidate(fn.endOfCandidates)}s.candidates=[]}V(e,i,n)}),n.error)}function N(e,t,i){i=i||{},i.success="function"==typeof i.success?i.success:fn.noop,i.error="function"==typeof i.error?i.error:q;var n=i.jsep;if(t&&n)return fn.error("Provided a JSEP to a createOffer"),void i.error("Provided a JSEP to a createOffer");if(!t&&(!n||!n.type||!n.sdp))return fn.error("A valid JSEP is required for createAnswer"),void i.error("A valid JSEP is required for createAnswer");i.media=i.media||{audio:!0,video:!0};var a=i.media,r=C[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return fn.warn("Invalid handle"),void i.error("Invalid handle");var s=r.webrtcStuff;if(s.trickle=se(i.trickle),void 0===s.pc||null===s.pc)a.update=!1,a.keepAudio=!1,a.keepVideo=!1;else if(void 0!==s.pc&&null!==s.pc){if(fn.log("Updating existing media session"),a.update=!0,null!==i.stream&&void 0!==i.stream)i.stream!==s.myStream&&fn.log("Renegotiation involves a new external stream");else{if(a.addAudio){if(a.keepAudio=!1,a.replaceAudio=!1,a.removeAudio=!1,a.audioSend=!0,s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length)return fn.error("Can't add audio stream, there already is one"),void i.error("Can't add audio stream, there already is one")}else a.removeAudio?(a.keepAudio=!1,a.replaceAudio=!1,a.addAudio=!1,a.audioSend=!1):a.replaceAudio&&(a.keepAudio=!1,a.addAudio=!1,a.removeAudio=!1,a.audioSend=!0);if(null===s.myStream||void 0===s.myStream?(a.replaceAudio&&(a.keepAudio=!1,a.replaceAudio=!1,a.addAudio=!0,a.audioSend=!0),Q(a)&&(a.keepAudio=!1,a.addAudio=!0)):null===s.myStream.getAudioTracks()||void 0===s.myStream.getAudioTracks()||0===s.myStream.getAudioTracks().length?(a.replaceAudio&&(a.keepAudio=!1,a.replaceAudio=!1,a.addAudio=!0,a.audioSend=!0),Q(a)&&(a.keepVideo=!1,a.addAudio=!0)):!Q(a)||a.removeAudio||a.replaceAudio||(a.keepAudio=!0),a.addVideo){if(a.keepVideo=!1,a.replaceVideo=!1,a.removeVideo=!1,a.videoSend=!0,s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length)return fn.error("Can't add video stream, there already is one"),void i.error("Can't add video stream, there already is one")}else a.removeVideo?(a.keepVideo=!1,a.replaceVideo=!1,a.addVideo=!1,a.videoSend=!1):a.replaceVideo&&(a.keepVideo=!1,a.addVideo=!1,a.removeVideo=!1,a.videoSend=!0);null===s.myStream||void 0===s.myStream||null===s.myStream.getVideoTracks()||void 0===s.myStream.getVideoTracks()||0===s.myStream.getVideoTracks().length?(a.replaceVideo&&(a.keepVideo=!1,a.replaceVideo=!1,a.addVideo=!0,a.videoSend=!0),ie(a)&&(a.keepVideo=!1,a.addVideo=!0)):!ie(a)||a.removeVideo||a.replaceVideo||(a.keepVideo=!0),a.addData&&(a.data=!0)}if(Q(a)&&a.keepAudio&&ie(a)&&a.keepVideo)return r.consentDialog(!1),void O(e,n,a,i,s.myStream)}if(a.update&&!s.streamExternal){if(a.removeAudio||a.replaceAudio){if(s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length){var l=s.myStream.getAudioTracks()[0];fn.log("Removing audio track:",l),s.myStream.removeTrack(l);try{l.stop()}catch(ia){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var d=!0;if(a.replaceAudio&&fn.unifiedPlan&&(d=!1),d)for(var c in s.pc.getSenders()){l=s.pc.getSenders()[c];l&&l.track&&"audio"===l.track.kind&&(fn.log("Removing audio sender:",l),s.pc.removeTrack(l))}}}if(a.removeVideo||a.replaceVideo){if(s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length){l=s.myStream.getVideoTracks()[0];fn.log("Removing video track:",l),s.myStream.removeTrack(l);try{l.stop()}catch(ia){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var u=!0;if(a.replaceVideo&&fn.unifiedPlan&&(u=!1),u)for(var c in s.pc.getSenders()){l=s.pc.getSenders()[c];l&&l.track&&"video"===l.track.kind&&(fn.log("Removing video sender:",l),s.pc.removeTrack(l))}}}}if(null!==i.stream&&void 0!==i.stream){var h=i.stream;if(fn.log("MediaStream provided by the application"),fn.debug(h),a.update&&s.myStream&&s.myStream!==i.stream&&!s.streamExternal){try{var x=s.myStream.getTracks();for(var f in x){var p=x[f];fn.log(p),null!==p&&void 0!==p&&p.stop()}}catch(ia){}s.myStream=null}return s.streamExternal=!0,r.consentDialog(!1),void O(e,n,a,i,h)}if(Q(a)||ie(a)){if(!fn.isGetUserMediaAvailable())return void i.error("getUserMedia not available");var m={mandatory:{},optional:[]};r.consentDialog(!0);var _=Q(a);!0===_&&void 0!=a&&null!=a&&"object"===o(a.audio)&&(_=a.audio);var g=ie(a);if(!0===g&&void 0!=a&&null!=a){var v=!0===i.simulcast,y=!0===i.simulcast2;if(!v&&!y||n||void 0!==a.video&&!1!==a.video||(a.video="hires"),a.video&&"screen"!=a.video&&"window"!=a.video)if("object"===o(a.video))g=a.video;else{var b=0,S=0;"lowres"===a.video?(S=240,b=320):"lowres-16:9"===a.video?(S=180,b=320):"hires"===a.video||"hires-16:9"===a.video||"hdres"===a.video?(S=720,b=1280):"fhdres"===a.video?(S=1080,b=1920):"4kres"===a.video?(S=2160,b=3840):"stdres"===a.video?(S=480,b=640):"stdres-16:9"===a.video?(S=360,b=640):(fn.log("Default video setting is stdres 4:3"),S=480,b=640),fn.log("Adding media constraint:",a.video),g={height:{ideal:S},width:{ideal:b}},fn.log("Adding video constraint:",g)}else if("screen"===a.video||"window"===a.video){var w=function(t,o){r.consentDialog(!1),t?i.error(t):O(e,n,a,i,o)},T=function(e,t,i){fn.log("Adding media constraint (screen capture)"),fn.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){i?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(i){e.addTrack(i.getAudioTracks()[0]),t(null,e)})):t(null,e)}))["catch"]((function(e){r.consentDialog(!1),t(e)}))};if(a.screenshareFrameRate||(a.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){r.consentDialog(!1),Q(a)&&!a.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(o){t.addTrack(o.getAudioTracks()[0]),O(e,n,a,i,t)})):O(e,n,a,i,t)}),(function(e){r.consentDialog(!1),i.error(e)}));if("chrome"===fn.webRTCAdapter.browserDetails.browser){var P=fn.webRTCAdapter.browserDetails.version,E=33;window.navigator.userAgent.match("Linux")&&(E=35),P>=26&&P<=E?(m={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:a.screenshareFrameRate,maxFrameRate:a.screenshareFrameRate,chromeMediaSource:"screen"}},audio:Q(a)&&!a.keepAudio},T(m,w)):fn.extension.getScreen((function(e,t){if(e)return r.consentDialog(!1),i.error(e);m={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:a.screenshareFrameRate,maxFrameRate:a.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},m.video.mandatory.chromeMediaSourceId=t,T(m,w,Q(a)&&!a.keepAudio)}))}else if("firefox"===fn.webRTCAdapter.browserDetails.browser){if(!(fn.webRTCAdapter.browserDetails.version>=33)){var k=new Error("NavigatorUserMediaError");return k.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",r.consentDialog(!1),void i.error(k)}m={video:{mozMediaSource:a.video,mediaSource:a.video},audio:Q(a)&&!a.keepAudio},T(m,(function(e,t){if(w(e,t),!e)var i=t.currentTime,n=window.setInterval((function(){t||window.clearInterval(n),t.currentTime==i&&(window.clearInterval(n),t.onended&&t.onended()),i=t.currentTime}),500)}))}return}}null!==a&&void 0!==a&&"screen"===a.video||navigator.mediaDevices.enumerateDevices().then((function(t){var o=t.some((function(e){return"audioinput"===e.kind})),s=oe(a)||t.some((function(e){return"videoinput"===e.kind})),l=Q(a),d=ie(a),c=ee(a),u=ne(a);if(l||d||c||u){var x=!!l&&o,f=!!d&&s;if(!x&&!f)return r.consentDialog(!1),i.error("No capture device found"),!1;if(!x&&c)return r.consentDialog(!1),i.error("Audio capture is required, but no capture device found"),!1;if(!f&&u)return r.consentDialog(!1),i.error("Video capture is required, but no capture device found"),!1}var p={audio:!(!o||a.keepAudio)&&_,video:!(!s||a.keepVideo)&&g};a.encodings&&(p=a.encodings),fn.debug("getUserMedia constraints",p),p.audio||p.video?(console.log("gumConstraints_________",p,a.encodings),navigator.mediaDevices.getUserMedia(a.encodings?a.encodings:p).then((function(t){r.consentDialog(!1),O(e,n,a,i,t)}))["catch"]((function(e){r.consentDialog(!1),i.error({code:e.code,name:e.name,message:e.message})}))):(r.consentDialog(!1),O(e,n,a,i,h))}))["catch"]((function(e){r.consentDialog(!1),i.error("enumerateDevices error",e)}))}else O(e,n,a,i)}function U(e,t){t=t||{},t.success="function"==typeof t.success?t.success:fn.noop,t.error="function"==typeof t.error?t.error:q;var i=t.jsep,n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fn.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff;if(void 0!==i&&null!==i){if(null===a.pc)return fn.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");a.pc.setRemoteDescription(i).then((function(){if(fn.log("Remote description accepted!"),a.remoteSdp=i.sdp,a.candidates&&a.candidates.length>0){for(var e=0;e<a.candidates.length;e++){var n=a.candidates[e];fn.debug("Adding remote candidate:",n),n&&!0!==n.completed?a.pc.addIceCandidate(n):a.pc.addIceCandidate(fn.endOfCandidates)}a.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function H(e,t,i){i=i||{},i.success="function"==typeof i.success?i.success:fn.noop,i.error="function"==typeof i.error?i.error:fn.noop,i.customizeSdp="function"==typeof i.customizeSdp?i.customizeSdp:fn.noop;var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fn.warn("Invalid handle"),void i.error("Invalid handle");var a=n.webrtcStuff,o=!0===i.simulcast;o?fn.log("Creating offer (iceDone="+a.iceDone+", simulcast="+o+")"):fn.log("Creating offer (iceDone="+a.iceDone+")");var r={};if(fn.unifiedPlan){var s=null,l=null,d=a.pc.getTransceivers();if(d&&d.length>0)for(var c in d){var u=d[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(l||(l=u))}var h=Q(t),x=te(t);h||x?h&&x?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",fn.log("Setting audio transceiver to sendrecv:",s)):h&&!x?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",fn.log("Setting audio transceiver to sendonly:",s)):!h&&x&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",fn.log("Setting audio transceiver to recvonly:",s)):(s=a.pc.addTransceiver("audio",{direction:"recvonly"}),fn.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",fn.log("Setting audio transceiver to inactive:",s));var f=ie(t),p=ae(t);f||p?f&&p?l&&(l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",fn.log("Setting video transceiver to sendrecv:",l)):f&&!p?l&&(l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",fn.log("Setting video transceiver to sendonly:",l)):!f&&p&&(l?(l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",fn.log("Setting video transceiver to recvonly:",l)):(l=a.pc.addTransceiver("video",{direction:"recvonly"}),fn.log("Adding recvonly video transceiver:",l))):t.removeVideo&&l&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive",fn.log("Setting video transceiver to inactive:",l))}else r["offerToReceiveAudio"]=te(t),r["offerToReceiveVideo"]=ae(t);var m=!0===i.iceRestart;m&&(r["iceRestart"]=!0),fn.debug(r);var _=ie(t);if(_&&o&&"firefox"===fn.webRTCAdapter.browserDetails.browser){fn.log("Enabling Simulcasting for Firefox (RID)");var g=a.pc.getSenders().find((function(e){return"video"==e.track.kind}));if(g){var v=g.getParameters();v||(v={});var b=y(i.simulcastMaxBitrates);v.encodings=[{rid:"h",active:!0,maxBitrate:b.high},{rid:"m",active:!0,maxBitrate:b.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:b.low,scaleResolutionDownBy:4}],g.setParameters(v)}}a.pc.createOffer(r).then((function(e){fn.debug(e);var t={type:e.type,sdp:e.sdp};i.customizeSdp(t),e.sdp=t.sdp,fn.log("Setting local description"),_&&o&&("chrome"===fn.webRTCAdapter.browserDetails.browser||"safari"===fn.webRTCAdapter.browserDetails.browser?(fn.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=$(e.sdp)):"firefox"!==fn.webRTCAdapter.browserDetails.browser&&fn.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),a.mySdp=e.sdp,a.pc.setLocalDescription(e)["catch"](i.error),a.mediaConstraints=r,a.iceDone||a.trickle?(fn.log("Offer ready"),fn.debug(i),i.success(e)):fn.log("Waiting for all candidates...")}),i.error)}function V(e,t,i){i=i||{},i.success="function"==typeof i.success?i.success:fn.noop,i.error="function"==typeof i.error?i.error:fn.noop,i.customizeSdp="function"==typeof i.customizeSdp?i.customizeSdp:fn.noop;var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fn.warn("Invalid handle"),void i.error("Invalid handle");var a=n.webrtcStuff,o=!0===i.simulcast;o?fn.log("Creating answer (iceDone="+a.iceDone+", simulcast="+o+")"):fn.log("Creating answer (iceDone="+a.iceDone+")");var r=null;if(fn.unifiedPlan){r={};var s=null,l=null,d=a.pc.getTransceivers();if(d&&d.length>0)for(var c in d){var u=d[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(l||(l=u))}var h=Q(t),x=te(t);if(h||x){if(h&&x){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",fn.log("Setting audio transceiver to sendrecv:",s)}catch(ia){fn.error(ia)}}else if(h&&!x)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",fn.log("Setting audio transceiver to sendonly:",s))}catch(ia){fn.error(ia)}else if(!h&&x)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",fn.log("Setting audio transceiver to recvonly:",s)}catch(ia){fn.error(ia)}else s=a.pc.addTransceiver("audio",{direction:"recvonly"}),fn.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",fn.log("Setting audio transceiver to inactive:",s)}catch(ia){fn.error(ia)}var f=ie(t),p=ae(t);if(f||p){if(f&&p){if(l)try{l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",fn.log("Setting video transceiver to sendrecv:",l)}catch(ia){fn.error(ia)}}else if(f&&!p){if(l)try{l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",fn.log("Setting video transceiver to sendonly:",l)}catch(ia){fn.error(ia)}}else if(!f&&p)if(l)try{l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",fn.log("Setting video transceiver to recvonly:",l)}catch(ia){fn.error(ia)}else l=a.pc.addTransceiver("video",{direction:"recvonly"}),fn.log("Adding recvonly video transceiver:",l)}else if(t.removeVideo&&l)try{l.setDirection?l.setDirection("inactive"):l.direction="inactive",fn.log("Setting video transceiver to inactive:",l)}catch(ia){fn.error(ia)}}else r="firefox"==fn.webRTCAdapter.browserDetails.browser||"edge"==fn.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:te(t),offerToReceiveVideo:ae(t)}:{mandatory:{OfferToReceiveAudio:te(t),OfferToReceiveVideo:ae(t)}};fn.debug(r);var m=ie(t);if(m&&o&&"firefox"===fn.webRTCAdapter.browserDetails.browser){fn.log("Enabling Simulcasting for Firefox (RID)");var _=a.pc.getSenders()[1];fn.log(_);var g=_.getParameters();fn.log(g);var v=y(i.simulcastMaxBitrates);_.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:v.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:v.medium},{rid:"low",active:!0,priority:"low",maxBitrate:v.low}]})}a.pc.createAnswer(r).then((function(e){fn.debug(e);var t={type:e.type,sdp:e.sdp};i.customizeSdp(t),e.sdp=t.sdp,fn.log("Setting local description"),m&&o&&("chrome"===fn.webRTCAdapter.browserDetails.browser?fn.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==fn.webRTCAdapter.browserDetails.browser&&fn.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),a.mySdp=e.sdp,a.pc.setLocalDescription(e)["catch"](i.error),a.mediaConstraints=r,a.iceDone||a.trickle?i.success(e):fn.log("Waiting for all candidates...")}),i.error)}function G(e,t){t=t||{},t.success="function"==typeof t.success?t.success:fn.noop,t.error="function"==typeof t.error?t.error:fn.noop;var i=C[e];if(null!==i&&void 0!==i&&null!==i.webrtcStuff&&void 0!==i.webrtcStuff){var n=i.webrtcStuff;fn.log("Sending offer/answer SDP..."),null!==n.mySdp&&void 0!==n.mySdp?(n.mySdp={type:n.pc.localDescription.type,sdp:n.pc.localDescription.sdp},!1===n.trickle&&(n.mySdp["trickle"]=!1),fn.debug(t),n.sdpSent=!0,t.success(n.mySdp)):fn.warn("Local SDP instance is invalid, not sending anything...")}else fn.warn("Invalid handle, not sending anything")}function Y(e,t){var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fn.warn("Invalid handle"),0;var n=t?"remote":"local",a=i.webrtcStuff;return a.volume[n]||(a.volume[n]={value:0}),a.pc.getStats&&"chrome"===fn.webRTCAdapter.browserDetails.browser?!t||null!==a.remoteStream&&void 0!==a.remoteStream?t||null!==a.myStream&&void 0!==a.myStream?null===a.volume[n].timer||void 0===a.volume[n].timer?(fn.log("Starting "+n+" volume monitor"),a.volume[n].timer=setInterval((function(){a.pc.getStats((function(e){for(var i=e.result(),o=0;o<i.length;o++){var r=i[o];"ssrc"==r.type&&(t&&r.stat("audioOutputLevel")?a.volume[n].value=parseInt(r.stat("audioOutputLevel")):!t&&r.stat("audioInputLevel")&&(a.volume[n].value=parseInt(r.stat("audioInputLevel"))))}}))}),200),0):a.volume[n].value:(fn.warn("Local stream unavailable"),0):(fn.warn("Remote stream unavailable"),0):(fn.warn("Getting the "+n+" volume unsupported by browser"),0)}function W(e,t){var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fn.warn("Invalid handle"),!0;var n=i.webrtcStuff;return null===n.pc||void 0===n.pc?(fn.warn("Invalid PeerConnection"),!0):void 0===n.myStream||null===n.myStream?(fn.warn("Invalid local MediaStream"),!0):t?null===n.myStream.getVideoTracks()||void 0===n.myStream.getVideoTracks()||0===n.myStream.getVideoTracks().length?(fn.warn("No video track"),!0):!n.myStream.getVideoTracks()[0].enabled:null===n.myStream.getAudioTracks()||void 0===n.myStream.getAudioTracks()||0===n.myStream.getAudioTracks().length?(fn.warn("No audio track"),!0):!n.myStream.getAudioTracks()[0].enabled}function Z(e,t,i){var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fn.warn("Invalid handle"),!1;var a=n.webrtcStuff;return null===a.pc||void 0===a.pc?(fn.warn("Invalid PeerConnection"),!1):void 0===a.myStream||null===a.myStream?(fn.warn("Invalid local MediaStream"),!1):t?null===a.myStream.getVideoTracks()||void 0===a.myStream.getVideoTracks()||0===a.myStream.getVideoTracks().length?(fn.warn("No video track"),!1):(a.myStream.getVideoTracks()[0].enabled=!i,!0):null===a.myStream.getAudioTracks()||void 0===a.myStream.getAudioTracks()||0===a.myStream.getAudioTracks().length?(fn.warn("No audio track"),!1):(a.myStream.getAudioTracks()[0].enabled=!i,!0)}function X(e,t){var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fn.warn("Invalid handle"),"Invalid handle";var n=i.webrtcStuff;return null===n.pc||void 0===n.pc?"Invalid PeerConnection":n.pc.getStats?void n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var i=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?i=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(i=!0),i)if(t&&t(e),n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var a=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"==fn.webRTCAdapter.browserDetails.browser&&(a/=1e3);var o=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/a);"safari"===fn.webRTCAdapter.browserDetails.browser&&(o=parseInt(o/1e3)),n.bitrate.value=o+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))})):(fn.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function J(e){var t=C[e];if(null===t||void 0===t||null===t.webrtcStuff||void 0===t.webrtcStuff)return fn.warn("Invalid handle"),"Invalid handle";var i=t.webrtcStuff;return null===i.pc||void 0===i.pc?"Invalid PeerConnection":i.pc.getStats?null===i.bitrate.timer||void 0===i.bitrate.timer?(fn.log("Starting bitrate timer (via getStats)"),i.bitrate.timer=setInterval((function(){i.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(i.bitrate.bsnow=e.bytesReceived,i.bitrate.tsnow=e.timestamp,null===i.bitrate.bsbefore||null===i.bitrate.tsbefore)i.bitrate.bsbefore=i.bitrate.bsnow,i.bitrate.tsbefore=i.bitrate.tsnow;else{var n=i.bitrate.tsnow-i.bitrate.tsbefore;"safari"==fn.webRTCAdapter.browserDetails.browser&&(n/=1e3);var a=Math.round(8*(i.bitrate.bsnow-i.bitrate.bsbefore)/n);"safari"===fn.webRTCAdapter.browserDetails.browser&&(a=parseInt(a/1e3)),i.bitrate.value=a+" kbits/sec",i.bitrate.bsbefore=i.bitrate.bsnow,i.bitrate.tsbefore=i.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):i.bitrate.value:(fn.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function q(e){fn.error("WebRTC error:",e)}function K(e,t){fn.log("Cleaning WebRTC stuff");var a=C[e];if(null!==a&&void 0!==a){var o=a.webrtcStuff;if(null!==o&&void 0!==o){if(!0===t){var r={rtcgw:"hangup",transaction:fn.randomString(12)};null!==a.token&&void 0!==a.token&&(r["token"]=a.token),null!==_&&void 0!==_&&(r["apisecret"]=_),fn.debug("Sending hangup request (handle="+e+"):"),fn.debug(r),i?(r["session_id"]=S,r["handle_id"]=e,n.send(JSON.stringify(r))):fn.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",withCredentials:f,body:r})}o.remoteStream=null,o.volume&&(o.volume["local"]&&o.volume["local"].timer&&clearInterval(o.volume["local"].timer),o.volume["remote"]&&o.volume["remote"].timer&&clearInterval(o.volume["remote"].timer)),o.volume={},o.bitrate.timer&&clearInterval(o.bitrate.timer),o.bitrate.timer=null,o.bitrate.bsnow=null,o.bitrate.bsbefore=null,o.bitrate.tsnow=null,o.bitrate.tsbefore=null,o.bitrate.value=null;try{if(!o.streamExternal&&null!==o.myStream&&void 0!==o.myStream){fn.log("Stopping local stream tracks");var s=o.myStream.getTracks();for(var l in s){var c=s[l];fn.log(c),null!==c&&void 0!==c&&c.stop()}}}catch(ia){}o.streamExternal=!1,o.myStream=null;try{o.pc.close()}catch(ia){}o.pc=null,o.candidates=null,o.mySdp=null,o.remoteSdp=null,o.iceDone=!1,o.dataChannel={},o.dtmfSender=null}a.oncleanup()}}function $(e){for(var t=e.split("\r\n"),i=!1,n=[-1],a=[-1],o=null,r=null,s=null,l=null,d=-1,c=0;c<t.length;c++){var u=t[c].match(/m=(\w+) */);if(u){var h=u[1];if("video"===h){if(!(n[0]<0)){d=c;break}i=!0}else if(n[0]>-1){d=c;break}}else if(i){var x=t[c].match(/a=ssrc-group:FID (\d+) (\d+)/);if(x)n[0]=x[1],a[0]=x[2],t.splice(c,1),c--;else{if(n[0]){var f=t[c].match("a=ssrc:"+n[0]+" cname:(.+)");if(f&&(o=f[1]),f=t[c].match("a=ssrc:"+n[0]+" msid:(.+)"),f&&(r=f[1]),f=t[c].match("a=ssrc:"+n[0]+" mslabel:(.+)"),f&&(s=f[1]),f=t[c].match("a=ssrc:"+n[0]+" label:(.+)"),f&&(l=f[1]),0===t[c].indexOf("a=ssrc:"+a[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+n[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(n[0]<0){d=-1,i=!1;for(c=0;c<t.length;c++){u=t[c].match(/m=(\w+) */);if(u){h=u[1];if("video"===h){if(!(n[0]<0)){d=c;break}i=!0}else if(n[0]>-1){d=c;break}}else if(i){if(n[0]<0){var p=t[c].match(/a=ssrc:(\d+)/);if(p){n[0]=p[1],t.splice(c,1),c--;continue}}else{f=t[c].match("a=ssrc:"+n[0]+" cname:(.+)");if(f&&(o=f[1]),f=t[c].match("a=ssrc:"+n[0]+" msid:(.+)"),f&&(r=f[1]),f=t[c].match("a=ssrc:"+n[0]+" mslabel:(.+)"),f&&(s=f[1]),f=t[c].match("a=ssrc:"+n[0]+" label:(.+)"),f&&(l=f[1]),0===t[c].indexOf("a=ssrc:"+a[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+n[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(n[0]<0)return fn.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;d<0&&(d=t.length),n[1]=Math.floor(4294967295*Math.random()),n[2]=Math.floor(4294967295*Math.random()),a[1]=Math.floor(4294967295*Math.random()),a[2]=Math.floor(4294967295*Math.random());for(c=0;c<n.length;c++)o&&(t.splice(d,0,"a=ssrc:"+n[c]+" cname:"+o),d++),r&&(t.splice(d,0,"a=ssrc:"+n[c]+" msid:"+r),d++),s&&(t.splice(d,0,"a=ssrc:"+n[c]+" mslabel:"+s),d++),l&&(t.splice(d,0,"a=ssrc:"+n[c]+" label:"+l),d++),o&&(t.splice(d,0,"a=ssrc:"+a[c]+" cname:"+o),d++),r&&(t.splice(d,0,"a=ssrc:"+a[c]+" msid:"+r),d++),s&&(t.splice(d,0,"a=ssrc:"+a[c]+" mslabel:"+s),d++),l&&(t.splice(d,0,"a=ssrc:"+a[c]+" label:"+l),d++);return t.splice(d,0,"a=ssrc-group:FID "+n[2]+" "+a[2]),t.splice(d,0,"a=ssrc-group:FID "+n[1]+" "+a[1]),t.splice(d,0,"a=ssrc-group:FID "+n[0]+" "+a[0]),t.splice(d,0,"a=ssrc-group:SIM "+n[0]+" "+n[1]+" "+n[2]),e=t.join("\r\n"),e.endsWith("\r\n")||(e+="\r\n"),e}function Q(e){return fn.debug("isAudioSendEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function ee(e){return fn.debug("isAudioSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}function te(e){return fn.debug("isAudioRecvEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function ie(e){return fn.debug("isVideoSendEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function ne(e){return fn.debug("isVideoSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}function ae(e){return fn.debug("isVideoRecvEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}function oe(e){if(fn.debug("isScreenSendEnabled:",e),void 0===e||null===e)return!1;if("object"!==o(e.video)||"object"!==o(e.video.mandatory))return!1;var t=e.video.mandatory;return t.chromeMediaSource?"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource:t.mozMediaSource?"window"===t.mozMediaSource||"screen"===t.mozMediaSource:!!t.mediaSource&&("window"===t.mediaSource||"screen"===t.mediaSource)}function re(e){return fn.debug("isDataEnabled:",e),"edge"==fn.webRTCAdapter.browserDetails.browser?(fn.warn("Edge doesn't support data channels yet"),!1):void 0!==e&&null!==e&&!0===e.data}function se(e){return fn.debug("isTrickleEnabled:",e),void 0===e||null===e||!0===e}I(e),this.getServer=function(){return d},this.isConnected=function(){return b},this.reconnect=function(e){e=e||{},e.success="function"==typeof e.success?e.success:fn.noop,e.error="function"==typeof e.error?e.error:fn.noop,e["reconnect"]=!0,I(e)},this.getSessionId=function(){return S},this.destroy=function(e){D(e)},this.attach=function(e){M(e)}}fn.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,i=e&&e.Promise||Promise,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},extension:e&&e.extension||xn,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,n){var a={method:n.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===n.verb&&(a.headers["Content-Type"]="application/json"),void 0!==n.withCredentials&&(a.credentials=!0===n.withCredentials?"include":n.withCredentials?n.withCredentials:"omit"),void 0!==n.body&&(a.body=JSON.stringify(n.body));var r=t(e,a)["catch"]((function(e){return i.reject({message:"Probably a network error, is the server down?",error:e})}));if(void 0!==n.timeout){var s=new i((function(e,t){var i=setTimeout((function(){return clearTimeout(i),t({message:"Request timed out",timeout:n.timeout})}),n.timeout)}));r=i.race([r,s])}return r.then((function(e){return e.ok?o(n.success)===o(fn.noop)?e.json().then((function(e){n.success(e)}))["catch"]((function(t){return i.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:i.reject({message:"API call failed",response:e})}))["catch"]((function(e){o(n.error)===o(fn.noop)&&n.error(e.message||"<< internal error >>",e)})),r}}},fn.useOldDependencies=function(e){var t=e&&e.jQuery||jQuery,i=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new i(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||xn,webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,i){var n=void 0!==i.body?{contentType:"application/json",data:JSON.stringify(i.body)}:{},a=void 0!==i.withCredentials?{xhrFields:{withCredentials:i.withCredentials}}:{};return t.ajax(t.extend(n,a,{url:e,type:i.verb,cache:!1,dataType:"json",async:i.async,timeout:i.timeout,success:function(e){o(i.success)===o(fn.noop)&&i.success(e)},error:function(e,t,n){o(i.error)===o(fn.noop)&&i.error(t,n)}}))}}},fn.noop=function(){},fn.dataChanDefaultLabel="JanusDataChannel",fn.endOfCandidates=null,fn.init=function(e){if(e=e||{},e.callback="function"==typeof e.callback?e.callback:fn.noop,!0===fn.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),fn.trace=fn.noop,fn.debug=fn.noop,fn.vdebug=fn.noop,fn.log=fn.noop,fn.warn=fn.noop,fn.error=fn.noop,!0===e.debug||"all"===e.debug)fn.trace=console.trace.bind(console),fn.debug=console.debug.bind(console),fn.vdebug=console.debug.bind(console),fn.log=console.log.bind(console),fn.warn=console.warn.bind(console),fn.error=console.error.bind(console);else if(Array.isArray(e.debug))for(var t in e.debug){var i=e.debug[t];switch(i){case"trace":fn.trace=console.trace.bind(console);break;case"debug":fn.debug=console.debug.bind(console);break;case"vdebug":fn.vdebug=console.debug.bind(console);break;case"log":fn.log=console.log.bind(console);break;case"warn":fn.warn=console.warn.bind(console);break;case"error":fn.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+i+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}fn.log("Initializing library");var n=e.dependencies||fn.useDefaultDependencies();fn.isArray=n.isArray,fn.webRTCAdapter=n.webRTCAdapter,fn.httpAPICall=n.httpAPICall,fn.newWebSocket=n.newWebSocket,fn.extension=n.extension,fn.extension.init(),fn.listDevices=function(e,t){e="function"==typeof e?e:fn.noop,null==t&&(t={audio:!0,video:!0}),fn.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(i){fn.debug(i),e(i);try{var n=t.getTracks();for(var a in n){var o=n[a];null!==o&&void 0!==o&&o.stop()}}catch(ia){}}))}))["catch"]((function(t){fn.error(t),e([])})):(fn.warn("navigator.mediaDevices unavailable"),e([]))},fn.attachMediaStream=function(e,t){if("chrome"===fn.webRTCAdapter.browserDetails.browser){var i=fn.webRTCAdapter.browserDetails.version;i>=52?e.srcObject=t:"undefined"!==typeof e.src?e.src=URL.createObjectURL(t):fn.error("Error attaching stream to element")}else e.srcObject=t},fn.reattachMediaStream=function(e,t){if("chrome"===fn.webRTCAdapter.browserDetails.browser){var i=fn.webRTCAdapter.browserDetails.version;i>=52?e.srcObject=t.srcObject:"undefined"!==typeof e.src?e.src=t.src:fn.error("Error reattaching stream to element")}else e.srcObject=t.srcObject};var a=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,o=a?"pagehide":"beforeunload",r=window["on"+o];if(window.addEventListener(o,(function(e){for(var t in fn.log("Closing window"),fn.sessions)null!==fn.sessions[t]&&void 0!==fn.sessions[t]&&fn.sessions[t].destroyOnUnload&&(fn.log("Destroying session "+t),fn.sessions[t].destroy({asyncRequest:!1,notifyDestroyed:!1}));r&&"function"==typeof r&&r()})),fn.safariVp8=!1,"safari"===fn.webRTCAdapter.browserDetails.browser&&fn.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var t in RTCRtpSender.getCapabilities("video").codecs){var s=RTCRtpSender.getCapabilities("video").codecs[t];if(s&&s.mimeType&&"video/vp8"===s.mimeType.toLowerCase()){fn.safariVp8=!0;break}}fn.safariVp8?fn.log("This version of Safari supports VP8"):fn.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var l=new RTCPeerConnection({},{});l.createOffer({offerToReceiveVideo:!0}).then((function(e){fn.safariVp8=-1!==e.sdp.indexOf("VP8"),fn.safariVp8?fn.log("This version of Safari supports VP8"):fn.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),l.close(),l=null}))}if(fn.unifiedPlan=!1,"firefox"===fn.webRTCAdapter.browserDetails.browser&&fn.webRTCAdapter.browserDetails.version>=59)fn.unifiedPlan=!0;else if("chrome"===fn.webRTCAdapter.browserDetails.browser&&fn.webRTCAdapter.browserDetails.version<72)fn.unifiedPlan=!1;else if("currentDirection"in RTCRtpTransceiver.prototype){var d=new RTCPeerConnection;try{d.addTransceiver("audio"),fn.unifiedPlan=!0}catch(ia){}d.close()}else fn.unifiedPlan=!1;fn.initDone=!0,e.callback()}},fn.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection},fn.isGetUserMediaAvailable=function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia},fn.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="",n=0;n<e;n++){var a=Math.floor(Math.random()*t.length);i+=t.substring(a,a+1)}return i},window.Janus=fn;var pn={version:"V1.0",apiDomain:"https://open.ys7.com"},mn={},_n=function(e,t){mn[e]||(mn[e]=[]),mn[e].push(t)},gn=function(){var e=Array.prototype.shift.call(arguments),t=mn[e];if(!t||0===t.length)return!1;for(var i,n=0;i=t[n];n++)i.apply(this,arguments)};function vn(){var e={};return e.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),e}var yn=function(){function e(t){r(this,e),d(this,"subscribe",(function(e){var t=vn(),i={cmdType:"subremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId},n=null;return window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(a){console.log("pluginHandle",a),8==e.type?window["ezuikit-webrtc"].opt.subscribeScreenHandle=a:(window["ezuikit-webrtc"].opt["".concat(e.clientId)]=a,1==e.type&&window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:{cmdType:"unsubremote",streamtype:2,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId},success:function(){},error:function(e){}})),n=a,n.createOffer({media:{videoSend:!1,audioSend:!1,audioRecv:!0,videoRecv:!0,audio:!0,video:!0,data:!1},simulcast:!1,simulcast2:!1,success:function(e){Janus.debug("remoteFeed createOffer Got SDP!"),Janus.debug(e),n.send({message:i,jsep:e})},error:function(e){Janus.error("remoteFeed WebRTC error:",e),t.reject(e)}})},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){switch(Janus.log("ICE state changed to "+e),e){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){Janus.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(e,t){Janus.debug(" ::: Got a message :::"),Janus.debug(e),void 0!==t&&null!==t&&(Janus.debug("Handling SDP as well..."),Janus.debug(t),n.handleRemoteJsep({jsep:t})),"subremoteack"===e["rtcgw"]&&gn("subremoteack",e)},onlocalstream:function(e){},onremotestream:function(i){console.log("remoteStream==================================",i);var n={clientId:e.clientId,stream:i,streamType:e.type};t.resolve(n),gn("remoteStream",n)},ondataopen:function(e){Janus.log("The DataChannel is available!")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),t.promise})),d(this,"subscribeStream",(function(e){var t=vn(),i={cmdType:"resumesubremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt["".concat(e.clientId)]&&window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:i,success:function(){t.resolve("success")},error:function(e){t.reject(e)}}),t.promise})),d(this,"unsubscribe",(function(e){var t=vn(),i={cmdType:"unsubremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return 8==e.type?window["ezuikit-webrtc"].opt.subscribeScreenHandle.send({message:i,success:function(){window["ezuikit-webrtc"].opt.subscribeScreenHandle.detach({noRequest:!1,success:function(){t.resolve("success")}})},error:function(e){t.reject(e)}}):window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:i,success:function(){3==e.type?window["ezuikit-webrtc"].opt["".concat(e.clientId)].detach({noRequest:!1,success:function(){t.resolve("success")}}):t.resolve("success")},error:function(e){t.reject(e)}}),t.promise})),d(this,"unsubscribeStream",(function(e){var t=vn(),i={cmdType:"pausesubremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:i,success:function(){t.resolve("success")},error:function(e){t.reject(e)}}),t.promise})),d(this,"listen",(function(){return _n.apply(void 0,arguments)})),this.initEZWEBPlayer(t)}return l(e,[{key:"initEZWEBPlayer",value:function(e){function t(t){if(console.log("data",t),200==t.meta.code){var i=t.data;i.clientId;var n=i.domain;i.internalRoomId;var a=i.wssPath;window["ezuikit-webrtc"].opt.server="wss://".concat(n,"/").concat(a),window["ezuikit-webrtc"].opt.roomParams.internalRoomId=t.data.internalRoomId,window["ezuikit-webrtc"].opt.roomParams.clientId=t.data.clientId;var o={token:"token=".concat(e.rtctoken,"&userId=").concat(e.userId,"&roomId=").concat(e.roomId,"&appId=").concat(e.appId),authtype:23};Janus.init({debug:"all",callback:function(){window["ezuikit-webrtc"].opt.janus=new Janus({server:window["ezuikit-webrtc"].opt.server,success:function(t){t&&e.onMessage(t)},error:function(t){e.handleError(t)},destroyed:function(){}},o)}})}else e.handleError(t.meta)}console.log("params",e),window["ezuikit-webrtc"]={opt:{roomParams:{room:0,userId:e.userId,video:1,internalRoomId:null,roomId:e.roomId,clientId:null,rtctoken:e.rtctoken},janus:null,mainHandle:null,sts:null,screenHandle:null,subscribeScreenHandle:null,opaqueId:"sts-"+Janus.randomString(12),localStreamType:null,server:null,accessToken:e.accessToken,stream:"",screenStream:null,apiDomain:pn.apiDomain,cln:{local:{username:"",client_id:""}}},videoParams:{},audioParams:{},cameraId:null,microphoneId:null,bitrate:1e5,frameRate:15,width:320,height:240},L("".concat(pn.apiDomain,"/api/v3/rtc/wss"),"POST",{appId:e.appId,roomId:e.roomId,customId:e.userId,accessToken:e.accessToken},{"Content-Type":"application/x-www-form-urlencoded",accessToken:e.accessToken},t)}},{key:"getVersion",value:function(){var e=vn();return e.resolve(pn.version),e.promise}},{key:"getSupport",value:function(){var e=vn(),t={isWebrtcSupport:!0,isH264Support:!0},i=document.createElement("video");return i.canPlayType&&(i.canPlayType("video/mp4;codecs=“avc1.64001E”")?t.isH264Support=!0:t.isH264Support=!1),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?(t.isWebrtcSupport=!0,e.resolve(t)):(t.isWebrtcSupport=!1,e.reject(t)),e.promise}},{key:"getMediaList",value:function(){var e=vn();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){e.resolve(t)})):e.reject("no devices"),e.promise}},{key:"getCamerasList",value:function(){var e=vn();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){var i=[];t.map((function(e){"videoinput"==e.kind&&i.push(e)})),e.resolve(i)})):e.reject("no devices"),e.promise}},{key:"getMicrophonesList",value:function(){var e=vn();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){var i=[];t.map((function(e){"audioinput"==e.kind&&i.push(e)})),e.resolve(i)})):e.reject("no devices"),e.promise}},{key:"getSpeakersList",value:function(){var e=vn();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){var i=[];t.map((function(e){"audiooutput"==e.kind&&i.push(e)})),e.resolve(i)})):e.reject("no devices"),e.promise}},{key:"play",value:function(e){var t=vn(),i=document.getElementById(e.domId),n=window["ezuikit-webrtc"].opt.cln.local.stream;return Janus.attachMediaStream(i,n),i.play(),document.getElementById(e.domId)?t.resolve("success"):t.reject("no video dom"),t.promise}},{key:"leaveRoom",value:function(e){var t=vn(),i={cmdType:"exitRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt.mainHandle.send({message:i,success:function(){window["ezuikit-webrtc"].opt.janus.destroy({success:function(){}}),t.resolve("success")},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)}}),t.promise}},{key:"setCameraDevice",value:function(e){var t=vn();return window["ezuikit-webrtc"].cameraId=e.deviceId,window["ezuikit-webrtc"].opt.sts&&window["ezuikit-webrtc"].opt.sts.createOffer({media:{video:{deviceId:e.deviceId},replaceVideo:!0,audio:1!=window["ezuikit-webrtc"].opt.localStreamType},simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}}),t.promise}},{key:"setMicrophoneDevice",value:function(e){var t=vn();return window["ezuikit-webrtc"].microphoneId=e.deviceId,window["ezuikit-webrtc"].opt.sts&&window["ezuikit-webrtc"].opt.sts.createOffer({media:{audio:{deviceId:e.deviceId},replaceAudio:!0,video:2!=window["ezuikit-webrtc"].opt.localStreamType},simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}}),t.promise}},{key:"setVideoProfile",value:function(e){var t=vn(),i={video:{width:e.video.width||360,height:e.video.height||640,frameRate:e.video.frameRate},bitrate:e.video.bitrate||5e5,id:e.id};return window["ezuikit-webrtc"].videoParams=i.video,window["ezuikit-webrtc"].bitrate=1e3*i.bitrate,window["ezuikit-webrtc"].frameRate=e.video.frameRate,window["ezuikit-webrtc"].width=e.video.width,window["ezuikit-webrtc"].height=e.video.height,t.resolve("success"),t.promise}},{key:"setAudioProfile",value:function(e){var t={audio:{deviceId:window["ezuikit-webrtc"].cameraId,sampleRate:e.audio.sampleRate||"32000HZ",sampleSize:e.audio.sampleSize||16,channelCount:e.audio.channelCount||1},id:e.id};window["ezuikit-webrtc"].audioParams=t.audio,console.log("window['ezuikit-webrtc'].videoParams",window["ezuikit-webrtc"])}},{key:"joinRoom",value:function(e){var t=vn();return window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(e){console.log("pluginHandle",e),window["ezuikit-webrtc"].opt.mainHandle=e,Janus.debug("Trying a createOffer too (audio/video sendrecv)");var i={cmdType:"enterRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,clientId:window["ezuikit-webrtc"].opt.roomParams.clientId,strroomId:window["ezuikit-webrtc"].opt.roomParams.roomId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId,authtype:23,authentication:window["ezuikit-webrtc"].opt.roomParams.rtctoken};e.send({message:i}),t.resolve(e.id)},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){switch(Janus.log("ICE state changed to "+e),e){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){Janus.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(e,t){Janus.debug(" ::: Got a message :::"),Janus.debug(e),void 0!==t&&null!==t&&(Janus.debug("Handling SDP as well..."),Janus.debug(t),window["ezuikit-webrtc"].opt.mainHandle.handleRemoteJsep({jsep:t}));var i=e["result"];if(null!==i&&void 0!==i){if("done"===i)return;i["status"]}"enterRoomack"===e["rtcgw"]&&gn("enterRoomack",e),"clientJoin"===e["rtcgw"]&&gn("clientJoin",e),"clientLeave"===e["rtcgw"]&&gn("clientLeave",e),"stream-added"===e["rtcgw"]&&gn("steam-added",e),"stream-removed"===e["rtcgw"]&&gn("stream-removed",e),"audioleve"===e["rtcgw"]&&gn("audioleve",e),"networkquality"===e["rtcgw"]&&gn("networkquality",e),"error"===e["rtcgw"]&&gn("error",e),"audioleve"===e["rtcgw"]&&gn("audioleve",e),"publishlocalstreamack"===e["rtcgw"]&&gn("publishlocalstreamack",e),"subremoteack"===e["rtcgw"]&&gn("subremoteack",e)},onlocalstream:function(e){console.log("onlocalstream",e),Janus.debug(" ::: Got a local stream :::"),Janus.debug(e),window["ezuikit-webrtc"].opt.cln.local.stream=e},onremotestream:function(e){},ondataopen:function(e){Janus.log("The DataChannel is available!")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),t.promise}},{key:"getLocalStream",value:function(e){var t=vn();return window["ezuikit-webrtc"].opt.cln.local.stream?t.resolve(window["ezuikit-webrtc"].opt.cln.local.stream):t.reject("no stream"),t.promise}},{key:"getScreenStream",value:function(e){var t=vn();return window["ezuikit-webrtc"].opt.screenStream?t.resolve(window["ezuikit-webrtc"].opt.screenStream):t.reject("no stream"),t.promise}},{key:"suspendStream",value:function(e){var t=this;t.controlStream(e,"suspend")}},{key:"controlStream",value:function(e,t){var i=vn(),n={cmdType:"resume"==t?"resumelocalstream":"pauselocalstream",streamtype:e.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return 2==e.type&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach((function(e){"audio"==e.kind&&(e.enabled="resume"==t)})),1==e.type&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach((function(e){"video"==e.kind&&(e.enabled="resume"==t)})),8==e.type&&(console.log(" window['ezuikit-webrtc'].opt.screenStream.getTracks()",window["ezuikit-webrtc"].opt.screenStream.getTracks()),window["ezuikit-webrtc"].opt.screenStream.getTracks().forEach((function(e){e.enabled="resume"==t}))),3==e.type&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach((function(e){e.enabled="resume"==t})),8==e.type?window["ezuikit-webrtc"].opt.screenHandle.send({message:n,success:function(){i.resolve("success")},error:function(e){i.reject(e)}}):window["ezuikit-webrtc"].opt.sts.send({message:n,success:function(){i.resolve("success")},error:function(e){i.reject(e)}}),i.promise}},{key:"resumeStream",value:function(e){var t=this;t.controlStream(e,"resume")}},{key:"publishStream",value:function(e){var t=vn(),i={cmdType:"publishlocalstream",streamtype:e.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};8!=e.type&&(window["ezuikit-webrtc"].opt.localStreamType=e.type),window["ezuikit-webrtc"].videoParams;var n={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:"stdres",audio:!0};switch(e.type){case 1:n={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:!1};break;case 2:n={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:!1,audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 3:n={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 8:n={audioRecv:!1,videoRecv:!0,data:!1,audioSend:!1,videoSend:!0,video:"screen",screenshareFrameRate:3};break}return console.log("media-----------",n),console.log("window['ezuikit-webrtc'].bitrate",window["ezuikit-webrtc"].bitrate),console.log("window['ezuikit-webrtc'].opt.sts",window["ezuikit-webrtc"].opt.sts),window["ezuikit-webrtc"].opt.sts&&8!=e.type?window["ezuikit-webrtc"].opt.sts.createOffer({media:n,simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),window["ezuikit-webrtc"].opt.sts.send({message:i,jsep:e}),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}}):window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(a){console.log("pluginHandle",a),8==e.type?window["ezuikit-webrtc"].opt.screenHandle=a:window["ezuikit-webrtc"].opt.sts=a,Janus.debug("Trying a createOffer too (audio/video sendrecv)"),a.createOffer({media:n,simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),a.send({message:i,jsep:e}),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}})},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){switch(Janus.log("ICE state changed to "+e),e){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){Janus.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(t,i){console.log("消息回调+++++++++++++++++++++++++++++++++++++++++",t,i),Janus.debug(" ::: Got a message :::"),Janus.debug(t),void 0!==i&&null!==i&&(Janus.debug("Handling SDP as well..."),Janus.debug(i),8==e.type?window["ezuikit-webrtc"].opt.screenHandle.handleRemoteJsep({jsep:i}):window["ezuikit-webrtc"].opt.sts.handleRemoteJsep({jsep:i}))},onlocalstream:function(t){console.log("onlocalstream",t),Janus.debug(" ::: Got a local stream :::"),Janus.debug(t),8==e.type?(window["ezuikit-webrtc"].opt.screenStream=t,t.getVideoTracks()[0].addEventListener("ended",(function(){console.log("停止了屏幕共享-----------------------");var e={cmdType:"unpublishlocalstream",streamtype:8,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};window["ezuikit-webrtc"].opt.screenHandle&&window["ezuikit-webrtc"].opt.screenHandle.send({message:e,success:function(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.screenHandle=null},error:function(e){}})}))):window["ezuikit-webrtc"].opt.cln.local.stream=t},onremotestream:function(e){},ondataopen:function(e){Janus.log("The DataChannel is available!")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),t.promise}},{key:"unpublishStream",value:function(e){var t=vn(),i={cmdType:"unpublishlocalstream",streamtype:3,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return 8==e.type?window["ezuikit-webrtc"].opt.screenHandle.send({message:a(a({},i),{},{streamtype:8}),success:function(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.screenHandle=null,t.resolve("success")},error:function(e){t.reject(e)}}):window["ezuikit-webrtc"].opt.sts.send({message:i,success:function(){window["ezuikit-webrtc"].opt.sts.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.sts=null,t.resolve("success")},error:function(e){t.reject(e)}}),t.promise}},{key:"ezwebTrigger",value:function(e){var t=window["ezuikit-webrtc"].opt.cln.local.stream,i={stream:t,clientId:"cliendId-".concat(20*Math.random())};gn("steam-added",i)}},{key:"playRemoteSteam",value:function(e){var t=document.getElementById(e.domId);Janus.attachMediaStream(t,e.stream),t.load();var i=t.play();void 0!==i&&i.then((function(){t.play()}))["catch"]((function(e){}))}},{key:"getQuality",value:function(e){window["ezuikit-webrtc"].opt["z3"].getNetworkQuality(e.handleId,(function(e){console.log("NetworkQuality",e)}))}}]),e}(),bn="ezuikit-js",Sn=["jzy"],Cn="1.0.2",wn="ezuikit javascript for npm",Tn="ezuikit.js",Pn={test:'echo "Error: no test specified" && exit 1'},En={type:"git",url:"git+https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm.git"},kn=["ezuikit_static/","ezuikit.js","README.md","CHANGELOG.md"],Rn=["video","ezuikit"],In="yujianbo",Dn="ISC",Mn={url:"https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm/issues"},An="https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm#readme",Bn={name:bn,maintainers:Sn,version:Cn,description:wn,main:Tn,scripts:Pn,repository:En,files:kn,keywords:Rn,author:In,license:Dn,bugs:Mn,homepage:An};class Ln{static get JS_ERROR(){return"js_error"}static get RESOURCE_ERROR(){return"resource_error"}static get VUE_ERROR(){return"vue_error"}static get PROMISE_ERROR(){return"promise_error"}static get AJAX_ERROR(){return"ajax_error"}static get CONSOLE_INFO(){return"console_info"}static get CONSOLE_WARN(){return"console_warn"}static get CONSOLE_ERROR(){return"console_error"}static get CROSS_SCRIPT_ERROR(){return"cross_srcipt_error"}static get UNKNOW_ERROR(){return"unknow_error"}static get PERFORMANCE(){return"performance"}static get BUSINESS(){return"business"}}class Fn{static get ERROR(){return"Error"}static get WARN(){return"Warning"}static get INFO(){return"Info"}}class jn{static get FETCH(){return"fetch"}static get DEFAULT(){return"default"}}var zn=function(){var e="undefined"!==typeof self?self:this,t=e||{},i={navigator:"undefined"!=typeof e.navigator?e.navigator:{},infoMap:{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}},n=function(){return{getMatchMap:function(e){return{Trident:e.indexOf("Trident")>-1||e.indexOf("NET CLR")>-1,Presto:e.indexOf("Presto")>-1,WebKit:e.indexOf("AppleWebKit")>-1,Gecko:e.indexOf("Gecko/")>-1,Safari:e.indexOf("Safari")>-1,Chrome:e.indexOf("Chrome")>-1||e.indexOf("CriOS")>-1,IE:e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1,Edge:e.indexOf("Edge")>-1,Firefox:e.indexOf("Firefox")>-1||e.indexOf("FxiOS")>-1,"Firefox Focus":e.indexOf("Focus")>-1,Chromium:e.indexOf("Chromium")>-1,Opera:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,Vivaldi:e.indexOf("Vivaldi")>-1,Yandex:e.indexOf("YaBrowser")>-1,Arora:e.indexOf("Arora")>-1,Lunascape:e.indexOf("Lunascape")>-1,QupZilla:e.indexOf("QupZilla")>-1,"Coc Coc":e.indexOf("coc_coc_browser")>-1,Kindle:e.indexOf("Kindle")>-1||e.indexOf("Silk/")>-1,Iceweasel:e.indexOf("Iceweasel")>-1,Konqueror:e.indexOf("Konqueror")>-1,Iceape:e.indexOf("Iceape")>-1,SeaMonkey:e.indexOf("SeaMonkey")>-1,Epiphany:e.indexOf("Epiphany")>-1,360:e.indexOf("QihooBrowser")>-1||e.indexOf("QHBrowser")>-1,"360EE":e.indexOf("360EE")>-1,"360SE":e.indexOf("360SE")>-1,UC:e.indexOf("UC")>-1||e.indexOf(" UBrowser")>-1,QQBrowser:e.indexOf("QQBrowser")>-1,QQ:e.indexOf("QQ/")>-1,Baidu:e.indexOf("Baidu")>-1||e.indexOf("BIDUBrowser")>-1,Maxthon:e.indexOf("Maxthon")>-1,Sogou:e.indexOf("MetaSr")>-1||e.indexOf("Sogou")>-1,LBBROWSER:e.indexOf("LBBROWSER")>-1,"2345Explorer":e.indexOf("2345Explorer")>-1,TheWorld:e.indexOf("TheWorld")>-1,XiaoMi:e.indexOf("MiuiBrowser")>-1,Quark:e.indexOf("Quark")>-1,Qiyu:e.indexOf("Qiyu")>-1,Wechat:e.indexOf("MicroMessenger")>-1,Taobao:e.indexOf("AliApp(TB")>-1,Alipay:e.indexOf("AliApp(AP")>-1,Weibo:e.indexOf("Weibo")>-1,Douban:e.indexOf("com.douban.frodo")>-1,Suning:e.indexOf("SNEBUY-APP")>-1,iQiYi:e.indexOf("IqiyiApp")>-1,Windows:e.indexOf("Windows")>-1,Linux:e.indexOf("Linux")>-1||e.indexOf("X11")>-1,"Mac OS":e.indexOf("Macintosh")>-1,Android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,Ubuntu:e.indexOf("Ubuntu")>-1,FreeBSD:e.indexOf("FreeBSD")>-1,Debian:e.indexOf("Debian")>-1,"Windows Phone":e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,BlackBerry:e.indexOf("BlackBerry")>-1||e.indexOf("RIM")>-1,MeeGo:e.indexOf("MeeGo")>-1,Symbian:e.indexOf("Symbian")>-1,iOS:e.indexOf("like Mac OS X")>-1,"Chrome OS":e.indexOf("CrOS")>-1,WebOS:e.indexOf("hpwOS")>-1,Mobile:e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1,Tablet:e.indexOf("Tablet")>-1||e.indexOf("Nexus 7")>-1,iPad:e.indexOf("iPad")>-1}},matchInfoMap:function(e){var t=i.navigator.userAgent||{},a=n.getMatchMap(t);for(var o in i.infoMap)for(var r=0;r<i.infoMap[o].length;r++){var s=i.infoMap[o][r];a[s]&&(e[o]=s)}},getOS:function(){var e=this;return n.matchInfoMap(e),e.os},getOSVersion:function(){var e=this,t=i.navigator.userAgent||{};e.osVersion="";var n={Windows:function(){var e=t.replace(/^.*Windows NT ([\d.]+);.*$/,"$1"),i={6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"};return i[e]||e},Android:function(){return t.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return t.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return t.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return t.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return t.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};return n[e.os]&&(e.osVersion=n[e.os](),e.osVersion==t&&(e.osVersion="")),e.osVersion},getOrientationStatu:function(){var e="",t=window.matchMedia("(orientation: portrait)");return e=t.matches?"竖屏":"横屏",e},getDeviceType:function(){var e=this;return e.device="PC",n.matchInfoMap(e),e.device},getNetwork:function(){var e=navigator&&navigator.connection&&navigator.connection.effectiveType;return e},getLanguage:function(){var e=this;return e.language=function(){var e=i.navigator.browserLanguage||i.navigator.language,t=e.split("-");return t[1]&&(t[1]=t[1].toUpperCase()),t.join("_")}(),e.language},createFingerprint:function(e){var t;function i(e){var t,i,n,a="";for(e+="",t=0,i=e.length;t<i;t++)n=e.charCodeAt(t).toString(16),a+=n.length<2?"0"+n:n;return a}var n=document.createElement("canvas"),a=n.getContext("2d"),o=e||window.location.host;a.textBaseline="top",a.font="14px 'Arial'",a.textBaseline="tencent",a.fillStyle="#f60",a.fillRect(125,1,62,20),a.fillStyle="#069",a.fillText(o,2,15),a.fillStyle="rgba(102, 204, 0, 0.7)",a.fillText(o,4,17);var r=n.toDataURL().replace("data:image/png;base64,",""),s=atob(r),l=i(s.slice(-16,-12));return t=l,t},getBrowserInfo:function(){var e=this;n.matchInfoMap(e);var a=i.navigator.userAgent||{},o=function(e,t){var n=i.navigator.mimeTypes;for(var a in n)if(n[a][e]==t)return!0;return!1},r=n.getMatchMap(a),s=!1;if(t.chrome){var l=a.replace(/^.*Chrome\/([\d]+).*$/,"$1");l>36&&t.showModalDialog?s=!0:l>45&&(s=o("type","application/vnd.chromium.remoting-viewer"))}if(r["Baidu"]&&r["Opera"]&&(r["Baidu"]=!1),r["Mobile"]&&(r["Mobile"]=!(a.indexOf("iPad")>-1)),s&&(o("type","application/gameplugin")||i.navigator&&"undefined"==typeof i.navigator["connection"]["saveData"]?r["360SE"]=!0:r["360EE"]=!0),r["IE"]||r["Edge"]){var d=window.screenTop-window.screenY;switch(d){case 71:break;case 74:break;case 99:break;case 102:r["360EE"]=!0;break;case 75:break;case 74:break;case 105:break;case 104:r["360SE"]=!0;break}}var c={Safari:function(){return a.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return a.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return a.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return a.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return a.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return a.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return a.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return a.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return a.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return a.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return a.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return a.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return a.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return a.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return a.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return a.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return a.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return a.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return a.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return a.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return a.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){var e={63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"},t=a.replace(/^.*Chrome\/([\d]+).*$/,"$1");return e[t]||""},"360EE":function(){var e={69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"},t=a.replace(/^.*Chrome\/([\d]+).*$/,"$1");return e[t]||""},Maxthon:function(){return a.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return a.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return a.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return a.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return a.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return a.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},LBBROWSER:function(){var e={57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"},t=navigator.userAgent.replace(/^.*Chrome\/([\d]+).*$/,"$1");return e[t]||""},"2345Explorer":function(){return a.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},TheWorld:function(){return a.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return a.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return a.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return a.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return a.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},Taobao:function(){return a.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return a.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return a.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return a.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return a.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return a.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}};return e.browserVersion="",c[e.browser]&&(e.browserVersion=c[e.browser](),e.browserVersion==a&&(e.browserVersion="")),"Edge"==e.browser&&(e.engine="EdgeHTML"),"Chrome"==e.browser&&parseInt(e.browserVersion)>27&&(e.engine="Blink"),"Opera"==e.browser&&parseInt(e.browserVersion)>12&&(e.engine="Blink"),"Yandex"==e.browser&&(e.engine="Blink"),e.browser+"（版本: "+e.browserVersion+"&nbsp;&nbsp;内核: "+e.engine+"）"}}}(),a=function(){return{DeviceInfoObj:function(e){e=e||{domain:""};var a={deviceType:n.getDeviceType(),OS:n.getOS(),OSVersion:n.getOSVersion(),screenHeight:t.screen.height,screenWidth:t.screen.width,language:n.getLanguage(),netWork:n.getNetwork(),orientation:n.getOrientationStatu(),browserInfo:n.getBrowserInfo(),fingerprint:n.createFingerprint(e.domain),userAgent:i.navigator.userAgent};if(!e.info||0==e.info.length)return a;var o={};for(var r in a)e.info.forEach((function(e){e.toLowerCase()==r.toLowerCase()&&(e=r,o[e]=a[e])}));return o}}}();return{getDeviceInfo:function(e){return a.DeviceInfoObj(e)}}}(),On={type(e){return Object.prototype.toString.call(e).replace(/\[object\s|\]/g,"")},isFunction(e){return"Function"===this.type(e)},isArray(e){return"Array"===this.type(e)},isNull(e){return void 0==e||""==e||null==e},objectIsNull(e){return"{}"===JSON.stringify(e)},isObject(e){return"Object"===this.type(e)}};class Nn{toReport(e,t){try{let n=JSON.stringify(t);var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/json"),i.send(n)}catch(n){console.log(n)}}}class Un{toReport(e,t){try{let i=JSON.stringify(t);fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:i,mode:"same-origin",keepalive:!0})}catch(i){(new Nn).toReport(e,t),console.log("fetch请求异常",i)}}}class Hn{toReport(e,t){try{var i=new Image;i.src=e+"?st="+(new Date).getTime()+"&"+this.formatParams(t)}catch(n){console.log(n)}}formatParams(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}}class Vn{toReport(e,t){try{t.st=(new Date).getTime(),navigator.sendBeacon&&navigator.sendBeacon(e,this.formatParamsByURLSearchParams(t))}catch(i){console.log(i)}}formatParamsByFormData(e){const t=new FormData;for(var i in e)t.append(i,e[i]);return t}formatParamsByURLSearchParams(e){const t=new URLSearchParams;for(var i in e)"object"===typeof e[i]&&(e[i]=JSON.stringify(e[i])),t.append(i,e[i]);return t}formatParams(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}}class Gn{constructor(e){this.url=e}report(e,t){let i={isFetch:!1,isXHR:!1,isImg:!1,isNavigator:!1};t=t||i,this.checkUrl(this.url)?this.sendInfo(e,t):console.log("上报信息url地址格式不正确,url=",this.url)}sendInfo(e,t={}){let i=new Un,n=new Hn,a=new Nn,o=new Vn;if(t.isImg)return void n.toReport(this.url,e);if(t.isFetch)return void i.toReport(this.url,e);if(t.isXHR)return void a.toReport(this.url,e);if(t.isNavigator)return void o.toReport(this.url,e);let r=!!(t.isFetch&&t.isImg&&t.isXHR&&t.isNavigator);r||o.toReport(this.url,e)}checkUrl(e){if(!e)return!1;var t=/^[hH][tT][tT][pP]([sS]?):\/\//;return t.test(e)}}var Yn={isStop:!0,queues:[],add:function(e,t){this.queues.push({reportUrl:e,data:t})},fire:function(){if(!this.queues||0===this.queues.length)return void(this.isStop=!0);this.isStop=!1;let e=this.queues[0];e.reportUrl&&new Gn(e.reportUrl).report(e.data),this.queues.splice(0,1),this.fire()}};class Wn{constructor(e){this.category=Ln.UNKNOW_ERROR,this.level=Fn.INFO,this.msg="",this.url="",this.line="",this.col="",this.errorObj="",this.reportUrl=e.reportUrl,this.extendsInfo=e.extendsInfo}recordError(){this.handleRecordError(),Yn.isStop&&Yn.fire()}handleRecordError(){try{if(!this.msg)return;if(this.reportUrl&&this.url&&this.url.toLowerCase().indexOf(this.reportUrl.toLowerCase())>=0)return void console.log("统计错误接口异常",this.msg);let e=this.handleErrorInfo();Yn.add(this.reportUrl,e)}catch(e){console.log(e)}}handleErrorInfo(){let e=this.getExtendsInfo(),t=e,i="",n=0;switch(this.category){case Ln.BUSINESS:if(!this.msg.textKey)return t=Object.assign({},t,this.msg),t.l=window.location.href,t;i=JSON.stringify(this.msg),n=1,t.textKey=this.msg.textKey,this.msg.h&&(t.h=this.msg.h),this.msg.text&&(t.text=this.msg.text);break;case Ln.PERFORMANCE:i=JSON.stringify(this.msg),n=1e3,t.clientInfo=this.getDeviceInfo();break;case Ln.AJAX_ERROR:i=JSON.stringify(this.msg),n=100;break;case Ln.RESOURCE_ERROR:const e={msg:this.msg,url:encodeURIComponent(this.url)};i=JSON.stringify(e),n=101;break;case Ln.JS_ERROR:i="错误类别: "+this.category+"\r\n",i+="日志信息: "+this.msg+"\r\n",i+="url: "+encodeURIComponent(this.url)+"\r\n",i+="错误行号: "+this.line+"\r\n",i+="错误列号: "+this.col+"\r\n",this.errorObj&&this.errorObj.stack&&(i+="错误栈: "+this.errorObj.stack+"\r\n"),n=102;break;default:i=this.msg,n=106;break}return t.logInfo=i,t.l=window.location.pathname,t.action=n,t}getExtendsInfo(){try{let t,i={},n=this.extendsInfo||{};for(var e in On.isFunction(n.getDynamic)&&(t=n.getDynamic()),On.isObject(t)&&(n={...n,...t}),n)On.isFunction(n[e])||(i[e]=n[e]);return i}catch(t){return console.log("call getExtendsInfo error",t),{}}}getDeviceInfo(){try{let e=zn.getDeviceInfo();return JSON.stringify(e)}catch(e){return console.log(e),""}}}function Zn(e,t){if(!e)return!0;if("string"===typeof e){if(t.startsWith("/")){if(window.location.hostname.endsWith(e))return!0}else{const i=new URL(t);if(i.hostname.endsWith(e))return!0}return!1}if("object"===typeof e&&e instanceof Array){let i=!1;return e.forEach(e=>{if("string"===typeof e)if(t.startsWith("/"))window.location.hostname.endsWith(e)&&(i=!0);else{const n=new URL(t);n.hostname.endsWith(e)&&(i=!0)}}),i}return!1}class Xn{constructor(e){this.params=e}handleError(e){switch(e){case jn.FETCH:new qn(this.params).handleError();break;case jn.DEFAULT:new Kn(this.params).handleError();break;default:new qn(this.params).handleError(),new Kn(this.params).handleError();break}}}const Jn=e=>"string"===typeof e;class qn extends Wn{constructor(e){super(e),this.ajaxDomain=e.ajaxDomain}handleError(){if(!window.fetch)return;this.level=Fn.WARN,this.category=Ln.AJAX_ERROR;let e=this,t=window.fetch;window.fetch=function(){let i=arguments,n=(new Date).getTime(),a=null;return t.apply(this,arguments).then((function(t){try{const o=t.headers?t.headers.get("content-type"):"",r=Jn(o)&&o.includes("application/json");if(r){const o=t.clone();a=o.status;let r=(new Date).getTime(),s=r-n;o.json().then((function(t){const o={fetchStart:n,url:i[0],requestOptions:i[1],status:a,responseBody:t,loadTime:s};e.msg=o,Zn(e.ajaxDomain,o.url)&&e.recordError()}))}else{const o=t.clone();a=o.status;let r=(new Date).getTime(),s=r-n;o.text().then((function(t){try{t=JSON.parse(t)}catch(ia){console.log("JSON.parse 失败")}const o={fetchStart:n,url:i[0],requestOptions:i[1],status:a,responseBody:t,loadTime:s};e.msg=o,Zn(e.ajaxDomain,o.url)&&e.recordError()}))}}catch(ia){console.log("获取响应数据上报异常"),console.log(ia)}return t})).catch((function(e){console.log("获取响应数据上报异常"),console.log(e)}))}}}class Kn extends Wn{constructor(e){super(e),this.ajaxDomain=e.ajaxDomain}handleError(){if(!window.XMLHttpRequest)return;this.level=Fn.WARN,this.category=Ln.AJAX_ERROR;let e=this,t=XMLHttpRequest.prototype.open,i=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(e,i,n){return this._url="string"===typeof i?i:i.href,this._method=e,t.call(this,e,this._url,"boolean"!==typeof n||n)},XMLHttpRequest.prototype.send=function(){let t=(new Date).getTime();return this.addEventListener&&this.addEventListener("readystatechange",(function(){if(4===this.readyState)if(this.status>=200&&this.status<300){let i=(new Date).getTime(),n=i-t;const a={method:this._method},o={fetchStart:t,url:this._url,requestOptions:a,responseBody:this.response,status:this.status,loadTime:n};e.msg=o,Zn(e.ajaxDomain,o.url)&&e.recordError()}else{let i=(new Date).getTime(),n=i-t;const a={method:this._method},o={fetchStart:t,url:this._url,requestOptions:a,status:this.status,loadTime:n};e.msg=o,Zn(e.ajaxDomain,o.url)&&e.recordError()}})),i.apply(this,arguments)}}}class $n extends Wn{constructor(e){super(e)}handleError(){this.registerInfo(),this.registerWarn(),this.registerError()}registerInfo(){let e=this;console.tInfo=function(){e.handleLog(Fn.INFO,Ln.CONSOLE_INFO,arguments)}}registerWarn(){let e=this;console.tWarn=function(){e.handleLog(Fn.WARN,Ln.CONSOLE_WARN,arguments)}}registerError(){let e=this;console.tError=function(){e.handleLog(Fn.ERROR,Ln.CONSOLE_ERROR,arguments)}}handleLog(e,t,i){try{this.level=e;let n=[...i];this.msg=n.join("\r\n"),this.url=location.href,this.category=t,this.recordError()}catch(n){console.log("console统计错误异常",e,n)}}}(function(){window.console||(window.console={});let e=["tInfo","tWarn","tError"];e.forEach((e,t)=>{console[e]||(console[e]=function(){})})})();class Qn extends Wn{constructor(e){super(e)}handleError(){window.onerror=(e,t,i,n,a)=>{console.log("monitor onerror");try{this.level=Fn.WARN,this.category=Ln.JS_ERROR,this.msg=e,this.url=t,this.line=i,this.col=n,this.errorObj=a,this.recordError()}catch(a){console.log("js错误异常",a)}}}}class ea extends Wn{constructor(e){super(e)}handleError(){window.addEventListener("unhandledrejection",e=>{try{if(!e||!e.reason)return;e.reason.config&&e.reason.config.url&&(this.url=e.reason.config.url),this.level=Fn.WARN,this.category=Ln.PROMISE_ERROR,this.msg=e.reason,this.recordError()}catch(t){console.log(t)}},!0)}}class ta extends Wn{constructor(e){super(e)}handleError(){window.addEventListener("error",e=>{console.log("monitor addEventListener error");try{if(!e)return;this.category=Ln.RESOURCE_ERROR;let i=e.target||e.srcElement;var t=i instanceof HTMLScriptElement||i instanceof HTMLLinkElement||i instanceof HTMLImageElement;if(!t)return;this.level="IMG"===i.tagName.toUpperCase()?Fn.WARN:Fn.ERROR,this.msg="加载 "+i.tagName+" 资源错误",this.url=i.src||i.href,this.errorObj=i,this.recordError()}catch(i){console.log("资源加载收集异常",i)}},!0)}}var ia,na,aa,oa,ra=-1,sa=function(e){addEventListener("pageshow",(function(t){t.persisted&&(ra=t.timeStamp,e(t))}),!0)},la=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},da=function(){var e=la();return e&&e.activationStart||0},ca=function(e,t){var i=la(),n="navigate";return ra>=0?n="back-forward-cache":i&&(document.prerendering||da()>0?n="prerender":document.wasDiscarded?n="restore":i.type&&(n=i.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},ua=function(e,t,i){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},i||{})),n}}catch(e){}},ha=function(e,t,i,n){var a,o;return function(r){t.value>=0&&(r||n)&&((o=t.value-(a||0))||void 0===a)&&(a=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,i),e(t))}},xa=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},fa=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},pa=function(e){var t=!1;return function(i){t||(e(i),t=!0)}},ma=-1,_a=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ga=function(e){"hidden"===document.visibilityState&&ma>-1&&(ma="visibilitychange"===e.type?e.timeStamp:0,ya())},va=function(){addEventListener("visibilitychange",ga,!0),addEventListener("prerenderingchange",ga,!0)},ya=function(){removeEventListener("visibilitychange",ga,!0),removeEventListener("prerenderingchange",ga,!0)},ba=function(){return ma<0&&(ma=_a(),va(),sa((function(){setTimeout((function(){ma=_a(),va()}),0)}))),{get firstHiddenTime(){return ma}}},Sa=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Ca=[1800,3e3],wa=function(e,t){t=t||{},Sa((function(){var i,n=ba(),a=ca("FCP"),o=ua("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<n.firstHiddenTime&&(a.value=Math.max(e.startTime-da(),0),a.entries.push(e),i(!0)))}))}));o&&(i=ha(e,a,Ca,t.reportAllChanges),sa((function(n){a=ca("FCP"),i=ha(e,a,Ca,t.reportAllChanges),xa((function(){a.value=performance.now()-n.timeStamp,i(!0)}))})))}))},Ta=[.1,.25],Pa=function(e,t){t=t||{},wa(pa((function(){var i,n=ca("CLS",0),a=0,o=[],r=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],i=o[o.length-1];a&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,o.push(e)):(a=e.value,o=[e])}})),a>n.value&&(n.value=a,n.entries=o,i())},s=ua("layout-shift",r);s&&(i=ha(e,n,Ta,t.reportAllChanges),fa((function(){r(s.takeRecords()),i(!0)})),sa((function(){a=0,n=ca("CLS",0),i=ha(e,n,Ta,t.reportAllChanges),xa((function(){return i()}))})),setTimeout(i,0))})))},Ea={passive:!0,capture:!0},ka=new Date,Ra=function(e,t){ia||(ia=t,na=e,aa=new Date,Ma(removeEventListener),Ia())},Ia=function(){if(na>=0&&na<aa-ka){var e={entryType:"first-input",name:ia.type,target:ia.target,cancelable:ia.cancelable,startTime:ia.timeStamp,processingStart:ia.timeStamp+na};oa.forEach((function(t){t(e)})),oa=[]}},Da=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var i=function(){Ra(e,t),a()},n=function(){a()},a=function(){removeEventListener("pointerup",i,Ea),removeEventListener("pointercancel",n,Ea)};addEventListener("pointerup",i,Ea),addEventListener("pointercancel",n,Ea)}(t,e):Ra(t,e)}},Ma=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Da,Ea)}))},Aa=[100,300],Ba=function(e,t){t=t||{},Sa((function(){var i,n=ba(),a=ca("FID"),o=function(e){e.startTime<n.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),i(!0))},r=function(e){e.forEach(o)},s=ua("first-input",r);i=ha(e,a,Aa,t.reportAllChanges),s&&fa(pa((function(){r(s.takeRecords()),s.disconnect()}))),s&&sa((function(){var n;a=ca("FID"),i=ha(e,a,Aa,t.reportAllChanges),oa=[],na=-1,ia=null,Ma(addEventListener),n=o,oa.push(n),Ia()}))}))},La=[2500,4e3],Fa={},ja=function(e,t){t=t||{},Sa((function(){var i,n=ba(),a=ca("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(a.value=Math.max(t.startTime-da(),0),a.entries=[t],i())},r=ua("largest-contentful-paint",o);if(r){i=ha(e,a,La,t.reportAllChanges);var s=pa((function(){Fa[a.id]||(o(r.takeRecords()),r.disconnect(),Fa[a.id]=!0,i(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,s,!0)})),fa(s),sa((function(n){a=ca("LCP"),i=ha(e,a,La,t.reportAllChanges),xa((function(){a.value=performance.now()-n.timeStamp,Fa[a.id]=!0,i(!0)}))}))}}))},za=[800,1800],Oa=function e(t){document.prerendering?Sa((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Na=function(e,t){t=t||{};var i=ca("TTFB"),n=ha(e,i,za,t.reportAllChanges);Oa((function(){var a=la();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;i.value=Math.max(o-da(),0),i.entries=[a],n(!0),sa((function(){i=ca("TTFB",0),(n=ha(e,i,za,t.reportAllChanges))(!0)}))}}))};class Ua extends Wn{constructor(e){super(e||{}),this.category=Ln.PERFORMANCE,this.reportUrl=e.reportUrl||"",this.performanceData={},this.saveData=this.saveData.bind(this),wa(this.saveData),Ba(this.saveData),ja(this.saveData),Pa(this.saveData),Na(this.saveData)}saveData(e){this.performanceData[e.name]=e.value,"LCP"===e.name&&this.record(this.performanceData)}record(e){this.msg=e,this.recordError()}}const Ha="textkey",Va="common_a",Ga=/((<(A|B|BUTTON|DIV|H1|H2|H3|H4|H5|H6|P|IMG|SPAN|TABLE|TD|TEXTAREA|VIDEO)([^<>])*>)([^<>])+(<\/(A|B|BUTTON|DIV|H1|H2|H3|H4|H5|H6|P|IMG|SPAN|TABLE|TD|TEXTAREA|VIDEO)>)|(<(IMG|VIDEO)(.)+>))/i,Ya=20;function Wa(e){var t=e.nodeName,i="";if(e.hasAttribute("data-monitor")&&e.getAttribute("data-monitor"))return i=e.getAttribute("data-monitor"),(""+i).slice(0,Ya);var n=e.outerHTML.match(Ga);if(n&&n.length>0)switch(t){case"IMG":i=e.getAttribute("alt");break;default:i=n[0].match(/>[^<>]+<\//)?n[0].match(/>[^<>]+<\//)[0]:"",i=i.replace(/[^A-Za-z0-9\u4e00-\u9fa5]/g,"");break}return(""+i).slice(0,Ya)}class Za extends Wn{constructor(e){super(e||{}),this.category=Ln.BUSINESS,this.reportUrl=e.reportUrl||"";const t=e.keyName||Ha,i=this;window.addEventListener("click",(function(e){let n=e.target;if(!n)return!1;let a=n.getAttribute(t),o=n.getAttribute("link")||n.getAttribute("href");if(a||o){const e={textKey:a||Va};o&&(e.h=o);const t=Wa(n);t&&(e.text=t),i.record(e)}else{while(!a&&!o&&n.parentNode)n=n.parentNode,n.getAttribute&&(a=n.getAttribute(t),o=n.getAttribute("link")||n.getAttribute("href"));if(a||o){const e={textKey:a||Va};o&&(e.h=o);const t=Wa(n);t&&(e.text=t),i.record(e)}}}))}record(e){this.msg=e,this.recordError()}}class Xa extends Wn{constructor(e){super(e||{}),this.category=Ln.BUSINESS,this.reportUrl=e.reportUrl||""}record(e){this.msg=e,this.recordError()}}Date.prototype.format=function(e){let t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},i={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+i[this.getDay()+""]));for(let n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};class Ja{constructor(e){this.jsError=!0,this.promiseError=!0,this.resourceError=!0,this.ajaxError=!0,this.ajaxDomain=null,this.isReportHref=!1,this.consoleError=!1,e=e||{},this.jsError=!(!1===e.jsError),this.promiseError=!(!1===e.promiseError),this.resourceError=!(!1===e.resourceError),this.consoleError=!0===e.consoleError,this.ajaxError=!(!1===e.ajaxError),this.ajaxDomain=e.ajaxDomain||this.ajaxDomain,this.isReportHref=e.isReportHref||this.isReportHref,this.business=!(!1===e.business),this.reportUrl=e.url,this.performace=!(!1===e.performace),this.extendsInfo=e.extendsInfo||{};let t={reportUrl:this.reportUrl,extendsInfo:this.extendsInfo};if(this.jsError&&new Qn(t).handleError(),this.promiseError&&new ea(t).handleError(),this.resourceError&&new ta(t).handleError(),this.ajaxError){let e=Object.assign({},t,{ajaxDomain:this.ajaxDomain});new Xn(e).handleError()}this.consoleError&&new $n(t).handleError(),this.performace&&new Ua(t),this.business&&new Za(t),this.manual=new Xa(t)}report(e){return this.manual&&this.manual.record(e),this}}var qa="https://log.ys7.com/statistics.do/opensdk_ezuikit";window.monitorExtendsInfo={},window.ezuikitMonitor=new Ja({ajaxDomain:["open.ys7.com",".ezvizlife.com"],url:qa,extendsInfo:{v:Bn.version,getDynamic:function(){return window.monitorExtendsInfo}}});var Ka={Core:y,HLS:j,FLV:U,EZUIKitPlayer:an,EZUIKitHD:hn,EZWebRtc:yn};return window.EZUIKit=Ka,Ka}))}).call(this,n("c8ba"),n("62e4")(e))}}]);