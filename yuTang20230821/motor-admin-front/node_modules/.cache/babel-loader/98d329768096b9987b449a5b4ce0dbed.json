{"remainingRequest":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\babel-loader\\lib\\index.js!D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\src\\store\\modules\\user.js","mtime":1688954676000},{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688952586000},{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1688952406000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiB9IGZyb20gIkAvYXBpL3VzZXIiOwppbXBvcnQgeyBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gIkAvcm91dGVyIjsKCnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiAiIiwKICAgIGFkbWluSW5mbzoge30sCiAgICBuYW1lOiAiIiwKICAgIGF2YXRhcjogIiIsCiAgICB1c2VySWQ6IDAsCiAgICBzaWRlYmFyTmF2OiB7fQogIH07Cn07Cgp2YXIgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKdmFyIG11dGF0aW9ucyA9IHsKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQURNSU5fSU5GTzogZnVuY3Rpb24gU0VUX0FETUlOX0lORk8oc3RhdGUsIGluZm8pIHsKICAgIHN0YXRlLmFkbWluSW5mbyA9IGluZm87CiAgfSwKICBTRVRfQURNSU5fTkFWOiBmdW5jdGlvbiBTRVRfQURNSU5fTkFWKHN0YXRlLCBuYXYpIHsKICAgIHN0YXRlLnNpZGViYXJOYXYgPSBuYXY7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9VU0VSX0lEOiBmdW5jdGlvbiBTRVRfVVNFUl9JRChzdGF0ZSwgaWQpIHsKICAgIHN0YXRlLnVzZXJJZCA9IGlkOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dpbih7CiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgZGF0YS50b2tlbik7CiAgICAgICAgY29tbWl0KCJTRVRfQURNSU5fSU5GTyIsIGRhdGEuYWRtaW5faW5mbyk7CiAgICAgICAgY29tbWl0KCJTRVRfQURNSU5fTkFWIiwgZGF0YS5uYXYpOwogICAgICAgIHZhciBfZGF0YSRhZG1pbl9pbmZvID0gZGF0YS5hZG1pbl9pbmZvLAogICAgICAgICAgICB1c2VybmFtZSA9IF9kYXRhJGFkbWluX2luZm8udXNlcm5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IF9kYXRhJGFkbWluX2luZm8uYXZhdGFyLAogICAgICAgICAgICBpZCA9IF9kYXRhJGFkbWluX2luZm8uaWQ7CiAgICAgICAgY29tbWl0KCJTRVRfTkFNRSIsIHVzZXJuYW1lKTsKICAgICAgICBjb21taXQoIlNFVF9BVkFUQVIiLCBhdmF0YXIpOwogICAgICAgIGNvbW1pdCgiU0VUX1VTRVJfSUQiLCBpZCk7CiAgICAgICAgc2V0VG9rZW4oZGF0YS50b2tlbik7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgey8vIGdldEluZm8oc3RhdGUudG9rZW4pCiAgICAgIC8vICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyAgICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZQogICAgICAvLyAgICAgaWYgKCFkYXRhKSB7CiAgICAgIC8vICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKQogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgY29uc3QgeyBuYW1lLCBhdmF0YXIgfSA9IGRhdGEKICAgICAgLy8gICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKQogICAgICAvLyAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKQogICAgICAvLyAgICAgcmVzb2x2ZShkYXRhKQogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gICAgIHJlamVjdChlcnJvcikKICAgICAgLy8gICB9KQogICAgfSk7CiAgfSwKICAvLyB1c2UKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgIHJlc2V0Um91dGVyKCk7CiAgICBjb21taXQoIlJFU0VUX1NUQVRFIik7CiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsgLy8gcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIC8vICAgbG9nb3V0KHN0YXRlLnRva2VuKQogICAgLy8gICAgIC50aGVuKCgpID0+IHsKICAgIC8vICAgICAgIHJlbW92ZVRva2VuKCkgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgLy8gICAgICAgcmVzZXRSb3V0ZXIoKQogICAgLy8gICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpCiAgICAvLyAgICAgICByZXNvbHZlKCkKICAgIC8vICAgICB9KQogICAgLy8gICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAvLyAgICAgICByZWplY3QoZXJyb3IpCiAgICAvLyAgICAgfSkKICAgIC8vIH0pCiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICAgIGNvbW1pdCgiUkVTRVRfU1RBVEUiKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["D:/ws_yutang/yuTang20230821/yuTang20230821/motor-admin-front/src/store/modules/user.js"],"names":["login","setToken","removeToken","resetRouter","getDefaultState","token","adminInfo","name","avatar","userId","sidebarNav","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_ADMIN_INFO","info","SET_ADMIN_NAV","nav","SET_AVATAR","SET_USER_ID","id","actions","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","console","log","data","admin_info","catch","error","getInfo","logout","localStorage","clear","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { login } from \"@/api/user\";\nimport { setToken, removeToken } from \"@/utils/auth\";\nimport { resetRouter } from \"@/router\";\n\nconst getDefaultState = () => {\n  return {\n    token: \"\",\n    adminInfo: {},\n    name: \"\",\n    avatar: \"\",\n    userId: 0,\n    sidebarNav: {}\n  };\n};\n\nconst state = getDefaultState();\n\nconst mutations = {\n  RESET_STATE: state => {\n    Object.assign(state, getDefaultState());\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token;\n  },\n  SET_NAME: (state, name) => {\n    state.name = name;\n  },\n  SET_ADMIN_INFO: (state, info) => {\n    state.adminInfo = info;\n  },\n  SET_ADMIN_NAV: (state, nav) => {\n    state.sidebarNav = nav;\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar;\n  },\n  SET_USER_ID: (state, id) => {\n    state.userId = id;\n  }\n};\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { username, password } = userInfo;\n    return new Promise((resolve, reject) => {\n      login({ username: username.trim(), password: password })\n        .then(response => {\n          console.log(response);\n\n          const { data } = response;\n          commit(\"SET_TOKEN\", data.token);\n          commit(\"SET_ADMIN_INFO\", data.admin_info);\n          commit(\"SET_ADMIN_NAV\", data.nav);\n          const { username, avatar, id } = data.admin_info;\n          commit(\"SET_NAME\", username);\n          commit(\"SET_AVATAR\", avatar);\n          commit(\"SET_USER_ID\", id);\n          setToken(data.token);\n          resolve(response.data);\n        })\n        .catch(error => {\n          reject(error);\n        });\n    });\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      // getInfo(state.token)\n      //   .then(response => {\n      //     const { data } = response\n      //     if (!data) {\n      //       return reject('Verification failed, please Login again.')\n      //     }\n      //     const { name, avatar } = data\n      //     commit('SET_NAME', name)\n      //     commit('SET_AVATAR', avatar)\n      //     resolve(data)\n      //   })\n      //   .catch(error => {\n      //     reject(error)\n      //   })\n    });\n  },\n\n  // use\n  logout({ commit, state }) {\n    removeToken(); // must remove  token  first\n    resetRouter();\n    commit(\"RESET_STATE\");\n    localStorage.clear();\n    // return new Promise((resolve, reject) => {\n    //   logout(state.token)\n    //     .then(() => {\n    //       removeToken() // must remove  token  first\n    //       resetRouter()\n    //       commit('RESET_STATE')\n    //       resolve()\n    //     })\n    //     .catch(error => {\n    //       reject(error)\n    //     })\n    // })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken(); // must remove  token  first\n      commit(\"RESET_STATE\");\n      resolve();\n    });\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};\n"]}]}