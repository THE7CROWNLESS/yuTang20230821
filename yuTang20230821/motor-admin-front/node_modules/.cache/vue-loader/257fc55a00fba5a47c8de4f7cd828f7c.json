{"remainingRequest":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\src\\components\\Tinymce\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\src\\components\\Tinymce\\index.vue","mtime":1688954672000},{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688952586000},{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1688952406000},{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688952586000},{"path":"D:\\ws_yutang\\yuTang20230821\\yuTang20230821\\motor-admin-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1688954532000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovKioNCiAqIGRvY3M6DQogKiBodHRwczovL3BhbmppYWNoZW4uZ2l0aHViLmlvL3Z1ZS1lbGVtZW50LWFkbWluLXNpdGUvZmVhdHVyZS9jb21wb25lbnQvcmljaC1lZGl0b3IuaHRtbCN0aW55bWNlDQogKi8NCmltcG9ydCBlZGl0b3JJbWFnZSBmcm9tICIuL2NvbXBvbmVudHMvRWRpdG9ySW1hZ2UiOw0KaW1wb3J0IHBsdWdpbnMgZnJvbSAiLi9wbHVnaW5zIjsNCmltcG9ydCB0b29sYmFyIGZyb20gIi4vdG9vbGJhciI7DQppbXBvcnQgbG9hZCBmcm9tICIuL2R5bmFtaWNMb2FkU2NyaXB0IjsNCg0KLy8gd2h5IHVzZSB0aGlzIGNkbiwgZGV0YWlsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi90aW55bWNlLWFsbC1pbi1vbmUNCmNvbnN0IHRpbnltY2VDRE4gPQ0KICAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS90aW55bWNlLWFsbC1pbi1vbmVANC45LjMvdGlueW1jZS5taW4uanMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJUaW55bWNlIiwNCiAgY29tcG9uZW50czogeyBlZGl0b3JJbWFnZSB9LA0KICBwcm9wczogew0KICAgIGlkOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAidnVlLXRpbnltY2UtIiArDQogICAgICAgICAgK25ldyBEYXRlKCkgKw0KICAgICAgICAgICgoTWF0aC5yYW5kb20oKSAqIDEwMDApLnRvRml4ZWQoMCkgKyAiIikNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHZhbHVlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAiIg0KICAgIH0sDQogICAgdG9vbGJhcjogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW107DQogICAgICB9DQogICAgfSwNCiAgICBtZW51YmFyOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAiZmlsZSBlZGl0IGluc2VydCB2aWV3IGZvcm1hdCB0YWJsZSINCiAgICB9LA0KICAgIGhlaWdodDogew0KICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgIGRlZmF1bHQ6IDM2MA0KICAgIH0sDQogICAgd2lkdGg6IHsNCiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiAiYXV0byINCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGhhc0NoYW5nZTogZmFsc2UsDQogICAgICBoYXNJbml0OiBmYWxzZSwNCiAgICAgIHRpbnltY2VJZDogdGhpcy5pZCwNCiAgICAgIGZ1bGxzY3JlZW46IGZhbHNlLA0KICAgICAgbGFuZ3VhZ2VUeXBlTGlzdDogew0KICAgICAgICBlbjogImVuIiwNCiAgICAgICAgemg6ICJ6aF9DTiIsDQogICAgICAgIGVzOiAiZXNfTVgiLA0KICAgICAgICBqYTogImphIg0KICAgICAgfQ0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgY29udGFpbmVyV2lkdGgoKSB7DQogICAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGg7DQogICAgICBpZiAoL15bXGRdKyhcLltcZF0rKT8kLy50ZXN0KHdpZHRoKSkgew0KICAgICAgICAvLyBtYXRjaGVzIGAxMDBgLCBgJzEwMCdgDQogICAgICAgIHJldHVybiBgJHt3aWR0aH1weGA7DQogICAgICB9DQogICAgICByZXR1cm4gd2lkdGg7DQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIHZhbHVlKHZhbCkgew0KICAgICAgaWYgKCF0aGlzLmhhc0NoYW5nZSAmJiB0aGlzLmhhc0luaXQpIHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4NCiAgICAgICAgICB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpLnNldENvbnRlbnQodmFsIHx8ICIiKQ0KICAgICAgICApOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXQoKTsNCiAgfSwNCiAgYWN0aXZhdGVkKCkgew0KICAgIGlmICh3aW5kb3cudGlueW1jZSkgew0KICAgICAgdGhpcy5pbml0VGlueW1jZSgpOw0KICAgIH0NCiAgfSwNCiAgZGVhY3RpdmF0ZWQoKSB7DQogICAgdGhpcy5kZXN0cm95VGlueW1jZSgpOw0KICB9LA0KICBkZXN0cm95ZWQoKSB7DQogICAgdGhpcy5kZXN0cm95VGlueW1jZSgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdCgpIHsNCiAgICAgIC8vIGR5bmFtaWMgbG9hZCB0aW55bWNlIGZyb20gY2RuDQogICAgICBsb2FkKHRpbnltY2VDRE4sIGVyciA9PiB7DQogICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tZXNzYWdlKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5pbml0VGlueW1jZSgpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBpbml0VGlueW1jZSgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIHdpbmRvdy50aW55bWNlLmluaXQoew0KICAgICAgICBzZWxlY3RvcjogYCMke3RoaXMudGlueW1jZUlkfWAsDQogICAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlVHlwZUxpc3RbInpoIl0sDQogICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsDQogICAgICAgIGJvZHlfY2xhc3M6ICJwYW5lbC1ib2R5ICIsDQogICAgICAgIG9iamVjdF9yZXNpemluZzogZmFsc2UsDQogICAgICAgIHRvb2xiYXI6IHRoaXMudG9vbGJhci5sZW5ndGggPiAwID8gdGhpcy50b29sYmFyIDogdG9vbGJhciwNCiAgICAgICAgbWVudWJhcjogdGhpcy5tZW51YmFyLA0KICAgICAgICBmb250c2l6ZV9mb3JtYXRzOiAiOHB0IDEwcHQgMTJwdCAxNHB0IDE4cHQgMjRwdCAzNnB0IiwNCiAgICAgICAgZm9udF9mb3JtYXRzOg0KICAgICAgICAgICLlrovkvZM95a6L5L2TO+m7keS9kz3pu5HkvZM75Lu/5a6LX0dCMjMxMj3ku7/lrotfR0IyMzEyO+alt+S9k19HQjIzMTI95qW35L2TX0dCMjMxMjvpmrbkuaY96Zq25LmmO+W5vOWchj3lubzlnIY75b6u6L2v6ZuF6buRPW1pY3Jvc29mdCB5YWhlaTtBcmlhbD1hcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsgQ291cmllciBOZXc9Y291cmllciBuZXcsY291cmllcixtb25vc3BhY2U7IEFrcnV0aUtuZFBhZG1pbmk9QWtwZG1pLW47IiwNCiAgICAgICAgcGx1Z2luczogcGx1Z2lucywNCiAgICAgICAgZW5kX2NvbnRhaW5lcl9vbl9lbXB0eV9ibG9jazogdHJ1ZSwNCiAgICAgICAgcG93ZXJwYXN0ZV93b3JkX2ltcG9ydDogImNsZWFuIiwNCiAgICAgICAgY29kZV9kaWFsb2dfaGVpZ2h0OiA0NTAsDQogICAgICAgIGNvZGVfZGlhbG9nX3dpZHRoOiAxMDAwLA0KICAgICAgICBhZHZsaXN0X2J1bGxldF9zdHlsZXM6ICJzcXVhcmUiLA0KICAgICAgICBhZHZsaXN0X251bWJlcl9zdHlsZXM6ICJkZWZhdWx0IiwNCiAgICAgICAgaW1hZ2V0b29sc19jb3JzX2hvc3RzOiBbInd3dy50aW55bWNlLmNvbSIsICJjb2RlcGVuLmlvIl0sDQogICAgICAgIGRlZmF1bHRfbGlua190YXJnZXQ6ICJfYmxhbmsiLA0KICAgICAgICBsaW5rX3RpdGxlOiBmYWxzZSwNCiAgICAgICAgbm9uYnJlYWtpbmdfZm9yY2VfdGFiOiB0cnVlLCAvLyBpbnNlcnRpbmcgbm9uYnJlYWtpbmcgc3BhY2UgJm5ic3A7IG5lZWQgTm9uYnJlYWtpbmcgU3BhY2UgUGx1Z2luDQogICAgICAgIGluaXRfaW5zdGFuY2VfY2FsbGJhY2s6IGVkaXRvciA9PiB7DQogICAgICAgICAgaWYgKF90aGlzLnZhbHVlKSB7DQogICAgICAgICAgICBlZGl0b3Iuc2V0Q29udGVudChfdGhpcy52YWx1ZSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIF90aGlzLmhhc0luaXQgPSB0cnVlOw0KICAgICAgICAgIGVkaXRvci5vbigiTm9kZUNoYW5nZSBDaGFuZ2UgS2V5VXAgU2V0Q29udGVudCIsICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgZWRpdG9yLmdldENvbnRlbnQoKSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHNldHVwKGVkaXRvcikgew0KICAgICAgICAgIGVkaXRvci5vbigiRnVsbHNjcmVlblN0YXRlQ2hhbmdlZCIsIGUgPT4gew0KICAgICAgICAgICAgX3RoaXMuZnVsbHNjcmVlbiA9IGUuc3RhdGU7DQogICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIGl0IHdpbGwgdHJ5IHRvIGtlZXAgdGhlc2UgVVJMcyBpbnRhY3QNCiAgICAgICAgLy8gaHR0cHM6Ly93d3cudGlueS5jbG91ZC9kb2NzLTN4L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL0NvbmZpZ3VyYXRpb24zeEBjb252ZXJ0X3VybHMvDQogICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUxOTYyMDUvZGlzYWJsZS10aW55bWNlLWFic29sdXRlLXRvLXJlbGF0aXZlLXVybC1jb252ZXJzaW9ucw0KICAgICAgICBjb252ZXJ0X3VybHM6IGZhbHNlDQogICAgICAgIC8vIOaVtOWQiOS4g+eJm+S4iuS8oA0KICAgICAgICAvLyBpbWFnZXNfZGF0YWltZ19maWx0ZXIoaW1nKSB7DQogICAgICAgIC8vICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIC8vICAgICBjb25zdCAkaW1hZ2UgPSAkKGltZyk7DQogICAgICAgIC8vICAgICAkaW1hZ2UucmVtb3ZlQXR0cignd2lkdGgnKTsNCiAgICAgICAgLy8gICAgICRpbWFnZS5yZW1vdmVBdHRyKCdoZWlnaHQnKTsNCiAgICAgICAgLy8gICAgIGlmICgkaW1hZ2VbMF0uaGVpZ2h0ICYmICRpbWFnZVswXS53aWR0aCkgew0KICAgICAgICAvLyAgICAgICAkaW1hZ2UuYXR0cignZGF0YS13c2NudHlwZScsICdpbWFnZScpOw0KICAgICAgICAvLyAgICAgICAkaW1hZ2UuYXR0cignZGF0YS13c2NuaCcsICRpbWFnZVswXS5oZWlnaHQpOw0KICAgICAgICAvLyAgICAgICAkaW1hZ2UuYXR0cignZGF0YS13c2NudycsICRpbWFnZVswXS53aWR0aCk7DQogICAgICAgIC8vICAgICAgICRpbWFnZS5hZGRDbGFzcygnd3NjbnBoJyk7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vICAgfSwgMCk7DQogICAgICAgIC8vICAgcmV0dXJuIGltZw0KICAgICAgICAvLyB9LA0KICAgICAgICAvLyBpbWFnZXNfdXBsb2FkX2hhbmRsZXIoYmxvYkluZm8sIHN1Y2Nlc3MsIGZhaWx1cmUsIHByb2dyZXNzKSB7DQogICAgICAgIC8vICAgcHJvZ3Jlc3MoMCk7DQogICAgICAgIC8vICAgY29uc3QgdG9rZW4gPSBfdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbjsNCiAgICAgICAgLy8gICBnZXRUb2tlbih0b2tlbikudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIC8vICAgICBjb25zdCB1cmwgPSByZXNwb25zZS5kYXRhLnFpbml1X3VybDsNCiAgICAgICAgLy8gICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgIC8vICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Rva2VuJywgcmVzcG9uc2UuZGF0YS5xaW5pdV90b2tlbik7DQogICAgICAgIC8vICAgICBmb3JtRGF0YS5hcHBlbmQoJ2tleScsIHJlc3BvbnNlLmRhdGEucWluaXVfa2V5KTsNCiAgICAgICAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2JJbmZvLmJsb2IoKSwgdXJsKTsNCiAgICAgICAgLy8gICAgIHVwbG9hZChmb3JtRGF0YSkudGhlbigoKSA9PiB7DQogICAgICAgIC8vICAgICAgIHN1Y2Nlc3ModXJsKTsNCiAgICAgICAgLy8gICAgICAgcHJvZ3Jlc3MoMTAwKTsNCiAgICAgICAgLy8gICAgIH0pDQogICAgICAgIC8vICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgLy8gICAgIGZhaWx1cmUoJ+WHuueOsOacquefpemXrumimO+8jOWIt+aWsOmhtemdou+8jOaIluiAheiBlOezu+eoi+W6j+WRmCcpDQogICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAvLyAgIH0pOw0KICAgICAgICAvLyB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICBkZXN0cm95VGlueW1jZSgpIHsNCiAgICAgIGNvbnN0IHRpbnltY2UgPSB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpOw0KICAgICAgaWYgKHRoaXMuZnVsbHNjcmVlbikgew0KICAgICAgICB0aW55bWNlLmV4ZWNDb21tYW5kKCJtY2VGdWxsU2NyZWVuIik7DQogICAgICB9DQoNCiAgICAgIGlmICh0aW55bWNlKSB7DQogICAgICAgIHRpbnltY2UuZGVzdHJveSgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2V0Q29udGVudCh2YWx1ZSkgew0KICAgICAgd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKS5zZXRDb250ZW50KHZhbHVlKTsNCiAgICB9LA0KICAgIGdldENvbnRlbnQoKSB7DQogICAgICB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpLmdldENvbnRlbnQoKTsNCiAgICB9LA0KICAgIGltYWdlU3VjY2Vzc0NCSyhhcnIpIHsNCiAgICAgIGFyci5mb3JFYWNoKHYgPT4NCiAgICAgICAgd2luZG93LnRpbnltY2UNCiAgICAgICAgICAuZ2V0KHRoaXMudGlueW1jZUlkKQ0KICAgICAgICAgIC5pbnNlcnRDb250ZW50KGA8aW1nIGNsYXNzPSJ3c2NucGgiIHNyYz0iJHt2LnVybH0iID5gKQ0KICAgICAgKTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Tinymce","sourcesContent":["<template>\r\n  <div\r\n    :class=\"{ fullscreen: fullscreen }\"\r\n    class=\"tinymce-container\"\r\n    :style=\"{ width: containerWidth }\"\r\n  >\r\n    <textarea :id=\"tinymceId\" class=\"tinymce-textarea\" />\r\n    <div class=\"editor-custom-btn-container\">\r\n      <editorImage\r\n        color=\"#1890ff\"\r\n        class=\"editor-upload-btn\"\r\n        @successCBK=\"imageSuccessCBK\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * docs:\r\n * https://panjiachen.github.io/vue-element-admin-site/feature/component/rich-editor.html#tinymce\r\n */\r\nimport editorImage from \"./components/EditorImage\";\r\nimport plugins from \"./plugins\";\r\nimport toolbar from \"./toolbar\";\r\nimport load from \"./dynamicLoadScript\";\r\n\r\n// why use this cdn, detail see https://github.com/PanJiaChen/tinymce-all-in-one\r\nconst tinymceCDN =\r\n  \"https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js\";\r\n\r\nexport default {\r\n  name: \"Tinymce\",\r\n  components: { editorImage },\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: function() {\r\n        return (\r\n          \"vue-tinymce-\" +\r\n          +new Date() +\r\n          ((Math.random() * 1000).toFixed(0) + \"\")\r\n        );\r\n      }\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    toolbar: {\r\n      type: Array,\r\n      required: false,\r\n      default() {\r\n        return [];\r\n      }\r\n    },\r\n    menubar: {\r\n      type: String,\r\n      default: \"file edit insert view format table\"\r\n    },\r\n    height: {\r\n      type: [Number, String],\r\n      required: false,\r\n      default: 360\r\n    },\r\n    width: {\r\n      type: [Number, String],\r\n      required: false,\r\n      default: \"auto\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      hasChange: false,\r\n      hasInit: false,\r\n      tinymceId: this.id,\r\n      fullscreen: false,\r\n      languageTypeList: {\r\n        en: \"en\",\r\n        zh: \"zh_CN\",\r\n        es: \"es_MX\",\r\n        ja: \"ja\"\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    containerWidth() {\r\n      const width = this.width;\r\n      if (/^[\\d]+(\\.[\\d]+)?$/.test(width)) {\r\n        // matches `100`, `'100'`\r\n        return `${width}px`;\r\n      }\r\n      return width;\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      if (!this.hasChange && this.hasInit) {\r\n        this.$nextTick(() =>\r\n          window.tinymce.get(this.tinymceId).setContent(val || \"\")\r\n        );\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  activated() {\r\n    if (window.tinymce) {\r\n      this.initTinymce();\r\n    }\r\n  },\r\n  deactivated() {\r\n    this.destroyTinymce();\r\n  },\r\n  destroyed() {\r\n    this.destroyTinymce();\r\n  },\r\n  methods: {\r\n    init() {\r\n      // dynamic load tinymce from cdn\r\n      load(tinymceCDN, err => {\r\n        if (err) {\r\n          this.$message.error(err.message);\r\n          return;\r\n        }\r\n        this.initTinymce();\r\n      });\r\n    },\r\n    initTinymce() {\r\n      const _this = this;\r\n      window.tinymce.init({\r\n        selector: `#${this.tinymceId}`,\r\n        language: this.languageTypeList[\"zh\"],\r\n        height: this.height,\r\n        body_class: \"panel-body \",\r\n        object_resizing: false,\r\n        toolbar: this.toolbar.length > 0 ? this.toolbar : toolbar,\r\n        menubar: this.menubar,\r\n        fontsize_formats: \"8pt 10pt 12pt 14pt 18pt 24pt 36pt\",\r\n        font_formats:\r\n          \"宋体=宋体;黑体=黑体;仿宋_GB2312=仿宋_GB2312;楷体_GB2312=楷体_GB2312;隶书=隶书;幼圆=幼圆;微软雅黑=microsoft yahei;Arial=arial,helvetica,sans-serif; Courier New=courier new,courier,monospace; AkrutiKndPadmini=Akpdmi-n;\",\r\n        plugins: plugins,\r\n        end_container_on_empty_block: true,\r\n        powerpaste_word_import: \"clean\",\r\n        code_dialog_height: 450,\r\n        code_dialog_width: 1000,\r\n        advlist_bullet_styles: \"square\",\r\n        advlist_number_styles: \"default\",\r\n        imagetools_cors_hosts: [\"www.tinymce.com\", \"codepen.io\"],\r\n        default_link_target: \"_blank\",\r\n        link_title: false,\r\n        nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\r\n        init_instance_callback: editor => {\r\n          if (_this.value) {\r\n            editor.setContent(_this.value);\r\n          }\r\n          _this.hasInit = true;\r\n          editor.on(\"NodeChange Change KeyUp SetContent\", () => {\r\n            this.hasChange = true;\r\n            this.$emit(\"input\", editor.getContent());\r\n          });\r\n        },\r\n        setup(editor) {\r\n          editor.on(\"FullscreenStateChanged\", e => {\r\n            _this.fullscreen = e.state;\r\n          });\r\n        },\r\n        // it will try to keep these URLs intact\r\n        // https://www.tiny.cloud/docs-3x/reference/configuration/Configuration3x@convert_urls/\r\n        // https://stackoverflow.com/questions/5196205/disable-tinymce-absolute-to-relative-url-conversions\r\n        convert_urls: false\r\n        // 整合七牛上传\r\n        // images_dataimg_filter(img) {\r\n        //   setTimeout(() => {\r\n        //     const $image = $(img);\r\n        //     $image.removeAttr('width');\r\n        //     $image.removeAttr('height');\r\n        //     if ($image[0].height && $image[0].width) {\r\n        //       $image.attr('data-wscntype', 'image');\r\n        //       $image.attr('data-wscnh', $image[0].height);\r\n        //       $image.attr('data-wscnw', $image[0].width);\r\n        //       $image.addClass('wscnph');\r\n        //     }\r\n        //   }, 0);\r\n        //   return img\r\n        // },\r\n        // images_upload_handler(blobInfo, success, failure, progress) {\r\n        //   progress(0);\r\n        //   const token = _this.$store.getters.token;\r\n        //   getToken(token).then(response => {\r\n        //     const url = response.data.qiniu_url;\r\n        //     const formData = new FormData();\r\n        //     formData.append('token', response.data.qiniu_token);\r\n        //     formData.append('key', response.data.qiniu_key);\r\n        //     formData.append('file', blobInfo.blob(), url);\r\n        //     upload(formData).then(() => {\r\n        //       success(url);\r\n        //       progress(100);\r\n        //     })\r\n        //   }).catch(err => {\r\n        //     failure('出现未知问题，刷新页面，或者联系程序员')\r\n        //     console.log(err);\r\n        //   });\r\n        // },\r\n      });\r\n    },\r\n    destroyTinymce() {\r\n      const tinymce = window.tinymce.get(this.tinymceId);\r\n      if (this.fullscreen) {\r\n        tinymce.execCommand(\"mceFullScreen\");\r\n      }\r\n\r\n      if (tinymce) {\r\n        tinymce.destroy();\r\n      }\r\n    },\r\n    setContent(value) {\r\n      window.tinymce.get(this.tinymceId).setContent(value);\r\n    },\r\n    getContent() {\r\n      window.tinymce.get(this.tinymceId).getContent();\r\n    },\r\n    imageSuccessCBK(arr) {\r\n      arr.forEach(v =>\r\n        window.tinymce\r\n          .get(this.tinymceId)\r\n          .insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`)\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tinymce-container {\r\n  position: relative;\r\n  line-height: normal;\r\n\r\n  >>> .mce-reset {\r\n    white-space: inherit;\r\n  }\r\n}\r\n\r\n.tinymce-container {\r\n  ::v-deep {\r\n    .mce-fullscreen {\r\n      z-index: 10000;\r\n    }\r\n  }\r\n}\r\n\r\n.tinymce-textarea {\r\n  visibility: hidden;\r\n  z-index: -1;\r\n}\r\n\r\n.editor-custom-btn-container {\r\n  position: absolute;\r\n  right: 4px;\r\n  top: 4px;\r\n  /*z-index: 2005;*/\r\n}\r\n\r\n.fullscreen .editor-custom-btn-container {\r\n  z-index: 10000;\r\n  position: fixed;\r\n}\r\n\r\n.editor-upload-btn {\r\n  display: inline-block;\r\n}\r\n</style>\r\n"]}]}